"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@kinde";
exports.ids = ["vendor-chunks/@kinde"];
exports.modules = {

/***/ "(action-browser)/./node_modules/@kinde/js-utils/dist/js-utils.js":
/*!*******************************************************!*\
  !*** ./node_modules/@kinde/js-utils/dist/js-utils.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChromeStore: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.W),\n/* harmony export */   ExpoSecureStore: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.E),\n/* harmony export */   IssuerRouteTypes: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.a0),\n/* harmony export */   LocalStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.X),\n/* harmony export */   MemoryStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.V),\n/* harmony export */   PortalPage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__._),\n/* harmony export */   ProfilePage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.$),\n/* harmony export */   PromptTypes: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.Z),\n/* harmony export */   RefreshType: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.a1),\n/* harmony export */   Scopes: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.Y),\n/* harmony export */   StorageKeys: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.a),\n/* harmony export */   base64UrlEncode: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.c),\n/* harmony export */   checkAuth: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.i),\n/* harmony export */   clearActiveStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.K),\n/* harmony export */   clearInsecureStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.O),\n/* harmony export */   clearRefreshTimer: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.l),\n/* harmony export */   exchangeAuthCode: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.h),\n/* harmony export */   extractAuthResults: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.e),\n/* harmony export */   frameworkSettings: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.n),\n/* harmony export */   generateAuthUrl: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.f),\n/* harmony export */   generateKindeSDKHeader: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.q),\n/* harmony export */   generatePortalUrl: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.p),\n/* harmony export */   generateProfileUrl: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.o),\n/* harmony export */   generateRandomString: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.g),\n/* harmony export */   getActiveStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.I),\n/* harmony export */   getClaim: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.r),\n/* harmony export */   getClaims: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.t),\n/* harmony export */   getCurrentOrganization: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.u),\n/* harmony export */   getDecodedToken: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.w),\n/* harmony export */   getEntitlements: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.A),\n/* harmony export */   getFlag: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.x),\n/* harmony export */   getInsecureStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.M),\n/* harmony export */   getPermission: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.z),\n/* harmony export */   getPermissions: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.B),\n/* harmony export */   getRawToken: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.v),\n/* harmony export */   getRoles: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.D),\n/* harmony export */   getUserOrganizations: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.C),\n/* harmony export */   getUserProfile: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.y),\n/* harmony export */   has: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.P),\n/* harmony export */   hasActiveStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.J),\n/* harmony export */   hasBillingEntitlements: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.U),\n/* harmony export */   hasFeatureFlags: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.T),\n/* harmony export */   hasInsecureStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.N),\n/* harmony export */   hasPermissions: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.Q),\n/* harmony export */   hasRoles: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.R),\n/* harmony export */   isAuthenticated: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.F),\n/* harmony export */   isCustomDomain: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.j),\n/* harmony export */   mapLoginMethodParamsForUrl: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.m),\n/* harmony export */   refreshToken: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.G),\n/* harmony export */   sanitizeUrl: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.d),\n/* harmony export */   setActiveStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.H),\n/* harmony export */   setInsecureStorage: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.L),\n/* harmony export */   setRefreshTimer: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.k),\n/* harmony export */   splitString: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.s),\n/* harmony export */   storageSettings: () => (/* reexport safe */ _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__.b)\n/* harmony export */ });\n/* harmony import */ var _main_D22foZsM_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main-D22foZsM.js */ \"(action-browser)/./node_modules/@kinde/js-utils/dist/main-D22foZsM.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Aa2luZGUvanMtdXRpbHMvZGlzdC9qcy11dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE0ZDtBQXlEMWQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkZW50LWF0dGVuZGFuY2UtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGtpbmRlL2pzLXV0aWxzL2Rpc3QvanMtdXRpbHMuanM/MGY4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXIGFzIHMsIEUgYXMgdCwgYTAgYXMgciwgWCBhcyBvLCBWIGFzIGcsIF8gYXMgaSwgJCBhcyBuLCBaIGFzIGwsIGExIGFzIGMsIFkgYXMgaCwgYSBhcyBtLCBjIGFzIFMsIGkgYXMgdSwgSyBhcyBQLCBPIGFzIGQsIGwgYXMgZiwgaCBhcyBwLCBlIGFzIEEsIG4gYXMgUiwgZiBhcyBULCBxIGFzIFUsIHAgYXMgQywgbyBhcyBrLCBnIGFzIHksIEksIHIgYXMgdiwgdCBhcyB4LCB1IGFzIEUsIHcgYXMgRiwgQSBhcyB6LCB4IGFzIEQsIE0gYXMgSywgeiBhcyB3LCBCIGFzIEwsIHYgYXMgTSwgRCBhcyBPLCBDIGFzIGIsIHkgYXMgQiwgUCBhcyBILCBKIGFzIGosIFUgYXMgcSwgVCBhcyBHLCBOIGFzIEosIFEgYXMgTiwgUiBhcyBRLCBGIGFzIFYsIGogYXMgVywgbSBhcyBYLCBHIGFzIFksIGQgYXMgWiwgSCBhcyBfLCBMIGFzICQsIGsgYXMgZWUsIHMgYXMgYWUsIGIgYXMgc2UgfSBmcm9tIFwiLi9tYWluLUQyMmZvWnNNLmpzXCI7XG5leHBvcnQge1xuICBzIGFzIENocm9tZVN0b3JlLFxuICB0IGFzIEV4cG9TZWN1cmVTdG9yZSxcbiAgciBhcyBJc3N1ZXJSb3V0ZVR5cGVzLFxuICBvIGFzIExvY2FsU3RvcmFnZSxcbiAgZyBhcyBNZW1vcnlTdG9yYWdlLFxuICBpIGFzIFBvcnRhbFBhZ2UsXG4gIG4gYXMgUHJvZmlsZVBhZ2UsXG4gIGwgYXMgUHJvbXB0VHlwZXMsXG4gIGMgYXMgUmVmcmVzaFR5cGUsXG4gIGggYXMgU2NvcGVzLFxuICBtIGFzIFN0b3JhZ2VLZXlzLFxuICBTIGFzIGJhc2U2NFVybEVuY29kZSxcbiAgdSBhcyBjaGVja0F1dGgsXG4gIFAgYXMgY2xlYXJBY3RpdmVTdG9yYWdlLFxuICBkIGFzIGNsZWFySW5zZWN1cmVTdG9yYWdlLFxuICBmIGFzIGNsZWFyUmVmcmVzaFRpbWVyLFxuICBwIGFzIGV4Y2hhbmdlQXV0aENvZGUsXG4gIEEgYXMgZXh0cmFjdEF1dGhSZXN1bHRzLFxuICBSIGFzIGZyYW1ld29ya1NldHRpbmdzLFxuICBUIGFzIGdlbmVyYXRlQXV0aFVybCxcbiAgVSBhcyBnZW5lcmF0ZUtpbmRlU0RLSGVhZGVyLFxuICBDIGFzIGdlbmVyYXRlUG9ydGFsVXJsLFxuICBrIGFzIGdlbmVyYXRlUHJvZmlsZVVybCxcbiAgeSBhcyBnZW5lcmF0ZVJhbmRvbVN0cmluZyxcbiAgSSBhcyBnZXRBY3RpdmVTdG9yYWdlLFxuICB2IGFzIGdldENsYWltLFxuICB4IGFzIGdldENsYWltcyxcbiAgRSBhcyBnZXRDdXJyZW50T3JnYW5pemF0aW9uLFxuICBGIGFzIGdldERlY29kZWRUb2tlbixcbiAgeiBhcyBnZXRFbnRpdGxlbWVudHMsXG4gIEQgYXMgZ2V0RmxhZyxcbiAgSyBhcyBnZXRJbnNlY3VyZVN0b3JhZ2UsXG4gIHcgYXMgZ2V0UGVybWlzc2lvbixcbiAgTCBhcyBnZXRQZXJtaXNzaW9ucyxcbiAgTSBhcyBnZXRSYXdUb2tlbixcbiAgTyBhcyBnZXRSb2xlcyxcbiAgYiBhcyBnZXRVc2VyT3JnYW5pemF0aW9ucyxcbiAgQiBhcyBnZXRVc2VyUHJvZmlsZSxcbiAgSCBhcyBoYXMsXG4gIGogYXMgaGFzQWN0aXZlU3RvcmFnZSxcbiAgcSBhcyBoYXNCaWxsaW5nRW50aXRsZW1lbnRzLFxuICBHIGFzIGhhc0ZlYXR1cmVGbGFncyxcbiAgSiBhcyBoYXNJbnNlY3VyZVN0b3JhZ2UsXG4gIE4gYXMgaGFzUGVybWlzc2lvbnMsXG4gIFEgYXMgaGFzUm9sZXMsXG4gIFYgYXMgaXNBdXRoZW50aWNhdGVkLFxuICBXIGFzIGlzQ3VzdG9tRG9tYWluLFxuICBYIGFzIG1hcExvZ2luTWV0aG9kUGFyYW1zRm9yVXJsLFxuICBZIGFzIHJlZnJlc2hUb2tlbixcbiAgWiBhcyBzYW5pdGl6ZVVybCxcbiAgXyBhcyBzZXRBY3RpdmVTdG9yYWdlLFxuICAkIGFzIHNldEluc2VjdXJlU3RvcmFnZSxcbiAgZWUgYXMgc2V0UmVmcmVzaFRpbWVyLFxuICBhZSBhcyBzcGxpdFN0cmluZyxcbiAgc2UgYXMgc3RvcmFnZVNldHRpbmdzXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@kinde/js-utils/dist/js-utils.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@kinde/js-utils/dist/main-D22foZsM.js":
/*!************************************************************!*\
  !*** ./node_modules/@kinde/js-utils/dist/main-D22foZsM.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ Q),\n/* harmony export */   A: () => (/* binding */ he),\n/* harmony export */   B: () => (/* binding */ se),\n/* harmony export */   C: () => (/* binding */ ze),\n/* harmony export */   D: () => (/* binding */ ie),\n/* harmony export */   E: () => (/* binding */ qe),\n/* harmony export */   F: () => (/* binding */ Fe),\n/* harmony export */   G: () => (/* binding */ x),\n/* harmony export */   H: () => (/* binding */ Le),\n/* harmony export */   I: () => (/* binding */ _),\n/* harmony export */   J: () => (/* binding */ Ne),\n/* harmony export */   K: () => (/* binding */ De),\n/* harmony export */   L: () => (/* binding */ Ve),\n/* harmony export */   M: () => (/* binding */ C),\n/* harmony export */   N: () => (/* binding */ Me),\n/* harmony export */   O: () => (/* binding */ je),\n/* harmony export */   P: () => (/* binding */ Ie),\n/* harmony export */   Q: () => (/* binding */ ae),\n/* harmony export */   R: () => (/* binding */ le),\n/* harmony export */   S: () => (/* binding */ F),\n/* harmony export */   T: () => (/* binding */ de),\n/* harmony export */   U: () => (/* binding */ me),\n/* harmony export */   V: () => (/* binding */ Ce),\n/* harmony export */   W: () => (/* binding */ Te),\n/* harmony export */   X: () => (/* binding */ Ae),\n/* harmony export */   Y: () => (/* binding */ Z),\n/* harmony export */   Z: () => (/* binding */ j),\n/* harmony export */   _: () => (/* binding */ B),\n/* harmony export */   a: () => (/* binding */ i),\n/* harmony export */   a0: () => (/* binding */ I),\n/* harmony export */   a1: () => (/* binding */ w),\n/* harmony export */   b: () => (/* binding */ c),\n/* harmony export */   c: () => (/* binding */ V),\n/* harmony export */   d: () => (/* binding */ b),\n/* harmony export */   e: () => (/* binding */ Se),\n/* harmony export */   f: () => (/* binding */ ve),\n/* harmony export */   g: () => (/* binding */ E),\n/* harmony export */   h: () => (/* binding */ $e),\n/* harmony export */   i: () => (/* binding */ xe),\n/* harmony export */   j: () => (/* binding */ $),\n/* harmony export */   k: () => (/* binding */ q),\n/* harmony export */   l: () => (/* binding */ R),\n/* harmony export */   m: () => (/* binding */ O),\n/* harmony export */   n: () => (/* binding */ y),\n/* harmony export */   o: () => (/* binding */ Be),\n/* harmony export */   p: () => (/* binding */ _e),\n/* harmony export */   q: () => (/* binding */ te),\n/* harmony export */   r: () => (/* binding */ L),\n/* harmony export */   s: () => (/* binding */ z),\n/* harmony export */   t: () => (/* binding */ G),\n/* harmony export */   u: () => (/* binding */ Ee),\n/* harmony export */   v: () => (/* binding */ Pe),\n/* harmony export */   w: () => (/* binding */ m),\n/* harmony export */   x: () => (/* binding */ Ue),\n/* harmony export */   y: () => (/* binding */ be),\n/* harmony export */   z: () => (/* binding */ Re)\n/* harmony export */ });\nvar Z = /* @__PURE__ */ ((e) => (e.email = \"email\", e.profile = \"profile\", e.openid = \"openid\", e.offline_access = \"offline\", e))(Z || {}), j = /* @__PURE__ */ ((e) => (e.none = \"none\", e.create = \"create\", e.login = \"login\", e))(j || {}), B = /* @__PURE__ */ ((e) => (e.organizationDetails = \"organization_details\", e.organizationMembers = \"organization_members\", e.organizationPlanDetails = \"organization_plan_details\", e.organizationPaymentDetails = \"organization_payment_details\", e.organizationPlanSelection = \"organization_plan_selection\", e.paymentDetails = \"payment_details\", e.planSelection = \"plan_selection\", e.planDetails = \"plan_details\", e.profile = \"profile\", e))(B || {}), Q = /* @__PURE__ */ ((e) => (e.organizationDetails = \"organization_details\", e.organizationMembers = \"organization_members\", e.organizationPlanDetails = \"organization_plan_details\", e.organizationPaymentDetails = \"organization_payment_details\", e.organizationPlanSelection = \"organization_plan_selection\", e.profile = \"profile\", e))(Q || {}), I = /* @__PURE__ */ ((e) => (e.logout = \"logout\", e.login = \"login\", e.register = \"registration\", e.token = \"token\", e.profile = \"profile\", e))(I || {}), w = /* @__PURE__ */ ((e) => (e[e.refreshToken = 0] = \"refreshToken\", e[e.cookie = 1] = \"cookie\", e))(w || {});\nconst V = (e) => {\n  const t = (a) => btoa(a).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n  if (e instanceof ArrayBuffer) {\n    const a = new Uint8Array(e), o = String.fromCharCode(...a);\n    return t(o);\n  }\n  const s = new TextEncoder().encode(e), n = String.fromCharCode(...s);\n  return t(n);\n}, E = (e = 28) => {\n  if (crypto) {\n    const t = new Uint8Array(e / 2);\n    return crypto.getRandomValues(t), Array.from(t, X).join(\"\");\n  } else\n    return Y(e);\n};\nfunction X(e) {\n  return e.toString(16).padStart(2, \"0\");\n}\nfunction Y(e = 28) {\n  const t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  let r = \"\";\n  const s = t.length;\n  for (let n = 0; n < e; n++)\n    r += t.charAt(Math.floor(Math.random() * s));\n  return r;\n}\nconst Se = (e) => {\n  e = e.split(\"?\")[1];\n  const t = new URLSearchParams(e);\n  return {\n    accessToken: t.get(\"access_token\"),\n    idToken: t.get(\"id_token\"),\n    expiresIn: +(t.get(\"expires_in\") || 0)\n  };\n}, b = (e) => e.replace(/\\/$/, \"\"), O = (e, t = !1) => {\n  const r = Array.isArray(e.audience) ? e.audience.join(\" \") : e.audience || \"\", s = {\n    login_hint: e.loginHint,\n    is_create_org: e.isCreateOrg?.toString(),\n    connection_id: e.connectionId,\n    redirect_uri: e.redirectURL ? t ? e.redirectURL : b(e.redirectURL) : void 0,\n    audience: r,\n    scope: e.scope?.join(\" \") || \"email profile openid offline\",\n    prompt: e.prompt,\n    lang: e.lang,\n    org_code: e.orgCode,\n    org_name: e.orgName,\n    has_success_page: e.hasSuccessPage?.toString(),\n    workflow_deployment_id: e.workflowDeploymentId,\n    supports_reauth: e.supportsReauth?.toString(),\n    plan_interest: e.planInterest,\n    pricing_table_key: e.pricingTableKey,\n    pages_mode: e.pagesMode\n  };\n  return Object.keys(s).forEach(\n    (n) => s[n] === void 0 && delete s[n]\n  ), s;\n}, P = (e) => typeof e != \"object\" || e === null ? e : Array.isArray(e) ? e.map((t) => P(t)) : Object.fromEntries(\n  Object.entries(e).map(([t, r]) => [\n    t.replace(/_([a-z])/g, (s, n) => n.toUpperCase()),\n    P(r)\n  ])\n), K = [\n  // UTM tags\n  \"utm_source\",\n  \"utm_medium\",\n  \"utm_campaign\",\n  \"utm_content\",\n  \"utm_term\",\n  // Google Ads smart campaign tracking\n  \"gclid\",\n  \"click_id\",\n  \"hsa_acc\",\n  \"hsa_cam\",\n  \"hsa_grp\",\n  \"hsa_ad\",\n  \"hsa_src\",\n  \"hsa_tgt\",\n  \"hsa_kw\",\n  \"hsa_mt\",\n  \"hsa_net\",\n  \"hsa_ver\",\n  // Marketing category\n  \"match_type\",\n  \"keyword\",\n  \"device\",\n  \"ad_group_id\",\n  \"campaign_id\",\n  \"creative\",\n  \"network\",\n  \"ad_position\",\n  \"fbclid\",\n  \"li_fat_id\",\n  \"msclkid\",\n  \"twclid\",\n  \"ttclid\"\n], ve = async (e, t = I.login, r, s) => {\n  const n = `${e}/oauth2/auth`, a = C();\n  if (r.reauthState)\n    try {\n      const f = P(\n        JSON.parse(atob(r.reauthState))\n      );\n      r = {\n        ...r,\n        ...f\n      }, delete r.reauthState;\n    } catch (f) {\n      const h = f instanceof Error ? f.message : \"Unknown error\";\n      throw new Error(`Error handing reauth state: ${h}`);\n    }\n  if (!r.clientId)\n    throw new Error(\"Error generating auth URL: Client ID missing\");\n  const o = {\n    client_id: r.clientId,\n    response_type: r.responseType || \"code\",\n    ...O(r, s?.disableUrlSanitization)\n  };\n  r.state || (r.state = E(32)), a && a.setSessionItem(i.state, r.state), o.state = r.state, r.nonce || (r.nonce = E(16)), o.nonce = r.nonce, a && a.setSessionItem(i.nonce, r.nonce);\n  let u = \"\";\n  if (r.codeChallenge)\n    o.code_challenge = r.codeChallenge;\n  else {\n    const { codeVerifier: f, codeChallenge: h } = await ee();\n    u = f, a && a.setSessionItem(i.codeVerifier, f), o.code_challenge = h;\n  }\n  o.code_challenge_method = \"S256\", r.codeChallengeMethod && (o.code_challenge_method = r.codeChallengeMethod), !r.prompt && t === I.register && (o.prompt = j.create), r.properties && Object.keys(r.properties).forEach((f) => {\n    if (!K.includes(f)) {\n      console.warn(\"Unsupported Property for url generation: \", f);\n      return;\n    }\n    const h = r.properties?.[f];\n    h !== void 0 && (o[f] = h);\n  });\n  const l = new URLSearchParams(o).toString();\n  return {\n    url: new URL(`${n}?${l}`),\n    state: o.state,\n    nonce: o.nonce,\n    codeChallenge: o.code_challenge,\n    codeVerifier: u\n  };\n};\nasync function ee() {\n  const e = E(52), t = new TextEncoder().encode(e);\n  let r = \"\";\n  if (!crypto)\n    r = V(btoa(e));\n  else {\n    const s = await crypto.subtle.digest(\"SHA-256\", t);\n    r = V(s);\n  }\n  return { codeVerifier: e, codeChallenge: r };\n}\nlet v;\nfunction q(e, t) {\n  if (R(), typeof window > \"u\")\n    throw new Error(\"setRefreshTimer requires a browser environment\");\n  if (e <= 0)\n    throw new Error(\"Timer duration must be positive\");\n  v = window.setTimeout(\n    t,\n    Math.min(e * 1e3 - 1e4, 864e5)\n  );\n}\nfunction R() {\n  v !== void 0 && (window.clearTimeout(v), v = void 0);\n}\nconst y = {\n  framework: \"\",\n  frameworkVersion: \"\",\n  sdkVersion: \"\"\n}, M = async () => {\n  await C()?.removeItems(\n    i.state,\n    i.nonce,\n    i.codeVerifier\n  );\n}, te = () => `${y.framework}/${y.sdkVersion}/${y.frameworkVersion}/Javascript`, $e = async ({\n  urlParams: e,\n  domain: t,\n  clientId: r,\n  redirectURL: s,\n  autoRefresh: n = !1,\n  onRefresh: a\n}) => {\n  const o = e.get(\"state\"), u = e.get(\"code\");\n  if (!o || !u)\n    return console.error(\"Invalid state or code\"), {\n      success: !1,\n      error: \"Invalid state or code\"\n    };\n  const l = C();\n  if (!l)\n    return console.error(\"No active storage found\"), {\n      success: !1,\n      error: \"Authentication storage is not initialized\"\n    };\n  (!y.framework || !y.frameworkVersion) && console.warn(\n    \"Framework and version not set. Please set the framework and version in the config object\"\n  );\n  const f = await l.getSessionItem(i.state);\n  if (o !== f)\n    return console.error(\"Invalid state\"), {\n      success: !1,\n      error: `Invalid state; supplied ${o}, expected ${f}`\n    };\n  const h = await l.getSessionItem(\n    i.codeVerifier\n  );\n  if (h === null)\n    return console.error(\"Code verifier not found\"), {\n      success: !1,\n      error: \"Code verifier not found\"\n    };\n  const N = {\n    \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n  };\n  y.framework && (N[\"Kinde-SDK\"] = te());\n  const J = {\n    method: \"POST\",\n    ...!c.useInsecureForRefreshToken && $(t) ? {\n      credentials: \"include\"\n    } : {},\n    headers: new Headers(N),\n    body: new URLSearchParams({\n      client_id: r,\n      code: u,\n      code_verifier: h,\n      grant_type: \"authorization_code\",\n      redirect_uri: s\n    })\n  };\n  let p;\n  R();\n  try {\n    if (p = await fetch(`${t}/oauth2/token`, J), !p?.ok) {\n      const k = await p.text();\n      return console.error(\"Token exchange failed:\", p.status, k), {\n        success: !1,\n        error: `Token exchange failed: ${p.status} - ${k}`\n      };\n    }\n  } catch (k) {\n    return M(), console.error(\"Token exchange failed:\", k), {\n      success: !1,\n      error: `Token exchange failed: ${k}`\n    };\n  }\n  const d = await p.json(), D = _();\n  D && D.setItems({\n    [i.accessToken]: d.access_token,\n    [i.idToken]: d.id_token,\n    [i.refreshToken]: d.refresh_token\n  }), (c.useInsecureForRefreshToken || !$(t)) && l.setSessionItem(i.refreshToken, d.refresh_token), n && q(d.expires_in, async () => {\n    x({ domain: t, clientId: r, onRefresh: a });\n  }), M();\n  const W = ((k) => (k.search = \"\", k))(new URL(window.location.toString()));\n  return window.history.replaceState(window.history.state, \"\", W), !d.access_token || !d.id_token || !d.refresh_token ? {\n    success: !1,\n    error: \"No access token received\"\n  } : {\n    success: !0,\n    [i.accessToken]: d.access_token,\n    [i.idToken]: d.id_token,\n    [i.refreshToken]: d.refresh_token\n  };\n};\nfunction re(e) {\n  const r = document.cookie.split(\"; \").find((s) => s.startsWith(`${e}=`));\n  if (!r) return null;\n  try {\n    const s = r.split(\"=\")[1];\n    return s ? decodeURIComponent(s) : null;\n  } catch (s) {\n    return console.error(`Error parsing cookie ${e}:`, s), null;\n  }\n}\nconst ne = \"_kbrte\", xe = async ({\n  domain: e,\n  clientId: t\n}) => {\n  if (!e)\n    return {\n      success: !1,\n      error: \"Domain is required for authentication check\"\n    };\n  if (!t)\n    return {\n      success: !1,\n      error: \"Client ID is required for authentication check\"\n    };\n  const r = $(e), s = c.useInsecureForRefreshToken;\n  let n = null;\n  return r && !s && (n = re(ne)), await x({\n    domain: e,\n    clientId: t,\n    refreshType: n ? w.cookie : w.refreshToken\n  });\n}, $ = (e) => !e.match(\n  /^(?:https?:\\/\\/)?[a-zA-Z0-9][.-a-zA-Z0-9]*\\.kinde\\.com$/i\n);\nfunction z(e, t) {\n  return t <= 0 ? [] : e.match(new RegExp(`.{1,${t}}`, \"g\")) || [];\n}\nvar i = /* @__PURE__ */ ((e) => (e.accessToken = \"accessToken\", e.idToken = \"idToken\", e.refreshToken = \"refreshToken\", e.state = \"state\", e.nonce = \"nonce\", e.codeVerifier = \"codeVerifier\", e))(i || {});\nclass F {\n  async setItems(t) {\n    await Promise.all(\n      Object.entries(t).map(\n        ([r, s]) => this.setSessionItem(r, s)\n      )\n    );\n  }\n  async removeItems(...t) {\n    await Promise.all(\n      t.map((r) => this.removeSessionItem(r))\n    );\n  }\n}\nclass Ce extends F {\n  memCache = {};\n  /**\n   * Clears all items from session store.\n   * @returns {void}\n   */\n  async destroySession() {\n    this.memCache = {};\n  }\n  /**\n   * Sets the provided key-value store to the memory cache.\n   * @param {string} itemKey\n   * @param {unknown} itemValue\n   * @returns {void}\n   */\n  async setSessionItem(t, r) {\n    if (await this.removeSessionItem(t), typeof r == \"string\") {\n      z(r, c.maxLength).forEach(\n        (s, n) => {\n          this.memCache[`${c.keyPrefix}${t}${n}`] = s;\n        }\n      );\n      return;\n    }\n    this.memCache[`${c.keyPrefix}${String(t)}0`] = r;\n  }\n  /**\n   * Gets the item for the provided key from the memory cache.\n   * @param {string} itemKey\n   * @returns {unknown | null}\n   */\n  async getSessionItem(t) {\n    if (this.memCache[`${c.keyPrefix}${String(t)}0`] === void 0)\n      return null;\n    let r = \"\", s = 0, n = `${c.keyPrefix}${String(t)}${s}`;\n    for (; this.memCache[n] !== void 0; )\n      r += this.memCache[n], s++, n = `${c.keyPrefix}${String(t)}${s}`;\n    return r;\n  }\n  /**\n   * Removes the item for the provided key from the memory cache.\n   * @param {string} itemKey\n   * @returns {void}\n   */\n  async removeSessionItem(t) {\n    for (const r in this.memCache)\n      r.startsWith(`${c.keyPrefix}${String(t)}`) && delete this.memCache[r];\n  }\n}\nfunction T(e) {\n  return new Promise((t, r) => {\n    chrome.storage.local.get([e], function(s) {\n      chrome.runtime.lastError ? r(void 0) : t(s[e]);\n    });\n  });\n}\nclass Te extends F {\n  /**\n   * Clears all items from session store.\n   * @returns {void}\n   */\n  async destroySession() {\n    await chrome.storage.local.clear();\n  }\n  /**\n   * Sets the provided key-value store to the chrome.store.local.\n   * @param {string} itemKey\n   * @param {unknown} itemValue\n   * @returns {void}\n   */\n  async setSessionItem(t, r) {\n    if (await this.removeSessionItem(t), typeof r == \"string\") {\n      z(r, c.maxLength).forEach(\n        async (s, n) => {\n          await chrome.storage.local.set({\n            [`${c.keyPrefix}${t}${n}`]: s\n          });\n        }\n      );\n      return;\n    }\n    await chrome.storage.local.set({\n      [`${c.keyPrefix}${t}0`]: r\n    });\n  }\n  /**\n   * Gets the item for the provided key from the chrome.store.local cache.\n   * @param {string} itemKey\n   * @returns {unknown | null}\n   */\n  async getSessionItem(t) {\n    let r = \"\", s = 0, n = `${c.keyPrefix}${String(t)}${s}`;\n    for (; await T(\n      `${c.keyPrefix}${String(t)}${s}`\n    ) !== void 0; )\n      r += await T(n), s++, n = `${c.keyPrefix}${String(t)}${s}`;\n    return r;\n  }\n  /**\n   * Removes the item for the provided key from the chrome.store.local cache.\n   * @param {string} itemKey\n   * @returns {void}\n   */\n  async removeSessionItem(t) {\n    let r = 0;\n    for (; await T(\n      `${c.keyPrefix}${String(t)}${r}`\n    ) !== void 0; )\n      await chrome.storage.local.remove(\n        `${c.keyPrefix}${String(t)}${r}`\n      ), r++;\n  }\n}\nclass Ae extends F {\n  constructor() {\n    super(), c.useInsecureForRefreshToken && console.warn(\"LocalStorage store should not be used in production\");\n  }\n  internalItems = /* @__PURE__ */ new Set();\n  /**\n   * Clears all items from session store.\n   * @returns {void}\n   */\n  async destroySession() {\n    this.internalItems.forEach((t) => {\n      this.removeSessionItem(t);\n    });\n  }\n  /**\n   * Sets the provided key-value store to the localStorage cache.\n   * @param {V} itemKey\n   * @param {unknown} itemValue\n   * @returns {void}\n   */\n  async setSessionItem(t, r) {\n    if (await this.removeSessionItem(t), this.internalItems.add(t), typeof r == \"string\") {\n      z(r, c.maxLength).forEach(\n        (s, n) => {\n          localStorage.setItem(\n            `${c.keyPrefix}${t}${n}`,\n            s\n          );\n        }\n      );\n      return;\n    }\n    localStorage.setItem(\n      `${c.keyPrefix}${t}0`,\n      r\n    );\n  }\n  /**\n   * Gets the item for the provided key from the localStorage cache.\n   * @param {string} itemKey\n   * @returns {unknown | null}\n   */\n  async getSessionItem(t) {\n    if (localStorage.getItem(`${c.keyPrefix}${t}0`) === null)\n      return null;\n    let r = \"\", s = 0, n = `${c.keyPrefix}${String(t)}${s}`;\n    for (; localStorage.getItem(n) !== null; )\n      r += localStorage.getItem(n), s++, n = `${c.keyPrefix}${String(t)}${s}`;\n    return r;\n  }\n  /**\n   * Removes the item for the provided key from the localStorage cache.\n   * @param {V} itemKey\n   * @returns {void}\n   */\n  async removeSessionItem(t) {\n    let r = 0;\n    for (; localStorage.getItem(\n      `${c.keyPrefix}${String(t)}${r}`\n    ) !== null; )\n      localStorage.removeItem(\n        `${c.keyPrefix}${String(t)}${r}`\n      ), r++;\n    this.internalItems.delete(t);\n  }\n}\nconst c = {\n  /**\n   * The prefix to use for the storage keys.\n   */\n  keyPrefix: \"kinde-\",\n  /**\n   * The maximum length of the storage.\n   *\n   * If the length is exceeded the items will be split into multiple storage items.\n   */\n  maxLength: 2e3,\n  /**\n   * Use insecure storage for refresh token.\n   *\n   * Warning: This should only be used when you're not using a custom domain and no backend app to authenticate on.\n   */\n  useInsecureForRefreshToken: !1\n}, H = (e, t) => {\n  if (Array.isArray(e) && Array.isArray(t))\n    return Array.from(/* @__PURE__ */ new Set([...e, ...t]));\n  if (e && typeof e == \"object\" && t && typeof t == \"object\") {\n    const r = { ...e };\n    for (const s of Object.keys(t))\n      s in r ? r[s] = H(r[s], t[s]) : r[s] = t[s];\n    return r;\n  }\n  return t;\n};\nasync function U(e) {\n  const t = _();\n  if (!t)\n    throw new Error(\"No active storage found.\");\n  const r = await t.getSessionItem(i.accessToken);\n  if (!r)\n    throw new Error(\"Authentication token not found.\");\n  const s = await L(\"iss\");\n  if (!s?.value)\n    throw new Error(\"Domain (iss claim) not found.\");\n  let n;\n  try {\n    n = await fetch(`${s.value}/${e}`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${r}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n  } catch (o) {\n    throw new Error(`Failed to fetch from ${s.value}/${e}: ${o}`);\n  }\n  if (!n.ok)\n    throw new Error(`API request failed with status ${n.status}`);\n  return await n.json();\n}\nconst S = async ({\n  url: e\n}) => {\n  let t = [], r = await U(e);\n  if (t = r.data, r.metadata?.has_more) {\n    let s = r.metadata.next_page_starting_after;\n    for (; r.metadata.has_more; )\n      r = await U(\n        `${e}?starting_after=${s}`\n      ), t = H(t, r.data), s = r.metadata.next_page_starting_after;\n  }\n  return t;\n}, se = async (e) => {\n  if (e?.forceApi) {\n    const n = await S({\n      url: \"account_api/v1/permissions\"\n    });\n    return {\n      orgCode: n.org_code,\n      permissions: n.permissions?.map((a) => a.key) || []\n    };\n  }\n  const t = await m();\n  if (!t)\n    return {\n      orgCode: null,\n      permissions: []\n    };\n  const r = t.permissions || t[\"x-hasura-permissions\"] || [];\n  return {\n    orgCode: t.org_code || t[\"x-hasura-org-code\"],\n    permissions: r\n  };\n}, oe = (e) => typeof e == \"object\" && e !== null && \"permission\" in e && \"condition\" in e, ae = async (e) => {\n  if (!e || !e.permissions || e?.permissions?.length === 0)\n    return !0;\n  const { permissions: t } = e;\n  let r;\n  try {\n    r = await se({\n      forceApi: e.forceApi\n    });\n  } catch (n) {\n    return console.error(\"[hasPermissions] Error getting permissions\", n), !1;\n  }\n  return (await Promise.all(\n    t.map(async (n) => oe(n) ? r.permissions.find(\n      (o) => o === n.permission\n    ) ? await n.condition({\n      permissionKey: n.permission,\n      orgCode: r.orgCode\n    }) : !1 : !!r.permissions.find(\n      (o) => o === n\n    ))\n  )).every((n) => n === !0);\n}, ie = async (e) => {\n  const t = await L(\"roles\");\n  if (e?.forceApi || !t?.value)\n    return (await S({\n      url: \"account_api/v1/roles\"\n    })).roles?.map((n) => ({\n      id: n.id,\n      name: n.name,\n      key: n.key\n    })) || [];\n  const r = await m();\n  return r ? !r.roles && !r[\"x-hasura-roles\"] ? (console.warn(\n    \"No roles found in token, ensure roles have been included in the token customisation within the application settings\"\n  ), []) : r.roles || r[\"x-hasura-roles\"] : [];\n}, ce = (e) => typeof e == \"object\" && e !== null && \"role\" in e && \"condition\" in e, le = async (e) => {\n  if (!e || !e.roles || e?.roles?.length === 0)\n    return !0;\n  const { roles: t } = e;\n  let r;\n  try {\n    r = await ie({ forceApi: e.forceApi });\n  } catch (n) {\n    return console.error(\"[hasRoles] Error getting roles\", n), !1;\n  }\n  return (await Promise.all(\n    t.map(async (n) => {\n      if (ce(n)) {\n        const a = r.find(\n          (u) => u.key === n.role\n        );\n        return a ? await n.condition(a) : !1;\n      } else\n        return r.map((o) => o.key).includes(n);\n    })\n  )).every((n) => n === !0);\n}, ue = async (e) => {\n  if (e?.forceApi)\n    return (await S({\n      url: \"account_api/v1/feature_flags\"\n    })).feature_flags?.map((n) => ({\n      key: n.key,\n      value: n.value,\n      type: n.type\n    })) || [];\n  const t = await m();\n  if (!t)\n    return null;\n  const r = t.feature_flags || t[\"x-hasura-feature-flags\"];\n  return r ? Object.entries(r).map(([s, n]) => ({\n    key: s,\n    value: n.v,\n    type: n.t\n  })) : null;\n}, fe = (e) => typeof e == \"object\" && e !== null && \"flag\" in e && \"value\" in e, de = async (e) => {\n  if (!e || !e.featureFlags || e?.featureFlags?.length === 0)\n    return !0;\n  const { featureFlags: t } = e;\n  let r;\n  try {\n    r = await ue({ forceApi: e.forceApi });\n  } catch (n) {\n    return console.error(\"[hasFeatureFlags] Error getting feature flags\", n), !1;\n  }\n  return t.map((n) => {\n    if (fe(n)) {\n      const a = r?.find((o) => o.key === n.flag);\n      return a !== void 0 && a.value === n.value;\n    } else\n      return r?.find((o) => o.key === n) !== void 0;\n  }).every((n) => n === !0);\n}, he = async () => {\n  const e = await S({\n    url: \"account_api/v1/entitlements\"\n  });\n  return {\n    orgCode: e.org_code,\n    plans: e.plans?.map((t) => ({\n      key: t.key,\n      subscribedOn: t.subscribed_on\n    })) || [],\n    entitlements: e.entitlements?.map((t) => ({\n      id: t.id,\n      fixedCharge: t.fixed_charge,\n      priceName: t.price_name,\n      unitAmount: t.unit_amount,\n      featureKey: t.feature_key,\n      featureName: t.feature_name,\n      entitlementLimitMax: t.entitlement_limit_max,\n      entitlementLimitMin: t.entitlement_limit_min\n    })) || []\n  };\n}, ge = (e) => typeof e == \"object\" && e !== null && \"entitlement\" in e && \"condition\" in e, me = async (e) => {\n  if (!e || !e.billingEntitlements || e?.billingEntitlements?.length === 0)\n    return !0;\n  const { billingEntitlements: t } = e;\n  let r;\n  try {\n    r = await he();\n  } catch (n) {\n    return console.error(\"[hasBillingEntitlements] Error getting entitlements\", n), !1;\n  }\n  return (await Promise.all(\n    t.map(async (n) => {\n      if (ge(n)) {\n        const a = r.entitlements.find(\n          (o) => o.priceName === n.entitlement\n        );\n        return a ? await n.condition(a) : !1;\n      } else\n        return r.entitlements.map(\n          (o) => o.priceName\n        ).includes(n);\n    })\n  )).every((n) => n === !0);\n}, A = (e) => e !== void 0 && typeof e == \"object\", Ie = async (e) => {\n  const t = [];\n  return e.roles && t.push(\n    le({\n      roles: e.roles,\n      forceApi: A(e.forceApi) ? e.forceApi.roles : e.forceApi\n    })\n  ), e.permissions && t.push(\n    ae({\n      permissions: e.permissions,\n      forceApi: A(e.forceApi) ? e.forceApi.permissions : e.forceApi\n    })\n  ), e.featureFlags && t.push(\n    de({\n      featureFlags: e.featureFlags,\n      forceApi: A(e.forceApi) ? e.forceApi.featureFlags : e.forceApi\n    })\n  ), e.billingEntitlements && t.push(\n    me({\n      billingEntitlements: e.billingEntitlements\n    })\n  ), (await Promise.all(t)).every(Boolean);\n};\nfunction ke(e, t) {\n  if (!e)\n    return null;\n  const r = e.split(\".\");\n  if (r.length !== 3)\n    return null;\n  const s = r[\n    1\n    /* body */\n  ].replace(/-/g, \"+\").replace(/_/g, \"/\"), n = decodeURIComponent(\n    atob(s).split(\"\").map((a) => \"%\" + (\"00\" + a.charCodeAt(0).toString(16)).slice(-2)).join(\"\")\n  );\n  return JSON.parse(n);\n}\nconst m = async (e = i.accessToken) => {\n  const t = _();\n  if (!t)\n    return null;\n  const r = await t.getSessionItem(\n    e === \"accessToken\" ? i.accessToken : i.idToken\n  );\n  if (!r)\n    return null;\n  const s = ke(r);\n  return s || console.warn(\"No decoded token found\"), s;\n}, G = async (e = \"accessToken\") => m(e), L = async (e, t = \"accessToken\") => {\n  const r = await G(t);\n  return r ? {\n    name: e,\n    value: r[e]\n  } : null;\n}, Ee = async () => {\n  const e = await m();\n  return e ? e.org_code || e[\"x-hasura-org-code\"] : null;\n}, Pe = async (e = i.accessToken) => {\n  const t = _();\n  if (!t)\n    return null;\n  const r = await t.getSessionItem(\n    e === \"accessToken\" ? i.accessToken : i.idToken\n  );\n  return r || null;\n}, Ue = async (e, t) => {\n  if (t?.forceApi) {\n    const o = (await S({\n      url: \"account_api/v1/feature_flags\"\n    })).feature_flags.find((u) => u.name === e);\n    return o ? o.value : null;\n  }\n  const r = await m();\n  if (!r)\n    return null;\n  const s = r.feature_flags || r[\"x-hasura-feature-flags\"];\n  return s ? s[e]?.v ?? null : null;\n}, be = async () => {\n  const e = await G(\"idToken\");\n  if (!e)\n    return null;\n  const { sub: t } = e;\n  return t ? {\n    id: e.sub,\n    givenName: e.given_name,\n    familyName: e.family_name,\n    email: e.email,\n    picture: e.picture\n  } : (console.error(\"No sub in idToken\"), null);\n}, Re = async (e, t) => {\n  if (t?.forceApi)\n    return U(\n      `account_api/v1/permission/${encodeURIComponent(e)}`\n    );\n  const r = await m();\n  if (!r)\n    return {\n      permissionKey: e,\n      orgCode: null,\n      isGranted: !1\n    };\n  const s = r.permissions || [];\n  return {\n    permissionKey: e,\n    orgCode: r.org_code,\n    isGranted: !!s.includes(e)\n  };\n}, ze = async () => {\n  const e = await m(\"idToken\");\n  return e ? !e.org_codes && !e[\"x-hasura-org-codes\"] ? (console.warn(\n    \"Org codes not found in token, ensure org codes have been included in the token customisation within the application settings\"\n  ), null) : e.org_codes || e[\"x-hasura-org-codes\"] : null;\n}, Fe = async (e) => {\n  try {\n    const t = await m(\"accessToken\");\n    if (!t) return !1;\n    if (!t.exp)\n      return console.error(\"Token does not have an expiry\"), !1;\n    const r = t.exp < Math.floor(Date.now() / 1e3);\n    return r && e?.useRefreshToken ? (await x({\n      domain: e.domain,\n      clientId: e.clientId\n    })).success : !r;\n  } catch (t) {\n    return console.error(\"Error checking authentication:\", t), !1;\n  }\n}, x = async ({\n  domain: e,\n  clientId: t,\n  refreshType: r = w.refreshToken,\n  onRefresh: s\n}) => {\n  const n = (u) => (s && s(u), u);\n  if (!e)\n    return n({\n      success: !1,\n      error: \"Domain is required for token refresh\"\n    });\n  if (!t)\n    return n({\n      success: !1,\n      error: \"Client ID is required for token refresh\"\n    });\n  let a = \"\", o;\n  if (c.useInsecureForRefreshToken || !$(e) ? o = C() : o = _(), r === w.refreshToken) {\n    if (!o)\n      return n({\n        success: !1,\n        error: \"No active storage found\"\n      });\n    if (a = await o.getSessionItem(\n      i.refreshToken\n    ), !a)\n      return n({\n        success: !1,\n        error: \"No refresh token found\"\n      });\n  }\n  R();\n  try {\n    const u = await fetch(`${b(e)}/oauth2/token`, {\n      method: \"POST\",\n      ...r === w.cookie && { credentials: \"include\" },\n      headers: {\n        \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n      },\n      body: new URLSearchParams({\n        ...r === w.refreshToken && {\n          refresh_token: a\n        },\n        grant_type: \"refresh_token\",\n        client_id: t\n      }).toString()\n    });\n    if (!u.ok)\n      return n({\n        success: !1,\n        error: \"Failed to refresh token\"\n      });\n    const l = await u.json();\n    if (l.access_token) {\n      const f = _();\n      return f ? (q(l.expires_in, async () => {\n        x({ domain: e, clientId: t, refreshType: r, onRefresh: s });\n      }), o && (await f.setSessionItem(\n        i.accessToken,\n        l.access_token\n      ), l.id_token && await f.setSessionItem(i.idToken, l.id_token), l.refresh_token && await o.setSessionItem(\n        i.refreshToken,\n        l.refresh_token\n      )), n({\n        success: !0,\n        [i.accessToken]: l.access_token,\n        [i.idToken]: l.id_token,\n        [i.refreshToken]: l.refresh_token\n      })) : n({\n        success: !1,\n        error: \"No active storage found\"\n      });\n    }\n  } catch (u) {\n    return n({\n      success: !1,\n      error: `No access token received: ${u}`\n    });\n  }\n  return n({\n    success: !1,\n    error: \"No access token received\"\n  });\n}, g = {\n  secure: null,\n  insecure: null\n}, Le = (e) => {\n  g.secure = e;\n}, _ = () => g.secure || null, Ne = () => g.secure !== null, De = () => {\n  g.secure = null;\n}, Ve = (e) => {\n  g.insecure = e;\n}, C = () => g.insecure || g.secure || null, Me = () => g.insecure !== null, je = () => {\n  g.insecure = null;\n}, Be = async (e) => (console.warn(\n  \"Warning: generateProfileUrl is deprecated. Please use generatePortalUrl instead.\"\n), _e({\n  domain: e.domain,\n  returnUrl: e.returnUrl,\n  subNav: e.subNav\n}));\nfunction we(e, t = []) {\n  try {\n    const r = new URL(e);\n    return !t.includes(r.protocol) && !!r.host;\n  } catch {\n    return !1;\n  }\n}\nconst _e = async ({\n  domain: e,\n  returnUrl: t,\n  subNav: r\n}) => {\n  const s = _();\n  if (!s)\n    throw new Error(\"generatePortalUrl: Active storage not found\");\n  const n = await s.getSessionItem(\n    i.accessToken\n  );\n  if (!n)\n    throw new Error(\"generatePortalUrl: Access Token not found\");\n  if (!e || typeof e != \"string\") {\n    const l = await L(\"iss\");\n    if (!l?.value || typeof l.value != \"string\")\n      throw new Error(\n        \"generatePortalUrl: Unable to determine domain from access token\"\n      );\n    e = l.value;\n  }\n  if (!we(t, [\"ftp:\", \"ws:\"]))\n    throw new Error(\"generatePortalUrl: returnUrl must be an absolute URL\");\n  const a = new URLSearchParams({\n    subnav: r || B.profile,\n    return_url: t\n  }), o = await fetch(\n    `${b(e)}/account_api/v1/portal_link?${a.toString()}`,\n    {\n      headers: {\n        Authorization: `Bearer ${n}`\n      }\n    }\n  );\n  if (!o.ok)\n    throw new Error(\n      `Failed to fetch profile URL: ${o.status} ${o.statusText}`\n    );\n  const u = await o.json();\n  if (!u.url || typeof u.url != \"string\")\n    throw new Error(\"Invalid URL received from API\");\n  try {\n    return {\n      url: new URL(u.url)\n    };\n  } catch (l) {\n    throw console.error(l), new Error(`Invalid URL format received from API: ${u.url}`);\n  }\n}, qe = {\n  __esModule: !0,\n  default: async () => (await import(\n    /* webpackIgnore: true */\n    \"./expoSecureStore-DT0Gf-SP.js\"\n  )).ExpoSecureStore\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Aa2luZGUvanMtdXRpbHMvZGlzdC9tYWluLUQyMmZvWnNNLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEseUlBQXlJLG9HQUFvRyxpY0FBaWMsdVZBQXVWLDBKQUEwSiwrR0FBK0c7QUFDOXdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsRUFBRTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBLHFEQUFxRCxFQUFFO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxv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QUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osQ0FBQztBQUNEO0FBQ0E7QUFDQSxtQ0FBbUMsc0JBQXNCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsS0FBSztBQUNsQztBQUNBLDZCQUE2Qix3QkFBd0I7QUFDckQ7QUFDQSw0REFBNEQ7QUFDNUQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0RBQXNEO0FBQ2xFLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSwwQ0FBMEMsRUFBRTtBQUM1QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsT0FBTyxLQUFLLDhCQUE4QixhQUFhO0FBQ3ZEO0FBQ0E7QUFDQSxpQ0FBaUMsRUFBRTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLFVBQVUsRUFBRSxhQUFhO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osK0VBQStFLE1BQU07QUFDckY7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMERFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGVudC1hdHRlbmRhbmNlLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BraW5kZS9qcy11dGlscy9kaXN0L21haW4tRDIyZm9ac00uanM/NzRkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgWiA9IC8qIEBfX1BVUkVfXyAqLyAoKGUpID0+IChlLmVtYWlsID0gXCJlbWFpbFwiLCBlLnByb2ZpbGUgPSBcInByb2ZpbGVcIiwgZS5vcGVuaWQgPSBcIm9wZW5pZFwiLCBlLm9mZmxpbmVfYWNjZXNzID0gXCJvZmZsaW5lXCIsIGUpKShaIHx8IHt9KSwgaiA9IC8qIEBfX1BVUkVfXyAqLyAoKGUpID0+IChlLm5vbmUgPSBcIm5vbmVcIiwgZS5jcmVhdGUgPSBcImNyZWF0ZVwiLCBlLmxvZ2luID0gXCJsb2dpblwiLCBlKSkoaiB8fCB7fSksIEIgPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5vcmdhbml6YXRpb25EZXRhaWxzID0gXCJvcmdhbml6YXRpb25fZGV0YWlsc1wiLCBlLm9yZ2FuaXphdGlvbk1lbWJlcnMgPSBcIm9yZ2FuaXphdGlvbl9tZW1iZXJzXCIsIGUub3JnYW5pemF0aW9uUGxhbkRldGFpbHMgPSBcIm9yZ2FuaXphdGlvbl9wbGFuX2RldGFpbHNcIiwgZS5vcmdhbml6YXRpb25QYXltZW50RGV0YWlscyA9IFwib3JnYW5pemF0aW9uX3BheW1lbnRfZGV0YWlsc1wiLCBlLm9yZ2FuaXphdGlvblBsYW5TZWxlY3Rpb24gPSBcIm9yZ2FuaXphdGlvbl9wbGFuX3NlbGVjdGlvblwiLCBlLnBheW1lbnREZXRhaWxzID0gXCJwYXltZW50X2RldGFpbHNcIiwgZS5wbGFuU2VsZWN0aW9uID0gXCJwbGFuX3NlbGVjdGlvblwiLCBlLnBsYW5EZXRhaWxzID0gXCJwbGFuX2RldGFpbHNcIiwgZS5wcm9maWxlID0gXCJwcm9maWxlXCIsIGUpKShCIHx8IHt9KSwgUSA9IC8qIEBfX1BVUkVfXyAqLyAoKGUpID0+IChlLm9yZ2FuaXphdGlvbkRldGFpbHMgPSBcIm9yZ2FuaXphdGlvbl9kZXRhaWxzXCIsIGUub3JnYW5pemF0aW9uTWVtYmVycyA9IFwib3JnYW5pemF0aW9uX21lbWJlcnNcIiwgZS5vcmdhbml6YXRpb25QbGFuRGV0YWlscyA9IFwib3JnYW5pemF0aW9uX3BsYW5fZGV0YWlsc1wiLCBlLm9yZ2FuaXphdGlvblBheW1lbnREZXRhaWxzID0gXCJvcmdhbml6YXRpb25fcGF5bWVudF9kZXRhaWxzXCIsIGUub3JnYW5pemF0aW9uUGxhblNlbGVjdGlvbiA9IFwib3JnYW5pemF0aW9uX3BsYW5fc2VsZWN0aW9uXCIsIGUucHJvZmlsZSA9IFwicHJvZmlsZVwiLCBlKSkoUSB8fCB7fSksIEkgPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5sb2dvdXQgPSBcImxvZ291dFwiLCBlLmxvZ2luID0gXCJsb2dpblwiLCBlLnJlZ2lzdGVyID0gXCJyZWdpc3RyYXRpb25cIiwgZS50b2tlbiA9IFwidG9rZW5cIiwgZS5wcm9maWxlID0gXCJwcm9maWxlXCIsIGUpKShJIHx8IHt9KSwgdyA9IC8qIEBfX1BVUkVfXyAqLyAoKGUpID0+IChlW2UucmVmcmVzaFRva2VuID0gMF0gPSBcInJlZnJlc2hUb2tlblwiLCBlW2UuY29va2llID0gMV0gPSBcImNvb2tpZVwiLCBlKSkodyB8fCB7fSk7XG5jb25zdCBWID0gKGUpID0+IHtcbiAgY29uc3QgdCA9IChhKSA9PiBidG9hKGEpLnJlcGxhY2UoL1xcKy9nLCBcIi1cIikucmVwbGFjZSgvXFwvL2csIFwiX1wiKS5yZXBsYWNlKC89KyQvLCBcIlwiKTtcbiAgaWYgKGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIGNvbnN0IGEgPSBuZXcgVWludDhBcnJheShlKSwgbyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uYSk7XG4gICAgcmV0dXJuIHQobyk7XG4gIH1cbiAgY29uc3QgcyA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShlKSwgbiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ucyk7XG4gIHJldHVybiB0KG4pO1xufSwgRSA9IChlID0gMjgpID0+IHtcbiAgaWYgKGNyeXB0bykge1xuICAgIGNvbnN0IHQgPSBuZXcgVWludDhBcnJheShlIC8gMik7XG4gICAgcmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXModCksIEFycmF5LmZyb20odCwgWCkuam9pbihcIlwiKTtcbiAgfSBlbHNlXG4gICAgcmV0dXJuIFkoZSk7XG59O1xuZnVuY3Rpb24gWChlKSB7XG4gIHJldHVybiBlLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIik7XG59XG5mdW5jdGlvbiBZKGUgPSAyOCkge1xuICBjb25zdCB0ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiO1xuICBsZXQgciA9IFwiXCI7XG4gIGNvbnN0IHMgPSB0Lmxlbmd0aDtcbiAgZm9yIChsZXQgbiA9IDA7IG4gPCBlOyBuKyspXG4gICAgciArPSB0LmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzKSk7XG4gIHJldHVybiByO1xufVxuY29uc3QgU2UgPSAoZSkgPT4ge1xuICBlID0gZS5zcGxpdChcIj9cIilbMV07XG4gIGNvbnN0IHQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGUpO1xuICByZXR1cm4ge1xuICAgIGFjY2Vzc1Rva2VuOiB0LmdldChcImFjY2Vzc190b2tlblwiKSxcbiAgICBpZFRva2VuOiB0LmdldChcImlkX3Rva2VuXCIpLFxuICAgIGV4cGlyZXNJbjogKyh0LmdldChcImV4cGlyZXNfaW5cIikgfHwgMClcbiAgfTtcbn0sIGIgPSAoZSkgPT4gZS5yZXBsYWNlKC9cXC8kLywgXCJcIiksIE8gPSAoZSwgdCA9ICExKSA9PiB7XG4gIGNvbnN0IHIgPSBBcnJheS5pc0FycmF5KGUuYXVkaWVuY2UpID8gZS5hdWRpZW5jZS5qb2luKFwiIFwiKSA6IGUuYXVkaWVuY2UgfHwgXCJcIiwgcyA9IHtcbiAgICBsb2dpbl9oaW50OiBlLmxvZ2luSGludCxcbiAgICBpc19jcmVhdGVfb3JnOiBlLmlzQ3JlYXRlT3JnPy50b1N0cmluZygpLFxuICAgIGNvbm5lY3Rpb25faWQ6IGUuY29ubmVjdGlvbklkLFxuICAgIHJlZGlyZWN0X3VyaTogZS5yZWRpcmVjdFVSTCA/IHQgPyBlLnJlZGlyZWN0VVJMIDogYihlLnJlZGlyZWN0VVJMKSA6IHZvaWQgMCxcbiAgICBhdWRpZW5jZTogcixcbiAgICBzY29wZTogZS5zY29wZT8uam9pbihcIiBcIikgfHwgXCJlbWFpbCBwcm9maWxlIG9wZW5pZCBvZmZsaW5lXCIsXG4gICAgcHJvbXB0OiBlLnByb21wdCxcbiAgICBsYW5nOiBlLmxhbmcsXG4gICAgb3JnX2NvZGU6IGUub3JnQ29kZSxcbiAgICBvcmdfbmFtZTogZS5vcmdOYW1lLFxuICAgIGhhc19zdWNjZXNzX3BhZ2U6IGUuaGFzU3VjY2Vzc1BhZ2U/LnRvU3RyaW5nKCksXG4gICAgd29ya2Zsb3dfZGVwbG95bWVudF9pZDogZS53b3JrZmxvd0RlcGxveW1lbnRJZCxcbiAgICBzdXBwb3J0c19yZWF1dGg6IGUuc3VwcG9ydHNSZWF1dGg/LnRvU3RyaW5nKCksXG4gICAgcGxhbl9pbnRlcmVzdDogZS5wbGFuSW50ZXJlc3QsXG4gICAgcHJpY2luZ190YWJsZV9rZXk6IGUucHJpY2luZ1RhYmxlS2V5LFxuICAgIHBhZ2VzX21vZGU6IGUucGFnZXNNb2RlXG4gIH07XG4gIHJldHVybiBPYmplY3Qua2V5cyhzKS5mb3JFYWNoKFxuICAgIChuKSA9PiBzW25dID09PSB2b2lkIDAgJiYgZGVsZXRlIHNbbl1cbiAgKSwgcztcbn0sIFAgPSAoZSkgPT4gdHlwZW9mIGUgIT0gXCJvYmplY3RcIiB8fCBlID09PSBudWxsID8gZSA6IEFycmF5LmlzQXJyYXkoZSkgPyBlLm1hcCgodCkgPT4gUCh0KSkgOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gIE9iamVjdC5lbnRyaWVzKGUpLm1hcCgoW3QsIHJdKSA9PiBbXG4gICAgdC5yZXBsYWNlKC9fKFthLXpdKS9nLCAocywgbikgPT4gbi50b1VwcGVyQ2FzZSgpKSxcbiAgICBQKHIpXG4gIF0pXG4pLCBLID0gW1xuICAvLyBVVE0gdGFnc1xuICBcInV0bV9zb3VyY2VcIixcbiAgXCJ1dG1fbWVkaXVtXCIsXG4gIFwidXRtX2NhbXBhaWduXCIsXG4gIFwidXRtX2NvbnRlbnRcIixcbiAgXCJ1dG1fdGVybVwiLFxuICAvLyBHb29nbGUgQWRzIHNtYXJ0IGNhbXBhaWduIHRyYWNraW5nXG4gIFwiZ2NsaWRcIixcbiAgXCJjbGlja19pZFwiLFxuICBcImhzYV9hY2NcIixcbiAgXCJoc2FfY2FtXCIsXG4gIFwiaHNhX2dycFwiLFxuICBcImhzYV9hZFwiLFxuICBcImhzYV9zcmNcIixcbiAgXCJoc2FfdGd0XCIsXG4gIFwiaHNhX2t3XCIsXG4gIFwiaHNhX210XCIsXG4gIFwiaHNhX25ldFwiLFxuICBcImhzYV92ZXJcIixcbiAgLy8gTWFya2V0aW5nIGNhdGVnb3J5XG4gIFwibWF0Y2hfdHlwZVwiLFxuICBcImtleXdvcmRcIixcbiAgXCJkZXZpY2VcIixcbiAgXCJhZF9ncm91cF9pZFwiLFxuICBcImNhbXBhaWduX2lkXCIsXG4gIFwiY3JlYXRpdmVcIixcbiAgXCJuZXR3b3JrXCIsXG4gIFwiYWRfcG9zaXRpb25cIixcbiAgXCJmYmNsaWRcIixcbiAgXCJsaV9mYXRfaWRcIixcbiAgXCJtc2Nsa2lkXCIsXG4gIFwidHdjbGlkXCIsXG4gIFwidHRjbGlkXCJcbl0sIHZlID0gYXN5bmMgKGUsIHQgPSBJLmxvZ2luLCByLCBzKSA9PiB7XG4gIGNvbnN0IG4gPSBgJHtlfS9vYXV0aDIvYXV0aGAsIGEgPSBDKCk7XG4gIGlmIChyLnJlYXV0aFN0YXRlKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmID0gUChcbiAgICAgICAgSlNPTi5wYXJzZShhdG9iKHIucmVhdXRoU3RhdGUpKVxuICAgICAgKTtcbiAgICAgIHIgPSB7XG4gICAgICAgIC4uLnIsXG4gICAgICAgIC4uLmZcbiAgICAgIH0sIGRlbGV0ZSByLnJlYXV0aFN0YXRlO1xuICAgIH0gY2F0Y2ggKGYpIHtcbiAgICAgIGNvbnN0IGggPSBmIGluc3RhbmNlb2YgRXJyb3IgPyBmLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgaGFuZGluZyByZWF1dGggc3RhdGU6ICR7aH1gKTtcbiAgICB9XG4gIGlmICghci5jbGllbnRJZClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBnZW5lcmF0aW5nIGF1dGggVVJMOiBDbGllbnQgSUQgbWlzc2luZ1wiKTtcbiAgY29uc3QgbyA9IHtcbiAgICBjbGllbnRfaWQ6IHIuY2xpZW50SWQsXG4gICAgcmVzcG9uc2VfdHlwZTogci5yZXNwb25zZVR5cGUgfHwgXCJjb2RlXCIsXG4gICAgLi4uTyhyLCBzPy5kaXNhYmxlVXJsU2FuaXRpemF0aW9uKVxuICB9O1xuICByLnN0YXRlIHx8IChyLnN0YXRlID0gRSgzMikpLCBhICYmIGEuc2V0U2Vzc2lvbkl0ZW0oaS5zdGF0ZSwgci5zdGF0ZSksIG8uc3RhdGUgPSByLnN0YXRlLCByLm5vbmNlIHx8IChyLm5vbmNlID0gRSgxNikpLCBvLm5vbmNlID0gci5ub25jZSwgYSAmJiBhLnNldFNlc3Npb25JdGVtKGkubm9uY2UsIHIubm9uY2UpO1xuICBsZXQgdSA9IFwiXCI7XG4gIGlmIChyLmNvZGVDaGFsbGVuZ2UpXG4gICAgby5jb2RlX2NoYWxsZW5nZSA9IHIuY29kZUNoYWxsZW5nZTtcbiAgZWxzZSB7XG4gICAgY29uc3QgeyBjb2RlVmVyaWZpZXI6IGYsIGNvZGVDaGFsbGVuZ2U6IGggfSA9IGF3YWl0IGVlKCk7XG4gICAgdSA9IGYsIGEgJiYgYS5zZXRTZXNzaW9uSXRlbShpLmNvZGVWZXJpZmllciwgZiksIG8uY29kZV9jaGFsbGVuZ2UgPSBoO1xuICB9XG4gIG8uY29kZV9jaGFsbGVuZ2VfbWV0aG9kID0gXCJTMjU2XCIsIHIuY29kZUNoYWxsZW5nZU1ldGhvZCAmJiAoby5jb2RlX2NoYWxsZW5nZV9tZXRob2QgPSByLmNvZGVDaGFsbGVuZ2VNZXRob2QpLCAhci5wcm9tcHQgJiYgdCA9PT0gSS5yZWdpc3RlciAmJiAoby5wcm9tcHQgPSBqLmNyZWF0ZSksIHIucHJvcGVydGllcyAmJiBPYmplY3Qua2V5cyhyLnByb3BlcnRpZXMpLmZvckVhY2goKGYpID0+IHtcbiAgICBpZiAoIUsuaW5jbHVkZXMoZikpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlVuc3VwcG9ydGVkIFByb3BlcnR5IGZvciB1cmwgZ2VuZXJhdGlvbjogXCIsIGYpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBoID0gci5wcm9wZXJ0aWVzPy5bZl07XG4gICAgaCAhPT0gdm9pZCAwICYmIChvW2ZdID0gaCk7XG4gIH0pO1xuICBjb25zdCBsID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhvKS50b1N0cmluZygpO1xuICByZXR1cm4ge1xuICAgIHVybDogbmV3IFVSTChgJHtufT8ke2x9YCksXG4gICAgc3RhdGU6IG8uc3RhdGUsXG4gICAgbm9uY2U6IG8ubm9uY2UsXG4gICAgY29kZUNoYWxsZW5nZTogby5jb2RlX2NoYWxsZW5nZSxcbiAgICBjb2RlVmVyaWZpZXI6IHVcbiAgfTtcbn07XG5hc3luYyBmdW5jdGlvbiBlZSgpIHtcbiAgY29uc3QgZSA9IEUoNTIpLCB0ID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGUpO1xuICBsZXQgciA9IFwiXCI7XG4gIGlmICghY3J5cHRvKVxuICAgIHIgPSBWKGJ0b2EoZSkpO1xuICBlbHNlIHtcbiAgICBjb25zdCBzID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoXCJTSEEtMjU2XCIsIHQpO1xuICAgIHIgPSBWKHMpO1xuICB9XG4gIHJldHVybiB7IGNvZGVWZXJpZmllcjogZSwgY29kZUNoYWxsZW5nZTogciB9O1xufVxubGV0IHY7XG5mdW5jdGlvbiBxKGUsIHQpIHtcbiAgaWYgKFIoKSwgdHlwZW9mIHdpbmRvdyA+IFwidVwiKVxuICAgIHRocm93IG5ldyBFcnJvcihcInNldFJlZnJlc2hUaW1lciByZXF1aXJlcyBhIGJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG4gIGlmIChlIDw9IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGltZXIgZHVyYXRpb24gbXVzdCBiZSBwb3NpdGl2ZVwiKTtcbiAgdiA9IHdpbmRvdy5zZXRUaW1lb3V0KFxuICAgIHQsXG4gICAgTWF0aC5taW4oZSAqIDFlMyAtIDFlNCwgODY0ZTUpXG4gICk7XG59XG5mdW5jdGlvbiBSKCkge1xuICB2ICE9PSB2b2lkIDAgJiYgKHdpbmRvdy5jbGVhclRpbWVvdXQodiksIHYgPSB2b2lkIDApO1xufVxuY29uc3QgeSA9IHtcbiAgZnJhbWV3b3JrOiBcIlwiLFxuICBmcmFtZXdvcmtWZXJzaW9uOiBcIlwiLFxuICBzZGtWZXJzaW9uOiBcIlwiXG59LCBNID0gYXN5bmMgKCkgPT4ge1xuICBhd2FpdCBDKCk/LnJlbW92ZUl0ZW1zKFxuICAgIGkuc3RhdGUsXG4gICAgaS5ub25jZSxcbiAgICBpLmNvZGVWZXJpZmllclxuICApO1xufSwgdGUgPSAoKSA9PiBgJHt5LmZyYW1ld29ya30vJHt5LnNka1ZlcnNpb259LyR7eS5mcmFtZXdvcmtWZXJzaW9ufS9KYXZhc2NyaXB0YCwgJGUgPSBhc3luYyAoe1xuICB1cmxQYXJhbXM6IGUsXG4gIGRvbWFpbjogdCxcbiAgY2xpZW50SWQ6IHIsXG4gIHJlZGlyZWN0VVJMOiBzLFxuICBhdXRvUmVmcmVzaDogbiA9ICExLFxuICBvblJlZnJlc2g6IGFcbn0pID0+IHtcbiAgY29uc3QgbyA9IGUuZ2V0KFwic3RhdGVcIiksIHUgPSBlLmdldChcImNvZGVcIik7XG4gIGlmICghbyB8fCAhdSlcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIkludmFsaWQgc3RhdGUgb3IgY29kZVwiKSwge1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogXCJJbnZhbGlkIHN0YXRlIG9yIGNvZGVcIlxuICAgIH07XG4gIGNvbnN0IGwgPSBDKCk7XG4gIGlmICghbClcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIk5vIGFjdGl2ZSBzdG9yYWdlIGZvdW5kXCIpLCB7XG4gICAgICBzdWNjZXNzOiAhMSxcbiAgICAgIGVycm9yOiBcIkF1dGhlbnRpY2F0aW9uIHN0b3JhZ2UgaXMgbm90IGluaXRpYWxpemVkXCJcbiAgICB9O1xuICAoIXkuZnJhbWV3b3JrIHx8ICF5LmZyYW1ld29ya1ZlcnNpb24pICYmIGNvbnNvbGUud2FybihcbiAgICBcIkZyYW1ld29yayBhbmQgdmVyc2lvbiBub3Qgc2V0LiBQbGVhc2Ugc2V0IHRoZSBmcmFtZXdvcmsgYW5kIHZlcnNpb24gaW4gdGhlIGNvbmZpZyBvYmplY3RcIlxuICApO1xuICBjb25zdCBmID0gYXdhaXQgbC5nZXRTZXNzaW9uSXRlbShpLnN0YXRlKTtcbiAgaWYgKG8gIT09IGYpXG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIHN0YXRlXCIpLCB7XG4gICAgICBzdWNjZXNzOiAhMSxcbiAgICAgIGVycm9yOiBgSW52YWxpZCBzdGF0ZTsgc3VwcGxpZWQgJHtvfSwgZXhwZWN0ZWQgJHtmfWBcbiAgICB9O1xuICBjb25zdCBoID0gYXdhaXQgbC5nZXRTZXNzaW9uSXRlbShcbiAgICBpLmNvZGVWZXJpZmllclxuICApO1xuICBpZiAoaCA9PT0gbnVsbClcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIkNvZGUgdmVyaWZpZXIgbm90IGZvdW5kXCIpLCB7XG4gICAgICBzdWNjZXNzOiAhMSxcbiAgICAgIGVycm9yOiBcIkNvZGUgdmVyaWZpZXIgbm90IGZvdW5kXCJcbiAgICB9O1xuICBjb25zdCBOID0ge1xuICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCJcbiAgfTtcbiAgeS5mcmFtZXdvcmsgJiYgKE5bXCJLaW5kZS1TREtcIl0gPSB0ZSgpKTtcbiAgY29uc3QgSiA9IHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIC4uLiFjLnVzZUluc2VjdXJlRm9yUmVmcmVzaFRva2VuICYmICQodCkgPyB7XG4gICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCJcbiAgICB9IDoge30sXG4gICAgaGVhZGVyczogbmV3IEhlYWRlcnMoTiksXG4gICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICBjbGllbnRfaWQ6IHIsXG4gICAgICBjb2RlOiB1LFxuICAgICAgY29kZV92ZXJpZmllcjogaCxcbiAgICAgIGdyYW50X3R5cGU6IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIsXG4gICAgICByZWRpcmVjdF91cmk6IHNcbiAgICB9KVxuICB9O1xuICBsZXQgcDtcbiAgUigpO1xuICB0cnkge1xuICAgIGlmIChwID0gYXdhaXQgZmV0Y2goYCR7dH0vb2F1dGgyL3Rva2VuYCwgSiksICFwPy5vaykge1xuICAgICAgY29uc3QgayA9IGF3YWl0IHAudGV4dCgpO1xuICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJUb2tlbiBleGNoYW5nZSBmYWlsZWQ6XCIsIHAuc3RhdHVzLCBrKSwge1xuICAgICAgICBzdWNjZXNzOiAhMSxcbiAgICAgICAgZXJyb3I6IGBUb2tlbiBleGNoYW5nZSBmYWlsZWQ6ICR7cC5zdGF0dXN9IC0gJHtrfWBcbiAgICAgIH07XG4gICAgfVxuICB9IGNhdGNoIChrKSB7XG4gICAgcmV0dXJuIE0oKSwgY29uc29sZS5lcnJvcihcIlRva2VuIGV4Y2hhbmdlIGZhaWxlZDpcIiwgayksIHtcbiAgICAgIHN1Y2Nlc3M6ICExLFxuICAgICAgZXJyb3I6IGBUb2tlbiBleGNoYW5nZSBmYWlsZWQ6ICR7a31gXG4gICAgfTtcbiAgfVxuICBjb25zdCBkID0gYXdhaXQgcC5qc29uKCksIEQgPSBfKCk7XG4gIEQgJiYgRC5zZXRJdGVtcyh7XG4gICAgW2kuYWNjZXNzVG9rZW5dOiBkLmFjY2Vzc190b2tlbixcbiAgICBbaS5pZFRva2VuXTogZC5pZF90b2tlbixcbiAgICBbaS5yZWZyZXNoVG9rZW5dOiBkLnJlZnJlc2hfdG9rZW5cbiAgfSksIChjLnVzZUluc2VjdXJlRm9yUmVmcmVzaFRva2VuIHx8ICEkKHQpKSAmJiBsLnNldFNlc3Npb25JdGVtKGkucmVmcmVzaFRva2VuLCBkLnJlZnJlc2hfdG9rZW4pLCBuICYmIHEoZC5leHBpcmVzX2luLCBhc3luYyAoKSA9PiB7XG4gICAgeCh7IGRvbWFpbjogdCwgY2xpZW50SWQ6IHIsIG9uUmVmcmVzaDogYSB9KTtcbiAgfSksIE0oKTtcbiAgY29uc3QgVyA9ICgoaykgPT4gKGsuc2VhcmNoID0gXCJcIiwgaykpKG5ldyBVUkwod2luZG93LmxvY2F0aW9uLnRvU3RyaW5nKCkpKTtcbiAgcmV0dXJuIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh3aW5kb3cuaGlzdG9yeS5zdGF0ZSwgXCJcIiwgVyksICFkLmFjY2Vzc190b2tlbiB8fCAhZC5pZF90b2tlbiB8fCAhZC5yZWZyZXNoX3Rva2VuID8ge1xuICAgIHN1Y2Nlc3M6ICExLFxuICAgIGVycm9yOiBcIk5vIGFjY2VzcyB0b2tlbiByZWNlaXZlZFwiXG4gIH0gOiB7XG4gICAgc3VjY2VzczogITAsXG4gICAgW2kuYWNjZXNzVG9rZW5dOiBkLmFjY2Vzc190b2tlbixcbiAgICBbaS5pZFRva2VuXTogZC5pZF90b2tlbixcbiAgICBbaS5yZWZyZXNoVG9rZW5dOiBkLnJlZnJlc2hfdG9rZW5cbiAgfTtcbn07XG5mdW5jdGlvbiByZShlKSB7XG4gIGNvbnN0IHIgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7IFwiKS5maW5kKChzKSA9PiBzLnN0YXJ0c1dpdGgoYCR7ZX09YCkpO1xuICBpZiAoIXIpIHJldHVybiBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IHMgPSByLnNwbGl0KFwiPVwiKVsxXTtcbiAgICByZXR1cm4gcyA/IGRlY29kZVVSSUNvbXBvbmVudChzKSA6IG51bGw7XG4gIH0gY2F0Y2ggKHMpIHtcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihgRXJyb3IgcGFyc2luZyBjb29raWUgJHtlfTpgLCBzKSwgbnVsbDtcbiAgfVxufVxuY29uc3QgbmUgPSBcIl9rYnJ0ZVwiLCB4ZSA9IGFzeW5jICh7XG4gIGRvbWFpbjogZSxcbiAgY2xpZW50SWQ6IHRcbn0pID0+IHtcbiAgaWYgKCFlKVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiAhMSxcbiAgICAgIGVycm9yOiBcIkRvbWFpbiBpcyByZXF1aXJlZCBmb3IgYXV0aGVudGljYXRpb24gY2hlY2tcIlxuICAgIH07XG4gIGlmICghdClcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogXCJDbGllbnQgSUQgaXMgcmVxdWlyZWQgZm9yIGF1dGhlbnRpY2F0aW9uIGNoZWNrXCJcbiAgICB9O1xuICBjb25zdCByID0gJChlKSwgcyA9IGMudXNlSW5zZWN1cmVGb3JSZWZyZXNoVG9rZW47XG4gIGxldCBuID0gbnVsbDtcbiAgcmV0dXJuIHIgJiYgIXMgJiYgKG4gPSByZShuZSkpLCBhd2FpdCB4KHtcbiAgICBkb21haW46IGUsXG4gICAgY2xpZW50SWQ6IHQsXG4gICAgcmVmcmVzaFR5cGU6IG4gPyB3LmNvb2tpZSA6IHcucmVmcmVzaFRva2VuXG4gIH0pO1xufSwgJCA9IChlKSA9PiAhZS5tYXRjaChcbiAgL14oPzpodHRwcz86XFwvXFwvKT9bYS16QS1aMC05XVsuLWEtekEtWjAtOV0qXFwua2luZGVcXC5jb20kL2lcbik7XG5mdW5jdGlvbiB6KGUsIHQpIHtcbiAgcmV0dXJuIHQgPD0gMCA/IFtdIDogZS5tYXRjaChuZXcgUmVnRXhwKGAuezEsJHt0fX1gLCBcImdcIikpIHx8IFtdO1xufVxudmFyIGkgPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5hY2Nlc3NUb2tlbiA9IFwiYWNjZXNzVG9rZW5cIiwgZS5pZFRva2VuID0gXCJpZFRva2VuXCIsIGUucmVmcmVzaFRva2VuID0gXCJyZWZyZXNoVG9rZW5cIiwgZS5zdGF0ZSA9IFwic3RhdGVcIiwgZS5ub25jZSA9IFwibm9uY2VcIiwgZS5jb2RlVmVyaWZpZXIgPSBcImNvZGVWZXJpZmllclwiLCBlKSkoaSB8fCB7fSk7XG5jbGFzcyBGIHtcbiAgYXN5bmMgc2V0SXRlbXModCkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgT2JqZWN0LmVudHJpZXModCkubWFwKFxuICAgICAgICAoW3IsIHNdKSA9PiB0aGlzLnNldFNlc3Npb25JdGVtKHIsIHMpXG4gICAgICApXG4gICAgKTtcbiAgfVxuICBhc3luYyByZW1vdmVJdGVtcyguLi50KSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICB0Lm1hcCgocikgPT4gdGhpcy5yZW1vdmVTZXNzaW9uSXRlbShyKSlcbiAgICApO1xuICB9XG59XG5jbGFzcyBDZSBleHRlbmRzIEYge1xuICBtZW1DYWNoZSA9IHt9O1xuICAvKipcbiAgICogQ2xlYXJzIGFsbCBpdGVtcyBmcm9tIHNlc3Npb24gc3RvcmUuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgYXN5bmMgZGVzdHJveVNlc3Npb24oKSB7XG4gICAgdGhpcy5tZW1DYWNoZSA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwcm92aWRlZCBrZXktdmFsdWUgc3RvcmUgdG8gdGhlIG1lbW9yeSBjYWNoZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1LZXlcbiAgICogQHBhcmFtIHt1bmtub3dufSBpdGVtVmFsdWVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBhc3luYyBzZXRTZXNzaW9uSXRlbSh0LCByKSB7XG4gICAgaWYgKGF3YWl0IHRoaXMucmVtb3ZlU2Vzc2lvbkl0ZW0odCksIHR5cGVvZiByID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHoociwgYy5tYXhMZW5ndGgpLmZvckVhY2goXG4gICAgICAgIChzLCBuKSA9PiB7XG4gICAgICAgICAgdGhpcy5tZW1DYWNoZVtgJHtjLmtleVByZWZpeH0ke3R9JHtufWBdID0gcztcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tZW1DYWNoZVtgJHtjLmtleVByZWZpeH0ke1N0cmluZyh0KX0wYF0gPSByO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpdGVtIGZvciB0aGUgcHJvdmlkZWQga2V5IGZyb20gdGhlIG1lbW9yeSBjYWNoZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1LZXlcbiAgICogQHJldHVybnMge3Vua25vd24gfCBudWxsfVxuICAgKi9cbiAgYXN5bmMgZ2V0U2Vzc2lvbkl0ZW0odCkge1xuICAgIGlmICh0aGlzLm1lbUNhY2hlW2Ake2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfTBgXSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHIgPSBcIlwiLCBzID0gMCwgbiA9IGAke2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfSR7c31gO1xuICAgIGZvciAoOyB0aGlzLm1lbUNhY2hlW25dICE9PSB2b2lkIDA7IClcbiAgICAgIHIgKz0gdGhpcy5tZW1DYWNoZVtuXSwgcysrLCBuID0gYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtzfWA7XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGl0ZW0gZm9yIHRoZSBwcm92aWRlZCBrZXkgZnJvbSB0aGUgbWVtb3J5IGNhY2hlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbUtleVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIHJlbW92ZVNlc3Npb25JdGVtKHQpIHtcbiAgICBmb3IgKGNvbnN0IHIgaW4gdGhpcy5tZW1DYWNoZSlcbiAgICAgIHIuc3RhcnRzV2l0aChgJHtjLmtleVByZWZpeH0ke1N0cmluZyh0KX1gKSAmJiBkZWxldGUgdGhpcy5tZW1DYWNoZVtyXTtcbiAgfVxufVxuZnVuY3Rpb24gVChlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgodCwgcikgPT4ge1xuICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChbZV0sIGZ1bmN0aW9uKHMpIHtcbiAgICAgIGNocm9tZS5ydW50aW1lLmxhc3RFcnJvciA/IHIodm9pZCAwKSA6IHQoc1tlXSk7XG4gICAgfSk7XG4gIH0pO1xufVxuY2xhc3MgVGUgZXh0ZW5kcyBGIHtcbiAgLyoqXG4gICAqIENsZWFycyBhbGwgaXRlbXMgZnJvbSBzZXNzaW9uIHN0b3JlLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIGRlc3Ryb3lTZXNzaW9uKCkge1xuICAgIGF3YWl0IGNocm9tZS5zdG9yYWdlLmxvY2FsLmNsZWFyKCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGhlIHByb3ZpZGVkIGtleS12YWx1ZSBzdG9yZSB0byB0aGUgY2hyb21lLnN0b3JlLmxvY2FsLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbUtleVxuICAgKiBAcGFyYW0ge3Vua25vd259IGl0ZW1WYWx1ZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIHNldFNlc3Npb25JdGVtKHQsIHIpIHtcbiAgICBpZiAoYXdhaXQgdGhpcy5yZW1vdmVTZXNzaW9uSXRlbSh0KSwgdHlwZW9mIHIgPT0gXCJzdHJpbmdcIikge1xuICAgICAgeihyLCBjLm1heExlbmd0aCkuZm9yRWFjaChcbiAgICAgICAgYXN5bmMgKHMsIG4pID0+IHtcbiAgICAgICAgICBhd2FpdCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe1xuICAgICAgICAgICAgW2Ake2Mua2V5UHJlZml4fSR7dH0ke259YF06IHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcbiAgICAgIFtgJHtjLmtleVByZWZpeH0ke3R9MGBdOiByXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIGl0ZW0gZm9yIHRoZSBwcm92aWRlZCBrZXkgZnJvbSB0aGUgY2hyb21lLnN0b3JlLmxvY2FsIGNhY2hlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbUtleVxuICAgKiBAcmV0dXJucyB7dW5rbm93biB8IG51bGx9XG4gICAqL1xuICBhc3luYyBnZXRTZXNzaW9uSXRlbSh0KSB7XG4gICAgbGV0IHIgPSBcIlwiLCBzID0gMCwgbiA9IGAke2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfSR7c31gO1xuICAgIGZvciAoOyBhd2FpdCBUKFxuICAgICAgYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtzfWBcbiAgICApICE9PSB2b2lkIDA7IClcbiAgICAgIHIgKz0gYXdhaXQgVChuKSwgcysrLCBuID0gYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtzfWA7XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGl0ZW0gZm9yIHRoZSBwcm92aWRlZCBrZXkgZnJvbSB0aGUgY2hyb21lLnN0b3JlLmxvY2FsIGNhY2hlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbUtleVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIHJlbW92ZVNlc3Npb25JdGVtKHQpIHtcbiAgICBsZXQgciA9IDA7XG4gICAgZm9yICg7IGF3YWl0IFQoXG4gICAgICBgJHtjLmtleVByZWZpeH0ke1N0cmluZyh0KX0ke3J9YFxuICAgICkgIT09IHZvaWQgMDsgKVxuICAgICAgYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwucmVtb3ZlKFxuICAgICAgICBgJHtjLmtleVByZWZpeH0ke1N0cmluZyh0KX0ke3J9YFxuICAgICAgKSwgcisrO1xuICB9XG59XG5jbGFzcyBBZSBleHRlbmRzIEYge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpLCBjLnVzZUluc2VjdXJlRm9yUmVmcmVzaFRva2VuICYmIGNvbnNvbGUud2FybihcIkxvY2FsU3RvcmFnZSBzdG9yZSBzaG91bGQgbm90IGJlIHVzZWQgaW4gcHJvZHVjdGlvblwiKTtcbiAgfVxuICBpbnRlcm5hbEl0ZW1zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgLyoqXG4gICAqIENsZWFycyBhbGwgaXRlbXMgZnJvbSBzZXNzaW9uIHN0b3JlLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIGRlc3Ryb3lTZXNzaW9uKCkge1xuICAgIHRoaXMuaW50ZXJuYWxJdGVtcy5mb3JFYWNoKCh0KSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZVNlc3Npb25JdGVtKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwcm92aWRlZCBrZXktdmFsdWUgc3RvcmUgdG8gdGhlIGxvY2FsU3RvcmFnZSBjYWNoZS5cbiAgICogQHBhcmFtIHtWfSBpdGVtS2V5XG4gICAqIEBwYXJhbSB7dW5rbm93bn0gaXRlbVZhbHVlXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgYXN5bmMgc2V0U2Vzc2lvbkl0ZW0odCwgcikge1xuICAgIGlmIChhd2FpdCB0aGlzLnJlbW92ZVNlc3Npb25JdGVtKHQpLCB0aGlzLmludGVybmFsSXRlbXMuYWRkKHQpLCB0eXBlb2YgciA9PSBcInN0cmluZ1wiKSB7XG4gICAgICB6KHIsIGMubWF4TGVuZ3RoKS5mb3JFYWNoKFxuICAgICAgICAocywgbikgPT4ge1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgICAgYCR7Yy5rZXlQcmVmaXh9JHt0fSR7bn1gLFxuICAgICAgICAgICAgc1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgYCR7Yy5rZXlQcmVmaXh9JHt0fTBgLFxuICAgICAgclxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIGl0ZW0gZm9yIHRoZSBwcm92aWRlZCBrZXkgZnJvbSB0aGUgbG9jYWxTdG9yYWdlIGNhY2hlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXRlbUtleVxuICAgKiBAcmV0dXJucyB7dW5rbm93biB8IG51bGx9XG4gICAqL1xuICBhc3luYyBnZXRTZXNzaW9uSXRlbSh0KSB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGAke2Mua2V5UHJlZml4fSR7dH0wYCkgPT09IG51bGwpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgciA9IFwiXCIsIHMgPSAwLCBuID0gYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtzfWA7XG4gICAgZm9yICg7IGxvY2FsU3RvcmFnZS5nZXRJdGVtKG4pICE9PSBudWxsOyApXG4gICAgICByICs9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKG4pLCBzKyssIG4gPSBgJHtjLmtleVByZWZpeH0ke1N0cmluZyh0KX0ke3N9YDtcbiAgICByZXR1cm4gcjtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgaXRlbSBmb3IgdGhlIHByb3ZpZGVkIGtleSBmcm9tIHRoZSBsb2NhbFN0b3JhZ2UgY2FjaGUuXG4gICAqIEBwYXJhbSB7Vn0gaXRlbUtleVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIHJlbW92ZVNlc3Npb25JdGVtKHQpIHtcbiAgICBsZXQgciA9IDA7XG4gICAgZm9yICg7IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFxuICAgICAgYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtyfWBcbiAgICApICE9PSBudWxsOyApXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcbiAgICAgICAgYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtyfWBcbiAgICAgICksIHIrKztcbiAgICB0aGlzLmludGVybmFsSXRlbXMuZGVsZXRlKHQpO1xuICB9XG59XG5jb25zdCBjID0ge1xuICAvKipcbiAgICogVGhlIHByZWZpeCB0byB1c2UgZm9yIHRoZSBzdG9yYWdlIGtleXMuXG4gICAqL1xuICBrZXlQcmVmaXg6IFwia2luZGUtXCIsXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIHN0b3JhZ2UuXG4gICAqXG4gICAqIElmIHRoZSBsZW5ndGggaXMgZXhjZWVkZWQgdGhlIGl0ZW1zIHdpbGwgYmUgc3BsaXQgaW50byBtdWx0aXBsZSBzdG9yYWdlIGl0ZW1zLlxuICAgKi9cbiAgbWF4TGVuZ3RoOiAyZTMsXG4gIC8qKlxuICAgKiBVc2UgaW5zZWN1cmUgc3RvcmFnZSBmb3IgcmVmcmVzaCB0b2tlbi5cbiAgICpcbiAgICogV2FybmluZzogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIHdoZW4geW91J3JlIG5vdCB1c2luZyBhIGN1c3RvbSBkb21haW4gYW5kIG5vIGJhY2tlbmQgYXBwIHRvIGF1dGhlbnRpY2F0ZSBvbi5cbiAgICovXG4gIHVzZUluc2VjdXJlRm9yUmVmcmVzaFRva2VuOiAhMVxufSwgSCA9IChlLCB0KSA9PiB7XG4gIGlmIChBcnJheS5pc0FycmF5KGUpICYmIEFycmF5LmlzQXJyYXkodCkpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWy4uLmUsIC4uLnRdKSk7XG4gIGlmIChlICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgdCAmJiB0eXBlb2YgdCA9PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgciA9IHsgLi4uZSB9O1xuICAgIGZvciAoY29uc3QgcyBvZiBPYmplY3Qua2V5cyh0KSlcbiAgICAgIHMgaW4gciA/IHJbc10gPSBIKHJbc10sIHRbc10pIDogcltzXSA9IHRbc107XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgcmV0dXJuIHQ7XG59O1xuYXN5bmMgZnVuY3Rpb24gVShlKSB7XG4gIGNvbnN0IHQgPSBfKCk7XG4gIGlmICghdClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhY3RpdmUgc3RvcmFnZSBmb3VuZC5cIik7XG4gIGNvbnN0IHIgPSBhd2FpdCB0LmdldFNlc3Npb25JdGVtKGkuYWNjZXNzVG9rZW4pO1xuICBpZiAoIXIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXV0aGVudGljYXRpb24gdG9rZW4gbm90IGZvdW5kLlwiKTtcbiAgY29uc3QgcyA9IGF3YWl0IEwoXCJpc3NcIik7XG4gIGlmICghcz8udmFsdWUpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRG9tYWluIChpc3MgY2xhaW0pIG5vdCBmb3VuZC5cIik7XG4gIGxldCBuO1xuICB0cnkge1xuICAgIG4gPSBhd2FpdCBmZXRjaChgJHtzLnZhbHVlfS8ke2V9YCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7cn1gLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChvKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZnJvbSAke3MudmFsdWV9LyR7ZX06ICR7b31gKTtcbiAgfVxuICBpZiAoIW4ub2spXG4gICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgJHtuLnN0YXR1c31gKTtcbiAgcmV0dXJuIGF3YWl0IG4uanNvbigpO1xufVxuY29uc3QgUyA9IGFzeW5jICh7XG4gIHVybDogZVxufSkgPT4ge1xuICBsZXQgdCA9IFtdLCByID0gYXdhaXQgVShlKTtcbiAgaWYgKHQgPSByLmRhdGEsIHIubWV0YWRhdGE/Lmhhc19tb3JlKSB7XG4gICAgbGV0IHMgPSByLm1ldGFkYXRhLm5leHRfcGFnZV9zdGFydGluZ19hZnRlcjtcbiAgICBmb3IgKDsgci5tZXRhZGF0YS5oYXNfbW9yZTsgKVxuICAgICAgciA9IGF3YWl0IFUoXG4gICAgICAgIGAke2V9P3N0YXJ0aW5nX2FmdGVyPSR7c31gXG4gICAgICApLCB0ID0gSCh0LCByLmRhdGEpLCBzID0gci5tZXRhZGF0YS5uZXh0X3BhZ2Vfc3RhcnRpbmdfYWZ0ZXI7XG4gIH1cbiAgcmV0dXJuIHQ7XG59LCBzZSA9IGFzeW5jIChlKSA9PiB7XG4gIGlmIChlPy5mb3JjZUFwaSkge1xuICAgIGNvbnN0IG4gPSBhd2FpdCBTKHtcbiAgICAgIHVybDogXCJhY2NvdW50X2FwaS92MS9wZXJtaXNzaW9uc1wiXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9yZ0NvZGU6IG4ub3JnX2NvZGUsXG4gICAgICBwZXJtaXNzaW9uczogbi5wZXJtaXNzaW9ucz8ubWFwKChhKSA9PiBhLmtleSkgfHwgW11cbiAgICB9O1xuICB9XG4gIGNvbnN0IHQgPSBhd2FpdCBtKCk7XG4gIGlmICghdClcbiAgICByZXR1cm4ge1xuICAgICAgb3JnQ29kZTogbnVsbCxcbiAgICAgIHBlcm1pc3Npb25zOiBbXVxuICAgIH07XG4gIGNvbnN0IHIgPSB0LnBlcm1pc3Npb25zIHx8IHRbXCJ4LWhhc3VyYS1wZXJtaXNzaW9uc1wiXSB8fCBbXTtcbiAgcmV0dXJuIHtcbiAgICBvcmdDb2RlOiB0Lm9yZ19jb2RlIHx8IHRbXCJ4LWhhc3VyYS1vcmctY29kZVwiXSxcbiAgICBwZXJtaXNzaW9uczogclxuICB9O1xufSwgb2UgPSAoZSkgPT4gdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiBlICE9PSBudWxsICYmIFwicGVybWlzc2lvblwiIGluIGUgJiYgXCJjb25kaXRpb25cIiBpbiBlLCBhZSA9IGFzeW5jIChlKSA9PiB7XG4gIGlmICghZSB8fCAhZS5wZXJtaXNzaW9ucyB8fCBlPy5wZXJtaXNzaW9ucz8ubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiAhMDtcbiAgY29uc3QgeyBwZXJtaXNzaW9uczogdCB9ID0gZTtcbiAgbGV0IHI7XG4gIHRyeSB7XG4gICAgciA9IGF3YWl0IHNlKHtcbiAgICAgIGZvcmNlQXBpOiBlLmZvcmNlQXBpXG4gICAgfSk7XG4gIH0gY2F0Y2ggKG4pIHtcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIltoYXNQZXJtaXNzaW9uc10gRXJyb3IgZ2V0dGluZyBwZXJtaXNzaW9uc1wiLCBuKSwgITE7XG4gIH1cbiAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChcbiAgICB0Lm1hcChhc3luYyAobikgPT4gb2UobikgPyByLnBlcm1pc3Npb25zLmZpbmQoXG4gICAgICAobykgPT4gbyA9PT0gbi5wZXJtaXNzaW9uXG4gICAgKSA/IGF3YWl0IG4uY29uZGl0aW9uKHtcbiAgICAgIHBlcm1pc3Npb25LZXk6IG4ucGVybWlzc2lvbixcbiAgICAgIG9yZ0NvZGU6IHIub3JnQ29kZVxuICAgIH0pIDogITEgOiAhIXIucGVybWlzc2lvbnMuZmluZChcbiAgICAgIChvKSA9PiBvID09PSBuXG4gICAgKSlcbiAgKSkuZXZlcnkoKG4pID0+IG4gPT09ICEwKTtcbn0sIGllID0gYXN5bmMgKGUpID0+IHtcbiAgY29uc3QgdCA9IGF3YWl0IEwoXCJyb2xlc1wiKTtcbiAgaWYgKGU/LmZvcmNlQXBpIHx8ICF0Py52YWx1ZSlcbiAgICByZXR1cm4gKGF3YWl0IFMoe1xuICAgICAgdXJsOiBcImFjY291bnRfYXBpL3YxL3JvbGVzXCJcbiAgICB9KSkucm9sZXM/Lm1hcCgobikgPT4gKHtcbiAgICAgIGlkOiBuLmlkLFxuICAgICAgbmFtZTogbi5uYW1lLFxuICAgICAga2V5OiBuLmtleVxuICAgIH0pKSB8fCBbXTtcbiAgY29uc3QgciA9IGF3YWl0IG0oKTtcbiAgcmV0dXJuIHIgPyAhci5yb2xlcyAmJiAhcltcIngtaGFzdXJhLXJvbGVzXCJdID8gKGNvbnNvbGUud2FybihcbiAgICBcIk5vIHJvbGVzIGZvdW5kIGluIHRva2VuLCBlbnN1cmUgcm9sZXMgaGF2ZSBiZWVuIGluY2x1ZGVkIGluIHRoZSB0b2tlbiBjdXN0b21pc2F0aW9uIHdpdGhpbiB0aGUgYXBwbGljYXRpb24gc2V0dGluZ3NcIlxuICApLCBbXSkgOiByLnJvbGVzIHx8IHJbXCJ4LWhhc3VyYS1yb2xlc1wiXSA6IFtdO1xufSwgY2UgPSAoZSkgPT4gdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiBlICE9PSBudWxsICYmIFwicm9sZVwiIGluIGUgJiYgXCJjb25kaXRpb25cIiBpbiBlLCBsZSA9IGFzeW5jIChlKSA9PiB7XG4gIGlmICghZSB8fCAhZS5yb2xlcyB8fCBlPy5yb2xlcz8ubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiAhMDtcbiAgY29uc3QgeyByb2xlczogdCB9ID0gZTtcbiAgbGV0IHI7XG4gIHRyeSB7XG4gICAgciA9IGF3YWl0IGllKHsgZm9yY2VBcGk6IGUuZm9yY2VBcGkgfSk7XG4gIH0gY2F0Y2ggKG4pIHtcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIltoYXNSb2xlc10gRXJyb3IgZ2V0dGluZyByb2xlc1wiLCBuKSwgITE7XG4gIH1cbiAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChcbiAgICB0Lm1hcChhc3luYyAobikgPT4ge1xuICAgICAgaWYgKGNlKG4pKSB7XG4gICAgICAgIGNvbnN0IGEgPSByLmZpbmQoXG4gICAgICAgICAgKHUpID0+IHUua2V5ID09PSBuLnJvbGVcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGEgPyBhd2FpdCBuLmNvbmRpdGlvbihhKSA6ICExO1xuICAgICAgfSBlbHNlXG4gICAgICAgIHJldHVybiByLm1hcCgobykgPT4gby5rZXkpLmluY2x1ZGVzKG4pO1xuICAgIH0pXG4gICkpLmV2ZXJ5KChuKSA9PiBuID09PSAhMCk7XG59LCB1ZSA9IGFzeW5jIChlKSA9PiB7XG4gIGlmIChlPy5mb3JjZUFwaSlcbiAgICByZXR1cm4gKGF3YWl0IFMoe1xuICAgICAgdXJsOiBcImFjY291bnRfYXBpL3YxL2ZlYXR1cmVfZmxhZ3NcIlxuICAgIH0pKS5mZWF0dXJlX2ZsYWdzPy5tYXAoKG4pID0+ICh7XG4gICAgICBrZXk6IG4ua2V5LFxuICAgICAgdmFsdWU6IG4udmFsdWUsXG4gICAgICB0eXBlOiBuLnR5cGVcbiAgICB9KSkgfHwgW107XG4gIGNvbnN0IHQgPSBhd2FpdCBtKCk7XG4gIGlmICghdClcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgciA9IHQuZmVhdHVyZV9mbGFncyB8fCB0W1wieC1oYXN1cmEtZmVhdHVyZS1mbGFnc1wiXTtcbiAgcmV0dXJuIHIgPyBPYmplY3QuZW50cmllcyhyKS5tYXAoKFtzLCBuXSkgPT4gKHtcbiAgICBrZXk6IHMsXG4gICAgdmFsdWU6IG4udixcbiAgICB0eXBlOiBuLnRcbiAgfSkpIDogbnVsbDtcbn0sIGZlID0gKGUpID0+IHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgZSAhPT0gbnVsbCAmJiBcImZsYWdcIiBpbiBlICYmIFwidmFsdWVcIiBpbiBlLCBkZSA9IGFzeW5jIChlKSA9PiB7XG4gIGlmICghZSB8fCAhZS5mZWF0dXJlRmxhZ3MgfHwgZT8uZmVhdHVyZUZsYWdzPy5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuICEwO1xuICBjb25zdCB7IGZlYXR1cmVGbGFnczogdCB9ID0gZTtcbiAgbGV0IHI7XG4gIHRyeSB7XG4gICAgciA9IGF3YWl0IHVlKHsgZm9yY2VBcGk6IGUuZm9yY2VBcGkgfSk7XG4gIH0gY2F0Y2ggKG4pIHtcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIltoYXNGZWF0dXJlRmxhZ3NdIEVycm9yIGdldHRpbmcgZmVhdHVyZSBmbGFnc1wiLCBuKSwgITE7XG4gIH1cbiAgcmV0dXJuIHQubWFwKChuKSA9PiB7XG4gICAgaWYgKGZlKG4pKSB7XG4gICAgICBjb25zdCBhID0gcj8uZmluZCgobykgPT4gby5rZXkgPT09IG4uZmxhZyk7XG4gICAgICByZXR1cm4gYSAhPT0gdm9pZCAwICYmIGEudmFsdWUgPT09IG4udmFsdWU7XG4gICAgfSBlbHNlXG4gICAgICByZXR1cm4gcj8uZmluZCgobykgPT4gby5rZXkgPT09IG4pICE9PSB2b2lkIDA7XG4gIH0pLmV2ZXJ5KChuKSA9PiBuID09PSAhMCk7XG59LCBoZSA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgZSA9IGF3YWl0IFMoe1xuICAgIHVybDogXCJhY2NvdW50X2FwaS92MS9lbnRpdGxlbWVudHNcIlxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBvcmdDb2RlOiBlLm9yZ19jb2RlLFxuICAgIHBsYW5zOiBlLnBsYW5zPy5tYXAoKHQpID0+ICh7XG4gICAgICBrZXk6IHQua2V5LFxuICAgICAgc3Vic2NyaWJlZE9uOiB0LnN1YnNjcmliZWRfb25cbiAgICB9KSkgfHwgW10sXG4gICAgZW50aXRsZW1lbnRzOiBlLmVudGl0bGVtZW50cz8ubWFwKCh0KSA9PiAoe1xuICAgICAgaWQ6IHQuaWQsXG4gICAgICBmaXhlZENoYXJnZTogdC5maXhlZF9jaGFyZ2UsXG4gICAgICBwcmljZU5hbWU6IHQucHJpY2VfbmFtZSxcbiAgICAgIHVuaXRBbW91bnQ6IHQudW5pdF9hbW91bnQsXG4gICAgICBmZWF0dXJlS2V5OiB0LmZlYXR1cmVfa2V5LFxuICAgICAgZmVhdHVyZU5hbWU6IHQuZmVhdHVyZV9uYW1lLFxuICAgICAgZW50aXRsZW1lbnRMaW1pdE1heDogdC5lbnRpdGxlbWVudF9saW1pdF9tYXgsXG4gICAgICBlbnRpdGxlbWVudExpbWl0TWluOiB0LmVudGl0bGVtZW50X2xpbWl0X21pblxuICAgIH0pKSB8fCBbXVxuICB9O1xufSwgZ2UgPSAoZSkgPT4gdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiBlICE9PSBudWxsICYmIFwiZW50aXRsZW1lbnRcIiBpbiBlICYmIFwiY29uZGl0aW9uXCIgaW4gZSwgbWUgPSBhc3luYyAoZSkgPT4ge1xuICBpZiAoIWUgfHwgIWUuYmlsbGluZ0VudGl0bGVtZW50cyB8fCBlPy5iaWxsaW5nRW50aXRsZW1lbnRzPy5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuICEwO1xuICBjb25zdCB7IGJpbGxpbmdFbnRpdGxlbWVudHM6IHQgfSA9IGU7XG4gIGxldCByO1xuICB0cnkge1xuICAgIHIgPSBhd2FpdCBoZSgpO1xuICB9IGNhdGNoIChuKSB7XG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJbaGFzQmlsbGluZ0VudGl0bGVtZW50c10gRXJyb3IgZ2V0dGluZyBlbnRpdGxlbWVudHNcIiwgbiksICExO1xuICB9XG4gIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgdC5tYXAoYXN5bmMgKG4pID0+IHtcbiAgICAgIGlmIChnZShuKSkge1xuICAgICAgICBjb25zdCBhID0gci5lbnRpdGxlbWVudHMuZmluZChcbiAgICAgICAgICAobykgPT4gby5wcmljZU5hbWUgPT09IG4uZW50aXRsZW1lbnRcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGEgPyBhd2FpdCBuLmNvbmRpdGlvbihhKSA6ICExO1xuICAgICAgfSBlbHNlXG4gICAgICAgIHJldHVybiByLmVudGl0bGVtZW50cy5tYXAoXG4gICAgICAgICAgKG8pID0+IG8ucHJpY2VOYW1lXG4gICAgICAgICkuaW5jbHVkZXMobik7XG4gICAgfSlcbiAgKSkuZXZlcnkoKG4pID0+IG4gPT09ICEwKTtcbn0sIEEgPSAoZSkgPT4gZSAhPT0gdm9pZCAwICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIsIEllID0gYXN5bmMgKGUpID0+IHtcbiAgY29uc3QgdCA9IFtdO1xuICByZXR1cm4gZS5yb2xlcyAmJiB0LnB1c2goXG4gICAgbGUoe1xuICAgICAgcm9sZXM6IGUucm9sZXMsXG4gICAgICBmb3JjZUFwaTogQShlLmZvcmNlQXBpKSA/IGUuZm9yY2VBcGkucm9sZXMgOiBlLmZvcmNlQXBpXG4gICAgfSlcbiAgKSwgZS5wZXJtaXNzaW9ucyAmJiB0LnB1c2goXG4gICAgYWUoe1xuICAgICAgcGVybWlzc2lvbnM6IGUucGVybWlzc2lvbnMsXG4gICAgICBmb3JjZUFwaTogQShlLmZvcmNlQXBpKSA/IGUuZm9yY2VBcGkucGVybWlzc2lvbnMgOiBlLmZvcmNlQXBpXG4gICAgfSlcbiAgKSwgZS5mZWF0dXJlRmxhZ3MgJiYgdC5wdXNoKFxuICAgIGRlKHtcbiAgICAgIGZlYXR1cmVGbGFnczogZS5mZWF0dXJlRmxhZ3MsXG4gICAgICBmb3JjZUFwaTogQShlLmZvcmNlQXBpKSA/IGUuZm9yY2VBcGkuZmVhdHVyZUZsYWdzIDogZS5mb3JjZUFwaVxuICAgIH0pXG4gICksIGUuYmlsbGluZ0VudGl0bGVtZW50cyAmJiB0LnB1c2goXG4gICAgbWUoe1xuICAgICAgYmlsbGluZ0VudGl0bGVtZW50czogZS5iaWxsaW5nRW50aXRsZW1lbnRzXG4gICAgfSlcbiAgKSwgKGF3YWl0IFByb21pc2UuYWxsKHQpKS5ldmVyeShCb29sZWFuKTtcbn07XG5mdW5jdGlvbiBrZShlLCB0KSB7XG4gIGlmICghZSlcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgciA9IGUuc3BsaXQoXCIuXCIpO1xuICBpZiAoci5sZW5ndGggIT09IDMpXG4gICAgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHMgPSByW1xuICAgIDFcbiAgICAvKiBib2R5ICovXG4gIF0ucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIiksIG4gPSBkZWNvZGVVUklDb21wb25lbnQoXG4gICAgYXRvYihzKS5zcGxpdChcIlwiKS5tYXAoKGEpID0+IFwiJVwiICsgKFwiMDBcIiArIGEuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSkuam9pbihcIlwiKVxuICApO1xuICByZXR1cm4gSlNPTi5wYXJzZShuKTtcbn1cbmNvbnN0IG0gPSBhc3luYyAoZSA9IGkuYWNjZXNzVG9rZW4pID0+IHtcbiAgY29uc3QgdCA9IF8oKTtcbiAgaWYgKCF0KVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCByID0gYXdhaXQgdC5nZXRTZXNzaW9uSXRlbShcbiAgICBlID09PSBcImFjY2Vzc1Rva2VuXCIgPyBpLmFjY2Vzc1Rva2VuIDogaS5pZFRva2VuXG4gICk7XG4gIGlmICghcilcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgcyA9IGtlKHIpO1xuICByZXR1cm4gcyB8fCBjb25zb2xlLndhcm4oXCJObyBkZWNvZGVkIHRva2VuIGZvdW5kXCIpLCBzO1xufSwgRyA9IGFzeW5jIChlID0gXCJhY2Nlc3NUb2tlblwiKSA9PiBtKGUpLCBMID0gYXN5bmMgKGUsIHQgPSBcImFjY2Vzc1Rva2VuXCIpID0+IHtcbiAgY29uc3QgciA9IGF3YWl0IEcodCk7XG4gIHJldHVybiByID8ge1xuICAgIG5hbWU6IGUsXG4gICAgdmFsdWU6IHJbZV1cbiAgfSA6IG51bGw7XG59LCBFZSA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgZSA9IGF3YWl0IG0oKTtcbiAgcmV0dXJuIGUgPyBlLm9yZ19jb2RlIHx8IGVbXCJ4LWhhc3VyYS1vcmctY29kZVwiXSA6IG51bGw7XG59LCBQZSA9IGFzeW5jIChlID0gaS5hY2Nlc3NUb2tlbikgPT4ge1xuICBjb25zdCB0ID0gXygpO1xuICBpZiAoIXQpXG4gICAgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHIgPSBhd2FpdCB0LmdldFNlc3Npb25JdGVtKFxuICAgIGUgPT09IFwiYWNjZXNzVG9rZW5cIiA/IGkuYWNjZXNzVG9rZW4gOiBpLmlkVG9rZW5cbiAgKTtcbiAgcmV0dXJuIHIgfHwgbnVsbDtcbn0sIFVlID0gYXN5bmMgKGUsIHQpID0+IHtcbiAgaWYgKHQ/LmZvcmNlQXBpKSB7XG4gICAgY29uc3QgbyA9IChhd2FpdCBTKHtcbiAgICAgIHVybDogXCJhY2NvdW50X2FwaS92MS9mZWF0dXJlX2ZsYWdzXCJcbiAgICB9KSkuZmVhdHVyZV9mbGFncy5maW5kKCh1KSA9PiB1Lm5hbWUgPT09IGUpO1xuICAgIHJldHVybiBvID8gby52YWx1ZSA6IG51bGw7XG4gIH1cbiAgY29uc3QgciA9IGF3YWl0IG0oKTtcbiAgaWYgKCFyKVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCBzID0gci5mZWF0dXJlX2ZsYWdzIHx8IHJbXCJ4LWhhc3VyYS1mZWF0dXJlLWZsYWdzXCJdO1xuICByZXR1cm4gcyA/IHNbZV0/LnYgPz8gbnVsbCA6IG51bGw7XG59LCBiZSA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgZSA9IGF3YWl0IEcoXCJpZFRva2VuXCIpO1xuICBpZiAoIWUpXG4gICAgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHsgc3ViOiB0IH0gPSBlO1xuICByZXR1cm4gdCA/IHtcbiAgICBpZDogZS5zdWIsXG4gICAgZ2l2ZW5OYW1lOiBlLmdpdmVuX25hbWUsXG4gICAgZmFtaWx5TmFtZTogZS5mYW1pbHlfbmFtZSxcbiAgICBlbWFpbDogZS5lbWFpbCxcbiAgICBwaWN0dXJlOiBlLnBpY3R1cmVcbiAgfSA6IChjb25zb2xlLmVycm9yKFwiTm8gc3ViIGluIGlkVG9rZW5cIiksIG51bGwpO1xufSwgUmUgPSBhc3luYyAoZSwgdCkgPT4ge1xuICBpZiAodD8uZm9yY2VBcGkpXG4gICAgcmV0dXJuIFUoXG4gICAgICBgYWNjb3VudF9hcGkvdjEvcGVybWlzc2lvbi8ke2VuY29kZVVSSUNvbXBvbmVudChlKX1gXG4gICAgKTtcbiAgY29uc3QgciA9IGF3YWl0IG0oKTtcbiAgaWYgKCFyKVxuICAgIHJldHVybiB7XG4gICAgICBwZXJtaXNzaW9uS2V5OiBlLFxuICAgICAgb3JnQ29kZTogbnVsbCxcbiAgICAgIGlzR3JhbnRlZDogITFcbiAgICB9O1xuICBjb25zdCBzID0gci5wZXJtaXNzaW9ucyB8fCBbXTtcbiAgcmV0dXJuIHtcbiAgICBwZXJtaXNzaW9uS2V5OiBlLFxuICAgIG9yZ0NvZGU6IHIub3JnX2NvZGUsXG4gICAgaXNHcmFudGVkOiAhIXMuaW5jbHVkZXMoZSlcbiAgfTtcbn0sIHplID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBlID0gYXdhaXQgbShcImlkVG9rZW5cIik7XG4gIHJldHVybiBlID8gIWUub3JnX2NvZGVzICYmICFlW1wieC1oYXN1cmEtb3JnLWNvZGVzXCJdID8gKGNvbnNvbGUud2FybihcbiAgICBcIk9yZyBjb2RlcyBub3QgZm91bmQgaW4gdG9rZW4sIGVuc3VyZSBvcmcgY29kZXMgaGF2ZSBiZWVuIGluY2x1ZGVkIGluIHRoZSB0b2tlbiBjdXN0b21pc2F0aW9uIHdpdGhpbiB0aGUgYXBwbGljYXRpb24gc2V0dGluZ3NcIlxuICApLCBudWxsKSA6IGUub3JnX2NvZGVzIHx8IGVbXCJ4LWhhc3VyYS1vcmctY29kZXNcIl0gOiBudWxsO1xufSwgRmUgPSBhc3luYyAoZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHQgPSBhd2FpdCBtKFwiYWNjZXNzVG9rZW5cIik7XG4gICAgaWYgKCF0KSByZXR1cm4gITE7XG4gICAgaWYgKCF0LmV4cClcbiAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKFwiVG9rZW4gZG9lcyBub3QgaGF2ZSBhbiBleHBpcnlcIiksICExO1xuICAgIGNvbnN0IHIgPSB0LmV4cCA8IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDFlMyk7XG4gICAgcmV0dXJuIHIgJiYgZT8udXNlUmVmcmVzaFRva2VuID8gKGF3YWl0IHgoe1xuICAgICAgZG9tYWluOiBlLmRvbWFpbixcbiAgICAgIGNsaWVudElkOiBlLmNsaWVudElkXG4gICAgfSkpLnN1Y2Nlc3MgOiAhcjtcbiAgfSBjYXRjaCAodCkge1xuICAgIHJldHVybiBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgYXV0aGVudGljYXRpb246XCIsIHQpLCAhMTtcbiAgfVxufSwgeCA9IGFzeW5jICh7XG4gIGRvbWFpbjogZSxcbiAgY2xpZW50SWQ6IHQsXG4gIHJlZnJlc2hUeXBlOiByID0gdy5yZWZyZXNoVG9rZW4sXG4gIG9uUmVmcmVzaDogc1xufSkgPT4ge1xuICBjb25zdCBuID0gKHUpID0+IChzICYmIHModSksIHUpO1xuICBpZiAoIWUpXG4gICAgcmV0dXJuIG4oe1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogXCJEb21haW4gaXMgcmVxdWlyZWQgZm9yIHRva2VuIHJlZnJlc2hcIlxuICAgIH0pO1xuICBpZiAoIXQpXG4gICAgcmV0dXJuIG4oe1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogXCJDbGllbnQgSUQgaXMgcmVxdWlyZWQgZm9yIHRva2VuIHJlZnJlc2hcIlxuICAgIH0pO1xuICBsZXQgYSA9IFwiXCIsIG87XG4gIGlmIChjLnVzZUluc2VjdXJlRm9yUmVmcmVzaFRva2VuIHx8ICEkKGUpID8gbyA9IEMoKSA6IG8gPSBfKCksIHIgPT09IHcucmVmcmVzaFRva2VuKSB7XG4gICAgaWYgKCFvKVxuICAgICAgcmV0dXJuIG4oe1xuICAgICAgICBzdWNjZXNzOiAhMSxcbiAgICAgICAgZXJyb3I6IFwiTm8gYWN0aXZlIHN0b3JhZ2UgZm91bmRcIlxuICAgICAgfSk7XG4gICAgaWYgKGEgPSBhd2FpdCBvLmdldFNlc3Npb25JdGVtKFxuICAgICAgaS5yZWZyZXNoVG9rZW5cbiAgICApLCAhYSlcbiAgICAgIHJldHVybiBuKHtcbiAgICAgICAgc3VjY2VzczogITEsXG4gICAgICAgIGVycm9yOiBcIk5vIHJlZnJlc2ggdG9rZW4gZm91bmRcIlxuICAgICAgfSk7XG4gIH1cbiAgUigpO1xuICB0cnkge1xuICAgIGNvbnN0IHUgPSBhd2FpdCBmZXRjaChgJHtiKGUpfS9vYXV0aDIvdG9rZW5gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgLi4uciA9PT0gdy5jb29raWUgJiYgeyBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIgfSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIlxuICAgICAgfSxcbiAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAuLi5yID09PSB3LnJlZnJlc2hUb2tlbiAmJiB7XG4gICAgICAgICAgcmVmcmVzaF90b2tlbjogYVxuICAgICAgICB9LFxuICAgICAgICBncmFudF90eXBlOiBcInJlZnJlc2hfdG9rZW5cIixcbiAgICAgICAgY2xpZW50X2lkOiB0XG4gICAgICB9KS50b1N0cmluZygpXG4gICAgfSk7XG4gICAgaWYgKCF1Lm9rKVxuICAgICAgcmV0dXJuIG4oe1xuICAgICAgICBzdWNjZXNzOiAhMSxcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIHJlZnJlc2ggdG9rZW5cIlxuICAgICAgfSk7XG4gICAgY29uc3QgbCA9IGF3YWl0IHUuanNvbigpO1xuICAgIGlmIChsLmFjY2Vzc190b2tlbikge1xuICAgICAgY29uc3QgZiA9IF8oKTtcbiAgICAgIHJldHVybiBmID8gKHEobC5leHBpcmVzX2luLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIHgoeyBkb21haW46IGUsIGNsaWVudElkOiB0LCByZWZyZXNoVHlwZTogciwgb25SZWZyZXNoOiBzIH0pO1xuICAgICAgfSksIG8gJiYgKGF3YWl0IGYuc2V0U2Vzc2lvbkl0ZW0oXG4gICAgICAgIGkuYWNjZXNzVG9rZW4sXG4gICAgICAgIGwuYWNjZXNzX3Rva2VuXG4gICAgICApLCBsLmlkX3Rva2VuICYmIGF3YWl0IGYuc2V0U2Vzc2lvbkl0ZW0oaS5pZFRva2VuLCBsLmlkX3Rva2VuKSwgbC5yZWZyZXNoX3Rva2VuICYmIGF3YWl0IG8uc2V0U2Vzc2lvbkl0ZW0oXG4gICAgICAgIGkucmVmcmVzaFRva2VuLFxuICAgICAgICBsLnJlZnJlc2hfdG9rZW5cbiAgICAgICkpLCBuKHtcbiAgICAgICAgc3VjY2VzczogITAsXG4gICAgICAgIFtpLmFjY2Vzc1Rva2VuXTogbC5hY2Nlc3NfdG9rZW4sXG4gICAgICAgIFtpLmlkVG9rZW5dOiBsLmlkX3Rva2VuLFxuICAgICAgICBbaS5yZWZyZXNoVG9rZW5dOiBsLnJlZnJlc2hfdG9rZW5cbiAgICAgIH0pKSA6IG4oe1xuICAgICAgICBzdWNjZXNzOiAhMSxcbiAgICAgICAgZXJyb3I6IFwiTm8gYWN0aXZlIHN0b3JhZ2UgZm91bmRcIlxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoICh1KSB7XG4gICAgcmV0dXJuIG4oe1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogYE5vIGFjY2VzcyB0b2tlbiByZWNlaXZlZDogJHt1fWBcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gbih7XG4gICAgc3VjY2VzczogITEsXG4gICAgZXJyb3I6IFwiTm8gYWNjZXNzIHRva2VuIHJlY2VpdmVkXCJcbiAgfSk7XG59LCBnID0ge1xuICBzZWN1cmU6IG51bGwsXG4gIGluc2VjdXJlOiBudWxsXG59LCBMZSA9IChlKSA9PiB7XG4gIGcuc2VjdXJlID0gZTtcbn0sIF8gPSAoKSA9PiBnLnNlY3VyZSB8fCBudWxsLCBOZSA9ICgpID0+IGcuc2VjdXJlICE9PSBudWxsLCBEZSA9ICgpID0+IHtcbiAgZy5zZWN1cmUgPSBudWxsO1xufSwgVmUgPSAoZSkgPT4ge1xuICBnLmluc2VjdXJlID0gZTtcbn0sIEMgPSAoKSA9PiBnLmluc2VjdXJlIHx8IGcuc2VjdXJlIHx8IG51bGwsIE1lID0gKCkgPT4gZy5pbnNlY3VyZSAhPT0gbnVsbCwgamUgPSAoKSA9PiB7XG4gIGcuaW5zZWN1cmUgPSBudWxsO1xufSwgQmUgPSBhc3luYyAoZSkgPT4gKGNvbnNvbGUud2FybihcbiAgXCJXYXJuaW5nOiBnZW5lcmF0ZVByb2ZpbGVVcmwgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBnZW5lcmF0ZVBvcnRhbFVybCBpbnN0ZWFkLlwiXG4pLCBfZSh7XG4gIGRvbWFpbjogZS5kb21haW4sXG4gIHJldHVyblVybDogZS5yZXR1cm5VcmwsXG4gIHN1Yk5hdjogZS5zdWJOYXZcbn0pKTtcbmZ1bmN0aW9uIHdlKGUsIHQgPSBbXSkge1xuICB0cnkge1xuICAgIGNvbnN0IHIgPSBuZXcgVVJMKGUpO1xuICAgIHJldHVybiAhdC5pbmNsdWRlcyhyLnByb3RvY29sKSAmJiAhIXIuaG9zdDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuICExO1xuICB9XG59XG5jb25zdCBfZSA9IGFzeW5jICh7XG4gIGRvbWFpbjogZSxcbiAgcmV0dXJuVXJsOiB0LFxuICBzdWJOYXY6IHJcbn0pID0+IHtcbiAgY29uc3QgcyA9IF8oKTtcbiAgaWYgKCFzKVxuICAgIHRocm93IG5ldyBFcnJvcihcImdlbmVyYXRlUG9ydGFsVXJsOiBBY3RpdmUgc3RvcmFnZSBub3QgZm91bmRcIik7XG4gIGNvbnN0IG4gPSBhd2FpdCBzLmdldFNlc3Npb25JdGVtKFxuICAgIGkuYWNjZXNzVG9rZW5cbiAgKTtcbiAgaWYgKCFuKVxuICAgIHRocm93IG5ldyBFcnJvcihcImdlbmVyYXRlUG9ydGFsVXJsOiBBY2Nlc3MgVG9rZW4gbm90IGZvdW5kXCIpO1xuICBpZiAoIWUgfHwgdHlwZW9mIGUgIT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IGwgPSBhd2FpdCBMKFwiaXNzXCIpO1xuICAgIGlmICghbD8udmFsdWUgfHwgdHlwZW9mIGwudmFsdWUgIT0gXCJzdHJpbmdcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJnZW5lcmF0ZVBvcnRhbFVybDogVW5hYmxlIHRvIGRldGVybWluZSBkb21haW4gZnJvbSBhY2Nlc3MgdG9rZW5cIlxuICAgICAgKTtcbiAgICBlID0gbC52YWx1ZTtcbiAgfVxuICBpZiAoIXdlKHQsIFtcImZ0cDpcIiwgXCJ3czpcIl0pKVxuICAgIHRocm93IG5ldyBFcnJvcihcImdlbmVyYXRlUG9ydGFsVXJsOiByZXR1cm5VcmwgbXVzdCBiZSBhbiBhYnNvbHV0ZSBVUkxcIik7XG4gIGNvbnN0IGEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICBzdWJuYXY6IHIgfHwgQi5wcm9maWxlLFxuICAgIHJldHVybl91cmw6IHRcbiAgfSksIG8gPSBhd2FpdCBmZXRjaChcbiAgICBgJHtiKGUpfS9hY2NvdW50X2FwaS92MS9wb3J0YWxfbGluaz8ke2EudG9TdHJpbmcoKX1gLFxuICAgIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke259YFxuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgaWYgKCFvLm9rKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBGYWlsZWQgdG8gZmV0Y2ggcHJvZmlsZSBVUkw6ICR7by5zdGF0dXN9ICR7by5zdGF0dXNUZXh0fWBcbiAgICApO1xuICBjb25zdCB1ID0gYXdhaXQgby5qc29uKCk7XG4gIGlmICghdS51cmwgfHwgdHlwZW9mIHUudXJsICE9IFwic3RyaW5nXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBVUkwgcmVjZWl2ZWQgZnJvbSBBUElcIik7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVybDogbmV3IFVSTCh1LnVybClcbiAgICB9O1xuICB9IGNhdGNoIChsKSB7XG4gICAgdGhyb3cgY29uc29sZS5lcnJvcihsKSwgbmV3IEVycm9yKGBJbnZhbGlkIFVSTCBmb3JtYXQgcmVjZWl2ZWQgZnJvbSBBUEk6ICR7dS51cmx9YCk7XG4gIH1cbn0sIHFlID0ge1xuICBfX2VzTW9kdWxlOiAhMCxcbiAgZGVmYXVsdDogYXN5bmMgKCkgPT4gKGF3YWl0IGltcG9ydChcbiAgICAvKiB3ZWJwYWNrSWdub3JlOiB0cnVlICovXG4gICAgXCIuL2V4cG9TZWN1cmVTdG9yZS1EVDBHZi1TUC5qc1wiXG4gICkpLkV4cG9TZWN1cmVTdG9yZVxufTtcbmV4cG9ydCB7XG4gIFEgYXMgJCxcbiAgaGUgYXMgQSxcbiAgc2UgYXMgQixcbiAgemUgYXMgQyxcbiAgaWUgYXMgRCxcbiAgcWUgYXMgRSxcbiAgRmUgYXMgRixcbiAgeCBhcyBHLFxuICBMZSBhcyBILFxuICBfIGFzIEksXG4gIE5lIGFzIEosXG4gIERlIGFzIEssXG4gIFZlIGFzIEwsXG4gIEMgYXMgTSxcbiAgTWUgYXMgTixcbiAgamUgYXMgTyxcbiAgSWUgYXMgUCxcbiAgYWUgYXMgUSxcbiAgbGUgYXMgUixcbiAgRiBhcyBTLFxuICBkZSBhcyBULFxuICBtZSBhcyBVLFxuICBDZSBhcyBWLFxuICBUZSBhcyBXLFxuICBBZSBhcyBYLFxuICBaIGFzIFksXG4gIGogYXMgWixcbiAgQiBhcyBfLFxuICBpIGFzIGEsXG4gIEkgYXMgYTAsXG4gIHcgYXMgYTEsXG4gIGMgYXMgYixcbiAgViBhcyBjLFxuICBiIGFzIGQsXG4gIFNlIGFzIGUsXG4gIHZlIGFzIGYsXG4gIEUgYXMgZyxcbiAgJGUgYXMgaCxcbiAgeGUgYXMgaSxcbiAgJCBhcyBqLFxuICBxIGFzIGssXG4gIFIgYXMgbCxcbiAgTyBhcyBtLFxuICB5IGFzIG4sXG4gIEJlIGFzIG8sXG4gIF9lIGFzIHAsXG4gIHRlIGFzIHEsXG4gIEwgYXMgcixcbiAgeiBhcyBzLFxuICBHIGFzIHQsXG4gIEVlIGFzIHUsXG4gIFBlIGFzIHYsXG4gIG0gYXMgdyxcbiAgVWUgYXMgeCxcbiAgYmUgYXMgeSxcbiAgUmUgYXMgelxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@kinde/js-utils/dist/main-D22foZsM.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@kinde/js-utils/dist/main-D22foZsM.js":
/*!************************************************************!*\
  !*** ./node_modules/@kinde/js-utils/dist/main-D22foZsM.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ Q),\n/* harmony export */   A: () => (/* binding */ he),\n/* harmony export */   B: () => (/* binding */ se),\n/* harmony export */   C: () => (/* binding */ ze),\n/* harmony export */   D: () => (/* binding */ ie),\n/* harmony export */   E: () => (/* binding */ qe),\n/* harmony export */   F: () => (/* binding */ Fe),\n/* harmony export */   G: () => (/* binding */ x),\n/* harmony export */   H: () => (/* binding */ Le),\n/* harmony export */   I: () => (/* binding */ _),\n/* harmony export */   J: () => (/* binding */ Ne),\n/* harmony export */   K: () => (/* binding */ De),\n/* harmony export */   L: () => (/* binding */ Ve),\n/* harmony export */   M: () => (/* binding */ C),\n/* harmony export */   N: () => (/* binding */ Me),\n/* harmony export */   O: () => (/* binding */ je),\n/* harmony export */   P: () => (/* binding */ Ie),\n/* harmony export */   Q: () => (/* binding */ ae),\n/* harmony export */   R: () => (/* binding */ le),\n/* harmony export */   S: () => (/* binding */ F),\n/* harmony export */   T: () => (/* binding */ de),\n/* harmony export */   U: () => (/* binding */ me),\n/* harmony export */   V: () => (/* binding */ Ce),\n/* harmony export */   W: () => (/* binding */ Te),\n/* harmony export */   X: () => (/* binding */ Ae),\n/* harmony export */   Y: () => (/* binding */ Z),\n/* harmony export */   Z: () => (/* binding */ j),\n/* harmony export */   _: () => (/* binding */ B),\n/* harmony export */   a: () => (/* binding */ i),\n/* harmony export */   a0: () => (/* binding */ I),\n/* harmony export */   a1: () => (/* binding */ w),\n/* harmony export */   b: () => (/* binding */ c),\n/* harmony export */   c: () => (/* binding */ V),\n/* harmony export */   d: () => (/* binding */ b),\n/* harmony export */   e: () => (/* binding */ Se),\n/* harmony export */   f: () => (/* binding */ ve),\n/* harmony export */   g: () => (/* binding */ E),\n/* harmony export */   h: () => (/* binding */ $e),\n/* harmony export */   i: () => (/* binding */ xe),\n/* harmony export */   j: () => (/* binding */ $),\n/* harmony export */   k: () => (/* binding */ q),\n/* harmony export */   l: () => (/* binding */ R),\n/* harmony export */   m: () => (/* binding */ O),\n/* harmony export */   n: () => (/* binding */ y),\n/* harmony export */   o: () => (/* binding */ Be),\n/* harmony export */   p: () => (/* binding */ _e),\n/* harmony export */   q: () => (/* binding */ te),\n/* harmony export */   r: () => (/* binding */ L),\n/* harmony export */   s: () => (/* binding */ z),\n/* harmony export */   t: () => (/* binding */ G),\n/* harmony export */   u: () => (/* binding */ Ee),\n/* harmony export */   v: () => (/* binding */ Pe),\n/* harmony export */   w: () => (/* binding */ m),\n/* harmony export */   x: () => (/* binding */ Ue),\n/* harmony export */   y: () => (/* binding */ be),\n/* harmony export */   z: () => (/* binding */ Re)\n/* harmony export */ });\nvar Z = /* @__PURE__ */ ((e) => (e.email = \"email\", e.profile = \"profile\", e.openid = \"openid\", e.offline_access = \"offline\", e))(Z || {}), j = /* @__PURE__ */ ((e) => (e.none = \"none\", e.create = \"create\", e.login = \"login\", e))(j || {}), B = /* @__PURE__ */ ((e) => (e.organizationDetails = \"organization_details\", e.organizationMembers = \"organization_members\", e.organizationPlanDetails = \"organization_plan_details\", e.organizationPaymentDetails = \"organization_payment_details\", e.organizationPlanSelection = \"organization_plan_selection\", e.paymentDetails = \"payment_details\", e.planSelection = \"plan_selection\", e.planDetails = \"plan_details\", e.profile = \"profile\", e))(B || {}), Q = /* @__PURE__ */ ((e) => (e.organizationDetails = \"organization_details\", e.organizationMembers = \"organization_members\", e.organizationPlanDetails = \"organization_plan_details\", e.organizationPaymentDetails = \"organization_payment_details\", e.organizationPlanSelection = \"organization_plan_selection\", e.profile = \"profile\", e))(Q || {}), I = /* @__PURE__ */ ((e) => (e.logout = \"logout\", e.login = \"login\", e.register = \"registration\", e.token = \"token\", e.profile = \"profile\", e))(I || {}), w = /* @__PURE__ */ ((e) => (e[e.refreshToken = 0] = \"refreshToken\", e[e.cookie = 1] = \"cookie\", e))(w || {});\nconst V = (e) => {\n  const t = (a) => btoa(a).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n  if (e instanceof ArrayBuffer) {\n    const a = new Uint8Array(e), o = String.fromCharCode(...a);\n    return t(o);\n  }\n  const s = new TextEncoder().encode(e), n = String.fromCharCode(...s);\n  return t(n);\n}, E = (e = 28) => {\n  if (crypto) {\n    const t = new Uint8Array(e / 2);\n    return crypto.getRandomValues(t), Array.from(t, X).join(\"\");\n  } else\n    return Y(e);\n};\nfunction X(e) {\n  return e.toString(16).padStart(2, \"0\");\n}\nfunction Y(e = 28) {\n  const t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  let r = \"\";\n  const s = t.length;\n  for (let n = 0; n < e; n++)\n    r += t.charAt(Math.floor(Math.random() * s));\n  return r;\n}\nconst Se = (e) => {\n  e = e.split(\"?\")[1];\n  const t = new URLSearchParams(e);\n  return {\n    accessToken: t.get(\"access_token\"),\n    idToken: t.get(\"id_token\"),\n    expiresIn: +(t.get(\"expires_in\") || 0)\n  };\n}, b = (e) => e.replace(/\\/$/, \"\"), O = (e, t = !1) => {\n  const r = Array.isArray(e.audience) ? e.audience.join(\" \") : e.audience || \"\", s = {\n    login_hint: e.loginHint,\n    is_create_org: e.isCreateOrg?.toString(),\n    connection_id: e.connectionId,\n    redirect_uri: e.redirectURL ? t ? e.redirectURL : b(e.redirectURL) : void 0,\n    audience: r,\n    scope: e.scope?.join(\" \") || \"email profile openid offline\",\n    prompt: e.prompt,\n    lang: e.lang,\n    org_code: e.orgCode,\n    org_name: e.orgName,\n    has_success_page: e.hasSuccessPage?.toString(),\n    workflow_deployment_id: e.workflowDeploymentId,\n    supports_reauth: e.supportsReauth?.toString(),\n    plan_interest: e.planInterest,\n    pricing_table_key: e.pricingTableKey,\n    pages_mode: e.pagesMode\n  };\n  return Object.keys(s).forEach(\n    (n) => s[n] === void 0 && delete s[n]\n  ), s;\n}, P = (e) => typeof e != \"object\" || e === null ? e : Array.isArray(e) ? e.map((t) => P(t)) : Object.fromEntries(\n  Object.entries(e).map(([t, r]) => [\n    t.replace(/_([a-z])/g, (s, n) => n.toUpperCase()),\n    P(r)\n  ])\n), K = [\n  // UTM tags\n  \"utm_source\",\n  \"utm_medium\",\n  \"utm_campaign\",\n  \"utm_content\",\n  \"utm_term\",\n  // Google Ads smart campaign tracking\n  \"gclid\",\n  \"click_id\",\n  \"hsa_acc\",\n  \"hsa_cam\",\n  \"hsa_grp\",\n  \"hsa_ad\",\n  \"hsa_src\",\n  \"hsa_tgt\",\n  \"hsa_kw\",\n  \"hsa_mt\",\n  \"hsa_net\",\n  \"hsa_ver\",\n  // Marketing category\n  \"match_type\",\n  \"keyword\",\n  \"device\",\n  \"ad_group_id\",\n  \"campaign_id\",\n  \"creative\",\n  \"network\",\n  \"ad_position\",\n  \"fbclid\",\n  \"li_fat_id\",\n  \"msclkid\",\n  \"twclid\",\n  \"ttclid\"\n], ve = async (e, t = I.login, r, s) => {\n  const n = `${e}/oauth2/auth`, a = C();\n  if (r.reauthState)\n    try {\n      const f = P(\n        JSON.parse(atob(r.reauthState))\n      );\n      r = {\n        ...r,\n        ...f\n      }, delete r.reauthState;\n    } catch (f) {\n      const h = f instanceof Error ? f.message : \"Unknown error\";\n      throw new Error(`Error handing reauth state: ${h}`);\n    }\n  if (!r.clientId)\n    throw new Error(\"Error generating auth URL: Client ID missing\");\n  const o = {\n    client_id: r.clientId,\n    response_type: r.responseType || \"code\",\n    ...O(r, s?.disableUrlSanitization)\n  };\n  r.state || (r.state = E(32)), a && a.setSessionItem(i.state, r.state), o.state = r.state, r.nonce || (r.nonce = E(16)), o.nonce = r.nonce, a && a.setSessionItem(i.nonce, r.nonce);\n  let u = \"\";\n  if (r.codeChallenge)\n    o.code_challenge = r.codeChallenge;\n  else {\n    const { codeVerifier: f, codeChallenge: h } = await ee();\n    u = f, a && a.setSessionItem(i.codeVerifier, f), o.code_challenge = h;\n  }\n  o.code_challenge_method = \"S256\", r.codeChallengeMethod && (o.code_challenge_method = r.codeChallengeMethod), !r.prompt && t === I.register && (o.prompt = j.create), r.properties && Object.keys(r.properties).forEach((f) => {\n    if (!K.includes(f)) {\n      console.warn(\"Unsupported Property for url generation: \", f);\n      return;\n    }\n    const h = r.properties?.[f];\n    h !== void 0 && (o[f] = h);\n  });\n  const l = new URLSearchParams(o).toString();\n  return {\n    url: new URL(`${n}?${l}`),\n    state: o.state,\n    nonce: o.nonce,\n    codeChallenge: o.code_challenge,\n    codeVerifier: u\n  };\n};\nasync function ee() {\n  const e = E(52), t = new TextEncoder().encode(e);\n  let r = \"\";\n  if (!crypto)\n    r = V(btoa(e));\n  else {\n    const s = await crypto.subtle.digest(\"SHA-256\", t);\n    r = V(s);\n  }\n  return { codeVerifier: e, codeChallenge: r };\n}\nlet v;\nfunction q(e, t) {\n  if (R(), typeof window > \"u\")\n    throw new Error(\"setRefreshTimer requires a browser environment\");\n  if (e <= 0)\n    throw new Error(\"Timer duration must be positive\");\n  v = window.setTimeout(\n    t,\n    Math.min(e * 1e3 - 1e4, 864e5)\n  );\n}\nfunction R() {\n  v !== void 0 && (window.clearTimeout(v), v = void 0);\n}\nconst y = {\n  framework: \"\",\n  frameworkVersion: \"\",\n  sdkVersion: \"\"\n}, M = async () => {\n  await C()?.removeItems(\n    i.state,\n    i.nonce,\n    i.codeVerifier\n  );\n}, te = () => `${y.framework}/${y.sdkVersion}/${y.frameworkVersion}/Javascript`, $e = async ({\n  urlParams: e,\n  domain: t,\n  clientId: r,\n  redirectURL: s,\n  autoRefresh: n = !1,\n  onRefresh: a\n}) => {\n  const o = e.get(\"state\"), u = e.get(\"code\");\n  if (!o || !u)\n    return console.error(\"Invalid state or code\"), {\n      success: !1,\n      error: \"Invalid state or code\"\n    };\n  const l = C();\n  if (!l)\n    return console.error(\"No active storage found\"), {\n      success: !1,\n      error: \"Authentication storage is not initialized\"\n    };\n  (!y.framework || !y.frameworkVersion) && console.warn(\n    \"Framework and version not set. Please set the framework and version in the config object\"\n  );\n  const f = await l.getSessionItem(i.state);\n  if (o !== f)\n    return console.error(\"Invalid state\"), {\n      success: !1,\n      error: `Invalid state; supplied ${o}, expected ${f}`\n    };\n  const h = await l.getSessionItem(\n    i.codeVerifier\n  );\n  if (h === null)\n    return console.error(\"Code verifier not found\"), {\n      success: !1,\n      error: \"Code verifier not found\"\n    };\n  const N = {\n    \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n  };\n  y.framework && (N[\"Kinde-SDK\"] = te());\n  const J = {\n    method: \"POST\",\n    ...!c.useInsecureForRefreshToken && $(t) ? {\n      credentials: \"include\"\n    } : {},\n    headers: new Headers(N),\n    body: new URLSearchParams({\n      client_id: r,\n      code: u,\n      code_verifier: h,\n      grant_type: \"authorization_code\",\n      redirect_uri: s\n    })\n  };\n  let p;\n  R();\n  try {\n    if (p = await fetch(`${t}/oauth2/token`, J), !p?.ok) {\n      const k = await p.text();\n      return console.error(\"Token exchange failed:\", p.status, k), {\n        success: !1,\n        error: `Token exchange failed: ${p.status} - ${k}`\n      };\n    }\n  } catch (k) {\n    return M(), console.error(\"Token exchange failed:\", k), {\n      success: !1,\n      error: `Token exchange failed: ${k}`\n    };\n  }\n  const d = await p.json(), D = _();\n  D && D.setItems({\n    [i.accessToken]: d.access_token,\n    [i.idToken]: d.id_token,\n    [i.refreshToken]: d.refresh_token\n  }), (c.useInsecureForRefreshToken || !$(t)) && l.setSessionItem(i.refreshToken, d.refresh_token), n && q(d.expires_in, async () => {\n    x({ domain: t, clientId: r, onRefresh: a });\n  }), M();\n  const W = ((k) => (k.search = \"\", k))(new URL(window.location.toString()));\n  return window.history.replaceState(window.history.state, \"\", W), !d.access_token || !d.id_token || !d.refresh_token ? {\n    success: !1,\n    error: \"No access token received\"\n  } : {\n    success: !0,\n    [i.accessToken]: d.access_token,\n    [i.idToken]: d.id_token,\n    [i.refreshToken]: d.refresh_token\n  };\n};\nfunction re(e) {\n  const r = document.cookie.split(\"; \").find((s) => s.startsWith(`${e}=`));\n  if (!r) return null;\n  try {\n    const s = r.split(\"=\")[1];\n    return s ? decodeURIComponent(s) : null;\n  } catch (s) {\n    return console.error(`Error parsing cookie ${e}:`, s), null;\n  }\n}\nconst ne = \"_kbrte\", xe = async ({\n  domain: e,\n  clientId: t\n}) => {\n  if (!e)\n    return {\n      success: !1,\n      error: \"Domain is required for authentication check\"\n    };\n  if (!t)\n    return {\n      success: !1,\n      error: \"Client ID is required for authentication check\"\n    };\n  const r = $(e), s = c.useInsecureForRefreshToken;\n  let n = null;\n  return r && !s && (n = re(ne)), await x({\n    domain: e,\n    clientId: t,\n    refreshType: n ? w.cookie : w.refreshToken\n  });\n}, $ = (e) => !e.match(\n  /^(?:https?:\\/\\/)?[a-zA-Z0-9][.-a-zA-Z0-9]*\\.kinde\\.com$/i\n);\nfunction z(e, t) {\n  return t <= 0 ? [] : e.match(new RegExp(`.{1,${t}}`, \"g\")) || [];\n}\nvar i = /* @__PURE__ */ ((e) => (e.accessToken = \"accessToken\", e.idToken = \"idToken\", e.refreshToken = \"refreshToken\", e.state = \"state\", e.nonce = \"nonce\", e.codeVerifier = \"codeVerifier\", e))(i || {});\nclass F {\n  async setItems(t) {\n    await Promise.all(\n      Object.entries(t).map(\n        ([r, s]) => this.setSessionItem(r, s)\n      )\n    );\n  }\n  async removeItems(...t) {\n    await Promise.all(\n      t.map((r) => this.removeSessionItem(r))\n    );\n  }\n}\nclass Ce extends F {\n  memCache = {};\n  /**\n   * Clears all items from session store.\n   * @returns {void}\n   */\n  async destroySession() {\n    this.memCache = {};\n  }\n  /**\n   * Sets the provided key-value store to the memory cache.\n   * @param {string} itemKey\n   * @param {unknown} itemValue\n   * @returns {void}\n   */\n  async setSessionItem(t, r) {\n    if (await this.removeSessionItem(t), typeof r == \"string\") {\n      z(r, c.maxLength).forEach(\n        (s, n) => {\n          this.memCache[`${c.keyPrefix}${t}${n}`] = s;\n        }\n      );\n      return;\n    }\n    this.memCache[`${c.keyPrefix}${String(t)}0`] = r;\n  }\n  /**\n   * Gets the item for the provided key from the memory cache.\n   * @param {string} itemKey\n   * @returns {unknown | null}\n   */\n  async getSessionItem(t) {\n    if (this.memCache[`${c.keyPrefix}${String(t)}0`] === void 0)\n      return null;\n    let r = \"\", s = 0, n = `${c.keyPrefix}${String(t)}${s}`;\n    for (; this.memCache[n] !== void 0; )\n      r += this.memCache[n], s++, n = `${c.keyPrefix}${String(t)}${s}`;\n    return r;\n  }\n  /**\n   * Removes the item for the provided key from the memory cache.\n   * @param {string} itemKey\n   * @returns {void}\n   */\n  async removeSessionItem(t) {\n    for (const r in this.memCache)\n      r.startsWith(`${c.keyPrefix}${String(t)}`) && delete this.memCache[r];\n  }\n}\nfunction T(e) {\n  return new Promise((t, r) => {\n    chrome.storage.local.get([e], function(s) {\n      chrome.runtime.lastError ? r(void 0) : t(s[e]);\n    });\n  });\n}\nclass Te extends F {\n  /**\n   * Clears all items from session store.\n   * @returns {void}\n   */\n  async destroySession() {\n    await chrome.storage.local.clear();\n  }\n  /**\n   * Sets the provided key-value store to the chrome.store.local.\n   * @param {string} itemKey\n   * @param {unknown} itemValue\n   * @returns {void}\n   */\n  async setSessionItem(t, r) {\n    if (await this.removeSessionItem(t), typeof r == \"string\") {\n      z(r, c.maxLength).forEach(\n        async (s, n) => {\n          await chrome.storage.local.set({\n            [`${c.keyPrefix}${t}${n}`]: s\n          });\n        }\n      );\n      return;\n    }\n    await chrome.storage.local.set({\n      [`${c.keyPrefix}${t}0`]: r\n    });\n  }\n  /**\n   * Gets the item for the provided key from the chrome.store.local cache.\n   * @param {string} itemKey\n   * @returns {unknown | null}\n   */\n  async getSessionItem(t) {\n    let r = \"\", s = 0, n = `${c.keyPrefix}${String(t)}${s}`;\n    for (; await T(\n      `${c.keyPrefix}${String(t)}${s}`\n    ) !== void 0; )\n      r += await T(n), s++, n = `${c.keyPrefix}${String(t)}${s}`;\n    return r;\n  }\n  /**\n   * Removes the item for the provided key from the chrome.store.local cache.\n   * @param {string} itemKey\n   * @returns {void}\n   */\n  async removeSessionItem(t) {\n    let r = 0;\n    for (; await T(\n      `${c.keyPrefix}${String(t)}${r}`\n    ) !== void 0; )\n      await chrome.storage.local.remove(\n        `${c.keyPrefix}${String(t)}${r}`\n      ), r++;\n  }\n}\nclass Ae extends F {\n  constructor() {\n    super(), c.useInsecureForRefreshToken && console.warn(\"LocalStorage store should not be used in production\");\n  }\n  internalItems = /* @__PURE__ */ new Set();\n  /**\n   * Clears all items from session store.\n   * @returns {void}\n   */\n  async destroySession() {\n    this.internalItems.forEach((t) => {\n      this.removeSessionItem(t);\n    });\n  }\n  /**\n   * Sets the provided key-value store to the localStorage cache.\n   * @param {V} itemKey\n   * @param {unknown} itemValue\n   * @returns {void}\n   */\n  async setSessionItem(t, r) {\n    if (await this.removeSessionItem(t), this.internalItems.add(t), typeof r == \"string\") {\n      z(r, c.maxLength).forEach(\n        (s, n) => {\n          localStorage.setItem(\n            `${c.keyPrefix}${t}${n}`,\n            s\n          );\n        }\n      );\n      return;\n    }\n    localStorage.setItem(\n      `${c.keyPrefix}${t}0`,\n      r\n    );\n  }\n  /**\n   * Gets the item for the provided key from the localStorage cache.\n   * @param {string} itemKey\n   * @returns {unknown | null}\n   */\n  async getSessionItem(t) {\n    if (localStorage.getItem(`${c.keyPrefix}${t}0`) === null)\n      return null;\n    let r = \"\", s = 0, n = `${c.keyPrefix}${String(t)}${s}`;\n    for (; localStorage.getItem(n) !== null; )\n      r += localStorage.getItem(n), s++, n = `${c.keyPrefix}${String(t)}${s}`;\n    return r;\n  }\n  /**\n   * Removes the item for the provided key from the localStorage cache.\n   * @param {V} itemKey\n   * @returns {void}\n   */\n  async removeSessionItem(t) {\n    let r = 0;\n    for (; localStorage.getItem(\n      `${c.keyPrefix}${String(t)}${r}`\n    ) !== null; )\n      localStorage.removeItem(\n        `${c.keyPrefix}${String(t)}${r}`\n      ), r++;\n    this.internalItems.delete(t);\n  }\n}\nconst c = {\n  /**\n   * The prefix to use for the storage keys.\n   */\n  keyPrefix: \"kinde-\",\n  /**\n   * The maximum length of the storage.\n   *\n   * If the length is exceeded the items will be split into multiple storage items.\n   */\n  maxLength: 2e3,\n  /**\n   * Use insecure storage for refresh token.\n   *\n   * Warning: This should only be used when you're not using a custom domain and no backend app to authenticate on.\n   */\n  useInsecureForRefreshToken: !1\n}, H = (e, t) => {\n  if (Array.isArray(e) && Array.isArray(t))\n    return Array.from(/* @__PURE__ */ new Set([...e, ...t]));\n  if (e && typeof e == \"object\" && t && typeof t == \"object\") {\n    const r = { ...e };\n    for (const s of Object.keys(t))\n      s in r ? r[s] = H(r[s], t[s]) : r[s] = t[s];\n    return r;\n  }\n  return t;\n};\nasync function U(e) {\n  const t = _();\n  if (!t)\n    throw new Error(\"No active storage found.\");\n  const r = await t.getSessionItem(i.accessToken);\n  if (!r)\n    throw new Error(\"Authentication token not found.\");\n  const s = await L(\"iss\");\n  if (!s?.value)\n    throw new Error(\"Domain (iss claim) not found.\");\n  let n;\n  try {\n    n = await fetch(`${s.value}/${e}`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${r}`,\n        \"Content-Type\": \"application/json\"\n      }\n    });\n  } catch (o) {\n    throw new Error(`Failed to fetch from ${s.value}/${e}: ${o}`);\n  }\n  if (!n.ok)\n    throw new Error(`API request failed with status ${n.status}`);\n  return await n.json();\n}\nconst S = async ({\n  url: e\n}) => {\n  let t = [], r = await U(e);\n  if (t = r.data, r.metadata?.has_more) {\n    let s = r.metadata.next_page_starting_after;\n    for (; r.metadata.has_more; )\n      r = await U(\n        `${e}?starting_after=${s}`\n      ), t = H(t, r.data), s = r.metadata.next_page_starting_after;\n  }\n  return t;\n}, se = async (e) => {\n  if (e?.forceApi) {\n    const n = await S({\n      url: \"account_api/v1/permissions\"\n    });\n    return {\n      orgCode: n.org_code,\n      permissions: n.permissions?.map((a) => a.key) || []\n    };\n  }\n  const t = await m();\n  if (!t)\n    return {\n      orgCode: null,\n      permissions: []\n    };\n  const r = t.permissions || t[\"x-hasura-permissions\"] || [];\n  return {\n    orgCode: t.org_code || t[\"x-hasura-org-code\"],\n    permissions: r\n  };\n}, oe = (e) => typeof e == \"object\" && e !== null && \"permission\" in e && \"condition\" in e, ae = async (e) => {\n  if (!e || !e.permissions || e?.permissions?.length === 0)\n    return !0;\n  const { permissions: t } = e;\n  let r;\n  try {\n    r = await se({\n      forceApi: e.forceApi\n    });\n  } catch (n) {\n    return console.error(\"[hasPermissions] Error getting permissions\", n), !1;\n  }\n  return (await Promise.all(\n    t.map(async (n) => oe(n) ? r.permissions.find(\n      (o) => o === n.permission\n    ) ? await n.condition({\n      permissionKey: n.permission,\n      orgCode: r.orgCode\n    }) : !1 : !!r.permissions.find(\n      (o) => o === n\n    ))\n  )).every((n) => n === !0);\n}, ie = async (e) => {\n  const t = await L(\"roles\");\n  if (e?.forceApi || !t?.value)\n    return (await S({\n      url: \"account_api/v1/roles\"\n    })).roles?.map((n) => ({\n      id: n.id,\n      name: n.name,\n      key: n.key\n    })) || [];\n  const r = await m();\n  return r ? !r.roles && !r[\"x-hasura-roles\"] ? (console.warn(\n    \"No roles found in token, ensure roles have been included in the token customisation within the application settings\"\n  ), []) : r.roles || r[\"x-hasura-roles\"] : [];\n}, ce = (e) => typeof e == \"object\" && e !== null && \"role\" in e && \"condition\" in e, le = async (e) => {\n  if (!e || !e.roles || e?.roles?.length === 0)\n    return !0;\n  const { roles: t } = e;\n  let r;\n  try {\n    r = await ie({ forceApi: e.forceApi });\n  } catch (n) {\n    return console.error(\"[hasRoles] Error getting roles\", n), !1;\n  }\n  return (await Promise.all(\n    t.map(async (n) => {\n      if (ce(n)) {\n        const a = r.find(\n          (u) => u.key === n.role\n        );\n        return a ? await n.condition(a) : !1;\n      } else\n        return r.map((o) => o.key).includes(n);\n    })\n  )).every((n) => n === !0);\n}, ue = async (e) => {\n  if (e?.forceApi)\n    return (await S({\n      url: \"account_api/v1/feature_flags\"\n    })).feature_flags?.map((n) => ({\n      key: n.key,\n      value: n.value,\n      type: n.type\n    })) || [];\n  const t = await m();\n  if (!t)\n    return null;\n  const r = t.feature_flags || t[\"x-hasura-feature-flags\"];\n  return r ? Object.entries(r).map(([s, n]) => ({\n    key: s,\n    value: n.v,\n    type: n.t\n  })) : null;\n}, fe = (e) => typeof e == \"object\" && e !== null && \"flag\" in e && \"value\" in e, de = async (e) => {\n  if (!e || !e.featureFlags || e?.featureFlags?.length === 0)\n    return !0;\n  const { featureFlags: t } = e;\n  let r;\n  try {\n    r = await ue({ forceApi: e.forceApi });\n  } catch (n) {\n    return console.error(\"[hasFeatureFlags] Error getting feature flags\", n), !1;\n  }\n  return t.map((n) => {\n    if (fe(n)) {\n      const a = r?.find((o) => o.key === n.flag);\n      return a !== void 0 && a.value === n.value;\n    } else\n      return r?.find((o) => o.key === n) !== void 0;\n  }).every((n) => n === !0);\n}, he = async () => {\n  const e = await S({\n    url: \"account_api/v1/entitlements\"\n  });\n  return {\n    orgCode: e.org_code,\n    plans: e.plans?.map((t) => ({\n      key: t.key,\n      subscribedOn: t.subscribed_on\n    })) || [],\n    entitlements: e.entitlements?.map((t) => ({\n      id: t.id,\n      fixedCharge: t.fixed_charge,\n      priceName: t.price_name,\n      unitAmount: t.unit_amount,\n      featureKey: t.feature_key,\n      featureName: t.feature_name,\n      entitlementLimitMax: t.entitlement_limit_max,\n      entitlementLimitMin: t.entitlement_limit_min\n    })) || []\n  };\n}, ge = (e) => typeof e == \"object\" && e !== null && \"entitlement\" in e && \"condition\" in e, me = async (e) => {\n  if (!e || !e.billingEntitlements || e?.billingEntitlements?.length === 0)\n    return !0;\n  const { billingEntitlements: t } = e;\n  let r;\n  try {\n    r = await he();\n  } catch (n) {\n    return console.error(\"[hasBillingEntitlements] Error getting entitlements\", n), !1;\n  }\n  return (await Promise.all(\n    t.map(async (n) => {\n      if (ge(n)) {\n        const a = r.entitlements.find(\n          (o) => o.priceName === n.entitlement\n        );\n        return a ? await n.condition(a) : !1;\n      } else\n        return r.entitlements.map(\n          (o) => o.priceName\n        ).includes(n);\n    })\n  )).every((n) => n === !0);\n}, A = (e) => e !== void 0 && typeof e == \"object\", Ie = async (e) => {\n  const t = [];\n  return e.roles && t.push(\n    le({\n      roles: e.roles,\n      forceApi: A(e.forceApi) ? e.forceApi.roles : e.forceApi\n    })\n  ), e.permissions && t.push(\n    ae({\n      permissions: e.permissions,\n      forceApi: A(e.forceApi) ? e.forceApi.permissions : e.forceApi\n    })\n  ), e.featureFlags && t.push(\n    de({\n      featureFlags: e.featureFlags,\n      forceApi: A(e.forceApi) ? e.forceApi.featureFlags : e.forceApi\n    })\n  ), e.billingEntitlements && t.push(\n    me({\n      billingEntitlements: e.billingEntitlements\n    })\n  ), (await Promise.all(t)).every(Boolean);\n};\nfunction ke(e, t) {\n  if (!e)\n    return null;\n  const r = e.split(\".\");\n  if (r.length !== 3)\n    return null;\n  const s = r[\n    1\n    /* body */\n  ].replace(/-/g, \"+\").replace(/_/g, \"/\"), n = decodeURIComponent(\n    atob(s).split(\"\").map((a) => \"%\" + (\"00\" + a.charCodeAt(0).toString(16)).slice(-2)).join(\"\")\n  );\n  return JSON.parse(n);\n}\nconst m = async (e = i.accessToken) => {\n  const t = _();\n  if (!t)\n    return null;\n  const r = await t.getSessionItem(\n    e === \"accessToken\" ? i.accessToken : i.idToken\n  );\n  if (!r)\n    return null;\n  const s = ke(r);\n  return s || console.warn(\"No decoded token found\"), s;\n}, G = async (e = \"accessToken\") => m(e), L = async (e, t = \"accessToken\") => {\n  const r = await G(t);\n  return r ? {\n    name: e,\n    value: r[e]\n  } : null;\n}, Ee = async () => {\n  const e = await m();\n  return e ? e.org_code || e[\"x-hasura-org-code\"] : null;\n}, Pe = async (e = i.accessToken) => {\n  const t = _();\n  if (!t)\n    return null;\n  const r = await t.getSessionItem(\n    e === \"accessToken\" ? i.accessToken : i.idToken\n  );\n  return r || null;\n}, Ue = async (e, t) => {\n  if (t?.forceApi) {\n    const o = (await S({\n      url: \"account_api/v1/feature_flags\"\n    })).feature_flags.find((u) => u.name === e);\n    return o ? o.value : null;\n  }\n  const r = await m();\n  if (!r)\n    return null;\n  const s = r.feature_flags || r[\"x-hasura-feature-flags\"];\n  return s ? s[e]?.v ?? null : null;\n}, be = async () => {\n  const e = await G(\"idToken\");\n  if (!e)\n    return null;\n  const { sub: t } = e;\n  return t ? {\n    id: e.sub,\n    givenName: e.given_name,\n    familyName: e.family_name,\n    email: e.email,\n    picture: e.picture\n  } : (console.error(\"No sub in idToken\"), null);\n}, Re = async (e, t) => {\n  if (t?.forceApi)\n    return U(\n      `account_api/v1/permission/${encodeURIComponent(e)}`\n    );\n  const r = await m();\n  if (!r)\n    return {\n      permissionKey: e,\n      orgCode: null,\n      isGranted: !1\n    };\n  const s = r.permissions || [];\n  return {\n    permissionKey: e,\n    orgCode: r.org_code,\n    isGranted: !!s.includes(e)\n  };\n}, ze = async () => {\n  const e = await m(\"idToken\");\n  return e ? !e.org_codes && !e[\"x-hasura-org-codes\"] ? (console.warn(\n    \"Org codes not found in token, ensure org codes have been included in the token customisation within the application settings\"\n  ), null) : e.org_codes || e[\"x-hasura-org-codes\"] : null;\n}, Fe = async (e) => {\n  try {\n    const t = await m(\"accessToken\");\n    if (!t) return !1;\n    if (!t.exp)\n      return console.error(\"Token does not have an expiry\"), !1;\n    const r = t.exp < Math.floor(Date.now() / 1e3);\n    return r && e?.useRefreshToken ? (await x({\n      domain: e.domain,\n      clientId: e.clientId\n    })).success : !r;\n  } catch (t) {\n    return console.error(\"Error checking authentication:\", t), !1;\n  }\n}, x = async ({\n  domain: e,\n  clientId: t,\n  refreshType: r = w.refreshToken,\n  onRefresh: s\n}) => {\n  const n = (u) => (s && s(u), u);\n  if (!e)\n    return n({\n      success: !1,\n      error: \"Domain is required for token refresh\"\n    });\n  if (!t)\n    return n({\n      success: !1,\n      error: \"Client ID is required for token refresh\"\n    });\n  let a = \"\", o;\n  if (c.useInsecureForRefreshToken || !$(e) ? o = C() : o = _(), r === w.refreshToken) {\n    if (!o)\n      return n({\n        success: !1,\n        error: \"No active storage found\"\n      });\n    if (a = await o.getSessionItem(\n      i.refreshToken\n    ), !a)\n      return n({\n        success: !1,\n        error: \"No refresh token found\"\n      });\n  }\n  R();\n  try {\n    const u = await fetch(`${b(e)}/oauth2/token`, {\n      method: \"POST\",\n      ...r === w.cookie && { credentials: \"include\" },\n      headers: {\n        \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n      },\n      body: new URLSearchParams({\n        ...r === w.refreshToken && {\n          refresh_token: a\n        },\n        grant_type: \"refresh_token\",\n        client_id: t\n      }).toString()\n    });\n    if (!u.ok)\n      return n({\n        success: !1,\n        error: \"Failed to refresh token\"\n      });\n    const l = await u.json();\n    if (l.access_token) {\n      const f = _();\n      return f ? (q(l.expires_in, async () => {\n        x({ domain: e, clientId: t, refreshType: r, onRefresh: s });\n      }), o && (await f.setSessionItem(\n        i.accessToken,\n        l.access_token\n      ), l.id_token && await f.setSessionItem(i.idToken, l.id_token), l.refresh_token && await o.setSessionItem(\n        i.refreshToken,\n        l.refresh_token\n      )), n({\n        success: !0,\n        [i.accessToken]: l.access_token,\n        [i.idToken]: l.id_token,\n        [i.refreshToken]: l.refresh_token\n      })) : n({\n        success: !1,\n        error: \"No active storage found\"\n      });\n    }\n  } catch (u) {\n    return n({\n      success: !1,\n      error: `No access token received: ${u}`\n    });\n  }\n  return n({\n    success: !1,\n    error: \"No access token received\"\n  });\n}, g = {\n  secure: null,\n  insecure: null\n}, Le = (e) => {\n  g.secure = e;\n}, _ = () => g.secure || null, Ne = () => g.secure !== null, De = () => {\n  g.secure = null;\n}, Ve = (e) => {\n  g.insecure = e;\n}, C = () => g.insecure || g.secure || null, Me = () => g.insecure !== null, je = () => {\n  g.insecure = null;\n}, Be = async (e) => (console.warn(\n  \"Warning: generateProfileUrl is deprecated. Please use generatePortalUrl instead.\"\n), _e({\n  domain: e.domain,\n  returnUrl: e.returnUrl,\n  subNav: e.subNav\n}));\nfunction we(e, t = []) {\n  try {\n    const r = new URL(e);\n    return !t.includes(r.protocol) && !!r.host;\n  } catch {\n    return !1;\n  }\n}\nconst _e = async ({\n  domain: e,\n  returnUrl: t,\n  subNav: r\n}) => {\n  const s = _();\n  if (!s)\n    throw new Error(\"generatePortalUrl: Active storage not found\");\n  const n = await s.getSessionItem(\n    i.accessToken\n  );\n  if (!n)\n    throw new Error(\"generatePortalUrl: Access Token not found\");\n  if (!e || typeof e != \"string\") {\n    const l = await L(\"iss\");\n    if (!l?.value || typeof l.value != \"string\")\n      throw new Error(\n        \"generatePortalUrl: Unable to determine domain from access token\"\n      );\n    e = l.value;\n  }\n  if (!we(t, [\"ftp:\", \"ws:\"]))\n    throw new Error(\"generatePortalUrl: returnUrl must be an absolute URL\");\n  const a = new URLSearchParams({\n    subnav: r || B.profile,\n    return_url: t\n  }), o = await fetch(\n    `${b(e)}/account_api/v1/portal_link?${a.toString()}`,\n    {\n      headers: {\n        Authorization: `Bearer ${n}`\n      }\n    }\n  );\n  if (!o.ok)\n    throw new Error(\n      `Failed to fetch profile URL: ${o.status} ${o.statusText}`\n    );\n  const u = await o.json();\n  if (!u.url || typeof u.url != \"string\")\n    throw new Error(\"Invalid URL received from API\");\n  try {\n    return {\n      url: new URL(u.url)\n    };\n  } catch (l) {\n    throw console.error(l), new Error(`Invalid URL format received from API: ${u.url}`);\n  }\n}, qe = {\n  __esModule: !0,\n  default: async () => (await import(\n    /* webpackIgnore: true */\n    \"./expoSecureStore-DT0Gf-SP.js\"\n  )).ExpoSecureStore\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtpbmRlL2pzLXV0aWxzL2Rpc3QvbWFpbi1EMjJmb1pzTS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHlJQUF5SSxvR0FBb0csaWNBQWljLHVWQUF1ViwwSkFBMEosK0dBQStHO0FBQzl3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsT0FBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEVBQUU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQSxxREFBcUQsRUFBRTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0NBQW9DO0FBQ2hE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Q0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxVQUFVLFNBQVM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLENBQUM7QUFDRDtBQUNBO0FBQ0EsbUNBQW1DLHNCQUFzQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEtBQUs7QUFDbEM7QUFDQSw2QkFBNkIsd0JBQXdCO0FBQ3JEO0FBQ0EsNERBQTREO0FBQzVELE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNEQUFzRDtBQUNsRSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsMENBQTBDLEVBQUU7QUFDNUMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILE9BQU8sS0FBSyw4QkFBOEIsYUFBYTtBQUN2RDtBQUNBO0FBQ0EsaUNBQWlDLEVBQUU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxVQUFVLEVBQUUsYUFBYTtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLCtFQUErRSxNQUFNO0FBQ3JGO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTBERSIsInNvdXJjZXMiOlsid2VicGFjazovL3N0dWRlbnQtYXR0ZW5kYW5jZS1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9Aa2luZGUvanMtdXRpbHMvZGlzdC9tYWluLUQyMmZvWnNNLmpzP2U0Y2EiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIFogPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5lbWFpbCA9IFwiZW1haWxcIiwgZS5wcm9maWxlID0gXCJwcm9maWxlXCIsIGUub3BlbmlkID0gXCJvcGVuaWRcIiwgZS5vZmZsaW5lX2FjY2VzcyA9IFwib2ZmbGluZVwiLCBlKSkoWiB8fCB7fSksIGogPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5ub25lID0gXCJub25lXCIsIGUuY3JlYXRlID0gXCJjcmVhdGVcIiwgZS5sb2dpbiA9IFwibG9naW5cIiwgZSkpKGogfHwge30pLCBCID0gLyogQF9fUFVSRV9fICovICgoZSkgPT4gKGUub3JnYW5pemF0aW9uRGV0YWlscyA9IFwib3JnYW5pemF0aW9uX2RldGFpbHNcIiwgZS5vcmdhbml6YXRpb25NZW1iZXJzID0gXCJvcmdhbml6YXRpb25fbWVtYmVyc1wiLCBlLm9yZ2FuaXphdGlvblBsYW5EZXRhaWxzID0gXCJvcmdhbml6YXRpb25fcGxhbl9kZXRhaWxzXCIsIGUub3JnYW5pemF0aW9uUGF5bWVudERldGFpbHMgPSBcIm9yZ2FuaXphdGlvbl9wYXltZW50X2RldGFpbHNcIiwgZS5vcmdhbml6YXRpb25QbGFuU2VsZWN0aW9uID0gXCJvcmdhbml6YXRpb25fcGxhbl9zZWxlY3Rpb25cIiwgZS5wYXltZW50RGV0YWlscyA9IFwicGF5bWVudF9kZXRhaWxzXCIsIGUucGxhblNlbGVjdGlvbiA9IFwicGxhbl9zZWxlY3Rpb25cIiwgZS5wbGFuRGV0YWlscyA9IFwicGxhbl9kZXRhaWxzXCIsIGUucHJvZmlsZSA9IFwicHJvZmlsZVwiLCBlKSkoQiB8fCB7fSksIFEgPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZS5vcmdhbml6YXRpb25EZXRhaWxzID0gXCJvcmdhbml6YXRpb25fZGV0YWlsc1wiLCBlLm9yZ2FuaXphdGlvbk1lbWJlcnMgPSBcIm9yZ2FuaXphdGlvbl9tZW1iZXJzXCIsIGUub3JnYW5pemF0aW9uUGxhbkRldGFpbHMgPSBcIm9yZ2FuaXphdGlvbl9wbGFuX2RldGFpbHNcIiwgZS5vcmdhbml6YXRpb25QYXltZW50RGV0YWlscyA9IFwib3JnYW5pemF0aW9uX3BheW1lbnRfZGV0YWlsc1wiLCBlLm9yZ2FuaXphdGlvblBsYW5TZWxlY3Rpb24gPSBcIm9yZ2FuaXphdGlvbl9wbGFuX3NlbGVjdGlvblwiLCBlLnByb2ZpbGUgPSBcInByb2ZpbGVcIiwgZSkpKFEgfHwge30pLCBJID0gLyogQF9fUFVSRV9fICovICgoZSkgPT4gKGUubG9nb3V0ID0gXCJsb2dvdXRcIiwgZS5sb2dpbiA9IFwibG9naW5cIiwgZS5yZWdpc3RlciA9IFwicmVnaXN0cmF0aW9uXCIsIGUudG9rZW4gPSBcInRva2VuXCIsIGUucHJvZmlsZSA9IFwicHJvZmlsZVwiLCBlKSkoSSB8fCB7fSksIHcgPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZVtlLnJlZnJlc2hUb2tlbiA9IDBdID0gXCJyZWZyZXNoVG9rZW5cIiwgZVtlLmNvb2tpZSA9IDFdID0gXCJjb29raWVcIiwgZSkpKHcgfHwge30pO1xuY29uc3QgViA9IChlKSA9PiB7XG4gIGNvbnN0IHQgPSAoYSkgPT4gYnRvYShhKS5yZXBsYWNlKC9cXCsvZywgXCItXCIpLnJlcGxhY2UoL1xcLy9nLCBcIl9cIikucmVwbGFjZSgvPSskLywgXCJcIik7XG4gIGlmIChlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICBjb25zdCBhID0gbmV3IFVpbnQ4QXJyYXkoZSksIG8gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmEpO1xuICAgIHJldHVybiB0KG8pO1xuICB9XG4gIGNvbnN0IHMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoZSksIG4gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLnMpO1xuICByZXR1cm4gdChuKTtcbn0sIEUgPSAoZSA9IDI4KSA9PiB7XG4gIGlmIChjcnlwdG8pIHtcbiAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoZSAvIDIpO1xuICAgIHJldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHQpLCBBcnJheS5mcm9tKHQsIFgpLmpvaW4oXCJcIik7XG4gIH0gZWxzZVxuICAgIHJldHVybiBZKGUpO1xufTtcbmZ1bmN0aW9uIFgoZSkge1xuICByZXR1cm4gZS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpO1xufVxuZnVuY3Rpb24gWShlID0gMjgpIHtcbiAgY29uc3QgdCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIjtcbiAgbGV0IHIgPSBcIlwiO1xuICBjb25zdCBzID0gdC5sZW5ndGg7XG4gIGZvciAobGV0IG4gPSAwOyBuIDwgZTsgbisrKVxuICAgIHIgKz0gdC5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcykpO1xuICByZXR1cm4gcjtcbn1cbmNvbnN0IFNlID0gKGUpID0+IHtcbiAgZSA9IGUuc3BsaXQoXCI/XCIpWzFdO1xuICBjb25zdCB0ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhlKTtcbiAgcmV0dXJuIHtcbiAgICBhY2Nlc3NUb2tlbjogdC5nZXQoXCJhY2Nlc3NfdG9rZW5cIiksXG4gICAgaWRUb2tlbjogdC5nZXQoXCJpZF90b2tlblwiKSxcbiAgICBleHBpcmVzSW46ICsodC5nZXQoXCJleHBpcmVzX2luXCIpIHx8IDApXG4gIH07XG59LCBiID0gKGUpID0+IGUucmVwbGFjZSgvXFwvJC8sIFwiXCIpLCBPID0gKGUsIHQgPSAhMSkgPT4ge1xuICBjb25zdCByID0gQXJyYXkuaXNBcnJheShlLmF1ZGllbmNlKSA/IGUuYXVkaWVuY2Uuam9pbihcIiBcIikgOiBlLmF1ZGllbmNlIHx8IFwiXCIsIHMgPSB7XG4gICAgbG9naW5faGludDogZS5sb2dpbkhpbnQsXG4gICAgaXNfY3JlYXRlX29yZzogZS5pc0NyZWF0ZU9yZz8udG9TdHJpbmcoKSxcbiAgICBjb25uZWN0aW9uX2lkOiBlLmNvbm5lY3Rpb25JZCxcbiAgICByZWRpcmVjdF91cmk6IGUucmVkaXJlY3RVUkwgPyB0ID8gZS5yZWRpcmVjdFVSTCA6IGIoZS5yZWRpcmVjdFVSTCkgOiB2b2lkIDAsXG4gICAgYXVkaWVuY2U6IHIsXG4gICAgc2NvcGU6IGUuc2NvcGU/LmpvaW4oXCIgXCIpIHx8IFwiZW1haWwgcHJvZmlsZSBvcGVuaWQgb2ZmbGluZVwiLFxuICAgIHByb21wdDogZS5wcm9tcHQsXG4gICAgbGFuZzogZS5sYW5nLFxuICAgIG9yZ19jb2RlOiBlLm9yZ0NvZGUsXG4gICAgb3JnX25hbWU6IGUub3JnTmFtZSxcbiAgICBoYXNfc3VjY2Vzc19wYWdlOiBlLmhhc1N1Y2Nlc3NQYWdlPy50b1N0cmluZygpLFxuICAgIHdvcmtmbG93X2RlcGxveW1lbnRfaWQ6IGUud29ya2Zsb3dEZXBsb3ltZW50SWQsXG4gICAgc3VwcG9ydHNfcmVhdXRoOiBlLnN1cHBvcnRzUmVhdXRoPy50b1N0cmluZygpLFxuICAgIHBsYW5faW50ZXJlc3Q6IGUucGxhbkludGVyZXN0LFxuICAgIHByaWNpbmdfdGFibGVfa2V5OiBlLnByaWNpbmdUYWJsZUtleSxcbiAgICBwYWdlc19tb2RlOiBlLnBhZ2VzTW9kZVxuICB9O1xuICByZXR1cm4gT2JqZWN0LmtleXMocykuZm9yRWFjaChcbiAgICAobikgPT4gc1tuXSA9PT0gdm9pZCAwICYmIGRlbGV0ZSBzW25dXG4gICksIHM7XG59LCBQID0gKGUpID0+IHR5cGVvZiBlICE9IFwib2JqZWN0XCIgfHwgZSA9PT0gbnVsbCA/IGUgOiBBcnJheS5pc0FycmF5KGUpID8gZS5tYXAoKHQpID0+IFAodCkpIDogT2JqZWN0LmZyb21FbnRyaWVzKFxuICBPYmplY3QuZW50cmllcyhlKS5tYXAoKFt0LCByXSkgPT4gW1xuICAgIHQucmVwbGFjZSgvXyhbYS16XSkvZywgKHMsIG4pID0+IG4udG9VcHBlckNhc2UoKSksXG4gICAgUChyKVxuICBdKVxuKSwgSyA9IFtcbiAgLy8gVVRNIHRhZ3NcbiAgXCJ1dG1fc291cmNlXCIsXG4gIFwidXRtX21lZGl1bVwiLFxuICBcInV0bV9jYW1wYWlnblwiLFxuICBcInV0bV9jb250ZW50XCIsXG4gIFwidXRtX3Rlcm1cIixcbiAgLy8gR29vZ2xlIEFkcyBzbWFydCBjYW1wYWlnbiB0cmFja2luZ1xuICBcImdjbGlkXCIsXG4gIFwiY2xpY2tfaWRcIixcbiAgXCJoc2FfYWNjXCIsXG4gIFwiaHNhX2NhbVwiLFxuICBcImhzYV9ncnBcIixcbiAgXCJoc2FfYWRcIixcbiAgXCJoc2Ffc3JjXCIsXG4gIFwiaHNhX3RndFwiLFxuICBcImhzYV9rd1wiLFxuICBcImhzYV9tdFwiLFxuICBcImhzYV9uZXRcIixcbiAgXCJoc2FfdmVyXCIsXG4gIC8vIE1hcmtldGluZyBjYXRlZ29yeVxuICBcIm1hdGNoX3R5cGVcIixcbiAgXCJrZXl3b3JkXCIsXG4gIFwiZGV2aWNlXCIsXG4gIFwiYWRfZ3JvdXBfaWRcIixcbiAgXCJjYW1wYWlnbl9pZFwiLFxuICBcImNyZWF0aXZlXCIsXG4gIFwibmV0d29ya1wiLFxuICBcImFkX3Bvc2l0aW9uXCIsXG4gIFwiZmJjbGlkXCIsXG4gIFwibGlfZmF0X2lkXCIsXG4gIFwibXNjbGtpZFwiLFxuICBcInR3Y2xpZFwiLFxuICBcInR0Y2xpZFwiXG5dLCB2ZSA9IGFzeW5jIChlLCB0ID0gSS5sb2dpbiwgciwgcykgPT4ge1xuICBjb25zdCBuID0gYCR7ZX0vb2F1dGgyL2F1dGhgLCBhID0gQygpO1xuICBpZiAoci5yZWF1dGhTdGF0ZSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgZiA9IFAoXG4gICAgICAgIEpTT04ucGFyc2UoYXRvYihyLnJlYXV0aFN0YXRlKSlcbiAgICAgICk7XG4gICAgICByID0ge1xuICAgICAgICAuLi5yLFxuICAgICAgICAuLi5mXG4gICAgICB9LCBkZWxldGUgci5yZWF1dGhTdGF0ZTtcbiAgICB9IGNhdGNoIChmKSB7XG4gICAgICBjb25zdCBoID0gZiBpbnN0YW5jZW9mIEVycm9yID8gZi5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCI7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGhhbmRpbmcgcmVhdXRoIHN0YXRlOiAke2h9YCk7XG4gICAgfVxuICBpZiAoIXIuY2xpZW50SWQpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgZ2VuZXJhdGluZyBhdXRoIFVSTDogQ2xpZW50IElEIG1pc3NpbmdcIik7XG4gIGNvbnN0IG8gPSB7XG4gICAgY2xpZW50X2lkOiByLmNsaWVudElkLFxuICAgIHJlc3BvbnNlX3R5cGU6IHIucmVzcG9uc2VUeXBlIHx8IFwiY29kZVwiLFxuICAgIC4uLk8ociwgcz8uZGlzYWJsZVVybFNhbml0aXphdGlvbilcbiAgfTtcbiAgci5zdGF0ZSB8fCAoci5zdGF0ZSA9IEUoMzIpKSwgYSAmJiBhLnNldFNlc3Npb25JdGVtKGkuc3RhdGUsIHIuc3RhdGUpLCBvLnN0YXRlID0gci5zdGF0ZSwgci5ub25jZSB8fCAoci5ub25jZSA9IEUoMTYpKSwgby5ub25jZSA9IHIubm9uY2UsIGEgJiYgYS5zZXRTZXNzaW9uSXRlbShpLm5vbmNlLCByLm5vbmNlKTtcbiAgbGV0IHUgPSBcIlwiO1xuICBpZiAoci5jb2RlQ2hhbGxlbmdlKVxuICAgIG8uY29kZV9jaGFsbGVuZ2UgPSByLmNvZGVDaGFsbGVuZ2U7XG4gIGVsc2Uge1xuICAgIGNvbnN0IHsgY29kZVZlcmlmaWVyOiBmLCBjb2RlQ2hhbGxlbmdlOiBoIH0gPSBhd2FpdCBlZSgpO1xuICAgIHUgPSBmLCBhICYmIGEuc2V0U2Vzc2lvbkl0ZW0oaS5jb2RlVmVyaWZpZXIsIGYpLCBvLmNvZGVfY2hhbGxlbmdlID0gaDtcbiAgfVxuICBvLmNvZGVfY2hhbGxlbmdlX21ldGhvZCA9IFwiUzI1NlwiLCByLmNvZGVDaGFsbGVuZ2VNZXRob2QgJiYgKG8uY29kZV9jaGFsbGVuZ2VfbWV0aG9kID0gci5jb2RlQ2hhbGxlbmdlTWV0aG9kKSwgIXIucHJvbXB0ICYmIHQgPT09IEkucmVnaXN0ZXIgJiYgKG8ucHJvbXB0ID0gai5jcmVhdGUpLCByLnByb3BlcnRpZXMgJiYgT2JqZWN0LmtleXMoci5wcm9wZXJ0aWVzKS5mb3JFYWNoKChmKSA9PiB7XG4gICAgaWYgKCFLLmluY2x1ZGVzKGYpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJVbnN1cHBvcnRlZCBQcm9wZXJ0eSBmb3IgdXJsIGdlbmVyYXRpb246IFwiLCBmKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaCA9IHIucHJvcGVydGllcz8uW2ZdO1xuICAgIGggIT09IHZvaWQgMCAmJiAob1tmXSA9IGgpO1xuICB9KTtcbiAgY29uc3QgbCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobykudG9TdHJpbmcoKTtcbiAgcmV0dXJuIHtcbiAgICB1cmw6IG5ldyBVUkwoYCR7bn0/JHtsfWApLFxuICAgIHN0YXRlOiBvLnN0YXRlLFxuICAgIG5vbmNlOiBvLm5vbmNlLFxuICAgIGNvZGVDaGFsbGVuZ2U6IG8uY29kZV9jaGFsbGVuZ2UsXG4gICAgY29kZVZlcmlmaWVyOiB1XG4gIH07XG59O1xuYXN5bmMgZnVuY3Rpb24gZWUoKSB7XG4gIGNvbnN0IGUgPSBFKDUyKSwgdCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShlKTtcbiAgbGV0IHIgPSBcIlwiO1xuICBpZiAoIWNyeXB0bylcbiAgICByID0gVihidG9hKGUpKTtcbiAgZWxzZSB7XG4gICAgY29uc3QgcyA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTI1NlwiLCB0KTtcbiAgICByID0gVihzKTtcbiAgfVxuICByZXR1cm4geyBjb2RlVmVyaWZpZXI6IGUsIGNvZGVDaGFsbGVuZ2U6IHIgfTtcbn1cbmxldCB2O1xuZnVuY3Rpb24gcShlLCB0KSB7XG4gIGlmIChSKCksIHR5cGVvZiB3aW5kb3cgPiBcInVcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJzZXRSZWZyZXNoVGltZXIgcmVxdWlyZXMgYSBicm93c2VyIGVudmlyb25tZW50XCIpO1xuICBpZiAoZSA8PSAwKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlRpbWVyIGR1cmF0aW9uIG11c3QgYmUgcG9zaXRpdmVcIik7XG4gIHYgPSB3aW5kb3cuc2V0VGltZW91dChcbiAgICB0LFxuICAgIE1hdGgubWluKGUgKiAxZTMgLSAxZTQsIDg2NGU1KVxuICApO1xufVxuZnVuY3Rpb24gUigpIHtcbiAgdiAhPT0gdm9pZCAwICYmICh3aW5kb3cuY2xlYXJUaW1lb3V0KHYpLCB2ID0gdm9pZCAwKTtcbn1cbmNvbnN0IHkgPSB7XG4gIGZyYW1ld29yazogXCJcIixcbiAgZnJhbWV3b3JrVmVyc2lvbjogXCJcIixcbiAgc2RrVmVyc2lvbjogXCJcIlxufSwgTSA9IGFzeW5jICgpID0+IHtcbiAgYXdhaXQgQygpPy5yZW1vdmVJdGVtcyhcbiAgICBpLnN0YXRlLFxuICAgIGkubm9uY2UsXG4gICAgaS5jb2RlVmVyaWZpZXJcbiAgKTtcbn0sIHRlID0gKCkgPT4gYCR7eS5mcmFtZXdvcmt9LyR7eS5zZGtWZXJzaW9ufS8ke3kuZnJhbWV3b3JrVmVyc2lvbn0vSmF2YXNjcmlwdGAsICRlID0gYXN5bmMgKHtcbiAgdXJsUGFyYW1zOiBlLFxuICBkb21haW46IHQsXG4gIGNsaWVudElkOiByLFxuICByZWRpcmVjdFVSTDogcyxcbiAgYXV0b1JlZnJlc2g6IG4gPSAhMSxcbiAgb25SZWZyZXNoOiBhXG59KSA9PiB7XG4gIGNvbnN0IG8gPSBlLmdldChcInN0YXRlXCIpLCB1ID0gZS5nZXQoXCJjb2RlXCIpO1xuICBpZiAoIW8gfHwgIXUpXG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIHN0YXRlIG9yIGNvZGVcIiksIHtcbiAgICAgIHN1Y2Nlc3M6ICExLFxuICAgICAgZXJyb3I6IFwiSW52YWxpZCBzdGF0ZSBvciBjb2RlXCJcbiAgICB9O1xuICBjb25zdCBsID0gQygpO1xuICBpZiAoIWwpXG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJObyBhY3RpdmUgc3RvcmFnZSBmb3VuZFwiKSwge1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogXCJBdXRoZW50aWNhdGlvbiBzdG9yYWdlIGlzIG5vdCBpbml0aWFsaXplZFwiXG4gICAgfTtcbiAgKCF5LmZyYW1ld29yayB8fCAheS5mcmFtZXdvcmtWZXJzaW9uKSAmJiBjb25zb2xlLndhcm4oXG4gICAgXCJGcmFtZXdvcmsgYW5kIHZlcnNpb24gbm90IHNldC4gUGxlYXNlIHNldCB0aGUgZnJhbWV3b3JrIGFuZCB2ZXJzaW9uIGluIHRoZSBjb25maWcgb2JqZWN0XCJcbiAgKTtcbiAgY29uc3QgZiA9IGF3YWl0IGwuZ2V0U2Vzc2lvbkl0ZW0oaS5zdGF0ZSk7XG4gIGlmIChvICE9PSBmKVxuICAgIHJldHVybiBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBzdGF0ZVwiKSwge1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogYEludmFsaWQgc3RhdGU7IHN1cHBsaWVkICR7b30sIGV4cGVjdGVkICR7Zn1gXG4gICAgfTtcbiAgY29uc3QgaCA9IGF3YWl0IGwuZ2V0U2Vzc2lvbkl0ZW0oXG4gICAgaS5jb2RlVmVyaWZpZXJcbiAgKTtcbiAgaWYgKGggPT09IG51bGwpXG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJDb2RlIHZlcmlmaWVyIG5vdCBmb3VuZFwiKSwge1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogXCJDb2RlIHZlcmlmaWVyIG5vdCBmb3VuZFwiXG4gICAgfTtcbiAgY29uc3QgTiA9IHtcbiAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiXG4gIH07XG4gIHkuZnJhbWV3b3JrICYmIChOW1wiS2luZGUtU0RLXCJdID0gdGUoKSk7XG4gIGNvbnN0IEogPSB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAuLi4hYy51c2VJbnNlY3VyZUZvclJlZnJlc2hUb2tlbiAmJiAkKHQpID8ge1xuICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiXG4gICAgfSA6IHt9LFxuICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKE4pLFxuICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgY2xpZW50X2lkOiByLFxuICAgICAgY29kZTogdSxcbiAgICAgIGNvZGVfdmVyaWZpZXI6IGgsXG4gICAgICBncmFudF90eXBlOiBcImF1dGhvcml6YXRpb25fY29kZVwiLFxuICAgICAgcmVkaXJlY3RfdXJpOiBzXG4gICAgfSlcbiAgfTtcbiAgbGV0IHA7XG4gIFIoKTtcbiAgdHJ5IHtcbiAgICBpZiAocCA9IGF3YWl0IGZldGNoKGAke3R9L29hdXRoMi90b2tlbmAsIEopLCAhcD8ub2spIHtcbiAgICAgIGNvbnN0IGsgPSBhd2FpdCBwLnRleHQoKTtcbiAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKFwiVG9rZW4gZXhjaGFuZ2UgZmFpbGVkOlwiLCBwLnN0YXR1cywgayksIHtcbiAgICAgICAgc3VjY2VzczogITEsXG4gICAgICAgIGVycm9yOiBgVG9rZW4gZXhjaGFuZ2UgZmFpbGVkOiAke3Auc3RhdHVzfSAtICR7a31gXG4gICAgICB9O1xuICAgIH1cbiAgfSBjYXRjaCAoaykge1xuICAgIHJldHVybiBNKCksIGNvbnNvbGUuZXJyb3IoXCJUb2tlbiBleGNoYW5nZSBmYWlsZWQ6XCIsIGspLCB7XG4gICAgICBzdWNjZXNzOiAhMSxcbiAgICAgIGVycm9yOiBgVG9rZW4gZXhjaGFuZ2UgZmFpbGVkOiAke2t9YFxuICAgIH07XG4gIH1cbiAgY29uc3QgZCA9IGF3YWl0IHAuanNvbigpLCBEID0gXygpO1xuICBEICYmIEQuc2V0SXRlbXMoe1xuICAgIFtpLmFjY2Vzc1Rva2VuXTogZC5hY2Nlc3NfdG9rZW4sXG4gICAgW2kuaWRUb2tlbl06IGQuaWRfdG9rZW4sXG4gICAgW2kucmVmcmVzaFRva2VuXTogZC5yZWZyZXNoX3Rva2VuXG4gIH0pLCAoYy51c2VJbnNlY3VyZUZvclJlZnJlc2hUb2tlbiB8fCAhJCh0KSkgJiYgbC5zZXRTZXNzaW9uSXRlbShpLnJlZnJlc2hUb2tlbiwgZC5yZWZyZXNoX3Rva2VuKSwgbiAmJiBxKGQuZXhwaXJlc19pbiwgYXN5bmMgKCkgPT4ge1xuICAgIHgoeyBkb21haW46IHQsIGNsaWVudElkOiByLCBvblJlZnJlc2g6IGEgfSk7XG4gIH0pLCBNKCk7XG4gIGNvbnN0IFcgPSAoKGspID0+IChrLnNlYXJjaCA9IFwiXCIsIGspKShuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi50b1N0cmluZygpKSk7XG4gIHJldHVybiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUod2luZG93Lmhpc3Rvcnkuc3RhdGUsIFwiXCIsIFcpLCAhZC5hY2Nlc3NfdG9rZW4gfHwgIWQuaWRfdG9rZW4gfHwgIWQucmVmcmVzaF90b2tlbiA/IHtcbiAgICBzdWNjZXNzOiAhMSxcbiAgICBlcnJvcjogXCJObyBhY2Nlc3MgdG9rZW4gcmVjZWl2ZWRcIlxuICB9IDoge1xuICAgIHN1Y2Nlc3M6ICEwLFxuICAgIFtpLmFjY2Vzc1Rva2VuXTogZC5hY2Nlc3NfdG9rZW4sXG4gICAgW2kuaWRUb2tlbl06IGQuaWRfdG9rZW4sXG4gICAgW2kucmVmcmVzaFRva2VuXTogZC5yZWZyZXNoX3Rva2VuXG4gIH07XG59O1xuZnVuY3Rpb24gcmUoZSkge1xuICBjb25zdCByID0gZG9jdW1lbnQuY29va2llLnNwbGl0KFwiOyBcIikuZmluZCgocykgPT4gcy5zdGFydHNXaXRoKGAke2V9PWApKTtcbiAgaWYgKCFyKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCBzID0gci5zcGxpdChcIj1cIilbMV07XG4gICAgcmV0dXJuIHMgPyBkZWNvZGVVUklDb21wb25lbnQocykgOiBudWxsO1xuICB9IGNhdGNoIChzKSB7XG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoYEVycm9yIHBhcnNpbmcgY29va2llICR7ZX06YCwgcyksIG51bGw7XG4gIH1cbn1cbmNvbnN0IG5lID0gXCJfa2JydGVcIiwgeGUgPSBhc3luYyAoe1xuICBkb21haW46IGUsXG4gIGNsaWVudElkOiB0XG59KSA9PiB7XG4gIGlmICghZSlcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogITEsXG4gICAgICBlcnJvcjogXCJEb21haW4gaXMgcmVxdWlyZWQgZm9yIGF1dGhlbnRpY2F0aW9uIGNoZWNrXCJcbiAgICB9O1xuICBpZiAoIXQpXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6ICExLFxuICAgICAgZXJyb3I6IFwiQ2xpZW50IElEIGlzIHJlcXVpcmVkIGZvciBhdXRoZW50aWNhdGlvbiBjaGVja1wiXG4gICAgfTtcbiAgY29uc3QgciA9ICQoZSksIHMgPSBjLnVzZUluc2VjdXJlRm9yUmVmcmVzaFRva2VuO1xuICBsZXQgbiA9IG51bGw7XG4gIHJldHVybiByICYmICFzICYmIChuID0gcmUobmUpKSwgYXdhaXQgeCh7XG4gICAgZG9tYWluOiBlLFxuICAgIGNsaWVudElkOiB0LFxuICAgIHJlZnJlc2hUeXBlOiBuID8gdy5jb29raWUgOiB3LnJlZnJlc2hUb2tlblxuICB9KTtcbn0sICQgPSAoZSkgPT4gIWUubWF0Y2goXG4gIC9eKD86aHR0cHM/OlxcL1xcLyk/W2EtekEtWjAtOV1bLi1hLXpBLVowLTldKlxcLmtpbmRlXFwuY29tJC9pXG4pO1xuZnVuY3Rpb24geihlLCB0KSB7XG4gIHJldHVybiB0IDw9IDAgPyBbXSA6IGUubWF0Y2gobmV3IFJlZ0V4cChgLnsxLCR7dH19YCwgXCJnXCIpKSB8fCBbXTtcbn1cbnZhciBpID0gLyogQF9fUFVSRV9fICovICgoZSkgPT4gKGUuYWNjZXNzVG9rZW4gPSBcImFjY2Vzc1Rva2VuXCIsIGUuaWRUb2tlbiA9IFwiaWRUb2tlblwiLCBlLnJlZnJlc2hUb2tlbiA9IFwicmVmcmVzaFRva2VuXCIsIGUuc3RhdGUgPSBcInN0YXRlXCIsIGUubm9uY2UgPSBcIm5vbmNlXCIsIGUuY29kZVZlcmlmaWVyID0gXCJjb2RlVmVyaWZpZXJcIiwgZSkpKGkgfHwge30pO1xuY2xhc3MgRiB7XG4gIGFzeW5jIHNldEl0ZW1zKHQpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIE9iamVjdC5lbnRyaWVzKHQpLm1hcChcbiAgICAgICAgKFtyLCBzXSkgPT4gdGhpcy5zZXRTZXNzaW9uSXRlbShyLCBzKVxuICAgICAgKVxuICAgICk7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlSXRlbXMoLi4udCkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgdC5tYXAoKHIpID0+IHRoaXMucmVtb3ZlU2Vzc2lvbkl0ZW0ocikpXG4gICAgKTtcbiAgfVxufVxuY2xhc3MgQ2UgZXh0ZW5kcyBGIHtcbiAgbWVtQ2FjaGUgPSB7fTtcbiAgLyoqXG4gICAqIENsZWFycyBhbGwgaXRlbXMgZnJvbSBzZXNzaW9uIHN0b3JlLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIGRlc3Ryb3lTZXNzaW9uKCkge1xuICAgIHRoaXMubWVtQ2FjaGUgPSB7fTtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgcHJvdmlkZWQga2V5LXZhbHVlIHN0b3JlIHRvIHRoZSBtZW1vcnkgY2FjaGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtS2V5XG4gICAqIEBwYXJhbSB7dW5rbm93bn0gaXRlbVZhbHVlXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgYXN5bmMgc2V0U2Vzc2lvbkl0ZW0odCwgcikge1xuICAgIGlmIChhd2FpdCB0aGlzLnJlbW92ZVNlc3Npb25JdGVtKHQpLCB0eXBlb2YgciA9PSBcInN0cmluZ1wiKSB7XG4gICAgICB6KHIsIGMubWF4TGVuZ3RoKS5mb3JFYWNoKFxuICAgICAgICAocywgbikgPT4ge1xuICAgICAgICAgIHRoaXMubWVtQ2FjaGVbYCR7Yy5rZXlQcmVmaXh9JHt0fSR7bn1gXSA9IHM7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubWVtQ2FjaGVbYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9MGBdID0gcjtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgaXRlbSBmb3IgdGhlIHByb3ZpZGVkIGtleSBmcm9tIHRoZSBtZW1vcnkgY2FjaGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtS2V5XG4gICAqIEByZXR1cm5zIHt1bmtub3duIHwgbnVsbH1cbiAgICovXG4gIGFzeW5jIGdldFNlc3Npb25JdGVtKHQpIHtcbiAgICBpZiAodGhpcy5tZW1DYWNoZVtgJHtjLmtleVByZWZpeH0ke1N0cmluZyh0KX0wYF0gPT09IHZvaWQgMClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCByID0gXCJcIiwgcyA9IDAsIG4gPSBgJHtjLmtleVByZWZpeH0ke1N0cmluZyh0KX0ke3N9YDtcbiAgICBmb3IgKDsgdGhpcy5tZW1DYWNoZVtuXSAhPT0gdm9pZCAwOyApXG4gICAgICByICs9IHRoaXMubWVtQ2FjaGVbbl0sIHMrKywgbiA9IGAke2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfSR7c31gO1xuICAgIHJldHVybiByO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBpdGVtIGZvciB0aGUgcHJvdmlkZWQga2V5IGZyb20gdGhlIG1lbW9yeSBjYWNoZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1LZXlcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBhc3luYyByZW1vdmVTZXNzaW9uSXRlbSh0KSB7XG4gICAgZm9yIChjb25zdCByIGluIHRoaXMubWVtQ2FjaGUpXG4gICAgICByLnN0YXJ0c1dpdGgoYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9YCkgJiYgZGVsZXRlIHRoaXMubWVtQ2FjaGVbcl07XG4gIH1cbn1cbmZ1bmN0aW9uIFQoZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHQsIHIpID0+IHtcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoW2VdLCBmdW5jdGlvbihzKSB7XG4gICAgICBjaHJvbWUucnVudGltZS5sYXN0RXJyb3IgPyByKHZvaWQgMCkgOiB0KHNbZV0pO1xuICAgIH0pO1xuICB9KTtcbn1cbmNsYXNzIFRlIGV4dGVuZHMgRiB7XG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIGl0ZW1zIGZyb20gc2Vzc2lvbiBzdG9yZS5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBhc3luYyBkZXN0cm95U2Vzc2lvbigpIHtcbiAgICBhd2FpdCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5jbGVhcigpO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBwcm92aWRlZCBrZXktdmFsdWUgc3RvcmUgdG8gdGhlIGNocm9tZS5zdG9yZS5sb2NhbC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1LZXlcbiAgICogQHBhcmFtIHt1bmtub3dufSBpdGVtVmFsdWVcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBhc3luYyBzZXRTZXNzaW9uSXRlbSh0LCByKSB7XG4gICAgaWYgKGF3YWl0IHRoaXMucmVtb3ZlU2Vzc2lvbkl0ZW0odCksIHR5cGVvZiByID09IFwic3RyaW5nXCIpIHtcbiAgICAgIHoociwgYy5tYXhMZW5ndGgpLmZvckVhY2goXG4gICAgICAgIGFzeW5jIChzLCBuKSA9PiB7XG4gICAgICAgICAgYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcbiAgICAgICAgICAgIFtgJHtjLmtleVByZWZpeH0ke3R9JHtufWBdOiBzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7XG4gICAgICBbYCR7Yy5rZXlQcmVmaXh9JHt0fTBgXTogclxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpdGVtIGZvciB0aGUgcHJvdmlkZWQga2V5IGZyb20gdGhlIGNocm9tZS5zdG9yZS5sb2NhbCBjYWNoZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1LZXlcbiAgICogQHJldHVybnMge3Vua25vd24gfCBudWxsfVxuICAgKi9cbiAgYXN5bmMgZ2V0U2Vzc2lvbkl0ZW0odCkge1xuICAgIGxldCByID0gXCJcIiwgcyA9IDAsIG4gPSBgJHtjLmtleVByZWZpeH0ke1N0cmluZyh0KX0ke3N9YDtcbiAgICBmb3IgKDsgYXdhaXQgVChcbiAgICAgIGAke2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfSR7c31gXG4gICAgKSAhPT0gdm9pZCAwOyApXG4gICAgICByICs9IGF3YWl0IFQobiksIHMrKywgbiA9IGAke2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfSR7c31gO1xuICAgIHJldHVybiByO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBpdGVtIGZvciB0aGUgcHJvdmlkZWQga2V5IGZyb20gdGhlIGNocm9tZS5zdG9yZS5sb2NhbCBjYWNoZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1LZXlcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBhc3luYyByZW1vdmVTZXNzaW9uSXRlbSh0KSB7XG4gICAgbGV0IHIgPSAwO1xuICAgIGZvciAoOyBhd2FpdCBUKFxuICAgICAgYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtyfWBcbiAgICApICE9PSB2b2lkIDA7IClcbiAgICAgIGF3YWl0IGNocm9tZS5zdG9yYWdlLmxvY2FsLnJlbW92ZShcbiAgICAgICAgYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtyfWBcbiAgICAgICksIHIrKztcbiAgfVxufVxuY2xhc3MgQWUgZXh0ZW5kcyBGIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKSwgYy51c2VJbnNlY3VyZUZvclJlZnJlc2hUb2tlbiAmJiBjb25zb2xlLndhcm4oXCJMb2NhbFN0b3JhZ2Ugc3RvcmUgc2hvdWxkIG5vdCBiZSB1c2VkIGluIHByb2R1Y3Rpb25cIik7XG4gIH1cbiAgaW50ZXJuYWxJdGVtcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIGl0ZW1zIGZyb20gc2Vzc2lvbiBzdG9yZS5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBhc3luYyBkZXN0cm95U2Vzc2lvbigpIHtcbiAgICB0aGlzLmludGVybmFsSXRlbXMuZm9yRWFjaCgodCkgPT4ge1xuICAgICAgdGhpcy5yZW1vdmVTZXNzaW9uSXRlbSh0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgcHJvdmlkZWQga2V5LXZhbHVlIHN0b3JlIHRvIHRoZSBsb2NhbFN0b3JhZ2UgY2FjaGUuXG4gICAqIEBwYXJhbSB7Vn0gaXRlbUtleVxuICAgKiBAcGFyYW0ge3Vua25vd259IGl0ZW1WYWx1ZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGFzeW5jIHNldFNlc3Npb25JdGVtKHQsIHIpIHtcbiAgICBpZiAoYXdhaXQgdGhpcy5yZW1vdmVTZXNzaW9uSXRlbSh0KSwgdGhpcy5pbnRlcm5hbEl0ZW1zLmFkZCh0KSwgdHlwZW9mIHIgPT0gXCJzdHJpbmdcIikge1xuICAgICAgeihyLCBjLm1heExlbmd0aCkuZm9yRWFjaChcbiAgICAgICAgKHMsIG4pID0+IHtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgICAgIGAke2Mua2V5UHJlZml4fSR7dH0ke259YCxcbiAgICAgICAgICAgIHNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgIGAke2Mua2V5UHJlZml4fSR7dH0wYCxcbiAgICAgIHJcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpdGVtIGZvciB0aGUgcHJvdmlkZWQga2V5IGZyb20gdGhlIGxvY2FsU3RvcmFnZSBjYWNoZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1LZXlcbiAgICogQHJldHVybnMge3Vua25vd24gfCBudWxsfVxuICAgKi9cbiAgYXN5bmMgZ2V0U2Vzc2lvbkl0ZW0odCkge1xuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtjLmtleVByZWZpeH0ke3R9MGApID09PSBudWxsKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHIgPSBcIlwiLCBzID0gMCwgbiA9IGAke2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfSR7c31gO1xuICAgIGZvciAoOyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuKSAhPT0gbnVsbDsgKVxuICAgICAgciArPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuKSwgcysrLCBuID0gYCR7Yy5rZXlQcmVmaXh9JHtTdHJpbmcodCl9JHtzfWA7XG4gICAgcmV0dXJuIHI7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGl0ZW0gZm9yIHRoZSBwcm92aWRlZCBrZXkgZnJvbSB0aGUgbG9jYWxTdG9yYWdlIGNhY2hlLlxuICAgKiBAcGFyYW0ge1Z9IGl0ZW1LZXlcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuICBhc3luYyByZW1vdmVTZXNzaW9uSXRlbSh0KSB7XG4gICAgbGV0IHIgPSAwO1xuICAgIGZvciAoOyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcbiAgICAgIGAke2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfSR7cn1gXG4gICAgKSAhPT0gbnVsbDsgKVxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXG4gICAgICAgIGAke2Mua2V5UHJlZml4fSR7U3RyaW5nKHQpfSR7cn1gXG4gICAgICApLCByKys7XG4gICAgdGhpcy5pbnRlcm5hbEl0ZW1zLmRlbGV0ZSh0KTtcbiAgfVxufVxuY29uc3QgYyA9IHtcbiAgLyoqXG4gICAqIFRoZSBwcmVmaXggdG8gdXNlIGZvciB0aGUgc3RvcmFnZSBrZXlzLlxuICAgKi9cbiAga2V5UHJlZml4OiBcImtpbmRlLVwiLFxuICAvKipcbiAgICogVGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBzdG9yYWdlLlxuICAgKlxuICAgKiBJZiB0aGUgbGVuZ3RoIGlzIGV4Y2VlZGVkIHRoZSBpdGVtcyB3aWxsIGJlIHNwbGl0IGludG8gbXVsdGlwbGUgc3RvcmFnZSBpdGVtcy5cbiAgICovXG4gIG1heExlbmd0aDogMmUzLFxuICAvKipcbiAgICogVXNlIGluc2VjdXJlIHN0b3JhZ2UgZm9yIHJlZnJlc2ggdG9rZW4uXG4gICAqXG4gICAqIFdhcm5pbmc6IFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCB3aGVuIHlvdSdyZSBub3QgdXNpbmcgYSBjdXN0b20gZG9tYWluIGFuZCBubyBiYWNrZW5kIGFwcCB0byBhdXRoZW50aWNhdGUgb24uXG4gICAqL1xuICB1c2VJbnNlY3VyZUZvclJlZnJlc2hUb2tlbjogITFcbn0sIEggPSAoZSwgdCkgPT4ge1xuICBpZiAoQXJyYXkuaXNBcnJheShlKSAmJiBBcnJheS5pc0FycmF5KHQpKVxuICAgIHJldHVybiBBcnJheS5mcm9tKC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFsuLi5lLCAuLi50XSkpO1xuICBpZiAoZSAmJiB0eXBlb2YgZSA9PSBcIm9iamVjdFwiICYmIHQgJiYgdHlwZW9mIHQgPT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IHIgPSB7IC4uLmUgfTtcbiAgICBmb3IgKGNvbnN0IHMgb2YgT2JqZWN0LmtleXModCkpXG4gICAgICBzIGluIHIgPyByW3NdID0gSChyW3NdLCB0W3NdKSA6IHJbc10gPSB0W3NdO1xuICAgIHJldHVybiByO1xuICB9XG4gIHJldHVybiB0O1xufTtcbmFzeW5jIGZ1bmN0aW9uIFUoZSkge1xuICBjb25zdCB0ID0gXygpO1xuICBpZiAoIXQpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWN0aXZlIHN0b3JhZ2UgZm91bmQuXCIpO1xuICBjb25zdCByID0gYXdhaXQgdC5nZXRTZXNzaW9uSXRlbShpLmFjY2Vzc1Rva2VuKTtcbiAgaWYgKCFyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkF1dGhlbnRpY2F0aW9uIHRva2VuIG5vdCBmb3VuZC5cIik7XG4gIGNvbnN0IHMgPSBhd2FpdCBMKFwiaXNzXCIpO1xuICBpZiAoIXM/LnZhbHVlKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRvbWFpbiAoaXNzIGNsYWltKSBub3QgZm91bmQuXCIpO1xuICBsZXQgbjtcbiAgdHJ5IHtcbiAgICBuID0gYXdhaXQgZmV0Y2goYCR7cy52YWx1ZX0vJHtlfWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3J9YCxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAobykge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGZyb20gJHtzLnZhbHVlfS8ke2V9OiAke299YCk7XG4gIH1cbiAgaWYgKCFuLm9rKVxuICAgIHRocm93IG5ldyBFcnJvcihgQVBJIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzICR7bi5zdGF0dXN9YCk7XG4gIHJldHVybiBhd2FpdCBuLmpzb24oKTtcbn1cbmNvbnN0IFMgPSBhc3luYyAoe1xuICB1cmw6IGVcbn0pID0+IHtcbiAgbGV0IHQgPSBbXSwgciA9IGF3YWl0IFUoZSk7XG4gIGlmICh0ID0gci5kYXRhLCByLm1ldGFkYXRhPy5oYXNfbW9yZSkge1xuICAgIGxldCBzID0gci5tZXRhZGF0YS5uZXh0X3BhZ2Vfc3RhcnRpbmdfYWZ0ZXI7XG4gICAgZm9yICg7IHIubWV0YWRhdGEuaGFzX21vcmU7IClcbiAgICAgIHIgPSBhd2FpdCBVKFxuICAgICAgICBgJHtlfT9zdGFydGluZ19hZnRlcj0ke3N9YFxuICAgICAgKSwgdCA9IEgodCwgci5kYXRhKSwgcyA9IHIubWV0YWRhdGEubmV4dF9wYWdlX3N0YXJ0aW5nX2FmdGVyO1xuICB9XG4gIHJldHVybiB0O1xufSwgc2UgPSBhc3luYyAoZSkgPT4ge1xuICBpZiAoZT8uZm9yY2VBcGkpIHtcbiAgICBjb25zdCBuID0gYXdhaXQgUyh7XG4gICAgICB1cmw6IFwiYWNjb3VudF9hcGkvdjEvcGVybWlzc2lvbnNcIlxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBvcmdDb2RlOiBuLm9yZ19jb2RlLFxuICAgICAgcGVybWlzc2lvbnM6IG4ucGVybWlzc2lvbnM/Lm1hcCgoYSkgPT4gYS5rZXkpIHx8IFtdXG4gICAgfTtcbiAgfVxuICBjb25zdCB0ID0gYXdhaXQgbSgpO1xuICBpZiAoIXQpXG4gICAgcmV0dXJuIHtcbiAgICAgIG9yZ0NvZGU6IG51bGwsXG4gICAgICBwZXJtaXNzaW9uczogW11cbiAgICB9O1xuICBjb25zdCByID0gdC5wZXJtaXNzaW9ucyB8fCB0W1wieC1oYXN1cmEtcGVybWlzc2lvbnNcIl0gfHwgW107XG4gIHJldHVybiB7XG4gICAgb3JnQ29kZTogdC5vcmdfY29kZSB8fCB0W1wieC1oYXN1cmEtb3JnLWNvZGVcIl0sXG4gICAgcGVybWlzc2lvbnM6IHJcbiAgfTtcbn0sIG9lID0gKGUpID0+IHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgZSAhPT0gbnVsbCAmJiBcInBlcm1pc3Npb25cIiBpbiBlICYmIFwiY29uZGl0aW9uXCIgaW4gZSwgYWUgPSBhc3luYyAoZSkgPT4ge1xuICBpZiAoIWUgfHwgIWUucGVybWlzc2lvbnMgfHwgZT8ucGVybWlzc2lvbnM/Lmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gITA7XG4gIGNvbnN0IHsgcGVybWlzc2lvbnM6IHQgfSA9IGU7XG4gIGxldCByO1xuICB0cnkge1xuICAgIHIgPSBhd2FpdCBzZSh7XG4gICAgICBmb3JjZUFwaTogZS5mb3JjZUFwaVxuICAgIH0pO1xuICB9IGNhdGNoIChuKSB7XG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJbaGFzUGVybWlzc2lvbnNdIEVycm9yIGdldHRpbmcgcGVybWlzc2lvbnNcIiwgbiksICExO1xuICB9XG4gIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgdC5tYXAoYXN5bmMgKG4pID0+IG9lKG4pID8gci5wZXJtaXNzaW9ucy5maW5kKFxuICAgICAgKG8pID0+IG8gPT09IG4ucGVybWlzc2lvblxuICAgICkgPyBhd2FpdCBuLmNvbmRpdGlvbih7XG4gICAgICBwZXJtaXNzaW9uS2V5OiBuLnBlcm1pc3Npb24sXG4gICAgICBvcmdDb2RlOiByLm9yZ0NvZGVcbiAgICB9KSA6ICExIDogISFyLnBlcm1pc3Npb25zLmZpbmQoXG4gICAgICAobykgPT4gbyA9PT0gblxuICAgICkpXG4gICkpLmV2ZXJ5KChuKSA9PiBuID09PSAhMCk7XG59LCBpZSA9IGFzeW5jIChlKSA9PiB7XG4gIGNvbnN0IHQgPSBhd2FpdCBMKFwicm9sZXNcIik7XG4gIGlmIChlPy5mb3JjZUFwaSB8fCAhdD8udmFsdWUpXG4gICAgcmV0dXJuIChhd2FpdCBTKHtcbiAgICAgIHVybDogXCJhY2NvdW50X2FwaS92MS9yb2xlc1wiXG4gICAgfSkpLnJvbGVzPy5tYXAoKG4pID0+ICh7XG4gICAgICBpZDogbi5pZCxcbiAgICAgIG5hbWU6IG4ubmFtZSxcbiAgICAgIGtleTogbi5rZXlcbiAgICB9KSkgfHwgW107XG4gIGNvbnN0IHIgPSBhd2FpdCBtKCk7XG4gIHJldHVybiByID8gIXIucm9sZXMgJiYgIXJbXCJ4LWhhc3VyYS1yb2xlc1wiXSA/IChjb25zb2xlLndhcm4oXG4gICAgXCJObyByb2xlcyBmb3VuZCBpbiB0b2tlbiwgZW5zdXJlIHJvbGVzIGhhdmUgYmVlbiBpbmNsdWRlZCBpbiB0aGUgdG9rZW4gY3VzdG9taXNhdGlvbiB3aXRoaW4gdGhlIGFwcGxpY2F0aW9uIHNldHRpbmdzXCJcbiAgKSwgW10pIDogci5yb2xlcyB8fCByW1wieC1oYXN1cmEtcm9sZXNcIl0gOiBbXTtcbn0sIGNlID0gKGUpID0+IHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgZSAhPT0gbnVsbCAmJiBcInJvbGVcIiBpbiBlICYmIFwiY29uZGl0aW9uXCIgaW4gZSwgbGUgPSBhc3luYyAoZSkgPT4ge1xuICBpZiAoIWUgfHwgIWUucm9sZXMgfHwgZT8ucm9sZXM/Lmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gITA7XG4gIGNvbnN0IHsgcm9sZXM6IHQgfSA9IGU7XG4gIGxldCByO1xuICB0cnkge1xuICAgIHIgPSBhd2FpdCBpZSh7IGZvcmNlQXBpOiBlLmZvcmNlQXBpIH0pO1xuICB9IGNhdGNoIChuKSB7XG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJbaGFzUm9sZXNdIEVycm9yIGdldHRpbmcgcm9sZXNcIiwgbiksICExO1xuICB9XG4gIHJldHVybiAoYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgdC5tYXAoYXN5bmMgKG4pID0+IHtcbiAgICAgIGlmIChjZShuKSkge1xuICAgICAgICBjb25zdCBhID0gci5maW5kKFxuICAgICAgICAgICh1KSA9PiB1LmtleSA9PT0gbi5yb2xlXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBhID8gYXdhaXQgbi5jb25kaXRpb24oYSkgOiAhMTtcbiAgICAgIH0gZWxzZVxuICAgICAgICByZXR1cm4gci5tYXAoKG8pID0+IG8ua2V5KS5pbmNsdWRlcyhuKTtcbiAgICB9KVxuICApKS5ldmVyeSgobikgPT4gbiA9PT0gITApO1xufSwgdWUgPSBhc3luYyAoZSkgPT4ge1xuICBpZiAoZT8uZm9yY2VBcGkpXG4gICAgcmV0dXJuIChhd2FpdCBTKHtcbiAgICAgIHVybDogXCJhY2NvdW50X2FwaS92MS9mZWF0dXJlX2ZsYWdzXCJcbiAgICB9KSkuZmVhdHVyZV9mbGFncz8ubWFwKChuKSA9PiAoe1xuICAgICAga2V5OiBuLmtleSxcbiAgICAgIHZhbHVlOiBuLnZhbHVlLFxuICAgICAgdHlwZTogbi50eXBlXG4gICAgfSkpIHx8IFtdO1xuICBjb25zdCB0ID0gYXdhaXQgbSgpO1xuICBpZiAoIXQpXG4gICAgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHIgPSB0LmZlYXR1cmVfZmxhZ3MgfHwgdFtcIngtaGFzdXJhLWZlYXR1cmUtZmxhZ3NcIl07XG4gIHJldHVybiByID8gT2JqZWN0LmVudHJpZXMocikubWFwKChbcywgbl0pID0+ICh7XG4gICAga2V5OiBzLFxuICAgIHZhbHVlOiBuLnYsXG4gICAgdHlwZTogbi50XG4gIH0pKSA6IG51bGw7XG59LCBmZSA9IChlKSA9PiB0eXBlb2YgZSA9PSBcIm9iamVjdFwiICYmIGUgIT09IG51bGwgJiYgXCJmbGFnXCIgaW4gZSAmJiBcInZhbHVlXCIgaW4gZSwgZGUgPSBhc3luYyAoZSkgPT4ge1xuICBpZiAoIWUgfHwgIWUuZmVhdHVyZUZsYWdzIHx8IGU/LmZlYXR1cmVGbGFncz8ubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiAhMDtcbiAgY29uc3QgeyBmZWF0dXJlRmxhZ3M6IHQgfSA9IGU7XG4gIGxldCByO1xuICB0cnkge1xuICAgIHIgPSBhd2FpdCB1ZSh7IGZvcmNlQXBpOiBlLmZvcmNlQXBpIH0pO1xuICB9IGNhdGNoIChuKSB7XG4gICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJbaGFzRmVhdHVyZUZsYWdzXSBFcnJvciBnZXR0aW5nIGZlYXR1cmUgZmxhZ3NcIiwgbiksICExO1xuICB9XG4gIHJldHVybiB0Lm1hcCgobikgPT4ge1xuICAgIGlmIChmZShuKSkge1xuICAgICAgY29uc3QgYSA9IHI/LmZpbmQoKG8pID0+IG8ua2V5ID09PSBuLmZsYWcpO1xuICAgICAgcmV0dXJuIGEgIT09IHZvaWQgMCAmJiBhLnZhbHVlID09PSBuLnZhbHVlO1xuICAgIH0gZWxzZVxuICAgICAgcmV0dXJuIHI/LmZpbmQoKG8pID0+IG8ua2V5ID09PSBuKSAhPT0gdm9pZCAwO1xuICB9KS5ldmVyeSgobikgPT4gbiA9PT0gITApO1xufSwgaGUgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGUgPSBhd2FpdCBTKHtcbiAgICB1cmw6IFwiYWNjb3VudF9hcGkvdjEvZW50aXRsZW1lbnRzXCJcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgb3JnQ29kZTogZS5vcmdfY29kZSxcbiAgICBwbGFuczogZS5wbGFucz8ubWFwKCh0KSA9PiAoe1xuICAgICAga2V5OiB0LmtleSxcbiAgICAgIHN1YnNjcmliZWRPbjogdC5zdWJzY3JpYmVkX29uXG4gICAgfSkpIHx8IFtdLFxuICAgIGVudGl0bGVtZW50czogZS5lbnRpdGxlbWVudHM/Lm1hcCgodCkgPT4gKHtcbiAgICAgIGlkOiB0LmlkLFxuICAgICAgZml4ZWRDaGFyZ2U6IHQuZml4ZWRfY2hhcmdlLFxuICAgICAgcHJpY2VOYW1lOiB0LnByaWNlX25hbWUsXG4gICAgICB1bml0QW1vdW50OiB0LnVuaXRfYW1vdW50LFxuICAgICAgZmVhdHVyZUtleTogdC5mZWF0dXJlX2tleSxcbiAgICAgIGZlYXR1cmVOYW1lOiB0LmZlYXR1cmVfbmFtZSxcbiAgICAgIGVudGl0bGVtZW50TGltaXRNYXg6IHQuZW50aXRsZW1lbnRfbGltaXRfbWF4LFxuICAgICAgZW50aXRsZW1lbnRMaW1pdE1pbjogdC5lbnRpdGxlbWVudF9saW1pdF9taW5cbiAgICB9KSkgfHwgW11cbiAgfTtcbn0sIGdlID0gKGUpID0+IHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgZSAhPT0gbnVsbCAmJiBcImVudGl0bGVtZW50XCIgaW4gZSAmJiBcImNvbmRpdGlvblwiIGluIGUsIG1lID0gYXN5bmMgKGUpID0+IHtcbiAgaWYgKCFlIHx8ICFlLmJpbGxpbmdFbnRpdGxlbWVudHMgfHwgZT8uYmlsbGluZ0VudGl0bGVtZW50cz8ubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiAhMDtcbiAgY29uc3QgeyBiaWxsaW5nRW50aXRsZW1lbnRzOiB0IH0gPSBlO1xuICBsZXQgcjtcbiAgdHJ5IHtcbiAgICByID0gYXdhaXQgaGUoKTtcbiAgfSBjYXRjaCAobikge1xuICAgIHJldHVybiBjb25zb2xlLmVycm9yKFwiW2hhc0JpbGxpbmdFbnRpdGxlbWVudHNdIEVycm9yIGdldHRpbmcgZW50aXRsZW1lbnRzXCIsIG4pLCAhMTtcbiAgfVxuICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFxuICAgIHQubWFwKGFzeW5jIChuKSA9PiB7XG4gICAgICBpZiAoZ2UobikpIHtcbiAgICAgICAgY29uc3QgYSA9IHIuZW50aXRsZW1lbnRzLmZpbmQoXG4gICAgICAgICAgKG8pID0+IG8ucHJpY2VOYW1lID09PSBuLmVudGl0bGVtZW50XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBhID8gYXdhaXQgbi5jb25kaXRpb24oYSkgOiAhMTtcbiAgICAgIH0gZWxzZVxuICAgICAgICByZXR1cm4gci5lbnRpdGxlbWVudHMubWFwKFxuICAgICAgICAgIChvKSA9PiBvLnByaWNlTmFtZVxuICAgICAgICApLmluY2x1ZGVzKG4pO1xuICAgIH0pXG4gICkpLmV2ZXJ5KChuKSA9PiBuID09PSAhMCk7XG59LCBBID0gKGUpID0+IGUgIT09IHZvaWQgMCAmJiB0eXBlb2YgZSA9PSBcIm9iamVjdFwiLCBJZSA9IGFzeW5jIChlKSA9PiB7XG4gIGNvbnN0IHQgPSBbXTtcbiAgcmV0dXJuIGUucm9sZXMgJiYgdC5wdXNoKFxuICAgIGxlKHtcbiAgICAgIHJvbGVzOiBlLnJvbGVzLFxuICAgICAgZm9yY2VBcGk6IEEoZS5mb3JjZUFwaSkgPyBlLmZvcmNlQXBpLnJvbGVzIDogZS5mb3JjZUFwaVxuICAgIH0pXG4gICksIGUucGVybWlzc2lvbnMgJiYgdC5wdXNoKFxuICAgIGFlKHtcbiAgICAgIHBlcm1pc3Npb25zOiBlLnBlcm1pc3Npb25zLFxuICAgICAgZm9yY2VBcGk6IEEoZS5mb3JjZUFwaSkgPyBlLmZvcmNlQXBpLnBlcm1pc3Npb25zIDogZS5mb3JjZUFwaVxuICAgIH0pXG4gICksIGUuZmVhdHVyZUZsYWdzICYmIHQucHVzaChcbiAgICBkZSh7XG4gICAgICBmZWF0dXJlRmxhZ3M6IGUuZmVhdHVyZUZsYWdzLFxuICAgICAgZm9yY2VBcGk6IEEoZS5mb3JjZUFwaSkgPyBlLmZvcmNlQXBpLmZlYXR1cmVGbGFncyA6IGUuZm9yY2VBcGlcbiAgICB9KVxuICApLCBlLmJpbGxpbmdFbnRpdGxlbWVudHMgJiYgdC5wdXNoKFxuICAgIG1lKHtcbiAgICAgIGJpbGxpbmdFbnRpdGxlbWVudHM6IGUuYmlsbGluZ0VudGl0bGVtZW50c1xuICAgIH0pXG4gICksIChhd2FpdCBQcm9taXNlLmFsbCh0KSkuZXZlcnkoQm9vbGVhbik7XG59O1xuZnVuY3Rpb24ga2UoZSwgdCkge1xuICBpZiAoIWUpXG4gICAgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHIgPSBlLnNwbGl0KFwiLlwiKTtcbiAgaWYgKHIubGVuZ3RoICE9PSAzKVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCBzID0gcltcbiAgICAxXG4gICAgLyogYm9keSAqL1xuICBdLnJlcGxhY2UoLy0vZywgXCIrXCIpLnJlcGxhY2UoL18vZywgXCIvXCIpLCBuID0gZGVjb2RlVVJJQ29tcG9uZW50KFxuICAgIGF0b2Iocykuc3BsaXQoXCJcIikubWFwKChhKSA9PiBcIiVcIiArIChcIjAwXCIgKyBhLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikpLmpvaW4oXCJcIilcbiAgKTtcbiAgcmV0dXJuIEpTT04ucGFyc2Uobik7XG59XG5jb25zdCBtID0gYXN5bmMgKGUgPSBpLmFjY2Vzc1Rva2VuKSA9PiB7XG4gIGNvbnN0IHQgPSBfKCk7XG4gIGlmICghdClcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgciA9IGF3YWl0IHQuZ2V0U2Vzc2lvbkl0ZW0oXG4gICAgZSA9PT0gXCJhY2Nlc3NUb2tlblwiID8gaS5hY2Nlc3NUb2tlbiA6IGkuaWRUb2tlblxuICApO1xuICBpZiAoIXIpXG4gICAgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHMgPSBrZShyKTtcbiAgcmV0dXJuIHMgfHwgY29uc29sZS53YXJuKFwiTm8gZGVjb2RlZCB0b2tlbiBmb3VuZFwiKSwgcztcbn0sIEcgPSBhc3luYyAoZSA9IFwiYWNjZXNzVG9rZW5cIikgPT4gbShlKSwgTCA9IGFzeW5jIChlLCB0ID0gXCJhY2Nlc3NUb2tlblwiKSA9PiB7XG4gIGNvbnN0IHIgPSBhd2FpdCBHKHQpO1xuICByZXR1cm4gciA/IHtcbiAgICBuYW1lOiBlLFxuICAgIHZhbHVlOiByW2VdXG4gIH0gOiBudWxsO1xufSwgRWUgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGUgPSBhd2FpdCBtKCk7XG4gIHJldHVybiBlID8gZS5vcmdfY29kZSB8fCBlW1wieC1oYXN1cmEtb3JnLWNvZGVcIl0gOiBudWxsO1xufSwgUGUgPSBhc3luYyAoZSA9IGkuYWNjZXNzVG9rZW4pID0+IHtcbiAgY29uc3QgdCA9IF8oKTtcbiAgaWYgKCF0KVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCByID0gYXdhaXQgdC5nZXRTZXNzaW9uSXRlbShcbiAgICBlID09PSBcImFjY2Vzc1Rva2VuXCIgPyBpLmFjY2Vzc1Rva2VuIDogaS5pZFRva2VuXG4gICk7XG4gIHJldHVybiByIHx8IG51bGw7XG59LCBVZSA9IGFzeW5jIChlLCB0KSA9PiB7XG4gIGlmICh0Py5mb3JjZUFwaSkge1xuICAgIGNvbnN0IG8gPSAoYXdhaXQgUyh7XG4gICAgICB1cmw6IFwiYWNjb3VudF9hcGkvdjEvZmVhdHVyZV9mbGFnc1wiXG4gICAgfSkpLmZlYXR1cmVfZmxhZ3MuZmluZCgodSkgPT4gdS5uYW1lID09PSBlKTtcbiAgICByZXR1cm4gbyA/IG8udmFsdWUgOiBudWxsO1xuICB9XG4gIGNvbnN0IHIgPSBhd2FpdCBtKCk7XG4gIGlmICghcilcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgcyA9IHIuZmVhdHVyZV9mbGFncyB8fCByW1wieC1oYXN1cmEtZmVhdHVyZS1mbGFnc1wiXTtcbiAgcmV0dXJuIHMgPyBzW2VdPy52ID8/IG51bGwgOiBudWxsO1xufSwgYmUgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGUgPSBhd2FpdCBHKFwiaWRUb2tlblwiKTtcbiAgaWYgKCFlKVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCB7IHN1YjogdCB9ID0gZTtcbiAgcmV0dXJuIHQgPyB7XG4gICAgaWQ6IGUuc3ViLFxuICAgIGdpdmVuTmFtZTogZS5naXZlbl9uYW1lLFxuICAgIGZhbWlseU5hbWU6IGUuZmFtaWx5X25hbWUsXG4gICAgZW1haWw6IGUuZW1haWwsXG4gICAgcGljdHVyZTogZS5waWN0dXJlXG4gIH0gOiAoY29uc29sZS5lcnJvcihcIk5vIHN1YiBpbiBpZFRva2VuXCIpLCBudWxsKTtcbn0sIFJlID0gYXN5bmMgKGUsIHQpID0+IHtcbiAgaWYgKHQ/LmZvcmNlQXBpKVxuICAgIHJldHVybiBVKFxuICAgICAgYGFjY291bnRfYXBpL3YxL3Blcm1pc3Npb24vJHtlbmNvZGVVUklDb21wb25lbnQoZSl9YFxuICAgICk7XG4gIGNvbnN0IHIgPSBhd2FpdCBtKCk7XG4gIGlmICghcilcbiAgICByZXR1cm4ge1xuICAgICAgcGVybWlzc2lvbktleTogZSxcbiAgICAgIG9yZ0NvZGU6IG51bGwsXG4gICAgICBpc0dyYW50ZWQ6ICExXG4gICAgfTtcbiAgY29uc3QgcyA9IHIucGVybWlzc2lvbnMgfHwgW107XG4gIHJldHVybiB7XG4gICAgcGVybWlzc2lvbktleTogZSxcbiAgICBvcmdDb2RlOiByLm9yZ19jb2RlLFxuICAgIGlzR3JhbnRlZDogISFzLmluY2x1ZGVzKGUpXG4gIH07XG59LCB6ZSA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgZSA9IGF3YWl0IG0oXCJpZFRva2VuXCIpO1xuICByZXR1cm4gZSA/ICFlLm9yZ19jb2RlcyAmJiAhZVtcIngtaGFzdXJhLW9yZy1jb2Rlc1wiXSA/IChjb25zb2xlLndhcm4oXG4gICAgXCJPcmcgY29kZXMgbm90IGZvdW5kIGluIHRva2VuLCBlbnN1cmUgb3JnIGNvZGVzIGhhdmUgYmVlbiBpbmNsdWRlZCBpbiB0aGUgdG9rZW4gY3VzdG9taXNhdGlvbiB3aXRoaW4gdGhlIGFwcGxpY2F0aW9uIHNldHRpbmdzXCJcbiAgKSwgbnVsbCkgOiBlLm9yZ19jb2RlcyB8fCBlW1wieC1oYXN1cmEtb3JnLWNvZGVzXCJdIDogbnVsbDtcbn0sIEZlID0gYXN5bmMgKGUpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB0ID0gYXdhaXQgbShcImFjY2Vzc1Rva2VuXCIpO1xuICAgIGlmICghdCkgcmV0dXJuICExO1xuICAgIGlmICghdC5leHApXG4gICAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIlRva2VuIGRvZXMgbm90IGhhdmUgYW4gZXhwaXJ5XCIpLCAhMTtcbiAgICBjb25zdCByID0gdC5leHAgPCBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpO1xuICAgIHJldHVybiByICYmIGU/LnVzZVJlZnJlc2hUb2tlbiA/IChhd2FpdCB4KHtcbiAgICAgIGRvbWFpbjogZS5kb21haW4sXG4gICAgICBjbGllbnRJZDogZS5jbGllbnRJZFxuICAgIH0pKS5zdWNjZXNzIDogIXI7XG4gIH0gY2F0Y2ggKHQpIHtcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIkVycm9yIGNoZWNraW5nIGF1dGhlbnRpY2F0aW9uOlwiLCB0KSwgITE7XG4gIH1cbn0sIHggPSBhc3luYyAoe1xuICBkb21haW46IGUsXG4gIGNsaWVudElkOiB0LFxuICByZWZyZXNoVHlwZTogciA9IHcucmVmcmVzaFRva2VuLFxuICBvblJlZnJlc2g6IHNcbn0pID0+IHtcbiAgY29uc3QgbiA9ICh1KSA9PiAocyAmJiBzKHUpLCB1KTtcbiAgaWYgKCFlKVxuICAgIHJldHVybiBuKHtcbiAgICAgIHN1Y2Nlc3M6ICExLFxuICAgICAgZXJyb3I6IFwiRG9tYWluIGlzIHJlcXVpcmVkIGZvciB0b2tlbiByZWZyZXNoXCJcbiAgICB9KTtcbiAgaWYgKCF0KVxuICAgIHJldHVybiBuKHtcbiAgICAgIHN1Y2Nlc3M6ICExLFxuICAgICAgZXJyb3I6IFwiQ2xpZW50IElEIGlzIHJlcXVpcmVkIGZvciB0b2tlbiByZWZyZXNoXCJcbiAgICB9KTtcbiAgbGV0IGEgPSBcIlwiLCBvO1xuICBpZiAoYy51c2VJbnNlY3VyZUZvclJlZnJlc2hUb2tlbiB8fCAhJChlKSA/IG8gPSBDKCkgOiBvID0gXygpLCByID09PSB3LnJlZnJlc2hUb2tlbikge1xuICAgIGlmICghbylcbiAgICAgIHJldHVybiBuKHtcbiAgICAgICAgc3VjY2VzczogITEsXG4gICAgICAgIGVycm9yOiBcIk5vIGFjdGl2ZSBzdG9yYWdlIGZvdW5kXCJcbiAgICAgIH0pO1xuICAgIGlmIChhID0gYXdhaXQgby5nZXRTZXNzaW9uSXRlbShcbiAgICAgIGkucmVmcmVzaFRva2VuXG4gICAgKSwgIWEpXG4gICAgICByZXR1cm4gbih7XG4gICAgICAgIHN1Y2Nlc3M6ICExLFxuICAgICAgICBlcnJvcjogXCJObyByZWZyZXNoIHRva2VuIGZvdW5kXCJcbiAgICAgIH0pO1xuICB9XG4gIFIoKTtcbiAgdHJ5IHtcbiAgICBjb25zdCB1ID0gYXdhaXQgZmV0Y2goYCR7YihlKX0vb2F1dGgyL3Rva2VuYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIC4uLnIgPT09IHcuY29va2llICYmIHsgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiIH0sXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCJcbiAgICAgIH0sXG4gICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgLi4uciA9PT0gdy5yZWZyZXNoVG9rZW4gJiYge1xuICAgICAgICAgIHJlZnJlc2hfdG9rZW46IGFcbiAgICAgICAgfSxcbiAgICAgICAgZ3JhbnRfdHlwZTogXCJyZWZyZXNoX3Rva2VuXCIsXG4gICAgICAgIGNsaWVudF9pZDogdFxuICAgICAgfSkudG9TdHJpbmcoKVxuICAgIH0pO1xuICAgIGlmICghdS5vaylcbiAgICAgIHJldHVybiBuKHtcbiAgICAgICAgc3VjY2VzczogITEsXG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byByZWZyZXNoIHRva2VuXCJcbiAgICAgIH0pO1xuICAgIGNvbnN0IGwgPSBhd2FpdCB1Lmpzb24oKTtcbiAgICBpZiAobC5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgIGNvbnN0IGYgPSBfKCk7XG4gICAgICByZXR1cm4gZiA/IChxKGwuZXhwaXJlc19pbiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICB4KHsgZG9tYWluOiBlLCBjbGllbnRJZDogdCwgcmVmcmVzaFR5cGU6IHIsIG9uUmVmcmVzaDogcyB9KTtcbiAgICAgIH0pLCBvICYmIChhd2FpdCBmLnNldFNlc3Npb25JdGVtKFxuICAgICAgICBpLmFjY2Vzc1Rva2VuLFxuICAgICAgICBsLmFjY2Vzc190b2tlblxuICAgICAgKSwgbC5pZF90b2tlbiAmJiBhd2FpdCBmLnNldFNlc3Npb25JdGVtKGkuaWRUb2tlbiwgbC5pZF90b2tlbiksIGwucmVmcmVzaF90b2tlbiAmJiBhd2FpdCBvLnNldFNlc3Npb25JdGVtKFxuICAgICAgICBpLnJlZnJlc2hUb2tlbixcbiAgICAgICAgbC5yZWZyZXNoX3Rva2VuXG4gICAgICApKSwgbih7XG4gICAgICAgIHN1Y2Nlc3M6ICEwLFxuICAgICAgICBbaS5hY2Nlc3NUb2tlbl06IGwuYWNjZXNzX3Rva2VuLFxuICAgICAgICBbaS5pZFRva2VuXTogbC5pZF90b2tlbixcbiAgICAgICAgW2kucmVmcmVzaFRva2VuXTogbC5yZWZyZXNoX3Rva2VuXG4gICAgICB9KSkgOiBuKHtcbiAgICAgICAgc3VjY2VzczogITEsXG4gICAgICAgIGVycm9yOiBcIk5vIGFjdGl2ZSBzdG9yYWdlIGZvdW5kXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAodSkge1xuICAgIHJldHVybiBuKHtcbiAgICAgIHN1Y2Nlc3M6ICExLFxuICAgICAgZXJyb3I6IGBObyBhY2Nlc3MgdG9rZW4gcmVjZWl2ZWQ6ICR7dX1gXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG4oe1xuICAgIHN1Y2Nlc3M6ICExLFxuICAgIGVycm9yOiBcIk5vIGFjY2VzcyB0b2tlbiByZWNlaXZlZFwiXG4gIH0pO1xufSwgZyA9IHtcbiAgc2VjdXJlOiBudWxsLFxuICBpbnNlY3VyZTogbnVsbFxufSwgTGUgPSAoZSkgPT4ge1xuICBnLnNlY3VyZSA9IGU7XG59LCBfID0gKCkgPT4gZy5zZWN1cmUgfHwgbnVsbCwgTmUgPSAoKSA9PiBnLnNlY3VyZSAhPT0gbnVsbCwgRGUgPSAoKSA9PiB7XG4gIGcuc2VjdXJlID0gbnVsbDtcbn0sIFZlID0gKGUpID0+IHtcbiAgZy5pbnNlY3VyZSA9IGU7XG59LCBDID0gKCkgPT4gZy5pbnNlY3VyZSB8fCBnLnNlY3VyZSB8fCBudWxsLCBNZSA9ICgpID0+IGcuaW5zZWN1cmUgIT09IG51bGwsIGplID0gKCkgPT4ge1xuICBnLmluc2VjdXJlID0gbnVsbDtcbn0sIEJlID0gYXN5bmMgKGUpID0+IChjb25zb2xlLndhcm4oXG4gIFwiV2FybmluZzogZ2VuZXJhdGVQcm9maWxlVXJsIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgZ2VuZXJhdGVQb3J0YWxVcmwgaW5zdGVhZC5cIlxuKSwgX2Uoe1xuICBkb21haW46IGUuZG9tYWluLFxuICByZXR1cm5Vcmw6IGUucmV0dXJuVXJsLFxuICBzdWJOYXY6IGUuc3ViTmF2XG59KSk7XG5mdW5jdGlvbiB3ZShlLCB0ID0gW10pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByID0gbmV3IFVSTChlKTtcbiAgICByZXR1cm4gIXQuaW5jbHVkZXMoci5wcm90b2NvbCkgJiYgISFyLmhvc3Q7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiAhMTtcbiAgfVxufVxuY29uc3QgX2UgPSBhc3luYyAoe1xuICBkb21haW46IGUsXG4gIHJldHVyblVybDogdCxcbiAgc3ViTmF2OiByXG59KSA9PiB7XG4gIGNvbnN0IHMgPSBfKCk7XG4gIGlmICghcylcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJnZW5lcmF0ZVBvcnRhbFVybDogQWN0aXZlIHN0b3JhZ2Ugbm90IGZvdW5kXCIpO1xuICBjb25zdCBuID0gYXdhaXQgcy5nZXRTZXNzaW9uSXRlbShcbiAgICBpLmFjY2Vzc1Rva2VuXG4gICk7XG4gIGlmICghbilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJnZW5lcmF0ZVBvcnRhbFVybDogQWNjZXNzIFRva2VuIG5vdCBmb3VuZFwiKTtcbiAgaWYgKCFlIHx8IHR5cGVvZiBlICE9IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBsID0gYXdhaXQgTChcImlzc1wiKTtcbiAgICBpZiAoIWw/LnZhbHVlIHx8IHR5cGVvZiBsLnZhbHVlICE9IFwic3RyaW5nXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiZ2VuZXJhdGVQb3J0YWxVcmw6IFVuYWJsZSB0byBkZXRlcm1pbmUgZG9tYWluIGZyb20gYWNjZXNzIHRva2VuXCJcbiAgICAgICk7XG4gICAgZSA9IGwudmFsdWU7XG4gIH1cbiAgaWYgKCF3ZSh0LCBbXCJmdHA6XCIsIFwid3M6XCJdKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJnZW5lcmF0ZVBvcnRhbFVybDogcmV0dXJuVXJsIG11c3QgYmUgYW4gYWJzb2x1dGUgVVJMXCIpO1xuICBjb25zdCBhID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgc3VibmF2OiByIHx8IEIucHJvZmlsZSxcbiAgICByZXR1cm5fdXJsOiB0XG4gIH0pLCBvID0gYXdhaXQgZmV0Y2goXG4gICAgYCR7YihlKX0vYWNjb3VudF9hcGkvdjEvcG9ydGFsX2xpbms/JHthLnRvU3RyaW5nKCl9YCxcbiAgICB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtufWBcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIGlmICghby5vaylcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmFpbGVkIHRvIGZldGNoIHByb2ZpbGUgVVJMOiAke28uc3RhdHVzfSAke28uc3RhdHVzVGV4dH1gXG4gICAgKTtcbiAgY29uc3QgdSA9IGF3YWl0IG8uanNvbigpO1xuICBpZiAoIXUudXJsIHx8IHR5cGVvZiB1LnVybCAhPSBcInN0cmluZ1wiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgVVJMIHJlY2VpdmVkIGZyb20gQVBJXCIpO1xuICB0cnkge1xuICAgIHJldHVybiB7XG4gICAgICB1cmw6IG5ldyBVUkwodS51cmwpXG4gICAgfTtcbiAgfSBjYXRjaCAobCkge1xuICAgIHRocm93IGNvbnNvbGUuZXJyb3IobCksIG5ldyBFcnJvcihgSW52YWxpZCBVUkwgZm9ybWF0IHJlY2VpdmVkIGZyb20gQVBJOiAke3UudXJsfWApO1xuICB9XG59LCBxZSA9IHtcbiAgX19lc01vZHVsZTogITAsXG4gIGRlZmF1bHQ6IGFzeW5jICgpID0+IChhd2FpdCBpbXBvcnQoXG4gICAgLyogd2VicGFja0lnbm9yZTogdHJ1ZSAqL1xuICAgIFwiLi9leHBvU2VjdXJlU3RvcmUtRFQwR2YtU1AuanNcIlxuICApKS5FeHBvU2VjdXJlU3RvcmVcbn07XG5leHBvcnQge1xuICBRIGFzICQsXG4gIGhlIGFzIEEsXG4gIHNlIGFzIEIsXG4gIHplIGFzIEMsXG4gIGllIGFzIEQsXG4gIHFlIGFzIEUsXG4gIEZlIGFzIEYsXG4gIHggYXMgRyxcbiAgTGUgYXMgSCxcbiAgXyBhcyBJLFxuICBOZSBhcyBKLFxuICBEZSBhcyBLLFxuICBWZSBhcyBMLFxuICBDIGFzIE0sXG4gIE1lIGFzIE4sXG4gIGplIGFzIE8sXG4gIEllIGFzIFAsXG4gIGFlIGFzIFEsXG4gIGxlIGFzIFIsXG4gIEYgYXMgUyxcbiAgZGUgYXMgVCxcbiAgbWUgYXMgVSxcbiAgQ2UgYXMgVixcbiAgVGUgYXMgVyxcbiAgQWUgYXMgWCxcbiAgWiBhcyBZLFxuICBqIGFzIFosXG4gIEIgYXMgXyxcbiAgaSBhcyBhLFxuICBJIGFzIGEwLFxuICB3IGFzIGExLFxuICBjIGFzIGIsXG4gIFYgYXMgYyxcbiAgYiBhcyBkLFxuICBTZSBhcyBlLFxuICB2ZSBhcyBmLFxuICBFIGFzIGcsXG4gICRlIGFzIGgsXG4gIHhlIGFzIGksXG4gICQgYXMgaixcbiAgcSBhcyBrLFxuICBSIGFzIGwsXG4gIE8gYXMgbSxcbiAgeSBhcyBuLFxuICBCZSBhcyBvLFxuICBfZSBhcyBwLFxuICB0ZSBhcyBxLFxuICBMIGFzIHIsXG4gIHogYXMgcyxcbiAgRyBhcyB0LFxuICBFZSBhcyB1LFxuICBQZSBhcyB2LFxuICBtIGFzIHcsXG4gIFVlIGFzIHgsXG4gIGJlIGFzIHksXG4gIFJlIGFzIHpcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@kinde/js-utils/dist/main-D22foZsM.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@kinde/jwt-decoder/dist/jwt-decoder.js":
/*!*************************************************************!*\
  !*** ./node_modules/@kinde/jwt-decoder/dist/jwt-decoder.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TokenPart: () => (/* binding */ s),\n/* harmony export */   jwtDecoder: () => (/* binding */ c)\n/* harmony export */ });\nvar s = /* @__PURE__ */ ((e) => (e[e.header = 0] = \"header\", e[e.body = 1] = \"body\", e))(s || {});\nfunction c(e, t) {\n  if (!e)\n    return null;\n  const r = e.split(\".\");\n  if (r.length !== 3)\n    return null;\n  const n = r[\n    t ?? 1\n    /* body */\n  ].replace(/-/g, \"+\").replace(/_/g, \"/\"), o = decodeURIComponent(\n    atob(n).split(\"\").map((l) => \"%\" + (\"00\" + l.charCodeAt(0).toString(16)).slice(-2)).join(\"\")\n  );\n  return JSON.parse(o);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Aa2luZGUvand0LWRlY29kZXIvZGlzdC9qd3QtZGVjb2Rlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkZW50LWF0dGVuZGFuY2UtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGtpbmRlL2p3dC1kZWNvZGVyL2Rpc3Qvand0LWRlY29kZXIuanM/N2M1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcyA9IC8qIEBfX1BVUkVfXyAqLyAoKGUpID0+IChlW2UuaGVhZGVyID0gMF0gPSBcImhlYWRlclwiLCBlW2UuYm9keSA9IDFdID0gXCJib2R5XCIsIGUpKShzIHx8IHt9KTtcbmZ1bmN0aW9uIGMoZSwgdCkge1xuICBpZiAoIWUpXG4gICAgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHIgPSBlLnNwbGl0KFwiLlwiKTtcbiAgaWYgKHIubGVuZ3RoICE9PSAzKVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCBuID0gcltcbiAgICB0ID8/IDFcbiAgICAvKiBib2R5ICovXG4gIF0ucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIiksIG8gPSBkZWNvZGVVUklDb21wb25lbnQoXG4gICAgYXRvYihuKS5zcGxpdChcIlwiKS5tYXAoKGwpID0+IFwiJVwiICsgKFwiMDBcIiArIGwuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKSkuam9pbihcIlwiKVxuICApO1xuICByZXR1cm4gSlNPTi5wYXJzZShvKTtcbn1cbmV4cG9ydCB7XG4gIHMgYXMgVG9rZW5QYXJ0LFxuICBjIGFzIGp3dERlY29kZXJcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@kinde/jwt-decoder/dist/jwt-decoder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@kinde/jwt-decoder/dist/jwt-decoder.js":
/*!*************************************************************!*\
  !*** ./node_modules/@kinde/jwt-decoder/dist/jwt-decoder.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TokenPart: () => (/* binding */ s),\n/* harmony export */   jwtDecoder: () => (/* binding */ c)\n/* harmony export */ });\nvar s = /* @__PURE__ */ ((e) => (e[e.header = 0] = \"header\", e[e.body = 1] = \"body\", e))(s || {});\nfunction c(e, t) {\n  if (!e)\n    return null;\n  const r = e.split(\".\");\n  if (r.length !== 3)\n    return null;\n  const n = r[\n    t ?? 1\n    /* body */\n  ].replace(/-/g, \"+\").replace(/_/g, \"/\"), o = decodeURIComponent(\n    atob(n).split(\"\").map((l) => \"%\" + (\"00\" + l.charCodeAt(0).toString(16)).slice(-2)).join(\"\")\n  );\n  return JSON.parse(o);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtpbmRlL2p3dC1kZWNvZGVyL2Rpc3Qvand0LWRlY29kZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxnR0FBZ0c7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGVudC1hdHRlbmRhbmNlLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BraW5kZS9qd3QtZGVjb2Rlci9kaXN0L2p3dC1kZWNvZGVyLmpzPzMzYmMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHMgPSAvKiBAX19QVVJFX18gKi8gKChlKSA9PiAoZVtlLmhlYWRlciA9IDBdID0gXCJoZWFkZXJcIiwgZVtlLmJvZHkgPSAxXSA9IFwiYm9keVwiLCBlKSkocyB8fCB7fSk7XG5mdW5jdGlvbiBjKGUsIHQpIHtcbiAgaWYgKCFlKVxuICAgIHJldHVybiBudWxsO1xuICBjb25zdCByID0gZS5zcGxpdChcIi5cIik7XG4gIGlmIChyLmxlbmd0aCAhPT0gMylcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgbiA9IHJbXG4gICAgdCA/PyAxXG4gICAgLyogYm9keSAqL1xuICBdLnJlcGxhY2UoLy0vZywgXCIrXCIpLnJlcGxhY2UoL18vZywgXCIvXCIpLCBvID0gZGVjb2RlVVJJQ29tcG9uZW50KFxuICAgIGF0b2Iobikuc3BsaXQoXCJcIikubWFwKChsKSA9PiBcIiVcIiArIChcIjAwXCIgKyBsLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikpLmpvaW4oXCJcIilcbiAgKTtcbiAgcmV0dXJuIEpTT04ucGFyc2Uobyk7XG59XG5leHBvcnQge1xuICBzIGFzIFRva2VuUGFydCxcbiAgYyBhcyBqd3REZWNvZGVyXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@kinde/jwt-decoder/dist/jwt-decoder.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@kinde/jwt-validator/dist/jsrsasign-B2gZIJhY.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@kinde/jwt-validator/dist/jsrsasign-B2gZIJhY.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   j: () => (/* binding */ An)\n/* harmony export */ });\nvar Ue = {};\nUe.userAgent = !1;\nvar Ve = {};\n/*! CryptoJS v3.1.2 core-fix.js\n * code.google.com/p/crypto-js\n * (c) 2009-2013 by Jeff Mott. All rights reserved.\n * code.google.com/p/crypto-js/wiki/License\n * THIS IS FIX of 'core.js' to fix Hmac issue.\n * https://code.google.com/p/crypto-js/issues/detail?id=84\n * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js\n */\nvar K = K || function(e, t) {\n  var r = {}, i = r.lib = {}, s = i.Base = /* @__PURE__ */ function() {\n    function o() {\n    }\n    return { extend: function(l) {\n      o.prototype = this;\n      var f = new o();\n      return l && f.mixIn(l), f.hasOwnProperty(\"init\") || (f.init = function() {\n        f.$super.init.apply(this, arguments);\n      }), f.init.prototype = f, f.$super = this, f;\n    }, create: function() {\n      var l = this.extend();\n      return l.init.apply(l, arguments), l;\n    }, init: function() {\n    }, mixIn: function(l) {\n      for (var f in l)\n        l.hasOwnProperty(f) && (this[f] = l[f]);\n      l.hasOwnProperty(\"toString\") && (this.toString = l.toString);\n    }, clone: function() {\n      return this.init.prototype.extend(this);\n    } };\n  }(), n = i.WordArray = s.extend({ init: function(o, l) {\n    o = this.words = o || [], l != t ? this.sigBytes = l : this.sigBytes = o.length * 4;\n  }, toString: function(o) {\n    return (o || u).stringify(this);\n  }, concat: function(o) {\n    var l = this.words, f = o.words, d = this.sigBytes, g = o.sigBytes;\n    if (this.clamp(), d % 4)\n      for (var S = 0; S < g; S++) {\n        var b = f[S >>> 2] >>> 24 - S % 4 * 8 & 255;\n        l[d + S >>> 2] |= b << 24 - (d + S) % 4 * 8;\n      }\n    else\n      for (var S = 0; S < g; S += 4)\n        l[d + S >>> 2] = f[S >>> 2];\n    return this.sigBytes += g, this;\n  }, clamp: function() {\n    var o = this.words, l = this.sigBytes;\n    o[l >>> 2] &= 4294967295 << 32 - l % 4 * 8, o.length = e.ceil(l / 4);\n  }, clone: function() {\n    var o = s.clone.call(this);\n    return o.words = this.words.slice(0), o;\n  }, random: function(o) {\n    for (var l = [], f = 0; f < o; f += 4)\n      l.push(e.random() * 4294967296 | 0);\n    return new n.init(l, o);\n  } }), h = r.enc = {}, u = h.Hex = { stringify: function(o) {\n    for (var l = o.words, f = o.sigBytes, d = [], g = 0; g < f; g++) {\n      var S = l[g >>> 2] >>> 24 - g % 4 * 8 & 255;\n      d.push((S >>> 4).toString(16)), d.push((S & 15).toString(16));\n    }\n    return d.join(\"\");\n  }, parse: function(o) {\n    for (var l = o.length, f = [], d = 0; d < l; d += 2)\n      f[d >>> 3] |= parseInt(o.substr(d, 2), 16) << 24 - d % 8 * 4;\n    return new n.init(f, l / 2);\n  } }, p = h.Latin1 = { stringify: function(o) {\n    for (var l = o.words, f = o.sigBytes, d = [], g = 0; g < f; g++) {\n      var S = l[g >>> 2] >>> 24 - g % 4 * 8 & 255;\n      d.push(String.fromCharCode(S));\n    }\n    return d.join(\"\");\n  }, parse: function(o) {\n    for (var l = o.length, f = [], d = 0; d < l; d++)\n      f[d >>> 2] |= (o.charCodeAt(d) & 255) << 24 - d % 4 * 8;\n    return new n.init(f, l);\n  } }, c = h.Utf8 = { stringify: function(o) {\n    try {\n      return decodeURIComponent(escape(p.stringify(o)));\n    } catch {\n      throw new Error(\"Malformed UTF-8 data\");\n    }\n  }, parse: function(o) {\n    return p.parse(unescape(encodeURIComponent(o)));\n  } }, y = i.BufferedBlockAlgorithm = s.extend({ reset: function() {\n    this._data = new n.init(), this._nDataBytes = 0;\n  }, _append: function(o) {\n    typeof o == \"string\" && (o = c.parse(o)), this._data.concat(o), this._nDataBytes += o.sigBytes;\n  }, _process: function(o) {\n    var l = this._data, f = l.words, d = l.sigBytes, g = this.blockSize, S = g * 4, b = d / S;\n    o ? b = e.ceil(b) : b = e.max((b | 0) - this._minBufferSize, 0);\n    var D = b * g, A = e.min(D * 4, d);\n    if (D) {\n      for (var I = 0; I < D; I += g)\n        this._doProcessBlock(f, I);\n      var m = f.splice(0, D);\n      l.sigBytes -= A;\n    }\n    return new n.init(m, A);\n  }, clone: function() {\n    var o = s.clone.call(this);\n    return o._data = this._data.clone(), o;\n  }, _minBufferSize: 0 });\n  i.Hasher = y.extend({ cfg: s.extend(), init: function(o) {\n    this.cfg = this.cfg.extend(o), this.reset();\n  }, reset: function() {\n    y.reset.call(this), this._doReset();\n  }, update: function(o) {\n    return this._append(o), this._process(), this;\n  }, finalize: function(o) {\n    o && this._append(o);\n    var l = this._doFinalize();\n    return l;\n  }, blockSize: 512 / 32, _createHelper: function(o) {\n    return function(l, f) {\n      return new o.init(f).finalize(l);\n    };\n  }, _createHmacHelper: function(o) {\n    return function(l, f) {\n      return new v.HMAC.init(o, f).finalize(l);\n    };\n  } });\n  var v = r.algo = {};\n  return r;\n}(Math);\n(function(e) {\n  var s = K, t = s.lib, r = t.Base, i = t.WordArray, s = s.x64 = {};\n  s.Word = r.extend({ init: function(n, h) {\n    this.high = n, this.low = h;\n  } }), s.WordArray = r.extend({ init: function(n, h) {\n    n = this.words = n || [], this.sigBytes = h != e ? h : 8 * n.length;\n  }, toX32: function() {\n    for (var n = this.words, h = n.length, u = [], p = 0; p < h; p++) {\n      var c = n[p];\n      u.push(c.high), u.push(c.low);\n    }\n    return i.create(u, this.sigBytes);\n  }, clone: function() {\n    for (var n = r.clone.call(this), h = n.words = this.words.slice(0), u = h.length, p = 0; p < u; p++) h[p] = h[p].clone();\n    return n;\n  } });\n})();\nK.lib.Cipher || function(e) {\n  var l = K, t = l.lib, r = t.Base, i = t.WordArray, s = t.BufferedBlockAlgorithm, n = l.enc.Base64, h = l.algo.EvpKDF, u = t.Cipher = s.extend({ cfg: r.extend(), createEncryptor: function(d, g) {\n    return this.create(this._ENC_XFORM_MODE, d, g);\n  }, createDecryptor: function(d, g) {\n    return this.create(this._DEC_XFORM_MODE, d, g);\n  }, init: function(d, g, S) {\n    this.cfg = this.cfg.extend(S), this._xformMode = d, this._key = g, this.reset();\n  }, reset: function() {\n    s.reset.call(this), this._doReset();\n  }, process: function(d) {\n    return this._append(d), this._process();\n  }, finalize: function(d) {\n    return d && this._append(d), this._doFinalize();\n  }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function(d) {\n    return { encrypt: function(g, S, b) {\n      return (typeof S == \"string\" ? f : o).encrypt(d, g, S, b);\n    }, decrypt: function(g, S, b) {\n      return (typeof S == \"string\" ? f : o).decrypt(d, g, S, b);\n    } };\n  } });\n  t.StreamCipher = u.extend({ _doFinalize: function() {\n    return this._process(!0);\n  }, blockSize: 1 });\n  var v = l.mode = {}, p = function(d, g, S) {\n    var b = this._iv;\n    b ? this._iv = e : b = this._prevBlock;\n    for (var D = 0; D < S; D++) d[g + D] ^= b[D];\n  }, c = (t.BlockCipherMode = r.extend({ createEncryptor: function(d, g) {\n    return this.Encryptor.create(d, g);\n  }, createDecryptor: function(d, g) {\n    return this.Decryptor.create(d, g);\n  }, init: function(d, g) {\n    this._cipher = d, this._iv = g;\n  } })).extend();\n  c.Encryptor = c.extend({ processBlock: function(d, g) {\n    var S = this._cipher, b = S.blockSize;\n    p.call(this, d, g, b), S.encryptBlock(d, g), this._prevBlock = d.slice(g, g + b);\n  } }), c.Decryptor = c.extend({ processBlock: function(d, g) {\n    var S = this._cipher, b = S.blockSize, D = d.slice(g, g + b);\n    S.decryptBlock(\n      d,\n      g\n    ), p.call(this, d, g, b), this._prevBlock = D;\n  } }), v = v.CBC = c, c = (l.pad = {}).Pkcs7 = { pad: function(d, g) {\n    for (var S = 4 * g, S = S - d.sigBytes % S, b = S << 24 | S << 16 | S << 8 | S, D = [], A = 0; A < S; A += 4) D.push(b);\n    S = i.create(D, S), d.concat(S);\n  }, unpad: function(d) {\n    d.sigBytes -= d.words[d.sigBytes - 1 >>> 2] & 255;\n  } }, t.BlockCipher = u.extend({ cfg: u.cfg.extend({ mode: v, padding: c }), reset: function() {\n    u.reset.call(this);\n    var g = this.cfg, d = g.iv, g = g.mode;\n    if (this._xformMode == this._ENC_XFORM_MODE) var S = g.createEncryptor;\n    else S = g.createDecryptor, this._minBufferSize = 1;\n    this._mode = S.call(g, this, d && d.words);\n  }, _doProcessBlock: function(d, g) {\n    this._mode.processBlock(d, g);\n  }, _doFinalize: function() {\n    var d = this.cfg.padding;\n    if (this._xformMode == this._ENC_XFORM_MODE) {\n      d.pad(this._data, this.blockSize);\n      var g = this._process(!0);\n    } else g = this._process(!0), d.unpad(g);\n    return g;\n  }, blockSize: 4 });\n  var y = t.CipherParams = r.extend({ init: function(d) {\n    this.mixIn(d);\n  }, toString: function(d) {\n    return (d || this.formatter).stringify(this);\n  } }), v = (l.format = {}).OpenSSL = { stringify: function(d) {\n    var g = d.ciphertext;\n    return d = d.salt, (d ? i.create([1398893684, 1701076831]).concat(d).concat(g) : g).toString(n);\n  }, parse: function(d) {\n    d = n.parse(d);\n    var g = d.words;\n    if (g[0] == 1398893684 && g[1] == 1701076831) {\n      var S = i.create(g.slice(2, 4));\n      g.splice(0, 4), d.sigBytes -= 16;\n    }\n    return y.create({ ciphertext: d, salt: S });\n  } }, o = t.SerializableCipher = r.extend({ cfg: r.extend({ format: v }), encrypt: function(d, g, S, b) {\n    b = this.cfg.extend(b);\n    var D = d.createEncryptor(S, b);\n    return g = D.finalize(g), D = D.cfg, y.create({\n      ciphertext: g,\n      key: S,\n      iv: D.iv,\n      algorithm: d,\n      mode: D.mode,\n      padding: D.padding,\n      blockSize: d.blockSize,\n      formatter: b.format\n    });\n  }, decrypt: function(d, g, S, b) {\n    return b = this.cfg.extend(b), g = this._parse(g, b.format), d.createDecryptor(S, b).finalize(g.ciphertext);\n  }, _parse: function(d, g) {\n    return typeof d == \"string\" ? g.parse(d, this) : d;\n  } }), l = (l.kdf = {}).OpenSSL = { execute: function(d, g, S, b) {\n    return b || (b = i.random(8)), d = h.create({ keySize: g + S }).compute(d, b), S = i.create(d.words.slice(g), 4 * S), d.sigBytes = 4 * g, y.create({ key: d, iv: S, salt: b });\n  } }, f = t.PasswordBasedCipher = o.extend({ cfg: o.cfg.extend({ kdf: l }), encrypt: function(d, g, S, b) {\n    return b = this.cfg.extend(b), S = b.kdf.execute(S, d.keySize, d.ivSize), b.iv = S.iv, d = o.encrypt.call(this, d, g, S.key, b), d.mixIn(S), d;\n  }, decrypt: function(d, g, S, b) {\n    return b = this.cfg.extend(b), g = this._parse(g, b.format), S = b.kdf.execute(S, d.keySize, d.ivSize, g.salt), b.iv = S.iv, o.decrypt.call(this, d, g, S.key, b);\n  } });\n}();\n(function() {\n  for (var e = K, t = e.lib.BlockCipher, m = e.algo, r = [], i = [], s = [], n = [], h = [], u = [], p = [], c = [], y = [], v = [], o = [], l = 0; 256 > l; l++) o[l] = 128 > l ? l << 1 : l << 1 ^ 283;\n  for (var f = 0, d = 0, l = 0; 256 > l; l++) {\n    var g = d ^ d << 1 ^ d << 2 ^ d << 3 ^ d << 4, g = g >>> 8 ^ g & 255 ^ 99;\n    r[f] = g, i[g] = f;\n    var S = o[f], b = o[S], D = o[b], A = 257 * o[g] ^ 16843008 * g;\n    s[f] = A << 24 | A >>> 8, n[f] = A << 16 | A >>> 16, h[f] = A << 8 | A >>> 24, u[f] = A, A = 16843009 * D ^ 65537 * b ^ 257 * S ^ 16843008 * f, p[g] = A << 24 | A >>> 8, c[g] = A << 16 | A >>> 16, y[g] = A << 8 | A >>> 24, v[g] = A, f ? (f = S ^ o[o[o[D ^ S]]], d ^= o[o[d]]) : f = d = 1;\n  }\n  var I = [\n    0,\n    1,\n    2,\n    4,\n    8,\n    16,\n    32,\n    64,\n    128,\n    27,\n    54\n  ], m = m.AES = t.extend({ _doReset: function() {\n    for (var x = this._key, E = x.words, w = x.sigBytes / 4, x = 4 * ((this._nRounds = w + 6) + 1), F = this._keySchedule = [], P = 0; P < x; P++) if (P < w) F[P] = E[P];\n    else {\n      var T = F[P - 1];\n      P % w ? 6 < w && P % w == 4 && (T = r[T >>> 24] << 24 | r[T >>> 16 & 255] << 16 | r[T >>> 8 & 255] << 8 | r[T & 255]) : (T = T << 8 | T >>> 24, T = r[T >>> 24] << 24 | r[T >>> 16 & 255] << 16 | r[T >>> 8 & 255] << 8 | r[T & 255], T ^= I[P / w | 0] << 24), F[P] = F[P - w] ^ T;\n    }\n    for (E = this._invKeySchedule = [], w = 0; w < x; w++) P = x - w, T = w % 4 ? F[P] : F[P - 4], E[w] = 4 > w || 4 >= P ? T : p[r[T >>> 24]] ^ c[r[T >>> 16 & 255]] ^ y[r[T >>> 8 & 255]] ^ v[r[T & 255]];\n  }, encryptBlock: function(E, w) {\n    this._doCryptBlock(E, w, this._keySchedule, s, n, h, u, r);\n  }, decryptBlock: function(E, w) {\n    var x = E[w + 1];\n    E[w + 1] = E[w + 3], E[w + 3] = x, this._doCryptBlock(E, w, this._invKeySchedule, p, c, y, v, i), x = E[w + 1], E[w + 1] = E[w + 3], E[w + 3] = x;\n  }, _doCryptBlock: function(E, w, x, F, P, T, H, C) {\n    for (var B = this._nRounds, ne = E[w] ^ x[0], he = E[w + 1] ^ x[1], se = E[w + 2] ^ x[2], re = E[w + 3] ^ x[3], O = 4, j = 1; j < B; j++) var fe = F[ne >>> 24] ^ P[he >>> 16 & 255] ^ T[se >>> 8 & 255] ^ H[re & 255] ^ x[O++], Z = F[he >>> 24] ^ P[se >>> 16 & 255] ^ T[re >>> 8 & 255] ^ H[ne & 255] ^ x[O++], X = F[se >>> 24] ^ P[re >>> 16 & 255] ^ T[ne >>> 8 & 255] ^ H[he & 255] ^ x[O++], re = F[re >>> 24] ^ P[ne >>> 16 & 255] ^ T[he >>> 8 & 255] ^ H[se & 255] ^ x[O++], ne = fe, he = Z, se = X;\n    fe = (C[ne >>> 24] << 24 | C[he >>> 16 & 255] << 16 | C[se >>> 8 & 255] << 8 | C[re & 255]) ^ x[O++], Z = (C[he >>> 24] << 24 | C[se >>> 16 & 255] << 16 | C[re >>> 8 & 255] << 8 | C[ne & 255]) ^ x[O++], X = (C[se >>> 24] << 24 | C[re >>> 16 & 255] << 16 | C[ne >>> 8 & 255] << 8 | C[he & 255]) ^ x[O++], re = (C[re >>> 24] << 24 | C[ne >>> 16 & 255] << 16 | C[he >>> 8 & 255] << 8 | C[se & 255]) ^ x[O++], E[w] = fe, E[w + 1] = Z, E[w + 2] = X, E[w + 3] = re;\n  }, keySize: 8 });\n  e.AES = t._createHelper(m);\n})();\n(function() {\n  function e(o, l) {\n    var f = (this._lBlock >>> o ^ this._rBlock) & l;\n    this._rBlock ^= f, this._lBlock ^= f << o;\n  }\n  function t(o, l) {\n    var f = (this._rBlock >>> o ^ this._lBlock) & l;\n    this._lBlock ^= f, this._rBlock ^= f << o;\n  }\n  var r = K, s = r.lib, i = s.WordArray, s = s.BlockCipher, n = r.algo, h = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4], u = [\n    14,\n    17,\n    11,\n    24,\n    1,\n    5,\n    3,\n    28,\n    15,\n    6,\n    21,\n    10,\n    23,\n    19,\n    12,\n    4,\n    26,\n    8,\n    16,\n    7,\n    27,\n    20,\n    13,\n    2,\n    41,\n    52,\n    31,\n    37,\n    47,\n    55,\n    30,\n    40,\n    51,\n    45,\n    33,\n    48,\n    44,\n    49,\n    39,\n    56,\n    34,\n    53,\n    46,\n    42,\n    50,\n    36,\n    29,\n    32\n  ], p = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28], c = [{\n    0: 8421888,\n    268435456: 32768,\n    536870912: 8421378,\n    805306368: 2,\n    1073741824: 512,\n    1342177280: 8421890,\n    1610612736: 8389122,\n    1879048192: 8388608,\n    2147483648: 514,\n    2415919104: 8389120,\n    2684354560: 33280,\n    2952790016: 8421376,\n    3221225472: 32770,\n    3489660928: 8388610,\n    3758096384: 0,\n    4026531840: 33282,\n    134217728: 0,\n    402653184: 8421890,\n    671088640: 33282,\n    939524096: 32768,\n    1207959552: 8421888,\n    1476395008: 512,\n    1744830464: 8421378,\n    2013265920: 2,\n    2281701376: 8389120,\n    2550136832: 33280,\n    2818572288: 8421376,\n    3087007744: 8389122,\n    3355443200: 8388610,\n    3623878656: 32770,\n    3892314112: 514,\n    4160749568: 8388608,\n    1: 32768,\n    268435457: 2,\n    536870913: 8421888,\n    805306369: 8388608,\n    1073741825: 8421378,\n    1342177281: 33280,\n    1610612737: 512,\n    1879048193: 8389122,\n    2147483649: 8421890,\n    2415919105: 8421376,\n    2684354561: 8388610,\n    2952790017: 33282,\n    3221225473: 514,\n    3489660929: 8389120,\n    3758096385: 32770,\n    4026531841: 0,\n    134217729: 8421890,\n    402653185: 8421376,\n    671088641: 8388608,\n    939524097: 512,\n    1207959553: 32768,\n    1476395009: 8388610,\n    1744830465: 2,\n    2013265921: 33282,\n    2281701377: 32770,\n    2550136833: 8389122,\n    2818572289: 514,\n    3087007745: 8421888,\n    3355443201: 8389120,\n    3623878657: 0,\n    3892314113: 33280,\n    4160749569: 8421378\n  }, {\n    0: 1074282512,\n    16777216: 16384,\n    33554432: 524288,\n    50331648: 1074266128,\n    67108864: 1073741840,\n    83886080: 1074282496,\n    100663296: 1073758208,\n    117440512: 16,\n    134217728: 540672,\n    150994944: 1073758224,\n    167772160: 1073741824,\n    184549376: 540688,\n    201326592: 524304,\n    218103808: 0,\n    234881024: 16400,\n    251658240: 1074266112,\n    8388608: 1073758208,\n    25165824: 540688,\n    41943040: 16,\n    58720256: 1073758224,\n    75497472: 1074282512,\n    92274688: 1073741824,\n    109051904: 524288,\n    125829120: 1074266128,\n    142606336: 524304,\n    159383552: 0,\n    176160768: 16384,\n    192937984: 1074266112,\n    209715200: 1073741840,\n    226492416: 540672,\n    243269632: 1074282496,\n    260046848: 16400,\n    268435456: 0,\n    285212672: 1074266128,\n    301989888: 1073758224,\n    318767104: 1074282496,\n    335544320: 1074266112,\n    352321536: 16,\n    369098752: 540688,\n    385875968: 16384,\n    402653184: 16400,\n    419430400: 524288,\n    436207616: 524304,\n    452984832: 1073741840,\n    469762048: 540672,\n    486539264: 1073758208,\n    503316480: 1073741824,\n    520093696: 1074282512,\n    276824064: 540688,\n    293601280: 524288,\n    310378496: 1074266112,\n    327155712: 16384,\n    343932928: 1073758208,\n    360710144: 1074282512,\n    377487360: 16,\n    394264576: 1073741824,\n    411041792: 1074282496,\n    427819008: 1073741840,\n    444596224: 1073758224,\n    461373440: 524304,\n    478150656: 0,\n    494927872: 16400,\n    511705088: 1074266128,\n    528482304: 540672\n  }, {\n    0: 260,\n    1048576: 0,\n    2097152: 67109120,\n    3145728: 65796,\n    4194304: 65540,\n    5242880: 67108868,\n    6291456: 67174660,\n    7340032: 67174400,\n    8388608: 67108864,\n    9437184: 67174656,\n    10485760: 65792,\n    11534336: 67174404,\n    12582912: 67109124,\n    13631488: 65536,\n    14680064: 4,\n    15728640: 256,\n    524288: 67174656,\n    1572864: 67174404,\n    2621440: 0,\n    3670016: 67109120,\n    4718592: 67108868,\n    5767168: 65536,\n    6815744: 65540,\n    7864320: 260,\n    8912896: 4,\n    9961472: 256,\n    11010048: 67174400,\n    12058624: 65796,\n    13107200: 65792,\n    14155776: 67109124,\n    15204352: 67174660,\n    16252928: 67108864,\n    16777216: 67174656,\n    17825792: 65540,\n    18874368: 65536,\n    19922944: 67109120,\n    20971520: 256,\n    22020096: 67174660,\n    23068672: 67108868,\n    24117248: 0,\n    25165824: 67109124,\n    26214400: 67108864,\n    27262976: 4,\n    28311552: 65792,\n    29360128: 67174400,\n    30408704: 260,\n    31457280: 65796,\n    32505856: 67174404,\n    17301504: 67108864,\n    18350080: 260,\n    19398656: 67174656,\n    20447232: 0,\n    21495808: 65540,\n    22544384: 67109120,\n    23592960: 256,\n    24641536: 67174404,\n    25690112: 65536,\n    26738688: 67174660,\n    27787264: 65796,\n    28835840: 67108868,\n    29884416: 67109124,\n    30932992: 67174400,\n    31981568: 4,\n    33030144: 65792\n  }, {\n    0: 2151682048,\n    65536: 2147487808,\n    131072: 4198464,\n    196608: 2151677952,\n    262144: 0,\n    327680: 4198400,\n    393216: 2147483712,\n    458752: 4194368,\n    524288: 2147483648,\n    589824: 4194304,\n    655360: 64,\n    720896: 2147487744,\n    786432: 2151678016,\n    851968: 4160,\n    917504: 4096,\n    983040: 2151682112,\n    32768: 2147487808,\n    98304: 64,\n    163840: 2151678016,\n    229376: 2147487744,\n    294912: 4198400,\n    360448: 2151682112,\n    425984: 0,\n    491520: 2151677952,\n    557056: 4096,\n    622592: 2151682048,\n    688128: 4194304,\n    753664: 4160,\n    819200: 2147483648,\n    884736: 4194368,\n    950272: 4198464,\n    1015808: 2147483712,\n    1048576: 4194368,\n    1114112: 4198400,\n    1179648: 2147483712,\n    1245184: 0,\n    1310720: 4160,\n    1376256: 2151678016,\n    1441792: 2151682048,\n    1507328: 2147487808,\n    1572864: 2151682112,\n    1638400: 2147483648,\n    1703936: 2151677952,\n    1769472: 4198464,\n    1835008: 2147487744,\n    1900544: 4194304,\n    1966080: 64,\n    2031616: 4096,\n    1081344: 2151677952,\n    1146880: 2151682112,\n    1212416: 0,\n    1277952: 4198400,\n    1343488: 4194368,\n    1409024: 2147483648,\n    1474560: 2147487808,\n    1540096: 64,\n    1605632: 2147483712,\n    1671168: 4096,\n    1736704: 2147487744,\n    1802240: 2151678016,\n    1867776: 4160,\n    1933312: 2151682048,\n    1998848: 4194304,\n    2064384: 4198464\n  }, {\n    0: 128,\n    4096: 17039360,\n    8192: 262144,\n    12288: 536870912,\n    16384: 537133184,\n    20480: 16777344,\n    24576: 553648256,\n    28672: 262272,\n    32768: 16777216,\n    36864: 537133056,\n    40960: 536871040,\n    45056: 553910400,\n    49152: 553910272,\n    53248: 0,\n    57344: 17039488,\n    61440: 553648128,\n    2048: 17039488,\n    6144: 553648256,\n    10240: 128,\n    14336: 17039360,\n    18432: 262144,\n    22528: 537133184,\n    26624: 553910272,\n    30720: 536870912,\n    34816: 537133056,\n    38912: 0,\n    43008: 553910400,\n    47104: 16777344,\n    51200: 536871040,\n    55296: 553648128,\n    59392: 16777216,\n    63488: 262272,\n    65536: 262144,\n    69632: 128,\n    73728: 536870912,\n    77824: 553648256,\n    81920: 16777344,\n    86016: 553910272,\n    90112: 537133184,\n    94208: 16777216,\n    98304: 553910400,\n    102400: 553648128,\n    106496: 17039360,\n    110592: 537133056,\n    114688: 262272,\n    118784: 536871040,\n    122880: 0,\n    126976: 17039488,\n    67584: 553648256,\n    71680: 16777216,\n    75776: 17039360,\n    79872: 537133184,\n    83968: 536870912,\n    88064: 17039488,\n    92160: 128,\n    96256: 553910272,\n    100352: 262272,\n    104448: 553910400,\n    108544: 0,\n    112640: 553648128,\n    116736: 16777344,\n    120832: 262144,\n    124928: 537133056,\n    129024: 536871040\n  }, {\n    0: 268435464,\n    256: 8192,\n    512: 270532608,\n    768: 270540808,\n    1024: 268443648,\n    1280: 2097152,\n    1536: 2097160,\n    1792: 268435456,\n    2048: 0,\n    2304: 268443656,\n    2560: 2105344,\n    2816: 8,\n    3072: 270532616,\n    3328: 2105352,\n    3584: 8200,\n    3840: 270540800,\n    128: 270532608,\n    384: 270540808,\n    640: 8,\n    896: 2097152,\n    1152: 2105352,\n    1408: 268435464,\n    1664: 268443648,\n    1920: 8200,\n    2176: 2097160,\n    2432: 8192,\n    2688: 268443656,\n    2944: 270532616,\n    3200: 0,\n    3456: 270540800,\n    3712: 2105344,\n    3968: 268435456,\n    4096: 268443648,\n    4352: 270532616,\n    4608: 270540808,\n    4864: 8200,\n    5120: 2097152,\n    5376: 268435456,\n    5632: 268435464,\n    5888: 2105344,\n    6144: 2105352,\n    6400: 0,\n    6656: 8,\n    6912: 270532608,\n    7168: 8192,\n    7424: 268443656,\n    7680: 270540800,\n    7936: 2097160,\n    4224: 8,\n    4480: 2105344,\n    4736: 2097152,\n    4992: 268435464,\n    5248: 268443648,\n    5504: 8200,\n    5760: 270540808,\n    6016: 270532608,\n    6272: 270540800,\n    6528: 270532616,\n    6784: 8192,\n    7040: 2105352,\n    7296: 2097160,\n    7552: 0,\n    7808: 268435456,\n    8064: 268443656\n  }, {\n    0: 1048576,\n    16: 33555457,\n    32: 1024,\n    48: 1049601,\n    64: 34604033,\n    80: 0,\n    96: 1,\n    112: 34603009,\n    128: 33555456,\n    144: 1048577,\n    160: 33554433,\n    176: 34604032,\n    192: 34603008,\n    208: 1025,\n    224: 1049600,\n    240: 33554432,\n    8: 34603009,\n    24: 0,\n    40: 33555457,\n    56: 34604032,\n    72: 1048576,\n    88: 33554433,\n    104: 33554432,\n    120: 1025,\n    136: 1049601,\n    152: 33555456,\n    168: 34603008,\n    184: 1048577,\n    200: 1024,\n    216: 34604033,\n    232: 1,\n    248: 1049600,\n    256: 33554432,\n    272: 1048576,\n    288: 33555457,\n    304: 34603009,\n    320: 1048577,\n    336: 33555456,\n    352: 34604032,\n    368: 1049601,\n    384: 1025,\n    400: 34604033,\n    416: 1049600,\n    432: 1,\n    448: 0,\n    464: 34603008,\n    480: 33554433,\n    496: 1024,\n    264: 1049600,\n    280: 33555457,\n    296: 34603009,\n    312: 1,\n    328: 33554432,\n    344: 1048576,\n    360: 1025,\n    376: 34604032,\n    392: 33554433,\n    408: 34603008,\n    424: 0,\n    440: 34604033,\n    456: 1049601,\n    472: 1024,\n    488: 33555456,\n    504: 1048577\n  }, {\n    0: 134219808,\n    1: 131072,\n    2: 134217728,\n    3: 32,\n    4: 131104,\n    5: 134350880,\n    6: 134350848,\n    7: 2048,\n    8: 134348800,\n    9: 134219776,\n    10: 133120,\n    11: 134348832,\n    12: 2080,\n    13: 0,\n    14: 134217760,\n    15: 133152,\n    2147483648: 2048,\n    2147483649: 134350880,\n    2147483650: 134219808,\n    2147483651: 134217728,\n    2147483652: 134348800,\n    2147483653: 133120,\n    2147483654: 133152,\n    2147483655: 32,\n    2147483656: 134217760,\n    2147483657: 2080,\n    2147483658: 131104,\n    2147483659: 134350848,\n    2147483660: 0,\n    2147483661: 134348832,\n    2147483662: 134219776,\n    2147483663: 131072,\n    16: 133152,\n    17: 134350848,\n    18: 32,\n    19: 2048,\n    20: 134219776,\n    21: 134217760,\n    22: 134348832,\n    23: 131072,\n    24: 0,\n    25: 131104,\n    26: 134348800,\n    27: 134219808,\n    28: 134350880,\n    29: 133120,\n    30: 2080,\n    31: 134217728,\n    2147483664: 131072,\n    2147483665: 2048,\n    2147483666: 134348832,\n    2147483667: 133152,\n    2147483668: 32,\n    2147483669: 134348800,\n    2147483670: 134217728,\n    2147483671: 134219808,\n    2147483672: 134350880,\n    2147483673: 134217760,\n    2147483674: 134219776,\n    2147483675: 0,\n    2147483676: 133120,\n    2147483677: 2080,\n    2147483678: 131104,\n    2147483679: 134350848\n  }], y = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679], v = n.DES = s.extend({ _doReset: function() {\n    for (var o = this._key.words, l = [], f = 0; 56 > f; f++) {\n      var d = h[f] - 1;\n      l[f] = o[d >>> 5] >>> 31 - d % 32 & 1;\n    }\n    for (o = this._subKeys = [], d = 0; 16 > d; d++) {\n      for (var g = o[d] = [], S = p[d], f = 0; 24 > f; f++) g[f / 6 | 0] |= l[(u[f] - 1 + S) % 28] << 31 - f % 6, g[4 + (f / 6 | 0)] |= l[28 + (u[f + 24] - 1 + S) % 28] << 31 - f % 6;\n      for (g[0] = g[0] << 1 | g[0] >>> 31, f = 1; 7 > f; f++) g[f] >>>= 4 * (f - 1) + 3;\n      g[7] = g[7] << 5 | g[7] >>> 27;\n    }\n    for (l = this._invSubKeys = [], f = 0; 16 > f; f++) l[f] = o[15 - f];\n  }, encryptBlock: function(o, l) {\n    this._doCryptBlock(o, l, this._subKeys);\n  }, decryptBlock: function(o, l) {\n    this._doCryptBlock(o, l, this._invSubKeys);\n  }, _doCryptBlock: function(o, l, f) {\n    this._lBlock = o[l], this._rBlock = o[l + 1], e.call(this, 4, 252645135), e.call(this, 16, 65535), t.call(this, 2, 858993459), t.call(this, 8, 16711935), e.call(this, 1, 1431655765);\n    for (var d = 0; 16 > d; d++) {\n      for (var g = f[d], S = this._lBlock, b = this._rBlock, D = 0, A = 0; 8 > A; A++) D |= c[A][((b ^ g[A]) & y[A]) >>> 0];\n      this._lBlock = b, this._rBlock = S ^ D;\n    }\n    f = this._lBlock, this._lBlock = this._rBlock, this._rBlock = f, e.call(this, 1, 1431655765), t.call(this, 8, 16711935), t.call(this, 2, 858993459), e.call(this, 16, 65535), e.call(this, 4, 252645135), o[l] = this._lBlock, o[l + 1] = this._rBlock;\n  }, keySize: 2, ivSize: 2, blockSize: 2 });\n  r.DES = s._createHelper(v), n = n.TripleDES = s.extend({ _doReset: function() {\n    var o = this._key.words;\n    this._des1 = v.createEncryptor(i.create(o.slice(0, 2))), this._des2 = v.createEncryptor(i.create(o.slice(2, 4))), this._des3 = v.createEncryptor(i.create(o.slice(4, 6)));\n  }, encryptBlock: function(o, l) {\n    this._des1.encryptBlock(o, l), this._des2.decryptBlock(o, l), this._des3.encryptBlock(o, l);\n  }, decryptBlock: function(o, l) {\n    this._des3.decryptBlock(o, l), this._des2.encryptBlock(o, l), this._des1.decryptBlock(o, l);\n  }, keySize: 6, ivSize: 2, blockSize: 2 }), r.TripleDES = s._createHelper(n);\n})();\n(function() {\n  var e = K, t = e.lib.WordArray;\n  e.enc.Base64 = { stringify: function(r) {\n    var i = r.words, s = r.sigBytes, n = this._map;\n    r.clamp(), r = [];\n    for (var h = 0; h < s; h += 3) for (var u = (i[h >>> 2] >>> 24 - 8 * (h % 4) & 255) << 16 | (i[h + 1 >>> 2] >>> 24 - 8 * ((h + 1) % 4) & 255) << 8 | i[h + 2 >>> 2] >>> 24 - 8 * ((h + 2) % 4) & 255, p = 0; 4 > p && h + 0.75 * p < s; p++) r.push(n.charAt(u >>> 6 * (3 - p) & 63));\n    if (i = n.charAt(64)) for (; r.length % 4; ) r.push(i);\n    return r.join(\"\");\n  }, parse: function(r) {\n    var i = r.length, s = this._map, n = s.charAt(64);\n    n && (n = r.indexOf(n), n != -1 && (i = n));\n    for (var n = [], h = 0, u = 0; u < i; u++) if (u % 4) {\n      var p = s.indexOf(r.charAt(u - 1)) << 2 * (u % 4), c = s.indexOf(r.charAt(u)) >>> 6 - 2 * (u % 4);\n      n[h >>> 2] |= (p | c) << 24 - 8 * (h % 4), h++;\n    }\n    return t.create(n, h);\n  }, _map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\" };\n})();\n(function(e) {\n  function t(v, o, l, f, d, g, S) {\n    return v = v + (o & l | ~o & f) + d + S, (v << g | v >>> 32 - g) + o;\n  }\n  function r(v, o, l, f, d, g, S) {\n    return v = v + (o & f | l & ~f) + d + S, (v << g | v >>> 32 - g) + o;\n  }\n  function i(v, o, l, f, d, g, S) {\n    return v = v + (o ^ l ^ f) + d + S, (v << g | v >>> 32 - g) + o;\n  }\n  function s(v, o, l, f, d, g, S) {\n    return v = v + (l ^ (o | ~f)) + d + S, (v << g | v >>> 32 - g) + o;\n  }\n  for (var n = K, p = n.lib, h = p.WordArray, u = p.Hasher, p = n.algo, c = [], y = 0; 64 > y; y++) c[y] = 4294967296 * e.abs(e.sin(y + 1)) | 0;\n  p = p.MD5 = u.extend({\n    _doReset: function() {\n      this._hash = new h.init([1732584193, 4023233417, 2562383102, 271733878]);\n    },\n    _doProcessBlock: function(v, o) {\n      for (var l = 0; 16 > l; l++) {\n        var f = o + l, d = v[f];\n        v[f] = (d << 8 | d >>> 24) & 16711935 | (d << 24 | d >>> 8) & 4278255360;\n      }\n      var l = this._hash.words, f = v[o + 0], d = v[o + 1], g = v[o + 2], S = v[o + 3], b = v[o + 4], D = v[o + 5], A = v[o + 6], I = v[o + 7], m = v[o + 8], E = v[o + 9], w = v[o + 10], x = v[o + 11], F = v[o + 12], P = v[o + 13], T = v[o + 14], H = v[o + 15], C = l[0], j = l[1], O = l[2], B = l[3], C = t(C, j, O, B, f, 7, c[0]), B = t(B, C, j, O, d, 12, c[1]), O = t(O, B, C, j, g, 17, c[2]), j = t(j, O, B, C, S, 22, c[3]), C = t(C, j, O, B, b, 7, c[4]), B = t(B, C, j, O, D, 12, c[5]), O = t(O, B, C, j, A, 17, c[6]), j = t(j, O, B, C, I, 22, c[7]), C = t(C, j, O, B, m, 7, c[8]), B = t(B, C, j, O, E, 12, c[9]), O = t(O, B, C, j, w, 17, c[10]), j = t(j, O, B, C, x, 22, c[11]), C = t(C, j, O, B, F, 7, c[12]), B = t(B, C, j, O, P, 12, c[13]), O = t(O, B, C, j, T, 17, c[14]), j = t(j, O, B, C, H, 22, c[15]), C = r(C, j, O, B, d, 5, c[16]), B = r(B, C, j, O, A, 9, c[17]), O = r(O, B, C, j, x, 14, c[18]), j = r(j, O, B, C, f, 20, c[19]), C = r(C, j, O, B, D, 5, c[20]), B = r(B, C, j, O, w, 9, c[21]), O = r(O, B, C, j, H, 14, c[22]), j = r(j, O, B, C, b, 20, c[23]), C = r(C, j, O, B, E, 5, c[24]), B = r(B, C, j, O, T, 9, c[25]), O = r(O, B, C, j, S, 14, c[26]), j = r(j, O, B, C, m, 20, c[27]), C = r(C, j, O, B, P, 5, c[28]), B = r(\n        B,\n        C,\n        j,\n        O,\n        g,\n        9,\n        c[29]\n      ), O = r(O, B, C, j, I, 14, c[30]), j = r(j, O, B, C, F, 20, c[31]), C = i(C, j, O, B, D, 4, c[32]), B = i(B, C, j, O, m, 11, c[33]), O = i(O, B, C, j, x, 16, c[34]), j = i(j, O, B, C, T, 23, c[35]), C = i(C, j, O, B, d, 4, c[36]), B = i(B, C, j, O, b, 11, c[37]), O = i(O, B, C, j, I, 16, c[38]), j = i(j, O, B, C, w, 23, c[39]), C = i(C, j, O, B, P, 4, c[40]), B = i(B, C, j, O, f, 11, c[41]), O = i(O, B, C, j, S, 16, c[42]), j = i(j, O, B, C, A, 23, c[43]), C = i(C, j, O, B, E, 4, c[44]), B = i(B, C, j, O, F, 11, c[45]), O = i(O, B, C, j, H, 16, c[46]), j = i(j, O, B, C, g, 23, c[47]), C = s(C, j, O, B, f, 6, c[48]), B = s(B, C, j, O, I, 10, c[49]), O = s(\n        O,\n        B,\n        C,\n        j,\n        T,\n        15,\n        c[50]\n      ), j = s(j, O, B, C, D, 21, c[51]), C = s(C, j, O, B, F, 6, c[52]), B = s(B, C, j, O, S, 10, c[53]), O = s(O, B, C, j, w, 15, c[54]), j = s(j, O, B, C, d, 21, c[55]), C = s(C, j, O, B, m, 6, c[56]), B = s(B, C, j, O, H, 10, c[57]), O = s(O, B, C, j, A, 15, c[58]), j = s(j, O, B, C, P, 21, c[59]), C = s(C, j, O, B, b, 6, c[60]), B = s(B, C, j, O, x, 10, c[61]), O = s(O, B, C, j, g, 15, c[62]), j = s(j, O, B, C, E, 21, c[63]);\n      l[0] = l[0] + C | 0, l[1] = l[1] + j | 0, l[2] = l[2] + O | 0, l[3] = l[3] + B | 0;\n    },\n    _doFinalize: function() {\n      var v = this._data, o = v.words, l = 8 * this._nDataBytes, f = 8 * v.sigBytes;\n      o[f >>> 5] |= 128 << 24 - f % 32;\n      var d = e.floor(l / 4294967296);\n      for (o[(f + 64 >>> 9 << 4) + 15] = (d << 8 | d >>> 24) & 16711935 | (d << 24 | d >>> 8) & 4278255360, o[(f + 64 >>> 9 << 4) + 14] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360, v.sigBytes = 4 * (o.length + 1), this._process(), v = this._hash, o = v.words, l = 0; 4 > l; l++) f = o[l], o[l] = (f << 8 | f >>> 24) & 16711935 | (f << 24 | f >>> 8) & 4278255360;\n      return v;\n    },\n    clone: function() {\n      var v = u.clone.call(this);\n      return v._hash = this._hash.clone(), v;\n    }\n  }), n.MD5 = u._createHelper(p), n.HmacMD5 = u._createHmacHelper(p);\n})(Math);\n(function() {\n  var e = K, s = e.lib, t = s.WordArray, r = s.Hasher, i = [], s = e.algo.SHA1 = r.extend({ _doReset: function() {\n    this._hash = new t.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);\n  }, _doProcessBlock: function(n, h) {\n    for (var u = this._hash.words, p = u[0], c = u[1], y = u[2], v = u[3], o = u[4], l = 0; 80 > l; l++) {\n      if (16 > l) i[l] = n[h + l] | 0;\n      else {\n        var f = i[l - 3] ^ i[l - 8] ^ i[l - 14] ^ i[l - 16];\n        i[l] = f << 1 | f >>> 31;\n      }\n      f = (p << 5 | p >>> 27) + o + i[l], f = 20 > l ? f + ((c & y | ~c & v) + 1518500249) : 40 > l ? f + ((c ^ y ^ v) + 1859775393) : 60 > l ? f + ((c & y | c & v | y & v) - 1894007588) : f + ((c ^ y ^ v) - 899497514), o = v, v = y, y = c << 30 | c >>> 2, c = p, p = f;\n    }\n    u[0] = u[0] + p | 0, u[1] = u[1] + c | 0, u[2] = u[2] + y | 0, u[3] = u[3] + v | 0, u[4] = u[4] + o | 0;\n  }, _doFinalize: function() {\n    var n = this._data, h = n.words, u = 8 * this._nDataBytes, p = 8 * n.sigBytes;\n    return h[p >>> 5] |= 128 << 24 - p % 32, h[(p + 64 >>> 9 << 4) + 14] = Math.floor(u / 4294967296), h[(p + 64 >>> 9 << 4) + 15] = u, n.sigBytes = 4 * h.length, this._process(), this._hash;\n  }, clone: function() {\n    var n = r.clone.call(this);\n    return n._hash = this._hash.clone(), n;\n  } });\n  e.SHA1 = r._createHelper(s), e.HmacSHA1 = r._createHmacHelper(s);\n})();\n(function(e) {\n  for (var t = K, l = t.lib, r = l.WordArray, i = l.Hasher, l = t.algo, s = [], n = [], h = function(d) {\n    return 4294967296 * (d - (d | 0)) | 0;\n  }, u = 2, p = 0; 64 > p; ) {\n    var c;\n    e: {\n      c = u;\n      for (var y = e.sqrt(c), v = 2; v <= y; v++) if (!(c % v)) {\n        c = !1;\n        break e;\n      }\n      c = !0;\n    }\n    c && (8 > p && (s[p] = h(e.pow(u, 0.5))), n[p] = h(e.pow(u, 1 / 3)), p++), u++;\n  }\n  var o = [], l = l.SHA256 = i.extend({ _doReset: function() {\n    this._hash = new r.init(s.slice(0));\n  }, _doProcessBlock: function(f, d) {\n    for (var g = this._hash.words, S = g[0], b = g[1], D = g[2], A = g[3], I = g[4], m = g[5], E = g[6], w = g[7], x = 0; 64 > x; x++) {\n      if (16 > x) o[x] = f[d + x] | 0;\n      else {\n        var F = o[x - 15], P = o[x - 2];\n        o[x] = ((F << 25 | F >>> 7) ^ (F << 14 | F >>> 18) ^ F >>> 3) + o[x - 7] + ((P << 15 | P >>> 17) ^ (P << 13 | P >>> 19) ^ P >>> 10) + o[x - 16];\n      }\n      F = w + ((I << 26 | I >>> 6) ^ (I << 21 | I >>> 11) ^ (I << 7 | I >>> 25)) + (I & m ^ ~I & E) + n[x] + o[x], P = ((S << 30 | S >>> 2) ^ (S << 19 | S >>> 13) ^ (S << 10 | S >>> 22)) + (S & b ^ S & D ^ b & D), w = E, E = m, m = I, I = A + F | 0, A = D, D = b, b = S, S = F + P | 0;\n    }\n    g[0] = g[0] + S | 0, g[1] = g[1] + b | 0, g[2] = g[2] + D | 0, g[3] = g[3] + A | 0, g[4] = g[4] + I | 0, g[5] = g[5] + m | 0, g[6] = g[6] + E | 0, g[7] = g[7] + w | 0;\n  }, _doFinalize: function() {\n    var f = this._data, d = f.words, g = 8 * this._nDataBytes, S = 8 * f.sigBytes;\n    return d[S >>> 5] |= 128 << 24 - S % 32, d[(S + 64 >>> 9 << 4) + 14] = e.floor(g / 4294967296), d[(S + 64 >>> 9 << 4) + 15] = g, f.sigBytes = 4 * d.length, this._process(), this._hash;\n  }, clone: function() {\n    var f = i.clone.call(this);\n    return f._hash = this._hash.clone(), f;\n  } });\n  t.SHA256 = i._createHelper(l), t.HmacSHA256 = i._createHmacHelper(l);\n})(Math);\n(function() {\n  var e = K, t = e.lib.WordArray, i = e.algo, r = i.SHA256, i = i.SHA224 = r.extend({ _doReset: function() {\n    this._hash = new t.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428]);\n  }, _doFinalize: function() {\n    var s = r._doFinalize.call(this);\n    return s.sigBytes -= 4, s;\n  } });\n  e.SHA224 = r._createHelper(i), e.HmacSHA224 = r._createHmacHelper(i);\n})();\n(function() {\n  function e() {\n    return i.create.apply(i, arguments);\n  }\n  for (var t = K, r = t.lib.Hasher, n = t.x64, i = n.Word, s = n.WordArray, n = t.algo, h = [\n    e(1116352408, 3609767458),\n    e(1899447441, 602891725),\n    e(3049323471, 3964484399),\n    e(3921009573, 2173295548),\n    e(961987163, 4081628472),\n    e(1508970993, 3053834265),\n    e(2453635748, 2937671579),\n    e(2870763221, 3664609560),\n    e(3624381080, 2734883394),\n    e(310598401, 1164996542),\n    e(607225278, 1323610764),\n    e(1426881987, 3590304994),\n    e(1925078388, 4068182383),\n    e(2162078206, 991336113),\n    e(2614888103, 633803317),\n    e(3248222580, 3479774868),\n    e(3835390401, 2666613458),\n    e(4022224774, 944711139),\n    e(264347078, 2341262773),\n    e(604807628, 2007800933),\n    e(770255983, 1495990901),\n    e(1249150122, 1856431235),\n    e(1555081692, 3175218132),\n    e(1996064986, 2198950837),\n    e(2554220882, 3999719339),\n    e(2821834349, 766784016),\n    e(2952996808, 2566594879),\n    e(3210313671, 3203337956),\n    e(3336571891, 1034457026),\n    e(3584528711, 2466948901),\n    e(113926993, 3758326383),\n    e(338241895, 168717936),\n    e(666307205, 1188179964),\n    e(773529912, 1546045734),\n    e(1294757372, 1522805485),\n    e(\n      1396182291,\n      2643833823\n    ),\n    e(1695183700, 2343527390),\n    e(1986661051, 1014477480),\n    e(2177026350, 1206759142),\n    e(2456956037, 344077627),\n    e(2730485921, 1290863460),\n    e(2820302411, 3158454273),\n    e(3259730800, 3505952657),\n    e(3345764771, 106217008),\n    e(3516065817, 3606008344),\n    e(3600352804, 1432725776),\n    e(4094571909, 1467031594),\n    e(275423344, 851169720),\n    e(430227734, 3100823752),\n    e(506948616, 1363258195),\n    e(659060556, 3750685593),\n    e(883997877, 3785050280),\n    e(958139571, 3318307427),\n    e(1322822218, 3812723403),\n    e(1537002063, 2003034995),\n    e(1747873779, 3602036899),\n    e(1955562222, 1575990012),\n    e(2024104815, 1125592928),\n    e(2227730452, 2716904306),\n    e(2361852424, 442776044),\n    e(2428436474, 593698344),\n    e(2756734187, 3733110249),\n    e(3204031479, 2999351573),\n    e(3329325298, 3815920427),\n    e(3391569614, 3928383900),\n    e(3515267271, 566280711),\n    e(3940187606, 3454069534),\n    e(4118630271, 4000239992),\n    e(116418474, 1914138554),\n    e(174292421, 2731055270),\n    e(289380356, 3203993006),\n    e(460393269, 320620315),\n    e(685471733, 587496836),\n    e(852142971, 1086792851),\n    e(1017036298, 365543100),\n    e(1126000580, 2618297676),\n    e(\n      1288033470,\n      3409855158\n    ),\n    e(1501505948, 4234509866),\n    e(1607167915, 987167468),\n    e(1816402316, 1246189591)\n  ], u = [], p = 0; 80 > p; p++) u[p] = e();\n  n = n.SHA512 = r.extend({ _doReset: function() {\n    this._hash = new s.init([new i.init(1779033703, 4089235720), new i.init(3144134277, 2227873595), new i.init(1013904242, 4271175723), new i.init(2773480762, 1595750129), new i.init(1359893119, 2917565137), new i.init(2600822924, 725511199), new i.init(528734635, 4215389547), new i.init(1541459225, 327033209)]);\n  }, _doProcessBlock: function(c, y) {\n    for (var b = this._hash.words, v = b[0], o = b[1], l = b[2], f = b[3], d = b[4], g = b[5], S = b[6], b = b[7], D = v.high, A = v.low, I = o.high, m = o.low, E = l.high, w = l.low, x = f.high, F = f.low, P = d.high, T = d.low, H = g.high, C = g.low, B = S.high, O = S.low, j = b.high, fe = b.low, Z = D, X = A, re = I, ne = m, he = E, se = w, ke = x, ce = F, M = P, G = T, Q = H, ee = C, pe = B, te = O, Me = j, Ne = fe, xe = 0; 80 > xe; xe++) {\n      var Ce = u[xe];\n      if (16 > xe) var ye = Ce.high = c[y + 2 * xe] | 0, U = Ce.low = c[y + 2 * xe + 1] | 0;\n      else {\n        var ye = u[xe - 15], U = ye.high, Fe = ye.low, ye = (U >>> 1 | Fe << 31) ^ (U >>> 8 | Fe << 24) ^ U >>> 7, Fe = (Fe >>> 1 | U << 31) ^ (Fe >>> 8 | U << 24) ^ (Fe >>> 7 | U << 25), He = u[xe - 2], U = He.high, $ = He.low, He = (U >>> 19 | $ << 13) ^ (U << 3 | $ >>> 29) ^ U >>> 6, $ = ($ >>> 19 | U << 13) ^ ($ << 3 | U >>> 29) ^ ($ >>> 6 | U << 26), U = u[xe - 7], Qe = U.high, Ie = u[xe - 16], be = Ie.high, Ie = Ie.low, U = Fe + U.low, ye = ye + Qe + (U >>> 0 < Fe >>> 0 ? 1 : 0), U = U + $, ye = ye + He + (U >>> 0 < $ >>> 0 ? 1 : 0), U = U + Ie, ye = ye + be + (U >>> 0 < Ie >>> 0 ? 1 : 0);\n        Ce.high = ye, Ce.low = U;\n      }\n      var Qe = M & Q ^ ~M & pe, Ie = G & ee ^ ~G & te, Ce = Z & re ^ Z & he ^ re & he, Kt = X & ne ^ X & se ^ ne & se, Fe = (Z >>> 28 | X << 4) ^ (Z << 30 | X >>> 2) ^ (Z << 25 | X >>> 7), He = (X >>> 28 | Z << 4) ^ (X << 30 | Z >>> 2) ^ (X << 25 | Z >>> 7), $ = h[xe], Lt = $.high, ct = $.low, $ = Ne + ((G >>> 14 | M << 18) ^ (G >>> 18 | M << 14) ^ (G << 23 | M >>> 9)), be = Me + ((M >>> 14 | G << 18) ^ (M >>> 18 | G << 14) ^ (M << 23 | G >>> 9)) + ($ >>> 0 < Ne >>> 0 ? 1 : 0), $ = $ + Ie, be = be + Qe + ($ >>> 0 < Ie >>> 0 ? 1 : 0), $ = $ + ct, be = be + Lt + ($ >>> 0 < ct >>> 0 ? 1 : 0), $ = $ + U, be = be + ye + ($ >>> 0 < U >>> 0 ? 1 : 0), U = He + Kt, Ce = Fe + Ce + (U >>> 0 < He >>> 0 ? 1 : 0), Me = pe, Ne = te, pe = Q, te = ee, Q = M, ee = G, G = ce + $ | 0, M = ke + be + (G >>> 0 < ce >>> 0 ? 1 : 0) | 0, ke = he, ce = se, he = re, se = ne, re = Z, ne = X, X = $ + U | 0, Z = be + Ce + (X >>> 0 < $ >>> 0 ? 1 : 0) | 0;\n    }\n    A = v.low = A + X, v.high = D + Z + (A >>> 0 < X >>> 0 ? 1 : 0), m = o.low = m + ne, o.high = I + re + (m >>> 0 < ne >>> 0 ? 1 : 0), w = l.low = w + se, l.high = E + he + (w >>> 0 < se >>> 0 ? 1 : 0), F = f.low = F + ce, f.high = x + ke + (F >>> 0 < ce >>> 0 ? 1 : 0), T = d.low = T + G, d.high = P + M + (T >>> 0 < G >>> 0 ? 1 : 0), C = g.low = C + ee, g.high = H + Q + (C >>> 0 < ee >>> 0 ? 1 : 0), O = S.low = O + te, S.high = B + pe + (O >>> 0 < te >>> 0 ? 1 : 0), fe = b.low = fe + Ne, b.high = j + Me + (fe >>> 0 < Ne >>> 0 ? 1 : 0);\n  }, _doFinalize: function() {\n    var c = this._data, y = c.words, v = 8 * this._nDataBytes, o = 8 * c.sigBytes;\n    return y[o >>> 5] |= 128 << 24 - o % 32, y[(o + 128 >>> 10 << 5) + 30] = Math.floor(v / 4294967296), y[(o + 128 >>> 10 << 5) + 31] = v, c.sigBytes = 4 * y.length, this._process(), this._hash.toX32();\n  }, clone: function() {\n    var c = r.clone.call(this);\n    return c._hash = this._hash.clone(), c;\n  }, blockSize: 32 }), t.SHA512 = r._createHelper(n), t.HmacSHA512 = r._createHmacHelper(n);\n})();\n(function() {\n  var e = K, s = e.x64, t = s.Word, r = s.WordArray, s = e.algo, i = s.SHA512, s = s.SHA384 = i.extend({ _doReset: function() {\n    this._hash = new r.init([new t.init(3418070365, 3238371032), new t.init(1654270250, 914150663), new t.init(2438529370, 812702999), new t.init(355462360, 4144912697), new t.init(1731405415, 4290775857), new t.init(2394180231, 1750603025), new t.init(3675008525, 1694076839), new t.init(1203062813, 3204075428)]);\n  }, _doFinalize: function() {\n    var n = i._doFinalize.call(this);\n    return n.sigBytes -= 16, n;\n  } });\n  e.SHA384 = i._createHelper(s), e.HmacSHA384 = i._createHmacHelper(s);\n})();\n(function() {\n  var e = K, c = e.lib, t = c.WordArray, r = c.Hasher, c = e.algo, i = t.create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]), s = t.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]), n = t.create([\n    11,\n    14,\n    15,\n    12,\n    5,\n    8,\n    7,\n    9,\n    11,\n    13,\n    14,\n    15,\n    6,\n    7,\n    9,\n    8,\n    7,\n    6,\n    8,\n    13,\n    11,\n    9,\n    7,\n    15,\n    7,\n    12,\n    15,\n    9,\n    11,\n    7,\n    13,\n    12,\n    11,\n    13,\n    6,\n    7,\n    14,\n    9,\n    13,\n    15,\n    14,\n    8,\n    13,\n    6,\n    5,\n    12,\n    7,\n    5,\n    11,\n    12,\n    14,\n    15,\n    14,\n    15,\n    9,\n    8,\n    9,\n    14,\n    5,\n    6,\n    8,\n    6,\n    5,\n    12,\n    9,\n    15,\n    5,\n    11,\n    6,\n    8,\n    13,\n    12,\n    5,\n    12,\n    13,\n    14,\n    11,\n    8,\n    5,\n    6\n  ]), h = t.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]), u = t.create([0, 1518500249, 1859775393, 2400959708, 2840853838]), p = t.create([\n    1352829926,\n    1548603684,\n    1836072691,\n    2053994217,\n    0\n  ]), c = c.RIPEMD160 = r.extend({ _doReset: function() {\n    this._hash = t.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);\n  }, _doProcessBlock: function(y, v) {\n    for (var o = 0; 16 > o; o++) {\n      var l = v + o, f = y[l];\n      y[l] = (f << 8 | f >>> 24) & 16711935 | (f << 24 | f >>> 8) & 4278255360;\n    }\n    var l = this._hash.words, f = u.words, d = p.words, g = i.words, S = s.words, b = n.words, D = h.words, A, I, m, E, w, x, F, P, T, H;\n    x = A = l[0], F = I = l[1], P = m = l[2], T = E = l[3], H = w = l[4];\n    for (var C, o = 0; 80 > o; o += 1) C = A + y[v + g[o]] | 0, C = 16 > o ? C + ((I ^ m ^ E) + f[0]) : 32 > o ? C + ((I & m | ~I & E) + f[1]) : 48 > o ? C + (((I | ~m) ^ E) + f[2]) : 64 > o ? C + ((I & E | m & ~E) + f[3]) : C + ((I ^ (m | ~E)) + f[4]), C |= 0, C = C << b[o] | C >>> 32 - b[o], C = C + w | 0, A = w, w = E, E = m << 10 | m >>> 22, m = I, I = C, C = x + y[v + S[o]] | 0, C = 16 > o ? C + ((F ^ (P | ~T)) + d[0]) : 32 > o ? C + ((F & T | P & ~T) + d[1]) : 48 > o ? C + (((F | ~P) ^ T) + d[2]) : 64 > o ? C + ((F & P | ~F & T) + d[3]) : C + ((F ^ P ^ T) + d[4]), C |= 0, C = C << D[o] | C >>> 32 - D[o], C = C + H | 0, x = H, H = T, T = P << 10 | P >>> 22, P = F, F = C;\n    C = l[1] + m + T | 0, l[1] = l[2] + E + H | 0, l[2] = l[3] + w + x | 0, l[3] = l[4] + A + F | 0, l[4] = l[0] + I + P | 0, l[0] = C;\n  }, _doFinalize: function() {\n    var y = this._data, v = y.words, o = 8 * this._nDataBytes, l = 8 * y.sigBytes;\n    for (v[l >>> 5] |= 128 << 24 - l % 32, v[(l + 64 >>> 9 << 4) + 14] = (o << 8 | o >>> 24) & 16711935 | (o << 24 | o >>> 8) & 4278255360, y.sigBytes = 4 * (v.length + 1), this._process(), y = this._hash, v = y.words, o = 0; 5 > o; o++) l = v[o], v[o] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;\n    return y;\n  }, clone: function() {\n    var y = r.clone.call(this);\n    return y._hash = this._hash.clone(), y;\n  } });\n  e.RIPEMD160 = r._createHelper(c), e.HmacRIPEMD160 = r._createHmacHelper(c);\n})();\n(function() {\n  var e = K, t = e.enc.Utf8;\n  e.algo.HMAC = e.lib.Base.extend({ init: function(r, i) {\n    r = this._hasher = new r.init(), typeof i == \"string\" && (i = t.parse(i));\n    var s = r.blockSize, n = 4 * s;\n    i.sigBytes > n && (i = r.finalize(i)), i.clamp();\n    for (var h = this._oKey = i.clone(), u = this._iKey = i.clone(), p = h.words, c = u.words, y = 0; y < s; y++) p[y] ^= 1549556828, c[y] ^= 909522486;\n    h.sigBytes = u.sigBytes = n, this.reset();\n  }, reset: function() {\n    var r = this._hasher;\n    r.reset(), r.update(this._iKey);\n  }, update: function(r) {\n    return this._hasher.update(r), this;\n  }, finalize: function(r) {\n    var i = this._hasher;\n    return r = i.finalize(r), i.reset(), i.finalize(this._oKey.clone().concat(r));\n  } });\n})();\n(function() {\n  var e = K, i = e.lib, t = i.Base, r = i.WordArray, i = e.algo, s = i.HMAC, n = i.PBKDF2 = t.extend({ cfg: t.extend({ keySize: 4, hasher: i.SHA1, iterations: 1 }), init: function(h) {\n    this.cfg = this.cfg.extend(h);\n  }, compute: function(h, u) {\n    for (var f = this.cfg, p = s.create(f.hasher, h), c = r.create(), y = r.create([1]), v = c.words, o = y.words, l = f.keySize, f = f.iterations; v.length < l; ) {\n      var d = p.update(u).finalize(y);\n      p.reset();\n      for (var g = d.words, S = g.length, b = d, D = 1; D < f; D++) {\n        b = p.finalize(b), p.reset();\n        for (var A = b.words, I = 0; I < S; I++) g[I] ^= A[I];\n      }\n      c.concat(d), o[0]++;\n    }\n    return c.sigBytes = 4 * l, c;\n  } });\n  e.PBKDF2 = function(h, u, p) {\n    return n.create(p).compute(h, u);\n  };\n})();\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nvar Ke = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\", Et = \"=\";\nfunction _e(e) {\n  var t, r, i = \"\";\n  for (t = 0; t + 3 <= e.length; t += 3)\n    r = parseInt(e.substring(t, t + 3), 16), i += Ke.charAt(r >> 6) + Ke.charAt(r & 63);\n  for (t + 1 == e.length ? (r = parseInt(e.substring(t, t + 1), 16), i += Ke.charAt(r << 2)) : t + 2 == e.length && (r = parseInt(e.substring(t, t + 2), 16), i += Ke.charAt(r >> 2) + Ke.charAt((r & 3) << 4)); (i.length & 3) > 0; )\n    i += Et;\n  return i;\n}\nfunction it(e) {\n  var t = \"\", r, i = 0, s, n;\n  for (r = 0; r < e.length && e.charAt(r) != Et; ++r)\n    n = Ke.indexOf(e.charAt(r)), !(n < 0) && (i == 0 ? (t += De(n >> 2), s = n & 3, i = 1) : i == 1 ? (t += De(s << 2 | n >> 4), s = n & 15, i = 2) : i == 2 ? (t += De(s), t += De(n >> 2), s = n & 3, i = 3) : (t += De(s << 2 | n >> 4), t += De(n & 15), i = 0));\n  return i == 1 && (t += De(s << 2)), t;\n}\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n*/\nvar Te;\nfunction R(e, t, r) {\n  e != null && (typeof e == \"number\" ? this.fromNumber(e, t, r) : t == null && typeof e != \"string\" ? this.fromString(e, 256) : this.fromString(e, t));\n}\nfunction _() {\n  return new R(null);\n}\nfunction qt(e, t, r, i, s, n) {\n  for (; --n >= 0; ) {\n    var h = t * this[e++] + r[i] + s;\n    s = Math.floor(h / 67108864), r[i++] = h & 67108863;\n  }\n  return s;\n}\nfunction kt(e, t, r, i, s, n) {\n  for (var h = t & 32767, u = t >> 15; --n >= 0; ) {\n    var p = this[e] & 32767, c = this[e++] >> 15, y = u * p + c * h;\n    p = h * p + ((y & 32767) << 15) + r[i] + (s & 1073741823), s = (p >>> 30) + (y >>> 15) + u * c + (s >>> 30), r[i++] = p & 1073741823;\n  }\n  return s;\n}\nfunction Mt(e, t, r, i, s, n) {\n  for (var h = t & 16383, u = t >> 14; --n >= 0; ) {\n    var p = this[e] & 16383, c = this[e++] >> 14, y = u * p + c * h;\n    p = h * p + ((y & 16383) << 14) + r[i] + s, s = (p >> 28) + (y >> 14) + u * c, r[i++] = p & 268435455;\n  }\n  return s;\n}\nUe.appName == \"Microsoft Internet Explorer\" ? (R.prototype.am = kt, Te = 30) : Ue.appName != \"Netscape\" ? (R.prototype.am = qt, Te = 26) : (R.prototype.am = Mt, Te = 28);\nR.prototype.DB = Te;\nR.prototype.DM = (1 << Te) - 1;\nR.prototype.DV = 1 << Te;\nvar nt = 52;\nR.prototype.FV = Math.pow(2, nt);\nR.prototype.F1 = nt - Te;\nR.prototype.F2 = 2 * Te - nt;\nvar _t = \"0123456789abcdefghijklmnopqrstuvwxyz\", $e = new Array(), Le, me;\nLe = 48;\nfor (me = 0; me <= 9; ++me)\n  $e[Le++] = me;\nLe = 97;\nfor (me = 10; me < 36; ++me)\n  $e[Le++] = me;\nLe = 65;\nfor (me = 10; me < 36; ++me)\n  $e[Le++] = me;\nfunction De(e) {\n  return _t.charAt(e);\n}\nfunction wt(e, t) {\n  var r = $e[e.charCodeAt(t)];\n  return r ?? -1;\n}\nfunction Ut(e) {\n  for (var t = this.t - 1; t >= 0; --t)\n    e[t] = this[t];\n  e.t = this.t, e.s = this.s;\n}\nfunction zt(e) {\n  this.t = 1, this.s = e < 0 ? -1 : 0, e > 0 ? this[0] = e : e < -1 ? this[0] = e + this.DV : this.t = 0;\n}\nfunction Re(e) {\n  var t = _();\n  return t.fromInt(e), t;\n}\nfunction Gt(e, t) {\n  var r;\n  if (t == 16)\n    r = 4;\n  else if (t == 8)\n    r = 3;\n  else if (t == 256)\n    r = 8;\n  else if (t == 2)\n    r = 1;\n  else if (t == 32)\n    r = 5;\n  else if (t == 4)\n    r = 2;\n  else {\n    this.fromRadix(e, t);\n    return;\n  }\n  this.t = 0, this.s = 0;\n  for (var i = e.length, s = !1, n = 0; --i >= 0; ) {\n    var h = r == 8 ? e[i] & 255 : wt(e, i);\n    if (h < 0) {\n      e.charAt(i) == \"-\" && (s = !0);\n      continue;\n    }\n    s = !1, n == 0 ? this[this.t++] = h : n + r > this.DB ? (this[this.t - 1] |= (h & (1 << this.DB - n) - 1) << n, this[this.t++] = h >> this.DB - n) : this[this.t - 1] |= h << n, n += r, n >= this.DB && (n -= this.DB);\n  }\n  r == 8 && e[0] & 128 && (this.s = -1, n > 0 && (this[this.t - 1] |= (1 << this.DB - n) - 1 << n)), this.clamp(), s && R.ZERO.subTo(this, this);\n}\nfunction Wt() {\n  for (var e = this.s & this.DM; this.t > 0 && this[this.t - 1] == e; )\n    --this.t;\n}\nfunction Xt(e) {\n  if (this.s < 0)\n    return \"-\" + this.negate().toString(e);\n  var t;\n  if (e == 16)\n    t = 4;\n  else if (e == 8)\n    t = 3;\n  else if (e == 2)\n    t = 1;\n  else if (e == 32)\n    t = 5;\n  else if (e == 4)\n    t = 2;\n  else\n    return this.toRadix(e);\n  var r = (1 << t) - 1, i, s = !1, n = \"\", h = this.t, u = this.DB - h * this.DB % t;\n  if (h-- > 0)\n    for (u < this.DB && (i = this[h] >> u) > 0 && (s = !0, n = De(i)); h >= 0; )\n      u < t ? (i = (this[h] & (1 << u) - 1) << t - u, i |= this[--h] >> (u += this.DB - t)) : (i = this[h] >> (u -= t) & r, u <= 0 && (u += this.DB, --h)), i > 0 && (s = !0), s && (n += De(i));\n  return s ? n : \"0\";\n}\nfunction Jt() {\n  var e = _();\n  return R.ZERO.subTo(this, e), e;\n}\nfunction $t() {\n  return this.s < 0 ? this.negate() : this;\n}\nfunction Yt(e) {\n  var t = this.s - e.s;\n  if (t != 0)\n    return t;\n  var r = this.t;\n  if (t = r - e.t, t != 0)\n    return this.s < 0 ? -t : t;\n  for (; --r >= 0; )\n    if ((t = this[r] - e[r]) != 0)\n      return t;\n  return 0;\n}\nfunction Ye(e) {\n  var t = 1, r;\n  return (r = e >>> 16) != 0 && (e = r, t += 16), (r = e >> 8) != 0 && (e = r, t += 8), (r = e >> 4) != 0 && (e = r, t += 4), (r = e >> 2) != 0 && (e = r, t += 2), (r = e >> 1) != 0 && (e = r, t += 1), t;\n}\nfunction Zt() {\n  return this.t <= 0 ? 0 : this.DB * (this.t - 1) + Ye(this[this.t - 1] ^ this.s & this.DM);\n}\nfunction Qt(e, t) {\n  var r;\n  for (r = this.t - 1; r >= 0; --r)\n    t[r + e] = this[r];\n  for (r = e - 1; r >= 0; --r)\n    t[r] = 0;\n  t.t = this.t + e, t.s = this.s;\n}\nfunction er(e, t) {\n  for (var r = e; r < this.t; ++r)\n    t[r - e] = this[r];\n  t.t = Math.max(this.t - e, 0), t.s = this.s;\n}\nfunction tr(e, t) {\n  var r = e % this.DB, i = this.DB - r, s = (1 << i) - 1, n = Math.floor(e / this.DB), h = this.s << r & this.DM, u;\n  for (u = this.t - 1; u >= 0; --u)\n    t[u + n + 1] = this[u] >> i | h, h = (this[u] & s) << r;\n  for (u = n - 1; u >= 0; --u)\n    t[u] = 0;\n  t[n] = h, t.t = this.t + n + 1, t.s = this.s, t.clamp();\n}\nfunction rr(e, t) {\n  t.s = this.s;\n  var r = Math.floor(e / this.DB);\n  if (r >= this.t) {\n    t.t = 0;\n    return;\n  }\n  var i = e % this.DB, s = this.DB - i, n = (1 << i) - 1;\n  t[0] = this[r] >> i;\n  for (var h = r + 1; h < this.t; ++h)\n    t[h - r - 1] |= (this[h] & n) << s, t[h - r] = this[h] >> i;\n  i > 0 && (t[this.t - r - 1] |= (this.s & n) << s), t.t = this.t - r, t.clamp();\n}\nfunction ir(e, t) {\n  for (var r = 0, i = 0, s = Math.min(e.t, this.t); r < s; )\n    i += this[r] - e[r], t[r++] = i & this.DM, i >>= this.DB;\n  if (e.t < this.t) {\n    for (i -= e.s; r < this.t; )\n      i += this[r], t[r++] = i & this.DM, i >>= this.DB;\n    i += this.s;\n  } else {\n    for (i += this.s; r < e.t; )\n      i -= e[r], t[r++] = i & this.DM, i >>= this.DB;\n    i -= e.s;\n  }\n  t.s = i < 0 ? -1 : 0, i < -1 ? t[r++] = this.DV + i : i > 0 && (t[r++] = i), t.t = r, t.clamp();\n}\nfunction nr(e, t) {\n  var r = this.abs(), i = e.abs(), s = r.t;\n  for (t.t = s + i.t; --s >= 0; )\n    t[s] = 0;\n  for (s = 0; s < i.t; ++s)\n    t[s + r.t] = r.am(0, i[s], t, s, 0, r.t);\n  t.s = 0, t.clamp(), this.s != e.s && R.ZERO.subTo(t, t);\n}\nfunction sr(e) {\n  for (var t = this.abs(), r = e.t = 2 * t.t; --r >= 0; )\n    e[r] = 0;\n  for (r = 0; r < t.t - 1; ++r) {\n    var i = t.am(r, t[r], e, 2 * r, 0, 1);\n    (e[r + t.t] += t.am(r + 1, 2 * t[r], e, 2 * r + 1, i, t.t - r - 1)) >= t.DV && (e[r + t.t] -= t.DV, e[r + t.t + 1] = 1);\n  }\n  e.t > 0 && (e[e.t - 1] += t.am(r, t[r], e, 2 * r, 0, 1)), e.s = 0, e.clamp();\n}\nfunction ar(e, t, r) {\n  var i = e.abs();\n  if (!(i.t <= 0)) {\n    var s = this.abs();\n    if (s.t < i.t) {\n      t != null && t.fromInt(0), r != null && this.copyTo(r);\n      return;\n    }\n    r == null && (r = _());\n    var n = _(), h = this.s, u = e.s, p = this.DB - Ye(i[i.t - 1]);\n    p > 0 ? (i.lShiftTo(p, n), s.lShiftTo(p, r)) : (i.copyTo(n), s.copyTo(r));\n    var c = n.t, y = n[c - 1];\n    if (y != 0) {\n      var v = y * (1 << this.F1) + (c > 1 ? n[c - 2] >> this.F2 : 0), o = this.FV / v, l = (1 << this.F1) / v, f = 1 << this.F2, d = r.t, g = d - c, S = t ?? _();\n      for (n.dlShiftTo(g, S), r.compareTo(S) >= 0 && (r[r.t++] = 1, r.subTo(S, r)), R.ONE.dlShiftTo(c, S), S.subTo(n, n); n.t < c; )\n        n[n.t++] = 0;\n      for (; --g >= 0; ) {\n        var b = r[--d] == y ? this.DM : Math.floor(r[d] * o + (r[d - 1] + f) * l);\n        if ((r[d] += n.am(0, b, r, g, 0, c)) < b)\n          for (n.dlShiftTo(g, S), r.subTo(S, r); r[d] < --b; )\n            r.subTo(S, r);\n      }\n      t != null && (r.drShiftTo(c, t), h != u && R.ZERO.subTo(t, t)), r.t = c, r.clamp(), p > 0 && r.rShiftTo(p, r), h < 0 && R.ZERO.subTo(r, r);\n    }\n  }\n}\nfunction or(e) {\n  var t = _();\n  return this.abs().divRemTo(e, null, t), this.s < 0 && t.compareTo(R.ZERO) > 0 && e.subTo(t, t), t;\n}\nfunction Oe(e) {\n  this.m = e;\n}\nfunction ur(e) {\n  return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e;\n}\nfunction hr(e) {\n  return e;\n}\nfunction fr(e) {\n  e.divRemTo(this.m, null, e);\n}\nfunction cr(e, t, r) {\n  e.multiplyTo(t, r), this.reduce(r);\n}\nfunction lr(e, t) {\n  e.squareTo(t), this.reduce(t);\n}\nOe.prototype.convert = ur;\nOe.prototype.revert = hr;\nOe.prototype.reduce = fr;\nOe.prototype.mulTo = cr;\nOe.prototype.sqrTo = lr;\nfunction dr() {\n  if (this.t < 1)\n    return 0;\n  var e = this[0];\n  if (!(e & 1))\n    return 0;\n  var t = e & 3;\n  return t = t * (2 - (e & 15) * t) & 15, t = t * (2 - (e & 255) * t) & 255, t = t * (2 - ((e & 65535) * t & 65535)) & 65535, t = t * (2 - e * t % this.DV) % this.DV, t > 0 ? this.DV - t : -t;\n}\nfunction je(e) {\n  this.m = e, this.mp = e.invDigit(), this.mpl = this.mp & 32767, this.mph = this.mp >> 15, this.um = (1 << e.DB - 15) - 1, this.mt2 = 2 * e.t;\n}\nfunction pr(e) {\n  var t = _();\n  return e.abs().dlShiftTo(this.m.t, t), t.divRemTo(this.m, null, t), e.s < 0 && t.compareTo(R.ZERO) > 0 && this.m.subTo(t, t), t;\n}\nfunction vr(e) {\n  var t = _();\n  return e.copyTo(t), this.reduce(t), t;\n}\nfunction gr(e) {\n  for (; e.t <= this.mt2; )\n    e[e.t++] = 0;\n  for (var t = 0; t < this.m.t; ++t) {\n    var r = e[t] & 32767, i = r * this.mpl + ((r * this.mph + (e[t] >> 15) * this.mpl & this.um) << 15) & e.DM;\n    for (r = t + this.m.t, e[r] += this.m.am(0, i, e, t, 0, this.m.t); e[r] >= e.DV; )\n      e[r] -= e.DV, e[++r]++;\n  }\n  e.clamp(), e.drShiftTo(this.m.t, e), e.compareTo(this.m) >= 0 && e.subTo(this.m, e);\n}\nfunction yr(e, t) {\n  e.squareTo(t), this.reduce(t);\n}\nfunction mr(e, t, r) {\n  e.multiplyTo(t, r), this.reduce(r);\n}\nje.prototype.convert = pr;\nje.prototype.revert = vr;\nje.prototype.reduce = gr;\nje.prototype.mulTo = mr;\nje.prototype.sqrTo = yr;\nfunction xr() {\n  return (this.t > 0 ? this[0] & 1 : this.s) == 0;\n}\nfunction Sr(e, t) {\n  if (e > 4294967295 || e < 1)\n    return R.ONE;\n  var r = _(), i = _(), s = t.convert(this), n = Ye(e) - 1;\n  for (s.copyTo(r); --n >= 0; )\n    if (t.sqrTo(r, i), (e & 1 << n) > 0)\n      t.mulTo(i, s, r);\n    else {\n      var h = r;\n      r = i, i = h;\n    }\n  return t.revert(r);\n}\nfunction Er(e, t) {\n  var r;\n  return e < 256 || t.isEven() ? r = new Oe(t) : r = new je(t), this.exp(e, r);\n}\nR.prototype.copyTo = Ut;\nR.prototype.fromInt = zt;\nR.prototype.fromString = Gt;\nR.prototype.clamp = Wt;\nR.prototype.dlShiftTo = Qt;\nR.prototype.drShiftTo = er;\nR.prototype.lShiftTo = tr;\nR.prototype.rShiftTo = rr;\nR.prototype.subTo = ir;\nR.prototype.multiplyTo = nr;\nR.prototype.squareTo = sr;\nR.prototype.divRemTo = ar;\nR.prototype.invDigit = dr;\nR.prototype.isEven = xr;\nR.prototype.exp = Sr;\nR.prototype.toString = Xt;\nR.prototype.negate = Jt;\nR.prototype.abs = $t;\nR.prototype.compareTo = Yt;\nR.prototype.bitLength = Zt;\nR.prototype.mod = or;\nR.prototype.modPowInt = Er;\nR.ZERO = Re(0);\nR.ONE = Re(1);\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nfunction wr() {\n  var e = _();\n  return this.copyTo(e), e;\n}\nfunction Fr() {\n  if (this.s < 0) {\n    if (this.t == 1)\n      return this[0] - this.DV;\n    if (this.t == 0)\n      return -1;\n  } else {\n    if (this.t == 1)\n      return this[0];\n    if (this.t == 0)\n      return 0;\n  }\n  return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];\n}\nfunction br() {\n  return this.t == 0 ? this.s : this[0] << 24 >> 24;\n}\nfunction Ar() {\n  return this.t == 0 ? this.s : this[0] << 16 >> 16;\n}\nfunction Dr(e) {\n  return Math.floor(Math.LN2 * this.DB / Math.log(e));\n}\nfunction Pr() {\n  return this.s < 0 ? -1 : this.t <= 0 || this.t == 1 && this[0] <= 0 ? 0 : 1;\n}\nfunction Ir(e) {\n  if (e == null && (e = 10), this.signum() == 0 || e < 2 || e > 36)\n    return \"0\";\n  var t = this.chunkSize(e), r = Math.pow(e, t), i = Re(r), s = _(), n = _(), h = \"\";\n  for (this.divRemTo(i, s, n); s.signum() > 0; )\n    h = (r + n.intValue()).toString(e).substr(1) + h, s.divRemTo(i, s, n);\n  return n.intValue().toString(e) + h;\n}\nfunction Cr(e, t) {\n  this.fromInt(0), t == null && (t = 10);\n  for (var r = this.chunkSize(t), i = Math.pow(t, r), s = !1, n = 0, h = 0, u = 0; u < e.length; ++u) {\n    var p = wt(e, u);\n    if (p < 0) {\n      e.charAt(u) == \"-\" && this.signum() == 0 && (s = !0);\n      continue;\n    }\n    h = t * h + p, ++n >= r && (this.dMultiply(i), this.dAddOffset(h, 0), n = 0, h = 0);\n  }\n  n > 0 && (this.dMultiply(Math.pow(t, n)), this.dAddOffset(h, 0)), s && R.ZERO.subTo(this, this);\n}\nfunction Rr(e, t, r) {\n  if (typeof t == \"number\")\n    if (e < 2)\n      this.fromInt(1);\n    else\n      for (this.fromNumber(e, r), this.testBit(e - 1) || this.bitwiseTo(R.ONE.shiftLeft(e - 1), st, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(t); )\n        this.dAddOffset(2, 0), this.bitLength() > e && this.subTo(R.ONE.shiftLeft(e - 1), this);\n  else {\n    var i = new Array(), s = e & 7;\n    i.length = (e >> 3) + 1, t.nextBytes(i), s > 0 ? i[0] &= (1 << s) - 1 : i[0] = 0, this.fromString(i, 256);\n  }\n}\nfunction Tr() {\n  var e = this.t, t = new Array();\n  t[0] = this.s;\n  var r = this.DB - e * this.DB % 8, i, s = 0;\n  if (e-- > 0)\n    for (r < this.DB && (i = this[e] >> r) != (this.s & this.DM) >> r && (t[s++] = i | this.s << this.DB - r); e >= 0; )\n      r < 8 ? (i = (this[e] & (1 << r) - 1) << 8 - r, i |= this[--e] >> (r += this.DB - 8)) : (i = this[e] >> (r -= 8) & 255, r <= 0 && (r += this.DB, --e)), i & 128 && (i |= -256), s == 0 && (this.s & 128) != (i & 128) && ++s, (s > 0 || i != this.s) && (t[s++] = i);\n  return t;\n}\nfunction Br(e) {\n  return this.compareTo(e) == 0;\n}\nfunction Nr(e) {\n  return this.compareTo(e) < 0 ? this : e;\n}\nfunction Hr(e) {\n  return this.compareTo(e) > 0 ? this : e;\n}\nfunction Or(e, t, r) {\n  var i, s, n = Math.min(e.t, this.t);\n  for (i = 0; i < n; ++i)\n    r[i] = t(this[i], e[i]);\n  if (e.t < this.t) {\n    for (s = e.s & this.DM, i = n; i < this.t; ++i)\n      r[i] = t(this[i], s);\n    r.t = this.t;\n  } else {\n    for (s = this.s & this.DM, i = n; i < e.t; ++i)\n      r[i] = t(s, e[i]);\n    r.t = e.t;\n  }\n  r.s = t(this.s, e.s), r.clamp();\n}\nfunction jr(e, t) {\n  return e & t;\n}\nfunction Vr(e) {\n  var t = _();\n  return this.bitwiseTo(e, jr, t), t;\n}\nfunction st(e, t) {\n  return e | t;\n}\nfunction Kr(e) {\n  var t = _();\n  return this.bitwiseTo(e, st, t), t;\n}\nfunction Ft(e, t) {\n  return e ^ t;\n}\nfunction Lr(e) {\n  var t = _();\n  return this.bitwiseTo(e, Ft, t), t;\n}\nfunction bt(e, t) {\n  return e & ~t;\n}\nfunction qr(e) {\n  var t = _();\n  return this.bitwiseTo(e, bt, t), t;\n}\nfunction kr() {\n  for (var e = _(), t = 0; t < this.t; ++t)\n    e[t] = this.DM & ~this[t];\n  return e.t = this.t, e.s = ~this.s, e;\n}\nfunction Mr(e) {\n  var t = _();\n  return e < 0 ? this.rShiftTo(-e, t) : this.lShiftTo(e, t), t;\n}\nfunction _r(e) {\n  var t = _();\n  return e < 0 ? this.lShiftTo(-e, t) : this.rShiftTo(e, t), t;\n}\nfunction Ur(e) {\n  if (e == 0)\n    return -1;\n  var t = 0;\n  return e & 65535 || (e >>= 16, t += 16), e & 255 || (e >>= 8, t += 8), e & 15 || (e >>= 4, t += 4), e & 3 || (e >>= 2, t += 2), e & 1 || ++t, t;\n}\nfunction zr() {\n  for (var e = 0; e < this.t; ++e)\n    if (this[e] != 0)\n      return e * this.DB + Ur(this[e]);\n  return this.s < 0 ? this.t * this.DB : -1;\n}\nfunction Gr(e) {\n  for (var t = 0; e != 0; )\n    e &= e - 1, ++t;\n  return t;\n}\nfunction Wr() {\n  for (var e = 0, t = this.s & this.DM, r = 0; r < this.t; ++r)\n    e += Gr(this[r] ^ t);\n  return e;\n}\nfunction Xr(e) {\n  var t = Math.floor(e / this.DB);\n  return t >= this.t ? this.s != 0 : (this[t] & 1 << e % this.DB) != 0;\n}\nfunction Jr(e, t) {\n  var r = R.ONE.shiftLeft(e);\n  return this.bitwiseTo(r, t, r), r;\n}\nfunction $r(e) {\n  return this.changeBit(e, st);\n}\nfunction Yr(e) {\n  return this.changeBit(e, bt);\n}\nfunction Zr(e) {\n  return this.changeBit(e, Ft);\n}\nfunction Qr(e, t) {\n  for (var r = 0, i = 0, s = Math.min(e.t, this.t); r < s; )\n    i += this[r] + e[r], t[r++] = i & this.DM, i >>= this.DB;\n  if (e.t < this.t) {\n    for (i += e.s; r < this.t; )\n      i += this[r], t[r++] = i & this.DM, i >>= this.DB;\n    i += this.s;\n  } else {\n    for (i += this.s; r < e.t; )\n      i += e[r], t[r++] = i & this.DM, i >>= this.DB;\n    i += e.s;\n  }\n  t.s = i < 0 ? -1 : 0, i > 0 ? t[r++] = i : i < -1 && (t[r++] = this.DV + i), t.t = r, t.clamp();\n}\nfunction ei(e) {\n  var t = _();\n  return this.addTo(e, t), t;\n}\nfunction ti(e) {\n  var t = _();\n  return this.subTo(e, t), t;\n}\nfunction ri(e) {\n  var t = _();\n  return this.multiplyTo(e, t), t;\n}\nfunction ii() {\n  var e = _();\n  return this.squareTo(e), e;\n}\nfunction ni(e) {\n  var t = _();\n  return this.divRemTo(e, t, null), t;\n}\nfunction si(e) {\n  var t = _();\n  return this.divRemTo(e, null, t), t;\n}\nfunction ai(e) {\n  var t = _(), r = _();\n  return this.divRemTo(e, t, r), new Array(t, r);\n}\nfunction oi(e) {\n  this[this.t] = this.am(0, e - 1, this, 0, 0, this.t), ++this.t, this.clamp();\n}\nfunction ui(e, t) {\n  if (e != 0) {\n    for (; this.t <= t; )\n      this[this.t++] = 0;\n    for (this[t] += e; this[t] >= this.DV; )\n      this[t] -= this.DV, ++t >= this.t && (this[this.t++] = 0), ++this[t];\n  }\n}\nfunction ze() {\n}\nfunction At(e) {\n  return e;\n}\nfunction hi(e, t, r) {\n  e.multiplyTo(t, r);\n}\nfunction fi(e, t) {\n  e.squareTo(t);\n}\nze.prototype.convert = At;\nze.prototype.revert = At;\nze.prototype.mulTo = hi;\nze.prototype.sqrTo = fi;\nfunction ci(e) {\n  return this.exp(e, new ze());\n}\nfunction li(e, t, r) {\n  var i = Math.min(this.t + e.t, t);\n  for (r.s = 0, r.t = i; i > 0; )\n    r[--i] = 0;\n  var s;\n  for (s = r.t - this.t; i < s; ++i)\n    r[i + this.t] = this.am(0, e[i], r, i, 0, this.t);\n  for (s = Math.min(e.t, t); i < s; ++i)\n    this.am(0, e[i], r, i, 0, t - i);\n  r.clamp();\n}\nfunction di(e, t, r) {\n  --t;\n  var i = r.t = this.t + e.t - t;\n  for (r.s = 0; --i >= 0; )\n    r[i] = 0;\n  for (i = Math.max(t - this.t, 0); i < e.t; ++i)\n    r[this.t + i - t] = this.am(t - i, e[i], r, 0, 0, this.t + i - t);\n  r.clamp(), r.drShiftTo(1, r);\n}\nfunction qe(e) {\n  this.r2 = _(), this.q3 = _(), R.ONE.dlShiftTo(2 * e.t, this.r2), this.mu = this.r2.divide(e), this.m = e;\n}\nfunction pi(e) {\n  if (e.s < 0 || e.t > 2 * this.m.t)\n    return e.mod(this.m);\n  if (e.compareTo(this.m) < 0)\n    return e;\n  var t = _();\n  return e.copyTo(t), this.reduce(t), t;\n}\nfunction vi(e) {\n  return e;\n}\nfunction gi(e) {\n  for (e.drShiftTo(this.m.t - 1, this.r2), e.t > this.m.t + 1 && (e.t = this.m.t + 1, e.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); e.compareTo(this.r2) < 0; )\n    e.dAddOffset(1, this.m.t + 1);\n  for (e.subTo(this.r2, e); e.compareTo(this.m) >= 0; )\n    e.subTo(this.m, e);\n}\nfunction yi(e, t) {\n  e.squareTo(t), this.reduce(t);\n}\nfunction mi(e, t, r) {\n  e.multiplyTo(t, r), this.reduce(r);\n}\nqe.prototype.convert = pi;\nqe.prototype.revert = vi;\nqe.prototype.reduce = gi;\nqe.prototype.mulTo = mi;\nqe.prototype.sqrTo = yi;\nfunction xi(e, t) {\n  var r = e.bitLength(), i, s = Re(1), n;\n  if (r <= 0)\n    return s;\n  r < 18 ? i = 1 : r < 48 ? i = 3 : r < 144 ? i = 4 : r < 768 ? i = 5 : i = 6, r < 8 ? n = new Oe(t) : t.isEven() ? n = new qe(t) : n = new je(t);\n  var h = new Array(), u = 3, p = i - 1, c = (1 << i) - 1;\n  if (h[1] = n.convert(this), i > 1) {\n    var y = _();\n    for (n.sqrTo(h[1], y); u <= c; )\n      h[u] = _(), n.mulTo(y, h[u - 2], h[u]), u += 2;\n  }\n  var v = e.t - 1, o, l = !0, f = _(), d;\n  for (r = Ye(e[v]) - 1; v >= 0; ) {\n    for (r >= p ? o = e[v] >> r - p & c : (o = (e[v] & (1 << r + 1) - 1) << p - r, v > 0 && (o |= e[v - 1] >> this.DB + r - p)), u = i; !(o & 1); )\n      o >>= 1, --u;\n    if ((r -= u) < 0 && (r += this.DB, --v), l)\n      h[o].copyTo(s), l = !1;\n    else {\n      for (; u > 1; )\n        n.sqrTo(s, f), n.sqrTo(f, s), u -= 2;\n      u > 0 ? n.sqrTo(s, f) : (d = s, s = f, f = d), n.mulTo(f, h[o], s);\n    }\n    for (; v >= 0 && !(e[v] & 1 << r); )\n      n.sqrTo(s, f), d = s, s = f, f = d, --r < 0 && (r = this.DB - 1, --v);\n  }\n  return n.revert(s);\n}\nfunction Si(e) {\n  var t = this.s < 0 ? this.negate() : this.clone(), r = e.s < 0 ? e.negate() : e.clone();\n  if (t.compareTo(r) < 0) {\n    var i = t;\n    t = r, r = i;\n  }\n  var s = t.getLowestSetBit(), n = r.getLowestSetBit();\n  if (n < 0)\n    return t;\n  for (s < n && (n = s), n > 0 && (t.rShiftTo(n, t), r.rShiftTo(n, r)); t.signum() > 0; )\n    (s = t.getLowestSetBit()) > 0 && t.rShiftTo(s, t), (s = r.getLowestSetBit()) > 0 && r.rShiftTo(s, r), t.compareTo(r) >= 0 ? (t.subTo(r, t), t.rShiftTo(1, t)) : (r.subTo(t, r), r.rShiftTo(1, r));\n  return n > 0 && r.lShiftTo(n, r), r;\n}\nfunction Ei(e) {\n  if (e <= 0)\n    return 0;\n  var t = this.DV % e, r = this.s < 0 ? e - 1 : 0;\n  if (this.t > 0)\n    if (t == 0)\n      r = this[0] % e;\n    else\n      for (var i = this.t - 1; i >= 0; --i)\n        r = (t * r + this[i]) % e;\n  return r;\n}\nfunction wi(e) {\n  var t = e.isEven();\n  if (this.isEven() && t || e.signum() == 0)\n    return R.ZERO;\n  for (var r = e.clone(), i = this.clone(), s = Re(1), n = Re(0), h = Re(0), u = Re(1); r.signum() != 0; ) {\n    for (; r.isEven(); )\n      r.rShiftTo(1, r), t ? ((!s.isEven() || !n.isEven()) && (s.addTo(this, s), n.subTo(e, n)), s.rShiftTo(1, s)) : n.isEven() || n.subTo(e, n), n.rShiftTo(1, n);\n    for (; i.isEven(); )\n      i.rShiftTo(1, i), t ? ((!h.isEven() || !u.isEven()) && (h.addTo(this, h), u.subTo(e, u)), h.rShiftTo(1, h)) : u.isEven() || u.subTo(e, u), u.rShiftTo(1, u);\n    r.compareTo(i) >= 0 ? (r.subTo(i, r), t && s.subTo(h, s), n.subTo(u, n)) : (i.subTo(r, i), t && h.subTo(s, h), u.subTo(n, u));\n  }\n  if (i.compareTo(R.ONE) != 0)\n    return R.ZERO;\n  if (u.compareTo(e) >= 0)\n    return u.subtract(e);\n  if (u.signum() < 0)\n    u.addTo(e, u);\n  else\n    return u;\n  return u.signum() < 0 ? u.add(e) : u;\n}\nvar le = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997], Fi = (1 << 26) / le[le.length - 1];\nfunction bi(e) {\n  var t, r = this.abs();\n  if (r.t == 1 && r[0] <= le[le.length - 1]) {\n    for (t = 0; t < le.length; ++t)\n      if (r[0] == le[t])\n        return !0;\n    return !1;\n  }\n  if (r.isEven())\n    return !1;\n  for (t = 1; t < le.length; ) {\n    for (var i = le[t], s = t + 1; s < le.length && i < Fi; )\n      i *= le[s++];\n    for (i = r.modInt(i); t < s; )\n      if (i % le[t++] == 0)\n        return !1;\n  }\n  return r.millerRabin(e);\n}\nfunction Ai(e) {\n  var t = this.subtract(R.ONE), r = t.getLowestSetBit();\n  if (r <= 0)\n    return !1;\n  var i = t.shiftRight(r);\n  e = e + 1 >> 1, e > le.length && (e = le.length);\n  for (var s = _(), n = 0; n < e; ++n) {\n    s.fromInt(le[Math.floor(Math.random() * le.length)]);\n    var h = s.modPow(i, this);\n    if (h.compareTo(R.ONE) != 0 && h.compareTo(t) != 0) {\n      for (var u = 1; u++ < r && h.compareTo(t) != 0; )\n        if (h = h.modPowInt(2, this), h.compareTo(R.ONE) == 0)\n          return !1;\n      if (h.compareTo(t) != 0)\n        return !1;\n    }\n  }\n  return !0;\n}\nR.prototype.chunkSize = Dr;\nR.prototype.toRadix = Ir;\nR.prototype.fromRadix = Cr;\nR.prototype.fromNumber = Rr;\nR.prototype.bitwiseTo = Or;\nR.prototype.changeBit = Jr;\nR.prototype.addTo = Qr;\nR.prototype.dMultiply = oi;\nR.prototype.dAddOffset = ui;\nR.prototype.multiplyLowerTo = li;\nR.prototype.multiplyUpperTo = di;\nR.prototype.modInt = Ei;\nR.prototype.millerRabin = Ai;\nR.prototype.clone = wr;\nR.prototype.intValue = Fr;\nR.prototype.byteValue = br;\nR.prototype.shortValue = Ar;\nR.prototype.signum = Pr;\nR.prototype.toByteArray = Tr;\nR.prototype.equals = Br;\nR.prototype.min = Nr;\nR.prototype.max = Hr;\nR.prototype.and = Vr;\nR.prototype.or = Kr;\nR.prototype.xor = Lr;\nR.prototype.andNot = qr;\nR.prototype.not = kr;\nR.prototype.shiftLeft = Mr;\nR.prototype.shiftRight = _r;\nR.prototype.getLowestSetBit = zr;\nR.prototype.bitCount = Wr;\nR.prototype.testBit = Xr;\nR.prototype.setBit = $r;\nR.prototype.clearBit = Yr;\nR.prototype.flipBit = Zr;\nR.prototype.add = ei;\nR.prototype.subtract = ti;\nR.prototype.multiply = ri;\nR.prototype.divide = ni;\nR.prototype.remainder = si;\nR.prototype.divideAndRemainder = ai;\nR.prototype.modPow = xi;\nR.prototype.modInverse = wi;\nR.prototype.pow = ci;\nR.prototype.gcd = Si;\nR.prototype.isProbablePrime = bi;\nR.prototype.square = ii;\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nfunction at() {\n  this.i = 0, this.j = 0, this.S = new Array();\n}\nfunction Di(e) {\n  var t, r, i;\n  for (t = 0; t < 256; ++t)\n    this.S[t] = t;\n  for (r = 0, t = 0; t < 256; ++t)\n    r = r + this.S[t] + e[t % e.length] & 255, i = this.S[t], this.S[t] = this.S[r], this.S[r] = i;\n  this.i = 0, this.j = 0;\n}\nfunction Pi() {\n  var e;\n  return this.i = this.i + 1 & 255, this.j = this.j + this.S[this.i] & 255, e = this.S[this.i], this.S[this.i] = this.S[this.j], this.S[this.j] = e, this.S[e + this.S[this.i] & 255];\n}\nat.prototype.init = Di;\nat.prototype.next = Pi;\nfunction Ii() {\n  return new at();\n}\nvar et = 256;\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nvar We, ge, oe;\nfunction Ci(e) {\n  ge[oe++] ^= e & 255, ge[oe++] ^= e >> 8 & 255, ge[oe++] ^= e >> 16 & 255, ge[oe++] ^= e >> 24 & 255, oe >= et && (oe -= et);\n}\nfunction Dt() {\n  Ci((/* @__PURE__ */ new Date()).getTime());\n}\nif (ge == null) {\n  ge = new Array(), oe = 0;\n  var Se;\n  if (Ve !== void 0 && (Ve.crypto !== void 0 || Ve.msCrypto !== void 0)) {\n    var lt = Ve.crypto || Ve.msCrypto;\n    if (lt.getRandomValues) {\n      var dt = new Uint8Array(32);\n      for (lt.getRandomValues(dt), Se = 0; Se < 32; ++Se)\n        ge[oe++] = dt[Se];\n    } else if (Ue.appName == \"Netscape\" && Ue.appVersion < \"5\") {\n      var pt = Ve.crypto.random(32);\n      for (Se = 0; Se < pt.length; ++Se)\n        ge[oe++] = pt.charCodeAt(Se) & 255;\n    }\n  }\n  for (; oe < et; )\n    Se = Math.floor(65536 * Math.random()), ge[oe++] = Se >>> 8, ge[oe++] = Se & 255;\n  oe = 0, Dt();\n}\nfunction Ri() {\n  if (We == null) {\n    for (Dt(), We = Ii(), We.init(ge), oe = 0; oe < ge.length; ++oe)\n      ge[oe] = 0;\n    oe = 0;\n  }\n  return We.next();\n}\nfunction Ti(e) {\n  var t;\n  for (t = 0; t < e.length; ++t)\n    e[t] = Ri();\n}\nfunction Ge() {\n}\nGe.prototype.nextBytes = Ti;\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nfunction ve(e, t) {\n  return new R(e, t);\n}\nfunction q() {\n  this.n = null, this.e = 0, this.d = null, this.p = null, this.q = null, this.dmp1 = null, this.dmq1 = null, this.coeff = null;\n}\nfunction Bi(e, t) {\n  if (this.isPublic = !0, this.isPrivate = !1, typeof e != \"string\")\n    this.n = e, this.e = t;\n  else if (e != null && t != null && e.length > 0 && t.length > 0)\n    this.n = ve(e, 16), this.e = parseInt(t, 16);\n  else\n    throw \"Invalid RSA public key\";\n}\nfunction Ni(e) {\n  return e.modPowInt(this.e, this.n);\n}\nq.prototype.doPublic = Ni;\nq.prototype.setPublic = Bi;\nq.prototype.type = \"RSA\";\nfunction Hi(e, t, r) {\n  if (this.isPrivate = !0, typeof e != \"string\")\n    this.n = e, this.e = t, this.d = r;\n  else if (e != null && t != null && e.length > 0 && t.length > 0)\n    this.n = ve(e, 16), this.e = parseInt(t, 16), this.d = ve(r, 16);\n  else\n    throw \"Invalid RSA private key\";\n}\nfunction Oi(e, t, r, i, s, n, h, u) {\n  if (this.isPrivate = !0, this.isPublic = !1, e == null)\n    throw \"RSASetPrivateEx N == null\";\n  if (t == null)\n    throw \"RSASetPrivateEx E == null\";\n  if (e.length == 0)\n    throw \"RSASetPrivateEx N.length == 0\";\n  if (t.length == 0)\n    throw \"RSASetPrivateEx E.length == 0\";\n  if (e != null && t != null && e.length > 0 && t.length > 0)\n    this.n = ve(e, 16), this.e = parseInt(t, 16), this.d = ve(r, 16), this.p = ve(i, 16), this.q = ve(s, 16), this.dmp1 = ve(n, 16), this.dmq1 = ve(h, 16), this.coeff = ve(u, 16);\n  else\n    throw \"Invalid RSA private key in RSASetPrivateEx\";\n}\nfunction ji(e, t) {\n  var r = new Ge(), i = e >> 1;\n  this.e = parseInt(t, 16);\n  for (var s = new R(t, 16), n = e / 2 - 100, h = R.ONE.shiftLeft(n); ; ) {\n    for (; this.p = new R(e - i, 1, r), !(this.p.subtract(R.ONE).gcd(s).compareTo(R.ONE) == 0 && this.p.isProbablePrime(10)); )\n      ;\n    for (; this.q = new R(i, 1, r), !(this.q.subtract(R.ONE).gcd(s).compareTo(R.ONE) == 0 && this.q.isProbablePrime(10)); )\n      ;\n    if (this.p.compareTo(this.q) <= 0) {\n      var u = this.p;\n      this.p = this.q, this.q = u;\n    }\n    var p = this.q.subtract(this.p).abs();\n    if (!(p.bitLength() < n || p.compareTo(h) <= 0)) {\n      var c = this.p.subtract(R.ONE), y = this.q.subtract(R.ONE), v = c.multiply(y);\n      if (v.gcd(s).compareTo(R.ONE) == 0 && (this.n = this.p.multiply(this.q), this.n.bitLength() == e)) {\n        this.d = s.modInverse(v), this.dmp1 = this.d.mod(c), this.dmq1 = this.d.mod(y), this.coeff = this.q.modInverse(this.p);\n        break;\n      }\n    }\n  }\n  this.isPrivate = !0;\n}\nfunction Vi(e) {\n  if (this.p == null || this.q == null)\n    return e.modPow(this.d, this.n);\n  for (var t = e.mod(this.p).modPow(this.dmp1, this.p), r = e.mod(this.q).modPow(this.dmq1, this.q); t.compareTo(r) < 0; )\n    t = t.add(this.p);\n  return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r);\n}\nq.prototype.doPrivate = Vi;\nq.prototype.setPrivate = Hi;\nq.prototype.setPrivateEx = Oi;\nq.prototype.generate = ji;\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nfunction ue(e, t) {\n  this.x = t, this.q = e;\n}\nfunction Ki(e) {\n  return e == this ? !0 : this.q.equals(e.q) && this.x.equals(e.x);\n}\nfunction Li() {\n  return this.x;\n}\nfunction qi() {\n  return new ue(this.q, this.x.negate().mod(this.q));\n}\nfunction ki(e) {\n  return new ue(this.q, this.x.add(e.toBigInteger()).mod(this.q));\n}\nfunction Mi(e) {\n  return new ue(this.q, this.x.subtract(e.toBigInteger()).mod(this.q));\n}\nfunction _i(e) {\n  return new ue(this.q, this.x.multiply(e.toBigInteger()).mod(this.q));\n}\nfunction Ui() {\n  return new ue(this.q, this.x.square().mod(this.q));\n}\nfunction zi(e) {\n  return new ue(this.q, this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q));\n}\nue.prototype.equals = Ki;\nue.prototype.toBigInteger = Li;\nue.prototype.negate = qi;\nue.prototype.add = ki;\nue.prototype.subtract = Mi;\nue.prototype.multiply = _i;\nue.prototype.square = Ui;\nue.prototype.divide = zi;\nue.prototype.sqrt = function() {\n  return new ue(this.q, this.x.sqrt().mod(this.q));\n};\nfunction z(e, t, r, i) {\n  this.curve = e, this.x = t, this.y = r, i == null ? this.z = R.ONE : this.z = i, this.zinv = null;\n}\nfunction Gi() {\n  return this.zinv == null && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q));\n}\nfunction Wi() {\n  return this.zinv == null && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q));\n}\nfunction Xi(e) {\n  if (e == this)\n    return !0;\n  if (this.isInfinity())\n    return e.isInfinity();\n  if (e.isInfinity())\n    return this.isInfinity();\n  var t, r;\n  return t = e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q), t.equals(R.ZERO) ? (r = e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q), r.equals(R.ZERO)) : !1;\n}\nfunction Ji() {\n  return this.x == null && this.y == null ? !0 : this.z.equals(R.ZERO) && !this.y.toBigInteger().equals(R.ZERO);\n}\nfunction $i() {\n  return new z(this.curve, this.x, this.y.negate(), this.z);\n}\nfunction Yi(e) {\n  if (this.isInfinity())\n    return e;\n  if (e.isInfinity())\n    return this;\n  var t = e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q), r = e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);\n  if (R.ZERO.equals(r))\n    return R.ZERO.equals(t) ? this.twice() : this.curve.getInfinity();\n  var i = new R(\"3\"), s = this.x.toBigInteger(), n = this.y.toBigInteger();\n  e.x.toBigInteger(), e.y.toBigInteger();\n  var h = r.square(), u = h.multiply(r), p = s.multiply(h), c = t.square().multiply(this.z), y = c.subtract(p.shiftLeft(1)).multiply(e.z).subtract(u).multiply(r).mod(this.curve.q), v = p.multiply(i).multiply(t).subtract(n.multiply(u)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(u)).mod(this.curve.q), o = u.multiply(this.z).multiply(e.z).mod(this.curve.q);\n  return new z(this.curve, this.curve.fromBigInteger(y), this.curve.fromBigInteger(v), o);\n}\nfunction Zi() {\n  if (this.isInfinity())\n    return this;\n  if (this.y.toBigInteger().signum() == 0)\n    return this.curve.getInfinity();\n  var e = new R(\"3\"), t = this.x.toBigInteger(), r = this.y.toBigInteger(), i = r.multiply(this.z), s = i.multiply(r).mod(this.curve.q), n = this.curve.a.toBigInteger(), h = t.square().multiply(e);\n  R.ZERO.equals(n) || (h = h.add(this.z.square().multiply(n))), h = h.mod(this.curve.q);\n  var u = h.square().subtract(t.shiftLeft(3).multiply(s)).shiftLeft(1).multiply(i).mod(this.curve.q), p = h.multiply(e).multiply(t).subtract(s.shiftLeft(1)).shiftLeft(2).multiply(s).subtract(h.square().multiply(h)).mod(this.curve.q), c = i.square().multiply(i).shiftLeft(3).mod(this.curve.q);\n  return new z(this.curve, this.curve.fromBigInteger(u), this.curve.fromBigInteger(p), c);\n}\nfunction Qi(e) {\n  if (this.isInfinity())\n    return this;\n  if (e.signum() == 0)\n    return this.curve.getInfinity();\n  var t = e, r = t.multiply(new R(\"3\")), i = this.negate(), s = this, n = this.curve.q.subtract(e), h = n.multiply(new R(\"3\")), u = new z(this.curve, this.x, this.y), p = u.negate(), c;\n  for (c = r.bitLength() - 2; c > 0; --c) {\n    s = s.twice();\n    var y = r.testBit(c), v = t.testBit(c);\n    y != v && (s = s.add(y ? this : i));\n  }\n  for (c = h.bitLength() - 2; c > 0; --c) {\n    u = u.twice();\n    var o = h.testBit(c), l = n.testBit(c);\n    o != l && (u = u.add(o ? u : p));\n  }\n  return s;\n}\nfunction en(e, t, r) {\n  var i;\n  e.bitLength() > r.bitLength() ? i = e.bitLength() - 1 : i = r.bitLength() - 1;\n  for (var s = this.curve.getInfinity(), n = this.add(t); i >= 0; )\n    s = s.twice(), e.testBit(i) ? r.testBit(i) ? s = s.add(n) : s = s.add(this) : r.testBit(i) && (s = s.add(t)), --i;\n  return s;\n}\nz.prototype.getX = Gi;\nz.prototype.getY = Wi;\nz.prototype.equals = Xi;\nz.prototype.isInfinity = Ji;\nz.prototype.negate = $i;\nz.prototype.add = Yi;\nz.prototype.twice = Zi;\nz.prototype.multiply = Qi;\nz.prototype.multiplyTwo = en;\nfunction Be(e, t, r) {\n  this.q = e, this.a = this.fromBigInteger(t), this.b = this.fromBigInteger(r), this.infinity = new z(this, null, null);\n}\nfunction tn() {\n  return this.q;\n}\nfunction rn() {\n  return this.a;\n}\nfunction nn() {\n  return this.b;\n}\nfunction sn(e) {\n  return e == this ? !0 : this.q.equals(e.q) && this.a.equals(e.a) && this.b.equals(e.b);\n}\nfunction an() {\n  return this.infinity;\n}\nfunction on(e) {\n  return new ue(this.q, e);\n}\nfunction un(e) {\n  switch (parseInt(e.substr(0, 2), 16)) {\n    case 0:\n      return this.infinity;\n    case 2:\n    case 3:\n      var t = e.substr(0, 2);\n      e.substr(2);\n      var r = this.fromBigInteger(new R(p, 16)), i = this.getA(), s = this.getB(), n = r.square().add(i).multiply(r).add(s), h = n.sqrt();\n      return t == \"03\" && (h = h.negate()), new z(this, r, h);\n    case 4:\n    case 6:\n    case 7:\n      var u = (e.length - 2) / 2, p = e.substr(2, u), c = e.substr(u + 2, u);\n      return new z(this, this.fromBigInteger(new R(p, 16)), this.fromBigInteger(new R(c, 16)));\n    default:\n      return null;\n  }\n}\nBe.prototype.getQ = tn;\nBe.prototype.getA = rn;\nBe.prototype.getB = nn;\nBe.prototype.equals = sn;\nBe.prototype.getInfinity = an;\nBe.prototype.fromBigInteger = on;\nBe.prototype.decodePointHex = un;\n/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib\n */\nue.prototype.getByteLength = function() {\n  return Math.floor((this.toBigInteger().bitLength() + 7) / 8);\n};\nz.prototype.getEncoded = function(e) {\n  var t = function(n, h) {\n    var u = n.toByteArrayUnsigned();\n    if (h < u.length)\n      u = u.slice(u.length - h);\n    else\n      for (; h > u.length; )\n        u.unshift(0);\n    return u;\n  }, r = this.getX().toBigInteger(), i = this.getY().toBigInteger(), s = t(r, 32);\n  return e ? i.isEven() ? s.unshift(2) : s.unshift(3) : (s.unshift(4), s = s.concat(t(i, 32))), s;\n};\nz.decodeFrom = function(e, t) {\n  t[0];\n  var r = t.length - 1, i = t.slice(1, 1 + r / 2), s = t.slice(1 + r / 2, 1 + r);\n  i.unshift(0), s.unshift(0);\n  var n = new R(i), h = new R(s);\n  return new z(e, e.fromBigInteger(n), e.fromBigInteger(h));\n};\nz.decodeFromHex = function(e, t) {\n  t.substr(0, 2);\n  var r = t.length - 2, i = t.substr(2, r / 2), s = t.substr(2 + r / 2, r / 2), n = new R(i, 16), h = new R(s, 16);\n  return new z(e, e.fromBigInteger(n), e.fromBigInteger(h));\n};\nz.prototype.add2D = function(e) {\n  if (this.isInfinity())\n    return e;\n  if (e.isInfinity())\n    return this;\n  if (this.x.equals(e.x))\n    return this.y.equals(e.y) ? this.twice() : this.curve.getInfinity();\n  var t = e.x.subtract(this.x), r = e.y.subtract(this.y), i = r.divide(t), s = i.square().subtract(this.x).subtract(e.x), n = i.multiply(this.x.subtract(s)).subtract(this.y);\n  return new z(this.curve, s, n);\n};\nz.prototype.twice2D = function() {\n  if (this.isInfinity())\n    return this;\n  if (this.y.toBigInteger().signum() == 0)\n    return this.curve.getInfinity();\n  var e = this.curve.fromBigInteger(R.valueOf(2)), t = this.curve.fromBigInteger(R.valueOf(3)), r = this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)), i = r.square().subtract(this.x.multiply(e)), s = r.multiply(this.x.subtract(i)).subtract(this.y);\n  return new z(this.curve, i, s);\n};\nz.prototype.multiply2D = function(e) {\n  if (this.isInfinity())\n    return this;\n  if (e.signum() == 0)\n    return this.curve.getInfinity();\n  var t = e, r = t.multiply(new R(\"3\")), i = this.negate(), s = this, n;\n  for (n = r.bitLength() - 2; n > 0; --n) {\n    s = s.twice();\n    var h = r.testBit(n), u = t.testBit(n);\n    h != u && (s = s.add2D(h ? this : i));\n  }\n  return s;\n};\nz.prototype.isOnCurve = function() {\n  var e = this.getX().toBigInteger(), t = this.getY().toBigInteger(), r = this.curve.getA().toBigInteger(), i = this.curve.getB().toBigInteger(), s = this.curve.getQ(), n = t.multiply(t).mod(s), h = e.multiply(e).multiply(e).add(r.multiply(e)).add(i).mod(s);\n  return n.equals(h);\n};\nz.prototype.toString = function() {\n  return \"(\" + this.getX().toBigInteger().toString() + \",\" + this.getY().toBigInteger().toString() + \")\";\n};\nz.prototype.validate = function() {\n  var e = this.curve.getQ();\n  if (this.isInfinity())\n    throw new Error(\"Point is at infinity.\");\n  var t = this.getX().toBigInteger(), r = this.getY().toBigInteger();\n  if (t.compareTo(R.ONE) < 0 || t.compareTo(e.subtract(R.ONE)) > 0)\n    throw new Error(\"x coordinate out of bounds\");\n  if (r.compareTo(R.ONE) < 0 || r.compareTo(e.subtract(R.ONE)) > 0)\n    throw new Error(\"y coordinate out of bounds\");\n  if (!this.isOnCurve())\n    throw new Error(\"Point is not on the curve.\");\n  if (this.multiply(e).isInfinity())\n    throw new Error(\"Point is not a scalar multiple of G.\");\n  return !0;\n};\n/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval\n */\nvar Pt = function() {\n  var e = \"(?:-?\\\\b(?:0|[1-9][0-9]*)(?:\\\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\\\b)\", t = '(?:[^\\\\0-\\\\x08\\\\x0a-\\\\x1f\"\\\\\\\\]|\\\\\\\\(?:[\"/\\\\\\\\bfnrt]|u[0-9A-Fa-f]{4}))', r = '(?:\"' + t + '*\")', i = new RegExp(\"(?:false|true|null|[\\\\{\\\\}\\\\[\\\\]]|\" + e + \"|\" + r + \")\", \"g\"), s = new RegExp(\"\\\\\\\\(?:([^u])|u(.{4}))\", \"g\"), n = { '\"': '\"', \"/\": \"/\", \"\\\\\": \"\\\\\", b: \"\\b\", f: \"\\f\", n: `\n`, r: \"\\r\", t: \"\t\" };\n  function h(y, v, o) {\n    return v ? n[v] : String.fromCharCode(parseInt(o, 16));\n  }\n  var u = new String(\"\"), p = \"\\\\\", c = Object.hasOwnProperty;\n  return function(y, v) {\n    var o = y.match(i), l, f = o[0], d = !1;\n    f === \"{\" ? l = {} : f === \"[\" ? l = [] : (l = [], d = !0);\n    for (var g, S = [l], b = 1 - d, D = o.length; b < D; ++b) {\n      f = o[b];\n      var A;\n      switch (f.charCodeAt(0)) {\n        default:\n          A = S[0], A[g || A.length] = +f, g = void 0;\n          break;\n        case 34:\n          if (f = f.substring(1, f.length - 1), f.indexOf(p) !== -1 && (f = f.replace(s, h)), A = S[0], !g)\n            if (A instanceof Array)\n              g = A.length;\n            else {\n              g = f || u;\n              break;\n            }\n          A[g] = f, g = void 0;\n          break;\n        case 91:\n          A = S[0], S.unshift(A[g || A.length] = []), g = void 0;\n          break;\n        case 93:\n          S.shift();\n          break;\n        case 102:\n          A = S[0], A[g || A.length] = !1, g = void 0;\n          break;\n        case 110:\n          A = S[0], A[g || A.length] = null, g = void 0;\n          break;\n        case 116:\n          A = S[0], A[g || A.length] = !0, g = void 0;\n          break;\n        case 123:\n          A = S[0], S.unshift(A[g || A.length] = {}), g = void 0;\n          break;\n        case 125:\n          S.shift();\n          break;\n      }\n    }\n    if (d) {\n      if (S.length !== 1)\n        throw new Error();\n      l = l[0];\n    } else if (S.length)\n      throw new Error();\n    if (v) {\n      var I = function(m, E) {\n        var w = m[E];\n        if (w && typeof w == \"object\") {\n          var x = null;\n          for (var F in w)\n            if (c.call(w, F) && w !== m) {\n              var P = I(w, F);\n              P !== void 0 ? w[F] = P : (x || (x = []), x.push(F));\n            }\n          if (x)\n            for (var T = x.length; --T >= 0; )\n              delete w[x[T]];\n        }\n        return v.call(m, E, w);\n      };\n      l = I({ \"\": l }, \"\");\n    }\n    return l;\n  };\n}();\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\na.asn1.ASN1Util = new function() {\n  this.integerToByteHex = function(e) {\n    var t = e.toString(16);\n    return t.length % 2 == 1 && (t = \"0\" + t), t;\n  }, this.bigIntToMinTwosComplementsHex = function(e) {\n    return Ze(e);\n  }, this.getPEMStringFromHex = function(e, t) {\n    return de(e, t);\n  }, this.newObject = function(e) {\n    var t = a, r = t.asn1, i = r.ASN1Object, s = r.DERBoolean, n = r.DERInteger, h = r.DERBitString, u = r.DEROctetString, p = r.DERNull, c = r.DERObjectIdentifier, y = r.DEREnumerated, v = r.DERUTF8String, o = r.DERNumericString, l = r.DERPrintableString, f = r.DERTeletexString, d = r.DERIA5String, g = r.DERUTCTime, S = r.DERGeneralizedTime, b = r.DERVisibleString, D = r.DERBMPString, A = r.DERSequence, I = r.DERSet, m = r.DERTaggedObject, E = r.ASN1Util.newObject;\n    if (e instanceof r.ASN1Object)\n      return e;\n    var w = Object.keys(e);\n    if (w.length != 1)\n      throw new Error(\"key of param shall be only one.\");\n    var x = w[0];\n    if (\":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:\".indexOf(\":\" + x + \":\") == -1)\n      throw new Error(\"undefined key: \" + x);\n    if (x == \"bool\")\n      return new s(e[x]);\n    if (x == \"int\")\n      return new n(e[x]);\n    if (x == \"bitstr\")\n      return new h(e[x]);\n    if (x == \"octstr\")\n      return new u(e[x]);\n    if (x == \"null\")\n      return new p(e[x]);\n    if (x == \"oid\")\n      return new c(e[x]);\n    if (x == \"enum\")\n      return new y(e[x]);\n    if (x == \"utf8str\")\n      return new v(e[x]);\n    if (x == \"numstr\")\n      return new o(e[x]);\n    if (x == \"prnstr\")\n      return new l(e[x]);\n    if (x == \"telstr\")\n      return new f(e[x]);\n    if (x == \"ia5str\")\n      return new d(e[x]);\n    if (x == \"utctime\")\n      return new g(e[x]);\n    if (x == \"gentime\")\n      return new S(e[x]);\n    if (x == \"visstr\")\n      return new b(e[x]);\n    if (x == \"bmpstr\")\n      return new D(e[x]);\n    if (x == \"asn1\")\n      return new i(e[x]);\n    if (x == \"seq\") {\n      for (var F = e[x], P = [], T = 0; T < F.length; T++) {\n        var H = E(F[T]);\n        P.push(H);\n      }\n      return new A({ array: P });\n    }\n    if (x == \"set\") {\n      for (var F = e[x], P = [], T = 0; T < F.length; T++) {\n        var H = E(F[T]);\n        P.push(H);\n      }\n      return new I({ array: P });\n    }\n    if (x == \"tag\") {\n      var C = e[x];\n      if (Object.prototype.toString.call(C) === \"[object Array]\" && C.length == 3) {\n        var B = E(C[2]);\n        return new m({ tag: C[0], explicit: C[1], obj: B });\n      } else\n        return new m(C);\n    }\n  }, this.jsonToASN1HEX = function(e) {\n    var t = this.newObject(e);\n    return t.tohex();\n  };\n}();\na.asn1.ASN1Util.oidHexToInt = function(e) {\n  for (var s = \"\", t = parseInt(e.substr(0, 2), 16), r = Math.floor(t / 40), i = t % 40, s = r + \".\" + i, n = \"\", h = 2; h < e.length; h += 2) {\n    var u = parseInt(e.substr(h, 2), 16), p = (\"00000000\" + u.toString(2)).slice(-8);\n    if (n = n + p.substr(1, 7), p.substr(0, 1) == \"0\") {\n      var c = new R(n, 2);\n      s = s + \".\" + c.toString(10), n = \"\";\n    }\n  }\n  return s;\n};\na.asn1.ASN1Util.oidIntToHex = function(e) {\n  var t = function(u) {\n    var p = u.toString(16);\n    return p.length == 1 && (p = \"0\" + p), p;\n  }, r = function(u) {\n    var p = \"\", c = new R(u, 10), y = c.toString(2), v = 7 - y.length % 7;\n    v == 7 && (v = 0);\n    for (var o = \"\", l = 0; l < v; l++)\n      o += \"0\";\n    y = o + y;\n    for (var l = 0; l < y.length - 1; l += 7) {\n      var f = y.substr(l, 7);\n      l != y.length - 7 && (f = \"1\" + f), p += t(parseInt(f, 2));\n    }\n    return p;\n  };\n  if (!e.match(/^[0-9.]+$/))\n    throw \"malformed oid string: \" + e;\n  var i = \"\", s = e.split(\".\"), n = parseInt(s[0]) * 40 + parseInt(s[1]);\n  i += t(n), s.splice(0, 2);\n  for (var h = 0; h < s.length; h++)\n    i += r(s[h]);\n  return i;\n};\na.asn1.ASN1Object = function(e) {\n  var t = \"\";\n  this.params = null, this.getLengthHexFromValue = function() {\n    if (typeof this.hV > \"u\" || this.hV == null)\n      throw new Error(\"this.hV is null or undefined\");\n    if (this.hV.length % 2 == 1)\n      throw new Error(\"value hex must be even length: n=\" + t.length + \",v=\" + this.hV);\n    var r = this.hV.length / 2, i = r.toString(16);\n    if (i.length % 2 == 1 && (i = \"0\" + i), r < 128)\n      return i;\n    var s = i.length / 2;\n    if (s > 15)\n      throw new Error(\"ASN.1 length too long to represent by 8x: n = \" + r.toString(16));\n    var n = 128 + s;\n    return n.toString(16) + i;\n  }, this.tohex = function() {\n    return (this.hTLV == null || this.isModified) && (this.hV = this.getFreshValueHex(), this.hL = this.getLengthHexFromValue(), this.hTLV = this.hT + this.hL + this.hV, this.isModified = !1), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.getValueHex = function() {\n    return this.tohex(), this.hV;\n  }, this.getFreshValueHex = function() {\n    return \"\";\n  }, this.setByParam = function(r) {\n    this.params = r;\n  }, e != null && e.tlv != null && (this.hTLV = e.tlv, this.isModified = !1);\n};\na.asn1.DERAbstractString = function(e) {\n  a.asn1.DERAbstractString.superclass.constructor.call(this), this.getString = function() {\n    return this.s;\n  }, this.setString = function(t) {\n    this.hTLV = null, this.isModified = !0, this.s = t, this.hV = ht(this.s).toLowerCase();\n  }, this.setStringHex = function(t) {\n    this.hTLV = null, this.isModified = !0, this.s = null, this.hV = t;\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  }, typeof e < \"u\" && (typeof e == \"string\" ? this.setString(e) : typeof e.str < \"u\" ? this.setString(e.str) : typeof e.hex < \"u\" && this.setStringHex(e.hex));\n};\nN(a.asn1.DERAbstractString, a.asn1.ASN1Object);\na.asn1.DERAbstractTime = function(e) {\n  a.asn1.DERAbstractTime.superclass.constructor.call(this), this.localDateToUTC = function(t) {\n    var r = t.getTime() + t.getTimezoneOffset() * 6e4, i = new Date(r);\n    return i;\n  }, this.formatDate = function(t, r, i) {\n    var s = this.zeroPadding, n = this.localDateToUTC(t), h = String(n.getFullYear());\n    r == \"utc\" && (h = h.substr(2, 2));\n    var u = s(String(n.getMonth() + 1), 2), p = s(String(n.getDate()), 2), c = s(String(n.getHours()), 2), y = s(String(n.getMinutes()), 2), v = s(String(n.getSeconds()), 2), o = h + u + p + c + y + v;\n    if (i === !0) {\n      var l = n.getMilliseconds();\n      if (l != 0) {\n        var f = s(String(l), 3);\n        f = f.replace(/[0]+$/, \"\"), o = o + \".\" + f;\n      }\n    }\n    return o + \"Z\";\n  }, this.zeroPadding = function(t, r) {\n    return t.length >= r ? t : new Array(r - t.length + 1).join(\"0\") + t;\n  }, this.setByParam = function(t) {\n    this.hV = null, this.hTLV = null, this.params = t;\n  }, this.getString = function() {\n  }, this.setString = function(t) {\n    this.hTLV = null, this.isModified = !0, this.params == null && (this.params = {}), this.params.str = t;\n  }, this.setByDate = function(t) {\n    this.hTLV = null, this.isModified = !0, this.params == null && (this.params = {}), this.params.date = t;\n  }, this.setByDateValue = function(t, r, i, s, n, h) {\n    var u = new Date(Date.UTC(t, r - 1, i, s, n, h, 0));\n    this.setByDate(u);\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  };\n};\nN(a.asn1.DERAbstractTime, a.asn1.ASN1Object);\na.asn1.DERAbstractStructured = function(e) {\n  a.asn1.DERAbstractString.superclass.constructor.call(this), this.setByASN1ObjectArray = function(t) {\n    this.hTLV = null, this.isModified = !0, this.asn1Array = t;\n  }, this.appendASN1Object = function(t) {\n    this.hTLV = null, this.isModified = !0, this.asn1Array.push(t);\n  }, this.asn1Array = new Array(), typeof e < \"u\" && typeof e.array < \"u\" && (this.asn1Array = e.array);\n};\nN(a.asn1.DERAbstractStructured, a.asn1.ASN1Object);\na.asn1.DERBoolean = function(e) {\n  a.asn1.DERBoolean.superclass.constructor.call(this), this.hT = \"01\", e == !1 ? this.hTLV = \"010100\" : this.hTLV = \"0101ff\";\n};\nN(a.asn1.DERBoolean, a.asn1.ASN1Object);\na.asn1.DERInteger = function(e) {\n  a.asn1.DERInteger.superclass.constructor.call(this), this.hT = \"02\", this.params = null;\n  var t = Ze;\n  this.setByBigInteger = function(r) {\n    this.isModified = !0, this.params = { bigint: r };\n  }, this.setByInteger = function(r) {\n    this.isModified = !0, this.params = r;\n  }, this.setValueHex = function(r) {\n    this.isModified = !0, this.params = { hex: r };\n  }, this.getFreshValueHex = function() {\n    var r = this.params, i = null;\n    if (r == null)\n      throw new Error(\"value not set\");\n    if (typeof r == \"object\" && r.hex != null)\n      return this.hV = r.hex, this.hV;\n    if (typeof r == \"number\")\n      i = new R(String(r), 10);\n    else if (r.int != null)\n      i = new R(String(r.int), 10);\n    else if (r.bigint != null)\n      i = r.bigint;\n    else\n      throw new Error(\"wrong parameter\");\n    return this.hV = t(i), this.hV;\n  }, e != null && (this.params = e);\n};\nN(a.asn1.DERInteger, a.asn1.ASN1Object);\na.asn1.DERBitString = function(e) {\n  if (e !== void 0 && typeof e.obj < \"u\") {\n    var t = a.asn1.ASN1Util.newObject(e.obj);\n    e.hex = \"00\" + t.tohex();\n  }\n  a.asn1.DERBitString.superclass.constructor.call(this), this.hT = \"03\", this.setHexValueIncludingUnusedBits = function(r) {\n    this.hTLV = null, this.isModified = !0, this.hV = r;\n  }, this.setUnusedBitsAndHexValue = function(r, i) {\n    if (r < 0 || 7 < r)\n      throw \"unused bits shall be from 0 to 7: u = \" + r;\n    var s = \"0\" + r;\n    this.hTLV = null, this.isModified = !0, this.hV = s + i;\n  }, this.setByBinaryString = function(r) {\n    r = r.replace(/0+$/, \"\");\n    var i = 8 - r.length % 8;\n    i == 8 && (i = 0), r += \"0000000\".substr(0, i);\n    for (var s = \"\", n = 0; n < r.length - 1; n += 8) {\n      var h = r.substr(n, 8), u = parseInt(h, 2).toString(16);\n      u.length == 1 && (u = \"0\" + u), s += u;\n    }\n    this.hTLV = null, this.isModified = !0, this.hV = \"0\" + i + s;\n  }, this.setByBooleanArray = function(r) {\n    for (var i = \"\", s = 0; s < r.length; s++)\n      r[s] == !0 ? i += \"1\" : i += \"0\";\n    this.setByBinaryString(i);\n  }, this.newFalseArray = function(r) {\n    for (var i = new Array(r), s = 0; s < r; s++)\n      i[s] = !1;\n    return i;\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  }, typeof e < \"u\" && (typeof e == \"string\" && e.toLowerCase().match(/^[0-9a-f]+$/) ? this.setHexValueIncludingUnusedBits(e) : typeof e.hex < \"u\" ? this.setHexValueIncludingUnusedBits(e.hex) : typeof e.bin < \"u\" ? this.setByBinaryString(e.bin) : typeof e.array < \"u\" && this.setByBooleanArray(e.array));\n};\nN(a.asn1.DERBitString, a.asn1.ASN1Object);\na.asn1.DEROctetString = function(e) {\n  if (e !== void 0 && typeof e.obj < \"u\") {\n    var t = a.asn1.ASN1Util.newObject(e.obj);\n    e.hex = t.tohex();\n  }\n  a.asn1.DEROctetString.superclass.constructor.call(this, e), this.hT = \"04\";\n};\nN(a.asn1.DEROctetString, a.asn1.DERAbstractString);\na.asn1.DERNull = function() {\n  a.asn1.DERNull.superclass.constructor.call(this), this.hT = \"05\", this.hTLV = \"0500\";\n};\nN(a.asn1.DERNull, a.asn1.ASN1Object);\na.asn1.DERObjectIdentifier = function(e) {\n  a.asn1.DERObjectIdentifier.superclass.constructor.call(this), this.hT = \"06\", this.setValueHex = function(t) {\n    this.hTLV = null, this.isModified = !0, this.s = null, this.hV = t;\n  }, this.setValueOidString = function(t) {\n    var r = mn(t);\n    if (r == null)\n      throw new Error(\"malformed oid string: \" + t);\n    this.hTLV = null, this.isModified = !0, this.s = null, this.hV = r;\n  }, this.setValueName = function(t) {\n    var r = a.asn1.x509.OID.name2oid(t);\n    if (r !== \"\")\n      this.setValueOidString(r);\n    else\n      throw new Error(\"DERObjectIdentifier oidName undefined: \" + t);\n  }, this.setValueNameOrOid = function(t) {\n    t.match(/^[0-2].[0-9.]+$/) ? this.setValueOidString(t) : this.setValueName(t);\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  }, this.setByParam = function(t) {\n    typeof t == \"string\" ? this.setValueNameOrOid(t) : t.oid !== void 0 ? this.setValueNameOrOid(t.oid) : t.name !== void 0 ? this.setValueNameOrOid(t.name) : t.hex !== void 0 && this.setValueHex(t.hex);\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.DERObjectIdentifier, a.asn1.ASN1Object);\na.asn1.DEREnumerated = function(e) {\n  a.asn1.DEREnumerated.superclass.constructor.call(this), this.hT = \"0a\", this.setByBigInteger = function(t) {\n    this.hTLV = null, this.isModified = !0, this.hV = Ze(t);\n  }, this.setByInteger = function(t) {\n    var r = new R(String(t), 10);\n    this.setByBigInteger(r);\n  }, this.setValueHex = function(t) {\n    this.hV = t;\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  }, typeof e < \"u\" && (typeof e.int < \"u\" ? this.setByInteger(e.int) : typeof e == \"number\" ? this.setByInteger(e) : typeof e.hex < \"u\" && this.setValueHex(e.hex));\n};\nN(a.asn1.DEREnumerated, a.asn1.ASN1Object);\na.asn1.DERUTF8String = function(e) {\n  a.asn1.DERUTF8String.superclass.constructor.call(this, e), this.hT = \"0c\";\n};\nN(a.asn1.DERUTF8String, a.asn1.DERAbstractString);\na.asn1.DERNumericString = function(e) {\n  a.asn1.DERNumericString.superclass.constructor.call(this, e), this.hT = \"12\";\n};\nN(a.asn1.DERNumericString, a.asn1.DERAbstractString);\na.asn1.DERPrintableString = function(e) {\n  a.asn1.DERPrintableString.superclass.constructor.call(this, e), this.hT = \"13\";\n};\nN(a.asn1.DERPrintableString, a.asn1.DERAbstractString);\na.asn1.DERTeletexString = function(e) {\n  a.asn1.DERTeletexString.superclass.constructor.call(this, e), this.hT = \"14\";\n};\nN(a.asn1.DERTeletexString, a.asn1.DERAbstractString);\na.asn1.DERIA5String = function(e) {\n  a.asn1.DERIA5String.superclass.constructor.call(this, e), this.hT = \"16\";\n};\nN(a.asn1.DERIA5String, a.asn1.DERAbstractString);\na.asn1.DERVisibleString = function(e) {\n  a.asn1.DERIA5String.superclass.constructor.call(this, e), this.hT = \"1a\";\n};\nN(a.asn1.DERVisibleString, a.asn1.DERAbstractString);\na.asn1.DERBMPString = function(e) {\n  a.asn1.DERBMPString.superclass.constructor.call(this, e), this.hT = \"1e\";\n};\nN(a.asn1.DERBMPString, a.asn1.DERAbstractString);\na.asn1.DERUTCTime = function(e) {\n  a.asn1.DERUTCTime.superclass.constructor.call(this, e), this.hT = \"17\", this.params = void 0, this.getFreshValueHex = function() {\n    var t = this.params;\n    if (this.params == null && (t = { date: /* @__PURE__ */ new Date() }), typeof t == \"string\")\n      if (t.match(/^[0-9]{12}Z$/) || t.match(/^[0-9]{12}\\.[0-9]+Z$/))\n        this.hV = Ee(t);\n      else\n        throw new Error(\"malformed string for UTCTime: \" + t);\n    else if (t.str != null)\n      this.hV = Ee(t.str);\n    else if (t.date == null && t.millis == !0) {\n      var r = /* @__PURE__ */ new Date();\n      this.hV = Ee(this.formatDate(r, \"utc\", !0));\n    } else if (t.date != null && t.date instanceof Date) {\n      var i = t.millis === !0;\n      this.hV = Ee(this.formatDate(t.date, \"utc\", i));\n    } else\n      t instanceof Date && (this.hV = Ee(this.formatDate(t, \"utc\")));\n    if (this.hV == null)\n      throw new Error(\"parameter not specified properly for UTCTime\");\n    return this.hV;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.DERUTCTime, a.asn1.DERAbstractTime);\na.asn1.DERGeneralizedTime = function(e) {\n  a.asn1.DERGeneralizedTime.superclass.constructor.call(this, e), this.hT = \"18\", this.params = e, this.getFreshValueHex = function() {\n    var t = this.params;\n    if (this.params == null && (t = { date: /* @__PURE__ */ new Date() }), typeof t == \"string\")\n      if (t.match(/^[0-9]{14}Z$/) || t.match(/^[0-9]{14}\\.[0-9]+Z$/))\n        this.hV = Ee(t);\n      else\n        throw new Error(\"malformed string for GeneralizedTime: \" + t);\n    else if (t.str != null)\n      this.hV = Ee(t.str);\n    else if (t.date == null && t.millis == !0) {\n      var r = /* @__PURE__ */ new Date();\n      this.hV = Ee(this.formatDate(r, \"gen\", !0));\n    } else if (t.date != null && t.date instanceof Date) {\n      var i = t.millis === !0;\n      this.hV = Ee(this.formatDate(t.date, \"gen\", i));\n    } else\n      t instanceof Date && (this.hV = Ee(this.formatDate(t, \"gen\")));\n    if (this.hV == null)\n      throw new Error(\"parameter not specified properly for GeneralizedTime\");\n    return this.hV;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.DERGeneralizedTime, a.asn1.DERAbstractTime);\na.asn1.DERSequence = function(e) {\n  a.asn1.DERSequence.superclass.constructor.call(this, e), this.hT = \"30\", this.getFreshValueHex = function() {\n    for (var t = \"\", r = 0; r < this.asn1Array.length; r++) {\n      var i = this.asn1Array[r];\n      t += i.tohex();\n    }\n    return this.hV = t, this.hV;\n  };\n};\nN(a.asn1.DERSequence, a.asn1.DERAbstractStructured);\na.asn1.DERSet = function(e) {\n  a.asn1.DERSet.superclass.constructor.call(this, e), this.hT = \"31\", this.sortFlag = !0, this.getFreshValueHex = function() {\n    for (var t = new Array(), r = 0; r < this.asn1Array.length; r++) {\n      var i = this.asn1Array[r];\n      t.push(i.tohex());\n    }\n    return this.sortFlag == !0 && t.sort(), this.hV = t.join(\"\"), this.hV;\n  }, typeof e < \"u\" && typeof e.sortflag < \"u\" && e.sortflag == !1 && (this.sortFlag = !1);\n};\nN(a.asn1.DERSet, a.asn1.DERAbstractStructured);\na.asn1.DERTaggedObject = function(e) {\n  a.asn1.DERTaggedObject.superclass.constructor.call(this);\n  var t = a.asn1, r = V, i = r.getV;\n  r.isASN1HEX;\n  var s = t.ASN1Util.newObject;\n  this.hT = \"a0\", this.hV = \"\", this.isExplicit = !0, this.asn1Object = null, this.params = { tag: \"a0\", explicit: !0 }, this.setASN1Object = function(n, h, u) {\n    this.params = { tag: h, explicit: n, obj: u };\n  }, this.getFreshValueHex = function() {\n    var n = this.params;\n    if (n.explicit == null && (n.explicit = !0), n.tage != null && (n.tag = n.tage, n.explicit = !0), n.tagi != null && (n.tag = n.tagi, n.explicit = !1), n.str != null)\n      this.hV = ht(n.str);\n    else if (n.hex != null)\n      this.hV = n.hex;\n    else if (n.obj != null) {\n      var h;\n      n.obj instanceof t.ASN1Object ? h = n.obj.tohex() : typeof n.obj == \"object\" && (h = s(n.obj).tohex()), n.explicit ? this.hV = h : this.hV = i(h, 0);\n    } else\n      throw new Error(\"str, hex nor obj not specified\");\n    return n.tag == null && (n.tag = \"a0\"), this.hT = n.tag, this.hTLV = null, this.isModified = !0, this.hV;\n  }, this.setByParam = function(n) {\n    this.params = n;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.DERTaggedObject, a.asn1.ASN1Object);\nvar V = new function() {\n}();\nV.getLblen = function(e, t) {\n  if (e.substr(t + 2, 1) != \"8\")\n    return 1;\n  var r = parseInt(e.substr(t + 3, 1));\n  return r == 0 ? -1 : 0 < r && r < 10 ? r + 1 : -2;\n};\nV.getL = function(e, t) {\n  var r = V.getLblen(e, t);\n  return r < 1 ? \"\" : e.substr(t + 2, r * 2);\n};\nV.getVblen = function(e, t) {\n  var r, i;\n  return r = V.getL(e, t), r == \"\" ? -1 : (r.substr(0, 1) === \"8\" ? i = new R(r.substr(2), 16) : i = new R(r, 16), i.intValue());\n};\nV.getVidx = function(e, t) {\n  var r = V.getLblen(e, t);\n  return r < 0 ? r : t + (r + 1) * 2;\n};\nV.getV = function(e, t) {\n  var r = V.getVidx(e, t), i = V.getVblen(e, t);\n  return e.substr(r, i * 2);\n};\nV.getTLV = function(e, t) {\n  return e.substr(t, 2) + V.getL(e, t) + V.getV(e, t);\n};\nV.getTLVblen = function(e, t) {\n  return 2 + V.getLblen(e, t) * 2 + V.getVblen(e, t) * 2;\n};\nV.getNextSiblingIdx = function(e, t) {\n  var r = V.getVidx(e, t), i = V.getVblen(e, t);\n  return r + i * 2;\n};\nV.getChildIdx = function(e, t) {\n  var r = V, i = [], s, n, h;\n  s = r.getVidx(e, t), n = r.getVblen(e, t) * 2, e.substr(t, 2) == \"03\" && (s += 2, n -= 2), h = 0;\n  for (var u = s; h <= n; ) {\n    var p = r.getTLVblen(e, u);\n    if (h += p, h <= n && i.push(u), u += p, h >= n)\n      break;\n  }\n  return i;\n};\nV.getNthChildIdx = function(e, t, r) {\n  var i = V.getChildIdx(e, t);\n  return i[r];\n};\nV.getIdxbyList = function(e, t, r, i) {\n  var s = V, n, h;\n  return r.length == 0 ? i !== void 0 && e.substr(t, 2) !== i ? -1 : t : (n = r.shift(), h = s.getChildIdx(e, t), n >= h.length ? -1 : s.getIdxbyList(e, h[n], r, i));\n};\nV.getIdxbyListEx = function(e, t, r, i) {\n  var s = V, n, h;\n  if (r.length == 0)\n    return i !== void 0 && e.substr(t, 2) !== i ? -1 : t;\n  n = r.shift(), h = s.getChildIdx(e, t);\n  for (var u = 0, p = 0; p < h.length; p++) {\n    var c = e.substr(h[p], 2);\n    if (typeof n == \"number\" && !s.isContextTag(c) && u == n || typeof n == \"string\" && s.isContextTag(c, n))\n      return s.getIdxbyListEx(e, h[p], r, i);\n    s.isContextTag(c) || u++;\n  }\n  return -1;\n};\nV.getTLVbyList = function(e, t, r, i) {\n  var s = V, n = s.getIdxbyList(e, t, r, i);\n  return n == -1 || n >= e.length ? null : s.getTLV(e, n);\n};\nV.getTLVbyListEx = function(e, t, r, i) {\n  var s = V, n = s.getIdxbyListEx(e, t, r, i);\n  return n == -1 ? null : s.getTLV(e, n);\n};\nV.getVbyList = function(e, t, r, i, s) {\n  var n = V, h, u;\n  return h = n.getIdxbyList(e, t, r, i), h == -1 || h >= e.length ? null : (u = n.getV(e, h), s === !0 && (u = u.substr(2)), u);\n};\nV.getVbyListEx = function(e, t, r, i, s) {\n  var n = V, h, u;\n  return h = n.getIdxbyListEx(e, t, r, i), h == -1 ? null : (u = n.getV(e, h), e.substr(h, 2) == \"03\" && s !== !1 && (u = u.substr(2)), u);\n};\nV.getInt = function(e, t, r) {\n  r == null && (r = -1);\n  try {\n    var i = e.substr(t, 2);\n    if (i != \"02\" && i != \"03\")\n      return r;\n    var s = V.getV(e, t);\n    return i == \"02\" ? parseInt(s, 16) : Sn(s);\n  } catch {\n    return r;\n  }\n};\nV.getOID = function(e, t, r) {\n  r == null && (r = null);\n  try {\n    if (e.substr(t, 2) != \"06\")\n      return r;\n    var i = V.getV(e, t);\n    return ft(i);\n  } catch {\n    return r;\n  }\n};\nV.getOIDName = function(e, t, r) {\n  r == null && (r = null);\n  try {\n    var i = V.getOID(e, t, r);\n    if (i == r)\n      return r;\n    var s = a.asn1.x509.OID.oid2name(i);\n    return s == \"\" ? i : s;\n  } catch {\n    return r;\n  }\n};\nV.getString = function(e, t, r) {\n  r == null && (r = null);\n  try {\n    var i = V.getV(e, t);\n    return Ae(i);\n  } catch {\n    return r;\n  }\n};\nV.hextooidstr = function(e) {\n  var t = function(v, o) {\n    return v.length >= o ? v : new Array(o - v.length + 1).join(\"0\") + v;\n  }, r = [], i = e.substr(0, 2), s = parseInt(i, 16);\n  r[0] = new String(Math.floor(s / 40)), r[1] = new String(s % 40);\n  for (var n = e.substr(2), h = [], u = 0; u < n.length / 2; u++)\n    h.push(parseInt(n.substr(u * 2, 2), 16));\n  for (var p = [], c = \"\", u = 0; u < h.length; u++)\n    h[u] & 128 ? c = c + t((h[u] & 127).toString(2), 7) : (c = c + t((h[u] & 127).toString(2), 7), p.push(new String(parseInt(c, 2))), c = \"\");\n  var y = r.join(\".\");\n  return p.length > 0 && (y = y + \".\" + p.join(\".\")), y;\n};\nV.dump = function(e, t, r, i) {\n  var s = V, n = s.getV, h = s.dump, u = s.getChildIdx, p = e;\n  e instanceof a.asn1.ASN1Object && (p = e.tohex());\n  var c = function(E, w) {\n    if (E.length <= w * 2)\n      return E;\n    var x = E.substr(0, w) + \"..(total \" + E.length / 2 + \"bytes)..\" + E.substr(E.length - w, w);\n    return x;\n  };\n  t === void 0 && (t = { ommit_long_octet: 32 }), r === void 0 && (r = 0), i === void 0 && (i = \"\");\n  var y = t.ommit_long_octet, I = p.substr(r, 2);\n  if (I == \"01\") {\n    var v = n(p, r);\n    return v == \"00\" ? i + `BOOLEAN FALSE\n` : i + `BOOLEAN TRUE\n`;\n  }\n  if (I == \"02\") {\n    var v = n(p, r);\n    return i + \"INTEGER \" + c(v, y) + `\n`;\n  }\n  if (I == \"03\") {\n    var v = n(p, r);\n    if (s.isASN1HEX(v.substr(2))) {\n      var o = i + `BITSTRING, encapsulates\n`;\n      return o = o + h(v.substr(2), t, 0, i + \"  \"), o;\n    } else\n      return i + \"BITSTRING \" + c(v, y) + `\n`;\n  }\n  if (I == \"04\") {\n    var v = n(p, r);\n    if (s.isASN1HEX(v)) {\n      var o = i + `OCTETSTRING, encapsulates\n`;\n      return o = o + h(v, t, 0, i + \"  \"), o;\n    } else\n      return i + \"OCTETSTRING \" + c(v, y) + `\n`;\n  }\n  if (I == \"05\")\n    return i + `NULL\n`;\n  if (I == \"06\") {\n    var l = n(p, r), f = a.asn1.ASN1Util.oidHexToInt(l), d = a.asn1.x509.OID.oid2name(f), g = f.replace(/\\./g, \" \");\n    return d != \"\" ? i + \"ObjectIdentifier \" + d + \" (\" + g + `)\n` : i + \"ObjectIdentifier (\" + g + `)\n`;\n  }\n  if (I == \"0a\")\n    return i + \"ENUMERATED \" + parseInt(n(p, r)) + `\n`;\n  if (I == \"0c\")\n    return i + \"UTF8String '\" + W(n(p, r)) + `'\n`;\n  if (I == \"13\")\n    return i + \"PrintableString '\" + W(n(p, r)) + `'\n`;\n  if (I == \"14\")\n    return i + \"TeletexString '\" + W(n(p, r)) + `'\n`;\n  if (I == \"16\")\n    return i + \"IA5String '\" + W(n(p, r)) + `'\n`;\n  if (I == \"17\")\n    return i + \"UTCTime \" + W(n(p, r)) + `\n`;\n  if (I == \"18\")\n    return i + \"GeneralizedTime \" + W(n(p, r)) + `\n`;\n  if (I == \"1a\")\n    return i + \"VisualString '\" + W(n(p, r)) + `'\n`;\n  if (I == \"1e\")\n    return i + \"BMPString '\" + Tt(n(p, r)) + `'\n`;\n  if (I == \"30\") {\n    if (p.substr(r, 4) == \"3000\")\n      return i + `SEQUENCE {}\n`;\n    var o = i + `SEQUENCE\n`, S = u(p, r), b = t;\n    if ((S.length == 2 || S.length == 3) && p.substr(S[0], 2) == \"06\" && p.substr(S[S.length - 1], 2) == \"04\") {\n      var d = s.oidname(n(p, S[0])), D = JSON.parse(JSON.stringify(t));\n      D.x509ExtName = d, b = D;\n    }\n    for (var A = 0; A < S.length; A++)\n      o = o + h(p, b, S[A], i + \"  \");\n    return o;\n  }\n  if (I == \"31\") {\n    for (var o = i + `SET\n`, S = u(p, r), A = 0; A < S.length; A++)\n      o = o + h(p, t, S[A], i + \"  \");\n    return o;\n  }\n  var I = parseInt(I, 16);\n  if (I & 128) {\n    var m = I & 31;\n    if (I & 32) {\n      for (var o = i + \"[\" + m + `]\n`, S = u(p, r), A = 0; A < S.length; A++)\n        o = o + h(p, t, S[A], i + \"  \");\n      return o;\n    } else {\n      var v = n(p, r);\n      if (V.isASN1HEX(v)) {\n        var o = i + \"[\" + m + `]\n`;\n        return o = o + h(v, t, 0, i + \"  \"), o;\n      } else\n        (v.substr(0, 8) == \"68747470\" || t.x509ExtName === \"subjectAltName\" && m == 2) && (v = W(v));\n      var o = i + \"[\" + m + \"] \" + v + `\n`;\n      return o;\n    }\n  }\n  return i + \"UNKNOWN(\" + I + \") \" + n(p, r) + `\n`;\n};\nV.parse = function(e) {\n  var t = V, r = t.parse, i = t.isASN1HEX, s = t.getV, n = t.getTLV, h = t.getChildIdx, u = a.asn1, p = u.ASN1Util.oidHexToInt, c = u.x509.OID.oid2name, y = W, v = Tt, o = fn, l = { \"0c\": \"utf8str\", 12: \"numstr\", 13: \"prnstr\", 14: \"telstr\", 16: \"ia5str\", 17: \"utctime\", 18: \"gentime\", \"1a\": \"visstr\", \"1e\": \"bmpstr\", 30: \"seq\", 31: \"set\" }, f = function(x) {\n    for (var F = [], P = h(x, 0), T = 0; T < P.length; T++) {\n      var H = P[T], C = n(x, H), B = r(C);\n      F.push(B);\n    }\n    return F;\n  }, d = e.substr(0, 2), g = {}, S = s(e, 0);\n  if (d == \"01\")\n    return e == \"0101ff\" ? { bool: !0 } : { bool: !1 };\n  if (d == \"02\")\n    return { int: { hex: S } };\n  if (d == \"03\")\n    try {\n      if (S.substr(0, 2) != \"00\")\n        throw \"not encap\";\n      var b = S.substr(2);\n      if (!i(b))\n        throw \"not encap\";\n      return { bitstr: { obj: r(b) } };\n    } catch {\n      var D = null;\n      return S.length <= 10 && (D = En(S)), D == null ? { bitstr: { hex: S } } : { bitstr: { bin: D } };\n    }\n  else if (d == \"04\")\n    try {\n      if (!i(S))\n        throw \"not encap\";\n      return { octstr: { obj: r(S) } };\n    } catch {\n      return { octstr: { hex: S } };\n    }\n  else {\n    if (d == \"05\")\n      return { null: \"\" };\n    if (d == \"06\") {\n      var A = p(S), I = c(A);\n      return I == \"\" ? { oid: A } : { oid: I };\n    } else {\n      if (d == \"0a\")\n        return S.length > 4 ? { enum: { hex: S } } : { enum: parseInt(S, 16) };\n      if (d == \"30\" || d == \"31\")\n        return g[l[d]] = f(e), g;\n      if (d == \"14\") {\n        var m = o(S);\n        return g[l[d]] = { str: m }, g;\n      } else if (d == \"1e\") {\n        var m = v(S);\n        return g[l[d]] = { str: m }, g;\n      } else if (\":0c:12:13:16:17:18:1a:\".indexOf(d) != -1) {\n        var m = y(S);\n        return g[l[d]] = { str: m }, g;\n      } else if (d.match(/^8[0-9]$/)) {\n        var m = y(S);\n        return m == null | m == \"\" ? { tag: { tag: d, explicit: !1, hex: S } } : m.match(/[\\x00-\\x1F\\x7F-\\x9F]/) != null || m.match(/[\\u0000-\\u001F\\u0080\\u009F]/) != null ? { tag: { tag: d, explicit: !1, hex: S } } : { tag: { tag: d, explicit: !1, str: m } };\n      } else if (d.match(/^a[0-9]$/))\n        try {\n          if (!i(S))\n            throw new Error(\"not encap\");\n          return { tag: { tag: d, explicit: !0, obj: r(S) } };\n        } catch {\n          return { tag: { tag: d, explicit: !0, hex: S } };\n        }\n      else {\n        var E = new a.asn1.ASN1Object();\n        E.hV = S;\n        var w = E.getLengthHexFromValue();\n        return { asn1: { tlv: d + w + S } };\n      }\n    }\n  }\n};\nV.isContextTag = function(e, t) {\n  e = e.toLowerCase();\n  var r, i;\n  try {\n    r = parseInt(e, 16);\n  } catch {\n    return -1;\n  }\n  if (t === void 0)\n    return (r & 192) == 128;\n  try {\n    var s = t.match(/^\\[[0-9]+\\]$/);\n    return s == null || (i = parseInt(t.substr(1, t.length - 1), 10), i > 31) ? !1 : (r & 192) == 128 && (r & 31) == i;\n  } catch {\n    return !1;\n  }\n};\nV.isASN1HEX = function(e) {\n  var t = V;\n  if (e.length % 2 == 1)\n    return !1;\n  var r = t.getVblen(e, 0), i = e.substr(0, 2), s = t.getL(e, 0), n = e.length - i.length - s.length;\n  return n == r * 2;\n};\nV.checkStrictDER = function(e, t, r, i, s) {\n  var n = V;\n  if (r === void 0) {\n    if (typeof e != \"string\")\n      throw new Error(\"not hex string\");\n    if (e = e.toLowerCase(), !a.lang.String.isHex(e))\n      throw new Error(\"not hex string\");\n    r = e.length, i = e.length / 2, i < 128 ? s = 1 : s = Math.ceil(i.toString(16)) + 1;\n  }\n  var h = n.getL(e, t);\n  if (h.length > s * 2)\n    throw new Error(\"L of TLV too long: idx=\" + t);\n  var u = n.getVblen(e, t);\n  if (u > i)\n    throw new Error(\"value of L too long than hex: idx=\" + t);\n  var p = n.getTLV(e, t), c = p.length - 2 - n.getL(e, t).length;\n  if (c !== u * 2)\n    throw new Error(\"V string length and L's value not the same:\" + c + \"/\" + u * 2);\n  if (t === 0 && e.length != p.length)\n    throw new Error(\"total length and TLV length unmatch:\" + e.length + \"!=\" + p.length);\n  var y = e.substr(t, 2);\n  if (y === \"02\") {\n    var v = n.getVidx(e, t);\n    if (e.substr(v, 2) == \"00\" && e.charCodeAt(v + 2) < 56)\n      throw new Error(\"not least zeros for DER INTEGER\");\n  }\n  if (parseInt(y, 16) & 32) {\n    for (var o = n.getVblen(e, t), l = 0, f = n.getChildIdx(e, t), d = 0; d < f.length; d++) {\n      var g = n.getTLV(e, f[d]);\n      l += g.length, n.checkStrictDER(e, f[d], r, i, s);\n    }\n    if (o * 2 != l)\n      throw new Error(\"sum of children's TLV length and L unmatch: \" + o * 2 + \"!=\" + l);\n  }\n};\nV.oidname = function(e) {\n  var t = a.asn1;\n  a.lang.String.isHex(e) && (e = t.ASN1Util.oidHexToInt(e));\n  var r = t.x509.OID.oid2name(e);\n  return r === \"\" && (r = e), r;\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.x509 > \"u\" || !a.asn1.x509) && (a.asn1.x509 = {});\na.asn1.x509.Certificate = function(e) {\n  a.asn1.x509.Certificate.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERBitString, s = r.DERSequence, n = r.x509, h = n.TBSCertificate, u = n.AlgorithmIdentifier;\n  this.params = void 0, this.setByParam = function(p) {\n    this.params = p;\n  }, this.sign = function() {\n    var p = this.params, c = p.sigalg;\n    p.sigalg.name != null && (c = p.sigalg.name);\n    var y = p.tbsobj.tohex(), v = new a.crypto.Signature({ alg: c });\n    v.init(p.cakey), v.updateHex(y), p.sighex = v.sign();\n  }, this.getPEM = function() {\n    return de(this.tohex(), \"CERTIFICATE\");\n  }, this.tohex = function() {\n    var p = this.params;\n    if ((p.tbsobj == null || p.tbsobj == null) && (p.tbsobj = new h(p)), p.sighex == null && p.cakey != null && this.sign(), p.sighex == null)\n      throw new Error(\"sighex or cakey parameter not defined\");\n    var c = [];\n    c.push(p.tbsobj), c.push(new u({ name: p.sigalg })), c.push(new i({ hex: \"00\" + p.sighex }));\n    var y = new s({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && (this.params = e);\n};\nN(a.asn1.x509.Certificate, a.asn1.ASN1Object);\na.asn1.x509.TBSCertificate = function(e) {\n  a.asn1.x509.TBSCertificate.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.x509, s = r.DERTaggedObject, n = r.DERInteger, h = r.DERSequence, u = i.AlgorithmIdentifier, p = i.Time, c = i.X500Name, y = i.Extensions, v = i.SubjectPublicKeyInfo;\n  this.params = null, this.setByParam = function(o) {\n    this.params = o;\n  }, this.tohex = function() {\n    var o = [], l = this.params;\n    if (l.version != null || l.version != 1) {\n      var f = 2;\n      l.version != null && (f = l.version - 1);\n      var d = new s({ obj: new n({ int: f }) });\n      o.push(d);\n    }\n    o.push(new n(l.serial)), o.push(new u({ name: l.sigalg })), o.push(new c(l.issuer)), o.push(new h({ array: [new p(l.notbefore), new p(l.notafter)] })), o.push(new c(l.subject)), o.push(new v(k.getKey(l.sbjpubkey))), l.ext !== void 0 && l.ext.length > 0 && o.push(new s({ tag: \"a3\", obj: new y(l.ext) }));\n    var g = new a.asn1.DERSequence({ array: o });\n    return g.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.TBSCertificate, a.asn1.ASN1Object);\na.asn1.x509.Extensions = function(e) {\n  a.asn1.x509.Extensions.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.x509;\n  this.aParam = [], this.setByParam = function(n) {\n    this.aParam = n;\n  }, this.tohex = function() {\n    for (var n = [], h = 0; h < this.aParam.length; h++) {\n      var u = this.aParam[h], p = u.extname, c = null;\n      if (u.extn != null)\n        c = new s.PrivateExtension(u);\n      else if (p == \"subjectKeyIdentifier\")\n        c = new s.SubjectKeyIdentifier(u);\n      else if (p == \"keyUsage\")\n        c = new s.KeyUsage(u);\n      else if (p == \"subjectAltName\")\n        c = new s.SubjectAltName(u);\n      else if (p == \"issuerAltName\")\n        c = new s.IssuerAltName(u);\n      else if (p == \"basicConstraints\")\n        c = new s.BasicConstraints(u);\n      else if (p == \"nameConstraints\")\n        c = new s.NameConstraints(u);\n      else if (p == \"cRLDistributionPoints\")\n        c = new s.CRLDistributionPoints(u);\n      else if (p == \"certificatePolicies\")\n        c = new s.CertificatePolicies(u);\n      else if (p == \"policyMappings\")\n        c = new s.PolicyMappings(u);\n      else if (p == \"policyConstraints\")\n        c = new s.PolicyConstraints(u);\n      else if (p == \"inhibitAnyPolicy\")\n        c = new s.InhibitAnyPolicy(u);\n      else if (p == \"authorityKeyIdentifier\")\n        c = new s.AuthorityKeyIdentifier(u);\n      else if (p == \"extKeyUsage\")\n        c = new s.ExtKeyUsage(u);\n      else if (p == \"authorityInfoAccess\")\n        c = new s.AuthorityInfoAccess(u);\n      else if (p == \"cRLNumber\")\n        c = new s.CRLNumber(u);\n      else if (p == \"cRLReason\")\n        c = new s.CRLReason(u);\n      else if (p == \"ocspNonce\")\n        c = new s.OCSPNonce(u);\n      else if (p == \"ocspNoCheck\")\n        c = new s.OCSPNoCheck(u);\n      else if (p == \"adobeTimeStamp\")\n        c = new s.AdobeTimeStamp(u);\n      else if (p == \"subjectDirectoryAttributes\")\n        c = new s.SubjectDirectoryAttributes(u);\n      else\n        throw new Error(\"extension not supported:\" + JSON.stringify(u));\n      c != null && n.push(c);\n    }\n    var y = new i({ array: n });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.x509.Extensions, a.asn1.ASN1Object);\na.asn1.x509.Extension = function(e) {\n  a.asn1.x509.Extension.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERObjectIdentifier, s = r.DEROctetString;\n  r.DERBitString;\n  var n = r.DERBoolean, h = r.DERSequence;\n  this.tohex = function() {\n    var u = new i({ oid: this.oid }), p = new s({ hex: this.getExtnValueHex() }), c = new Array();\n    c.push(u), this.critical && c.push(new n()), c.push(p);\n    var y = new h({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.critical = !1, e !== void 0 && e.critical !== void 0 && (this.critical = e.critical);\n};\nN(a.asn1.x509.Extension, a.asn1.ASN1Object);\na.asn1.x509.KeyUsage = function(e) {\n  a.asn1.x509.KeyUsage.superclass.constructor.call(this, e);\n  var t = Error, r = { digitalSignature: 0, nonRepudiation: 1, keyEncipherment: 2, dataEncipherment: 3, keyAgreement: 4, keyCertSign: 5, cRLSign: 6, encipherOnly: 7, decipherOnly: 8 };\n  this.getExtnValueHex = function() {\n    var i = this.getBinValue();\n    return this.asn1ExtnValue = new a.asn1.DERBitString({ bin: i }), this.asn1ExtnValue.tohex();\n  }, this.getBinValue = function() {\n    var i = this.params;\n    if (typeof i != \"object\" || typeof i.names != \"object\" && typeof i.bin != \"string\")\n      throw new t(\"parameter not yet set\");\n    if (i.names != null)\n      return rt(i.names, r);\n    if (i.bin != null)\n      return i.bin;\n    throw new t(\"parameter not set properly\");\n  }, this.oid = \"2.5.29.15\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.KeyUsage, a.asn1.x509.Extension);\na.asn1.x509.BasicConstraints = function(e) {\n  a.asn1.x509.BasicConstraints.superclass.constructor.call(this, e);\n  var t = a.asn1, r = t.DERBoolean, i = t.DERInteger, s = t.DERSequence;\n  this.getExtnValueHex = function() {\n    var n = new Array();\n    this.cA && n.push(new r()), this.pathLen > -1 && n.push(new i({ int: this.pathLen }));\n    var h = new s({ array: n });\n    return this.asn1ExtnValue = h, this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.19\", this.cA = !1, this.pathLen = -1, e !== void 0 && (e.cA !== void 0 && (this.cA = e.cA), e.pathLen !== void 0 && (this.pathLen = e.pathLen));\n};\nN(a.asn1.x509.BasicConstraints, a.asn1.x509.Extension);\na.asn1.x509.CRLDistributionPoints = function(e) {\n  a.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.x509;\n  this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.setByDPArray = function(s) {\n    for (var n = [], h = 0; h < s.length; h++)\n      if (s[h] instanceof a.asn1.ASN1Object)\n        n.push(s[h]);\n      else {\n        var u = new i.DistributionPoint(s[h]);\n        n.push(u);\n      }\n    this.asn1ExtnValue = new r.DERSequence({ array: n });\n  }, this.setByOneURI = function(s) {\n    var n = new i.DistributionPoint({ fulluri: s });\n    this.setByDPArray([n]);\n  }, this.oid = \"2.5.29.31\", e !== void 0 && (e.array !== void 0 ? this.setByDPArray(e.array) : e.uri !== void 0 && this.setByOneURI(e.uri));\n};\nN(a.asn1.x509.CRLDistributionPoints, a.asn1.x509.Extension);\na.asn1.x509.DistributionPoint = function(e) {\n  a.asn1.x509.DistributionPoint.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.x509.DistributionPointName;\n  this.tohex = function() {\n    var s = new r.DERSequence();\n    if (this.asn1DP != null) {\n      var n = new r.DERTaggedObject({ explicit: !0, tag: \"a0\", obj: this.asn1DP });\n      s.appendASN1Object(n);\n    }\n    return this.hTLV = s.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (e.dpobj !== void 0 ? this.asn1DP = e.dpobj : e.dpname !== void 0 ? this.asn1DP = new i(e.dpname) : e.fulluri !== void 0 && (this.asn1DP = new i({ full: [{ uri: e.fulluri }] })));\n};\nN(a.asn1.x509.DistributionPoint, a.asn1.ASN1Object);\na.asn1.x509.DistributionPointName = function(e) {\n  a.asn1.x509.DistributionPointName.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERTaggedObject;\n  if (this.tohex = function() {\n    if (this.type != \"full\")\n      throw new Error(\"currently type shall be 'full': \" + this.type);\n    return this.asn1Obj = new i({ explicit: !1, tag: this.tag, obj: this.asn1V }), this.hTLV = this.asn1Obj.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0)\n    if (r.x509.GeneralNames.prototype.isPrototypeOf(e))\n      this.type = \"full\", this.tag = \"a0\", this.asn1V = e;\n    else if (e.full !== void 0)\n      this.type = \"full\", this.tag = \"a0\", this.asn1V = new r.x509.GeneralNames(e.full);\n    else\n      throw new Error(\"This class supports GeneralNames only as argument\");\n};\nN(a.asn1.x509.DistributionPointName, a.asn1.ASN1Object);\na.asn1.x509.CertificatePolicies = function(e) {\n  a.asn1.x509.CertificatePolicies.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.x509, s = r.DERSequence, n = i.PolicyInformation;\n  this.params = null, this.getExtnValueHex = function() {\n    for (var h = [], u = 0; u < this.params.array.length; u++)\n      h.push(new n(this.params.array[u]));\n    var p = new s({ array: h });\n    return this.asn1ExtnValue = p, this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.32\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.CertificatePolicies, a.asn1.x509.Extension);\na.asn1.x509.PolicyInformation = function(e) {\n  a.asn1.x509.PolicyInformation.superclass.constructor.call(this, e);\n  var t = a.asn1, r = t.DERSequence, i = t.DERObjectIdentifier, s = t.x509.PolicyQualifierInfo;\n  this.params = null, this.tohex = function() {\n    if (this.params.policyoid === void 0 && this.params.array === void 0)\n      throw new Error(\"parameter oid and array missing\");\n    var n = [new i(this.params.policyoid)];\n    if (this.params.array !== void 0) {\n      for (var h = [], u = 0; u < this.params.array.length; u++)\n        h.push(new s(this.params.array[u]));\n      h.length > 0 && n.push(new r({ array: h }));\n    }\n    var p = new r({ array: n });\n    return p.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.PolicyInformation, a.asn1.ASN1Object);\na.asn1.x509.PolicyQualifierInfo = function(e) {\n  a.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this, e);\n  var t = a.asn1, r = t.DERSequence, i = t.DERIA5String, s = t.DERObjectIdentifier, n = t.x509.UserNotice;\n  this.params = null, this.tohex = function() {\n    if (this.params.cps !== void 0) {\n      var h = new r({ array: [new s({ oid: \"1.3.6.1.5.5.7.2.1\" }), new i({ str: this.params.cps })] });\n      return h.tohex();\n    }\n    if (this.params.unotice != null) {\n      var h = new r({ array: [new s({ oid: \"1.3.6.1.5.5.7.2.2\" }), new n(this.params.unotice)] });\n      return h.tohex();\n    }\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.PolicyQualifierInfo, a.asn1.ASN1Object);\na.asn1.x509.UserNotice = function(e) {\n  a.asn1.x509.UserNotice.superclass.constructor.call(this, e);\n  var t = a.asn1.DERSequence;\n  a.asn1.DERInteger;\n  var r = a.asn1.x509.DisplayText, i = a.asn1.x509.NoticeReference;\n  this.params = null, this.tohex = function() {\n    var s = [];\n    this.params.noticeref !== void 0 && s.push(new i(this.params.noticeref)), this.params.exptext !== void 0 && s.push(new r(this.params.exptext));\n    var n = new t({ array: s });\n    return n.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.UserNotice, a.asn1.ASN1Object);\na.asn1.x509.NoticeReference = function(e) {\n  a.asn1.x509.NoticeReference.superclass.constructor.call(this, e);\n  var t = a.asn1.DERSequence, r = a.asn1.DERInteger, i = a.asn1.x509.DisplayText;\n  this.params = null, this.tohex = function() {\n    var s = [];\n    if (this.params.org !== void 0 && s.push(new i(this.params.org)), this.params.noticenum !== void 0) {\n      for (var n = [], h = this.params.noticenum, u = 0; u < h.length; u++)\n        n.push(new r(h[u]));\n      s.push(new t({ array: n }));\n    }\n    if (s.length == 0)\n      throw new Error(\"parameter is empty\");\n    var p = new t({ array: s });\n    return p.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.NoticeReference, a.asn1.ASN1Object);\na.asn1.x509.DisplayText = function(e) {\n  a.asn1.x509.DisplayText.superclass.constructor.call(this, e), this.hT = \"0c\", e !== void 0 && (e.type === \"ia5\" ? this.hT = \"16\" : e.type === \"vis\" ? this.hT = \"1a\" : e.type === \"bmp\" && (this.hT = \"1e\"));\n};\nN(a.asn1.x509.DisplayText, a.asn1.DERAbstractString);\na.asn1.x509.PolicyMappings = function(e) {\n  a.asn1.x509.PolicyMappings.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1;\n  r.x509;\n  var i = r.ASN1Util.newObject;\n  this.params = null, this.getExtnValueHex = function() {\n    for (var s = this.params, n = [], h = 0; h < s.array.length; h++) {\n      var u = s.array[h];\n      n.push({ seq: [{ oid: u[0] }, { oid: u[1] }] });\n    }\n    return this.asn1ExtnValue = i({ seq: n }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.33\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.PolicyMappings, a.asn1.x509.Extension);\na.asn1.x509.PolicyConstraints = function(e) {\n  a.asn1.x509.PolicyConstraints.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1;\n  r.x509;\n  var i = r.ASN1Util.newObject;\n  this.params = null, this.getExtnValueHex = function() {\n    var s = this.params, n = [];\n    return s.reqexp != null && n.push({ tag: { tagi: \"80\", obj: { int: s.reqexp } } }), s.inhibit != null && n.push({ tag: { tagi: \"81\", obj: { int: s.inhibit } } }), this.asn1ExtnValue = i({ seq: n }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.36\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.PolicyConstraints, a.asn1.x509.Extension);\na.asn1.x509.InhibitAnyPolicy = function(e) {\n  a.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1;\n  r.x509;\n  var i = r.ASN1Util.newObject;\n  this.params = null, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = i({ int: this.params.skip }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.54\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.InhibitAnyPolicy, a.asn1.x509.Extension);\na.asn1.x509.NameConstraints = function(e) {\n  a.asn1.x509.NameConstraints.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.x509, s = r.ASN1Util.newObject, n = i.GeneralSubtree;\n  this.params = null, this.getExtnValueHex = function() {\n    var h = this.params, u = [];\n    if (h.permit != null && h.permit.length != null) {\n      for (var p = [], c = 0; c < h.permit.length; c++)\n        p.push(new n(h.permit[c]));\n      u.push({ tag: { tagi: \"a0\", obj: { seq: p } } });\n    }\n    if (h.exclude != null && h.exclude.length != null) {\n      for (var y = [], c = 0; c < h.exclude.length; c++)\n        y.push(new n(h.exclude[c]));\n      u.push({ tag: { tagi: \"a1\", obj: { seq: y } } });\n    }\n    return this.asn1ExtnValue = s({ seq: u }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.30\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.NameConstraints, a.asn1.x509.Extension);\na.asn1.x509.GeneralSubtree = function(e) {\n  a.asn1.x509.GeneralSubtree.superclass.constructor.call(this);\n  var t = a.asn1, r = t.x509, i = r.GeneralName, s = t.ASN1Util.newObject;\n  this.params = null, this.setByParam = function(n) {\n    this.params = n;\n  }, this.tohex = function() {\n    var n = this.params, h = [new i(n)];\n    n.min != null && h.push({ tag: { tagi: \"80\", obj: { int: n.min } } }), n.max != null && h.push({ tag: { tagi: \"81\", obj: { int: n.max } } });\n    var u = s({ seq: h });\n    return u.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.GeneralSubtree, a.asn1.ASN1Object);\na.asn1.x509.ExtKeyUsage = function(e) {\n  a.asn1.x509.ExtKeyUsage.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1;\n  this.setPurposeArray = function(i) {\n    this.asn1ExtnValue = new r.DERSequence();\n    for (var s = 0; s < i.length; s++) {\n      var n = new r.DERObjectIdentifier(i[s]);\n      this.asn1ExtnValue.appendASN1Object(n);\n    }\n  }, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.37\", e !== void 0 && e.array !== void 0 && this.setPurposeArray(e.array);\n};\nN(a.asn1.x509.ExtKeyUsage, a.asn1.x509.Extension);\na.asn1.x509.AuthorityKeyIdentifier = function(e) {\n  a.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.DERTaggedObject, s = r.x509.GeneralNames;\n  t.crypto.Util.isKey, this.asn1KID = null, this.asn1CertIssuer = null, this.asn1CertSN = null, this.getExtnValueHex = function() {\n    var n = new Array();\n    this.asn1KID && n.push(new i({ explicit: !1, tag: \"80\", obj: this.asn1KID })), this.asn1CertIssuer && n.push(new i({ explicit: !1, tag: \"a1\", obj: new s([{ dn: this.asn1CertIssuer }]) })), this.asn1CertSN && n.push(new i({ explicit: !1, tag: \"82\", obj: this.asn1CertSN }));\n    var h = new r.DERSequence({ array: n });\n    return this.asn1ExtnValue = h, this.asn1ExtnValue.tohex();\n  }, this.setKIDByParam = function(n) {\n    if (n.str !== void 0 || n.hex !== void 0)\n      this.asn1KID = new a.asn1.DEROctetString(n);\n    else if (typeof n == \"object\" && a.crypto.Util.isKey(n) || typeof n == \"string\" && n.indexOf(\"BEGIN \") != -1) {\n      var h = n;\n      typeof n == \"string\" && (h = k.getKey(n));\n      var u = k.getKeyID(h);\n      this.asn1KID = new a.asn1.DEROctetString({ hex: u });\n    }\n  }, this.setCertIssuerByParam = function(n) {\n    n.str !== void 0 || n.ldapstr !== void 0 || n.hex !== void 0 || n.certsubject !== void 0 || n.certissuer !== void 0 ? this.asn1CertIssuer = new a.asn1.x509.X500Name(n) : typeof n == \"string\" && n.indexOf(\"BEGIN \") != -1 && n.indexOf(\"CERTIFICATE\") != -1 && (this.asn1CertIssuer = new a.asn1.x509.X500Name({ certissuer: n }));\n  }, this.setCertSNByParam = function(n) {\n    if (n.str !== void 0 || n.bigint !== void 0 || n.hex !== void 0)\n      this.asn1CertSN = new a.asn1.DERInteger(n);\n    else if (typeof n == \"string\" && n.indexOf(\"BEGIN \") != -1 && n.indexOf(\"CERTIFICATE\")) {\n      var h = new L();\n      h.readCertPEM(n);\n      var u = h.getSerialNumberHex();\n      this.asn1CertSN = new a.asn1.DERInteger({ hex: u });\n    }\n  }, this.oid = \"2.5.29.35\", e !== void 0 && (e.kid !== void 0 && this.setKIDByParam(e.kid), e.issuer !== void 0 && this.setCertIssuerByParam(e.issuer), e.sn !== void 0 && this.setCertSNByParam(e.sn), e.issuersn !== void 0 && typeof e.issuersn == \"string\" && e.issuersn.indexOf(\"BEGIN \") != -1 && e.issuersn.indexOf(\"CERTIFICATE\") && (this.setCertSNByParam(e.issuersn), this.setCertIssuerByParam(e.issuersn)));\n};\nN(a.asn1.x509.AuthorityKeyIdentifier, a.asn1.x509.Extension);\na.asn1.x509.SubjectKeyIdentifier = function(e) {\n  a.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.DEROctetString;\n  this.asn1KID = null, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = this.asn1KID, this.asn1ExtnValue.tohex();\n  }, this.setKIDByParam = function(s) {\n    if (s.str !== void 0 || s.hex !== void 0)\n      this.asn1KID = new i(s);\n    else if (typeof s == \"object\" && a.crypto.Util.isKey(s) || typeof s == \"string\" && s.indexOf(\"BEGIN\") != -1) {\n      var n = s;\n      typeof s == \"string\" && (n = k.getKey(s));\n      var h = k.getKeyID(n);\n      this.asn1KID = new a.asn1.DEROctetString({ hex: h });\n    }\n  }, this.oid = \"2.5.29.14\", e !== void 0 && e.kid !== void 0 && this.setKIDByParam(e.kid);\n};\nN(a.asn1.x509.SubjectKeyIdentifier, a.asn1.x509.Extension);\na.asn1.x509.AuthorityInfoAccess = function(e) {\n  a.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this, e), this.setAccessDescriptionArray = function(t) {\n    for (var r = new Array(), i = a, s = i.asn1, n = s.DERSequence, h = s.DERObjectIdentifier, u = s.x509.GeneralName, p = 0; p < t.length; p++) {\n      var c, y = t[p];\n      if (y.ocsp !== void 0)\n        c = new n({ array: [new h({ oid: \"1.3.6.1.5.5.7.48.1\" }), new u({ uri: y.ocsp })] });\n      else if (y.caissuer !== void 0)\n        c = new n({ array: [new h({ oid: \"1.3.6.1.5.5.7.48.2\" }), new u({ uri: y.caissuer })] });\n      else\n        throw new Error(\"unknown AccessMethod parameter: \" + JSON.stringify(y));\n      r.push(c);\n    }\n    this.asn1ExtnValue = new n({ array: r });\n  }, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.oid = \"1.3.6.1.5.5.7.1.1\", e !== void 0 && e.array !== void 0 && this.setAccessDescriptionArray(e.array);\n};\nN(a.asn1.x509.AuthorityInfoAccess, a.asn1.x509.Extension);\na.asn1.x509.SubjectAltName = function(e) {\n  a.asn1.x509.SubjectAltName.superclass.constructor.call(this, e), this.setNameArray = function(t) {\n    this.asn1ExtnValue = new a.asn1.x509.GeneralNames(t);\n  }, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.17\", e !== void 0 && e.array !== void 0 && this.setNameArray(e.array);\n};\nN(a.asn1.x509.SubjectAltName, a.asn1.x509.Extension);\na.asn1.x509.IssuerAltName = function(e) {\n  a.asn1.x509.IssuerAltName.superclass.constructor.call(this, e), this.setNameArray = function(t) {\n    this.asn1ExtnValue = new a.asn1.x509.GeneralNames(t);\n  }, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.18\", e !== void 0 && e.array !== void 0 && this.setNameArray(e.array);\n};\nN(a.asn1.x509.IssuerAltName, a.asn1.x509.Extension);\na.asn1.x509.SubjectDirectoryAttributes = function(e) {\n  a.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this, e);\n  var t = a.asn1, r = t.DERSequence, i = t.ASN1Util.newObject, s = t.x509.OID.name2oid;\n  this.params = null, this.getExtnValueHex = function() {\n    for (var n = [], h = 0; h < this.params.array.length; h++) {\n      var u = this.params.array[h];\n      if (u.attr != null && u.array != null) {\n        var p = { seq: [{ oid: u.attr }, { set: u.array }] };\n        n.push(i(p));\n        continue;\n      }\n      var c = { seq: [{ oid: \"1.2.3.4\" }, { set: [{ utf8str: \"DE\" }] }] };\n      if (u.attr == \"dateOfBirth\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { gentime: u.str };\n      else if (u.attr == \"placeOfBirth\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { utf8str: u.str };\n      else if (u.attr == \"gender\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { prnstr: u.str };\n      else if (u.attr == \"countryOfCitizenship\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { prnstr: u.str };\n      else if (u.attr == \"countryOfResidence\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { prnstr: u.str };\n      else\n        throw new Error(\"unsupported attribute: \" + u.attr);\n      n.push(new i(c));\n    }\n    var y = new r({ array: n });\n    return this.asn1ExtnValue = y, this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.9\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.SubjectDirectoryAttributes, a.asn1.x509.Extension);\na.asn1.x509.PrivateExtension = function(e) {\n  a.asn1.x509.PrivateExtension.superclass.constructor.call(this, e);\n  var t = a, r = t.lang.String.isHex, i = t.asn1, s = i.x509.OID.name2oid, n = i.ASN1Util.newObject;\n  this.params = null, this.setByParam = function(h) {\n    this.oid = s(h.extname), this.params = h;\n  }, this.getExtnValueHex = function() {\n    if (this.params.extname == null || this.params.extn == null)\n      throw new Error(\"extname or extnhex not specified\");\n    var h = this.params.extn;\n    if (typeof h == \"string\" && r(h))\n      return h;\n    if (typeof h == \"object\")\n      try {\n        return n(h).tohex();\n      } catch {\n      }\n    throw new Error(\"unsupported extn value\");\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.x509.PrivateExtension, a.asn1.x509.Extension);\na.asn1.x509.CRL = function(e) {\n  a.asn1.x509.CRL.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERBitString, n = r.x509, h = n.AlgorithmIdentifier, u = n.TBSCertList;\n  this.params = void 0, this.setByParam = function(p) {\n    this.params = p;\n  }, this.sign = function() {\n    var p = new u(this.params).tohex(), c = new a.crypto.Signature({ alg: this.params.sigalg });\n    c.init(this.params.cakey), c.updateHex(p);\n    var y = c.sign();\n    this.params.sighex = y;\n  }, this.getPEM = function() {\n    return de(this.tohex(), \"X509 CRL\");\n  }, this.tohex = function() {\n    var p = this.params;\n    if (p.tbsobj == null && (p.tbsobj = new u(p)), p.sighex == null && p.cakey != null && this.sign(), p.sighex == null)\n      throw new Error(\"sighex or cakey parameter not defined\");\n    var c = [];\n    c.push(p.tbsobj), c.push(new h({ name: p.sigalg })), c.push(new s({ hex: \"00\" + p.sighex }));\n    var y = new i({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && (this.params = e);\n};\nN(a.asn1.x509.CRL, a.asn1.ASN1Object);\na.asn1.x509.TBSCertList = function(e) {\n  a.asn1.x509.TBSCertList.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERInteger, s = r.DERSequence, n = r.DERTaggedObject;\n  r.DERObjectIdentifier;\n  var h = r.x509, u = h.AlgorithmIdentifier, p = h.Time, c = h.Extensions, y = h.X500Name;\n  this.params = null, this.setByParam = function(v) {\n    this.params = v;\n  }, this.getRevCertSequence = function() {\n    for (var v = [], o = this.params.revcert, l = 0; l < o.length; l++) {\n      var f = [new i(o[l].sn), new p(o[l].date)];\n      o[l].ext != null && f.push(new c(o[l].ext)), v.push(new s({ array: f }));\n    }\n    return new s({ array: v });\n  }, this.tohex = function() {\n    var v = [], o = this.params;\n    if (o.version != null) {\n      var l = o.version - 1, f = new i({ int: l });\n      v.push(f);\n    }\n    if (v.push(new u({ name: o.sigalg })), v.push(new y(o.issuer)), v.push(new p(o.thisupdate)), o.nextupdate != null && v.push(new p(o.nextupdate)), o.revcert != null && v.push(this.getRevCertSequence()), o.ext != null) {\n      var d = new c(o.ext);\n      v.push(new n({ tag: \"a0\", explicit: !0, obj: d }));\n    }\n    var g = new s({ array: v });\n    return g.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.TBSCertList, a.asn1.ASN1Object);\na.asn1.x509.CRLEntry = function(e) {\n  a.asn1.x509.CRLEntry.superclass.constructor.call(this);\n  var t = a, r = t.asn1;\n  this.setCertSerial = function(i) {\n    this.sn = new r.DERInteger(i);\n  }, this.setRevocationDate = function(i) {\n    this.time = new r.x509.Time(i);\n  }, this.tohex = function() {\n    var i = new r.DERSequence({ array: [this.sn, this.time] });\n    return this.TLV = i.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (e.time !== void 0 && this.setRevocationDate(e.time), e.sn !== void 0 && this.setCertSerial(e.sn));\n};\nN(a.asn1.x509.CRLEntry, a.asn1.ASN1Object);\na.asn1.x509.CRLNumber = function(e) {\n  a.asn1.x509.CRLNumber.superclass.constructor.call(this, e), this.params = void 0, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = new a.asn1.DERInteger(this.params.num), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.20\", e != null && (this.params = e);\n};\nN(a.asn1.x509.CRLNumber, a.asn1.x509.Extension);\na.asn1.x509.CRLReason = function(e) {\n  a.asn1.x509.CRLReason.superclass.constructor.call(this, e), this.params = void 0, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = new a.asn1.DEREnumerated(this.params.code), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.21\", e != null && (this.params = e);\n};\nN(a.asn1.x509.CRLReason, a.asn1.x509.Extension);\na.asn1.x509.OCSPNonce = function(e) {\n  a.asn1.x509.OCSPNonce.superclass.constructor.call(this, e), this.params = void 0, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = new a.asn1.DEROctetString(this.params), this.asn1ExtnValue.tohex();\n  }, this.oid = \"1.3.6.1.5.5.7.48.1.2\", e != null && (this.params = e);\n};\nN(a.asn1.x509.OCSPNonce, a.asn1.x509.Extension);\na.asn1.x509.OCSPNoCheck = function(e) {\n  a.asn1.x509.OCSPNoCheck.superclass.constructor.call(this, e), this.params = void 0, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = new a.asn1.DERNull(), this.asn1ExtnValue.tohex();\n  }, this.oid = \"1.3.6.1.5.5.7.48.1.5\", e != null && (this.params = e);\n};\nN(a.asn1.x509.OCSPNoCheck, a.asn1.x509.Extension);\na.asn1.x509.AdobeTimeStamp = function(e) {\n  a.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.DERInteger, s = r.DERBoolean, n = r.DERSequence, h = r.x509.GeneralName;\n  this.params = null, this.getExtnValueHex = function() {\n    var u = this.params, p = [new i(1)];\n    return p.push(new h({ uri: u.uri })), u.reqauth != null && p.push(new s(u.reqauth)), this.asn1ExtnValue = new n({ array: p }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"1.2.840.113583.1.1.9.1\", e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.AdobeTimeStamp, a.asn1.x509.Extension);\na.asn1.x509.X500Name = function(e) {\n  a.asn1.x509.X500Name.superclass.constructor.call(this), this.asn1Array = [], this.paramArray = [], this.sRule = \"utf8\";\n  var t = a, r = t.asn1, i = r.x509, s = i.RDN;\n  this.setByString = function(n, h) {\n    h !== void 0 && (this.sRule = h);\n    var u = n.split(\"/\");\n    u.shift();\n    for (var p = [], c = 0; c < u.length; c++)\n      if (u[c].match(/^[^=]+=.+$/))\n        p.push(u[c]);\n      else {\n        var y = p.length - 1;\n        p[y] = p[y] + \"/\" + u[c];\n      }\n    for (var c = 0; c < p.length; c++)\n      this.asn1Array.push(new s({ str: p[c], rule: this.sRule }));\n  }, this.setByLdapString = function(n, h) {\n    h !== void 0 && (this.sRule = h);\n    var u = i.X500Name.ldapToCompat(n);\n    this.setByString(u, h);\n  }, this.setByObject = function(n, h) {\n    h !== void 0 && (this.sRule = h);\n    for (var u in n)\n      if (n.hasOwnProperty(u)) {\n        var p = new s({ str: u + \"=\" + n[u], rule: this.sRule });\n        this.asn1Array ? this.asn1Array.push(p) : this.asn1Array = [p];\n      }\n  }, this.setByParam = function(n) {\n    if (n.rule !== void 0 && (this.sRule = n.rule), n.array !== void 0)\n      this.paramArray = n.array;\n    else if (n.str !== void 0)\n      this.setByString(n.str);\n    else if (n.ldapstr !== void 0)\n      this.setByLdapString(n.ldapstr);\n    else if (n.hex !== void 0)\n      this.hTLV = n.hex;\n    else if (n.certissuer !== void 0) {\n      var h = new L();\n      h.readCertPEM(n.certissuer), this.hTLV = h.getIssuerHex();\n    } else if (n.certsubject !== void 0) {\n      var h = new L();\n      h.readCertPEM(n.certsubject), this.hTLV = h.getSubjectHex();\n    } else\n      typeof n == \"object\" && n.certsubject === void 0 && n.certissuer === void 0 && this.setByObject(n);\n  }, this.tohex = function() {\n    if (typeof this.hTLV == \"string\")\n      return this.hTLV;\n    if (this.asn1Array.length == 0 && this.paramArray.length > 0)\n      for (var n = 0; n < this.paramArray.length; n++) {\n        var h = { array: this.paramArray[n] };\n        this.sRule != \"utf8\" && (h.rule = this.sRule);\n        var u = new s(h);\n        this.asn1Array.push(u);\n      }\n    var p = new r.DERSequence({ array: this.asn1Array });\n    return this.hTLV = p.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.X500Name, a.asn1.ASN1Object);\na.asn1.x509.X500Name.compatToLDAP = function(e) {\n  if (e.substr(0, 1) !== \"/\")\n    throw \"malformed input\";\n  e = e.substr(1);\n  var t = e.split(\"/\");\n  return t.reverse(), t = t.map(function(r) {\n    return r.replace(/,/, \"\\\\,\");\n  }), t.join(\",\");\n};\na.asn1.x509.X500Name.onelineToLDAP = function(e) {\n  return a.asn1.x509.X500Name.compatToLDAP(e);\n};\na.asn1.x509.X500Name.ldapToCompat = function(e) {\n  for (var t = e.split(\",\"), r = !1, i = [], s = 0; t.length > 0; s++) {\n    var n = t.shift();\n    if (r === !0) {\n      var h = i.pop(), u = (h + \",\" + n).replace(/\\\\,/g, \",\");\n      i.push(u), r = !1;\n    } else\n      i.push(n);\n    n.substr(-1, 1) === \"\\\\\" && (r = !0);\n  }\n  return i = i.map(function(p) {\n    return p.replace(\"/\", \"\\\\/\");\n  }), i.reverse(), \"/\" + i.join(\"/\");\n};\na.asn1.x509.X500Name.ldapToOneline = function(e) {\n  return a.asn1.x509.X500Name.ldapToCompat(e);\n};\na.asn1.x509.RDN = function(e) {\n  a.asn1.x509.RDN.superclass.constructor.call(this), this.asn1Array = [], this.paramArray = [], this.sRule = \"utf8\";\n  var t = a.asn1.x509.AttributeTypeAndValue;\n  this.setByParam = function(r) {\n    r.rule !== void 0 && (this.sRule = r.rule), r.str !== void 0 && this.addByMultiValuedString(r.str), r.array !== void 0 && (this.paramArray = r.array);\n  }, this.addByString = function(r) {\n    this.asn1Array.push(new a.asn1.x509.AttributeTypeAndValue({ str: r, rule: this.sRule }));\n  }, this.addByMultiValuedString = function(r) {\n    for (var i = a.asn1.x509.RDN.parseString(r), s = 0; s < i.length; s++)\n      this.addByString(i[s]);\n  }, this.tohex = function() {\n    if (this.asn1Array.length == 0 && this.paramArray.length > 0)\n      for (var r = 0; r < this.paramArray.length; r++) {\n        var i = this.paramArray[r];\n        i.rule !== void 0 && this.sRule != \"utf8\" && (i.rule = this.sRule);\n        var s = new t(i);\n        this.asn1Array.push(s);\n      }\n    var n = new a.asn1.DERSet({ array: this.asn1Array });\n    return this.TLV = n.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.RDN, a.asn1.ASN1Object);\na.asn1.x509.RDN.parseString = function(e) {\n  for (var t = e.split(/\\+/), r = !1, i = [], s = 0; t.length > 0; s++) {\n    var n = t.shift();\n    if (r === !0) {\n      var h = i.pop(), u = (h + \"+\" + n).replace(/\\\\\\+/g, \"+\");\n      i.push(u), r = !1;\n    } else\n      i.push(n);\n    n.substr(-1, 1) === \"\\\\\" && (r = !0);\n  }\n  for (var p = !1, c = [], s = 0; i.length > 0; s++) {\n    var n = i.shift();\n    if (p === !0) {\n      var y = c.pop();\n      if (n.match(/\"$/)) {\n        var u = (y + \"+\" + n).replace(/^([^=]+)=\"(.*)\"$/, \"$1=$2\");\n        c.push(u), p = !1;\n      } else\n        c.push(y + \"+\" + n);\n    } else\n      c.push(n);\n    n.match(/^[^=]+=\"/) && (p = !0);\n  }\n  return c;\n};\na.asn1.x509.AttributeTypeAndValue = function(e) {\n  a.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this), this.sRule = \"utf8\", this.sType = null, this.sValue = null, this.dsType = null;\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERUTF8String, n = r.DERPrintableString, h = r.DERTeletexString, u = r.DERIA5String, p = r.DERVisibleString, c = r.DERBMPString, y = t.lang.String.isMail, v = t.lang.String.isPrintable;\n  this.setByParam = function(o) {\n    if (o.rule !== void 0 && (this.sRule = o.rule), o.ds !== void 0 && (this.dsType = o.ds), o.value === void 0 && o.str !== void 0) {\n      var l = o.str, f = l.match(/^([^=]+)=(.+)$/);\n      if (f)\n        this.sType = f[1], this.sValue = f[2];\n      else\n        throw new Error(\"malformed attrTypeAndValueStr: \" + attrTypeAndValueStr);\n    } else\n      this.sType = o.type, this.sValue = o.value;\n  }, this.setByString = function(o, l) {\n    l !== void 0 && (this.sRule = l);\n    var f = o.match(/^([^=]+)=(.+)$/);\n    if (f)\n      this.setByAttrTypeAndValueStr(f[1], f[2]);\n    else\n      throw new Error(\"malformed attrTypeAndValueStr: \" + attrTypeAndValueStr);\n  }, this._getDsType = function() {\n    var o = this.sType, l = this.sValue, f = this.sRule;\n    return f === \"prn\" ? o == \"CN\" && y(l) ? \"ia5\" : v(l) ? \"prn\" : \"utf8\" : f === \"utf8\" ? o == \"CN\" && y(l) ? \"ia5\" : o == \"C\" ? \"prn\" : \"utf8\" : \"utf8\";\n  }, this.setByAttrTypeAndValueStr = function(o, l, f) {\n    f !== void 0 && (this.sRule = f), this.sType = o, this.sValue = l;\n  }, this.getValueObj = function(o, l) {\n    if (o == \"utf8\")\n      return new s({ str: l });\n    if (o == \"prn\")\n      return new n({ str: l });\n    if (o == \"tel\")\n      return new h({ str: l });\n    if (o == \"ia5\")\n      return new u({ str: l });\n    if (o == \"vis\")\n      return new p({ str: l });\n    if (o == \"bmp\")\n      return new c({ str: l });\n    throw new Error(\"unsupported directory string type: type=\" + o + \" value=\" + l);\n  }, this.tohex = function() {\n    this.dsType == null && (this.dsType = this._getDsType());\n    var o = a.asn1.x509.OID.atype2obj(this.sType), l = this.getValueObj(this.dsType, this.sValue), f = new i({ array: [o, l] });\n    return this.TLV = f.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.AttributeTypeAndValue, a.asn1.ASN1Object);\na.asn1.x509.SubjectPublicKeyInfo = function(e) {\n  a.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERInteger, s = r.DERBitString, n = r.DERObjectIdentifier, h = r.DERSequence, u = r.ASN1Util.newObject, p = r.x509, c = p.AlgorithmIdentifier, y = t.crypto;\n  y.ECDSA, y.DSA, this.getASN1Object = function() {\n    if (this.asn1AlgId == null || this.asn1SubjPKey == null)\n      throw \"algId and/or subjPubKey not set\";\n    var v = new h({ array: [this.asn1AlgId, this.asn1SubjPKey] });\n    return v;\n  }, this.tohex = function() {\n    var v = this.getASN1Object();\n    return this.hTLV = v.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setPubKey = function(v) {\n    try {\n      if (v instanceof q) {\n        var o = u({ seq: [{ int: { bigint: v.n } }, { int: { int: v.e } }] }), l = o.tohex();\n        this.asn1AlgId = new c({ name: \"rsaEncryption\" }), this.asn1SubjPKey = new s({ hex: \"00\" + l });\n      }\n    } catch {\n    }\n    try {\n      if (v instanceof a.crypto.ECDSA) {\n        var f = new n({ name: v.curveName });\n        this.asn1AlgId = new c({ name: \"ecPublicKey\", asn1params: f }), this.asn1SubjPKey = new s({ hex: \"00\" + v.pubKeyHex });\n      }\n    } catch {\n    }\n    try {\n      if (v instanceof a.crypto.DSA) {\n        var f = new u({ seq: [{ int: { bigint: v.p } }, { int: { bigint: v.q } }, { int: { bigint: v.g } }] });\n        this.asn1AlgId = new c({ name: \"dsa\", asn1params: f });\n        var d = new i({ bigint: v.y });\n        this.asn1SubjPKey = new s({ hex: \"00\" + d.tohex() });\n      }\n    } catch {\n    }\n  }, e !== void 0 && this.setPubKey(e);\n};\nN(a.asn1.x509.SubjectPublicKeyInfo, a.asn1.ASN1Object);\na.asn1.x509.Time = function(e) {\n  a.asn1.x509.Time.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERUTCTime, s = r.DERGeneralizedTime;\n  this.params = null, this.type = null, this.setTimeParams = function(n) {\n    this.timeParams = n;\n  }, this.setByParam = function(n) {\n    this.params = n;\n  }, this.getType = function(n) {\n    return n.match(/^[0-9]{12}Z$/) ? \"utc\" : n.match(/^[0-9]{14}Z$/) ? \"gen\" : n.match(/^[0-9]{12}\\.[0-9]+Z$/) ? \"utc\" : n.match(/^[0-9]{14}\\.[0-9]+Z$/) ? \"gen\" : null;\n  }, this.tohex = function() {\n    var n = this.params, h = null;\n    if (typeof n == \"string\" && (n = { str: n }), n != null && n.str && (n.type == null || n.type == null) && (n.type = this.getType(n.str)), n != null && n.str ? (n.type == \"utc\" && (h = new i(n.str)), n.type == \"gen\" && (h = new s(n.str))) : this.type == \"gen\" ? h = new s() : h = new i(), h == null)\n      throw new Error(\"wrong setting for Time\");\n    return this.TLV = h.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\na.asn1.x509.Time_bak = function(e) {\n  a.asn1.x509.Time_bak.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERUTCTime, s = r.DERGeneralizedTime;\n  this.setTimeParams = function(n) {\n    this.timeParams = n;\n  }, this.tohex = function() {\n    var n = null;\n    return this.timeParams != null ? this.type == \"utc\" ? n = new i(this.timeParams) : n = new s(this.timeParams) : this.type == \"utc\" ? n = new i() : n = new s(), this.TLV = n.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.type = \"utc\", e !== void 0 && (e.type !== void 0 ? this.type = e.type : e.str !== void 0 && (e.str.match(/^[0-9]{12}Z$/) && (this.type = \"utc\"), e.str.match(/^[0-9]{14}Z$/) && (this.type = \"gen\")), this.timeParams = e);\n};\nN(a.asn1.x509.Time, a.asn1.ASN1Object);\na.asn1.x509.AlgorithmIdentifier = function(e) {\n  a.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this), this.nameAlg = null, this.asn1Alg = null, this.asn1Params = null, this.paramEmpty = !1;\n  var t = a, r = t.asn1, i = r.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;\n  if (this.tohex = function() {\n    if (this.nameAlg === null && this.asn1Alg === null)\n      throw new Error(\"algorithm not specified\");\n    if (this.nameAlg !== null) {\n      var n = null;\n      for (var h in i)\n        h === this.nameAlg && (n = i[h]);\n      if (n !== null)\n        return this.hTLV = n, this.hTLV;\n    }\n    this.nameAlg !== null && this.asn1Alg === null && (this.asn1Alg = r.x509.OID.name2obj(this.nameAlg));\n    var u = [this.asn1Alg];\n    this.asn1Params !== null && u.push(this.asn1Params);\n    var p = new r.DERSequence({ array: u });\n    return this.hTLV = p.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (e.name !== void 0 && (this.nameAlg = e.name), e.asn1params !== void 0 && (this.asn1Params = e.asn1params), e.paramempty !== void 0 && (this.paramEmpty = e.paramempty)), this.asn1Params === null && this.paramEmpty === !1 && this.nameAlg !== null) {\n    this.nameAlg.name !== void 0 && (this.nameAlg = this.nameAlg.name);\n    var s = this.nameAlg.toLowerCase();\n    s.substr(-7, 7) !== \"withdsa\" && s.substr(-9, 9) !== \"withecdsa\" && (this.asn1Params = new r.DERNull());\n  }\n};\nN(a.asn1.x509.AlgorithmIdentifier, a.asn1.ASN1Object);\na.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV = { SHAwithRSAandMGF1: \"300d06092a864886f70d01010a3000\", SHA256withRSAandMGF1: \"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120\", SHA384withRSAandMGF1: \"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130\", SHA512withRSAandMGF1: \"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140\" };\na.asn1.x509.GeneralName = function(e) {\n  a.asn1.x509.GeneralName.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.x509, s = i.X500Name, n = i.OtherName, h = r.DERIA5String;\n  r.DERPrintableString;\n  var u = r.DEROctetString, p = r.DERTaggedObject, c = r.ASN1Object, y = Error;\n  this.params = null, this.setByParam = function(v) {\n    this.params = v;\n  }, this.tohex = function() {\n    var v = this.params, o, f, l, f = !1;\n    if (v.other !== void 0)\n      o = \"a0\", l = new n(v.other);\n    else if (v.rfc822 !== void 0)\n      o = \"81\", l = new h({ str: v.rfc822 });\n    else if (v.dns !== void 0)\n      o = \"82\", l = new h({ str: v.dns });\n    else if (v.dn !== void 0)\n      o = \"a4\", f = !0, typeof v.dn == \"string\" ? l = new s({ str: v.dn }) : v.dn instanceof a.asn1.x509.X500Name ? l = v.dn : l = new s(v.dn);\n    else if (v.ldapdn !== void 0)\n      o = \"a4\", f = !0, l = new s({ ldapstr: v.ldapdn });\n    else if (v.certissuer !== void 0 || v.certsubj !== void 0) {\n      o = \"a4\", f = !0;\n      var d, g, S = null;\n      if (v.certsubj !== void 0 ? (d = !1, g = v.certsubj) : (d = !0, g = v.certissuer), g.match(/^[0-9A-Fa-f]+$/), g.indexOf(\"-----BEGIN \") != -1 && (S = ie(g)), S == null)\n        throw new Error(\"certsubj/certissuer not cert\");\n      var b = new L();\n      b.hex = S;\n      var D;\n      d ? D = b.getIssuerHex() : D = b.getSubjectHex(), l = new c(), l.hTLV = D;\n    } else if (v.uri !== void 0)\n      o = \"86\", l = new h({ str: v.uri });\n    else if (v.ip !== void 0) {\n      o = \"87\";\n      var A, I = v.ip;\n      try {\n        if (I.match(/^[0-9a-f]+$/)) {\n          var m = I.length;\n          if (m == 8 || m == 16 || m == 32 || m == 64)\n            A = I;\n          else\n            throw \"err\";\n        } else\n          A = Rt(I);\n      } catch (w) {\n        throw new y(\"malformed IP address: \" + v.ip + \":\" + w.message);\n      }\n      l = new u({ hex: A });\n    } else\n      throw new y(\"improper params\");\n    var E = new p({ tag: o, explicit: f, obj: l });\n    return E.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.GeneralName, a.asn1.ASN1Object);\na.asn1.x509.GeneralNames = function(e) {\n  a.asn1.x509.GeneralNames.superclass.constructor.call(this);\n  var t = a, r = t.asn1;\n  this.setByParamArray = function(i) {\n    for (var s = 0; s < i.length; s++) {\n      var n = new r.x509.GeneralName(i[s]);\n      this.asn1Array.push(n);\n    }\n  }, this.tohex = function() {\n    var i = new r.DERSequence({ array: this.asn1Array });\n    return i.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.asn1Array = new Array(), typeof e < \"u\" && this.setByParamArray(e);\n};\nN(a.asn1.x509.GeneralNames, a.asn1.ASN1Object);\na.asn1.x509.OtherName = function(e) {\n  a.asn1.x509.OtherName.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERObjectIdentifier, s = r.DERSequence, n = r.ASN1Util.newObject;\n  this.params = null, this.setByParam = function(h) {\n    this.params = h;\n  }, this.tohex = function() {\n    var h = this.params;\n    if (h.oid == null || h.value == null)\n      throw new Error(\"oid or value not specified\");\n    var u = new i({ oid: h.oid }), p = n({ tag: { tag: \"a0\", explicit: !0, obj: h.value } }), c = new s({ array: [u, p] });\n    return c.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.OtherName, a.asn1.ASN1Object);\na.asn1.x509.OID = new function() {\n  var e = a.asn1.DERObjectIdentifier;\n  this.name2oidList = { \"aes128-CBC\": \"2.16.840.1.101.3.4.1.2\", \"aes256-CBC\": \"2.16.840.1.101.3.4.1.42\", sha1: \"1.3.14.3.2.26\", sha256: \"2.16.840.1.101.3.4.2.1\", sha384: \"2.16.840.1.101.3.4.2.2\", sha512: \"2.16.840.1.101.3.4.2.3\", sha224: \"2.16.840.1.101.3.4.2.4\", md5: \"1.2.840.113549.2.5\", md2: \"1.3.14.7.2.2.1\", ripemd160: \"1.3.36.3.2.1\", hmacWithSHA1: \"1.2.840.113549.2.7\", hmacWithSHA224: \"1.2.840.113549.2.8\", hmacWithSHA256: \"1.2.840.113549.2.9\", hmacWithSHA384: \"1.2.840.113549.2.10\", hmacWithSHA512: \"1.2.840.113549.2.11\", MD2withRSA: \"1.2.840.113549.1.1.2\", MD4withRSA: \"1.2.840.113549.1.1.3\", MD5withRSA: \"1.2.840.113549.1.1.4\", SHA1withRSA: \"1.2.840.113549.1.1.5\", \"pkcs1-MGF\": \"1.2.840.113549.1.1.8\", rsaPSS: \"1.2.840.113549.1.1.10\", SHA224withRSA: \"1.2.840.113549.1.1.14\", SHA256withRSA: \"1.2.840.113549.1.1.11\", SHA384withRSA: \"1.2.840.113549.1.1.12\", SHA512withRSA: \"1.2.840.113549.1.1.13\", SHA1withECDSA: \"1.2.840.10045.4.1\", SHA224withECDSA: \"1.2.840.10045.4.3.1\", SHA256withECDSA: \"1.2.840.10045.4.3.2\", SHA384withECDSA: \"1.2.840.10045.4.3.3\", SHA512withECDSA: \"1.2.840.10045.4.3.4\", dsa: \"1.2.840.10040.4.1\", SHA1withDSA: \"1.2.840.10040.4.3\", SHA224withDSA: \"2.16.840.1.101.3.4.3.1\", SHA256withDSA: \"2.16.840.1.101.3.4.3.2\", rsaEncryption: \"1.2.840.113549.1.1.1\", commonName: \"2.5.4.3\", countryName: \"2.5.4.6\", localityName: \"2.5.4.7\", stateOrProvinceName: \"2.5.4.8\", streetAddress: \"2.5.4.9\", organizationName: \"2.5.4.10\", organizationalUnitName: \"2.5.4.11\", domainComponent: \"0.9.2342.19200300.100.1.25\", userId: \"0.9.2342.19200300.100.1.1\", surname: \"2.5.4.4\", givenName: \"2.5.4.42\", title: \"2.5.4.12\", distinguishedName: \"2.5.4.49\", emailAddress: \"1.2.840.113549.1.9.1\", description: \"2.5.4.13\", businessCategory: \"2.5.4.15\", postalCode: \"2.5.4.17\", uniqueIdentifier: \"2.5.4.45\", organizationIdentifier: \"2.5.4.97\", jurisdictionOfIncorporationL: \"1.3.6.1.4.1.311.60.2.1.1\", jurisdictionOfIncorporationSP: \"1.3.6.1.4.1.311.60.2.1.2\", jurisdictionOfIncorporationC: \"1.3.6.1.4.1.311.60.2.1.3\", subjectDirectoryAttributes: \"2.5.29.9\", subjectKeyIdentifier: \"2.5.29.14\", keyUsage: \"2.5.29.15\", subjectAltName: \"2.5.29.17\", issuerAltName: \"2.5.29.18\", basicConstraints: \"2.5.29.19\", cRLNumber: \"2.5.29.20\", cRLReason: \"2.5.29.21\", nameConstraints: \"2.5.29.30\", cRLDistributionPoints: \"2.5.29.31\", certificatePolicies: \"2.5.29.32\", anyPolicy: \"2.5.29.32.0\", policyMappings: \"2.5.29.33\", authorityKeyIdentifier: \"2.5.29.35\", policyConstraints: \"2.5.29.36\", extKeyUsage: \"2.5.29.37\", inhibitAnyPolicy: \"2.5.29.54\", authorityInfoAccess: \"1.3.6.1.5.5.7.1.1\", ocsp: \"1.3.6.1.5.5.7.48.1\", ocspBasic: \"1.3.6.1.5.5.7.48.1.1\", ocspNonce: \"1.3.6.1.5.5.7.48.1.2\", ocspNoCheck: \"1.3.6.1.5.5.7.48.1.5\", caIssuers: \"1.3.6.1.5.5.7.48.2\", anyExtendedKeyUsage: \"2.5.29.37.0\", serverAuth: \"1.3.6.1.5.5.7.3.1\", clientAuth: \"1.3.6.1.5.5.7.3.2\", codeSigning: \"1.3.6.1.5.5.7.3.3\", emailProtection: \"1.3.6.1.5.5.7.3.4\", timeStamping: \"1.3.6.1.5.5.7.3.8\", ocspSigning: \"1.3.6.1.5.5.7.3.9\", smtpUTF8Mailbox: \"1.3.6.1.5.5.7.8.9\", dateOfBirth: \"1.3.6.1.5.5.7.9.1\", placeOfBirth: \"1.3.6.1.5.5.7.9.2\", gender: \"1.3.6.1.5.5.7.9.3\", countryOfCitizenship: \"1.3.6.1.5.5.7.9.4\", countryOfResidence: \"1.3.6.1.5.5.7.9.5\", ecPublicKey: \"1.2.840.10045.2.1\", \"P-256\": \"1.2.840.10045.3.1.7\", secp256r1: \"1.2.840.10045.3.1.7\", secp256k1: \"1.3.132.0.10\", secp384r1: \"1.3.132.0.34\", secp521r1: \"1.3.132.0.35\", pkcs5PBES2: \"1.2.840.113549.1.5.13\", pkcs5PBKDF2: \"1.2.840.113549.1.5.12\", \"des-EDE3-CBC\": \"1.2.840.113549.3.7\", data: \"1.2.840.113549.1.7.1\", \"signed-data\": \"1.2.840.113549.1.7.2\", \"enveloped-data\": \"1.2.840.113549.1.7.3\", \"digested-data\": \"1.2.840.113549.1.7.5\", \"encrypted-data\": \"1.2.840.113549.1.7.6\", \"authenticated-data\": \"1.2.840.113549.1.9.16.1.2\", tstinfo: \"1.2.840.113549.1.9.16.1.4\", signingCertificate: \"1.2.840.113549.1.9.16.2.12\", timeStampToken: \"1.2.840.113549.1.9.16.2.14\", signaturePolicyIdentifier: \"1.2.840.113549.1.9.16.2.15\", etsArchiveTimeStamp: \"1.2.840.113549.1.9.16.2.27\", signingCertificateV2: \"1.2.840.113549.1.9.16.2.47\", etsArchiveTimeStampV2: \"1.2.840.113549.1.9.16.2.48\", extensionRequest: \"1.2.840.113549.1.9.14\", contentType: \"1.2.840.113549.1.9.3\", messageDigest: \"1.2.840.113549.1.9.4\", signingTime: \"1.2.840.113549.1.9.5\", counterSignature: \"1.2.840.113549.1.9.6\", archiveTimeStampV3: \"0.4.0.1733.2.4\", pdfRevocationInfoArchival: \"1.2.840.113583.1.1.8\", adobeTimeStamp: \"1.2.840.113583.1.1.9.1\", smimeMailboxLegacy: \"2.23.140.1.5.1.1\", smimeMailboxMulti: \"2.23.140.1.5.1.2\", smimeMailboxStrict: \"2.23.140.1.5.1.3\", smimeOrganizationLegacy: \"2.23.140.1.5.2.1\", smimeOrganizationMulti: \"2.23.140.1.5.2.2\", smimeOrganizationStrict: \"2.23.140.1.5.2.3\", smimeSponsorLegacy: \"2.23.140.1.5.3.1\", smimeSponsorMulti: \"2.23.140.1.5.3.2\", smimeSponsorStrict: \"2.23.140.1.5.3.3\", smimeIndividualLegacy: \"2.23.140.1.5.4.1\", smimeIndividualMulti: \"2.23.140.1.5.4.2\", smimeIndividualStrict: \"2.23.140.1.5.4.3\" }, this.atype2oidList = { CN: \"2.5.4.3\", L: \"2.5.4.7\", ST: \"2.5.4.8\", O: \"2.5.4.10\", OU: \"2.5.4.11\", C: \"2.5.4.6\", STREET: \"2.5.4.9\", DC: \"0.9.2342.19200300.100.1.25\", UID: \"0.9.2342.19200300.100.1.1\", SN: \"2.5.4.4\", T: \"2.5.4.12\", GN: \"2.5.4.42\", DN: \"2.5.4.49\", E: \"1.2.840.113549.1.9.1\", description: \"2.5.4.13\", businessCategory: \"2.5.4.15\", postalCode: \"2.5.4.17\", serialNumber: \"2.5.4.5\", uniqueIdentifier: \"2.5.4.45\", organizationIdentifier: \"2.5.4.97\", jurisdictionOfIncorporationL: \"1.3.6.1.4.1.311.60.2.1.1\", jurisdictionOfIncorporationSP: \"1.3.6.1.4.1.311.60.2.1.2\", jurisdictionOfIncorporationC: \"1.3.6.1.4.1.311.60.2.1.3\" }, this.objCache = {}, this.name2obj = function(t) {\n    if (typeof this.objCache[t] < \"u\")\n      return this.objCache[t];\n    if (typeof this.name2oidList[t] > \"u\")\n      throw \"Name of ObjectIdentifier not defined: \" + t;\n    var r = this.name2oidList[t], i = new e({ oid: r });\n    return this.objCache[t] = i, i;\n  }, this.atype2obj = function(t) {\n    if (this.objCache[t] !== void 0)\n      return this.objCache[t];\n    var r;\n    if (t.match(/^\\d+\\.\\d+\\.[0-9.]+$/))\n      r = t;\n    else if (this.atype2oidList[t] !== void 0)\n      r = this.atype2oidList[t];\n    else if (this.name2oidList[t] !== void 0)\n      r = this.name2oidList[t];\n    else\n      throw new Error(\"AttributeType name undefined: \" + t);\n    var i = new e({ oid: r });\n    return this.objCache[t] = i, i;\n  }, this.registerOIDs = function(t) {\n    if (this.checkOIDs(t))\n      for (var r in t)\n        this.name2oidList[r] = t[r];\n  }, this.checkOIDs = function(t) {\n    try {\n      var r = Object.keys(t);\n      return r.length == 0 ? !1 : (r.map(function(i, s, n) {\n        var h = this[i];\n        if (!h.match(/^[0-2]\\.[0-9.]+$/))\n          throw new Error(\"value is not OID\");\n      }, t), !0);\n    } catch {\n      return !1;\n    }\n  };\n}();\na.asn1.x509.OID.oid2name = function(e) {\n  var t = a.asn1.x509.OID.name2oidList;\n  for (var r in t)\n    if (t[r] == e)\n      return r;\n  return \"\";\n};\na.asn1.x509.OID.oid2atype = function(e) {\n  var t = a.asn1.x509.OID.atype2oidList;\n  for (var r in t)\n    if (t[r] == e)\n      return r;\n  return e;\n};\na.asn1.x509.OID.name2oid = function(e) {\n  if (e.match(/^[0-9.]+$/))\n    return e;\n  var t = a.asn1.x509.OID.name2oidList;\n  return t[e] === void 0 ? \"\" : t[e];\n};\na.asn1.x509.X509Util = {};\na.asn1.x509.X509Util.newCertPEM = function(e) {\n  var t = a.asn1.x509;\n  t.TBSCertificate;\n  var r = t.Certificate, i = new r(e);\n  return i.getPEM();\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.cms > \"u\" || !a.asn1.cms) && (a.asn1.cms = {});\na.asn1.cms.Attribute = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.DERSet, h = i.DERObjectIdentifier;\n  this.params = null, this.typeOid = null, this.setByParam = function(u) {\n    this.params = u;\n  }, this.getValueArray = function() {\n    throw new t(\"not yet implemented abstract\");\n  }, this.tohex = function() {\n    var u = new h({ oid: this.typeOid }), p = new n({ array: this.getValueArray() }), c = new s({ array: [u, p] });\n    return c.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  };\n};\nN(a.asn1.cms.Attribute, a.asn1.ASN1Object);\na.asn1.cms.ContentType = function(e) {\n  var t = a, r = t.asn1;\n  r.cms.ContentType.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.3\", this.getValueArray = function() {\n    var i = new r.DERObjectIdentifier(this.params.type);\n    return [i];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.ContentType, a.asn1.cms.Attribute);\na.asn1.cms.MessageDigest = function(e) {\n  var t = a, r = t.asn1, i = r.DEROctetString, s = r.cms;\n  s.MessageDigest.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.4\", this.getValueArray = function() {\n    var n = new i(this.params);\n    return [n];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.MessageDigest, a.asn1.cms.Attribute);\na.asn1.cms.SigningTime = function(e) {\n  var t = a, r = t.asn1;\n  r.cms.SigningTime.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.5\", this.getValueArray = function() {\n    var i = new r.x509.Time(this.params);\n    return [i];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SigningTime, a.asn1.cms.Attribute);\na.asn1.cms.SigningCertificate = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.cms, h = n.ESSCertID;\n  r.crypto, n.SigningCertificate.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.12\", this.getValueArray = function() {\n    if (this.params == null || this.params == null || this.params.array == null)\n      throw new t(\"parameter 'array' not specified\");\n    for (var u = this.params.array, p = [], c = 0; c < u.length; c++) {\n      var y = u[c];\n      e.hasis == !1 && typeof y == \"string\" && (y.indexOf(\"-----BEGIN\") != -1 || V.isASN1HEX(y)) && (y = { cert: y }), y.hasis != !1 && e.hasis == !1 && (y.hasis = !1), p.push(new h(y));\n    }\n    var v = new s({ array: p }), o = new s({ array: [v] });\n    return [o];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SigningCertificate, a.asn1.cms.Attribute);\na.asn1.cms.ESSCertID = function(e) {\n  a.asn1.cms.ESSCertID.superclass.constructor.call(this);\n  var t = Error, r = a, i = r.asn1, s = i.DEROctetString, n = i.DERSequence, h = i.cms.IssuerSerial;\n  this.params = null, this.getCertHash = function(u, p) {\n    if (u.hash != null)\n      return u.hash;\n    if (typeof u == \"string\" && u.indexOf(\"-----BEGIN\") == -1 && !V.isASN1HEX(u))\n      return u;\n    var c;\n    if (typeof u == \"string\")\n      c = u;\n    else if (u.cert != null)\n      c = u.cert;\n    else\n      throw new t(\"hash nor cert unspecified\");\n    var y;\n    c.indexOf(\"-----BEGIN\") != -1 ? y = ie(c) : y = c, typeof u == \"string\" && (u.indexOf(\"-----BEGIN\") != -1 ? y = ie(u) : V.isASN1HEX(u) && (y = u));\n    var v;\n    if (u.alg != null)\n      v = u.alg;\n    else if (p != null)\n      v = p;\n    else\n      throw new t(\"hash alg unspecified\");\n    return r.crypto.Util.hashHex(y, v);\n  }, this.tohex = function() {\n    var u = this.params, p = this.getCertHash(u, \"sha1\"), c = [];\n    c.push(new s({ hex: p })), (typeof u == \"string\" && u.indexOf(\"-----BEGIN\") != -1 || u.cert != null && u.hasis != !1 || u.issuer != null && u.serial != null) && c.push(new h(u));\n    var y = new n({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.ESSCertID, a.asn1.ASN1Object);\na.asn1.cms.SigningCertificateV2 = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence;\n  i.x509;\n  var n = i.cms, h = n.ESSCertIDv2;\n  r.crypto, n.SigningCertificateV2.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.47\", this.getValueArray = function() {\n    if (this.params == null || this.params == null || this.params.array == null)\n      throw new t(\"parameter 'array' not specified\");\n    for (var u = this.params.array, p = [], c = 0; c < u.length; c++) {\n      var y = u[c];\n      (e.alg != null || e.hasis == !1) && typeof y == \"string\" && (y.indexOf(\"-----BEGIN\") != -1 || V.isASN1HEX(y)) && (y = { cert: y }), y.alg == null && e.alg != null && (y.alg = e.alg), y.hasis != !1 && e.hasis == !1 && (y.hasis = !1), p.push(new h(y));\n    }\n    var v = new s({ array: p }), o = new s({ array: [v] });\n    return [o];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SigningCertificateV2, a.asn1.cms.Attribute);\na.asn1.cms.ESSCertIDv2 = function(e) {\n  a.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DEROctetString, s = r.DERSequence, n = r.cms.IssuerSerial, h = r.x509.AlgorithmIdentifier;\n  this.params = null, this.tohex = function() {\n    var u = this.params, p = this.getCertHash(u, \"sha256\"), c = [];\n    u.alg != null && u.alg != \"sha256\" && c.push(new h({ name: u.alg })), c.push(new i({ hex: p })), (typeof u == \"string\" && u.indexOf(\"-----BEGIN\") != -1 || u.cert != null && u.hasis != !1 || u.issuer != null && u.serial != null) && c.push(new n(u));\n    var y = new s({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.ESSCertIDv2, a.asn1.cms.ESSCertID);\na.asn1.cms.IssuerSerial = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERInteger, n = i.DERSequence, h = i.cms, u = i.x509, p = u.GeneralNames, c = L;\n  h.IssuerSerial.superclass.constructor.call(this), this.setByParam = function(y) {\n    this.params = y;\n  }, this.tohex = function() {\n    var y = this.params, v, o;\n    if (typeof y == \"string\" && y.indexOf(\"-----BEGIN\") != -1 || y.cert != null) {\n      var l;\n      y.cert != null ? l = y.cert : l = y;\n      var f = new c();\n      f.readCertPEM(l), v = f.getIssuer(), o = { hex: f.getSerialNumberHex() };\n    } else if (y.issuer != null && y.serial)\n      v = y.issuer, o = y.serial;\n    else\n      throw new t(\"cert or issuer and serial parameter not specified\");\n    var d = new p([{ dn: v }]), g = new s(o), S = new n({ array: [d, g] });\n    return S.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.IssuerSerial, a.asn1.ASN1Object);\na.asn1.cms.SignerIdentifier = function(e) {\n  var t = a, r = t.asn1;\n  r.DERInteger, r.DERSequence;\n  var i = r.cms, s = i.IssuerAndSerialNumber, n = i.SubjectKeyIdentifier, h = r.x509;\n  h.X500Name, i.SignerIdentifier.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params;\n    if (u.type == \"isssn\") {\n      var p = new s(u);\n      return p.tohex();\n    } else if (u.type == \"skid\") {\n      var c = new n(u);\n      return c.tohex();\n    } else\n      throw new Error(\"wrong property for isssn or skid\");\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SignerIdentifier, a.asn1.ASN1Object);\na.asn1.cms.IssuerAndSerialNumber = function(e) {\n  var t = a, r = t.asn1, i = r.DERInteger, s = r.DERSequence, n = r.cms, h = r.x509, u = h.X500Name, p = L, c = Error;\n  n.IssuerAndSerialNumber.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var y = this.params, v, o;\n    if (typeof y == \"string\" && y.indexOf(\"-----BEGIN\") != -1 || y.cert != null) {\n      var l;\n      y.cert != null ? l = y.cert : l = y;\n      var f = new p();\n      f.readCertPEM(l), v = f.getIssuer(), o = { hex: f.getSerialNumberHex() };\n    } else if (y.issuer != null && y.serial)\n      v = y.issuer, o = y.serial;\n    else\n      throw new c(\"cert or issuer and serial parameter not specified\");\n    var d = new u(v), g = new i(o), S = new s({ array: [d, g] });\n    return S.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(y) {\n    this.params = y;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.IssuerAndSerialNumber, a.asn1.ASN1Object);\na.asn1.cms.SubjectKeyIdentifier = function(e) {\n  var t = a, r = t.asn1;\n  r.DERInteger, r.DERSequence;\n  var i = r.ASN1Util.newObject, s = r.cms;\n  s.IssuerAndSerialName, s.SubjectKeyIdentifier;\n  var n = r.x509;\n  n.X500Name;\n  var h = L, u = Error;\n  s.SubjectKeyIdentifier.superclass.constructor.call(this), this.tohex = function() {\n    var p = this.params;\n    if (p.cert == null && p.skid == null)\n      throw new u(\"property cert nor skid undefined\");\n    var c;\n    if (p.cert != null) {\n      var y = new h(p.cert), v = y.getExtSubjectKeyIdentifier();\n      c = v.kid.hex;\n    } else\n      p.skid != null && (c = p.skid);\n    var o = i({ tag: { tage: \"a0\", obj: { octstr: { hex: c } } } });\n    return o.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SubjectKeyIdentifier, a.asn1.ASN1Object);\na.asn1.cms.AttributeList = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSet, n = i.cms;\n  n.AttributeList.superclass.constructor.call(this), this.params = null, this.hTLV = null, this.setByParam = function(h) {\n    this.params = h;\n  }, this.tohex = function() {\n    var h = this.params;\n    if (this.hTLV != null)\n      return this.hTLV;\n    var u = !0;\n    h.sortflag != null && (u = h.sortflag);\n    for (var p = h.array, c = [], y = 0; y < p.length; y++) {\n      var v = p[y], o = v.attr;\n      if (o == \"contentType\")\n        c.push(new n.ContentType(v));\n      else if (o == \"messageDigest\")\n        c.push(new n.MessageDigest(v));\n      else if (o == \"signingTime\")\n        c.push(new n.SigningTime(v));\n      else if (o == \"signingCertificate\")\n        c.push(new n.SigningCertificate(v));\n      else if (o == \"signingCertificateV2\")\n        c.push(new n.SigningCertificateV2(v));\n      else if (o == \"signaturePolicyIdentifier\")\n        c.push(new a.asn1.cades.SignaturePolicyIdentifier(v));\n      else if (o == \"signatureTimeStamp\" || o == \"timeStampToken\")\n        c.push(new a.asn1.cades.SignatureTimeStamp(v));\n      else\n        throw new t(\"unknown attr: \" + o);\n    }\n    var l = new s({ array: c, sortflag: u });\n    return this.hTLV = l.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.AttributeList, a.asn1.ASN1Object);\na.asn1.cms.SignerInfo = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERInteger, n = i.DEROctetString, h = i.DERSequence, u = i.DERTaggedObject, p = i.cms, c = p.SignerIdentifier, y = p.AttributeList;\n  p.ContentType, p.EncapsulatedContentInfo, p.MessageDigest, p.SignedData;\n  var v = i.x509, o = v.AlgorithmIdentifier, l = r.crypto, f = k;\n  p.SignerInfo.superclass.constructor.call(this), this.params = null, this.sign = function() {\n    var d = this.params, g = d.sigalg, S = new y(d.sattrs).tohex(), b = f.getKey(d.signkey), D = new l.Signature({ alg: g });\n    D.init(b), D.updateHex(S);\n    var A = D.sign();\n    d.sighex = A;\n  }, this.tohex = function() {\n    var d = this.params, g = [];\n    if (g.push(new s({ int: d.version })), g.push(new c(d.id)), g.push(new o({ name: d.hashalg })), d.sattrs != null) {\n      var S = new y(d.sattrs);\n      try {\n        g.push(new u({ tag: \"a0\", explicit: !1, obj: S }));\n      } catch (D) {\n        throw new t(\"si sattr error: \" + D);\n      }\n    }\n    if (d.sigalgfield != null ? g.push(new o({ name: d.sigalgfield })) : g.push(new o({ name: d.sigalg })), d.sighex == null && d.signkey != null && this.sign(), g.push(new n({ hex: d.sighex })), d.uattrs != null) {\n      var S = new y(d.uattrs);\n      try {\n        g.push(new u({ tag: \"a1\", explicit: !1, obj: S }));\n      } catch (A) {\n        throw new t(\"si uattr error: \" + A);\n      }\n    }\n    var b = new h({ array: g });\n    return b.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SignerInfo, a.asn1.ASN1Object);\na.asn1.cms.EncapsulatedContentInfo = function(e) {\n  var t = a, r = t.asn1, i = r.DERTaggedObject, s = r.DERSequence, n = r.DERObjectIdentifier, h = r.DEROctetString, u = r.cms;\n  u.EncapsulatedContentInfo.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var p = this.params, c = [];\n    if (c.push(new n(p.type)), p.content != null && (p.content.hex != null || p.content.str != null) && p.isDetached != !0) {\n      var y = new h(p.content), v = new i({ tag: \"a0\", explicit: !0, obj: y });\n      c.push(v);\n    }\n    var o = new s({ array: c });\n    return o.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(p) {\n    this.params = p;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.EncapsulatedContentInfo, a.asn1.ASN1Object);\na.asn1.cms.ContentInfo = function(e) {\n  var t = a, r = t.asn1, i = r.DERTaggedObject, s = r.DERSequence, n = r.DERObjectIdentifier, h = r.x509;\n  h.OID.name2obj, a.asn1.cms.ContentInfo.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params, p = [];\n    p.push(new n(u.type));\n    var c = new i({ tag: \"a0\", explicit: !0, obj: u.obj });\n    p.push(c);\n    var y = new s({ array: p });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(u) {\n    this.params = u;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.ContentInfo, a.asn1.ASN1Object);\na.asn1.cms.SignedData = function(e) {\n  var t = a, r = t.asn1;\n  r.ASN1Object;\n  var i = r.DERInteger, s = r.DERSet, n = r.DERSequence;\n  r.DERTaggedObject;\n  var h = r.cms, u = h.EncapsulatedContentInfo, p = h.SignerInfo, c = h.ContentInfo, y = h.CertificateSet, v = h.RevocationInfoChoices, o = r.x509, l = o.AlgorithmIdentifier;\n  a.asn1.cms.SignedData.superclass.constructor.call(this), this.params = null, this.checkAndFixParam = function() {\n    var f = this.params;\n    this._setDigestAlgs(f), this._setContentTypeByEContent(f), this._setMessageDigestByEContent(f), this._setSignerInfoVersion(f), this._setSignedDataVersion(f);\n  }, this._setDigestAlgs = function(f) {\n    for (var d = {}, g = f.sinfos, S = 0; S < g.length; S++) {\n      var b = g[S];\n      d[b.hashalg] = 1;\n    }\n    f.hashalgs = Object.keys(d).sort();\n  }, this._setContentTypeByEContent = function(f) {\n    for (var d = f.econtent.type, g = f.sinfos, S = 0; S < g.length; S++) {\n      var b = g[S], D = this._getAttrParamByName(b, \"contentType\");\n      D.type = d;\n    }\n  }, this._setMessageDigestByEContent = function(f) {\n    var d = f.econtent;\n    f.econtent.type;\n    var g = d.content.hex;\n    g == null && d.type == \"data\" && d.content.str != null && (g = Pe(d.content.str));\n    for (var S = f.sinfos, b = 0; b < S.length; b++) {\n      var D = S[b], A = D.hashalg, I = this._getAttrParamByName(D, \"messageDigest\"), m = a.crypto.Util.hashHex(g, A);\n      I.hex = m;\n    }\n  }, this._getAttrParamByName = function(f, d) {\n    for (var g = f.sattrs.array, S = 0; S < g.length; S++)\n      if (g[S].attr == d)\n        return g[S];\n  }, this._setSignerInfoVersion = function(f) {\n    for (var d = f.sinfos, g = 0; g < d.length; g++) {\n      var S = d[g], b = 1;\n      S.id.type == \"skid\" && (b = 3), S.version = b;\n    }\n  }, this._setSignedDataVersion = function(f) {\n    var d = this._getSignedDataVersion(f);\n    f.version = d;\n  }, this._getSignedDataVersion = function(f) {\n    if (f.revinfos != null)\n      for (var d = f.revinfos, g = 0; g < d.length; g++) {\n        var S = d[g];\n        if (S.ocsp != null)\n          return 5;\n      }\n    for (var b = f.sinfos, g = 0; g < b.length; g++) {\n      var D = f.sinfos[g];\n      if (D.version == 3)\n        return 3;\n    }\n    return f.econtent.type != \"data\" ? 3 : 1;\n  }, this.tohex = function() {\n    var f = this.params;\n    this.getEncodedHexPrepare != null && this.getEncodedHexPrepare(), f.fixed != !0 && this.checkAndFixParam();\n    var d = [];\n    d.push(new i({ int: f.version }));\n    for (var g = [], S = 0; S < f.hashalgs.length; S++) {\n      var b = f.hashalgs[S];\n      g.push(new l({ name: b }));\n    }\n    d.push(new s({ array: g })), d.push(new u(f.econtent)), f.certs != null && d.push(new y(f.certs)), f.revinfos != null && d.push(new v(f.revinfos));\n    for (var D = [], S = 0; S < f.sinfos.length; S++) {\n      var A = f.sinfos[S];\n      D.push(new p(A));\n    }\n    d.push(new s({ array: D }));\n    var I = new n({ array: d });\n    return I.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.getContentInfo = function() {\n    var f = new c({ type: \"signed-data\", obj: this });\n    return f;\n  }, this.getContentInfoEncodedHex = function() {\n    return this.getContentInfo().tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SignedData, a.asn1.ASN1Object);\na.asn1.cms.CertificateSet = function(e) {\n  a.asn1.cms.CertificateSet.superclass.constructor.call(this);\n  var t = Error, r = a.asn1, i = r.DERTaggedObject, s = r.DERSet, n = r.ASN1Object;\n  this.params = null, this.tohex = function() {\n    var h = this.params, u = [], p;\n    if (h instanceof Array)\n      p = h;\n    else if (h.array != null)\n      p = h.array;\n    else\n      throw new t(\"cert array not specified\");\n    for (var c = 0; c < p.length; c++) {\n      var y = p[c], v = ie(y), o = new n();\n      o.hTLV = v, u.push(o);\n    }\n    var l = { array: u };\n    h.sortflag == !1 && (l.sortflag = !1);\n    var f = new s(l), d = new i({ tag: \"a0\", explicit: !1, obj: f });\n    return d.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.CertificateSet, a.asn1.ASN1Object);\na.asn1.cms.RevocationInfoChoices = function(e) {\n  a.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var t = this.params;\n    if (!t instanceof Array)\n      throw new Error(\"params is not array\");\n    for (var r = [], i = 0; i < t.length; i++)\n      r.push(new a.asn1.cms.RevocationInfoChoice(t[i]));\n    var s = a.asn1.ASN1Util.newObject({ tag: { tagi: \"a1\", obj: { set: r } } });\n    return s.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.RevocationInfoChoices, a.asn1.ASN1Object);\na.asn1.cms.RevocationInfoChoice = function(e) {\n  a.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var t = this.params;\n    if (t.crl != null && typeof t.crl == \"string\") {\n      var r = t.crl;\n      return t.crl.indexOf(\"-----BEGIN\") != -1 && (r = ie(t.crl)), r;\n    } else if (t.ocsp != null) {\n      var i = a.asn1.ASN1Util.newObject({ tag: { tagi: \"a1\", obj: new a.asn1.cms.OtherRevocationFormat(t) } });\n      return i.tohex();\n    } else\n      throw new Error(\"property crl or ocsp undefined\");\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.RevocationInfoChoice, a.asn1.ASN1Object);\na.asn1.cms.OtherRevocationFormat = function(e) {\n  a.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);\n  var t = Error, r = a, i = r.asn1, s = i.ASN1Util.newObject, n = r.lang.String.isHex;\n  this.params = null, this.tohex = function() {\n    var h = this.params;\n    if (h.ocsp == null)\n      throw new t(\"property ocsp not specified\");\n    if (!n(h.ocsp) || !V.isASN1HEX(h.ocsp))\n      throw new t(\"ocsp value not ASN.1 hex string\");\n    var u = s({ seq: [{ oid: \"1.3.6.1.5.5.7.16.2\" }, { asn1: { tlv: h.ocsp } }] });\n    return u.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.OtherRevocationFormat, a.asn1.ASN1Object);\na.asn1.cms.CMSUtil = new function() {\n}();\na.asn1.cms.CMSUtil.newSignedData = function(e) {\n  return new a.asn1.cms.SignedData(e);\n};\na.asn1.cms.CMSUtil.verifySignedData = function(e) {\n  var t = a, r = t.asn1, i = r.cms;\n  i.SignerInfo, i.SignedData, i.SigningTime, i.SigningCertificate, i.SigningCertificateV2;\n  var s = r.cades;\n  s.SignaturePolicyIdentifier;\n  var n = t.lang.String.isHex, h = V, u = h.getVbyList, p = h.getTLVbyList, c = h.getIdxbyList, y = h.getChildIdx, v = h.getTLV, o = h.oidname, l = t.crypto.Util.hashHex;\n  e.cms === void 0 && n(e.cms);\n  var f = e.cms, d = function(w, x) {\n    for (var F, P = 3; P < 6; P++)\n      if (F = c(w, 0, [1, 0, P]), F !== void 0) {\n        var T = w.substr(F, 2);\n        T === \"a0\" && (x.certsIdx = F), T === \"a1\" && (x.revinfosIdx = F), T === \"31\" && (x.signerinfosIdx = F);\n      }\n  }, g = function(w, x) {\n    var F = x.signerinfosIdx;\n    if (F !== void 0) {\n      var P = y(w, F);\n      x.signerInfoIdxList = P;\n      for (var T = 0; T < P.length; T++) {\n        var H = P[T], C = { idx: H };\n        S(w, C), x.signerInfos.push(C);\n      }\n    }\n  }, S = function(w, x) {\n    var F = x.idx;\n    x.signerid_issuer1 = p(w, F, [1, 0], \"30\"), x.signerid_serial1 = u(w, F, [1, 1], \"02\"), x.hashalg = o(u(w, F, [2, 0], \"06\"));\n    var P = c(w, F, [3], \"a0\");\n    x.idxSignedAttrs = P, b(w, x, P);\n    var T = y(w, F), H = T.length;\n    if (H < 6)\n      throw \"malformed SignerInfo\";\n    x.sigalg = o(u(w, F, [H - 2, 0], \"06\")), x.sigval = u(w, F, [H - 1], \"04\");\n  }, b = function(w, x, F) {\n    var P = y(w, F);\n    x.signedAttrIdxList = P;\n    for (var T = 0; T < P.length; T++) {\n      var H = P[T], C = u(w, H, [0], \"06\"), B;\n      C === \"2a864886f70d010905\" ? (B = W(u(w, H, [1, 0])), x.saSigningTime = B) : C === \"2a864886f70d010904\" && (B = u(w, H, [1, 0], \"04\"), x.saMessageDigest = B);\n    }\n  }, D = function(w, x) {\n    if (u(w, 0, [0], \"06\") !== \"2a864886f70d010702\")\n      return x;\n    x.cmsType = \"signedData\", x.econtent = u(w, 0, [1, 0, 2, 1, 0]), d(w, x), x.signerInfos = [], g(w, x);\n  }, A = function(w, x) {\n    for (var F = x.parse.signerInfos, P = F.length, T = !0, H = 0; H < P; H++) {\n      var C = F[H];\n      m(w, x, C), C.isValid || (T = !1);\n    }\n    x.isValid = T;\n  }, I = function(w, x, F, P) {\n    var T = x.parse.certsIdx, H;\n    if (x.certs === void 0) {\n      H = [], x.certkeys = [];\n      for (var C = y(w, T), B = 0; B < C.length; B++) {\n        var O = v(w, C[B]), j = new L();\n        j.readCertHex(O), H[B] = j, x.certkeys[B] = j.getPublicKey();\n      }\n      x.certs = H;\n    } else\n      H = x.certs;\n    x.cccc = H.length, x.cccci = C.length;\n    for (var B = 0; B < H.length; B++) {\n      var fe = j.getIssuerHex(), Z = j.getSerialNumberHex();\n      F.signerid_issuer1 === fe && F.signerid_serial1 === Z && (F.certkey_idx = B);\n    }\n  }, m = function(w, x, F, P) {\n    F.verifyDetail = {};\n    var T = F.verifyDetail, H = x.parse.econtent, C = F.hashalg, B = F.saMessageDigest;\n    T.validMessageDigest = !1, l(H, C) === B && (T.validMessageDigest = !0), I(w, x, F), T.validSignatureValue = !1;\n    var O = F.sigalg, j = \"31\" + v(w, F.idxSignedAttrs).substr(2);\n    F.signedattrshex = j;\n    var fe = x.certs[F.certkey_idx].getPublicKey(), Z = new a.crypto.Signature({ alg: O });\n    Z.init(fe), Z.updateHex(j);\n    var X = Z.verify(F.sigval);\n    T.validSignatureValue_isValid = X, X === !0 && (T.validSignatureValue = !0), F.isValid = !1, T.validMessageDigest && T.validSignatureValue && (F.isValid = !0);\n  }, E = { isValid: !1, parse: {} };\n  return D(f, E.parse), A(f, E), E;\n};\na.asn1.cms.CMSParser = function() {\n  var e = Error, t = L, r = new t(), i = V, s = i.getV, n = i.getTLV;\n  i.getIdxbyList;\n  var h = i.getTLVbyList, u = i.getTLVbyListEx, p = i.getVbyList, c = i.getVbyListEx, y = i.getChildIdx;\n  this.getCMSSignedData = function(v) {\n    var o = h(v, 0, [1, 0]), l = this.getSignedData(o);\n    return l;\n  }, this.getSignedData = function(v) {\n    var o = y(v, 0), l = {}, f = s(v, o[0]), d = parseInt(f, 16);\n    l.version = d;\n    var g = n(v, o[1]);\n    l.hashalgs = this.getHashAlgArray(g);\n    var S = n(v, o[2]);\n    l.econtent = this.getEContent(S);\n    var b = u(v, 0, [\"[0]\"]);\n    b != null && (l.certs = this.getCertificateSet(b)), u(v, 0, [\"[1]\"]);\n    var D = u(v, 0, [3]);\n    return l.sinfos = this.getSignerInfos(D), l;\n  }, this.getHashAlgArray = function(v) {\n    for (var o = y(v, 0), l = new t(), f = [], d = 0; d < o.length; d++) {\n      var g = n(v, o[d]), S = l.getAlgorithmIdentifierName(g);\n      f.push(S);\n    }\n    return f;\n  }, this.getEContent = function(v) {\n    var o = {}, l = p(v, 0, [0]), f = p(v, 0, [1, 0]);\n    return o.type = a.asn1.x509.OID.oid2name(V.hextooidstr(l)), o.content = { hex: f }, o;\n  }, this.getSignerInfos = function(v) {\n    for (var o = [], l = y(v, 0), f = 0; f < l.length; f++) {\n      var d = n(v, l[f]), g = this.getSignerInfo(d);\n      o.push(g);\n    }\n    return o;\n  }, this.getSignerInfo = function(v) {\n    var o = {}, l = y(v, 0), f = i.getInt(v, l[0], -1);\n    f != -1 && (o.version = f);\n    var d = n(v, l[1]), g = this.getIssuerAndSerialNumber(d);\n    o.id = g;\n    var S = n(v, l[2]), b = r.getAlgorithmIdentifierName(S);\n    o.hashalg = b;\n    var D = u(v, 0, [\"[0]\"]);\n    if (D != null) {\n      var A = this.getAttributeList(D);\n      o.sattrs = A;\n    }\n    var I = u(v, 0, [3]), m = r.getAlgorithmIdentifierName(I);\n    o.sigalg = m;\n    var E = c(v, 0, [4]);\n    o.sighex = E;\n    var w = u(v, 0, [\"[1]\"]);\n    if (w != null) {\n      var x = this.getAttributeList(w);\n      o.uattrs = x;\n    }\n    return o;\n  }, this.getSignerIdentifier = function(v) {\n    if (v.substr(0, 2) == \"30\")\n      return this.getIssuerAndSerialNumber(v);\n    throw new Error(\"SKID of signerIdentifier not supported\");\n  }, this.getIssuerAndSerialNumber = function(v) {\n    var o = { type: \"isssn\" }, l = y(v, 0), f = n(v, l[0]);\n    o.issuer = r.getX500Name(f);\n    var d = s(v, l[1]);\n    return o.serial = { hex: d }, o;\n  }, this.getAttributeList = function(v) {\n    for (var o = [], l = y(v, 0), f = 0; f < l.length; f++) {\n      var d = n(v, l[f]), g = this.getAttribute(d);\n      o.push(g);\n    }\n    return { array: o };\n  }, this.getAttribute = function(v) {\n    var o = {}, l = y(v, 0), f = i.getOID(v, l[0]), d = a.asn1.x509.OID.oid2name(f);\n    o.attr = d;\n    var g = n(v, l[1]), S = y(g, 0);\n    if (S.length == 1)\n      o.valhex = n(g, S[0]);\n    else {\n      for (var b = [], D = 0; D < S.length; D++)\n        b.push(n(g, S[D]));\n      o.valhex = b;\n    }\n    return d == \"contentType\" ? this.setContentType(o) : d == \"messageDigest\" ? this.setMessageDigest(o) : d == \"signingTime\" ? this.setSigningTime(o) : d == \"signingCertificate\" ? this.setSigningCertificate(o) : d == \"signingCertificateV2\" ? this.setSigningCertificateV2(o) : d == \"signaturePolicyIdentifier\" && this.setSignaturePolicyIdentifier(o), o;\n  }, this.setContentType = function(v) {\n    var o = i.getOIDName(v.valhex, 0, null);\n    o != null && (v.type = o, delete v.valhex);\n  }, this.setSigningTime = function(v) {\n    var o = s(v.valhex, 0), l = W(o);\n    v.str = l, delete v.valhex;\n  }, this.setMessageDigest = function(v) {\n    var o = s(v.valhex, 0);\n    v.hex = o, delete v.valhex;\n  }, this.setSigningCertificate = function(v) {\n    var o = y(v.valhex, 0);\n    if (o.length > 0) {\n      for (var l = n(v.valhex, o[0]), f = y(l, 0), d = [], g = 0; g < f.length; g++) {\n        var S = n(l, f[g]), b = this.getESSCertID(S);\n        d.push(b);\n      }\n      v.array = d;\n    }\n    if (o.length > 1) {\n      var D = n(v.valhex, o[1]);\n      v.polhex = D;\n    }\n    delete v.valhex;\n  }, this.setSignaturePolicyIdentifier = function(v) {\n    var o = y(v.valhex, 0);\n    if (o.length > 0) {\n      var l = i.getOID(v.valhex, o[0]);\n      v.oid = l;\n    }\n    if (o.length > 1) {\n      var f = new t(), d = y(v.valhex, o[1]), g = n(v.valhex, d[0]), S = f.getAlgorithmIdentifierName(g);\n      v.alg = S;\n      var b = s(v.valhex, d[1]);\n      v.hash = b;\n    }\n    delete v.valhex;\n  }, this.setSigningCertificateV2 = function(v) {\n    var o = y(v.valhex, 0);\n    if (o.length > 0) {\n      for (var l = n(v.valhex, o[0]), f = y(l, 0), d = [], g = 0; g < f.length; g++) {\n        var S = n(l, f[g]), b = this.getESSCertIDv2(S);\n        d.push(b);\n      }\n      v.array = d;\n    }\n    if (o.length > 1) {\n      var D = n(v.valhex, o[1]);\n      v.polhex = D;\n    }\n    delete v.valhex;\n  }, this.getESSCertID = function(v) {\n    var o = {}, l = y(v, 0);\n    if (l.length > 0) {\n      var f = s(v, l[0]);\n      o.hash = f;\n    }\n    if (l.length > 1) {\n      var d = n(v, l[1]), g = this.getIssuerSerial(d);\n      g.serial != null && (o.serial = g.serial), g.issuer != null && (o.issuer = g.issuer);\n    }\n    return o;\n  }, this.getESSCertIDv2 = function(v) {\n    var o = {}, l = y(v, 0);\n    if (l.length < 1 || 3 < l.length)\n      throw new e(\"wrong number of elements\");\n    var f = 0;\n    if (v.substr(l[0], 2) == \"30\") {\n      var d = n(v, l[0]);\n      o.alg = r.getAlgorithmIdentifierName(d), f++;\n    } else\n      o.alg = \"sha256\";\n    var g = s(v, l[f]);\n    if (o.hash = g, l.length > f + 1) {\n      var S = n(v, l[f + 1]), b = this.getIssuerSerial(S);\n      o.issuer = b.issuer, o.serial = b.serial;\n    }\n    return o;\n  }, this.getIssuerSerial = function(v) {\n    var o = {}, l = y(v, 0), f = n(v, l[0]), d = r.getGeneralNames(f), g = d[0].dn;\n    o.issuer = g;\n    var S = s(v, l[1]);\n    return o.serial = { hex: S }, o;\n  }, this.getCertificateSet = function(v) {\n    for (var o = y(v, 0), l = [], f = 0; f < o.length; f++) {\n      var d = n(v, o[f]);\n      if (d.substr(0, 2) == \"30\") {\n        var g = de(d, \"CERTIFICATE\");\n        l.push(g);\n      }\n    }\n    return { array: l, sortflag: !1 };\n  };\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.tsp > \"u\" || !a.asn1.tsp) && (a.asn1.tsp = {});\na.asn1.tsp.TimeStampToken = function(e) {\n  var t = a, r = t.asn1, i = r.tsp;\n  i.TimeStampToken.superclass.constructor.call(this), this.params = null, this.getEncodedHexPrepare = function() {\n    var s = new i.TSTInfo(this.params.econtent.content);\n    this.params.econtent.content.hex = s.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.TimeStampToken, a.asn1.cms.SignedData);\na.asn1.tsp.TSTInfo = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERInteger, n = r.DERBoolean, h = r.DERGeneralizedTime, u = r.DERObjectIdentifier, p = r.DERTaggedObject, c = r.tsp, y = c.MessageImprint, v = c.Accuracy;\n  r.x509.X500Name;\n  var o = r.x509.GeneralName;\n  if (c.TSTInfo.superclass.constructor.call(this), this.dVersion = new s({ int: 1 }), this.dPolicy = null, this.dMessageImprint = null, this.dSerial = null, this.dGenTime = null, this.dAccuracy = null, this.dOrdering = null, this.dNonce = null, this.dTsa = null, this.tohex = function() {\n    var l = [this.dVersion];\n    if (this.dPolicy == null)\n      throw new Error(\"policy shall be specified.\");\n    if (l.push(this.dPolicy), this.dMessageImprint == null)\n      throw new Error(\"messageImprint shall be specified.\");\n    if (l.push(this.dMessageImprint), this.dSerial == null)\n      throw new Error(\"serialNumber shall be specified.\");\n    if (l.push(this.dSerial), this.dGenTime == null)\n      throw new Error(\"genTime shall be specified.\");\n    l.push(this.dGenTime), this.dAccuracy != null && l.push(this.dAccuracy), this.dOrdering != null && l.push(this.dOrdering), this.dNonce != null && l.push(this.dNonce), this.dTsa != null && l.push(this.dTsa);\n    var f = new i({ array: l });\n    return this.hTLV = f.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0) {\n    if (typeof e.policy == \"string\") {\n      if (!e.policy.match(/^[0-9.]+$/))\n        throw \"policy shall be oid like 0.1.4.134\";\n      this.dPolicy = new u({ oid: e.policy });\n    }\n    e.messageImprint !== void 0 && (this.dMessageImprint = new y(e.messageImprint)), e.serial !== void 0 && (this.dSerial = new s(e.serial)), e.genTime !== void 0 && (this.dGenTime = new h(e.genTime)), e.accuracy !== void 0 && (this.dAccuracy = new v(e.accuracy)), e.ordering !== void 0 && e.ordering == !0 && (this.dOrdering = new n()), e.nonce !== void 0 && (this.dNonce = new s(e.nonce)), e.tsa !== void 0 && (this.dTsa = new p({ tag: \"a0\", explicit: !0, obj: new o({ dn: e.tsa }) }));\n  }\n};\nN(a.asn1.tsp.TSTInfo, a.asn1.ASN1Object);\na.asn1.tsp.Accuracy = function(e) {\n  var t = a, r = t.asn1, i = r.ASN1Util.newObject;\n  r.tsp.Accuracy.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var s = this.params, n = [];\n    return s.seconds != null && typeof s.seconds == \"number\" && n.push({ int: s.seconds }), s.millis != null && typeof s.millis == \"number\" && n.push({ tag: { tagi: \"80\", obj: { int: s.millis } } }), s.micros != null && typeof s.micros == \"number\" && n.push({ tag: { tagi: \"81\", obj: { int: s.micros } } }), i({ seq: n }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.Accuracy, a.asn1.ASN1Object);\na.asn1.tsp.MessageImprint = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DEROctetString, n = r.x509, h = n.AlgorithmIdentifier;\n  r.tsp.MessageImprint.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params, p = new h({ name: u.alg }), c = new s({ hex: u.hash }), y = new i({ array: [p, c] });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.tsp.MessageImprint, a.asn1.ASN1Object);\na.asn1.tsp.TimeStampReq = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERInteger, n = r.DERBoolean;\n  r.ASN1Object;\n  var h = r.DERObjectIdentifier, u = r.tsp, p = u.MessageImprint;\n  u.TimeStampReq.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var c = this.params, y = [];\n    y.push(new s({ int: 1 })), c.messageImprint instanceof a.asn1.ASN1Object ? y.push(c.messageImprint) : y.push(new p(c.messageImprint)), c.policy != null && y.push(new h(c.policy)), c.nonce != null && y.push(new s(c.nonce)), c.certreq == !0 && y.push(new n());\n    var v = new i({ array: y });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.TimeStampReq, a.asn1.ASN1Object);\na.asn1.tsp.TimeStampResp = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence;\n  r.ASN1Object;\n  var s = r.tsp, n = s.PKIStatusInfo;\n  s.TimeStampResp.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var h = this.params, u = [];\n    if (h.econtent != null || h.tst != null)\n      if (h.statusinfo != null ? u.push(new n(h.statusinfo)) : u.push(new n(\"granted\")), h.econtent != null)\n        u.push(new s.TimeStampToken(h).getContentInfo());\n      else if (h.tst instanceof r.ASN1Object)\n        u.push(h.tst);\n      else\n        throw new Error(\"improper member tst value\");\n    else if (h.statusinfo != null)\n      u.push(new n(h.statusinfo));\n    else\n      throw new Error(\"parameter for token nor statusinfo not specified\");\n    var p = new i({ array: u });\n    return p.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.TimeStampResp, a.asn1.ASN1Object);\na.asn1.tsp.PKIStatusInfo = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.tsp, h = n.PKIStatus, u = n.PKIFreeText, p = n.PKIFailureInfo;\n  n.PKIStatusInfo.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var c = this.params, y = [];\n    if (typeof c == \"string\")\n      y.push(new h(c));\n    else {\n      if (c.status == null)\n        throw new t(\"property 'status' unspecified\");\n      y.push(new h(c.status)), c.statusstr != null && y.push(new u(c.statusstr)), c.failinfo != null && y.push(new p(c.failinfo));\n    }\n    var v = new s({ array: y });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.PKIStatusInfo, a.asn1.ASN1Object);\na.asn1.tsp.PKIStatus = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERInteger, n = i.tsp;\n  n.PKIStatus.superclass.constructor.call(this);\n  var h = { granted: 0, grantedWithMods: 1, rejection: 2, waiting: 3, revocationWarning: 4, revocationNotification: 5 };\n  this.params = null, this.tohex = function() {\n    var u = this.params, p;\n    if (typeof u == \"string\")\n      try {\n        p = h[u];\n      } catch {\n        throw new t(\"undefined name: \" + u);\n      }\n    else if (typeof u == \"number\")\n      p = u;\n    else\n      throw new t(\"unsupported params\");\n    return new s({ int: p }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.PKIStatus, a.asn1.ASN1Object);\na.asn1.tsp.PKIFreeText = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.DERUTF8String, h = i.tsp;\n  h.PKIFreeText.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params;\n    if (!u instanceof Array)\n      throw new t(\"wrong params: not array\");\n    for (var p = [], c = 0; c < u.length; c++)\n      p.push(new n({ str: u[c] }));\n    var y = new s({ array: p });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.PKIFreeText, a.asn1.ASN1Object);\na.asn1.tsp.PKIFailureInfo = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERBitString, n = i.tsp, h = n.PKIFailureInfo, u = { badAlg: 0, badRequest: 2, badDataFormat: 5, timeNotAvailable: 14, unacceptedPolicy: 15, unacceptedExtension: 16, addInfoNotAvailable: 17, systemFailure: 25 };\n  h.superclass.constructor.call(this), this.params = null, this.getBinValue = function() {\n    var p = this.params, c = 0;\n    if (typeof p == \"number\" && 0 <= p && p <= 25) {\n      c |= 1 << p;\n      for (var y = c.toString(2), v = \"\", o = y.length - 1; o >= 0; o--)\n        v += y[o];\n      return v;\n    } else {\n      if (typeof p == \"string\" && u[p] != null)\n        return rt([p], u);\n      if (typeof p == \"object\" && p.length != null)\n        return rt(p, u);\n      throw new t(\"wrong params\");\n    }\n  }, this.tohex = function() {\n    this.params;\n    var p = this.getBinValue();\n    return new s({ bin: p }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.PKIFailureInfo, a.asn1.ASN1Object);\na.asn1.tsp.AbstractTSAAdapter = function(e) {\n  this.getTSTHex = function(t, r) {\n    throw \"not implemented yet\";\n  };\n};\na.asn1.tsp.SimpleTSAAdapter = function(e) {\n  var t = a, r = t.asn1, i = r.tsp, s = t.crypto.Util.hashHex;\n  i.SimpleTSAAdapter.superclass.constructor.call(this), this.params = null, this.serial = 0, this.getTSTHex = function(n, h) {\n    var u = s(n, h);\n    this.params.econtent.content.messageImprint = { alg: h, hash: u }, this.params.econtent.content.serial = { int: this.serial++ };\n    var p = Math.floor(Math.random() * 1e9);\n    this.params.econtent.content.nonce = { int: p };\n    var c = new i.TimeStampToken(this.params);\n    return c.getContentInfoEncodedHex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.tsp.SimpleTSAAdapter, a.asn1.tsp.AbstractTSAAdapter);\na.asn1.tsp.FixedTSAAdapter = function(e) {\n  var t = a, r = t.asn1, i = r.tsp, s = t.crypto.Util.hashHex;\n  i.FixedTSAAdapter.superclass.constructor.call(this), this.params = null, this.getTSTHex = function(n, h) {\n    var u = s(n, h);\n    this.params.econtent.content.messageImprint = { alg: h, hash: u };\n    var p = new i.TimeStampToken(this.params);\n    return p.getContentInfoEncodedHex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.tsp.FixedTSAAdapter, a.asn1.tsp.AbstractTSAAdapter);\na.asn1.tsp.TSPUtil = new function() {\n}();\na.asn1.tsp.TSPUtil.newTimeStampToken = function(e) {\n  return new a.asn1.tsp.TimeStampToken(e);\n};\na.asn1.tsp.TSPUtil.parseTimeStampReq = function(e) {\n  var t = new a.asn1.tsp.TSPParser();\n  return t.getTimeStampReq(e);\n};\na.asn1.tsp.TSPUtil.parseMessageImprint = function(e) {\n  var t = new a.asn1.tsp.TSPParser();\n  return t.getMessageImprint(e);\n};\na.asn1.tsp.TSPParser = function() {\n  var e = L, t = new e(), r = V, i = r.getV, s = r.getTLV, n = r.getIdxbyList;\n  r.getTLVbyListEx;\n  var h = r.getChildIdx, u = [\"granted\", \"grantedWithMods\", \"rejection\", \"waiting\", \"revocationWarning\", \"revocationNotification\"], p = { 0: \"badAlg\", 2: \"badRequest\", 5: \"badDataFormat\", 14: \"timeNotAvailable\", 15: \"unacceptedPolicy\", 16: \"unacceptedExtension\", 17: \"addInfoNotAvailable\", 25: \"systemFailure\" };\n  this.getResponse = function(c) {\n    var y = h(c, 0);\n    if (y.length == 1)\n      return this.getPKIStatusInfo(s(c, y[0]));\n    if (y.length > 1) {\n      var v = this.getPKIStatusInfo(s(c, y[0])), o = s(c, y[1]), l = this.getToken(o);\n      return l.statusinfo = v, l;\n    }\n  }, this.getToken = function(c) {\n    var y = new a.asn1.cms.CMSParser(), v = y.getCMSSignedData(c);\n    return this.setTSTInfo(v), v;\n  }, this.setTSTInfo = function(c) {\n    var y = c.econtent;\n    if (y.type == \"tstinfo\") {\n      var v = y.content.hex, o = this.getTSTInfo(v);\n      y.content = o;\n    }\n  }, this.getTSTInfo = function(c) {\n    var y = {}, v = h(c, 0), o = i(c, v[1]);\n    y.policy = ft(o);\n    var l = s(c, v[2]);\n    y.messageImprint = this.getMessageImprint(l);\n    var f = i(c, v[3]);\n    y.serial = { hex: f };\n    var d = i(c, v[4]);\n    y.genTime = { str: W(d) };\n    var g = 0;\n    if (v.length > 5 && c.substr(v[5], 2) == \"30\") {\n      var S = s(c, v[5]);\n      y.accuracy = this.getAccuracy(S), g++;\n    }\n    if (v.length > 5 + g && c.substr(v[5 + g], 2) == \"01\") {\n      var b = i(c, v[5 + g]);\n      b == \"ff\" && (y.ordering = !0), g++;\n    }\n    if (v.length > 5 + g && c.substr(v[5 + g], 2) == \"02\") {\n      var D = i(c, v[5 + g]);\n      y.nonce = { hex: D }, g++;\n    }\n    if (v.length > 5 + g && c.substr(v[5 + g], 2) == \"a0\") {\n      var A = s(c, v[5 + g]);\n      A = \"30\" + A.substr(2), pGeneralNames = t.getGeneralNames(A);\n      var I = pGeneralNames[0].dn;\n      y.tsa = I, g++;\n    }\n    if (v.length > 5 + g && c.substr(v[5 + g], 2) == \"a1\") {\n      var m = s(c, v[5 + g]);\n      m = \"30\" + m.substr(2);\n      var E = t.getExtParamArray(m);\n      y.ext = E, g++;\n    }\n    return y;\n  }, this.getAccuracy = function(c) {\n    for (var y = {}, v = h(c, 0), o = 0; o < v.length; o++) {\n      var l = c.substr(v[o], 2), f = i(c, v[o]), d = parseInt(f, 16);\n      l == \"02\" ? y.seconds = d : l == \"80\" ? y.millis = d : l == \"81\" && (y.micros = d);\n    }\n    return y;\n  }, this.getMessageImprint = function(c) {\n    if (c.substr(0, 2) != \"30\")\n      throw new Error(\"head of messageImprint hex shall be x30\");\n    var y = {};\n    h(c, 0);\n    var v = n(c, 0, [0, 0]), o = i(c, v), l = r.hextooidstr(o), f = a.asn1.x509.OID.oid2name(l);\n    if (f == \"\")\n      throw new Error(\"hashAlg name undefined: \" + l);\n    var d = f, g = n(c, 0, [1]);\n    return y.alg = d, y.hash = i(c, g), y;\n  }, this.getPKIStatusInfo = function(c) {\n    var y = {}, v = h(c, 0), o = 0;\n    try {\n      var l = i(c, v[0]), f = parseInt(l, 16);\n      y.status = u[f];\n    } catch {\n    }\n    if (v.length > 1 && c.substr(v[1], 2) == \"30\") {\n      var d = s(c, v[1]);\n      y.statusstr = this.getPKIFreeText(d), o++;\n    }\n    if (v.length > o && c.substr(v[1 + o], 2) == \"03\") {\n      var g = s(c, v[1 + o]);\n      y.failinfo = this.getPKIFailureInfo(g);\n    }\n    return y;\n  }, this.getPKIFreeText = function(c) {\n    for (var y = [], v = h(c, 0), o = 0; o < v.length; o++)\n      y.push(r.getString(c, v[o]));\n    return y;\n  }, this.getPKIFailureInfo = function(c) {\n    var y = r.getInt(c, 0);\n    return p[y] != null ? p[y] : y;\n  }, this.getTimeStampReq = function(c) {\n    var y = {};\n    y.certreq = !1;\n    var v = h(c, 0);\n    if (v.length < 2)\n      throw new Error(\"TimeStampReq must have at least 2 items\");\n    var o = s(c, v[1]);\n    y.messageImprint = a.asn1.tsp.TSPUtil.parseMessageImprint(o);\n    for (var l = 2; l < v.length; l++) {\n      var f = v[l], d = c.substr(f, 2);\n      if (d == \"06\") {\n        var g = i(c, f);\n        y.policy = r.hextooidstr(g);\n      }\n      d == \"02\" && (y.nonce = i(c, f)), d == \"01\" && (y.certreq = !0);\n    }\n    return y;\n  };\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.cades > \"u\" || !a.asn1.cades) && (a.asn1.cades = {});\na.asn1.cades.SignaturePolicyIdentifier = function(e) {\n  var t = a, r = t.asn1, i = r.cades, s = i.SignaturePolicyId;\n  i.SignaturePolicyIdentifier.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.15\", this.params = null, this.getValueArray = function() {\n    return [new s(this.params)];\n  }, this.setByParam = function(n) {\n    this.params = n;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.SignaturePolicyIdentifier, a.asn1.cms.Attribute);\na.asn1.cades.SignaturePolicyId = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERObjectIdentifier, n = r.x509;\n  n.AlgorithmIdentifier;\n  var h = r.cades, u = h.SignaturePolicyId, p = h.OtherHashAlgAndValue;\n  u.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var c = this.params, y = [];\n    y.push(new s(c.oid)), y.push(new p(c));\n    var v = new i({ array: y });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(c) {\n    this.params = c;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.SignaturePolicyId, a.asn1.ASN1Object);\na.asn1.cades.OtherHashAlgAndValue = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.DEROctetString, h = i.x509, u = h.AlgorithmIdentifier, p = i.cades, c = p.OtherHashAlgAndValue;\n  c.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var y = this.params;\n    if (y.alg == null)\n      throw new t(\"property 'alg' not specified\");\n    if (y.hash == null && y.cert == null)\n      throw new t(\"property 'hash' nor 'cert' not specified\");\n    var v = null;\n    if (y.hash != null)\n      v = y.hash;\n    else if (y.cert != null) {\n      if (typeof y.cert != \"string\")\n        throw new t(\"cert not string\");\n      var o = y.cert;\n      y.cert.indexOf(\"-----BEGIN\") != -1 && (o = ie(y.cert)), v = a.crypto.Util.hashHex(o, y.alg);\n    }\n    var l = [];\n    l.push(new u({ name: y.alg })), l.push(new n({ hex: v }));\n    var f = new s({ array: l });\n    return f.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.OtherHashAlgAndValue, a.asn1.ASN1Object);\na.asn1.cades.OtherHashValue = function(e) {\n  a.asn1.cades.OtherHashValue.superclass.constructor.call(this);\n  var t = Error, r = a;\n  r.lang.String.isHex;\n  var i = r.asn1, s = i.DEROctetString;\n  r.crypto.Util.hashHex, this.params = null, this.tohex = function() {\n    var n = this.params;\n    if (n.hash == null && n.cert == null)\n      throw new t(\"hash or cert not specified\");\n    var h = null;\n    if (n.hash != null)\n      h = n.hash;\n    else if (n.cert != null) {\n      if (typeof n.cert != \"string\")\n        throw new t(\"cert not string\");\n      var u = n.cert;\n      n.cert.indexOf(\"-----BEGIN\") != -1 && (u = ie(n.cert)), h = a.crypto.Util.hashHex(u, \"sha1\");\n    }\n    return new s({ hex: h }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.OtherHashValue, a.asn1.ASN1Object);\na.asn1.cades.SignatureTimeStamp = function(e) {\n  var t = Error, r = a, i = r.lang.String.isHex, s = r.asn1, n = s.ASN1Object;\n  s.x509;\n  var h = s.cades;\n  h.SignatureTimeStamp.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.14\", this.params = null, this.getValueArray = function() {\n    var u = this.params;\n    if (u.tst != null)\n      if (i(u.tst)) {\n        var p = new n();\n        return p.hTLV = u.tst, [p];\n      } else {\n        if (u.tst instanceof n)\n          return [u.tst];\n        throw new t(\"params.tst has wrong value\");\n      }\n    else if (u.res != null) {\n      var c = u.res;\n      if (c instanceof n && (c = c.tohex()), typeof c != \"string\" || !i(c))\n        throw new t(\"params.res has wrong value\");\n      V.getTLVbyList(c, 0, [1]);\n      var p = new n();\n      return p.hTLV = u.tst, [p];\n    }\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.SignatureTimeStamp, a.asn1.cms.Attribute);\na.asn1.cades.CompleteCertificateRefs = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.cades, h = n.OtherCertID, u = r.lang.String.isHex;\n  n.CompleteCertificateRefs.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.21\", this.params = null, this.getValueArray = function() {\n    for (var p = this.params, c = [], y = 0; y < p.array.length; y++) {\n      var v = p.array[y];\n      if (typeof v == \"string\")\n        if (v.indexOf(\"-----BEGIN\") != -1)\n          v = { cert: v };\n        else if (u(v))\n          v = { hash: v };\n        else\n          throw new t(\"unsupported value: \" + v);\n      p.alg != null && v.alg == null && (v.alg = p.alg), p.hasis != null && v.hasis == null && (v.hasis = p.hasis);\n      var o = new h(v);\n      c.push(o);\n    }\n    var l = new s({ array: c });\n    return [l];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.CompleteCertificateRefs, a.asn1.cms.Attribute);\na.asn1.cades.OtherCertID = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.cms, n = s.IssuerSerial, h = r.cades, u = h.OtherHashValue, p = h.OtherHashAlgAndValue;\n  h.OtherCertID.superclass.constructor.call(this), this.params = e, this.tohex = function() {\n    var c = this.params;\n    typeof c == \"string\" && (c.indexOf(\"-----BEGIN\") != -1 ? c = { cert: c } : _isHex(c) && (c = { hash: c }));\n    var y = [], v = null;\n    if (c.alg != null ? v = new p(c) : v = new u(c), y.push(v), c.cert != null && c.hasis == !0 || c.issuer != null && c.serial != null) {\n      var o = new n(c);\n      y.push(o);\n    }\n    var l = new i({ array: y });\n    return l.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.OtherCertID, a.asn1.ASN1Object);\na.asn1.cades.OtherHash = function(e) {\n  var t = a, r = t.asn1;\n  r.cms;\n  var i = r.cades, s = i.OtherHashAlgAndValue, n = i.OtherHashValue;\n  t.crypto.Util.hashHex;\n  var h = t.lang.String.isHex;\n  i.OtherHash.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params;\n    typeof u == \"string\" && (u.indexOf(\"-----BEGIN\") != -1 ? u = { cert: u } : h(u) && (u = { hash: u }));\n    var p = null;\n    return u.alg != null ? p = new s(u) : p = new n(u), p.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.OtherHash, a.asn1.ASN1Object);\na.asn1.cades.CAdESUtil = new function() {\n}();\na.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned = function(e) {\n  var t = new a.asn1.cms.CMSParser(), r = t.getCMSSignedData(e);\n  return r;\n};\na.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned = function(e, t, r) {\n  var i = V, s = i.getChildIdx, n = i.getTLV, h = i.getV, u = a, p = u.asn1, c = p.ASN1Object, y = p.cms, v = y.AttributeList, o = y.SignerInfo, l = {}, f = s(e, t);\n  if (f.length != 6)\n    throw \"not supported items for SignerInfo (!=6)\";\n  var d = f.shift();\n  l.version = n(e, d);\n  var g = f.shift();\n  l.si = n(e, g);\n  var S = f.shift();\n  l.digalg = n(e, S);\n  var b = f.shift();\n  l.sattrs = n(e, b);\n  var D = f.shift();\n  l.sigalg = n(e, D);\n  var A = f.shift();\n  l.sig = n(e, A), l.sigval = h(e, A);\n  var I = null;\n  return l.obj = new o(), I = new c(), I.hTLV = l.version, l.obj.dCMSVersion = I, I = new c(), I.hTLV = l.si, l.obj.dSignerIdentifier = I, I = new c(), I.hTLV = l.digalg, l.obj.dDigestAlgorithm = I, I = new c(), I.hTLV = l.sattrs, l.obj.dSignedAttrs = I, I = new c(), I.hTLV = l.sigalg, l.obj.dSigAlg = I, I = new c(), I.hTLV = l.sig, l.obj.dSig = I, l.obj.dUnsignedAttrs = new v(), l;\n};\n(typeof a.asn1.csr > \"u\" || !a.asn1.csr) && (a.asn1.csr = {});\na.asn1.csr.CertificationRequest = function(e) {\n  var t = a, r = t.asn1, i = r.DERBitString, s = r.DERSequence, n = r.csr;\n  r.x509;\n  var h = n.CertificationRequestInfo;\n  n.CertificationRequest.superclass.constructor.call(this), this.setByParam = function(u) {\n    this.params = u;\n  }, this.sign = function() {\n    var u = new h(this.params).tohex(), p = new a.crypto.Signature({ alg: this.params.sigalg });\n    p.init(this.params.sbjprvkey), p.updateHex(u);\n    var c = p.sign();\n    this.params.sighex = c;\n  }, this.getPEM = function() {\n    return de(this.tohex(), \"CERTIFICATE REQUEST\");\n  }, this.tohex = function() {\n    var u = this.params, p = new a.asn1.csr.CertificationRequestInfo(this.params), c = new a.asn1.x509.AlgorithmIdentifier({ name: u.sigalg });\n    if (u.sighex == null && u.sbjprvkey != null && this.sign(), u.sighex == null)\n      throw new Error(\"sighex or sbjprvkey parameter not defined\");\n    var y = new i({ hex: \"00\" + u.sighex }), v = new s({ array: [p, c, y] });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.csr.CertificationRequest, a.asn1.ASN1Object);\na.asn1.csr.CertificationRequestInfo = function(e) {\n  var t = a, r = t.asn1;\n  r.DERBitString;\n  var i = r.DERSequence, s = r.DERInteger, n = r.DERUTF8String, h = r.DERTaggedObject, u = r.ASN1Util.newObject, p = r.csr, c = r.x509, y = c.X500Name, v = c.Extensions, o = c.SubjectPublicKeyInfo;\n  p.AttributeList, p.CertificationRequestInfo.superclass.constructor.call(this), this.params = null, this.setByParam = function(f) {\n    f != null && (this.params = f);\n  }, this.tohex = function() {\n    var f = this.params, d = [];\n    if (d.push(new s({ int: 0 })), d.push(new y(f.subject)), d.push(new o(k.getKey(f.sbjpubkey))), f.attrs != null) {\n      var g = l(f.attrs), S = u({ tag: { tage: \"a0\", obj: g } });\n      d.push(S);\n    } else if (f.extreq != null) {\n      var b = new v(f.extreq), S = u({ tag: { tage: \"a0\", obj: { seq: [{ oid: \"1.2.840.113549.1.9.14\" }, { set: [b] }] } } });\n      d.push(S);\n    } else\n      d.push(new h({ tag: \"a0\", explicit: !1, obj: new n({ str: \"\" }) }));\n    var D = new i({ array: d });\n    return D.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  };\n  function l(f) {\n    for (var d = Error, g = a.asn1.x509.Extensions, S = [], b = 0; b < f.length; b++) {\n      var D = f[b], A = D.attr;\n      if (A == \"extensionRequest\") {\n        var I = new g(D.ext), m = { seq: [{ oid: \"1.2.840.113549.1.9.14\" }, { set: [I] }] };\n        S.push(m);\n      } else if (A == \"unstructuredName\") {\n        var m = { seq: [{ oid: \"1.2.840.113549.1.9.2\" }, { set: D.names }] };\n        S.push(m);\n      } else if (A == \"challengePassword\") {\n        var m = { seq: [{ oid: \"1.2.840.113549.1.9.7\" }, { set: [{ utf8str: D.password }] }] };\n        S.push(m);\n      } else\n        throw new d(\"unknown CSR attribute\");\n    }\n    return { set: S };\n  }\n  e != null && this.setByParam(e);\n};\nN(a.asn1.csr.CertificationRequestInfo, a.asn1.ASN1Object);\na.asn1.csr.AttributeList = function(e) {\n};\nN(a.asn1.csr.AttributeList, a.asn1.ASN1Object);\na.asn1.csr.CSRUtil = new function() {\n}();\na.asn1.csr.CSRUtil.newCSRPEM = function(e) {\n  var t = a.asn1.csr, r = new t.CertificationRequest(e), i = r.getPEM();\n  return i;\n};\na.asn1.csr.CSRUtil.getParam = function(e, t) {\n  var r = V, i = r.getV, s = r.getIdxbyList, n = r.getTLVbyList, h = r.getTLVbyListEx, u = r.getVbyListEx, p = function(b) {\n    var D = s(b, 0, [0, 3, 0, 0], \"06\");\n    return i(b, D) != \"2a864886f70d01090e\" ? null : n(b, 0, [0, 3, 0, 1, 0], \"30\");\n  }, c = {};\n  if (e.indexOf(\"-----BEGIN CERTIFICATE REQUEST\") == -1)\n    throw new Error(\"argument is not PEM file\");\n  var y = ie(e, \"CERTIFICATE REQUEST\");\n  t && (c.tbs = n(y, 0, [0]));\n  try {\n    var v = h(y, 0, [0, 1]);\n    if (v == \"3000\")\n      c.subject = {};\n    else {\n      var d = new L();\n      c.subject = d.getX500Name(v);\n    }\n  } catch {\n  }\n  var o = h(y, 0, [0, 2]), l = k.getKey(o, null, \"pkcs8pub\");\n  c.sbjpubkey = k.getPEM(l, \"PKCS8PUB\");\n  var f = p(y), d = new L();\n  f != null && (c.extreq = d.getExtParamArray(f));\n  try {\n    var g = h(y, 0, [1], \"30\"), d = new L();\n    c.sigalg = d.getAlgorithmIdentifierName(g);\n  } catch {\n  }\n  try {\n    var S = u(y, 0, [2]);\n    c.sighex = S;\n  } catch {\n  }\n  return c;\n};\na.asn1.csr.CSRUtil.verifySignature = function(e) {\n  try {\n    var t = null;\n    if (typeof e == \"string\" && e.indexOf(\"-----BEGIN CERTIFICATE REQUEST\") != -1 ? t = a.asn1.csr.CSRUtil.getParam(e, !0) : typeof e == \"object\" && e.sbjpubkey != null && e.sigalg != null && e.sighex != null && e.tbs != null && (t = e), t == null)\n      return !1;\n    var r = new a.crypto.Signature({ alg: t.sigalg });\n    return r.init(t.sbjpubkey), r.updateHex(t.tbs), r.verify(t.sighex);\n  } catch (i) {\n    return alert(i), !1;\n  }\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.ocsp > \"u\" || !a.asn1.ocsp) && (a.asn1.ocsp = {});\na.asn1.ocsp.DEFAULT_HASH = \"sha1\";\na.asn1.ocsp.OCSPResponse = function(e) {\n  a.asn1.ocsp.OCSPResponse.superclass.constructor.call(this), a.asn1.DEREnumerated;\n  var t = a.asn1.ASN1Util.newObject, r = a.asn1.ocsp.ResponseBytes, i = [\"successful\", \"malformedRequest\", \"internalError\", \"tryLater\", \"_not_used_\", \"sigRequired\", \"unauthorized\"];\n  this.params = null, this._getStatusCode = function() {\n    var s = this.params.resstatus;\n    return typeof s == \"number\" ? s : typeof s != \"string\" ? -1 : i.indexOf(s);\n  }, this.setByParam = function(s) {\n    this.params = s;\n  }, this.tohex = function() {\n    var s = this.params, n = this._getStatusCode();\n    if (n == -1)\n      throw new Error(\"responseStatus not supported: \" + s.resstatus);\n    if (n != 0)\n      return t({ seq: [{ enum: { int: n } }] }).tohex();\n    var h = new r(s);\n    return t({ seq: [{ enum: { int: 0 } }, { tag: { tag: \"a0\", explicit: !0, obj: h } }] }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.OCSPResponse, a.asn1.ASN1Object);\na.asn1.ocsp.ResponseBytes = function(e) {\n  a.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);\n  var t = a.asn1, r = t.DERSequence, i = t.DERObjectIdentifier, s = t.DEROctetString, n = t.ocsp.BasicOCSPResponse;\n  this.params = null, this.setByParam = function(h) {\n    this.params = h;\n  }, this.tohex = function() {\n    var h = this.params;\n    if (h.restype != \"ocspBasic\")\n      throw new Error(\"not supported responseType: \" + h.restype);\n    var u = new n(h), p = [];\n    p.push(new i({ name: \"ocspBasic\" })), p.push(new s({ hex: u.tohex() }));\n    var c = new r({ array: p });\n    return c.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.ResponseBytes, a.asn1.ASN1Object);\na.asn1.ocsp.BasicOCSPResponse = function(e) {\n  a.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);\n  var t = Error, r = a.asn1, i = r.ASN1Object, s = r.DERSequence;\n  r.DERGeneralizedTime;\n  var n = r.DERTaggedObject, h = r.DERBitString;\n  r.x509.Extensions;\n  var u = r.x509.AlgorithmIdentifier, p = r.ocsp;\n  p.ResponderID, _SingleResponseList = p.SingleResponseList, _ResponseData = p.ResponseData, this.params = null, this.setByParam = function(c) {\n    this.params = c;\n  }, this.sign = function() {\n    var c = this.params, y = c.tbsresp.tohex(), v = new a.crypto.Signature({ alg: c.sigalg });\n    v.init(c.reskey), v.updateHex(y), c.sighex = v.sign();\n  }, this.tohex = function() {\n    var c = this.params;\n    c.tbsresp == null && (c.tbsresp = new _ResponseData(c)), c.sighex == null && c.reskey != null && this.sign();\n    var y = [];\n    if (y.push(c.tbsresp), y.push(new u({ name: c.sigalg })), y.push(new h({ hex: \"00\" + c.sighex })), c.certs != null && c.certs.length != null) {\n      for (var v = [], o = 0; o < c.certs.length; o++) {\n        var l = c.certs[o], f = null;\n        if (V.isASN1HEX(l))\n          f = l;\n        else if (l.match(/-----BEGIN/))\n          f = ie(l);\n        else\n          throw new t(\"certs[\" + o + \"] not hex or PEM\");\n        v.push(new i({ tlv: f }));\n      }\n      var d = new s({ array: v });\n      y.push(new n({ tag: \"a0\", explicit: !0, obj: d }));\n    }\n    var g = new s({ array: y });\n    return g.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.BasicOCSPResponse, a.asn1.ASN1Object);\na.asn1.ocsp.ResponseData = function(e) {\n  a.asn1.ocsp.ResponseData.superclass.constructor.call(this);\n  var t = a.asn1, r = t.DERSequence, i = t.DERGeneralizedTime, s = t.DERTaggedObject, n = t.x509.Extensions, h = t.ocsp, u = h.ResponderID;\n  _SingleResponseList = h.SingleResponseList, this.params = null, this.tohex = function() {\n    var p = this.params;\n    p.respid != null, p.prodat != null, p.array != null;\n    var c = [];\n    if (c.push(new u(p.respid)), c.push(new i(p.prodat)), c.push(new _SingleResponseList(p.array)), p.ext != null) {\n      var y = new n(p.ext);\n      c.push(new s({ tag: \"a1\", explicit: !0, obj: y }));\n    }\n    var v = new r({ array: c });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(p) {\n    this.params = p;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.ResponseData, a.asn1.ASN1Object);\na.asn1.ocsp.ResponderID = function(e) {\n  a.asn1.ocsp.ResponderID.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.ASN1Util.newObject, s = r.x509.X500Name, n = t.lang.String.isHex, h = Error;\n  this.params = null, this.tohex = function() {\n    var u = this.params;\n    if (u.key != null) {\n      var p = null;\n      if (typeof u.key == \"string\") {\n        if (n(u.key) && (p = u.key), u.key.match(/-----BEGIN CERTIFICATE/)) {\n          var c = new L(u.key), y = c.getExtSubjectKeyIdentifier();\n          y != null && (p = y.kid.hex);\n        }\n      } else if (u.key instanceof L) {\n        var y = u.key.getExtSubjectKeyIdentifier();\n        y != null && (p = y.kid.hex);\n      }\n      if (p == null)\n        throw new h(\"wrong key member value\");\n      var v = i({ tag: { tag: \"a2\", explicit: !0, obj: { octstr: { hex: p } } } });\n      return v.tohex();\n    } else if (u.name != null) {\n      var o = null;\n      if (typeof u.name == \"string\" && u.name.match(/-----BEGIN CERTIFICATE/)) {\n        var c = new L(u.name);\n        o = c.getSubject();\n      } else\n        u.name instanceof L ? o = u.name.getSubject() : typeof u.name == \"object\" && (u.name.array != null || u.name.str != null) && (o = u.name);\n      if (o == null)\n        throw new h(\"wrong name member value\");\n      var v = i({ tag: { tag: \"a1\", explicit: !0, obj: new s(o) } });\n      return v.tohex();\n    }\n    throw new h(\"key or name not specified\");\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(u) {\n    this.params = u;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.ResponderID, a.asn1.ASN1Object);\na.asn1.ocsp.SingleResponseList = function(e) {\n  a.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);\n  var t = a.asn1, r = t.DERSequence, i = t.ocsp.SingleResponse;\n  this.params = null, this.tohex = function() {\n    var s = this.params;\n    if (typeof s != \"object\" || s.length == null)\n      throw new Error(\"params not specified properly\");\n    for (var n = [], h = 0; h < s.length; h++)\n      n.push(new i(s[h]));\n    var u = new r({ array: n });\n    return u.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(s) {\n    this.params = s;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.SingleResponseList, a.asn1.ASN1Object);\na.asn1.ocsp.SingleResponse = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.DERGeneralizedTime, h = i.DERTaggedObject, u = i.ocsp, p = u.CertID, c = u.CertStatus, y = i.x509, v = y.Extensions;\n  u.SingleResponse.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var o = this.params, l = [];\n    if (o.certid == null)\n      throw new t(\"certid unspecified\");\n    if (o.status == null)\n      throw new t(\"status unspecified\");\n    if (o.thisupdate == null)\n      throw new t(\"thisupdate unspecified\");\n    if (l.push(new p(o.certid)), l.push(new c(o.status)), l.push(new n(o.thisupdate)), o.nextupdate != null) {\n      var f = new n(o.nextupdate);\n      l.push(new h({ tag: \"a0\", explicit: !0, obj: f }));\n    }\n    if (o.ext != null) {\n      var d = new v(o.ext);\n      l.push(new h({ tag: \"a1\", explicit: !0, obj: d }));\n    }\n    var g = new s({ array: l });\n    return g.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(o) {\n    this.params = o;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.SingleResponse, a.asn1.ASN1Object);\na.asn1.ocsp.CertID = function(e) {\n  var t = a, r = t.asn1, i = r.DEROctetString, s = r.DERInteger, n = r.DERSequence, h = r.x509, u = h.AlgorithmIdentifier, p = r.ocsp;\n  p.DEFAULT_HASH;\n  var c = t.crypto, y = c.Util.hashHex, v = L, o = V, l = o.getVbyList;\n  p.CertID.superclass.constructor.call(this), this.DEFAULT_HASH = \"sha1\", this.params = null, this.setByValue = function(f, d, g, S) {\n    S == null && (S = this.DEFAULT_HASH), this.params = { alg: S, issname: f, isskey: d, sbjsn: g };\n  }, this.setByCert = function(f, d, g) {\n    g == null && (g = this.DEFAULT_HASH), this.params = { alg: g, issuerCert: f, subjectCert: d };\n  }, this.getParamByCerts = function(f, d, g) {\n    g == null && (g = this.DEFAULT_HASH);\n    var S = new v(f), b = new v(d), D = y(S.getSubjectHex(), g), A = S.getPublicKeyHex(), I = y(l(A, 0, [1], \"03\", !0), g), m = b.getSerialNumberHex(), E = { alg: g, issname: D, isskey: I, sbjsn: m };\n    return E;\n  }, this.tohex = function() {\n    if (typeof this.params != \"object\")\n      throw new Error(\"params not set\");\n    var f = this.params, d, g, S, b;\n    if (f.alg == null ? b = this.DEFAULT_HASH : b = f.alg, f.issuerCert != null && f.subjectCert != null) {\n      var D = this.getParamByCerts(f.issuerCert, f.subjectCert, b);\n      d = D.issname, g = D.isskey, S = D.sbjsn;\n    } else if (f.issname != null && f.isskey != null && f.sbjsn != null)\n      d = f.issname, g = f.isskey, S = f.sbjsn;\n    else\n      throw new Error(\"required param members not defined\");\n    var A = new u({ name: b }), I = new i({ hex: d }), m = new i({ hex: g }), E = new s({ hex: S }), w = new n({ array: [A, I, m, E] });\n    return this.hTLV = w.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.CertID, a.asn1.ASN1Object);\na.asn1.ocsp.CertStatus = function(e) {\n  a.asn1.ocsp.CertStatus.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var t = this.params;\n    if (t.status == \"good\")\n      return \"8000\";\n    if (t.status == \"unknown\")\n      return \"8200\";\n    if (t.status == \"revoked\") {\n      var r = [{ gentime: { str: t.time } }];\n      t.reason != null && r.push({ tag: { tag: \"a0\", explicit: !0, obj: { enum: { int: t.reason } } } });\n      var i = { tag: \"a1\", explicit: !1, obj: { seq: r } };\n      return a.asn1.ASN1Util.newObject({ tag: i }).tohex();\n    }\n    throw new Error(\"bad status\");\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(t) {\n    this.params = t;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.CertStatus, a.asn1.ASN1Object);\na.asn1.ocsp.Request = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.ocsp;\n  if (s.Request.superclass.constructor.call(this), this.dReqCert = null, this.dExt = null, this.tohex = function() {\n    var h = [];\n    if (this.dReqCert === null)\n      throw \"reqCert not set\";\n    h.push(this.dReqCert);\n    var u = new i({ array: h });\n    return this.hTLV = u.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, typeof e < \"u\") {\n    var n = new s.CertID(e);\n    this.dReqCert = n;\n  }\n};\nN(a.asn1.ocsp.Request, a.asn1.ASN1Object);\na.asn1.ocsp.TBSRequest = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.ocsp;\n  s.TBSRequest.superclass.constructor.call(this), this.version = 0, this.dRequestorName = null, this.dRequestList = [], this.dRequestExt = null, this.setRequestListByParam = function(n) {\n    for (var h = [], u = 0; u < n.length; u++) {\n      var p = new s.Request(n[0]);\n      h.push(p);\n    }\n    this.dRequestList = h;\n  }, this.tohex = function() {\n    var n = [];\n    if (this.version !== 0)\n      throw \"not supported version: \" + this.version;\n    if (this.dRequestorName !== null)\n      throw \"requestorName not supported\";\n    var h = new i({ array: this.dRequestList });\n    if (n.push(h), this.dRequestExt !== null)\n      throw \"requestExtensions not supported\";\n    var u = new i({ array: n });\n    return this.hTLV = u.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && e.reqList !== void 0 && this.setRequestListByParam(e.reqList);\n};\nN(a.asn1.ocsp.TBSRequest, a.asn1.ASN1Object);\na.asn1.ocsp.OCSPRequest = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.ocsp;\n  if (s.OCSPRequest.superclass.constructor.call(this), this.dTbsRequest = null, this.dOptionalSignature = null, this.tohex = function() {\n    var h = [];\n    if (this.dTbsRequest !== null)\n      h.push(this.dTbsRequest);\n    else\n      throw \"tbsRequest not set\";\n    if (this.dOptionalSignature !== null)\n      throw \"optionalSignature not supported\";\n    var u = new i({ array: h });\n    return this.hTLV = u.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && e.reqList !== void 0) {\n    var n = new s.TBSRequest(e);\n    this.dTbsRequest = n;\n  }\n};\nN(a.asn1.ocsp.OCSPRequest, a.asn1.ASN1Object);\na.asn1.ocsp.OCSPUtil = {};\na.asn1.ocsp.OCSPUtil.getRequestHex = function(e, t, r) {\n  var i = a, s = i.asn1, n = s.ocsp;\n  r === void 0 && (r = n.DEFAULT_HASH);\n  var h = { alg: r, issuerCert: e, subjectCert: t }, u = new n.OCSPRequest({ reqList: [h] });\n  return u.tohex();\n};\na.asn1.ocsp.OCSPUtil.getOCSPResponseInfo = function(e) {\n  var t = V, r = t.getVbyList, i = t.getVbyListEx, s = t.getIdxbyList;\n  t.getIdxbyListEx;\n  var n = t.getV, h = {};\n  try {\n    var u = i(e, 0, [0], \"0a\");\n    h.responseStatus = parseInt(u, 16);\n  } catch {\n  }\n  if (h.responseStatus !== 0)\n    return h;\n  try {\n    var p = s(e, 0, [1, 0, 1, 0, 0, 2, 0, 1]);\n    e.substr(p, 2) === \"80\" ? h.certStatus = \"good\" : e.substr(p, 2) === \"a1\" ? (h.certStatus = \"revoked\", h.revocationTime = W(r(e, p, [0]))) : e.substr(p, 2) === \"82\" && (h.certStatus = \"unknown\");\n  } catch {\n  }\n  try {\n    var c = s(e, 0, [1, 0, 1, 0, 0, 2, 0, 2]);\n    h.thisUpdate = W(n(e, c));\n  } catch {\n  }\n  try {\n    var y = s(e, 0, [1, 0, 1, 0, 0, 2, 0, 3]);\n    e.substr(y, 2) === \"a0\" && (h.nextUpdate = W(r(e, y, [0])));\n  } catch {\n  }\n  return h;\n};\na.asn1.ocsp.OCSPParser = function() {\n  var e = Error, t = L, r = new t(), i = V, s = i.getV, n = i.getTLV, h = i.getIdxbyList, u = i.getVbyList, p = i.getTLVbyList, c = i.getVbyListEx, y = i.getTLVbyListEx, v = i.getChildIdx;\n  this.getOCSPRequest = function(o) {\n    var l = v(o, 0);\n    if (l.length != 1 && l.length != 2)\n      throw new e(\"wrong number elements: \" + l.length);\n    var f = this.getTBSRequest(n(o, l[0]));\n    return f;\n  }, this.getTBSRequest = function(o) {\n    var l = {}, f = y(o, 0, [0], \"30\");\n    l.array = this.getRequestList(f);\n    var d = y(o, 0, [\"[2]\", 0], \"30\");\n    return d != null && (l.ext = r.getExtParamArray(d)), l;\n  }, this.getRequestList = function(o) {\n    for (var l = [], f = v(o, 0), d = 0; d < f.length; d++) {\n      var o = n(o, f[d]);\n      l.push(this.getRequest(o));\n    }\n    return l;\n  }, this.getRequest = function(o) {\n    var l = v(o, 0);\n    if (l.length != 1 && l.length != 2)\n      throw new e(\"wrong number elements: \" + l.length);\n    var f = this.getCertID(n(o, l[0]));\n    if (l.length == 2) {\n      var d = h(o, 0, [1, 0]);\n      f.ext = r.getExtParamArray(n(o, d));\n    }\n    return f;\n  }, this.getCertID = function(o) {\n    var l = v(o, 0);\n    if (l.length != 4)\n      throw new e(\"wrong number elements: \" + l.length);\n    var f = new t(), d = {};\n    return d.alg = f.getAlgorithmIdentifierName(n(o, l[0])), d.issname = s(o, l[1]), d.isskey = s(o, l[2]), d.sbjsn = s(o, l[3]), d;\n  }, this.getOCSPResponse = function(o) {\n    var l = v(o, 0), f, d = s(o, l[0]), g = parseInt(d);\n    if (l.length == 1)\n      return { resstatus: g };\n    var S = p(o, 0, [1, 0]);\n    return f = this.getResponseBytes(S), f.resstatus = g, f;\n  }, this.getResponseBytes = function(o) {\n    var l = v(o, 0), f, d = p(o, 0, [1, 0]);\n    f = this.getBasicOCSPResponse(d);\n    var g = s(o, l[0]);\n    return f.restype = a.asn1.x509.OID.oid2name(ft(g)), f;\n  }, this.getBasicOCSPResponse = function(o) {\n    var l = v(o, 0), f;\n    f = this.getResponseData(n(o, l[0]));\n    var d = new L();\n    f.alg = d.getAlgorithmIdentifierName(n(o, l[1]));\n    var g = s(o, l[2]);\n    f.sighex = g.substr(2);\n    var S = c(o, 0, [\"[0]\"]);\n    if (S != null) {\n      for (var b = v(S, 0), D = [], A = 0; A < b.length; A++) {\n        var I = n(S, b[A]);\n        D.push(I);\n      }\n      f.certs = D;\n    }\n    return f;\n  }, this.getResponseData = function(o) {\n    var l = v(o, 0), f = l.length, d = {}, g = 0;\n    o.substr(l[0], 2) == \"a0\" && g++, d.respid = this.getResponderID(n(o, l[g++]));\n    var S = s(o, l[g++]);\n    if (d.prodat = W(S), d.array = this.getSingleResponseList(n(o, l[g++])), o.substr(l[f - 1], 2) == \"a1\") {\n      var b = p(o, l[f - 1], [0]), D = new L();\n      d.ext = D.getExtParamArray(b);\n    }\n    return d;\n  }, this.getResponderID = function(o) {\n    var l = {};\n    if (o.substr(0, 2) == \"a2\") {\n      var f = u(o, 0, [0]);\n      l.key = f;\n    }\n    if (o.substr(0, 2) == \"a1\") {\n      var d = p(o, 0, [0]), g = new L();\n      l.name = g.getX500Name(d);\n    }\n    return l;\n  }, this.getSingleResponseList = function(o) {\n    for (var l = v(o, 0), f = [], d = 0; d < l.length; d++) {\n      var g = this.getSingleResponse(n(o, l[d]));\n      f.push(g);\n    }\n    return f;\n  }, this.getSingleResponse = function(o) {\n    var l = v(o, 0), f = {}, d = this.getCertID(n(o, l[0]));\n    f.certid = d;\n    var g = this.getCertStatus(n(o, l[1]));\n    if (f.status = g, o.substr(l[2], 2) == \"18\") {\n      var S = s(o, l[2]);\n      f.thisupdate = W(S);\n    }\n    for (var b = 3; b < l.length; b++) {\n      if (o.substr(l[b], 2) == \"a0\") {\n        var D = u(o, l[b], [0], \"18\");\n        f.nextupdate = W(D);\n      }\n      if (o.substr(l[b], 2) == \"a1\") {\n        var A = new L(), I = p(o, 0, [b, 0]);\n        f.ext = A.getExtParamArray(I);\n      }\n    }\n    return f;\n  }, this.getCertStatus = function(o) {\n    var l = {};\n    if (o == \"8000\")\n      return { status: \"good\" };\n    if (o == \"8200\")\n      return { status: \"unknown\" };\n    if (o.substr(0, 2) == \"a1\") {\n      l.status = \"revoked\";\n      var f = u(o, 0, [0]), d = W(f);\n      l.time = d;\n    }\n    return l;\n  };\n};\nvar a;\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.lang > \"u\" || !a.lang) && (a.lang = {});\na.lang.String = function() {\n};\nfunction hn(e) {\n  for (var t = new Array(), r = 0; r < e.length; r++)\n    t[r] = e.charCodeAt(r);\n  return t;\n}\nfunction ot(e) {\n  for (var t = \"\", r = 0; r < e.length; r++) {\n    var i = e[r].toString(16);\n    i.length == 1 && (i = \"0\" + i), t = t + i;\n  }\n  return t;\n}\nfunction Ee(e) {\n  return ot(hn(e));\n}\nfunction Xe(e) {\n  return e = e.replace(/\\=/g, \"\"), e = e.replace(/\\+/g, \"-\"), e = e.replace(/\\//g, \"_\"), e;\n}\nfunction ut(e) {\n  return e.length % 4 == 2 ? e = e + \"==\" : e.length % 4 == 3 && (e = e + \"=\"), e = e.replace(/-/g, \"+\"), e = e.replace(/_/g, \"/\"), e;\n}\nfunction ae(e) {\n  return e.length % 2 == 1 && (e = \"0\" + e), Xe(_e(e));\n}\nfunction Y(e) {\n  return it(ut(e));\n}\nvar Je, we;\ntypeof Buffer == \"function\" ? (Je = function(e) {\n  return Xe(Buffer.from(e, \"utf8\").toString(\"base64\"));\n}, we = function(e) {\n  return Buffer.from(ut(e), \"base64\").toString(\"utf8\");\n}) : (Je = function(e) {\n  return ae(It(Bt(e)));\n}, we = function(e) {\n  return decodeURIComponent(Ct(Y(e)));\n});\nfunction ht(e) {\n  return It(Bt(e)).toLowerCase();\n}\nfunction W(e) {\n  try {\n    return decodeURIComponent(Ct(e));\n  } catch {\n    return null;\n  }\n}\nfunction fn(e) {\n  return W(cn(e));\n}\nfunction cn(e) {\n  for (var t = e.match(/.{1,2}/g), r = [], i = 0; i < t.length; i++) {\n    var s = parseInt(t[i], 16);\n    161 <= s && s <= 191 ? (r.push(\"c2\"), r.push(t[i])) : 192 <= s && s <= 255 ? (r.push(\"c3\"), r.push((s - 64).toString(16))) : r.push(t[i]);\n  }\n  return r.join(\"\");\n}\nfunction Ae(e) {\n  for (var t = \"\", r = 0; r < e.length - 1; r += 2)\n    t += String.fromCharCode(parseInt(e.substr(r, 2), 16));\n  return t;\n}\nfunction Pe(e) {\n  for (var t = \"\", r = 0; r < e.length; r++)\n    t += (\"0\" + e.charCodeAt(r).toString(16)).slice(-2);\n  return t;\n}\nfunction ln(e) {\n  return _e(e);\n}\nfunction dn(e, t) {\n  return e = e.replace(new RegExp(\"(.{\" + t + \"})\", \"g\"), `$1\\r\n`), e = e.replace(/\\s+$/, \"\"), e;\n}\nfunction pn(e) {\n  var t = e.replace(/[^0-9A-Za-z\\/+=]*/g, \"\"), r = it(t);\n  return r;\n}\nfunction de(e, t) {\n  return \"-----BEGIN \" + t + `-----\\r\n` + dn(ln(e), 64) + `\\r\n-----END ` + t + `-----\\r\n`;\n}\nfunction ie(e, t) {\n  if (e.indexOf(\"-----BEGIN \") == -1)\n    throw new Error(\"can't find PEM header\");\n  return t !== void 0 ? (e = e.replace(new RegExp(\"^[^]*-----BEGIN \" + t + \"-----\"), \"\"), e = e.replace(new RegExp(\"-----END \" + t + \"-----[^]*$\"), \"\")) : (e = e.replace(/^[^]*-----BEGIN [^-]+-----/, \"\"), e = e.replace(/-----END [^-]+-----[^]*$/, \"\")), pn(e);\n}\nfunction vn(e) {\n  var t, r, i, s, n, h, u, p, c, y;\n  if (e = yn(e), y = e.match(/^(\\d{4})(\\d\\d)(\\d\\d)(\\d\\d)(\\d\\d)(\\d\\d)(|\\.\\d+)Z$/), y)\n    return t = parseInt(y[1]), r = parseInt(y[2]) - 1, i = parseInt(y[3]), s = parseInt(y[4]), n = parseInt(y[5]), h = parseInt(y[6]), u = 0, p = y[7], p !== \"\" && (c = (p.substr(1) + \"00\").substr(0, 3), u = parseInt(c)), Date.UTC(t, r, i, s, n, h, u);\n  throw new Error(\"unsupported zulu format: \" + e);\n}\nfunction gn(e) {\n  return Math.round(vn(e) / 1e3);\n}\nfunction yn(e) {\n  return e.match(/^[0-9]{12}Z$/) || e.match(/^[0-9]{12}[.][0-9]*Z$/) ? e.match(/^[0-4]/) ? \"20\" + e : \"19\" + e : e;\n}\nfunction It(e) {\n  return e.replace(/%/g, \"\");\n}\nfunction Ct(e) {\n  return e.replace(/(..)/g, \"%$1\");\n}\nfunction vt(e) {\n  var t = \"malformed IPv6 address\";\n  if (!e.match(/^[0-9A-Fa-f:]+$/))\n    throw t;\n  e = e.toLowerCase();\n  var r = e.split(\":\").length - 1;\n  if (r < 2)\n    throw t;\n  var i = \":\".repeat(7 - r + 2);\n  e = e.replace(\"::\", i);\n  var s = e.split(\":\");\n  if (s.length != 8)\n    throw t;\n  for (var n = 0; n < 8; n++)\n    s[n] = (\"0000\" + s[n]).slice(-4);\n  return s.join(\"\");\n}\nfunction gt(e) {\n  if (!e.match(/^[0-9A-Fa-f]{32}$/))\n    throw new Error(\"malformed IPv6 address: \" + e);\n  e = e.toLowerCase();\n  var t = e.match(/.{1,4}/g);\n  t = t.map(function(s) {\n    return s.replace(/^0+/, \"\");\n  }), t = t.map(function(s) {\n    return s == \"\" ? \"0\" : s;\n  }), e = \":\" + t.join(\":\") + \":\";\n  var r = e.match(/:(0:){2,}/g);\n  if (r == null)\n    return e.slice(1, -1);\n  var i = r.sort().slice(-1)[0];\n  return e = e.replace(i.substr(0, i.length - 1), \":\"), e.substr(0, 2) != \"::\" && (e = e.substr(1)), e.substr(-2, 2) != \"::\" && (e = e.substr(0, e.length - 1)), e;\n}\nfunction tt(e) {\n  var t = new Error(\"malformed hex value\");\n  if (!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))\n    throw t;\n  if (e.length == 8) {\n    var r;\n    try {\n      return r = parseInt(e.substr(0, 2), 16) + \".\" + parseInt(e.substr(2, 2), 16) + \".\" + parseInt(e.substr(4, 2), 16) + \".\" + parseInt(e.substr(6, 2), 16), r;\n    } catch {\n      throw t;\n    }\n  } else if (e.length == 16)\n    try {\n      return tt(e.substr(0, 8)) + \"/\" + yt(e.substr(8));\n    } catch {\n      throw t;\n    }\n  else {\n    if (e.length == 32)\n      return gt(e);\n    if (e.length == 64) {\n      try {\n        return gt(e.substr(0, 32)) + \"/\" + yt(e.substr(32));\n      } catch {\n        throw t;\n      }\n      return;\n    } else\n      return e;\n  }\n}\nfunction yt(e) {\n  var t = new Error(\"malformed mask\"), r;\n  try {\n    r = new R(e, 16).toString(2);\n  } catch {\n    throw t;\n  }\n  if (!r.match(/^1*0*$/))\n    throw t;\n  return r.replace(/0+$/, \"\").length;\n}\nfunction Rt(e) {\n  var t = new Error(\"malformed IP address\");\n  if (e = e.toLowerCase(e), !e.match(/^[0-9a-f.:/]+$/))\n    throw t;\n  if (e.match(/^[0-9.]+$/)) {\n    var r = e.split(\".\");\n    if (r.length !== 4)\n      throw t;\n    var i = \"\";\n    try {\n      for (var s = 0; s < 4; s++) {\n        var n = parseInt(r[s]);\n        i += (\"0\" + n.toString(16)).slice(-2);\n      }\n      return i;\n    } catch {\n      throw t;\n    }\n  } else if (e.match(/^[0-9.]+\\/[0-9]+$/)) {\n    var h = e.split(\"/\");\n    return Rt(h[0]) + mt(parseInt(h[1]), 32);\n  } else {\n    if (e.match(/^[0-9a-f:]+$/) && e.indexOf(\":\") !== -1)\n      return vt(e);\n    if (e.match(/^[0-9a-f:]+\\/[0-9]+$/) && e.indexOf(\":\") !== -1) {\n      var h = e.split(\"/\");\n      return vt(h[0]) + mt(parseInt(h[1]), 128);\n    } else\n      throw t;\n  }\n}\nfunction mt(e, t) {\n  if (t == 32 && e == 0)\n    return \"00000000\";\n  if (t == 128 && e == 0)\n    return \"00000000000000000000000000000000\";\n  var r = Array(e + 1).join(\"1\") + Array(t - e + 1).join(\"0\");\n  return new R(r, 2).toString(16);\n}\nfunction Tt(e) {\n  function t(s) {\n    var n = parseInt(s.substr(0, 2), 16), h = parseInt(s.substr(2), 16);\n    if (n == 0 & h < 128)\n      return String.fromCharCode(h);\n    if (n < 8) {\n      var u = 192 | (n & 7) << 3 | (h & 192) >> 6, p = 128 | h & 63;\n      return W(u.toString(16) + p.toString(16));\n    }\n    var u = 224 | (n & 240) >> 4, p = 128 | (n & 15) << 2 | (h & 192) >> 6, c = 128 | h & 63;\n    return W(u.toString(16) + p.toString(16) + c.toString(16));\n  }\n  var r = e.match(/.{4}/g), i = r.map(t);\n  return i.join(\"\");\n}\nfunction Bt(e) {\n  for (var t = encodeURIComponent(e), r = \"\", i = 0; i < t.length; i++)\n    t[i] == \"%\" ? (r = r + t.substr(i, 3), i = i + 2) : r = r + \"%\" + Ee(t[i]);\n  return r;\n}\na.lang.String.isInteger = function(e) {\n  return e.match(/^[0-9]+$/) ? !0 : !!e.match(/^-[0-9]+$/);\n};\na.lang.String.isHex = function(e) {\n  return Nt(e);\n};\nfunction Nt(e) {\n  return !!(e.length % 2 == 0 && (e.match(/^[0-9a-f]+$/) || e.match(/^[0-9A-F]+$/)));\n}\na.lang.String.isBase64 = function(e) {\n  return e = e.replace(/\\s+/g, \"\"), !!(e.match(/^[0-9A-Za-z+\\/]+={0,3}$/) && e.length % 4 == 0);\n};\na.lang.String.isBase64URL = function(e) {\n  return e.match(/[+/=]/) ? !1 : (e = ut(e), a.lang.String.isBase64(e));\n};\nfunction Ht(e) {\n  return !!e.match(/^[0-9A-Za-z-_.]+$/);\n}\na.lang.String.isIntegerArray = function(e) {\n  return e = e.replace(/\\s+/g, \"\"), !!e.match(/^\\[[0-9,]+\\]$/);\n};\na.lang.String.isPrintable = function(e) {\n  return e.match(/^[0-9A-Za-z '()+,-./:=?]*$/) !== null;\n};\na.lang.String.isIA5 = function(e) {\n  return e.match(/^[\\x20-\\x21\\x23-\\x7f]*$/) !== null;\n};\na.lang.String.isMail = function(e) {\n  return e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\\.[A-Za-z0-9]{1,}$/) !== null;\n};\nfunction xt(e) {\n  return e.length % 2 == 1 ? \"0\" + e : e.substr(0, 1) > \"7\" ? \"00\" + e : e;\n}\nfunction mn(e) {\n  var t = function(u) {\n    var p = u.toString(16);\n    return p.length == 1 && (p = \"0\" + p), p;\n  }, r = function(u) {\n    var p = \"\", c = parseInt(u, 10), y = c.toString(2), v = 7 - y.length % 7;\n    v == 7 && (v = 0);\n    for (var o = \"\", l = 0; l < v; l++)\n      o += \"0\";\n    y = o + y;\n    for (var l = 0; l < y.length - 1; l += 7) {\n      var f = y.substr(l, 7);\n      l != y.length - 7 && (f = \"1\" + f), p += t(parseInt(f, 2));\n    }\n    return p;\n  };\n  try {\n    if (!e.match(/^[0-9.]+$/))\n      return null;\n    var i = \"\", s = e.split(\".\"), n = parseInt(s[0], 10) * 40 + parseInt(s[1], 10);\n    i += t(n), s.splice(0, 2);\n    for (var h = 0; h < s.length; h++)\n      i += r(s[h]);\n    return i;\n  } catch {\n    return null;\n  }\n}\nfunction ft(e) {\n  if (!Nt(e))\n    return null;\n  try {\n    var t = [], r = e.substr(0, 2), i = parseInt(r, 16);\n    t[0] = new String(Math.floor(i / 40)), t[1] = new String(i % 40);\n    for (var s = e.substr(2), n = [], h = 0; h < s.length / 2; h++)\n      n.push(parseInt(s.substr(h * 2, 2), 16));\n    for (var u = [], p = \"\", h = 0; h < n.length; h++)\n      n[h] & 128 ? p = p + St((n[h] & 127).toString(2), 7) : (p = p + St((n[h] & 127).toString(2), 7), u.push(new String(parseInt(p, 2))), p = \"\");\n    var c = t.join(\".\");\n    return u.length > 0 && (c = c + \".\" + u.join(\".\")), c;\n  } catch {\n    return null;\n  }\n}\nfunction xn(e) {\n  var t = new R(String(e), 10);\n  return Ze(t);\n}\nfunction Ze(e) {\n  var t = e.toString(16);\n  if (t.substr(0, 1) != \"-\")\n    return t.length % 2 == 1 ? t = \"0\" + t : t.match(/^[0-7]/) || (t = \"00\" + t), t;\n  var r = t.substr(1), i = r.length;\n  i % 2 == 1 ? i += 1 : t.match(/^[0-7]/) || (i += 2);\n  for (var s = \"\", n = 0; n < i; n++)\n    s += \"f\";\n  var h = new R(s, 16), u = h.xor(e).add(R.ONE);\n  return t = u.toString(16).replace(/^-/, \"\"), t;\n}\nvar St = function(e, t, r) {\n  return r == null && (r = \"0\"), e.length >= t ? e : new Array(t - e.length + 1).join(r) + e;\n};\nfunction Sn(e) {\n  if (e.length % 2 != 0 || (e = e.toLowerCase(), e.match(/^[0-9a-f]+$/) == null))\n    return -1;\n  try {\n    var t = e.substr(0, 2);\n    if (t == \"00\")\n      return parseInt(e.substr(2), 16);\n    var r = parseInt(t, 16);\n    if (r > 7)\n      return -1;\n    var i = e.substr(2), s = parseInt(i, 16).toString(2);\n    s == \"0\" && (s = \"00000000\"), s = s.slice(0, 0 - r);\n    var n = parseInt(s, 2);\n    return n == NaN ? -1 : n;\n  } catch {\n    return -1;\n  }\n}\nfunction En(e) {\n  if (typeof e != \"string\" || e.length % 2 != 0 || !e.match(/^[0-9a-f]+$/))\n    return null;\n  try {\n    var t = parseInt(e.substr(0, 2), 16);\n    if (t < 0 || 7 < t)\n      return null;\n    for (var r = e.substr(2), i = \"\", s = 0; s < r.length; s += 2) {\n      var n = r.substr(s, 2), h = parseInt(n, 16).toString(2);\n      h = (\"0000000\" + h).slice(-8), i += h;\n    }\n    return i.substr(0, i.length - t);\n  } catch {\n    return null;\n  }\n}\nfunction rt(e, t) {\n  for (var r = 0, i = 0; i < e.length; i++)\n    r |= 1 << t[e[i]];\n  for (var s = r.toString(2), n = \"\", i = s.length - 1; i >= 0; i--)\n    n += s[i];\n  return n;\n}\nfunction J(e, i, r) {\n  if (typeof e == \"object\") {\n    for (var i = String(i).split(\".\"), s = 0; s < i.length && e; s++) {\n      var n = i[s];\n      n.match(/^[0-9]+$/) && (n = parseInt(n)), e = e[n];\n    }\n    return e || e === !1 ? e : r;\n  }\n}\nfunction N(e, t) {\n  var r = function() {\n  };\n  r.prototype = t.prototype, e.prototype = new r(), e.prototype.constructor = e, e.superclass = t.prototype, t.prototype.constructor == Object.prototype.constructor && (t.prototype.constructor = t);\n}\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.crypto > \"u\" || !a.crypto) && (a.crypto = {});\na.crypto.Util = new function() {\n  this.DIGESTINFOHEAD = { sha1: \"3021300906052b0e03021a05000414\", sha224: \"302d300d06096086480165030402040500041c\", sha256: \"3031300d060960864801650304020105000420\", sha384: \"3041300d060960864801650304020205000430\", sha512: \"3051300d060960864801650304020305000440\", md2: \"3020300c06082a864886f70d020205000410\", md5: \"3020300c06082a864886f70d020505000410\", ripemd160: \"3021300906052b2403020105000414\" }, this.DEFAULTPROVIDER = { md5: \"cryptojs\", sha1: \"cryptojs\", sha224: \"cryptojs\", sha256: \"cryptojs\", sha384: \"cryptojs\", sha512: \"cryptojs\", ripemd160: \"cryptojs\", hmacmd5: \"cryptojs\", hmacsha1: \"cryptojs\", hmacsha224: \"cryptojs\", hmacsha256: \"cryptojs\", hmacsha384: \"cryptojs\", hmacsha512: \"cryptojs\", hmacripemd160: \"cryptojs\", MD5withRSA: \"cryptojs/jsrsa\", SHA1withRSA: \"cryptojs/jsrsa\", SHA224withRSA: \"cryptojs/jsrsa\", SHA256withRSA: \"cryptojs/jsrsa\", SHA384withRSA: \"cryptojs/jsrsa\", SHA512withRSA: \"cryptojs/jsrsa\", RIPEMD160withRSA: \"cryptojs/jsrsa\", MD5withECDSA: \"cryptojs/jsrsa\", SHA1withECDSA: \"cryptojs/jsrsa\", SHA224withECDSA: \"cryptojs/jsrsa\", SHA256withECDSA: \"cryptojs/jsrsa\", SHA384withECDSA: \"cryptojs/jsrsa\", SHA512withECDSA: \"cryptojs/jsrsa\", RIPEMD160withECDSA: \"cryptojs/jsrsa\", SHA1withDSA: \"cryptojs/jsrsa\", SHA224withDSA: \"cryptojs/jsrsa\", SHA256withDSA: \"cryptojs/jsrsa\", MD5withRSAandMGF1: \"cryptojs/jsrsa\", SHAwithRSAandMGF1: \"cryptojs/jsrsa\", SHA1withRSAandMGF1: \"cryptojs/jsrsa\", SHA224withRSAandMGF1: \"cryptojs/jsrsa\", SHA256withRSAandMGF1: \"cryptojs/jsrsa\", SHA384withRSAandMGF1: \"cryptojs/jsrsa\", SHA512withRSAandMGF1: \"cryptojs/jsrsa\", RIPEMD160withRSAandMGF1: \"cryptojs/jsrsa\" }, this.CRYPTOJSMESSAGEDIGESTNAME = { md5: K.algo.MD5, sha1: K.algo.SHA1, sha224: K.algo.SHA224, sha256: K.algo.SHA256, sha384: K.algo.SHA384, sha512: K.algo.SHA512, ripemd160: K.algo.RIPEMD160 }, this.getDigestInfoHex = function(e, t) {\n    if (typeof this.DIGESTINFOHEAD[t] > \"u\")\n      throw \"alg not supported in Util.DIGESTINFOHEAD: \" + t;\n    return this.DIGESTINFOHEAD[t] + e;\n  }, this.getPaddedDigestInfoHex = function(e, t, r) {\n    var i = this.getDigestInfoHex(e, t), s = r / 4;\n    if (i.length + 22 > s)\n      throw \"key is too short for SigAlg: keylen=\" + r + \",\" + t;\n    for (var n = \"0001\", h = \"00\" + i, u = \"\", p = s - n.length - h.length, c = 0; c < p; c += 2)\n      u += \"ff\";\n    var y = n + u + h;\n    return y;\n  }, this.hashString = function(e, t) {\n    var r = new a.crypto.MessageDigest({ alg: t });\n    return r.digestString(e);\n  }, this.hashHex = function(e, t) {\n    var r = new a.crypto.MessageDigest({ alg: t });\n    return r.digestHex(e);\n  }, this.sha1 = function(e) {\n    return this.hashString(e, \"sha1\");\n  }, this.sha256 = function(e) {\n    return this.hashString(e, \"sha256\");\n  }, this.sha256Hex = function(e) {\n    return this.hashHex(e, \"sha256\");\n  }, this.sha512 = function(e) {\n    return this.hashString(e, \"sha512\");\n  }, this.sha512Hex = function(e) {\n    return this.hashHex(e, \"sha512\");\n  }, this.isKey = function(e) {\n    return e instanceof q || e instanceof a.crypto.DSA || e instanceof a.crypto.ECDSA;\n  };\n}();\na.crypto.Util.md5 = function(e) {\n  var t = new a.crypto.MessageDigest({ alg: \"md5\", prov: \"cryptojs\" });\n  return t.digestString(e);\n};\na.crypto.Util.ripemd160 = function(e) {\n  var t = new a.crypto.MessageDigest({ alg: \"ripemd160\", prov: \"cryptojs\" });\n  return t.digestString(e);\n};\na.crypto.Util.SECURERANDOMGEN = new Ge();\na.crypto.Util.getRandomHexOfNbytes = function(e) {\n  var t = new Array(e);\n  return a.crypto.Util.SECURERANDOMGEN.nextBytes(t), ot(t);\n};\na.crypto.Util.getRandomBigIntegerOfNbytes = function(e) {\n  return new R(a.crypto.Util.getRandomHexOfNbytes(e), 16);\n};\na.crypto.Util.getRandomHexOfNbits = function(e) {\n  var t = e % 8, r = (e - t) / 8, i = new Array(r + 1);\n  return a.crypto.Util.SECURERANDOMGEN.nextBytes(i), i[0] = (255 << t & 255 ^ 255) & i[0], ot(i);\n};\na.crypto.Util.getRandomBigIntegerOfNbits = function(e) {\n  return new R(a.crypto.Util.getRandomHexOfNbits(e), 16);\n};\na.crypto.Util.getRandomBigIntegerZeroToMax = function(e) {\n  for (var t = e.bitLength(); ; ) {\n    var r = a.crypto.Util.getRandomBigIntegerOfNbits(t);\n    if (e.compareTo(r) != -1)\n      return r;\n  }\n};\na.crypto.Util.getRandomBigIntegerMinToMax = function(e, t) {\n  var r = e.compareTo(t);\n  if (r == 1)\n    throw \"biMin is greater than biMax\";\n  if (r == 0)\n    return e;\n  var i = t.subtract(e), s = a.crypto.Util.getRandomBigIntegerZeroToMax(i);\n  return s.add(e);\n};\na.crypto.MessageDigest = function(e) {\n  this.setAlgAndProvider = function(t, r) {\n    if (t = a.crypto.MessageDigest.getCanonicalAlgName(t), t !== null && r === void 0 && (r = a.crypto.Util.DEFAULTPROVIDER[t]), \":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(t) != -1 && r == \"cryptojs\") {\n      try {\n        this.md = a.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create();\n      } catch (i) {\n        throw \"setAlgAndProvider hash alg set fail alg=\" + t + \"/\" + i;\n      }\n      this.updateString = function(i) {\n        this.md.update(i);\n      }, this.updateHex = function(i) {\n        var s = K.enc.Hex.parse(i);\n        this.md.update(s);\n      }, this.digest = function() {\n        var i = this.md.finalize();\n        return i.toString(K.enc.Hex);\n      }, this.digestString = function(i) {\n        return this.updateString(i), this.digest();\n      }, this.digestHex = function(i) {\n        return this.updateHex(i), this.digest();\n      };\n    }\n    if (\":sha256:\".indexOf(t) != -1 && r == \"sjcl\") {\n      try {\n        this.md = new sjcl.hash.sha256();\n      } catch (i) {\n        throw \"setAlgAndProvider hash alg set fail alg=\" + t + \"/\" + i;\n      }\n      this.updateString = function(i) {\n        this.md.update(i);\n      }, this.updateHex = function(i) {\n        var s = sjcl.codec.hex.toBits(i);\n        this.md.update(s);\n      }, this.digest = function() {\n        var i = this.md.finalize();\n        return sjcl.codec.hex.fromBits(i);\n      }, this.digestString = function(i) {\n        return this.updateString(i), this.digest();\n      }, this.digestHex = function(i) {\n        return this.updateHex(i), this.digest();\n      };\n    }\n  }, this.updateString = function(t) {\n    throw \"updateString(str) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, this.updateHex = function(t) {\n    throw \"updateHex(hex) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, this.digest = function() {\n    throw \"digest() not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, this.digestString = function(t) {\n    throw \"digestString(str) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, this.digestHex = function(t) {\n    throw \"digestHex(hex) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, e !== void 0 && e.alg !== void 0 && (this.algName = e.alg, e.prov === void 0 && (this.provName = a.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName));\n};\na.crypto.MessageDigest.getCanonicalAlgName = function(e) {\n  return typeof e == \"string\" && (e = e.toLowerCase(), e = e.replace(/-/, \"\")), e;\n};\na.crypto.MessageDigest.getHashLength = function(e) {\n  var t = a.crypto.MessageDigest, r = t.getCanonicalAlgName(e);\n  if (t.HASHLENGTH[r] === void 0)\n    throw \"not supported algorithm: \" + e;\n  return t.HASHLENGTH[r];\n};\na.crypto.MessageDigest.HASHLENGTH = { md5: 16, sha1: 20, sha224: 28, sha256: 32, sha384: 48, sha512: 64, ripemd160: 20 };\na.crypto.Mac = function(e) {\n  this.setAlgAndProvider = function(t, r) {\n    if (t = t.toLowerCase(), t == null && (t = \"hmacsha1\"), t = t.toLowerCase(), t.substr(0, 4) != \"hmac\")\n      throw \"setAlgAndProvider unsupported HMAC alg: \" + t;\n    r === void 0 && (r = a.crypto.Util.DEFAULTPROVIDER[t]), this.algProv = t + \"/\" + r;\n    var i = t.substr(4);\n    if (\":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(i) != -1 && r == \"cryptojs\") {\n      try {\n        var s = a.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[i];\n        this.mac = K.algo.HMAC.create(s, this.pass);\n      } catch (n) {\n        throw \"setAlgAndProvider hash alg set fail hashAlg=\" + i + \"/\" + n;\n      }\n      this.updateString = function(n) {\n        this.mac.update(n);\n      }, this.updateHex = function(n) {\n        var h = K.enc.Hex.parse(n);\n        this.mac.update(h);\n      }, this.doFinal = function() {\n        var n = this.mac.finalize();\n        return n.toString(K.enc.Hex);\n      }, this.doFinalString = function(n) {\n        return this.updateString(n), this.doFinal();\n      }, this.doFinalHex = function(n) {\n        return this.updateHex(n), this.doFinal();\n      };\n    }\n  }, this.updateString = function(t) {\n    throw \"updateString(str) not supported for this alg/prov: \" + this.algProv;\n  }, this.updateHex = function(t) {\n    throw \"updateHex(hex) not supported for this alg/prov: \" + this.algProv;\n  }, this.doFinal = function() {\n    throw \"digest() not supported for this alg/prov: \" + this.algProv;\n  }, this.doFinalString = function(t) {\n    throw \"digestString(str) not supported for this alg/prov: \" + this.algProv;\n  }, this.doFinalHex = function(t) {\n    throw \"digestHex(hex) not supported for this alg/prov: \" + this.algProv;\n  }, this.setPassword = function(t) {\n    if (typeof t == \"string\") {\n      var r = t;\n      (t.length % 2 == 1 || !t.match(/^[0-9A-Fa-f]+$/)) && (r = Pe(t)), this.pass = K.enc.Hex.parse(r);\n      return;\n    }\n    if (typeof t != \"object\")\n      throw \"KJUR.crypto.Mac unsupported password type: \" + t;\n    var r = null;\n    if (t.hex !== void 0) {\n      if (t.hex.length % 2 != 0 || !t.hex.match(/^[0-9A-Fa-f]+$/))\n        throw \"Mac: wrong hex password: \" + t.hex;\n      r = t.hex;\n    }\n    if (t.utf8 !== void 0 && (r = ht(t.utf8)), t.rstr !== void 0 && (r = Pe(t.rstr)), t.b64 !== void 0 && (r = it(t.b64)), t.b64u !== void 0 && (r = Y(t.b64u)), r == null)\n      throw \"KJUR.crypto.Mac unsupported password type: \" + t;\n    this.pass = K.enc.Hex.parse(r);\n  }, e !== void 0 && (e.pass !== void 0 && this.setPassword(e.pass), e.alg !== void 0 && (this.algName = e.alg, e.prov === void 0 && (this.provName = a.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName)));\n};\na.crypto.Signature = function(e) {\n  var t = null;\n  if (this._setAlgNames = function() {\n    var r = this.algName.match(/^(.+)with(.+)$/);\n    r && (this.mdAlgName = r[1].toLowerCase(), this.pubkeyAlgName = r[2].toLowerCase(), this.pubkeyAlgName == \"rsaandmgf1\" && this.mdAlgName == \"sha\" && (this.mdAlgName = \"sha1\"));\n  }, this._zeroPaddingOfSignature = function(r, i) {\n    for (var s = \"\", n = i / 4 - r.length, h = 0; h < n; h++)\n      s = s + \"0\";\n    return s + r;\n  }, this.setAlgAndProvider = function(r, i) {\n    if (this._setAlgNames(), i != \"cryptojs/jsrsa\")\n      throw new Error(\"provider not supported: \" + i);\n    if (\":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(this.mdAlgName) != -1) {\n      try {\n        this.md = new a.crypto.MessageDigest({ alg: this.mdAlgName });\n      } catch (s) {\n        throw new Error(\"setAlgAndProvider hash alg set fail alg=\" + this.mdAlgName + \"/\" + s);\n      }\n      this.init = function(s, n) {\n        var h = null;\n        try {\n          n === void 0 ? h = k.getKey(s) : h = k.getKey(s, n);\n        } catch (u) {\n          throw \"init failed:\" + u;\n        }\n        if (h.isPrivate === !0)\n          this.prvKey = h, this.state = \"SIGN\";\n        else if (h.isPublic === !0)\n          this.pubKey = h, this.state = \"VERIFY\";\n        else\n          throw \"init failed.:\" + h;\n      }, this.updateString = function(s) {\n        this.md.updateString(s);\n      }, this.updateHex = function(s) {\n        this.md.updateHex(s);\n      }, this.sign = function() {\n        if (this.sHashHex = this.md.digest(), this.prvKey === void 0 && this.ecprvhex !== void 0 && this.eccurvename !== void 0 && a.crypto.ECDSA !== void 0 && (this.prvKey = new a.crypto.ECDSA({ curve: this.eccurvename, prv: this.ecprvhex })), this.prvKey instanceof q && this.pubkeyAlgName === \"rsaandmgf1\")\n          this.hSign = this.prvKey.signWithMessageHashPSS(this.sHashHex, this.mdAlgName, this.pssSaltLen);\n        else if (this.prvKey instanceof q && this.pubkeyAlgName === \"rsa\")\n          this.hSign = this.prvKey.signWithMessageHash(this.sHashHex, this.mdAlgName);\n        else if (this.prvKey instanceof a.crypto.ECDSA)\n          this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);\n        else if (this.prvKey instanceof a.crypto.DSA)\n          this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);\n        else\n          throw \"Signature: unsupported private key alg: \" + this.pubkeyAlgName;\n        return this.hSign;\n      }, this.signString = function(s) {\n        return this.updateString(s), this.sign();\n      }, this.signHex = function(s) {\n        return this.updateHex(s), this.sign();\n      }, this.verify = function(s) {\n        if (this.sHashHex = this.md.digest(), this.pubKey === void 0 && this.ecpubhex !== void 0 && this.eccurvename !== void 0 && a.crypto.ECDSA !== void 0 && (this.pubKey = new a.crypto.ECDSA({ curve: this.eccurvename, pub: this.ecpubhex })), this.pubKey instanceof q && this.pubkeyAlgName === \"rsaandmgf1\")\n          return this.pubKey.verifyWithMessageHashPSS(this.sHashHex, s, this.mdAlgName, this.pssSaltLen);\n        if (this.pubKey instanceof q && this.pubkeyAlgName === \"rsa\")\n          return this.pubKey.verifyWithMessageHash(this.sHashHex, s);\n        if (a.crypto.ECDSA !== void 0 && this.pubKey instanceof a.crypto.ECDSA)\n          return this.pubKey.verifyWithMessageHash(this.sHashHex, s);\n        if (a.crypto.DSA !== void 0 && this.pubKey instanceof a.crypto.DSA)\n          return this.pubKey.verifyWithMessageHash(this.sHashHex, s);\n        throw \"Signature: unsupported public key alg: \" + this.pubkeyAlgName;\n      };\n    }\n  }, this.init = function(r, i) {\n    throw \"init(key, pass) not supported for this alg:prov=\" + this.algProvName;\n  }, this.updateString = function(r) {\n    throw \"updateString(str) not supported for this alg:prov=\" + this.algProvName;\n  }, this.updateHex = function(r) {\n    throw \"updateHex(hex) not supported for this alg:prov=\" + this.algProvName;\n  }, this.sign = function() {\n    throw \"sign() not supported for this alg:prov=\" + this.algProvName;\n  }, this.signString = function(r) {\n    throw \"digestString(str) not supported for this alg:prov=\" + this.algProvName;\n  }, this.signHex = function(r) {\n    throw \"digestHex(hex) not supported for this alg:prov=\" + this.algProvName;\n  }, this.verify = function(r) {\n    throw \"verify(hSigVal) not supported for this alg:prov=\" + this.algProvName;\n  }, this.initParams = e, e !== void 0 && (e.alg !== void 0 && (this.algName = e.alg, e.prov === void 0 ? this.provName = a.crypto.Util.DEFAULTPROVIDER[this.algName] : this.provName = e.prov, this.algProvName = this.algName + \":\" + this.provName, this.setAlgAndProvider(this.algName, this.provName), this._setAlgNames()), e.psssaltlen !== void 0 && (this.pssSaltLen = e.psssaltlen), e.prvkeypem !== void 0)) {\n    if (e.prvkeypas !== void 0)\n      throw \"both prvkeypem and prvkeypas parameters not supported\";\n    try {\n      var t = k.getKey(e.prvkeypem);\n      this.init(t);\n    } catch (r) {\n      throw \"fatal error to load pem private key: \" + r;\n    }\n  }\n};\na.crypto.Cipher = function(e) {\n};\na.crypto.Cipher.encrypt = function(e, t, r, i) {\n  if (J(i, \"enclag\") != null && (r = i.encalg), typeof r == \"string\" && r.substr(-4) == \"-CBC\") {\n    var s = t, n = e;\n    J(i, \"key\") != null && (s = i.key), J(i, \"enc\") != null && (hEnc = i.enc);\n    var h = K.enc.Hex.parse(s), u = K.enc.Hex.parse(n), p = K.enc.Hex.parse(i.iv), c;\n    if (r == \"des-EDE3-CBC\")\n      c = K.TripleDES.encrypt(u, h, { iv: p });\n    else if (r == \"aes128-CBC\" || r == \"aes256-CBC\")\n      c = K.AES.encrypt(u, h, { iv: p });\n    else\n      throw new Error(\"unsupported algorithm: \" + r);\n    return c + \"\";\n  } else\n    throw new Error(\"Cipher.encrypt: unsupported key or algorithm\");\n};\na.crypto.Cipher.decrypt = function(e, t, r, i) {\n  if (J(i, \"enclag\") != null && (r = i.encalg), typeof r == \"string\" && r.substr(-4) == \"-CBC\") {\n    var s = t, n = e;\n    J(i, \"key\") != null && (s = i.key), J(i, \"enc\") != null && (n = i.enc);\n    var h = K.enc.Hex.parse(s), u = K.enc.Hex.parse(n), p = K.enc.Hex.parse(i.iv), c;\n    if (r == \"des-EDE3-CBC\")\n      c = K.TripleDES.decrypt({ ciphertext: u }, h, { iv: p });\n    else if (r == \"aes128-CBC\" || r == \"aes256-CBC\")\n      c = K.AES.decrypt({ ciphertext: u }, h, { iv: p });\n    else\n      throw new Error(\"unsupported algorithm: \" + r);\n    return K.enc.Hex.stringify(c);\n  } else\n    throw new Error(\"Cipher.decrypt: unsupported key or algorithm\");\n};\na.crypto.OID = new function() {\n  this.oidhex2name = { \"2a864886f70d010101\": \"rsaEncryption\", \"2a8648ce3d0201\": \"ecPublicKey\", \"2a8648ce380401\": \"dsa\", \"2a8648ce3d030107\": \"secp256r1\", \"2b8104001f\": \"secp192k1\", \"2b81040021\": \"secp224r1\", \"2b8104000a\": \"secp256k1\", \"2b81040022\": \"secp384r1\", \"2b81040023\": \"secp521r1\", \"2a8648ce380403\": \"SHA1withDSA\", \"608648016503040301\": \"SHA224withDSA\", \"608648016503040302\": \"SHA256withDSA\" };\n}();\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.crypto > \"u\" || !a.crypto) && (a.crypto = {});\na.crypto.ECDSA = function(e) {\n  var t = \"secp256r1\", r = Error, i = R, s = z, n = a.crypto.ECDSA, h = a.crypto.ECParameterDB, u = n.getName, p = V, c = p.getVbyListEx, y = p.isASN1HEX, v = new Ge();\n  this.type = \"EC\", this.isPrivate = !1, this.isPublic = !1, this.getBigRandom = function(o) {\n    return new i(o.bitLength(), v).mod(o.subtract(i.ONE)).add(i.ONE);\n  }, this.setNamedCurve = function(o) {\n    this.ecparams = h.getByName(o), this.prvKeyHex = null, this.pubKeyHex = null, this.curveName = o;\n  }, this.setPrivateKeyHex = function(o) {\n    this.isPrivate = !0, this.prvKeyHex = o;\n  }, this.setPublicKeyHex = function(o) {\n    this.isPublic = !0, this.pubKeyHex = o;\n  }, this.getPublicKeyXYHex = function() {\n    var o = this.pubKeyHex;\n    if (o.substr(0, 2) !== \"04\")\n      throw \"this method supports uncompressed format(04) only\";\n    var l = this.ecparams.keycharlen;\n    if (o.length !== 2 + l * 2)\n      throw \"malformed public key hex length\";\n    var f = {};\n    return f.x = o.substr(2, l), f.y = o.substr(2 + l), f;\n  }, this.getShortNISTPCurveName = function() {\n    var o = this.curveName;\n    return o === \"secp256r1\" || o === \"NIST P-256\" || o === \"P-256\" || o === \"prime256v1\" ? \"P-256\" : o === \"secp384r1\" || o === \"NIST P-384\" || o === \"P-384\" ? \"P-384\" : o === \"secp521r1\" || o === \"NIST P-521\" || o === \"P-521\" ? \"P-521\" : null;\n  }, this.generateKeyPairHex = function() {\n    var o = this.ecparams.n, l = this.getBigRandom(o), f = this.ecparams.keycharlen, d = (\"0000000000\" + l.toString(16)).slice(-f);\n    this.setPrivateKeyHex(d);\n    var g = this.generatePublicKeyHex();\n    return { ecprvhex: d, ecpubhex: g };\n  }, this.generatePublicKeyHex = function() {\n    var o = new i(this.prvKeyHex, 16), l = this.ecparams.G.multiply(o), f = l.getX().toBigInteger(), d = l.getY().toBigInteger(), g = this.ecparams.keycharlen, S = (\"0000000000\" + f.toString(16)).slice(-g), b = (\"0000000000\" + d.toString(16)).slice(-g), D = \"04\" + S + b;\n    return this.setPublicKeyHex(D), D;\n  }, this.signWithMessageHash = function(o) {\n    return this.signHex(o, this.prvKeyHex);\n  }, this.signHex = function(o, l) {\n    var f = new i(l, 16), d = this.ecparams.n, g = new i(o.substring(0, this.ecparams.keycharlen), 16);\n    do\n      var S = this.getBigRandom(d), b = this.ecparams.G, D = b.multiply(S), A = D.getX().toBigInteger().mod(d);\n    while (A.compareTo(i.ZERO) <= 0);\n    var I = S.modInverse(d).multiply(g.add(f.multiply(A))).mod(d);\n    return n.biRSSigToASN1Sig(A, I);\n  }, this.sign = function(o, l) {\n    var f = l, d = this.ecparams.n, g = i.fromByteArrayUnsigned(o);\n    do\n      var S = this.getBigRandom(d), b = this.ecparams.G, D = b.multiply(S), A = D.getX().toBigInteger().mod(d);\n    while (A.compareTo(R.ZERO) <= 0);\n    var I = S.modInverse(d).multiply(g.add(f.multiply(A))).mod(d);\n    return this.serializeSig(A, I);\n  }, this.verifyWithMessageHash = function(o, l) {\n    return this.verifyHex(o, l, this.pubKeyHex);\n  }, this.verifyHex = function(o, l, f) {\n    try {\n      var d, g, S = n.parseSigHex(l);\n      d = S.r, g = S.s;\n      var b = s.decodeFromHex(this.ecparams.curve, f), D = new i(o.substring(0, this.ecparams.keycharlen), 16);\n      return this.verifyRaw(D, d, g, b);\n    } catch {\n      return !1;\n    }\n  }, this.verify = function(o, l, f) {\n    var d, g;\n    if (Bitcoin.Util.isArray(l)) {\n      var S = this.parseSig(l);\n      d = S.r, g = S.s;\n    } else if (typeof l == \"object\" && l.r && l.s)\n      d = l.r, g = l.s;\n    else\n      throw \"Invalid value for signature\";\n    var b;\n    if (f instanceof z)\n      b = f;\n    else if (Bitcoin.Util.isArray(f))\n      b = s.decodeFrom(this.ecparams.curve, f);\n    else\n      throw \"Invalid format for pubkey value, must be byte array or ECPointFp\";\n    var D = i.fromByteArrayUnsigned(o);\n    return this.verifyRaw(D, d, g, b);\n  }, this.verifyRaw = function(o, l, f, d) {\n    var g = this.ecparams.n, S = this.ecparams.G;\n    if (l.compareTo(i.ONE) < 0 || l.compareTo(g) >= 0 || f.compareTo(i.ONE) < 0 || f.compareTo(g) >= 0)\n      return !1;\n    var b = f.modInverse(g), D = o.multiply(b).mod(g), A = l.multiply(b).mod(g), I = S.multiply(D).add(d.multiply(A)), m = I.getX().toBigInteger().mod(g);\n    return m.equals(l);\n  }, this.serializeSig = function(o, l) {\n    var f = o.toByteArraySigned(), d = l.toByteArraySigned(), g = [];\n    return g.push(2), g.push(f.length), g = g.concat(f), g.push(2), g.push(d.length), g = g.concat(d), g.unshift(g.length), g.unshift(48), g;\n  }, this.parseSig = function(o) {\n    var l;\n    if (o[0] != 48)\n      throw new Error(\"Signature not a valid DERSequence\");\n    if (l = 2, o[l] != 2)\n      throw new Error(\"First element in signature must be a DERInteger\");\n    var f = o.slice(l + 2, l + 2 + o[l + 1]);\n    if (l += 2 + o[l + 1], o[l] != 2)\n      throw new Error(\"Second element in signature must be a DERInteger\");\n    var d = o.slice(l + 2, l + 2 + o[l + 1]);\n    l += 2 + o[l + 1];\n    var g = i.fromByteArrayUnsigned(f), S = i.fromByteArrayUnsigned(d);\n    return { r: g, s: S };\n  }, this.parseSigCompact = function(o) {\n    if (o.length !== 65)\n      throw \"Signature has the wrong length\";\n    var l = o[0] - 27;\n    if (l < 0 || l > 7)\n      throw \"Invalid signature type\";\n    var f = this.ecparams.n, d = i.fromByteArrayUnsigned(o.slice(1, 33)).mod(f), g = i.fromByteArrayUnsigned(o.slice(33, 65)).mod(f);\n    return { r: d, s: g, i: l };\n  }, this.readPKCS5PrvKeyHex = function(o) {\n    if (y(o) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    var l, f, d;\n    try {\n      l = c(o, 0, [\"[0]\", 0], \"06\"), f = c(o, 0, [1], \"04\");\n      try {\n        d = c(o, 0, [\"[1]\", 0], \"03\");\n      } catch {\n      }\n    } catch {\n      throw new Error(\"malformed PKCS#1/5 plain ECC private key\");\n    }\n    if (this.curveName = u(l), this.curveName === void 0)\n      throw \"unsupported curve name\";\n    this.setNamedCurve(this.curveName), this.setPublicKeyHex(d), this.setPrivateKeyHex(f), this.isPublic = !1;\n  }, this.readPKCS8PrvKeyHex = function(o) {\n    if (y(o) === !1)\n      throw new r(\"not ASN.1 hex string\");\n    var l, f, d, g;\n    try {\n      l = c(o, 0, [1, 0], \"06\"), f = c(o, 0, [1, 1], \"06\"), d = c(o, 0, [2, 0, 1], \"04\");\n      try {\n        g = c(o, 0, [2, 0, \"[1]\", 0], \"03\");\n      } catch {\n      }\n    } catch {\n      throw new r(\"malformed PKCS#8 plain ECC private key\");\n    }\n    if (this.curveName = u(f), this.curveName === void 0)\n      throw new r(\"unsupported curve name\");\n    this.setNamedCurve(this.curveName), this.setPublicKeyHex(g), this.setPrivateKeyHex(d), this.isPublic = !1;\n  }, this.readPKCS8PubKeyHex = function(o) {\n    if (y(o) === !1)\n      throw new r(\"not ASN.1 hex string\");\n    var l, f, d;\n    try {\n      l = c(o, 0, [0, 0], \"06\"), f = c(o, 0, [0, 1], \"06\"), d = c(o, 0, [1], \"03\");\n    } catch {\n      throw new r(\"malformed PKCS#8 ECC public key\");\n    }\n    if (this.curveName = u(f), this.curveName === null)\n      throw new r(\"unsupported curve name\");\n    this.setNamedCurve(this.curveName), this.setPublicKeyHex(d);\n  }, this.readCertPubKeyHex = function(o, l) {\n    if (y(o) === !1)\n      throw new r(\"not ASN.1 hex string\");\n    var f, d;\n    try {\n      f = c(o, 0, [0, 5, 0, 1], \"06\"), d = c(o, 0, [0, 5, 1], \"03\");\n    } catch {\n      throw new r(\"malformed X.509 certificate ECC public key\");\n    }\n    if (this.curveName = u(f), this.curveName === null)\n      throw new r(\"unsupported curve name\");\n    this.setNamedCurve(this.curveName), this.setPublicKeyHex(d);\n  }, e !== void 0 && e.curve !== void 0 && (this.curveName = e.curve), this.curveName === void 0 && (this.curveName = t), this.setNamedCurve(this.curveName), e !== void 0 && (e.prv !== void 0 && this.setPrivateKeyHex(e.prv), e.pub !== void 0 && this.setPublicKeyHex(e.pub));\n};\na.crypto.ECDSA.parseSigHex = function(e) {\n  var t = a.crypto.ECDSA.parseSigHexInHexRS(e), r = new R(t.r, 16), i = new R(t.s, 16);\n  return { r, s: i };\n};\na.crypto.ECDSA.parseSigHexInHexRS = function(e) {\n  var t = V, r = t.getChildIdx, i = t.getV;\n  if (t.checkStrictDER(e, 0), e.substr(0, 2) != \"30\")\n    throw new Error(\"signature is not a ASN.1 sequence\");\n  var s = r(e, 0);\n  if (s.length != 2)\n    throw new Error(\"signature shall have two elements\");\n  var n = s[0], h = s[1];\n  if (e.substr(n, 2) != \"02\")\n    throw new Error(\"1st item not ASN.1 integer\");\n  if (e.substr(h, 2) != \"02\")\n    throw new Error(\"2nd item not ASN.1 integer\");\n  var u = i(e, n), p = i(e, h);\n  return { r: u, s: p };\n};\na.crypto.ECDSA.asn1SigToConcatSig = function(e) {\n  var t = a.crypto.ECDSA.parseSigHexInHexRS(e), r = t.r, i = t.s;\n  if (r.length >= 130 && r.length <= 134) {\n    if (r.length % 2 != 0)\n      throw Error(\"unknown ECDSA sig r length error\");\n    if (i.length % 2 != 0)\n      throw Error(\"unknown ECDSA sig s length error\");\n    r.substr(0, 2) == \"00\" && (r = r.substr(2)), i.substr(0, 2) == \"00\" && (i = i.substr(2));\n    var s = Math.max(r.length, i.length);\n    return r = (\"000000\" + r).slice(-s), i = (\"000000\" + i).slice(-s), r + i;\n  }\n  if (r.substr(0, 2) == \"00\" && r.length % 32 == 2 && (r = r.substr(2)), i.substr(0, 2) == \"00\" && i.length % 32 == 2 && (i = i.substr(2)), r.length % 32 == 30 && (r = \"00\" + r), i.length % 32 == 30 && (i = \"00\" + i), r.length % 32 != 0)\n    throw Error(\"unknown ECDSA sig r length error\");\n  if (i.length % 32 != 0)\n    throw Error(\"unknown ECDSA sig s length error\");\n  return r + i;\n};\na.crypto.ECDSA.concatSigToASN1Sig = function(e) {\n  if (e.length % 4 != 0)\n    throw Error(\"unknown ECDSA concatinated r-s sig length error\");\n  var t = e.substr(0, e.length / 2), r = e.substr(e.length / 2);\n  return a.crypto.ECDSA.hexRSSigToASN1Sig(t, r);\n};\na.crypto.ECDSA.hexRSSigToASN1Sig = function(e, t) {\n  var r = new R(e, 16), i = new R(t, 16);\n  return a.crypto.ECDSA.biRSSigToASN1Sig(r, i);\n};\na.crypto.ECDSA.biRSSigToASN1Sig = function(e, t) {\n  var r = a.asn1, i = new r.DERInteger({ bigint: e }), s = new r.DERInteger({ bigint: t }), n = new r.DERSequence({ array: [i, s] });\n  return n.tohex();\n};\na.crypto.ECDSA.getName = function(e) {\n  return e === \"2b8104001f\" ? \"secp192k1\" : e === \"2a8648ce3d030107\" ? \"secp256r1\" : e === \"2b8104000a\" ? \"secp256k1\" : e === \"2b81040021\" ? \"secp224r1\" : e === \"2b81040022\" ? \"secp384r1\" : e === \"2b81040023\" ? \"secp521r1\" : \"|secp256r1|NIST P-256|P-256|prime256v1|\".indexOf(e) !== -1 ? \"secp256r1\" : \"|secp256k1|\".indexOf(e) !== -1 ? \"secp256k1\" : \"|secp224r1|NIST P-224|P-224|\".indexOf(e) !== -1 ? \"secp224r1\" : \"|secp384r1|NIST P-384|P-384|\".indexOf(e) !== -1 ? \"secp384r1\" : \"|secp521r1|NIST P-521|P-521|\".indexOf(e) !== -1 ? \"secp521r1\" : null;\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.crypto > \"u\" || !a.crypto) && (a.crypto = {});\na.crypto.ECParameterDB = new function() {\n  var e = {}, t = {};\n  function r(i) {\n    return new R(i, 16);\n  }\n  this.getByName = function(i) {\n    var s = i;\n    if (typeof t[s] < \"u\" && (s = t[i]), typeof e[s] < \"u\")\n      return e[s];\n    throw \"unregistered EC curve name: \" + s;\n  }, this.regist = function(i, s, n, h, u, p, c, y, v, o, l, f) {\n    e[i] = {};\n    var d = r(n), g = r(h), S = r(u), b = r(p), D = r(c), A = new Be(d, g, S), I = A.decodePointHex(\"04\" + y + v);\n    e[i].name = i, e[i].keylen = s, e[i].keycharlen = Math.ceil(s / 8) * 2, e[i].curve = A, e[i].G = I, e[i].n = b, e[i].h = D, e[i].oid = l, e[i].info = f;\n    for (var m = 0; m < o.length; m++)\n      t[o[m]] = i;\n  };\n}();\na.crypto.ECParameterDB.regist(\"secp128r1\", 128, \"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF\", \"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC\", \"E87579C11079F43DD824993C2CEE5ED3\", \"FFFFFFFE0000000075A30D1B9038A115\", \"1\", \"161FF7528B899B2D0C28607CA52C5B86\", \"CF5AC8395BAFEB13C02DA292DDED7A83\", [], \"\", \"secp128r1 : SECG curve over a 128 bit prime field\");\na.crypto.ECParameterDB.regist(\"secp160k1\", 160, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73\", \"0\", \"7\", \"0100000000000000000001B8FA16DFAB9ACA16B6B3\", \"1\", \"3B4C382CE37AA192A4019E763036F4F5DD4D7EBB\", \"938CF935318FDCED6BC28286531733C3F03C4FEE\", [], \"\", \"secp160k1 : SECG curve over a 160 bit prime field\");\na.crypto.ECParameterDB.regist(\"secp160r1\", 160, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC\", \"1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45\", \"0100000000000000000001F4C8F927AED3CA752257\", \"1\", \"4A96B5688EF573284664698968C38BB913CBFC82\", \"23A628553168947D59DCC912042351377AC5FB32\", [], \"\", \"secp160r1 : SECG curve over a 160 bit prime field\");\na.crypto.ECParameterDB.regist(\"secp192k1\", 192, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37\", \"0\", \"3\", \"FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D\", \"1\", \"DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D\", \"9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D\", []);\na.crypto.ECParameterDB.regist(\"secp192r1\", 192, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC\", \"64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1\", \"FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831\", \"1\", \"188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012\", \"07192B95FFC8DA78631011ED6B24CDD573F977A11E794811\", []);\na.crypto.ECParameterDB.regist(\"secp224r1\", 224, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE\", \"B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D\", \"1\", \"B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21\", \"BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34\", []);\na.crypto.ECParameterDB.regist(\"secp256k1\", 256, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F\", \"0\", \"7\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141\", \"1\", \"79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798\", \"483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8\", []);\na.crypto.ECParameterDB.regist(\"secp256r1\", 256, \"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF\", \"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC\", \"5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B\", \"FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551\", \"1\", \"6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296\", \"4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5\", [\"NIST P-256\", \"P-256\", \"prime256v1\"]);\na.crypto.ECParameterDB.regist(\"secp384r1\", 384, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC\", \"B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973\", \"1\", \"AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7\", \"3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f\", [\"NIST P-384\", \"P-384\"]);\na.crypto.ECParameterDB.regist(\"secp521r1\", 521, \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\", \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC\", \"051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00\", \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409\", \"1\", \"00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66\", \"011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650\", [\"NIST P-521\", \"P-521\"]);\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.crypto > \"u\" || !a.crypto) && (a.crypto = {});\na.crypto.DSA = function() {\n  var e = V;\n  e.getVbyList;\n  var t = e.getVbyListEx, r = e.isASN1HEX, i = R;\n  this.p = null, this.q = null, this.g = null, this.y = null, this.x = null, this.type = \"DSA\", this.isPrivate = !1, this.isPublic = !1, this.setPrivate = function(s, n, h, u, p) {\n    this.isPrivate = !0, this.p = s, this.q = n, this.g = h, this.y = u, this.x = p;\n  }, this.setPrivateHex = function(s, n, h, u, p) {\n    var c, y, v, o, l;\n    c = new R(s, 16), y = new R(n, 16), v = new R(h, 16), typeof u == \"string\" && u.length > 1 ? o = new R(u, 16) : o = null, l = new R(p, 16), this.setPrivate(c, y, v, o, l);\n  }, this.setPublic = function(s, n, h, u) {\n    this.isPublic = !0, this.p = s, this.q = n, this.g = h, this.y = u, this.x = null;\n  }, this.setPublicHex = function(s, n, h, u) {\n    var p, c, y, v;\n    p = new R(s, 16), c = new R(n, 16), y = new R(h, 16), v = new R(u, 16), this.setPublic(p, c, y, v);\n  }, this.signWithMessageHash = function(s) {\n    var n = this.p, h = this.q, u = this.g;\n    this.y;\n    var p = this.x, c = a.crypto.Util.getRandomBigIntegerMinToMax(R.ONE.add(R.ONE), h.subtract(R.ONE)), y = s.substr(0, h.bitLength() / 4), v = new R(y, 16), o = u.modPow(c, n).mod(h), l = c.modInverse(h).multiply(v.add(p.multiply(o))).mod(h), f = a.asn1.ASN1Util.jsonToASN1HEX({ seq: [{ int: { bigint: o } }, { int: { bigint: l } }] });\n    return f;\n  }, this.verifyWithMessageHash = function(s, n) {\n    var h = this.p, u = this.q, p = this.g, c = this.y, y = this.parseASN1Signature(n), v = y[0], o = y[1], l = s.substr(0, u.bitLength() / 4), f = new R(l, 16);\n    if (R.ZERO.compareTo(v) > 0 || v.compareTo(u) > 0 || R.ZERO.compareTo(o) >= 0 || o.compareTo(u) > 0)\n      throw \"invalid DSA signature\";\n    var d = o.modInverse(u), g = f.multiply(d).mod(u), S = v.multiply(d).mod(u), b = p.modPow(g, h).multiply(c.modPow(S, h)).mod(h).mod(u);\n    return b.compareTo(v) == 0;\n  }, this.parseASN1Signature = function(s) {\n    try {\n      var n = new i(t(s, 0, [0], \"02\"), 16), h = new i(t(s, 0, [1], \"02\"), 16);\n      return [n, h];\n    } catch {\n      throw new Error(\"malformed ASN.1 DSA signature\");\n    }\n  }, this.readPKCS5PrvKeyHex = function(s) {\n    var n, h, u, p, c;\n    if (r(s) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    try {\n      n = t(s, 0, [1], \"02\"), h = t(s, 0, [2], \"02\"), u = t(s, 0, [3], \"02\"), p = t(s, 0, [4], \"02\"), c = t(s, 0, [5], \"02\");\n    } catch {\n      throw new Error(\"malformed PKCS#1/5 plain DSA private key\");\n    }\n    this.setPrivateHex(n, h, u, p, c);\n  }, this.readPKCS8PrvKeyHex = function(s) {\n    var n, h, u, p;\n    if (r(s) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    try {\n      n = t(s, 0, [1, 1, 0], \"02\"), h = t(s, 0, [1, 1, 1], \"02\"), u = t(s, 0, [1, 1, 2], \"02\"), p = t(s, 0, [2, 0], \"02\");\n    } catch {\n      throw new Error(\"malformed PKCS#8 plain DSA private key\");\n    }\n    this.setPrivateHex(n, h, u, null, p);\n  }, this.readPKCS8PubKeyHex = function(s) {\n    var n, h, u, p;\n    if (r(s) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    try {\n      n = t(s, 0, [0, 1, 0], \"02\"), h = t(s, 0, [0, 1, 1], \"02\"), u = t(s, 0, [0, 1, 2], \"02\"), p = t(s, 0, [1, 0], \"02\");\n    } catch {\n      throw new Error(\"malformed PKCS#8 DSA public key\");\n    }\n    this.setPublicHex(n, h, u, p);\n  }, this.readCertPubKeyHex = function(s, n) {\n    var h, u, p, c;\n    if (r(s) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    try {\n      h = t(s, 0, [0, 5, 0, 1, 0], \"02\"), u = t(s, 0, [0, 5, 0, 1, 1], \"02\"), p = t(s, 0, [0, 5, 0, 1, 2], \"02\"), c = t(s, 0, [0, 5, 1, 0], \"02\");\n    } catch {\n      throw new Error(\"malformed X.509 certificate DSA public key\");\n    }\n    this.setPublicHex(h, u, p, c);\n  };\n};\nvar k = /* @__PURE__ */ function() {\n  var e = function(f, d, g) {\n    return i(K.AES, f, d, g);\n  }, t = function(f, d, g) {\n    return i(K.TripleDES, f, d, g);\n  }, r = function(f, d, g) {\n    return i(K.DES, f, d, g);\n  }, i = function(f, d, g, S) {\n    var b = K.enc.Hex.parse(d), D = K.enc.Hex.parse(g), A = K.enc.Hex.parse(S), I = {};\n    I.key = D, I.iv = A, I.ciphertext = b;\n    var m = f.decrypt(I, D, { iv: A });\n    return K.enc.Hex.stringify(m);\n  }, s = function(f, d, g) {\n    return u(K.AES, f, d, g);\n  }, n = function(f, d, g) {\n    return u(K.TripleDES, f, d, g);\n  }, h = function(f, d, g) {\n    return u(K.DES, f, d, g);\n  }, u = function(f, d, g, S) {\n    var b = K.enc.Hex.parse(d), D = K.enc.Hex.parse(g), A = K.enc.Hex.parse(S), I = f.encrypt(b, D, { iv: A }), m = K.enc.Hex.parse(I.toString()), E = K.enc.Base64.stringify(m);\n    return E;\n  }, p = { \"AES-256-CBC\": { proc: e, eproc: s, keylen: 32, ivlen: 16 }, \"AES-192-CBC\": { proc: e, eproc: s, keylen: 24, ivlen: 16 }, \"AES-128-CBC\": { proc: e, eproc: s, keylen: 16, ivlen: 16 }, \"DES-EDE3-CBC\": { proc: t, eproc: n, keylen: 24, ivlen: 8 }, \"DES-CBC\": { proc: r, eproc: h, keylen: 8, ivlen: 8 } }, c = function(f) {\n    var d = K.lib.WordArray.random(f), g = K.enc.Hex.stringify(d);\n    return g;\n  }, y = function(f) {\n    var d = {}, g = f.match(new RegExp(\"DEK-Info: ([^,]+),([0-9A-Fa-f]+)\", \"m\"));\n    g && (d.cipher = g[1], d.ivsalt = g[2]);\n    var S = f.match(new RegExp(\"-----BEGIN ([A-Z]+) PRIVATE KEY-----\"));\n    S && (d.type = S[1]);\n    var b = -1, D = 0;\n    f.indexOf(`\\r\n\\r\n`) != -1 && (b = f.indexOf(`\\r\n\\r\n`), D = 2), f.indexOf(`\n\n`) != -1 && (b = f.indexOf(`\n\n`), D = 1);\n    var A = f.indexOf(\"-----END\");\n    if (b != -1 && A != -1) {\n      var I = f.substring(b + D * 2, A - D);\n      I = I.replace(/\\s+/g, \"\"), d.data = I;\n    }\n    return d;\n  }, v = function(f, d, g) {\n    for (var S = g.substring(0, 16), b = K.enc.Hex.parse(S), D = K.enc.Utf8.parse(d), A = p[f].keylen + p[f].ivlen, I = \"\", m = null; ; ) {\n      var E = K.algo.MD5.create();\n      if (m != null && E.update(m), E.update(D), E.update(b), m = E.finalize(), I = I + K.enc.Hex.stringify(m), I.length >= A * 2)\n        break;\n    }\n    var w = {};\n    return w.keyhex = I.substr(0, p[f].keylen * 2), w.ivhex = I.substr(p[f].keylen * 2, p[f].ivlen * 2), w;\n  }, o = function(f, d, g, S) {\n    var b = K.enc.Base64.parse(f), D = K.enc.Hex.stringify(b), A = p[d].proc, I = A(D, g, S);\n    return I;\n  }, l = function(f, d, g, S) {\n    var b = p[d].eproc, D = b(f, g, S);\n    return D;\n  };\n  return { version: \"1.0.0\", parsePKCS5PEM: function(f) {\n    return y(f);\n  }, getKeyAndUnusedIvByPasscodeAndIvsalt: function(f, d, g) {\n    return v(f, d, g);\n  }, decryptKeyB64: function(f, d, g, S) {\n    return o(f, d, g, S);\n  }, getDecryptedKeyHex: function(f, d) {\n    var g = y(f), S = g.cipher, b = g.ivsalt, D = g.data, A = v(S, d, b), I = A.keyhex, m = o(D, S, I, b);\n    return m;\n  }, getEncryptedPKCS5PEMFromPrvKeyHex: function(f, d, g, S, b) {\n    var x = \"\";\n    if ((typeof S > \"u\" || S == null) && (S = \"AES-256-CBC\"), typeof p[S] > \"u\")\n      throw new Error(\"KEYUTIL unsupported algorithm: \" + S);\n    if (typeof b > \"u\" || b == null) {\n      var D = p[S].ivlen, A = c(D);\n      b = A.toUpperCase();\n    }\n    var I = v(S, g, b), m = I.keyhex, E = l(d, S, m, b), w = E.replace(/(.{64})/g, `$1\\r\n`), x = \"-----BEGIN \" + f + ` PRIVATE KEY-----\\r\n`;\n    return x += `Proc-Type: 4,ENCRYPTED\\r\n`, x += \"DEK-Info: \" + S + \",\" + b + `\\r\n`, x += `\\r\n`, x += w, x += `\\r\n-----END ` + f + ` PRIVATE KEY-----\\r\n`, x;\n  }, getEncryptedPKCS8PEM: function(f, d, g) {\n    var S = this.getEncryptedPKCS8Hex(f, d, g);\n    return de(S, \"ENCRYPTED PRIVATE KEY\");\n  }, getEncryptedPKCS8Hex: function(f, d, g) {\n    var S;\n    g == null || g == null ? S = {} : S = JSON.parse(JSON.stringify(g)), S.plain = f, this.initPBES2Param(S), this.encryptPBES2Param(S, d);\n    var b = this.generatePBES2ASN1Param(S);\n    return a.asn1.ASN1Util.newObject(b).tohex();\n  }, initPBES2Param: function(f) {\n    if (J(f, \"encalg\") == null && (f.encalg = \"aes256-CBC\"), J(f, \"iter\") == null && (f.iter = 2048), J(f, \"prf\") == null && (f.prf = \"hmacWithSHA256\"), J(f, \"salt\") == null && (f.salt = K.enc.Hex.stringify(K.lib.WordArray.random(8))), J(f, \"enciv\") == null) {\n      var d;\n      f.encalg == \"des-EDE3-CBC\" && (d = 8), f.encalg == \"aes128-CBC\" && (d = 16), f.encalg == \"aes256-CBC\" && (d = 16), f.enciv = K.enc.Hex.stringify(K.lib.WordArray.random(d));\n    }\n  }, encryptPBES2Param: function(f, d) {\n    var g = k.getDKFromPBES2Param(f, d);\n    try {\n      var S = a.crypto.Cipher.encrypt(f.plain, g, f.encalg, { iv: f.enciv });\n    } catch {\n      throw new Error(\"encrypt error: \" + f.plain + \" \" + g + \" \" + f.encalg + \" \" + f.enciv);\n    }\n    f.enc = S;\n  }, generatePBES2ASN1Param: function(f) {\n    var d = { seq: [{ seq: [{ oid: \"pkcs5PBES2\" }, { seq: [{ seq: [{ oid: \"pkcs5PBKDF2\" }, { seq: [{ octstr: { hex: f.salt } }, { int: { hex: xn(f.iter) } }] }] }, { seq: [{ oid: f.encalg }, { octstr: { hex: f.enciv } }] }] }] }, { octstr: { hex: f.enc } }] };\n    return f.prf != \"hmacWithSHA1\" && d.seq[0].seq[1].seq[0].seq[1].seq.push({ seq: [{ oid: f.prf }, { null: \"\" }] }), d;\n  }, parseHexOfEncryptedPKCS8: function(f) {\n    var d = V, g = d.getChildIdx, S = d.getV, b = {}, D = g(f, 0);\n    if (D.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0).items != 2: \" + D.length);\n    b.ciphertext = S(f, D[1]);\n    var A = g(f, D[0]);\n    if (A.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0).items != 2: \" + A.length);\n    if (S(f, A[0]) != \"2a864886f70d01050d\")\n      throw new Error(\"this only supports pkcs5PBES2\");\n    var I = g(f, A[1]);\n    if (A.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0.1).items != 2: \" + I.length);\n    var m = g(f, I[1]);\n    if (m.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0.1.1).items != 2: \" + m.length);\n    if (S(f, m[0]) != \"2a864886f70d0307\")\n      throw \"this only supports TripleDES\";\n    b.encryptionSchemeAlg = \"TripleDES\", b.encryptionSchemeIV = S(f, m[1]);\n    var E = g(f, I[0]);\n    if (E.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0.1.0).items != 2: \" + E.length);\n    if (S(f, E[0]) != \"2a864886f70d01050c\")\n      throw new Error(\"this only supports pkcs5PBKDF2\");\n    var w = g(f, E[1]);\n    if (w.length < 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0.1.0.1).items < 2: \" + w.length);\n    b.pbkdf2Salt = S(f, w[0]);\n    var x = S(f, w[1]);\n    try {\n      b.pbkdf2Iter = parseInt(x, 16);\n    } catch {\n      throw new Error(\"malformed format pbkdf2Iter: \" + x);\n    }\n    return b;\n  }, getPBKDF2KeyHexFromParam: function(f, d) {\n    var g = K.enc.Hex.parse(f.pbkdf2Salt), S = f.pbkdf2Iter, b = K.PBKDF2(d, g, { keySize: 192 / 32, iterations: S }), D = K.enc.Hex.stringify(b);\n    return D;\n  }, _getPlainPKCS8HexFromEncryptedPKCS8PEM: function(f, d) {\n    var g = ie(f, \"ENCRYPTED PRIVATE KEY\"), S = this.parseHexOfEncryptedPKCS8(g), b = k.getPBKDF2KeyHexFromParam(S, d), D = {};\n    D.ciphertext = K.enc.Hex.parse(S.ciphertext);\n    var A = K.enc.Hex.parse(b), I = K.enc.Hex.parse(S.encryptionSchemeIV), m = K.TripleDES.decrypt(D, A, { iv: I }), E = K.enc.Hex.stringify(m);\n    return E;\n  }, parsePBES2: function(f) {\n    var d = V.parse(f);\n    if (J(d, \"seq.0.seq.0.oid\") != \"pkcs5PBES2\" || J(d, \"seq.0.seq.1.seq.0.seq.0.oid\") != \"pkcs5PBKDF2\")\n      throw new Error(\"not pkcs5PBES2 and pkcs5PBKDF2 used\");\n    var g = J(d, \"seq.0.seq.1.seq.0.seq.1.seq\");\n    if (g == null)\n      throw new Error(\"PBKDF2 parameter not found\");\n    var S = J(g, \"0.octstr.hex\"), b = J(g, \"1.int.hex\"), D = J(g, \"2.seq.0.oid\", \"hmacWithSHA1\"), A = -1;\n    try {\n      A = parseInt(b, 16);\n    } catch {\n      throw new Error(\"iter not proper value\");\n    }\n    var I = J(d, \"seq.0.seq.1.seq.1.seq.0.oid\"), m = J(d, \"seq.0.seq.1.seq.1.seq.1.octstr.hex\"), E = J(d, \"seq.1.octstr.hex\");\n    if (I == null || m == null || E == null)\n      throw new Error(\"encalg, enciv or enc is undefined\");\n    var w = { salt: S, iter: A, prf: D, encalg: I, enciv: m, enc: E };\n    return w;\n  }, getDKFromPBES2Param: function(f, d) {\n    var g = { hmacWithSHA1: K.algo.SHA1, hmacWithSHA224: K.algo.SHA224, hmacWithSHA256: K.algo.SHA256, hmacWithSHA384: K.algo.SHA384, hmacWithSHA512: K.algo.SHA512 }, S = { \"des-EDE3-CBC\": 192 / 32, \"aes128-CBC\": 128 / 32, \"aes256-CBC\": 256 / 32 }, b = g[f.prf];\n    if (b == null)\n      throw new Error(\"unsupported prf\");\n    var D = S[f.encalg];\n    if (D == null)\n      throw new Error(\"unsupported encalg\");\n    var A = K.enc.Hex.parse(f.salt), I = f.iter;\n    try {\n      var m = K.PBKDF2(d, A, { keySize: D, iterations: I, hasher: b });\n      return K.enc.Hex.stringify(m);\n    } catch (E) {\n      throw new Error(\"PBKDF2 error: \" + E + \" \" + JSON.stringify(f) + \" \" + d);\n    }\n  }, getPlainHexFromEncryptedPKCS8PEM: function(f, d) {\n    if (f.indexOf(\"BEGIN ENCRYPTED PRIVATE KEY\") == -1)\n      throw new Error(\"not Encrypted PKCS#8 PEM string\");\n    var g = ie(f), S;\n    try {\n      S = k.parsePBES2(g);\n    } catch (D) {\n      throw new Error(\"malformed PBES2 format: \" + D.message);\n    }\n    var b = k.getDKFromPBES2Param(S, d);\n    return a.crypto.Cipher.decrypt(S.enc, b, S.encalg, { iv: S.enciv });\n  }, getKeyFromEncryptedPKCS8PEM: function(f, d) {\n    var g = this.getPlainHexFromEncryptedPKCS8PEM(f, d), S = this.getKeyFromPlainPrivatePKCS8Hex(g);\n    return S;\n  }, parsePlainPrivatePKCS8Hex: function(f) {\n    var d = V, g = d.getChildIdx, S = d.getV, b = {};\n    if (b.algparam = null, f.substr(0, 2) != \"30\")\n      throw new Error(\"malformed plain PKCS8 private key(code:001)\");\n    var D = g(f, 0);\n    if (D.length < 3)\n      throw new Error(\"malformed plain PKCS8 private key(code:002)\");\n    if (f.substr(D[1], 2) != \"30\")\n      throw new Error(\"malformed PKCS8 private key(code:003)\");\n    var A = g(f, D[1]);\n    if (A.length != 2)\n      throw new Error(\"malformed PKCS8 private key(code:004)\");\n    if (f.substr(A[0], 2) != \"06\")\n      throw new Error(\"malformed PKCS8 private key(code:005)\");\n    if (b.algoid = S(f, A[0]), f.substr(A[1], 2) == \"06\" && (b.algparam = S(f, A[1])), f.substr(D[2], 2) != \"04\")\n      throw new Error(\"malformed PKCS8 private key(code:006)\");\n    return b.keyidx = d.getVidx(f, D[2]), b;\n  }, getKeyFromPlainPrivatePKCS8PEM: function(f) {\n    var d = ie(f, \"PRIVATE KEY\"), g = this.getKeyFromPlainPrivatePKCS8Hex(d);\n    return g;\n  }, getKeyFromPlainPrivatePKCS8Hex: function(f) {\n    var d = this.parsePlainPrivatePKCS8Hex(f), g;\n    if (d.algoid == \"2a864886f70d010101\")\n      g = new q();\n    else if (d.algoid == \"2a8648ce380401\")\n      g = new a.crypto.DSA();\n    else if (d.algoid == \"2a8648ce3d0201\")\n      g = new a.crypto.ECDSA();\n    else\n      throw new Error(\"unsupported private key algorithm\");\n    return g.readPKCS8PrvKeyHex(f), g;\n  }, _getKeyFromPublicPKCS8Hex: function(f) {\n    var d, g = V.getVbyList(f, 0, [0, 0], \"06\");\n    if (g === \"2a864886f70d010101\")\n      d = new q();\n    else if (g === \"2a8648ce380401\")\n      d = new a.crypto.DSA();\n    else if (g === \"2a8648ce3d0201\")\n      d = new a.crypto.ECDSA();\n    else\n      throw new Error(\"unsupported PKCS#8 public key hex\");\n    return d.readPKCS8PubKeyHex(f), d;\n  }, parsePublicRawRSAKeyHex: function(f) {\n    var d = V, g = d.getChildIdx, S = d.getV, b = {};\n    if (f.substr(0, 2) != \"30\")\n      throw new Error(\"malformed RSA key(code:001)\");\n    var D = g(f, 0);\n    if (D.length != 2)\n      throw new Error(\"malformed RSA key(code:002)\");\n    if (f.substr(D[0], 2) != \"02\")\n      throw new Error(\"malformed RSA key(code:003)\");\n    if (b.n = S(f, D[0]), f.substr(D[1], 2) != \"02\")\n      throw new Error(\"malformed RSA key(code:004)\");\n    return b.e = S(f, D[1]), b;\n  }, parsePublicPKCS8Hex: function(f) {\n    var d = V, g = d.getChildIdx, S = d.getV, b = {};\n    b.algparam = null;\n    var D = g(f, 0);\n    if (D.length != 2)\n      throw new Error(\"outer DERSequence shall have 2 elements: \" + D.length);\n    var A = D[0];\n    if (f.substr(A, 2) != \"30\")\n      throw new Error(\"malformed PKCS8 public key(code:001)\");\n    var I = g(f, A);\n    if (I.length != 2)\n      throw new Error(\"malformed PKCS8 public key(code:002)\");\n    if (f.substr(I[0], 2) != \"06\")\n      throw new Error(\"malformed PKCS8 public key(code:003)\");\n    if (b.algoid = S(f, I[0]), f.substr(I[1], 2) == \"06\" ? b.algparam = S(f, I[1]) : f.substr(I[1], 2) == \"30\" && (b.algparam = {}, b.algparam.p = d.getVbyList(f, I[1], [0], \"02\"), b.algparam.q = d.getVbyList(f, I[1], [1], \"02\"), b.algparam.g = d.getVbyList(f, I[1], [2], \"02\")), f.substr(D[1], 2) != \"03\")\n      throw new Error(\"malformed PKCS8 public key(code:004)\");\n    return b.key = S(f, D[1]).substr(2), b;\n  } };\n}();\nk.getKey = function(e, t, r) {\n  var i = V, s = i.getChildIdx;\n  i.getV;\n  var n = i.getVbyList, h = a.crypto, u = h.ECDSA, p = h.DSA, c = q, y = ie, v = k;\n  if (typeof c < \"u\" && e instanceof c || typeof u < \"u\" && e instanceof u || typeof p < \"u\" && e instanceof p)\n    return e;\n  if (e.curve !== void 0 && e.xy !== void 0 && e.d === void 0)\n    return new u({ pub: e.xy, curve: e.curve });\n  if (e.curve !== void 0 && e.d !== void 0)\n    return new u({ prv: e.d, curve: e.curve });\n  if (e.kty === void 0 && e.n !== void 0 && e.e !== void 0 && e.d === void 0) {\n    var o = new c();\n    return o.setPublic(e.n, e.e), o;\n  }\n  if (e.kty === void 0 && e.n !== void 0 && e.e !== void 0 && e.d !== void 0 && e.p !== void 0 && e.q !== void 0 && e.dp !== void 0 && e.dq !== void 0 && e.co !== void 0 && e.qi === void 0) {\n    var o = new c();\n    return o.setPrivateEx(e.n, e.e, e.d, e.p, e.q, e.dp, e.dq, e.co), o;\n  }\n  if (e.kty === void 0 && e.n !== void 0 && e.e !== void 0 && e.d !== void 0 && e.p === void 0) {\n    var o = new c();\n    return o.setPrivate(e.n, e.e, e.d), o;\n  }\n  if (e.p !== void 0 && e.q !== void 0 && e.g !== void 0 && e.y !== void 0 && e.x === void 0) {\n    var o = new p();\n    return o.setPublic(e.p, e.q, e.g, e.y), o;\n  }\n  if (e.p !== void 0 && e.q !== void 0 && e.g !== void 0 && e.y !== void 0 && e.x !== void 0) {\n    var o = new p();\n    return o.setPrivate(e.p, e.q, e.g, e.y, e.x), o;\n  }\n  if (e.kty === \"RSA\" && e.n !== void 0 && e.e !== void 0 && e.d === void 0) {\n    var o = new c();\n    return o.setPublic(Y(e.n), Y(e.e)), o;\n  }\n  if (e.kty === \"RSA\" && e.n !== void 0 && e.e !== void 0 && e.d !== void 0 && e.p !== void 0 && e.q !== void 0 && e.dp !== void 0 && e.dq !== void 0 && e.qi !== void 0) {\n    var o = new c();\n    return o.setPrivateEx(Y(e.n), Y(e.e), Y(e.d), Y(e.p), Y(e.q), Y(e.dp), Y(e.dq), Y(e.qi)), o;\n  }\n  if (e.kty === \"RSA\" && e.n !== void 0 && e.e !== void 0 && e.d !== void 0) {\n    var o = new c();\n    return o.setPrivate(Y(e.n), Y(e.e), Y(e.d)), o;\n  }\n  if (e.kty === \"EC\" && e.crv !== void 0 && e.x !== void 0 && e.y !== void 0 && e.d === void 0) {\n    var l = new u({ curve: e.crv }), f = l.ecparams.keycharlen, d = (\"0000000000\" + Y(e.x)).slice(-f), g = (\"0000000000\" + Y(e.y)).slice(-f), S = \"04\" + d + g;\n    return l.setPublicKeyHex(S), l;\n  }\n  if (e.kty === \"EC\" && e.crv !== void 0 && e.x !== void 0 && e.y !== void 0 && e.d !== void 0) {\n    var l = new u({ curve: e.crv }), f = l.ecparams.keycharlen, d = (\"0000000000\" + Y(e.x)).slice(-f), g = (\"0000000000\" + Y(e.y)).slice(-f), S = \"04\" + d + g, b = (\"0000000000\" + Y(e.d)).slice(-f);\n    return l.setPublicKeyHex(S), l.setPrivateKeyHex(b), l;\n  }\n  if (r === \"pkcs5prv\") {\n    var D = e, i = V, A, o;\n    if (A = s(D, 0), A.length === 9)\n      o = new c(), o.readPKCS5PrvKeyHex(D);\n    else if (A.length === 6)\n      o = new p(), o.readPKCS5PrvKeyHex(D);\n    else if (A.length > 2 && D.substr(A[1], 2) === \"04\")\n      o = new u(), o.readPKCS5PrvKeyHex(D);\n    else\n      throw new Error(\"unsupported PKCS#1/5 hexadecimal key\");\n    return o;\n  }\n  if (r === \"pkcs8prv\") {\n    var o = v.getKeyFromPlainPrivatePKCS8Hex(e);\n    return o;\n  }\n  if (r === \"pkcs8pub\")\n    return v._getKeyFromPublicPKCS8Hex(e);\n  if (r === \"x509pub\")\n    return L.getPublicKeyFromCertHex(e);\n  if (e.indexOf(\"-END CERTIFICATE-\", 0) != -1 || e.indexOf(\"-END X509 CERTIFICATE-\", 0) != -1 || e.indexOf(\"-END TRUSTED CERTIFICATE-\", 0) != -1)\n    return L.getPublicKeyFromCertPEM(e);\n  if (e.indexOf(\"-END PUBLIC KEY-\") != -1) {\n    var I = ie(e, \"PUBLIC KEY\");\n    return v._getKeyFromPublicPKCS8Hex(I);\n  }\n  if (e.indexOf(\"-END RSA PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") == -1) {\n    var m = y(e, \"RSA PRIVATE KEY\");\n    return v.getKey(m, null, \"pkcs5prv\");\n  }\n  if (e.indexOf(\"-END DSA PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") == -1) {\n    var E = y(e, \"DSA PRIVATE KEY\"), w = n(E, 0, [1], \"02\"), x = n(E, 0, [2], \"02\"), F = n(E, 0, [3], \"02\"), P = n(E, 0, [4], \"02\"), T = n(E, 0, [5], \"02\"), o = new p();\n    return o.setPrivate(new R(w, 16), new R(x, 16), new R(F, 16), new R(P, 16), new R(T, 16)), o;\n  }\n  if (e.indexOf(\"-END EC PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") == -1) {\n    var m = y(e, \"EC PRIVATE KEY\");\n    return v.getKey(m, null, \"pkcs5prv\");\n  }\n  if (e.indexOf(\"-END PRIVATE KEY-\") != -1)\n    return v.getKeyFromPlainPrivatePKCS8PEM(e);\n  if (e.indexOf(\"-END RSA PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") != -1) {\n    var H = v.getDecryptedKeyHex(e, t), C = new q();\n    return C.readPKCS5PrvKeyHex(H), C;\n  }\n  if (e.indexOf(\"-END EC PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") != -1) {\n    var E = v.getDecryptedKeyHex(e, t), o = n(E, 0, [1], \"04\"), B = n(E, 0, [2, 0], \"06\"), O = n(E, 0, [3, 0], \"03\").substr(2), j = \"\";\n    if (a.crypto.OID.oidhex2name[B] !== void 0)\n      j = a.crypto.OID.oidhex2name[B];\n    else\n      throw new Error(\"undefined OID(hex) in KJUR.crypto.OID: \" + B);\n    var l = new u({ curve: j });\n    return l.setPublicKeyHex(O), l.setPrivateKeyHex(o), l.isPublic = !1, l;\n  }\n  if (e.indexOf(\"-END DSA PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") != -1) {\n    var E = v.getDecryptedKeyHex(e, t), w = n(E, 0, [1], \"02\"), x = n(E, 0, [2], \"02\"), F = n(E, 0, [3], \"02\"), P = n(E, 0, [4], \"02\"), T = n(E, 0, [5], \"02\"), o = new p();\n    return o.setPrivate(new R(w, 16), new R(x, 16), new R(F, 16), new R(P, 16), new R(T, 16)), o;\n  }\n  if (e.indexOf(\"-END ENCRYPTED PRIVATE KEY-\") != -1)\n    return v.getKeyFromEncryptedPKCS8PEM(e, t);\n  throw new Error(\"not supported argument\");\n};\nk.generateKeypair = function(e, t) {\n  if (e == \"RSA\") {\n    var r = t, i = new q();\n    i.generate(r, \"10001\"), i.isPrivate = !0, i.isPublic = !0;\n    var s = new q(), n = i.n.toString(16), h = i.e.toString(16);\n    s.setPublic(n, h), s.isPrivate = !1, s.isPublic = !0;\n    var u = {};\n    return u.prvKeyObj = i, u.pubKeyObj = s, u;\n  } else if (e == \"EC\") {\n    var p = t, c = new a.crypto.ECDSA({ curve: p }), y = c.generateKeyPairHex(), i = new a.crypto.ECDSA({ curve: p });\n    i.setPublicKeyHex(y.ecpubhex), i.setPrivateKeyHex(y.ecprvhex), i.isPrivate = !0, i.isPublic = !1;\n    var s = new a.crypto.ECDSA({ curve: p });\n    s.setPublicKeyHex(y.ecpubhex), s.isPrivate = !1, s.isPublic = !0;\n    var u = {};\n    return u.prvKeyObj = i, u.pubKeyObj = s, u;\n  } else\n    throw new Error(\"unknown algorithm: \" + e);\n};\nk.getPEM = function(e, t, r, i, s, n) {\n  var h = a, u = h.asn1, p = u.DERObjectIdentifier, c = u.DERInteger, y = u.ASN1Util.newObject, v = u.x509, o = v.SubjectPublicKeyInfo, l = h.crypto, f = l.DSA, d = l.ECDSA, g = q;\n  function S(B) {\n    var O = y({ seq: [{ int: 0 }, { int: { bigint: B.n } }, { int: B.e }, { int: { bigint: B.d } }, { int: { bigint: B.p } }, { int: { bigint: B.q } }, { int: { bigint: B.dmp1 } }, { int: { bigint: B.dmq1 } }, { int: { bigint: B.coeff } }] });\n    return O;\n  }\n  function b(B) {\n    var O = y({ seq: [{ int: 1 }, { octstr: { hex: B.prvKeyHex } }, { tag: [\"a0\", !0, { oid: { name: B.curveName } }] }, { tag: [\"a1\", !0, { bitstr: { hex: \"00\" + B.pubKeyHex } }] }] });\n    return O;\n  }\n  function D(B) {\n    var O = y({ seq: [{ int: 0 }, { int: { bigint: B.p } }, { int: { bigint: B.q } }, { int: { bigint: B.g } }, { int: { bigint: B.y } }, { int: { bigint: B.x } }] });\n    return O;\n  }\n  if ((g !== void 0 && e instanceof g || f !== void 0 && e instanceof f || d !== void 0 && e instanceof d) && e.isPublic == !0 && (t === void 0 || t == \"PKCS8PUB\")) {\n    var A = new o(e), I = A.tohex();\n    return de(I, \"PUBLIC KEY\");\n  }\n  if (t == \"PKCS1PRV\" && g !== void 0 && e instanceof g && (r === void 0 || r == null) && e.isPrivate == !0) {\n    var A = S(e), I = A.tohex();\n    return de(I, \"RSA PRIVATE KEY\");\n  }\n  if (t == \"PKCS1PRV\" && d !== void 0 && e instanceof d && (r === void 0 || r == null) && e.isPrivate == !0) {\n    var m = new p({ name: e.curveName }), E = m.tohex(), w = b(e), x = w.tohex(), F = \"\";\n    return F += de(E, \"EC PARAMETERS\"), F += de(x, \"EC PRIVATE KEY\"), F;\n  }\n  if (t == \"PKCS1PRV\" && f !== void 0 && e instanceof f && (r === void 0 || r == null) && e.isPrivate == !0) {\n    var A = D(e), I = A.tohex();\n    return de(I, \"DSA PRIVATE KEY\");\n  }\n  if (t == \"PKCS5PRV\" && g !== void 0 && e instanceof g && r !== void 0 && r != null && e.isPrivate == !0) {\n    var A = S(e), I = A.tohex();\n    return i === void 0 && (i = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"RSA\", I, r, i, n);\n  }\n  if (t == \"PKCS5PRV\" && d !== void 0 && e instanceof d && r !== void 0 && r != null && e.isPrivate == !0) {\n    var A = b(e), I = A.tohex();\n    return i === void 0 && (i = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"EC\", I, r, i, n);\n  }\n  if (t == \"PKCS5PRV\" && f !== void 0 && e instanceof f && r !== void 0 && r != null && e.isPrivate == !0) {\n    var A = D(e), I = A.tohex();\n    return i === void 0 && (i = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"DSA\", I, r, i, n);\n  }\n  var P = function(B, O) {\n    if (typeof O == \"string\")\n      return k.getEncryptedPKCS8PEM(B, O);\n    if (typeof O == \"object\" && J(O, \"passcode\") != null) {\n      var j = JSON.parse(JSON.stringify(O)), fe = j.passcode;\n      return delete j.passcode, k.getEncryptedPKCS8PEM(B, fe, j);\n    }\n  };\n  if (t == \"PKCS8PRV\" && g != null && e instanceof g && e.isPrivate == !0) {\n    var T = S(e), H = T.tohex(), A = y({ seq: [{ int: 0 }, { seq: [{ oid: { name: \"rsaEncryption\" } }, { null: !0 }] }, { octstr: { hex: H } }] }), I = A.tohex();\n    return r === void 0 || r == null ? de(I, \"PRIVATE KEY\") : P(I, r);\n  }\n  if (t == \"PKCS8PRV\" && d !== void 0 && e instanceof d && e.isPrivate == !0) {\n    var C = { seq: [{ int: 1 }, { octstr: { hex: e.prvKeyHex } }] };\n    typeof e.pubKeyHex == \"string\" && C.seq.push({ tag: [\"a1\", !0, { bitstr: { hex: \"00\" + e.pubKeyHex } }] });\n    var T = new y(C), H = T.tohex(), A = y({ seq: [{ int: 0 }, { seq: [{ oid: { name: \"ecPublicKey\" } }, { oid: { name: e.curveName } }] }, { octstr: { hex: H } }] }), I = A.tohex();\n    return r === void 0 || r == null ? de(I, \"PRIVATE KEY\") : P(I, r);\n  }\n  if (t == \"PKCS8PRV\" && f !== void 0 && e instanceof f && e.isPrivate == !0) {\n    var T = new c({ bigint: e.x }), H = T.tohex(), A = y({ seq: [{ int: 0 }, { seq: [{ oid: { name: \"dsa\" } }, { seq: [{ int: { bigint: e.p } }, { int: { bigint: e.q } }, { int: { bigint: e.g } }] }] }, { octstr: { hex: H } }] }), I = A.tohex();\n    return r === void 0 || r == null ? de(I, \"PRIVATE KEY\") : P(I, r);\n  }\n  throw new Error(\"unsupported object nor format\");\n};\nk.getKeyFromCSRPEM = function(e) {\n  var t = ie(e, \"CERTIFICATE REQUEST\"), r = k.getKeyFromCSRHex(t);\n  return r;\n};\nk.getKeyFromCSRHex = function(e) {\n  var t = k.parseCSRHex(e), r = k.getKey(t.p8pubkeyhex, null, \"pkcs8pub\");\n  return r;\n};\nk.parseCSRHex = function(e) {\n  var t = V, r = t.getChildIdx, i = t.getTLV, s = {}, n = e;\n  if (n.substr(0, 2) != \"30\")\n    throw new Error(\"malformed CSR(code:001)\");\n  var h = r(n, 0);\n  if (h.length < 1)\n    throw new Error(\"malformed CSR(code:002)\");\n  if (n.substr(h[0], 2) != \"30\")\n    throw new Error(\"malformed CSR(code:003)\");\n  var u = r(n, h[0]);\n  if (u.length < 3)\n    throw new Error(\"malformed CSR(code:004)\");\n  return s.p8pubkeyhex = i(n, u[2]), s;\n};\nk.getKeyID = function(e) {\n  var t = k, r = V;\n  typeof e == \"string\" && e.indexOf(\"BEGIN \") != -1 && (e = t.getKey(e));\n  var i = ie(t.getPEM(e)), s = r.getIdxbyList(i, 0, [1]), n = r.getV(i, s).substring(2);\n  return a.crypto.Util.hashHex(n, \"sha1\");\n};\nk.getJWK = function(e, t, r, i, s) {\n  var n, h = {}, u, p = a.crypto.Util.hashHex;\n  if (typeof e == \"string\")\n    n = k.getKey(e), e.indexOf(\"CERTIFICATE\") != -1 && (u = ie(e));\n  else if (typeof e == \"object\")\n    e instanceof L ? (n = e.getPublicKey(), u = e.hex) : n = e;\n  else\n    throw new Error(\"unsupported keyinfo type\");\n  if (n instanceof q && n.isPrivate)\n    h.kty = \"RSA\", h.n = ae(n.n.toString(16)), h.e = ae(n.e.toString(16)), h.d = ae(n.d.toString(16)), h.p = ae(n.p.toString(16)), h.q = ae(n.q.toString(16)), h.dp = ae(n.dmp1.toString(16)), h.dq = ae(n.dmq1.toString(16)), h.qi = ae(n.coeff.toString(16));\n  else if (n instanceof q && n.isPublic)\n    h.kty = \"RSA\", h.n = ae(n.n.toString(16)), h.e = ae(n.e.toString(16));\n  else if (n instanceof a.crypto.ECDSA && n.isPrivate) {\n    var c = n.getShortNISTPCurveName();\n    if (c !== \"P-256\" && c !== \"P-384\" && c !== \"P-521\")\n      throw new Error(\"unsupported curve name for JWT: \" + c);\n    var y = n.getPublicKeyXYHex();\n    h.kty = \"EC\", h.crv = c, h.x = ae(y.x), h.y = ae(y.y), h.d = ae(n.prvKeyHex);\n  } else if (n instanceof a.crypto.ECDSA && n.isPublic) {\n    var c = n.getShortNISTPCurveName();\n    if (c !== \"P-256\" && c !== \"P-384\" && c !== \"P-521\")\n      throw new Error(\"unsupported curve name for JWT: \" + c);\n    var y = n.getPublicKeyXYHex();\n    h.kty = \"EC\", h.crv = c, h.x = ae(y.x), h.y = ae(y.y);\n  }\n  if (h.kty == null)\n    throw new Error(\"unsupported keyinfo\");\n  return !n.isPrivate && t != !0 && (h.kid = a.jws.JWS.getJWKthumbprint(h)), u != null && r != !0 && (h.x5c = [_e(u)]), u != null && i != !0 && (h.x5t = Xe(_e(p(u, \"sha1\")))), u != null && s != !0 && (h[\"x5t#S256\"] = Xe(_e(p(u, \"sha256\")))), h;\n};\nk.getJWKFromKey = function(e) {\n  return k.getJWK(e, !0, !0, !0, !0);\n};\nq.getPosArrayOfChildrenFromHex = function(e) {\n  return V.getChildIdx(e, 0);\n};\nq.getHexValueArrayOfChildrenFromHex = function(e) {\n  var t = V, r = t.getV, o = q.getPosArrayOfChildrenFromHex(e), i = r(e, o[0]), s = r(e, o[1]), n = r(e, o[2]), h = r(e, o[3]), u = r(e, o[4]), p = r(e, o[5]), c = r(e, o[6]), y = r(e, o[7]), v = r(e, o[8]), o = new Array();\n  return o.push(i, s, n, h, u, p, c, y, v), o;\n};\nq.prototype.readPrivateKeyFromPEMString = function(e) {\n  var t = ie(e), r = q.getHexValueArrayOfChildrenFromHex(t);\n  this.setPrivateEx(r[1], r[2], r[3], r[4], r[5], r[6], r[7], r[8]);\n};\nq.prototype.readPKCS5PrvKeyHex = function(e) {\n  var t = q.getHexValueArrayOfChildrenFromHex(e);\n  this.setPrivateEx(t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]);\n};\nq.prototype.readPKCS8PrvKeyHex = function(e) {\n  var t, r, i, s, n, h, u, p, c = V, y = c.getVbyListEx;\n  if (c.isASN1HEX(e) === !1)\n    throw new Error(\"not ASN.1 hex string\");\n  try {\n    t = y(e, 0, [2, 0, 1], \"02\"), r = y(e, 0, [2, 0, 2], \"02\"), i = y(e, 0, [2, 0, 3], \"02\"), s = y(e, 0, [2, 0, 4], \"02\"), n = y(e, 0, [2, 0, 5], \"02\"), h = y(e, 0, [2, 0, 6], \"02\"), u = y(e, 0, [2, 0, 7], \"02\"), p = y(e, 0, [2, 0, 8], \"02\");\n  } catch {\n    throw new Error(\"malformed PKCS#8 plain RSA private key\");\n  }\n  this.setPrivateEx(t, r, i, s, n, h, u, p);\n};\nq.prototype.readPKCS5PubKeyHex = function(e) {\n  var t = V, r = t.getV;\n  if (t.isASN1HEX(e) === !1)\n    throw new Error(\"keyHex is not ASN.1 hex string\");\n  var i = t.getChildIdx(e, 0);\n  if (i.length !== 2 || e.substr(i[0], 2) !== \"02\" || e.substr(i[1], 2) !== \"02\")\n    throw new Error(\"wrong hex for PKCS#5 public key\");\n  var s = r(e, i[0]), n = r(e, i[1]);\n  this.setPublic(s, n);\n};\nq.prototype.readPKCS8PubKeyHex = function(e) {\n  var t = V;\n  if (t.isASN1HEX(e) === !1)\n    throw new Error(\"not ASN.1 hex string\");\n  if (t.getTLVbyListEx(e, 0, [0, 0]) !== \"06092a864886f70d010101\")\n    throw new Error(\"not PKCS8 RSA public key\");\n  var r = t.getTLVbyListEx(e, 0, [1, 0]);\n  this.readPKCS5PubKeyHex(r);\n};\nq.prototype.readCertPubKeyHex = function(e, t) {\n  var r, i;\n  r = new L(), r.readCertHex(e), i = r.getPublicKeyHex(), this.readPKCS8PubKeyHex(i);\n};\nfunction Ot(e, t) {\n  for (var r = \"\", i = t / 4 - e.length, s = 0; s < i; s++)\n    r = r + \"0\";\n  return r + e;\n}\nq.prototype.sign = function(e, t) {\n  var r = function(s) {\n    return a.crypto.Util.hashString(s, t);\n  }, i = r(e);\n  return this.signWithMessageHash(i, t);\n};\nq.prototype.signWithMessageHash = function(e, t) {\n  var r = a.crypto.Util.getPaddedDigestInfoHex(e, t, this.n.bitLength()), i = ve(r, 16), s = this.doPrivate(i), n = s.toString(16);\n  return Ot(n, this.n.bitLength());\n};\nfunction jt(e, t, r) {\n  for (var i = \"\", s = 0; i.length < t; )\n    i += Ae(r(Pe(e + String.fromCharCode.apply(String, [(s & 4278190080) >> 24, (s & 16711680) >> 16, (s & 65280) >> 8, s & 255])))), s += 1;\n  return i;\n}\nq.prototype.signPSS = function(e, t, r) {\n  var i = function(n) {\n    return a.crypto.Util.hashHex(n, t);\n  }, s = i(Pe(e));\n  return r === void 0 && (r = -1), this.signWithMessageHashPSS(s, t, r);\n};\nq.prototype.signWithMessageHashPSS = function(e, t, r) {\n  var i = Ae(e), s = i.length, n = this.n.bitLength() - 1, h = Math.ceil(n / 8), u, p = function(g) {\n    return a.crypto.Util.hashHex(g, t);\n  };\n  if (r === -1 || r === void 0)\n    r = s;\n  else if (r === -2)\n    r = h - s - 2;\n  else if (r < -2)\n    throw new Error(\"invalid salt length\");\n  if (h < s + r + 2)\n    throw new Error(\"data too long\");\n  var c = \"\";\n  r > 0 && (c = new Array(r), new Ge().nextBytes(c), c = String.fromCharCode.apply(String, c));\n  var y = Ae(p(Pe(\"\\0\\0\\0\\0\\0\\0\\0\\0\" + i + c))), v = [];\n  for (u = 0; u < h - r - s - 2; u += 1)\n    v[u] = 0;\n  var o = String.fromCharCode.apply(String, v) + \"\u0001\" + c, l = jt(y, o.length, p), f = [];\n  for (u = 0; u < o.length; u += 1)\n    f[u] = o.charCodeAt(u) ^ l.charCodeAt(u);\n  var d = 65280 >> 8 * h - n & 255;\n  for (f[0] &= ~d, u = 0; u < s; u++)\n    f.push(y.charCodeAt(u));\n  return f.push(188), Ot(this.doPrivate(new R(f)).toString(16), this.n.bitLength());\n};\nfunction Vt(e) {\n  for (var t in a.crypto.Util.DIGESTINFOHEAD) {\n    var r = a.crypto.Util.DIGESTINFOHEAD[t], i = r.length;\n    if (e.substring(0, i) == r) {\n      var s = [t, e.substring(i)];\n      return s;\n    }\n  }\n  return [];\n}\nq.prototype.verify = function(e, t) {\n  if (t = t.toLowerCase(), t.match(/^[0-9a-f]+$/) == null)\n    return !1;\n  var r = ve(t, 16), i = this.n.bitLength();\n  if (r.bitLength() > i)\n    return !1;\n  var s = this.doPublic(r), n = s.toString(16);\n  if (n.length + 3 != i / 4)\n    return !1;\n  var h = n.replace(/^1f+00/, \"\"), u = Vt(h);\n  if (u.length == 0)\n    return !1;\n  var p = u[0], c = u[1], y = function(o) {\n    return a.crypto.Util.hashString(o, p);\n  }, v = y(e);\n  return c == v;\n};\nq.prototype.verifyWithMessageHash = function(e, t) {\n  if (t.length != Math.ceil(this.n.bitLength() / 4))\n    return !1;\n  var r = ve(t, 16);\n  if (r.bitLength() > this.n.bitLength())\n    return 0;\n  var i = this.doPublic(r), s = i.toString(16).replace(/^1f+00/, \"\"), n = Vt(s);\n  if (n.length == 0)\n    return !1;\n  n[0];\n  var h = n[1];\n  return h == e;\n};\nq.prototype.verifyPSS = function(e, t, r, i) {\n  var s = function(h) {\n    return a.crypto.Util.hashHex(h, r);\n  }, n = s(Pe(e));\n  return i === void 0 && (i = -1), this.verifyWithMessageHashPSS(n, t, r, i);\n};\nq.prototype.verifyWithMessageHashPSS = function(e, t, r, i) {\n  if (t.length != Math.ceil(this.n.bitLength() / 4))\n    return !1;\n  var s = new R(t, 16), n = function(b) {\n    return a.crypto.Util.hashHex(b, r);\n  }, h = Ae(e), u = h.length, p = this.n.bitLength() - 1, c = Math.ceil(p / 8), y;\n  if (i === -1 || i === void 0)\n    i = u;\n  else if (i === -2)\n    i = c - u - 2;\n  else if (i < -2)\n    throw new Error(\"invalid salt length\");\n  if (c < u + i + 2)\n    throw new Error(\"data too long\");\n  var v = this.doPublic(s).toByteArray();\n  for (y = 0; y < v.length; y += 1)\n    v[y] &= 255;\n  for (; v.length < c; )\n    v.unshift(0);\n  if (v[c - 1] !== 188)\n    throw new Error(\"encoded message does not end in 0xbc\");\n  v = String.fromCharCode.apply(String, v);\n  var o = v.substr(0, c - u - 1), l = v.substr(o.length, u), f = 65280 >> 8 * c - p & 255;\n  if (o.charCodeAt(0) & f)\n    throw new Error(\"bits beyond keysize not zero\");\n  var d = jt(l, o.length, n), g = [];\n  for (y = 0; y < o.length; y += 1)\n    g[y] = o.charCodeAt(y) ^ d.charCodeAt(y);\n  g[0] &= ~f;\n  var S = c - u - i - 2;\n  for (y = 0; y < S; y += 1)\n    if (g[y] !== 0)\n      throw new Error(\"leftmost octets not zero\");\n  if (g[S] !== 1)\n    throw new Error(\"0x01 marker not found\");\n  return l === Ae(n(Pe(\"\\0\\0\\0\\0\\0\\0\\0\\0\" + h + String.fromCharCode.apply(String, g.slice(-i)))));\n};\nq.SALT_LEN_HLEN = -1;\nq.SALT_LEN_MAX = -2;\nq.SALT_LEN_RECOVER = -2;\nfunction L(e) {\n  var t = V, r = t.getChildIdx, i = t.getV;\n  t.dump;\n  var s = t.parse, n = t.getTLV, h = t.getVbyList, u = t.getVbyListEx, p = t.getTLVbyList, c = t.getTLVbyListEx, y = t.getIdxbyList, v = t.getIdxbyListEx, o = t.getVidx, l = t.getInt, f = t.oidname, d = t.hextooidstr, g = ie, S, b = Error;\n  try {\n    S = a.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;\n  } catch {\n  }\n  this.HEX2STAG = { \"0c\": \"utf8\", 13: \"prn\", 16: \"ia5\", \"1a\": \"vis\", \"1e\": \"bmp\" }, this.hex = null, this.version = 0, this.foffset = 0, this.aExtInfo = null, this.getVersion = function() {\n    if (this.hex === null || this.version !== 0)\n      return this.version;\n    var m = p(this.hex, 0, [0, 0]);\n    if (m.substr(0, 2) == \"a0\") {\n      var E = p(m, 0, [0]), w = l(E, 0);\n      if (w < 0 || 2 < w)\n        throw new Error(\"malformed version field\");\n      return this.version = w + 1, this.version;\n    } else\n      return this.version = 1, this.foffset = -1, 1;\n  }, this.getSerialNumberHex = function() {\n    return u(this.hex, 0, [0, 0], \"02\");\n  }, this.getSignatureAlgorithmField = function() {\n    var m = c(this.hex, 0, [0, 1]);\n    return this.getAlgorithmIdentifierName(m);\n  }, this.getAlgorithmIdentifierName = function(m) {\n    for (var E in S)\n      if (m === S[E])\n        return E;\n    return f(u(m, 0, [0], \"06\"));\n  }, this.getIssuer = function(m, E) {\n    return this.getX500Name(this.getIssuerHex(), m, E);\n  }, this.getIssuerHex = function() {\n    return p(this.hex, 0, [0, 3 + this.foffset], \"30\");\n  }, this.getIssuerString = function() {\n    var m = this.getIssuer();\n    return m.str;\n  }, this.getSubject = function(m, E) {\n    return this.getX500Name(this.getSubjectHex(), m, E);\n  }, this.getSubjectHex = function() {\n    return p(this.hex, 0, [0, 5 + this.foffset], \"30\");\n  }, this.getSubjectString = function() {\n    var m = this.getSubject();\n    return m.str;\n  }, this.getNotBefore = function() {\n    var m = h(this.hex, 0, [0, 4 + this.foffset, 0]);\n    return m = m.replace(/(..)/g, \"%$1\"), m = decodeURIComponent(m), m;\n  }, this.getNotAfter = function() {\n    var m = h(this.hex, 0, [0, 4 + this.foffset, 1]);\n    return m = m.replace(/(..)/g, \"%$1\"), m = decodeURIComponent(m), m;\n  }, this.getPublicKeyHex = function() {\n    return this.getSPKI();\n  }, this.getSPKI = function() {\n    return p(this.hex, 0, [0, 6 + this.foffset], \"30\");\n  }, this.getSPKIValue = function() {\n    var m = this.getSPKI();\n    return m == null ? null : h(m, 0, [1], \"03\", !0);\n  }, this.getPublicKeyIdx = function() {\n    return y(this.hex, 0, [0, 6 + this.foffset], \"30\");\n  }, this.getPublicKeyContentIdx = function() {\n    var m = this.getPublicKeyIdx();\n    return y(this.hex, m, [1, 0], \"30\");\n  }, this.getPublicKey = function() {\n    return k.getKey(this.getPublicKeyHex(), null, \"pkcs8pub\");\n  }, this.getSignatureAlgorithmName = function() {\n    var m = p(this.hex, 0, [1], \"30\");\n    return this.getAlgorithmIdentifierName(m);\n  }, this.getSignatureValueHex = function() {\n    return h(this.hex, 0, [2], \"03\", !0);\n  }, this.verifySignature = function(m) {\n    var E = this.getSignatureAlgorithmField(), w = this.getSignatureValueHex(), x = p(this.hex, 0, [0], \"30\"), F = new a.crypto.Signature({ alg: E });\n    return F.init(m), F.updateHex(x), F.verify(w);\n  }, this.parseExt = function(m) {\n    var E, w, x;\n    if (m === void 0) {\n      if (x = this.hex, this.version !== 3)\n        return -1;\n      E = y(x, 0, [0, 7, 0], \"30\"), w = r(x, E);\n    } else {\n      x = ie(m);\n      var F = y(x, 0, [0, 3, 0, 0], \"06\");\n      if (i(x, F) != \"2a864886f70d01090e\") {\n        this.aExtInfo = new Array();\n        return;\n      }\n      E = y(x, 0, [0, 3, 0, 1, 0], \"30\"), w = r(x, E), this.hex = x;\n    }\n    this.aExtInfo = new Array();\n    for (var P = 0; P < w.length; P++) {\n      var T = {};\n      T.critical = !1;\n      var H = r(x, w[P]), C = 0;\n      H.length === 3 && (T.critical = !0, C = 1), T.oid = t.hextooidstr(h(x, w[P], [0], \"06\"));\n      var B = y(x, w[P], [1 + C]);\n      T.vidx = o(x, B), this.aExtInfo.push(T);\n    }\n  }, this.getExtInfo = function(m) {\n    var E = this.aExtInfo, w = m;\n    if (m.match(/^[0-9.]+$/) || (w = a.asn1.x509.OID.name2oid(m)), w !== \"\") {\n      for (var x = 0; x < E.length; x++)\n        if (E[x].oid === w)\n          return E[x];\n    }\n  }, this.getCriticalExtV = function(m, E, w) {\n    if (E != null)\n      return [E, w];\n    var x = this.getExtInfo(m);\n    return x == null ? [null, null] : [n(this.hex, x.vidx), x.critical];\n  }, this.getExtBasicConstraints = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"basicConstraints\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"basicConstraints\" };\n    if (E && (x.critical = !0), m === \"3000\")\n      return x;\n    if (m === \"30030101ff\")\n      return x.cA = !0, x;\n    if (m.substr(0, 12) === \"30060101ff02\") {\n      var F = i(m, 10), P = parseInt(F, 16);\n      return x.cA = !0, x.pathLen = P, x;\n    }\n    throw new Error(\"hExtV parse error: \" + m);\n  }, this.getExtNameConstraints = function(m, E) {\n    var w = this.getCriticalExtV(\"nameConstraints\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"nameConstraints\" };\n      E && (x.critical = !0);\n      for (var F = r(m, 0), P = 0; P < F.length; P++) {\n        for (var T = [], H = r(m, F[P]), C = 0; C < H.length; C++) {\n          var B = n(m, H[C]), O = this.getGeneralSubtree(B);\n          T.push(O);\n        }\n        var j = m.substr(F[P], 2);\n        j == \"a0\" ? x.permit = T : j == \"a1\" && (x.exclude = T);\n      }\n      return x;\n    }\n  }, this.getGeneralSubtree = function(m) {\n    var E = r(m, 0), w = E.length;\n    if (w < 1 || 2 < w)\n      throw new Error(\"wrong num elements\");\n    for (var x = this.getGeneralName(n(m, E[0])), F = 1; F < w; F++) {\n      var P = m.substr(E[F], 2), T = i(m, E[F]), H = parseInt(T, 16);\n      P == \"80\" && (x.min = H), P == \"81\" && (x.max = H);\n    }\n    return x;\n  }, this.getExtKeyUsage = function(m, E) {\n    var w = this.getCriticalExtV(\"keyUsage\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"keyUsage\" };\n      return E && (x.critical = !0), x.names = this.getExtKeyUsageString(m).split(\",\"), x;\n    }\n  }, this.getExtKeyUsageBin = function(m) {\n    if (m === void 0) {\n      var E = this.getExtInfo(\"keyUsage\");\n      if (E === void 0)\n        return \"\";\n      m = n(this.hex, E.vidx);\n    }\n    if (m.length != 8 && m.length != 10)\n      throw new Error(\"malformed key usage value: \" + m);\n    var w = \"000000000000000\" + parseInt(m.substr(6), 16).toString(2);\n    return m.length == 8 && (w = w.slice(-8)), m.length == 10 && (w = w.slice(-16)), w = w.replace(/0+$/, \"\"), w == \"\" && (w = \"0\"), w;\n  }, this.getExtKeyUsageString = function(m) {\n    for (var E = this.getExtKeyUsageBin(m), w = new Array(), x = 0; x < E.length; x++)\n      E.substr(x, 1) == \"1\" && w.push(L.KEYUSAGE_NAME[x]);\n    return w.join(\",\");\n  }, this.getExtSubjectKeyIdentifier = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"subjectKeyIdentifier\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"subjectKeyIdentifier\" };\n    E && (x.critical = !0);\n    var F = i(m, 0);\n    return x.kid = { hex: F }, x;\n  }, this.getExtAuthorityKeyIdentifier = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"authorityKeyIdentifier\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"authorityKeyIdentifier\" };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++) {\n      var T = m.substr(F[P], 2);\n      if (T === \"80\" && (x.kid = { hex: i(m, F[P]) }), T === \"a1\") {\n        var H = n(m, F[P]), C = this.getGeneralNames(H);\n        x.issuer = C[0].dn;\n      }\n      T === \"82\" && (x.sn = { hex: i(m, F[P]) });\n    }\n    return x;\n  }, this.getExtExtKeyUsage = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"extKeyUsage\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"extKeyUsage\", array: [] };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++)\n      x.array.push(f(i(m, F[P])));\n    return x;\n  }, this.getExtExtKeyUsageName = function() {\n    var m = this.getExtInfo(\"extKeyUsage\");\n    if (m === void 0)\n      return m;\n    var E = new Array(), w = n(this.hex, m.vidx);\n    if (w === \"\")\n      return E;\n    for (var x = r(w, 0), F = 0; F < x.length; F++)\n      E.push(f(i(w, x[F])));\n    return E;\n  }, this.getExtSubjectAltName = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"subjectAltName\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"subjectAltName\", array: [] };\n    return E && (x.critical = !0), x.array = this.getGeneralNames(m), x;\n  }, this.getExtIssuerAltName = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"issuerAltName\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"issuerAltName\", array: [] };\n    return E && (x.critical = !0), x.array = this.getGeneralNames(m), x;\n  }, this.getGeneralNames = function(m) {\n    for (var E = r(m, 0), w = [], x = 0; x < E.length; x++) {\n      var F = this.getGeneralName(n(m, E[x]));\n      F !== void 0 && w.push(F);\n    }\n    return w;\n  }, this.getGeneralName = function(m) {\n    var E = m.substr(0, 2), w = i(m, 0), x = Ae(w);\n    if (E == \"81\")\n      return { rfc822: x };\n    if (E == \"82\")\n      return { dns: x };\n    if (E == \"86\")\n      return { uri: x };\n    if (E == \"87\")\n      return { ip: tt(w) };\n    if (E == \"a4\")\n      return { dn: this.getX500Name(w) };\n    if (E == \"a0\")\n      return { other: this.getOtherName(m) };\n  }, this.getExtSubjectAltName2 = function() {\n    var m, E, w, x = this.getExtInfo(\"subjectAltName\");\n    if (x === void 0)\n      return x;\n    for (var F = new Array(), P = n(this.hex, x.vidx), T = r(P, 0), H = 0; H < T.length; H++)\n      w = P.substr(T[H], 2), m = i(P, T[H]), w === \"81\" && (E = W(m), F.push([\"MAIL\", E])), w === \"82\" && (E = W(m), F.push([\"DNS\", E])), w === \"84\" && (E = L.hex2dn(m, 0), F.push([\"DN\", E])), w === \"86\" && (E = W(m), F.push([\"URI\", E])), w === \"87\" && (E = tt(m), F.push([\"IP\", E]));\n    return F;\n  }, this.getExtCRLDistributionPoints = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"cRLDistributionPoints\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"cRLDistributionPoints\", array: [] };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++) {\n      var T = n(m, F[P]);\n      x.array.push(this.getDistributionPoint(T));\n    }\n    return x;\n  }, this.getDistributionPoint = function(m) {\n    for (var E = {}, w = r(m, 0), x = 0; x < w.length; x++) {\n      var F = m.substr(w[x], 2), P = n(m, w[x]);\n      F == \"a0\" && (E.dpname = this.getDistributionPointName(P));\n    }\n    return E;\n  }, this.getDistributionPointName = function(m) {\n    for (var E = {}, w = r(m, 0), x = 0; x < w.length; x++) {\n      var F = m.substr(w[x], 2), P = n(m, w[x]);\n      F == \"a0\" && (E.full = this.getGeneralNames(P));\n    }\n    return E;\n  }, this.getExtCRLDistributionPointsURI = function() {\n    var m = this.getExtCRLDistributionPoints();\n    if (m == null)\n      return m;\n    for (var E = m.array, w = [], x = 0; x < E.length; x++)\n      try {\n        E[x].dpname.full[0].uri != null && w.push(E[x].dpname.full[0].uri);\n      } catch {\n      }\n    return w;\n  }, this.getExtAIAInfo = function() {\n    var m = this.getExtInfo(\"authorityInfoAccess\");\n    if (m === void 0)\n      return m;\n    for (var E = { ocsp: [], caissuer: [] }, w = r(this.hex, m.vidx), x = 0; x < w.length; x++) {\n      var F = h(this.hex, w[x], [0], \"06\"), P = h(this.hex, w[x], [1], \"86\");\n      F === \"2b06010505073001\" && E.ocsp.push(W(P)), F === \"2b06010505073002\" && E.caissuer.push(W(P));\n    }\n    return E;\n  }, this.getExtAuthorityInfoAccess = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"authorityInfoAccess\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"authorityInfoAccess\", array: [] };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++) {\n      var T = u(m, F[P], [0], \"06\"), H = h(m, F[P], [1], \"86\"), C = W(H);\n      if (T == \"2b06010505073001\")\n        x.array.push({ ocsp: C });\n      else if (T == \"2b06010505073002\")\n        x.array.push({ caissuer: C });\n      else\n        throw new Error(\"unknown method: \" + T);\n    }\n    return x;\n  }, this.getExtCertificatePolicies = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"certificatePolicies\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"certificatePolicies\", array: [] };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++) {\n      var T = n(m, F[P]), H = this.getPolicyInformation(T);\n      x.array.push(H);\n    }\n    return x;\n  }, this.getPolicyInformation = function(m) {\n    var E = {}, w = h(m, 0, [0], \"06\");\n    E.policyoid = f(w);\n    var x = v(m, 0, [1], \"30\");\n    if (x != -1) {\n      E.array = [];\n      for (var F = r(m, x), P = 0; P < F.length; P++) {\n        var T = n(m, F[P]), H = this.getPolicyQualifierInfo(T);\n        E.array.push(H);\n      }\n    }\n    return E;\n  }, this.getOtherName = function(m) {\n    var E = {}, w = r(m, 0), x = h(m, w[0], [], \"06\"), F = h(m, w[1], []);\n    return E.oid = f(x), E.value = s(F), E;\n  }, this.getPolicyQualifierInfo = function(m) {\n    var E = {}, w = h(m, 0, [0], \"06\");\n    if (w === \"2b06010505070201\") {\n      var x = u(m, 0, [1], \"16\");\n      E.cps = Ae(x);\n    } else if (w === \"2b06010505070202\") {\n      var F = p(m, 0, [1], \"30\");\n      E.unotice = this.getUserNotice(F);\n    }\n    return E;\n  }, this.getUserNotice = function(m) {\n    var E = null;\n    try {\n      E = t.parse(m);\n      var w = this._asn1ToUnotice(E);\n      return w;\n    } catch {\n      return;\n    }\n  }, this._asn1ToUnotice = function(m) {\n    try {\n      for (var E = {}, w = J(m, \"seq\"), x = 0; x < w.length; x++) {\n        var F = this._asn1ToNoticeRef(w[x]);\n        F != null && (E.noticeref = F);\n        var P = this.asn1ToDisplayText(w[x]);\n        P != null && (E.exptext = P);\n      }\n      return Object.keys(E).length > 0 ? E : void 0;\n    } catch {\n      return;\n    }\n  }, this._asn1ToNoticeRef = function(m) {\n    try {\n      for (var E = {}, w = J(m, \"seq\"), x = 0; x < w.length; x++) {\n        var F = this._asn1ToNoticeNum(w[x]);\n        F != null && (E.noticenum = F);\n        var P = this.asn1ToDisplayText(w[x]);\n        P != null && (E.org = P);\n      }\n      return Object.keys(E).length > 0 ? E : void 0;\n    } catch {\n      return;\n    }\n  }, this._asn1ToNoticeNum = function(m) {\n    try {\n      for (var E = J(m, \"seq\"), w = [], x = 0; x < E.length; x++) {\n        var F = E[x];\n        w.push(parseInt(J(F, \"int.hex\"), 16));\n      }\n      return w;\n    } catch {\n      return;\n    }\n  }, this.getDisplayText = function(m) {\n    var E = { \"0c\": \"utf8\", 16: \"ia5\", \"1a\": \"vis\", \"1e\": \"bmp\" }, w = {};\n    return w.type = E[m.substr(0, 2)], w.str = Ae(i(m, 0)), w;\n  }, this.asn1ToDisplayText = function(m) {\n    if (m.utf8str != null)\n      return { type: \"utf8\", str: m.utf8str.str };\n    if (m.ia5str != null)\n      return { type: \"ia5\", str: m.ia5str.str };\n    if (m.visstr != null)\n      return { type: \"vis\", str: m.visstr.str };\n    if (m.bmpstr != null)\n      return { type: \"bmp\", str: m.bmpstr.str };\n    if (m.prnstr != null)\n      return { type: \"prn\", str: m.prnstr.str };\n  }, this.getExtPolicyMappings = function(m, E) {\n    var w = this.getCriticalExtV(\"policyMappings\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"policyMappings\" };\n      E && (x.critical = !0);\n      try {\n        for (var F = s(m), P = F.seq, T = [], H = 0; H < P.length; H++) {\n          var C = P[H].seq;\n          T.push([C[0].oid, C[1].oid]);\n        }\n        x.array = T;\n      } catch {\n        throw new b(\"malformed policyMappings\");\n      }\n      return x;\n    }\n  }, this.getExtPolicyConstraints = function(m, E) {\n    var w = this.getCriticalExtV(\"policyConstraints\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"policyConstraints\" };\n      E && (x.critical = !0);\n      var F = s(m);\n      try {\n        for (var P = F.seq, T = 0; T < P.length; T++) {\n          var H = P[T].tag;\n          H.explicit == !1 && (H.tag == \"80\" && (x.reqexp = parseInt(H.hex, 16)), H.tag == \"81\" && (x.inhibit = parseInt(H.hex, 16)));\n        }\n      } catch {\n        return new b(\"malformed policyConstraints value\");\n      }\n      return x;\n    }\n  }, this.getExtInhibitAnyPolicy = function(m, E) {\n    var w = this.getCriticalExtV(\"inhibitAnyPolicy\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"inhibitAnyPolicy\" };\n      E && (x.critical = !0);\n      var F = l(m, 0);\n      return F == -1 ? new b(\"wrong value\") : (x.skip = F, x);\n    }\n  }, this.getExtCRLNumber = function(m, E) {\n    var w = { extname: \"cRLNumber\" };\n    if (E && (w.critical = !0), m.substr(0, 2) == \"02\")\n      return w.num = { hex: i(m, 0) }, w;\n    throw new b(\"hExtV parse error: \" + m);\n  }, this.getExtCRLReason = function(m, E) {\n    var w = { extname: \"cRLReason\" };\n    if (E && (w.critical = !0), m.substr(0, 2) == \"0a\")\n      return w.code = parseInt(i(m, 0), 16), w;\n    throw new Error(\"hExtV parse error: \" + m);\n  }, this.getExtOcspNonce = function(m, E) {\n    var w = { extname: \"ocspNonce\" };\n    E && (w.critical = !0);\n    var x = i(m, 0);\n    return w.hex = x, w;\n  }, this.getExtOcspNoCheck = function(m, E) {\n    var w = { extname: \"ocspNoCheck\" };\n    return E && (w.critical = !0), w;\n  }, this.getExtAdobeTimeStamp = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"adobeTimeStamp\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"adobeTimeStamp\" };\n    E && (x.critical = !0);\n    var F = r(m, 0);\n    if (F.length > 1) {\n      var P = n(m, F[1]), T = this.getGeneralName(P);\n      T.uri != null && (x.uri = T.uri);\n    }\n    if (F.length > 2) {\n      var H = n(m, F[2]);\n      H == \"0101ff\" && (x.reqauth = !0), H == \"010100\" && (x.reqauth = !1);\n    }\n    return x;\n  }, this.getExtSubjectDirectoryAttributes = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"subjectDirectoryAttributes\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"subjectDirectoryAttributes\" };\n    E && (x.critical = !0);\n    try {\n      for (var F = s(m), P = [], T = 0; T < F.seq.length; T++) {\n        var H = F.seq[T], C = J(H, \"seq.0.oid\"), B = J(H, \"seq.1.set\");\n        if (C == null || B == null)\n          throw \"error\";\n        P.push({ attr: C, array: B });\n      }\n      return x.array = P, x;\n    } catch {\n      throw new Error(\"malformed subjectDirectoryAttributes extension value\");\n    }\n  };\n  var D = function(m) {\n    var E = {};\n    try {\n      var w = m.seq[0].oid, x = a.asn1.x509.OID.name2oid(w);\n      E.type = a.asn1.x509.OID.oid2atype(x);\n      var F = m.seq[1];\n      if (F.utf8str != null)\n        E.ds = \"utf8\", E.value = F.utf8str.str;\n      else if (F.numstr != null)\n        E.ds = \"num\", E.value = F.numstr.str;\n      else if (F.telstr != null)\n        E.ds = \"tel\", E.value = F.telstr.str;\n      else if (F.prnstr != null)\n        E.ds = \"prn\", E.value = F.prnstr.str;\n      else if (F.ia5str != null)\n        E.ds = \"ia5\", E.value = F.ia5str.str;\n      else if (F.visstr != null)\n        E.ds = \"vis\", E.value = F.visstr.str;\n      else if (F.bmpstr != null)\n        E.ds = \"bmp\", E.value = F.bmpstr.str;\n      else\n        throw \"error\";\n      return E;\n    } catch {\n      throw new Erorr(\"improper ASN.1 parsed AttrTypeAndValue\");\n    }\n  }, A = function(m) {\n    try {\n      return m.set.map(function(E) {\n        return D(E);\n      });\n    } catch (E) {\n      throw new Error(\"improper ASN.1 parsed RDN: \" + E);\n    }\n  }, I = function(m) {\n    try {\n      return m.seq.map(function(E) {\n        return A(E);\n      });\n    } catch (E) {\n      throw new Error(\"improper ASN.1 parsed X500Name: \" + E);\n    }\n  };\n  this.getX500NameRule = function(m) {\n    for (var E = null, w = [], x = 0; x < m.length; x++)\n      for (var F = m[x], P = 0; P < F.length; P++)\n        w.push(F[P]);\n    for (var x = 0; x < w.length; x++) {\n      var T = w[x], H = T.ds, C = T.value, B = T.type;\n      if (H != \"prn\" && H != \"utf8\" && H != \"ia5\")\n        return \"mixed\";\n      if (H == \"ia5\") {\n        if (B != \"CN\")\n          return \"mixed\";\n        if (a.lang.String.isMail(C))\n          continue;\n        return \"mixed\";\n      }\n      if (B == \"C\") {\n        if (H == \"prn\")\n          continue;\n        return \"mixed\";\n      }\n      if (E == null)\n        E = H;\n      else if (E !== H)\n        return \"mixed\";\n    }\n    return E ?? \"prn\";\n  }, this.getAttrTypeAndValue = function(m) {\n    var E = s(m);\n    return D(E);\n  }, this.getRDN = function(m) {\n    var E = s(m);\n    return A(E);\n  }, this.getX500NameArray = function(m) {\n    var E = s(m);\n    return I(E);\n  }, this.getX500Name = function(m, E, w) {\n    var x = this.getX500NameArray(m), F = this.dnarraytostr(x), P = { str: F };\n    return P.array = x, w == !0 && (P.hex = m), E == !0 && (P.canon = this.c14nRDNArray(x)), P;\n  }, this.readCertPEM = function(m) {\n    this.readCertHex(g(m));\n  }, this.readCertHex = function(m) {\n    this.hex = m, this.getVersion();\n    try {\n      y(this.hex, 0, [0, 7], \"a3\"), this.parseExt();\n    } catch {\n    }\n  }, this.getParam = function(m) {\n    var E = {};\n    return m == null && (m = {}), E.version = this.getVersion(), E.serial = { hex: this.getSerialNumberHex() }, E.sigalg = this.getSignatureAlgorithmField(), E.issuer = this.getIssuer(m.dncanon, m.dnhex), E.notbefore = this.getNotBefore(), E.notafter = this.getNotAfter(), E.subject = this.getSubject(m.dncanon, m.dnhex), E.sbjpubkey = de(this.getPublicKeyHex(), \"PUBLIC KEY\"), this.aExtInfo != null && this.aExtInfo.length > 0 && (E.ext = this.getExtParamArray()), E.sighex = this.getSignatureValueHex(), m.tbshex == !0 && (E.tbshex = p(this.hex, 0, [0])), m.nodnarray == !0 && (delete E.issuer.array, delete E.subject.array), E;\n  }, this.getExtParamArray = function(m) {\n    if (m == null) {\n      var E = v(this.hex, 0, [0, \"[3]\"]);\n      E != -1 && (m = c(this.hex, 0, [0, \"[3]\", 0], \"30\"));\n    }\n    for (var w = [], x = r(m, 0), F = 0; F < x.length; F++) {\n      var P = n(m, x[F]), T = this.getExtParam(P);\n      T != null && w.push(T);\n    }\n    return w;\n  }, this.getExtParam = function(m) {\n    var E = r(m, 0), w = E.length;\n    if (w != 2 && w != 3)\n      throw new Error(\"wrong number elements in Extension: \" + w + \" \" + m);\n    var x = d(h(m, 0, [0], \"06\")), F = !1;\n    w == 3 && p(m, 0, [1]) == \"0101ff\" && (F = !0);\n    var P = p(m, 0, [w - 1, 0]), T = void 0;\n    if (x == \"2.5.29.14\" ? T = this.getExtSubjectKeyIdentifier(P, F) : x == \"2.5.29.15\" ? T = this.getExtKeyUsage(P, F) : x == \"2.5.29.17\" ? T = this.getExtSubjectAltName(P, F) : x == \"2.5.29.18\" ? T = this.getExtIssuerAltName(P, F) : x == \"2.5.29.19\" ? T = this.getExtBasicConstraints(P, F) : x == \"2.5.29.30\" ? T = this.getExtNameConstraints(P, F) : x == \"2.5.29.31\" ? T = this.getExtCRLDistributionPoints(P, F) : x == \"2.5.29.32\" ? T = this.getExtCertificatePolicies(P, F) : x == \"2.5.29.33\" ? T = this.getExtPolicyMappings(P, F) : x == \"2.5.29.35\" ? T = this.getExtAuthorityKeyIdentifier(P, F) : x == \"2.5.29.36\" ? T = this.getExtPolicyConstraints(P, F) : x == \"2.5.29.37\" ? T = this.getExtExtKeyUsage(P, F) : x == \"2.5.29.54\" ? T = this.getExtInhibitAnyPolicy(P, F) : x == \"1.3.6.1.5.5.7.1.1\" ? T = this.getExtAuthorityInfoAccess(P, F) : x == \"2.5.29.20\" ? T = this.getExtCRLNumber(P, F) : x == \"2.5.29.21\" ? T = this.getExtCRLReason(P, F) : x == \"2.5.29.9\" ? T = this.getExtSubjectDirectoryAttributes(P, F) : x == \"1.3.6.1.5.5.7.48.1.2\" ? T = this.getExtOcspNonce(P, F) : x == \"1.3.6.1.5.5.7.48.1.5\" ? T = this.getExtOcspNoCheck(P, F) : x == \"1.2.840.113583.1.1.9.1\" ? T = this.getExtAdobeTimeStamp(P, F) : L.EXT_PARSER[x] != null && (T = L.EXT_PARSER[x](x, F, P)), T != null)\n      return T;\n    var H = { extname: x, extn: P };\n    try {\n      H.extn = s(P);\n    } catch {\n    }\n    return F && (H.critical = !0), H;\n  }, this.findExt = function(m, E) {\n    for (var w = 0; w < m.length; w++)\n      if (m[w].extname == E)\n        return m[w];\n    return null;\n  }, this.updateExtCDPFullURI = function(m, E) {\n    var w = this.findExt(m, \"cRLDistributionPoints\");\n    if (w != null && w.array != null) {\n      for (var x = w.array, F = 0; F < x.length; F++)\n        if (x[F].dpname != null && x[F].dpname.full != null)\n          for (var P = x[F].dpname.full, T = 0; T < P.length; T++) {\n            var H = P[F];\n            H.uri != null && (H.uri = E);\n          }\n    }\n  }, this.updateExtAIAOCSP = function(m, E) {\n    var w = this.findExt(m, \"authorityInfoAccess\");\n    if (w != null && w.array != null)\n      for (var x = w.array, F = 0; F < x.length; F++)\n        x[F].ocsp != null && (x[F].ocsp = E);\n  }, this.updateExtAIACAIssuer = function(m, E) {\n    var w = this.findExt(m, \"authorityInfoAccess\");\n    if (w != null && w.array != null)\n      for (var x = w.array, F = 0; F < x.length; F++)\n        x[F].caissuer != null && (x[F].caissuer = E);\n  }, this.dnarraytostr = function(m) {\n    function E(x) {\n      return x.map(function(F) {\n        return w(F).replace(/\\+/, \"\\\\+\");\n      }).join(\"+\");\n    }\n    function w(x) {\n      return x.type + \"=\" + x.value;\n    }\n    return \"/\" + m.map(function(x) {\n      return E(x).replace(/\\//, \"\\\\/\");\n    }).join(\"/\");\n  }, this.setCanonicalizedDN = function(m) {\n    var E;\n    if (m.str != null && m.array == null) {\n      var w = new a.asn1.x509.X500Name({ str: m.str }), x = w.tohex();\n      E = this.getX500NameArray(x);\n    } else\n      E = m.array;\n    m.canon == null && (m.canon = this.c14nRDNArray(E));\n  }, this.c14nRDNArray = function(m) {\n    for (var E = [], w = 0; w < m.length; w++) {\n      for (var x = m[w], F = [], P = 0; P < x.length; P++) {\n        var T = x[P], H = T.value;\n        H = H.replace(/^\\s*/, \"\"), H = H.replace(/\\s*$/, \"\"), H = H.replace(/\\s+/g, \" \"), H = H.toLowerCase(), F.push(T.type.toLowerCase() + \"=\" + H);\n      }\n      E.push(F.join(\"+\"));\n    }\n    return \"/\" + E.join(\"/\");\n  }, this.getInfo = function() {\n    var m = function(ce) {\n      for (var M = \"\", G = \"    \", Q = `\n`, ee = ce.array, pe = 0; pe < ee.length; pe++) {\n        var te = ee[pe];\n        if (te.dn != null && (M += G + \"dn: \" + te.dn.str + Q), te.ip != null && (M += G + \"ip: \" + te.ip + Q), te.rfc822 != null && (M += G + \"rfc822: \" + te.rfc822 + Q), te.dns != null && (M += G + \"dns: \" + te.dns + Q), te.uri != null && (M += G + \"uri: \" + te.uri + Q), te.other != null) {\n          var Me = te.other.oid, Ne = JSON.stringify(te.other.value).replace(/\\\"/g, \"\");\n          M += G + \"other: \" + Me + \"=\" + Ne + Q;\n        }\n      }\n      return M = M.replace(/\\n$/, \"\"), M;\n    }, E = function(ce) {\n      for (var M = \"\", G = ce.array, Q = 0; Q < G.length; Q++) {\n        var ee = G[Q];\n        if (M += \"    policy oid: \" + ee.policyoid + `\n`, ee.array !== void 0)\n          for (var pe = 0; pe < ee.array.length; pe++) {\n            var te = ee.array[pe];\n            te.cps !== void 0 && (M += \"    cps: \" + te.cps + `\n`);\n          }\n      }\n      return M;\n    }, w = function(ce) {\n      for (var M = \"\", G = ce.array, Q = 0; Q < G.length; Q++) {\n        var ee = G[Q];\n        try {\n          ee.dpname.full[0].uri !== void 0 && (M += \"    \" + ee.dpname.full[0].uri + `\n`);\n        } catch {\n        }\n        try {\n          ee.dname.full[0].dn.hex !== void 0 && (M += \"    \" + L.hex2dn(ee.dpname.full[0].dn.hex) + `\n`);\n        } catch {\n        }\n      }\n      return M;\n    }, x = function(ce) {\n      for (var M = \"\", G = ce.array, Q = 0; Q < G.length; Q++) {\n        var ee = G[Q];\n        ee.caissuer !== void 0 && (M += \"    caissuer: \" + ee.caissuer + `\n`), ee.ocsp !== void 0 && (M += \"    ocsp: \" + ee.ocsp + `\n`);\n      }\n      return M;\n    }, F, P, T;\n    if (F = `Basic Fields\n`, F += \"  serial number: \" + this.getSerialNumberHex() + `\n`, F += \"  signature algorithm: \" + this.getSignatureAlgorithmField() + `\n`, F += \"  issuer: \" + this.getIssuerString() + `\n`, F += \"  notBefore: \" + this.getNotBefore() + `\n`, F += \"  notAfter: \" + this.getNotAfter() + `\n`, F += \"  subject: \" + this.getSubjectString() + `\n`, F += `  subject public key info: \n`, P = this.getPublicKey(), F += \"    key algorithm: \" + P.type + `\n`, P.type === \"RSA\" && (F += \"    n=\" + xt(P.n.toString(16)).substr(0, 16) + `...\n`, F += \"    e=\" + xt(P.e.toString(16)) + `\n`), T = this.aExtInfo, T != null) {\n      F += `X509v3 Extensions:\n`;\n      for (var H = 0; H < T.length; H++) {\n        var C = T[H], B = a.asn1.x509.OID.oid2name(C.oid);\n        B === \"\" && (B = C.oid);\n        var O = \"\";\n        if (C.critical === !0 && (O = \"CRITICAL\"), F += \"  \" + B + \" \" + O + `:\n`, B === \"basicConstraints\") {\n          var j = this.getExtBasicConstraints();\n          j.cA === void 0 ? F += `    {}\n` : (F += \"    cA=true\", j.pathLen !== void 0 && (F += \", pathLen=\" + j.pathLen), F += `\n`);\n        } else if (B == \"policyMappings\") {\n          var fe = this.getExtPolicyMappings().array, Z = fe.map(function(ce) {\n            var M = ce;\n            return M[0] + \":\" + M[1];\n          }).join(\", \");\n          F += \"    \" + Z + `\n`;\n        } else if (B == \"policyConstraints\") {\n          var X = this.getExtPolicyConstraints();\n          F += \"    \", X.reqexp != null && (F += \" reqexp=\" + X.reqexp), X.inhibit != null && (F += \" inhibit=\" + X.inhibit), F += `\n`;\n        } else if (B == \"inhibitAnyPolicy\") {\n          var X = this.getExtInhibitAnyPolicy();\n          F += \"    skip=\" + X.skip + `\n`;\n        } else if (B == \"keyUsage\")\n          F += \"    \" + this.getExtKeyUsageString() + `\n`;\n        else if (B == \"subjectKeyIdentifier\")\n          F += \"    \" + this.getExtSubjectKeyIdentifier().kid.hex + `\n`;\n        else if (B == \"authorityKeyIdentifier\") {\n          var re = this.getExtAuthorityKeyIdentifier();\n          re.kid !== void 0 && (F += \"    kid=\" + re.kid.hex + `\n`);\n        } else if (B == \"extKeyUsage\") {\n          var ne = this.getExtExtKeyUsage().array;\n          F += \"    \" + ne.join(\", \") + `\n`;\n        } else if (B == \"subjectAltName\") {\n          var he = m(this.getExtSubjectAltName());\n          F += he + `\n`;\n        } else if (B == \"cRLDistributionPoints\") {\n          var se = this.getExtCRLDistributionPoints();\n          F += w(se);\n        } else if (B == \"authorityInfoAccess\") {\n          var ke = this.getExtAuthorityInfoAccess();\n          F += x(ke);\n        } else\n          B == \"certificatePolicies\" && (F += E(this.getExtCertificatePolicies()));\n      }\n    }\n    return F += \"signature algorithm: \" + this.getSignatureAlgorithmName() + `\n`, F += \"signature: \" + this.getSignatureValueHex().substr(0, 16) + `...\n`, F;\n  }, typeof e == \"string\" && (e.indexOf(\"-----BEGIN\") != -1 ? this.readCertPEM(e) : a.lang.String.isHex(e) && this.readCertHex(e));\n}\nL.EXT_PARSER = {};\nL.registExtParser = function(e, t) {\n  L.EXT_PARSER[e] = t;\n};\nL.hex2dn = function(e, t) {\n  t === void 0 && (t = 0);\n  var r = new L();\n  V.getTLV(e, t);\n  var i = r.getX500Name(e);\n  return i.str;\n};\nL.hex2rdn = function(e, t) {\n  if (t === void 0 && (t = 0), e.substr(t, 2) !== \"31\")\n    throw new Error(\"malformed RDN\");\n  for (var r = new Array(), i = V.getChildIdx(e, t), s = 0; s < i.length; s++)\n    r.push(L.hex2attrTypeValue(e, i[s]));\n  return r = r.map(function(n) {\n    return n.replace(\"+\", \"\\\\+\");\n  }), r.join(\"+\");\n};\nL.hex2attrTypeValue = function(e, t) {\n  var r = V, i = r.getV;\n  if (t === void 0 && (t = 0), e.substr(t, 2) !== \"30\")\n    throw new Error(\"malformed attribute type and value\");\n  var s = r.getChildIdx(e, t);\n  s.length !== 2 || e.substr(s[0], 2);\n  var n = i(e, s[0]), h = a.asn1.ASN1Util.oidHexToInt(n), u = a.asn1.x509.OID.oid2atype(h), p = i(e, s[1]), c = Ae(p);\n  return u + \"=\" + c;\n};\nL.getPublicKeyFromCertHex = function(e) {\n  var t = new L();\n  return t.readCertHex(e), t.getPublicKey();\n};\nL.getPublicKeyFromCertPEM = function(e) {\n  var t = new L();\n  return t.readCertPEM(e), t.getPublicKey();\n};\nL.getPublicKeyInfoPropOfCertPEM = function(e) {\n  var t = V, r = t.getVbyList, i = {}, s, n;\n  return i.algparam = null, s = new L(), s.readCertPEM(e), n = s.getPublicKeyHex(), i.keyhex = r(n, 0, [1], \"03\").substr(2), i.algoid = r(n, 0, [0, 0], \"06\"), i.algoid === \"2a8648ce3d0201\" && (i.algparam = r(n, 0, [0, 1], \"06\")), i;\n};\nL.KEYUSAGE_NAME = [\"digitalSignature\", \"nonRepudiation\", \"keyEncipherment\", \"dataEncipherment\", \"keyAgreement\", \"keyCertSign\", \"cRLSign\", \"encipherOnly\", \"decipherOnly\"];\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.jws > \"u\" || !a.jws) && (a.jws = {});\na.jws.JWS = function() {\n  var e = a, t = e.jws.JWS, r = t.isSafeJSONString;\n  this.parseJWS = function(i, s) {\n    if (!(this.parsedJWS !== void 0 && (s || this.parsedJWS.sigvalH !== void 0))) {\n      var n = i.match(/^([^.]+)\\.([^.]+)\\.([^.]+)$/);\n      if (n == null)\n        throw \"JWS signature is not a form of 'Head.Payload.SigValue'.\";\n      var h = n[1], u = n[2], p = n[3], c = h + \".\" + u;\n      if (this.parsedJWS = {}, this.parsedJWS.headB64U = h, this.parsedJWS.payloadB64U = u, this.parsedJWS.sigvalB64U = p, this.parsedJWS.si = c, !s) {\n        var y = Y(p), v = ve(y, 16);\n        this.parsedJWS.sigvalH = y, this.parsedJWS.sigvalBI = v;\n      }\n      var o = we(h), l = we(u);\n      if (this.parsedJWS.headS = o, this.parsedJWS.payloadS = l, !r(o, this.parsedJWS, \"headP\"))\n        throw \"malformed JSON string for JWS Head: \" + o;\n    }\n  };\n};\na.jws.JWS.sign = function(e, t, r, i, s) {\n  var n = a, h = n.jws, u = h.JWS, p = u.readSafeJSONString, c = u.isSafeJSONString, y = n.crypto;\n  y.ECDSA;\n  var v = y.Mac, o = y.Signature, l = JSON, f, d, g;\n  if (typeof t != \"string\" && typeof t != \"object\")\n    throw \"spHeader must be JSON string or object: \" + t;\n  if (typeof t == \"object\" && (d = t, f = l.stringify(d)), typeof t == \"string\") {\n    if (f = t, !c(f))\n      throw \"JWS Head is not safe JSON string: \" + f;\n    d = p(f);\n  }\n  if (g = r, typeof r == \"object\" && (g = l.stringify(r)), (e == \"\" || e == null) && d.alg !== void 0 && (e = d.alg), e != \"\" && e != null && d.alg === void 0 && (d.alg = e, f = l.stringify(d)), e !== d.alg)\n    throw \"alg and sHeader.alg doesn't match: \" + e + \"!=\" + d.alg;\n  var S = null;\n  if (u.jwsalg2sigalg[e] === void 0)\n    throw \"unsupported alg name: \" + e;\n  S = u.jwsalg2sigalg[e];\n  var b = Je(f), D = Je(g), A = b + \".\" + D, I = \"\";\n  if (S.substr(0, 4) == \"Hmac\") {\n    if (i === void 0)\n      throw \"mac key shall be specified for HS* alg\";\n    var m = new v({ alg: S, prov: \"cryptojs\", pass: i });\n    m.updateString(A), I = m.doFinal();\n  } else if (S.indexOf(\"withECDSA\") != -1) {\n    var E = new o({ alg: S });\n    E.init(i, s), E.updateString(A);\n    var w = E.sign();\n    I = a.crypto.ECDSA.asn1SigToConcatSig(w);\n  } else if (S != \"none\") {\n    var E = new o({ alg: S });\n    E.init(i, s), E.updateString(A), I = E.sign();\n  }\n  var x = ae(I);\n  return A + \".\" + x;\n};\na.jws.JWS.verify = function(e, t, r) {\n  var i = a, s = i.jws, n = s.JWS, h = n.readSafeJSONString, u = i.crypto, p = u.ECDSA, c = u.Mac, y = u.Signature, v;\n  if (typeof q !== void 0 && (v = q), !Ht(e))\n    return !1;\n  var o = e.split(\".\");\n  if (o.length !== 3)\n    return !1;\n  var l = o[0], f = o[1], d = l + \".\" + f, g = Y(o[2]), S = h(we(o[0])), b = null, D = null;\n  if (S.alg === void 0)\n    throw \"algorithm not specified in header\";\n  if (b = S.alg, D = b.substr(0, 2), r != null && Object.prototype.toString.call(r) === \"[object Array]\" && r.length > 0) {\n    var A = \":\" + r.join(\":\") + \":\";\n    if (A.indexOf(\":\" + b + \":\") == -1)\n      throw \"algorithm '\" + b + \"' not accepted in the list\";\n  }\n  if (b != \"none\" && t === null)\n    throw \"key shall be specified to verify.\";\n  if (typeof t == \"string\" && t.indexOf(\"-----BEGIN \") != -1 && (t = k.getKey(t)), (D == \"RS\" || D == \"PS\") && !(t instanceof v))\n    throw \"key shall be a RSAKey obj for RS* and PS* algs\";\n  if (D == \"ES\" && !(t instanceof p))\n    throw \"key shall be a ECDSA obj for ES* algs\";\n  var I = null;\n  if (n.jwsalg2sigalg[S.alg] === void 0)\n    throw \"unsupported alg name: \" + b;\n  if (I = n.jwsalg2sigalg[b], I == \"none\")\n    throw \"not supported\";\n  if (I.substr(0, 4) == \"Hmac\") {\n    var m = null;\n    if (t === void 0)\n      throw \"hexadecimal key shall be specified for HMAC\";\n    var E = new c({ alg: I, pass: t });\n    return E.updateString(d), m = E.doFinal(), g == m;\n  } else if (I.indexOf(\"withECDSA\") != -1) {\n    var w = null;\n    try {\n      w = p.concatSigToASN1Sig(g);\n    } catch {\n      return !1;\n    }\n    var x = new y({ alg: I });\n    return x.init(t), x.updateString(d), x.verify(w);\n  } else {\n    var x = new y({ alg: I });\n    return x.init(t), x.updateString(d), x.verify(g);\n  }\n};\na.jws.JWS.parse = function(e) {\n  var t = e.split(\".\"), r = {}, i, s, n;\n  if (t.length != 2 && t.length != 3)\n    throw \"malformed sJWS: wrong number of '.' splitted elements\";\n  return i = t[0], s = t[1], t.length == 3 && (n = t[2]), r.headerObj = a.jws.JWS.readSafeJSONString(we(i)), r.payloadObj = a.jws.JWS.readSafeJSONString(we(s)), r.headerPP = JSON.stringify(r.headerObj, null, \"  \"), r.payloadObj == null ? r.payloadPP = we(s) : r.payloadPP = JSON.stringify(r.payloadObj, null, \"  \"), n !== void 0 && (r.sigHex = Y(n)), r;\n};\na.jws.JWS.verifyJWT = function(e, t, r) {\n  var i = a, s = i.jws, n = s.JWS, h = n.readSafeJSONString, u = n.inArray, p = n.includedArray;\n  if (!Ht(e))\n    return !1;\n  var c = e.split(\".\");\n  if (c.length != 3)\n    return !1;\n  var y = c[0], v = c[1];\n  Y(c[2]);\n  var o = h(we(y)), l = h(we(v));\n  if (o.alg === void 0)\n    return !1;\n  if (r.alg === void 0)\n    throw \"acceptField.alg shall be specified\";\n  if (!u(o.alg, r.alg) || l.iss !== void 0 && typeof r.iss == \"object\" && !u(l.iss, r.iss) || l.sub !== void 0 && typeof r.sub == \"object\" && !u(l.sub, r.sub))\n    return !1;\n  if (l.aud !== void 0 && typeof r.aud == \"object\") {\n    if (typeof l.aud == \"string\") {\n      if (!u(l.aud, r.aud))\n        return !1;\n    } else if (typeof l.aud == \"object\" && !p(l.aud, r.aud))\n      return !1;\n  }\n  var f = s.IntDate.getNow();\n  return r.verifyAt !== void 0 && typeof r.verifyAt == \"number\" && (f = r.verifyAt), (r.gracePeriod === void 0 || typeof r.gracePeriod != \"number\") && (r.gracePeriod = 0), !(l.exp !== void 0 && typeof l.exp == \"number\" && l.exp + r.gracePeriod < f || l.nbf !== void 0 && typeof l.nbf == \"number\" && f < l.nbf - r.gracePeriod || l.iat !== void 0 && typeof l.iat == \"number\" && f < l.iat - r.gracePeriod || l.jti !== void 0 && r.jti !== void 0 && l.jti !== r.jti || !n.verify(e, t, r.alg));\n};\na.jws.JWS.includedArray = function(e, t) {\n  var r = a.jws.JWS.inArray;\n  if (e === null || typeof e != \"object\" || typeof e.length != \"number\")\n    return !1;\n  for (var i = 0; i < e.length; i++)\n    if (!r(e[i], t))\n      return !1;\n  return !0;\n};\na.jws.JWS.inArray = function(e, t) {\n  if (t === null || typeof t != \"object\" || typeof t.length != \"number\")\n    return !1;\n  for (var r = 0; r < t.length; r++)\n    if (t[r] == e)\n      return !0;\n  return !1;\n};\na.jws.JWS.jwsalg2sigalg = { HS256: \"HmacSHA256\", HS384: \"HmacSHA384\", HS512: \"HmacSHA512\", RS256: \"SHA256withRSA\", RS384: \"SHA384withRSA\", RS512: \"SHA512withRSA\", ES256: \"SHA256withECDSA\", ES384: \"SHA384withECDSA\", ES512: \"SHA512withECDSA\", PS256: \"SHA256withRSAandMGF1\", PS384: \"SHA384withRSAandMGF1\", PS512: \"SHA512withRSAandMGF1\", none: \"none\" };\na.jws.JWS.isSafeJSONString = function(e, t, r) {\n  var i = null;\n  try {\n    return i = Pt(e), typeof i != \"object\" || i.constructor === Array ? 0 : (t && (t[r] = i), 1);\n  } catch {\n    return 0;\n  }\n};\na.jws.JWS.readSafeJSONString = function(e) {\n  var t = null;\n  try {\n    return t = Pt(e), typeof t != \"object\" || t.constructor === Array ? null : t;\n  } catch {\n    return null;\n  }\n};\na.jws.JWS.getEncodedSignatureValueFromJWS = function(e) {\n  var t = e.match(/^[^.]+\\.[^.]+\\.([^.]+)$/);\n  if (t == null)\n    throw \"JWS signature is not a form of 'Head.Payload.SigValue'.\";\n  return t[1];\n};\na.jws.JWS.getJWKthumbprint = function(e) {\n  if (e.kty !== \"RSA\" && e.kty !== \"EC\" && e.kty !== \"oct\")\n    throw \"unsupported algorithm for JWK Thumprint\";\n  var t = \"{\";\n  if (e.kty === \"RSA\") {\n    if (typeof e.n != \"string\" || typeof e.e != \"string\")\n      throw \"wrong n and e value for RSA key\";\n    t += '\"e\":\"' + e.e + '\",', t += '\"kty\":\"' + e.kty + '\",', t += '\"n\":\"' + e.n + '\"}';\n  } else if (e.kty === \"EC\") {\n    if (typeof e.crv != \"string\" || typeof e.x != \"string\" || typeof e.y != \"string\")\n      throw \"wrong crv, x and y value for EC key\";\n    t += '\"crv\":\"' + e.crv + '\",', t += '\"kty\":\"' + e.kty + '\",', t += '\"x\":\"' + e.x + '\",', t += '\"y\":\"' + e.y + '\"}';\n  } else if (e.kty === \"oct\") {\n    if (typeof e.k != \"string\")\n      throw \"wrong k value for oct(symmetric) key\";\n    t += '\"kty\":\"' + e.kty + '\",', t += '\"k\":\"' + e.k + '\"}';\n  }\n  var r = Pe(t), i = a.crypto.Util.hashHex(r, \"sha256\"), s = ae(i);\n  return s;\n};\na.jws.IntDate = {};\na.jws.IntDate.get = function(e) {\n  var t = a.jws.IntDate, r = t.getNow, i = t.getZulu;\n  if (e == \"now\")\n    return r();\n  if (e == \"now + 1hour\")\n    return r() + 60 * 60;\n  if (e == \"now + 1day\")\n    return r() + 60 * 60 * 24;\n  if (e == \"now + 1month\")\n    return r() + 60 * 60 * 24 * 30;\n  if (e == \"now + 1year\")\n    return r() + 60 * 60 * 24 * 365;\n  if (e.match(/Z$/))\n    return i(e);\n  if (e.match(/^[0-9]+$/))\n    return parseInt(e);\n  throw \"unsupported format: \" + e;\n};\na.jws.IntDate.getZulu = function(e) {\n  return gn(e);\n};\na.jws.IntDate.getNow = function() {\n  var e = ~~(/* @__PURE__ */ new Date() / 1e3);\n  return e;\n};\na.jws.IntDate.intDate2UTCString = function(e) {\n  var t = new Date(e * 1e3);\n  return t.toUTCString();\n};\na.jws.IntDate.intDate2Zulu = function(e) {\n  var t = new Date(e * 1e3), r = (\"0000\" + t.getUTCFullYear()).slice(-4), i = (\"00\" + (t.getUTCMonth() + 1)).slice(-2), s = (\"00\" + t.getUTCDate()).slice(-2), n = (\"00\" + t.getUTCHours()).slice(-2), h = (\"00\" + t.getUTCMinutes()).slice(-2), u = (\"00\" + t.getUTCSeconds()).slice(-2);\n  return r + i + s + n + h + u + \"Z\";\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.jws > \"u\" || !a.jws) && (a.jws = {});\na.jws.JWSJS = function() {\n  var e = a, t = e.jws, r = t.JWS, i = r.readSafeJSONString;\n  this.aHeader = [], this.sPayload = \"\", this.aSignature = [], this.init = function() {\n    this.aHeader = [], this.sPayload = void 0, this.aSignature = [];\n  }, this.initWithJWS = function(s) {\n    this.init();\n    var n = s.split(\".\");\n    if (n.length != 3)\n      throw \"malformed input JWS\";\n    this.aHeader.push(n[0]), this.sPayload = n[1], this.aSignature.push(n[2]);\n  }, this.addSignature = function(s, n, h, u) {\n    if (this.sPayload === void 0 || this.sPayload === null)\n      throw \"there's no JSON-JS signature to add.\";\n    var p = this.aHeader.length;\n    if (this.aHeader.length != this.aSignature.length)\n      throw \"aHeader.length != aSignature.length\";\n    try {\n      var c = a.jws.JWS.sign(s, n, this.sPayload, h, u), y = c.split(\".\"), v = y[0], o = y[2];\n      this.aHeader.push(y[0]), this.aSignature.push(y[2]);\n    } catch (l) {\n      throw this.aHeader.length > p && this.aHeader.pop(), this.aSignature.length > p && this.aSignature.pop(), \"addSignature failed: \" + l;\n    }\n  }, this.verifyAll = function(s) {\n    if (this.aHeader.length !== s.length || this.aSignature.length !== s.length)\n      return !1;\n    for (var n = 0; n < s.length; n++) {\n      var h = s[n];\n      if (h.length !== 2)\n        return !1;\n      var u = this.verifyNth(n, h[0], h[1]);\n      if (u === !1)\n        return !1;\n    }\n    return !0;\n  }, this.verifyNth = function(s, n, h) {\n    if (this.aHeader.length <= s || this.aSignature.length <= s)\n      return !1;\n    var u = this.aHeader[s], p = this.aSignature[s], c = u + \".\" + this.sPayload + \".\" + p, y = !1;\n    try {\n      y = r.verify(c, n, h);\n    } catch {\n      return !1;\n    }\n    return y;\n  }, this.readJWSJS = function(s) {\n    if (typeof s == \"string\") {\n      var n = i(s);\n      if (n == null)\n        throw \"argument is not safe JSON object string\";\n      this.aHeader = n.headers, this.sPayload = n.payload, this.aSignature = n.signatures;\n    } else\n      try {\n        if (s.headers.length > 0)\n          this.aHeader = s.headers;\n        else\n          throw \"malformed header\";\n        if (typeof s.payload == \"string\")\n          this.sPayload = s.payload;\n        else\n          throw \"malformed signatures\";\n        if (s.signatures.length > 0)\n          this.aSignature = s.signatures;\n        else\n          throw \"malformed signatures\";\n      } catch (h) {\n        throw \"malformed JWS-JS JSON object: \" + h;\n      }\n  }, this.getJSON = function() {\n    return { headers: this.aHeader, payload: this.sPayload, signatures: this.aSignature };\n  }, this.isEmpty = function() {\n    return this.aHeader.length == 0 ? 1 : 0;\n  };\n};\na.crypto.ECDSA;\na.crypto.DSA;\na.crypto.Signature;\na.crypto.MessageDigest;\na.crypto.Mac;\nvar wn = k, Fn = we, bn = a;\na.crypto;\na.asn1;\na.jws;\na.lang;\nconst An = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  KEYUTIL: wn,\n  KJUR: bn,\n  b64utoutf8: Fn\n}, Symbol.toStringTag, { value: \"Module\" }));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Aa2luZGUvand0LXZhbGlkYXRvci9kaXN0L2pzcnNhc2lnbi1CMmdaSUpoWS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHLGlDQUFpQztBQUNwQztBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSCw0QkFBNEIsT0FBTztBQUNuQztBQUNBO0FBQ0EsS0FBSyxpQkFBaUIsZ0JBQWdCO0FBQ3RDLHlEQUF5RCxPQUFPO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDBDQUEwQyxPQUFPO0FBQ2pEO0FBQ0E7QUFDQSxLQUFLLG1CQUFtQjtBQUN4Qix5REFBeUQsT0FBTztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCwwQ0FBMEMsT0FBTztBQUNqRDtBQUNBO0FBQ0EsS0FBSyxpQkFBaUI7QUFDdEI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsS0FBSyw0Q0FBNEM7QUFDakQ7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcseUdBQXlHO0FBQzVHLGlEQUFpRCxRQUFRO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxRQUFRO0FBQ2hELCtDQUErQyxRQUFRO0FBQ3ZELGtEQUFrRCxPQUFPO0FBQ3pEO0FBQ0E7QUFDQSwyQ0FBMkMsUUFBUTtBQUNuRCxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QiwyRUFBMkUsT0FBTztBQUNsRjtBQUNBO0FBQ0E7QUFDQSxHQUFHLHVDQUF1QztBQUMxQywyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUcsdUNBQXVDO0FBQzFDLENBQUM7QUFDRDtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTyxzTEFBc0wsMkJBQTJCO0FBQzVPLGlDQUFpQyxjQUFjO0FBQy9DO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtQ0FBbUMsT0FBTztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RkFBdUYsUUFBUTtBQUMvRjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQkFBc0IsUUFBUTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtU0FBbVMsT0FBTztBQUMxUztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQSw0RkFBNEY7QUFDNUY7QUFDQSxHQUFHO0FBQ0gsNEZBQTRGLFFBQVE7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRyxnQkFBZ0IsUUFBUTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsUUFBUTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBLEdBQUc7QUFDSCwwSEFBMEgsUUFBUTtBQUNsSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7QUFDRDtBQUNBLHNGQUFzRjtBQUN0RjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUIsNEJBQTRCO0FBQzVCO0FBQ0EsR0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixPQUFPO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLE9BQU87QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELFFBQVE7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsV0FBVywwQkFB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QUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMEJBQTBCLGdCQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw0Q0FBNEMsY0FBYztBQUMxRDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0JBQXNCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw0Q0FBNEMsY0FBYztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsNENBQTRDLGNBQWM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsY0FBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxjQUFjO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtB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Q047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEdBQUc7QUFDSCxhQUFhO0FBQ2IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0JBQXdCLGlCQUFpQjtBQUd4QyIsInNvdXJjZXMiOlsid2VicGFjazovL3N0dWRlbnQtYXR0ZW5kYW5jZS1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9Aa2luZGUvand0LXZhbGlkYXRvci9kaXN0L2pzcnNhc2lnbi1CMmdaSUpoWS5qcz9iNDBjIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBVZSA9IHt9O1xuVWUudXNlckFnZW50ID0gITE7XG52YXIgVmUgPSB7fTtcbi8qISBDcnlwdG9KUyB2My4xLjIgY29yZS1maXguanNcbiAqIGNvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qc1xuICogKGMpIDIwMDktMjAxMyBieSBKZWZmIE1vdHQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvd2lraS9MaWNlbnNlXG4gKiBUSElTIElTIEZJWCBvZiAnY29yZS5qcycgdG8gZml4IEhtYWMgaXNzdWUuXG4gKiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2NyeXB0by1qcy9pc3N1ZXMvZGV0YWlsP2lkPTg0XG4gKiBodHRwczovL2NyeXB0by1qcy5nb29nbGVjb2RlLmNvbS9zdm4taGlzdG9yeS9yNjY3L2JyYW5jaGVzLzMueC9zcmMvY29yZS5qc1xuICovXG52YXIgSyA9IEsgfHwgZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IHt9LCBpID0gci5saWIgPSB7fSwgcyA9IGkuQmFzZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBvKCkge1xuICAgIH1cbiAgICByZXR1cm4geyBleHRlbmQ6IGZ1bmN0aW9uKGwpIHtcbiAgICAgIG8ucHJvdG90eXBlID0gdGhpcztcbiAgICAgIHZhciBmID0gbmV3IG8oKTtcbiAgICAgIHJldHVybiBsICYmIGYubWl4SW4obCksIGYuaGFzT3duUHJvcGVydHkoXCJpbml0XCIpIHx8IChmLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZi4kc3VwZXIuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSksIGYuaW5pdC5wcm90b3R5cGUgPSBmLCBmLiRzdXBlciA9IHRoaXMsIGY7XG4gICAgfSwgY3JlYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsID0gdGhpcy5leHRlbmQoKTtcbiAgICAgIHJldHVybiBsLmluaXQuYXBwbHkobCwgYXJndW1lbnRzKSwgbDtcbiAgICB9LCBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB9LCBtaXhJbjogZnVuY3Rpb24obCkge1xuICAgICAgZm9yICh2YXIgZiBpbiBsKVxuICAgICAgICBsLmhhc093blByb3BlcnR5KGYpICYmICh0aGlzW2ZdID0gbFtmXSk7XG4gICAgICBsLmhhc093blByb3BlcnR5KFwidG9TdHJpbmdcIikgJiYgKHRoaXMudG9TdHJpbmcgPSBsLnRvU3RyaW5nKTtcbiAgICB9LCBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbml0LnByb3RvdHlwZS5leHRlbmQodGhpcyk7XG4gICAgfSB9O1xuICB9KCksIG4gPSBpLldvcmRBcnJheSA9IHMuZXh0ZW5kKHsgaW5pdDogZnVuY3Rpb24obywgbCkge1xuICAgIG8gPSB0aGlzLndvcmRzID0gbyB8fCBbXSwgbCAhPSB0ID8gdGhpcy5zaWdCeXRlcyA9IGwgOiB0aGlzLnNpZ0J5dGVzID0gby5sZW5ndGggKiA0O1xuICB9LCB0b1N0cmluZzogZnVuY3Rpb24obykge1xuICAgIHJldHVybiAobyB8fCB1KS5zdHJpbmdpZnkodGhpcyk7XG4gIH0sIGNvbmNhdDogZnVuY3Rpb24obykge1xuICAgIHZhciBsID0gdGhpcy53b3JkcywgZiA9IG8ud29yZHMsIGQgPSB0aGlzLnNpZ0J5dGVzLCBnID0gby5zaWdCeXRlcztcbiAgICBpZiAodGhpcy5jbGFtcCgpLCBkICUgNClcbiAgICAgIGZvciAodmFyIFMgPSAwOyBTIDwgZzsgUysrKSB7XG4gICAgICAgIHZhciBiID0gZltTID4+PiAyXSA+Pj4gMjQgLSBTICUgNCAqIDggJiAyNTU7XG4gICAgICAgIGxbZCArIFMgPj4+IDJdIHw9IGIgPDwgMjQgLSAoZCArIFMpICUgNCAqIDg7XG4gICAgICB9XG4gICAgZWxzZVxuICAgICAgZm9yICh2YXIgUyA9IDA7IFMgPCBnOyBTICs9IDQpXG4gICAgICAgIGxbZCArIFMgPj4+IDJdID0gZltTID4+PiAyXTtcbiAgICByZXR1cm4gdGhpcy5zaWdCeXRlcyArPSBnLCB0aGlzO1xuICB9LCBjbGFtcDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIG8gPSB0aGlzLndvcmRzLCBsID0gdGhpcy5zaWdCeXRlcztcbiAgICBvW2wgPj4+IDJdICY9IDQyOTQ5NjcyOTUgPDwgMzIgLSBsICUgNCAqIDgsIG8ubGVuZ3RoID0gZS5jZWlsKGwgLyA0KTtcbiAgfSwgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvID0gcy5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIHJldHVybiBvLndvcmRzID0gdGhpcy53b3Jkcy5zbGljZSgwKSwgbztcbiAgfSwgcmFuZG9tOiBmdW5jdGlvbihvKSB7XG4gICAgZm9yICh2YXIgbCA9IFtdLCBmID0gMDsgZiA8IG87IGYgKz0gNClcbiAgICAgIGwucHVzaChlLnJhbmRvbSgpICogNDI5NDk2NzI5NiB8IDApO1xuICAgIHJldHVybiBuZXcgbi5pbml0KGwsIG8pO1xuICB9IH0pLCBoID0gci5lbmMgPSB7fSwgdSA9IGguSGV4ID0geyBzdHJpbmdpZnk6IGZ1bmN0aW9uKG8pIHtcbiAgICBmb3IgKHZhciBsID0gby53b3JkcywgZiA9IG8uc2lnQnl0ZXMsIGQgPSBbXSwgZyA9IDA7IGcgPCBmOyBnKyspIHtcbiAgICAgIHZhciBTID0gbFtnID4+PiAyXSA+Pj4gMjQgLSBnICUgNCAqIDggJiAyNTU7XG4gICAgICBkLnB1c2goKFMgPj4+IDQpLnRvU3RyaW5nKDE2KSksIGQucHVzaCgoUyAmIDE1KS50b1N0cmluZygxNikpO1xuICAgIH1cbiAgICByZXR1cm4gZC5qb2luKFwiXCIpO1xuICB9LCBwYXJzZTogZnVuY3Rpb24obykge1xuICAgIGZvciAodmFyIGwgPSBvLmxlbmd0aCwgZiA9IFtdLCBkID0gMDsgZCA8IGw7IGQgKz0gMilcbiAgICAgIGZbZCA+Pj4gM10gfD0gcGFyc2VJbnQoby5zdWJzdHIoZCwgMiksIDE2KSA8PCAyNCAtIGQgJSA4ICogNDtcbiAgICByZXR1cm4gbmV3IG4uaW5pdChmLCBsIC8gMik7XG4gIH0gfSwgcCA9IGguTGF0aW4xID0geyBzdHJpbmdpZnk6IGZ1bmN0aW9uKG8pIHtcbiAgICBmb3IgKHZhciBsID0gby53b3JkcywgZiA9IG8uc2lnQnl0ZXMsIGQgPSBbXSwgZyA9IDA7IGcgPCBmOyBnKyspIHtcbiAgICAgIHZhciBTID0gbFtnID4+PiAyXSA+Pj4gMjQgLSBnICUgNCAqIDggJiAyNTU7XG4gICAgICBkLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShTKSk7XG4gICAgfVxuICAgIHJldHVybiBkLmpvaW4oXCJcIik7XG4gIH0sIHBhcnNlOiBmdW5jdGlvbihvKSB7XG4gICAgZm9yICh2YXIgbCA9IG8ubGVuZ3RoLCBmID0gW10sIGQgPSAwOyBkIDwgbDsgZCsrKVxuICAgICAgZltkID4+PiAyXSB8PSAoby5jaGFyQ29kZUF0KGQpICYgMjU1KSA8PCAyNCAtIGQgJSA0ICogODtcbiAgICByZXR1cm4gbmV3IG4uaW5pdChmLCBsKTtcbiAgfSB9LCBjID0gaC5VdGY4ID0geyBzdHJpbmdpZnk6IGZ1bmN0aW9uKG8pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUocC5zdHJpbmdpZnkobykpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBVVEYtOCBkYXRhXCIpO1xuICAgIH1cbiAgfSwgcGFyc2U6IGZ1bmN0aW9uKG8pIHtcbiAgICByZXR1cm4gcC5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQobykpKTtcbiAgfSB9LCB5ID0gaS5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtID0gcy5leHRlbmQoeyByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fZGF0YSA9IG5ldyBuLmluaXQoKSwgdGhpcy5fbkRhdGFCeXRlcyA9IDA7XG4gIH0sIF9hcHBlbmQ6IGZ1bmN0aW9uKG8pIHtcbiAgICB0eXBlb2YgbyA9PSBcInN0cmluZ1wiICYmIChvID0gYy5wYXJzZShvKSksIHRoaXMuX2RhdGEuY29uY2F0KG8pLCB0aGlzLl9uRGF0YUJ5dGVzICs9IG8uc2lnQnl0ZXM7XG4gIH0sIF9wcm9jZXNzOiBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGwgPSB0aGlzLl9kYXRhLCBmID0gbC53b3JkcywgZCA9IGwuc2lnQnl0ZXMsIGcgPSB0aGlzLmJsb2NrU2l6ZSwgUyA9IGcgKiA0LCBiID0gZCAvIFM7XG4gICAgbyA/IGIgPSBlLmNlaWwoYikgOiBiID0gZS5tYXgoKGIgfCAwKSAtIHRoaXMuX21pbkJ1ZmZlclNpemUsIDApO1xuICAgIHZhciBEID0gYiAqIGcsIEEgPSBlLm1pbihEICogNCwgZCk7XG4gICAgaWYgKEQpIHtcbiAgICAgIGZvciAodmFyIEkgPSAwOyBJIDwgRDsgSSArPSBnKVxuICAgICAgICB0aGlzLl9kb1Byb2Nlc3NCbG9jayhmLCBJKTtcbiAgICAgIHZhciBtID0gZi5zcGxpY2UoMCwgRCk7XG4gICAgICBsLnNpZ0J5dGVzIC09IEE7XG4gICAgfVxuICAgIHJldHVybiBuZXcgbi5pbml0KG0sIEEpO1xuICB9LCBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIG8gPSBzLmNsb25lLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIG8uX2RhdGEgPSB0aGlzLl9kYXRhLmNsb25lKCksIG87XG4gIH0sIF9taW5CdWZmZXJTaXplOiAwIH0pO1xuICBpLkhhc2hlciA9IHkuZXh0ZW5kKHsgY2ZnOiBzLmV4dGVuZCgpLCBpbml0OiBmdW5jdGlvbihvKSB7XG4gICAgdGhpcy5jZmcgPSB0aGlzLmNmZy5leHRlbmQobyksIHRoaXMucmVzZXQoKTtcbiAgfSwgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHkucmVzZXQuY2FsbCh0aGlzKSwgdGhpcy5fZG9SZXNldCgpO1xuICB9LCB1cGRhdGU6IGZ1bmN0aW9uKG8pIHtcbiAgICByZXR1cm4gdGhpcy5fYXBwZW5kKG8pLCB0aGlzLl9wcm9jZXNzKCksIHRoaXM7XG4gIH0sIGZpbmFsaXplOiBmdW5jdGlvbihvKSB7XG4gICAgbyAmJiB0aGlzLl9hcHBlbmQobyk7XG4gICAgdmFyIGwgPSB0aGlzLl9kb0ZpbmFsaXplKCk7XG4gICAgcmV0dXJuIGw7XG4gIH0sIGJsb2NrU2l6ZTogNTEyIC8gMzIsIF9jcmVhdGVIZWxwZXI6IGZ1bmN0aW9uKG8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obCwgZikge1xuICAgICAgcmV0dXJuIG5ldyBvLmluaXQoZikuZmluYWxpemUobCk7XG4gICAgfTtcbiAgfSwgX2NyZWF0ZUhtYWNIZWxwZXI6IGZ1bmN0aW9uKG8pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obCwgZikge1xuICAgICAgcmV0dXJuIG5ldyB2LkhNQUMuaW5pdChvLCBmKS5maW5hbGl6ZShsKTtcbiAgICB9O1xuICB9IH0pO1xuICB2YXIgdiA9IHIuYWxnbyA9IHt9O1xuICByZXR1cm4gcjtcbn0oTWF0aCk7XG4oZnVuY3Rpb24oZSkge1xuICB2YXIgcyA9IEssIHQgPSBzLmxpYiwgciA9IHQuQmFzZSwgaSA9IHQuV29yZEFycmF5LCBzID0gcy54NjQgPSB7fTtcbiAgcy5Xb3JkID0gci5leHRlbmQoeyBpbml0OiBmdW5jdGlvbihuLCBoKSB7XG4gICAgdGhpcy5oaWdoID0gbiwgdGhpcy5sb3cgPSBoO1xuICB9IH0pLCBzLldvcmRBcnJheSA9IHIuZXh0ZW5kKHsgaW5pdDogZnVuY3Rpb24obiwgaCkge1xuICAgIG4gPSB0aGlzLndvcmRzID0gbiB8fCBbXSwgdGhpcy5zaWdCeXRlcyA9IGggIT0gZSA/IGggOiA4ICogbi5sZW5ndGg7XG4gIH0sIHRvWDMyOiBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBuID0gdGhpcy53b3JkcywgaCA9IG4ubGVuZ3RoLCB1ID0gW10sIHAgPSAwOyBwIDwgaDsgcCsrKSB7XG4gICAgICB2YXIgYyA9IG5bcF07XG4gICAgICB1LnB1c2goYy5oaWdoKSwgdS5wdXNoKGMubG93KTtcbiAgICB9XG4gICAgcmV0dXJuIGkuY3JlYXRlKHUsIHRoaXMuc2lnQnl0ZXMpO1xuICB9LCBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgbiA9IHIuY2xvbmUuY2FsbCh0aGlzKSwgaCA9IG4ud29yZHMgPSB0aGlzLndvcmRzLnNsaWNlKDApLCB1ID0gaC5sZW5ndGgsIHAgPSAwOyBwIDwgdTsgcCsrKSBoW3BdID0gaFtwXS5jbG9uZSgpO1xuICAgIHJldHVybiBuO1xuICB9IH0pO1xufSkoKTtcbksubGliLkNpcGhlciB8fCBmdW5jdGlvbihlKSB7XG4gIHZhciBsID0gSywgdCA9IGwubGliLCByID0gdC5CYXNlLCBpID0gdC5Xb3JkQXJyYXksIHMgPSB0LkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0sIG4gPSBsLmVuYy5CYXNlNjQsIGggPSBsLmFsZ28uRXZwS0RGLCB1ID0gdC5DaXBoZXIgPSBzLmV4dGVuZCh7IGNmZzogci5leHRlbmQoKSwgY3JlYXRlRW5jcnlwdG9yOiBmdW5jdGlvbihkLCBnKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLCBkLCBnKTtcbiAgfSwgY3JlYXRlRGVjcnlwdG9yOiBmdW5jdGlvbihkLCBnKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLCBkLCBnKTtcbiAgfSwgaW5pdDogZnVuY3Rpb24oZCwgZywgUykge1xuICAgIHRoaXMuY2ZnID0gdGhpcy5jZmcuZXh0ZW5kKFMpLCB0aGlzLl94Zm9ybU1vZGUgPSBkLCB0aGlzLl9rZXkgPSBnLCB0aGlzLnJlc2V0KCk7XG4gIH0sIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICBzLnJlc2V0LmNhbGwodGhpcyksIHRoaXMuX2RvUmVzZXQoKTtcbiAgfSwgcHJvY2VzczogZnVuY3Rpb24oZCkge1xuICAgIHJldHVybiB0aGlzLl9hcHBlbmQoZCksIHRoaXMuX3Byb2Nlc3MoKTtcbiAgfSwgZmluYWxpemU6IGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZCAmJiB0aGlzLl9hcHBlbmQoZCksIHRoaXMuX2RvRmluYWxpemUoKTtcbiAgfSwga2V5U2l6ZTogNCwgaXZTaXplOiA0LCBfRU5DX1hGT1JNX01PREU6IDEsIF9ERUNfWEZPUk1fTU9ERTogMiwgX2NyZWF0ZUhlbHBlcjogZnVuY3Rpb24oZCkge1xuICAgIHJldHVybiB7IGVuY3J5cHQ6IGZ1bmN0aW9uKGcsIFMsIGIpIHtcbiAgICAgIHJldHVybiAodHlwZW9mIFMgPT0gXCJzdHJpbmdcIiA/IGYgOiBvKS5lbmNyeXB0KGQsIGcsIFMsIGIpO1xuICAgIH0sIGRlY3J5cHQ6IGZ1bmN0aW9uKGcsIFMsIGIpIHtcbiAgICAgIHJldHVybiAodHlwZW9mIFMgPT0gXCJzdHJpbmdcIiA/IGYgOiBvKS5kZWNyeXB0KGQsIGcsIFMsIGIpO1xuICAgIH0gfTtcbiAgfSB9KTtcbiAgdC5TdHJlYW1DaXBoZXIgPSB1LmV4dGVuZCh7IF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvY2VzcyghMCk7XG4gIH0sIGJsb2NrU2l6ZTogMSB9KTtcbiAgdmFyIHYgPSBsLm1vZGUgPSB7fSwgcCA9IGZ1bmN0aW9uKGQsIGcsIFMpIHtcbiAgICB2YXIgYiA9IHRoaXMuX2l2O1xuICAgIGIgPyB0aGlzLl9pdiA9IGUgOiBiID0gdGhpcy5fcHJldkJsb2NrO1xuICAgIGZvciAodmFyIEQgPSAwOyBEIDwgUzsgRCsrKSBkW2cgKyBEXSBePSBiW0RdO1xuICB9LCBjID0gKHQuQmxvY2tDaXBoZXJNb2RlID0gci5leHRlbmQoeyBjcmVhdGVFbmNyeXB0b3I6IGZ1bmN0aW9uKGQsIGcpIHtcbiAgICByZXR1cm4gdGhpcy5FbmNyeXB0b3IuY3JlYXRlKGQsIGcpO1xuICB9LCBjcmVhdGVEZWNyeXB0b3I6IGZ1bmN0aW9uKGQsIGcpIHtcbiAgICByZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKGQsIGcpO1xuICB9LCBpbml0OiBmdW5jdGlvbihkLCBnKSB7XG4gICAgdGhpcy5fY2lwaGVyID0gZCwgdGhpcy5faXYgPSBnO1xuICB9IH0pKS5leHRlbmQoKTtcbiAgYy5FbmNyeXB0b3IgPSBjLmV4dGVuZCh7IHByb2Nlc3NCbG9jazogZnVuY3Rpb24oZCwgZykge1xuICAgIHZhciBTID0gdGhpcy5fY2lwaGVyLCBiID0gUy5ibG9ja1NpemU7XG4gICAgcC5jYWxsKHRoaXMsIGQsIGcsIGIpLCBTLmVuY3J5cHRCbG9jayhkLCBnKSwgdGhpcy5fcHJldkJsb2NrID0gZC5zbGljZShnLCBnICsgYik7XG4gIH0gfSksIGMuRGVjcnlwdG9yID0gYy5leHRlbmQoeyBwcm9jZXNzQmxvY2s6IGZ1bmN0aW9uKGQsIGcpIHtcbiAgICB2YXIgUyA9IHRoaXMuX2NpcGhlciwgYiA9IFMuYmxvY2tTaXplLCBEID0gZC5zbGljZShnLCBnICsgYik7XG4gICAgUy5kZWNyeXB0QmxvY2soXG4gICAgICBkLFxuICAgICAgZ1xuICAgICksIHAuY2FsbCh0aGlzLCBkLCBnLCBiKSwgdGhpcy5fcHJldkJsb2NrID0gRDtcbiAgfSB9KSwgdiA9IHYuQ0JDID0gYywgYyA9IChsLnBhZCA9IHt9KS5Qa2NzNyA9IHsgcGFkOiBmdW5jdGlvbihkLCBnKSB7XG4gICAgZm9yICh2YXIgUyA9IDQgKiBnLCBTID0gUyAtIGQuc2lnQnl0ZXMgJSBTLCBiID0gUyA8PCAyNCB8IFMgPDwgMTYgfCBTIDw8IDggfCBTLCBEID0gW10sIEEgPSAwOyBBIDwgUzsgQSArPSA0KSBELnB1c2goYik7XG4gICAgUyA9IGkuY3JlYXRlKEQsIFMpLCBkLmNvbmNhdChTKTtcbiAgfSwgdW5wYWQ6IGZ1bmN0aW9uKGQpIHtcbiAgICBkLnNpZ0J5dGVzIC09IGQud29yZHNbZC5zaWdCeXRlcyAtIDEgPj4+IDJdICYgMjU1O1xuICB9IH0sIHQuQmxvY2tDaXBoZXIgPSB1LmV4dGVuZCh7IGNmZzogdS5jZmcuZXh0ZW5kKHsgbW9kZTogdiwgcGFkZGluZzogYyB9KSwgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHUucmVzZXQuY2FsbCh0aGlzKTtcbiAgICB2YXIgZyA9IHRoaXMuY2ZnLCBkID0gZy5pdiwgZyA9IGcubW9kZTtcbiAgICBpZiAodGhpcy5feGZvcm1Nb2RlID09IHRoaXMuX0VOQ19YRk9STV9NT0RFKSB2YXIgUyA9IGcuY3JlYXRlRW5jcnlwdG9yO1xuICAgIGVsc2UgUyA9IGcuY3JlYXRlRGVjcnlwdG9yLCB0aGlzLl9taW5CdWZmZXJTaXplID0gMTtcbiAgICB0aGlzLl9tb2RlID0gUy5jYWxsKGcsIHRoaXMsIGQgJiYgZC53b3Jkcyk7XG4gIH0sIF9kb1Byb2Nlc3NCbG9jazogZnVuY3Rpb24oZCwgZykge1xuICAgIHRoaXMuX21vZGUucHJvY2Vzc0Jsb2NrKGQsIGcpO1xuICB9LCBfZG9GaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGQgPSB0aGlzLmNmZy5wYWRkaW5nO1xuICAgIGlmICh0aGlzLl94Zm9ybU1vZGUgPT0gdGhpcy5fRU5DX1hGT1JNX01PREUpIHtcbiAgICAgIGQucGFkKHRoaXMuX2RhdGEsIHRoaXMuYmxvY2tTaXplKTtcbiAgICAgIHZhciBnID0gdGhpcy5fcHJvY2VzcyghMCk7XG4gICAgfSBlbHNlIGcgPSB0aGlzLl9wcm9jZXNzKCEwKSwgZC51bnBhZChnKTtcbiAgICByZXR1cm4gZztcbiAgfSwgYmxvY2tTaXplOiA0IH0pO1xuICB2YXIgeSA9IHQuQ2lwaGVyUGFyYW1zID0gci5leHRlbmQoeyBpbml0OiBmdW5jdGlvbihkKSB7XG4gICAgdGhpcy5taXhJbihkKTtcbiAgfSwgdG9TdHJpbmc6IGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gKGQgfHwgdGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKTtcbiAgfSB9KSwgdiA9IChsLmZvcm1hdCA9IHt9KS5PcGVuU1NMID0geyBzdHJpbmdpZnk6IGZ1bmN0aW9uKGQpIHtcbiAgICB2YXIgZyA9IGQuY2lwaGVydGV4dDtcbiAgICByZXR1cm4gZCA9IGQuc2FsdCwgKGQgPyBpLmNyZWF0ZShbMTM5ODg5MzY4NCwgMTcwMTA3NjgzMV0pLmNvbmNhdChkKS5jb25jYXQoZykgOiBnKS50b1N0cmluZyhuKTtcbiAgfSwgcGFyc2U6IGZ1bmN0aW9uKGQpIHtcbiAgICBkID0gbi5wYXJzZShkKTtcbiAgICB2YXIgZyA9IGQud29yZHM7XG4gICAgaWYgKGdbMF0gPT0gMTM5ODg5MzY4NCAmJiBnWzFdID09IDE3MDEwNzY4MzEpIHtcbiAgICAgIHZhciBTID0gaS5jcmVhdGUoZy5zbGljZSgyLCA0KSk7XG4gICAgICBnLnNwbGljZSgwLCA0KSwgZC5zaWdCeXRlcyAtPSAxNjtcbiAgICB9XG4gICAgcmV0dXJuIHkuY3JlYXRlKHsgY2lwaGVydGV4dDogZCwgc2FsdDogUyB9KTtcbiAgfSB9LCBvID0gdC5TZXJpYWxpemFibGVDaXBoZXIgPSByLmV4dGVuZCh7IGNmZzogci5leHRlbmQoeyBmb3JtYXQ6IHYgfSksIGVuY3J5cHQ6IGZ1bmN0aW9uKGQsIGcsIFMsIGIpIHtcbiAgICBiID0gdGhpcy5jZmcuZXh0ZW5kKGIpO1xuICAgIHZhciBEID0gZC5jcmVhdGVFbmNyeXB0b3IoUywgYik7XG4gICAgcmV0dXJuIGcgPSBELmZpbmFsaXplKGcpLCBEID0gRC5jZmcsIHkuY3JlYXRlKHtcbiAgICAgIGNpcGhlcnRleHQ6IGcsXG4gICAgICBrZXk6IFMsXG4gICAgICBpdjogRC5pdixcbiAgICAgIGFsZ29yaXRobTogZCxcbiAgICAgIG1vZGU6IEQubW9kZSxcbiAgICAgIHBhZGRpbmc6IEQucGFkZGluZyxcbiAgICAgIGJsb2NrU2l6ZTogZC5ibG9ja1NpemUsXG4gICAgICBmb3JtYXR0ZXI6IGIuZm9ybWF0XG4gICAgfSk7XG4gIH0sIGRlY3J5cHQ6IGZ1bmN0aW9uKGQsIGcsIFMsIGIpIHtcbiAgICByZXR1cm4gYiA9IHRoaXMuY2ZnLmV4dGVuZChiKSwgZyA9IHRoaXMuX3BhcnNlKGcsIGIuZm9ybWF0KSwgZC5jcmVhdGVEZWNyeXB0b3IoUywgYikuZmluYWxpemUoZy5jaXBoZXJ0ZXh0KTtcbiAgfSwgX3BhcnNlOiBmdW5jdGlvbihkLCBnKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkID09IFwic3RyaW5nXCIgPyBnLnBhcnNlKGQsIHRoaXMpIDogZDtcbiAgfSB9KSwgbCA9IChsLmtkZiA9IHt9KS5PcGVuU1NMID0geyBleGVjdXRlOiBmdW5jdGlvbihkLCBnLCBTLCBiKSB7XG4gICAgcmV0dXJuIGIgfHwgKGIgPSBpLnJhbmRvbSg4KSksIGQgPSBoLmNyZWF0ZSh7IGtleVNpemU6IGcgKyBTIH0pLmNvbXB1dGUoZCwgYiksIFMgPSBpLmNyZWF0ZShkLndvcmRzLnNsaWNlKGcpLCA0ICogUyksIGQuc2lnQnl0ZXMgPSA0ICogZywgeS5jcmVhdGUoeyBrZXk6IGQsIGl2OiBTLCBzYWx0OiBiIH0pO1xuICB9IH0sIGYgPSB0LlBhc3N3b3JkQmFzZWRDaXBoZXIgPSBvLmV4dGVuZCh7IGNmZzogby5jZmcuZXh0ZW5kKHsga2RmOiBsIH0pLCBlbmNyeXB0OiBmdW5jdGlvbihkLCBnLCBTLCBiKSB7XG4gICAgcmV0dXJuIGIgPSB0aGlzLmNmZy5leHRlbmQoYiksIFMgPSBiLmtkZi5leGVjdXRlKFMsIGQua2V5U2l6ZSwgZC5pdlNpemUpLCBiLml2ID0gUy5pdiwgZCA9IG8uZW5jcnlwdC5jYWxsKHRoaXMsIGQsIGcsIFMua2V5LCBiKSwgZC5taXhJbihTKSwgZDtcbiAgfSwgZGVjcnlwdDogZnVuY3Rpb24oZCwgZywgUywgYikge1xuICAgIHJldHVybiBiID0gdGhpcy5jZmcuZXh0ZW5kKGIpLCBnID0gdGhpcy5fcGFyc2UoZywgYi5mb3JtYXQpLCBTID0gYi5rZGYuZXhlY3V0ZShTLCBkLmtleVNpemUsIGQuaXZTaXplLCBnLnNhbHQpLCBiLml2ID0gUy5pdiwgby5kZWNyeXB0LmNhbGwodGhpcywgZCwgZywgUy5rZXksIGIpO1xuICB9IH0pO1xufSgpO1xuKGZ1bmN0aW9uKCkge1xuICBmb3IgKHZhciBlID0gSywgdCA9IGUubGliLkJsb2NrQ2lwaGVyLCBtID0gZS5hbGdvLCByID0gW10sIGkgPSBbXSwgcyA9IFtdLCBuID0gW10sIGggPSBbXSwgdSA9IFtdLCBwID0gW10sIGMgPSBbXSwgeSA9IFtdLCB2ID0gW10sIG8gPSBbXSwgbCA9IDA7IDI1NiA+IGw7IGwrKykgb1tsXSA9IDEyOCA+IGwgPyBsIDw8IDEgOiBsIDw8IDEgXiAyODM7XG4gIGZvciAodmFyIGYgPSAwLCBkID0gMCwgbCA9IDA7IDI1NiA+IGw7IGwrKykge1xuICAgIHZhciBnID0gZCBeIGQgPDwgMSBeIGQgPDwgMiBeIGQgPDwgMyBeIGQgPDwgNCwgZyA9IGcgPj4+IDggXiBnICYgMjU1IF4gOTk7XG4gICAgcltmXSA9IGcsIGlbZ10gPSBmO1xuICAgIHZhciBTID0gb1tmXSwgYiA9IG9bU10sIEQgPSBvW2JdLCBBID0gMjU3ICogb1tnXSBeIDE2ODQzMDA4ICogZztcbiAgICBzW2ZdID0gQSA8PCAyNCB8IEEgPj4+IDgsIG5bZl0gPSBBIDw8IDE2IHwgQSA+Pj4gMTYsIGhbZl0gPSBBIDw8IDggfCBBID4+PiAyNCwgdVtmXSA9IEEsIEEgPSAxNjg0MzAwOSAqIEQgXiA2NTUzNyAqIGIgXiAyNTcgKiBTIF4gMTY4NDMwMDggKiBmLCBwW2ddID0gQSA8PCAyNCB8IEEgPj4+IDgsIGNbZ10gPSBBIDw8IDE2IHwgQSA+Pj4gMTYsIHlbZ10gPSBBIDw8IDggfCBBID4+PiAyNCwgdltnXSA9IEEsIGYgPyAoZiA9IFMgXiBvW29bb1tEIF4gU11dXSwgZCBePSBvW29bZF1dKSA6IGYgPSBkID0gMTtcbiAgfVxuICB2YXIgSSA9IFtcbiAgICAwLFxuICAgIDEsXG4gICAgMixcbiAgICA0LFxuICAgIDgsXG4gICAgMTYsXG4gICAgMzIsXG4gICAgNjQsXG4gICAgMTI4LFxuICAgIDI3LFxuICAgIDU0XG4gIF0sIG0gPSBtLkFFUyA9IHQuZXh0ZW5kKHsgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHggPSB0aGlzLl9rZXksIEUgPSB4LndvcmRzLCB3ID0geC5zaWdCeXRlcyAvIDQsIHggPSA0ICogKCh0aGlzLl9uUm91bmRzID0gdyArIDYpICsgMSksIEYgPSB0aGlzLl9rZXlTY2hlZHVsZSA9IFtdLCBQID0gMDsgUCA8IHg7IFArKykgaWYgKFAgPCB3KSBGW1BdID0gRVtQXTtcbiAgICBlbHNlIHtcbiAgICAgIHZhciBUID0gRltQIC0gMV07XG4gICAgICBQICUgdyA/IDYgPCB3ICYmIFAgJSB3ID09IDQgJiYgKFQgPSByW1QgPj4+IDI0XSA8PCAyNCB8IHJbVCA+Pj4gMTYgJiAyNTVdIDw8IDE2IHwgcltUID4+PiA4ICYgMjU1XSA8PCA4IHwgcltUICYgMjU1XSkgOiAoVCA9IFQgPDwgOCB8IFQgPj4+IDI0LCBUID0gcltUID4+PiAyNF0gPDwgMjQgfCByW1QgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IHJbVCA+Pj4gOCAmIDI1NV0gPDwgOCB8IHJbVCAmIDI1NV0sIFQgXj0gSVtQIC8gdyB8IDBdIDw8IDI0KSwgRltQXSA9IEZbUCAtIHddIF4gVDtcbiAgICB9XG4gICAgZm9yIChFID0gdGhpcy5faW52S2V5U2NoZWR1bGUgPSBbXSwgdyA9IDA7IHcgPCB4OyB3KyspIFAgPSB4IC0gdywgVCA9IHcgJSA0ID8gRltQXSA6IEZbUCAtIDRdLCBFW3ddID0gNCA+IHcgfHwgNCA+PSBQID8gVCA6IHBbcltUID4+PiAyNF1dIF4gY1tyW1QgPj4+IDE2ICYgMjU1XV0gXiB5W3JbVCA+Pj4gOCAmIDI1NV1dIF4gdltyW1QgJiAyNTVdXTtcbiAgfSwgZW5jcnlwdEJsb2NrOiBmdW5jdGlvbihFLCB3KSB7XG4gICAgdGhpcy5fZG9DcnlwdEJsb2NrKEUsIHcsIHRoaXMuX2tleVNjaGVkdWxlLCBzLCBuLCBoLCB1LCByKTtcbiAgfSwgZGVjcnlwdEJsb2NrOiBmdW5jdGlvbihFLCB3KSB7XG4gICAgdmFyIHggPSBFW3cgKyAxXTtcbiAgICBFW3cgKyAxXSA9IEVbdyArIDNdLCBFW3cgKyAzXSA9IHgsIHRoaXMuX2RvQ3J5cHRCbG9jayhFLCB3LCB0aGlzLl9pbnZLZXlTY2hlZHVsZSwgcCwgYywgeSwgdiwgaSksIHggPSBFW3cgKyAxXSwgRVt3ICsgMV0gPSBFW3cgKyAzXSwgRVt3ICsgM10gPSB4O1xuICB9LCBfZG9DcnlwdEJsb2NrOiBmdW5jdGlvbihFLCB3LCB4LCBGLCBQLCBULCBILCBDKSB7XG4gICAgZm9yICh2YXIgQiA9IHRoaXMuX25Sb3VuZHMsIG5lID0gRVt3XSBeIHhbMF0sIGhlID0gRVt3ICsgMV0gXiB4WzFdLCBzZSA9IEVbdyArIDJdIF4geFsyXSwgcmUgPSBFW3cgKyAzXSBeIHhbM10sIE8gPSA0LCBqID0gMTsgaiA8IEI7IGorKykgdmFyIGZlID0gRltuZSA+Pj4gMjRdIF4gUFtoZSA+Pj4gMTYgJiAyNTVdIF4gVFtzZSA+Pj4gOCAmIDI1NV0gXiBIW3JlICYgMjU1XSBeIHhbTysrXSwgWiA9IEZbaGUgPj4+IDI0XSBeIFBbc2UgPj4+IDE2ICYgMjU1XSBeIFRbcmUgPj4+IDggJiAyNTVdIF4gSFtuZSAmIDI1NV0gXiB4W08rK10sIFggPSBGW3NlID4+PiAyNF0gXiBQW3JlID4+PiAxNiAmIDI1NV0gXiBUW25lID4+PiA4ICYgMjU1XSBeIEhbaGUgJiAyNTVdIF4geFtPKytdLCByZSA9IEZbcmUgPj4+IDI0XSBeIFBbbmUgPj4+IDE2ICYgMjU1XSBeIFRbaGUgPj4+IDggJiAyNTVdIF4gSFtzZSAmIDI1NV0gXiB4W08rK10sIG5lID0gZmUsIGhlID0gWiwgc2UgPSBYO1xuICAgIGZlID0gKENbbmUgPj4+IDI0XSA8PCAyNCB8IENbaGUgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IENbc2UgPj4+IDggJiAyNTVdIDw8IDggfCBDW3JlICYgMjU1XSkgXiB4W08rK10sIFogPSAoQ1toZSA+Pj4gMjRdIDw8IDI0IHwgQ1tzZSA+Pj4gMTYgJiAyNTVdIDw8IDE2IHwgQ1tyZSA+Pj4gOCAmIDI1NV0gPDwgOCB8IENbbmUgJiAyNTVdKSBeIHhbTysrXSwgWCA9IChDW3NlID4+PiAyNF0gPDwgMjQgfCBDW3JlID4+PiAxNiAmIDI1NV0gPDwgMTYgfCBDW25lID4+PiA4ICYgMjU1XSA8PCA4IHwgQ1toZSAmIDI1NV0pIF4geFtPKytdLCByZSA9IChDW3JlID4+PiAyNF0gPDwgMjQgfCBDW25lID4+PiAxNiAmIDI1NV0gPDwgMTYgfCBDW2hlID4+PiA4ICYgMjU1XSA8PCA4IHwgQ1tzZSAmIDI1NV0pIF4geFtPKytdLCBFW3ddID0gZmUsIEVbdyArIDFdID0gWiwgRVt3ICsgMl0gPSBYLCBFW3cgKyAzXSA9IHJlO1xuICB9LCBrZXlTaXplOiA4IH0pO1xuICBlLkFFUyA9IHQuX2NyZWF0ZUhlbHBlcihtKTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGUobywgbCkge1xuICAgIHZhciBmID0gKHRoaXMuX2xCbG9jayA+Pj4gbyBeIHRoaXMuX3JCbG9jaykgJiBsO1xuICAgIHRoaXMuX3JCbG9jayBePSBmLCB0aGlzLl9sQmxvY2sgXj0gZiA8PCBvO1xuICB9XG4gIGZ1bmN0aW9uIHQobywgbCkge1xuICAgIHZhciBmID0gKHRoaXMuX3JCbG9jayA+Pj4gbyBeIHRoaXMuX2xCbG9jaykgJiBsO1xuICAgIHRoaXMuX2xCbG9jayBePSBmLCB0aGlzLl9yQmxvY2sgXj0gZiA8PCBvO1xuICB9XG4gIHZhciByID0gSywgcyA9IHIubGliLCBpID0gcy5Xb3JkQXJyYXksIHMgPSBzLkJsb2NrQ2lwaGVyLCBuID0gci5hbGdvLCBoID0gWzU3LCA0OSwgNDEsIDMzLCAyNSwgMTcsIDksIDEsIDU4LCA1MCwgNDIsIDM0LCAyNiwgMTgsIDEwLCAyLCA1OSwgNTEsIDQzLCAzNSwgMjcsIDE5LCAxMSwgMywgNjAsIDUyLCA0NCwgMzYsIDYzLCA1NSwgNDcsIDM5LCAzMSwgMjMsIDE1LCA3LCA2MiwgNTQsIDQ2LCAzOCwgMzAsIDIyLCAxNCwgNiwgNjEsIDUzLCA0NSwgMzcsIDI5LCAyMSwgMTMsIDUsIDI4LCAyMCwgMTIsIDRdLCB1ID0gW1xuICAgIDE0LFxuICAgIDE3LFxuICAgIDExLFxuICAgIDI0LFxuICAgIDEsXG4gICAgNSxcbiAgICAzLFxuICAgIDI4LFxuICAgIDE1LFxuICAgIDYsXG4gICAgMjEsXG4gICAgMTAsXG4gICAgMjMsXG4gICAgMTksXG4gICAgMTIsXG4gICAgNCxcbiAgICAyNixcbiAgICA4LFxuICAgIDE2LFxuICAgIDcsXG4gICAgMjcsXG4gICAgMjAsXG4gICAgMTMsXG4gICAgMixcbiAgICA0MSxcbiAgICA1MixcbiAgICAzMSxcbiAgICAzNyxcbiAgICA0NyxcbiAgICA1NSxcbiAgICAzMCxcbiAgICA0MCxcbiAgICA1MSxcbiAgICA0NSxcbiAgICAzMyxcbiAgICA0OCxcbiAgICA0NCxcbiAgICA0OSxcbiAgICAzOSxcbiAgICA1NixcbiAgICAzNCxcbiAgICA1MyxcbiAgICA0NixcbiAgICA0MixcbiAgICA1MCxcbiAgICAzNixcbiAgICAyOSxcbiAgICAzMlxuICBdLCBwID0gWzEsIDIsIDQsIDYsIDgsIDEwLCAxMiwgMTQsIDE1LCAxNywgMTksIDIxLCAyMywgMjUsIDI3LCAyOF0sIGMgPSBbe1xuICAgIDA6IDg0MjE4ODgsXG4gICAgMjY4NDM1NDU2OiAzMjc2OCxcbiAgICA1MzY4NzA5MTI6IDg0MjEzNzgsXG4gICAgODA1MzA2MzY4OiAyLFxuICAgIDEwNzM3NDE4MjQ6IDUxMixcbiAgICAxMzQyMTc3MjgwOiA4NDIxODkwLFxuICAgIDE2MTA2MTI3MzY6IDgzODkxMjIsXG4gICAgMTg3OTA0ODE5MjogODM4ODYwOCxcbiAgICAyMTQ3NDgzNjQ4OiA1MTQsXG4gICAgMjQxNTkxOTEwNDogODM4OTEyMCxcbiAgICAyNjg0MzU0NTYwOiAzMzI4MCxcbiAgICAyOTUyNzkwMDE2OiA4NDIxMzc2LFxuICAgIDMyMjEyMjU0NzI6IDMyNzcwLFxuICAgIDM0ODk2NjA5Mjg6IDgzODg2MTAsXG4gICAgMzc1ODA5NjM4NDogMCxcbiAgICA0MDI2NTMxODQwOiAzMzI4MixcbiAgICAxMzQyMTc3Mjg6IDAsXG4gICAgNDAyNjUzMTg0OiA4NDIxODkwLFxuICAgIDY3MTA4ODY0MDogMzMyODIsXG4gICAgOTM5NTI0MDk2OiAzMjc2OCxcbiAgICAxMjA3OTU5NTUyOiA4NDIxODg4LFxuICAgIDE0NzYzOTUwMDg6IDUxMixcbiAgICAxNzQ0ODMwNDY0OiA4NDIxMzc4LFxuICAgIDIwMTMyNjU5MjA6IDIsXG4gICAgMjI4MTcwMTM3NjogODM4OTEyMCxcbiAgICAyNTUwMTM2ODMyOiAzMzI4MCxcbiAgICAyODE4NTcyMjg4OiA4NDIxMzc2LFxuICAgIDMwODcwMDc3NDQ6IDgzODkxMjIsXG4gICAgMzM1NTQ0MzIwMDogODM4ODYxMCxcbiAgICAzNjIzODc4NjU2OiAzMjc3MCxcbiAgICAzODkyMzE0MTEyOiA1MTQsXG4gICAgNDE2MDc0OTU2ODogODM4ODYwOCxcbiAgICAxOiAzMjc2OCxcbiAgICAyNjg0MzU0NTc6IDIsXG4gICAgNTM2ODcwOTEzOiA4NDIxODg4LFxuICAgIDgwNTMwNjM2OTogODM4ODYwOCxcbiAgICAxMDczNzQxODI1OiA4NDIxMzc4LFxuICAgIDEzNDIxNzcyODE6IDMzMjgwLFxuICAgIDE2MTA2MTI3Mzc6IDUxMixcbiAgICAxODc5MDQ4MTkzOiA4Mzg5MTIyLFxuICAgIDIxNDc0ODM2NDk6IDg0MjE4OTAsXG4gICAgMjQxNTkxOTEwNTogODQyMTM3NixcbiAgICAyNjg0MzU0NTYxOiA4Mzg4NjEwLFxuICAgIDI5NTI3OTAwMTc6IDMzMjgyLFxuICAgIDMyMjEyMjU0NzM6IDUxNCxcbiAgICAzNDg5NjYwOTI5OiA4Mzg5MTIwLFxuICAgIDM3NTgwOTYzODU6IDMyNzcwLFxuICAgIDQwMjY1MzE4NDE6IDAsXG4gICAgMTM0MjE3NzI5OiA4NDIxODkwLFxuICAgIDQwMjY1MzE4NTogODQyMTM3NixcbiAgICA2NzEwODg2NDE6IDgzODg2MDgsXG4gICAgOTM5NTI0MDk3OiA1MTIsXG4gICAgMTIwNzk1OTU1MzogMzI3NjgsXG4gICAgMTQ3NjM5NTAwOTogODM4ODYxMCxcbiAgICAxNzQ0ODMwNDY1OiAyLFxuICAgIDIwMTMyNjU5MjE6IDMzMjgyLFxuICAgIDIyODE3MDEzNzc6IDMyNzcwLFxuICAgIDI1NTAxMzY4MzM6IDgzODkxMjIsXG4gICAgMjgxODU3MjI4OTogNTE0LFxuICAgIDMwODcwMDc3NDU6IDg0MjE4ODgsXG4gICAgMzM1NTQ0MzIwMTogODM4OTEyMCxcbiAgICAzNjIzODc4NjU3OiAwLFxuICAgIDM4OTIzMTQxMTM6IDMzMjgwLFxuICAgIDQxNjA3NDk1Njk6IDg0MjEzNzhcbiAgfSwge1xuICAgIDA6IDEwNzQyODI1MTIsXG4gICAgMTY3NzcyMTY6IDE2Mzg0LFxuICAgIDMzNTU0NDMyOiA1MjQyODgsXG4gICAgNTAzMzE2NDg6IDEwNzQyNjYxMjgsXG4gICAgNjcxMDg4NjQ6IDEwNzM3NDE4NDAsXG4gICAgODM4ODYwODA6IDEwNzQyODI0OTYsXG4gICAgMTAwNjYzMjk2OiAxMDczNzU4MjA4LFxuICAgIDExNzQ0MDUxMjogMTYsXG4gICAgMTM0MjE3NzI4OiA1NDA2NzIsXG4gICAgMTUwOTk0OTQ0OiAxMDczNzU4MjI0LFxuICAgIDE2Nzc3MjE2MDogMTA3Mzc0MTgyNCxcbiAgICAxODQ1NDkzNzY6IDU0MDY4OCxcbiAgICAyMDEzMjY1OTI6IDUyNDMwNCxcbiAgICAyMTgxMDM4MDg6IDAsXG4gICAgMjM0ODgxMDI0OiAxNjQwMCxcbiAgICAyNTE2NTgyNDA6IDEwNzQyNjYxMTIsXG4gICAgODM4ODYwODogMTA3Mzc1ODIwOCxcbiAgICAyNTE2NTgyNDogNTQwNjg4LFxuICAgIDQxOTQzMDQwOiAxNixcbiAgICA1ODcyMDI1NjogMTA3Mzc1ODIyNCxcbiAgICA3NTQ5NzQ3MjogMTA3NDI4MjUxMixcbiAgICA5MjI3NDY4ODogMTA3Mzc0MTgyNCxcbiAgICAxMDkwNTE5MDQ6IDUyNDI4OCxcbiAgICAxMjU4MjkxMjA6IDEwNzQyNjYxMjgsXG4gICAgMTQyNjA2MzM2OiA1MjQzMDQsXG4gICAgMTU5MzgzNTUyOiAwLFxuICAgIDE3NjE2MDc2ODogMTYzODQsXG4gICAgMTkyOTM3OTg0OiAxMDc0MjY2MTEyLFxuICAgIDIwOTcxNTIwMDogMTA3Mzc0MTg0MCxcbiAgICAyMjY0OTI0MTY6IDU0MDY3MixcbiAgICAyNDMyNjk2MzI6IDEwNzQyODI0OTYsXG4gICAgMjYwMDQ2ODQ4OiAxNjQwMCxcbiAgICAyNjg0MzU0NTY6IDAsXG4gICAgMjg1MjEyNjcyOiAxMDc0MjY2MTI4LFxuICAgIDMwMTk4OTg4ODogMTA3Mzc1ODIyNCxcbiAgICAzMTg3NjcxMDQ6IDEwNzQyODI0OTYsXG4gICAgMzM1NTQ0MzIwOiAxMDc0MjY2MTEyLFxuICAgIDM1MjMyMTUzNjogMTYsXG4gICAgMzY5MDk4NzUyOiA1NDA2ODgsXG4gICAgMzg1ODc1OTY4OiAxNjM4NCxcbiAgICA0MDI2NTMxODQ6IDE2NDAwLFxuICAgIDQxOTQzMDQwMDogNTI0Mjg4LFxuICAgIDQzNjIwNzYxNjogNTI0MzA0LFxuICAgIDQ1Mjk4NDgzMjogMTA3Mzc0MTg0MCxcbiAgICA0Njk3NjIwNDg6IDU0MDY3MixcbiAgICA0ODY1MzkyNjQ6IDEwNzM3NTgyMDgsXG4gICAgNTAzMzE2NDgwOiAxMDczNzQxODI0LFxuICAgIDUyMDA5MzY5NjogMTA3NDI4MjUxMixcbiAgICAyNzY4MjQwNjQ6IDU0MDY4OCxcbiAgICAyOTM2MDEyODA6IDUyNDI4OCxcbiAgICAzMTAzNzg0OTY6IDEwNzQyNjYxMTIsXG4gICAgMzI3MTU1NzEyOiAxNjM4NCxcbiAgICAzNDM5MzI5Mjg6IDEwNzM3NTgyMDgsXG4gICAgMzYwNzEwMTQ0OiAxMDc0MjgyNTEyLFxuICAgIDM3NzQ4NzM2MDogMTYsXG4gICAgMzk0MjY0NTc2OiAxMDczNzQxODI0LFxuICAgIDQxMTA0MTc5MjogMTA3NDI4MjQ5NixcbiAgICA0Mjc4MTkwMDg6IDEwNzM3NDE4NDAsXG4gICAgNDQ0NTk2MjI0OiAxMDczNzU4MjI0LFxuICAgIDQ2MTM3MzQ0MDogNTI0MzA0LFxuICAgIDQ3ODE1MDY1NjogMCxcbiAgICA0OTQ5Mjc4NzI6IDE2NDAwLFxuICAgIDUxMTcwNTA4ODogMTA3NDI2NjEyOCxcbiAgICA1Mjg0ODIzMDQ6IDU0MDY3MlxuICB9LCB7XG4gICAgMDogMjYwLFxuICAgIDEwNDg1NzY6IDAsXG4gICAgMjA5NzE1MjogNjcxMDkxMjAsXG4gICAgMzE0NTcyODogNjU3OTYsXG4gICAgNDE5NDMwNDogNjU1NDAsXG4gICAgNTI0Mjg4MDogNjcxMDg4NjgsXG4gICAgNjI5MTQ1NjogNjcxNzQ2NjAsXG4gICAgNzM0MDAzMjogNjcxNzQ0MDAsXG4gICAgODM4ODYwODogNjcxMDg4NjQsXG4gICAgOTQzNzE4NDogNjcxNzQ2NTYsXG4gICAgMTA0ODU3NjA6IDY1NzkyLFxuICAgIDExNTM0MzM2OiA2NzE3NDQwNCxcbiAgICAxMjU4MjkxMjogNjcxMDkxMjQsXG4gICAgMTM2MzE0ODg6IDY1NTM2LFxuICAgIDE0NjgwMDY0OiA0LFxuICAgIDE1NzI4NjQwOiAyNTYsXG4gICAgNTI0Mjg4OiA2NzE3NDY1NixcbiAgICAxNTcyODY0OiA2NzE3NDQwNCxcbiAgICAyNjIxNDQwOiAwLFxuICAgIDM2NzAwMTY6IDY3MTA5MTIwLFxuICAgIDQ3MTg1OTI6IDY3MTA4ODY4LFxuICAgIDU3NjcxNjg6IDY1NTM2LFxuICAgIDY4MTU3NDQ6IDY1NTQwLFxuICAgIDc4NjQzMjA6IDI2MCxcbiAgICA4OTEyODk2OiA0LFxuICAgIDk5NjE0NzI6IDI1NixcbiAgICAxMTAxMDA0ODogNjcxNzQ0MDAsXG4gICAgMTIwNTg2MjQ6IDY1Nzk2LFxuICAgIDEzMTA3MjAwOiA2NTc5MixcbiAgICAxNDE1NTc3NjogNjcxMDkxMjQsXG4gICAgMTUyMDQzNTI6IDY3MTc0NjYwLFxuICAgIDE2MjUyOTI4OiA2NzEwODg2NCxcbiAgICAxNjc3NzIxNjogNjcxNzQ2NTYsXG4gICAgMTc4MjU3OTI6IDY1NTQwLFxuICAgIDE4ODc0MzY4OiA2NTUzNixcbiAgICAxOTkyMjk0NDogNjcxMDkxMjAsXG4gICAgMjA5NzE1MjA6IDI1NixcbiAgICAyMjAyMDA5NjogNjcxNzQ2NjAsXG4gICAgMjMwNjg2NzI6IDY3MTA4ODY4LFxuICAgIDI0MTE3MjQ4OiAwLFxuICAgIDI1MTY1ODI0OiA2NzEwOTEyNCxcbiAgICAyNjIxNDQwMDogNjcxMDg4NjQsXG4gICAgMjcyNjI5NzY6IDQsXG4gICAgMjgzMTE1NTI6IDY1NzkyLFxuICAgIDI5MzYwMTI4OiA2NzE3NDQwMCxcbiAgICAzMDQwODcwNDogMjYwLFxuICAgIDMxNDU3MjgwOiA2NTc5NixcbiAgICAzMjUwNTg1NjogNjcxNzQ0MDQsXG4gICAgMTczMDE1MDQ6IDY3MTA4ODY0LFxuICAgIDE4MzUwMDgwOiAyNjAsXG4gICAgMTkzOTg2NTY6IDY3MTc0NjU2LFxuICAgIDIwNDQ3MjMyOiAwLFxuICAgIDIxNDk1ODA4OiA2NTU0MCxcbiAgICAyMjU0NDM4NDogNjcxMDkxMjAsXG4gICAgMjM1OTI5NjA6IDI1NixcbiAgICAyNDY0MTUzNjogNjcxNzQ0MDQsXG4gICAgMjU2OTAxMTI6IDY1NTM2LFxuICAgIDI2NzM4Njg4OiA2NzE3NDY2MCxcbiAgICAyNzc4NzI2NDogNjU3OTYsXG4gICAgMjg4MzU4NDA6IDY3MTA4ODY4LFxuICAgIDI5ODg0NDE2OiA2NzEwOTEyNCxcbiAgICAzMDkzMjk5MjogNjcxNzQ0MDAsXG4gICAgMzE5ODE1Njg6IDQsXG4gICAgMzMwMzAxNDQ6IDY1NzkyXG4gIH0sIHtcbiAgICAwOiAyMTUxNjgyMDQ4LFxuICAgIDY1NTM2OiAyMTQ3NDg3ODA4LFxuICAgIDEzMTA3MjogNDE5ODQ2NCxcbiAgICAxOTY2MDg6IDIxNTE2Nzc5NTIsXG4gICAgMjYyMTQ0OiAwLFxuICAgIDMyNzY4MDogNDE5ODQwMCxcbiAgICAzOTMyMTY6IDIxNDc0ODM3MTIsXG4gICAgNDU4NzUyOiA0MTk0MzY4LFxuICAgIDUyNDI4ODogMjE0NzQ4MzY0OCxcbiAgICA1ODk4MjQ6IDQxOTQzMDQsXG4gICAgNjU1MzYwOiA2NCxcbiAgICA3MjA4OTY6IDIxNDc0ODc3NDQsXG4gICAgNzg2NDMyOiAyMTUxNjc4MDE2LFxuICAgIDg1MTk2ODogNDE2MCxcbiAgICA5MTc1MDQ6IDQwOTYsXG4gICAgOTgzMDQwOiAyMTUxNjgyMTEyLFxuICAgIDMyNzY4OiAyMTQ3NDg3ODA4LFxuICAgIDk4MzA0OiA2NCxcbiAgICAxNjM4NDA6IDIxNTE2NzgwMTYsXG4gICAgMjI5Mzc2OiAyMTQ3NDg3NzQ0LFxuICAgIDI5NDkxMjogNDE5ODQwMCxcbiAgICAzNjA0NDg6IDIxNTE2ODIxMTIsXG4gICAgNDI1OTg0OiAwLFxuICAgIDQ5MTUyMDogMjE1MTY3Nzk1MixcbiAgICA1NTcwNTY6IDQwOTYsXG4gICAgNjIyNTkyOiAyMTUxNjgyMDQ4LFxuICAgIDY4ODEyODogNDE5NDMwNCxcbiAgICA3NTM2NjQ6IDQxNjAsXG4gICAgODE5MjAwOiAyMTQ3NDgzNjQ4LFxuICAgIDg4NDczNjogNDE5NDM2OCxcbiAgICA5NTAyNzI6IDQxOTg0NjQsXG4gICAgMTAxNTgwODogMjE0NzQ4MzcxMixcbiAgICAxMDQ4NTc2OiA0MTk0MzY4LFxuICAgIDExMTQxMTI6IDQxOTg0MDAsXG4gICAgMTE3OTY0ODogMjE0NzQ4MzcxMixcbiAgICAxMjQ1MTg0OiAwLFxuICAgIDEzMTA3MjA6IDQxNjAsXG4gICAgMTM3NjI1NjogMjE1MTY3ODAxNixcbiAgICAxNDQxNzkyOiAyMTUxNjgyMDQ4LFxuICAgIDE1MDczMjg6IDIxNDc0ODc4MDgsXG4gICAgMTU3Mjg2NDogMjE1MTY4MjExMixcbiAgICAxNjM4NDAwOiAyMTQ3NDgzNjQ4LFxuICAgIDE3MDM5MzY6IDIxNTE2Nzc5NTIsXG4gICAgMTc2OTQ3MjogNDE5ODQ2NCxcbiAgICAxODM1MDA4OiAyMTQ3NDg3NzQ0LFxuICAgIDE5MDA1NDQ6IDQxOTQzMDQsXG4gICAgMTk2NjA4MDogNjQsXG4gICAgMjAzMTYxNjogNDA5NixcbiAgICAxMDgxMzQ0OiAyMTUxNjc3OTUyLFxuICAgIDExNDY4ODA6IDIxNTE2ODIxMTIsXG4gICAgMTIxMjQxNjogMCxcbiAgICAxMjc3OTUyOiA0MTk4NDAwLFxuICAgIDEzNDM0ODg6IDQxOTQzNjgsXG4gICAgMTQwOTAyNDogMjE0NzQ4MzY0OCxcbiAgICAxNDc0NTYwOiAyMTQ3NDg3ODA4LFxuICAgIDE1NDAwOTY6IDY0LFxuICAgIDE2MDU2MzI6IDIxNDc0ODM3MTIsXG4gICAgMTY3MTE2ODogNDA5NixcbiAgICAxNzM2NzA0OiAyMTQ3NDg3NzQ0LFxuICAgIDE4MDIyNDA6IDIxNTE2NzgwMTYsXG4gICAgMTg2Nzc3NjogNDE2MCxcbiAgICAxOTMzMzEyOiAyMTUxNjgyMDQ4LFxuICAgIDE5OTg4NDg6IDQxOTQzMDQsXG4gICAgMjA2NDM4NDogNDE5ODQ2NFxuICB9LCB7XG4gICAgMDogMTI4LFxuICAgIDQwOTY6IDE3MDM5MzYwLFxuICAgIDgxOTI6IDI2MjE0NCxcbiAgICAxMjI4ODogNTM2ODcwOTEyLFxuICAgIDE2Mzg0OiA1MzcxMzMxODQsXG4gICAgMjA0ODA6IDE2Nzc3MzQ0LFxuICAgIDI0NTc2OiA1NTM2NDgyNTYsXG4gICAgMjg2NzI6IDI2MjI3MixcbiAgICAzMjc2ODogMTY3NzcyMTYsXG4gICAgMzY4NjQ6IDUzNzEzMzA1NixcbiAgICA0MDk2MDogNTM2ODcxMDQwLFxuICAgIDQ1MDU2OiA1NTM5MTA0MDAsXG4gICAgNDkxNTI6IDU1MzkxMDI3MixcbiAgICA1MzI0ODogMCxcbiAgICA1NzM0NDogMTcwMzk0ODgsXG4gICAgNjE0NDA6IDU1MzY0ODEyOCxcbiAgICAyMDQ4OiAxNzAzOTQ4OCxcbiAgICA2MTQ0OiA1NTM2NDgyNTYsXG4gICAgMTAyNDA6IDEyOCxcbiAgICAxNDMzNjogMTcwMzkzNjAsXG4gICAgMTg0MzI6IDI2MjE0NCxcbiAgICAyMjUyODogNTM3MTMzMTg0LFxuICAgIDI2NjI0OiA1NTM5MTAyNzIsXG4gICAgMzA3MjA6IDUzNjg3MDkxMixcbiAgICAzNDgxNjogNTM3MTMzMDU2LFxuICAgIDM4OTEyOiAwLFxuICAgIDQzMDA4OiA1NTM5MTA0MDAsXG4gICAgNDcxMDQ6IDE2Nzc3MzQ0LFxuICAgIDUxMjAwOiA1MzY4NzEwNDAsXG4gICAgNTUyOTY6IDU1MzY0ODEyOCxcbiAgICA1OTM5MjogMTY3NzcyMTYsXG4gICAgNjM0ODg6IDI2MjI3MixcbiAgICA2NTUzNjogMjYyMTQ0LFxuICAgIDY5NjMyOiAxMjgsXG4gICAgNzM3Mjg6IDUzNjg3MDkxMixcbiAgICA3NzgyNDogNTUzNjQ4MjU2LFxuICAgIDgxOTIwOiAxNjc3NzM0NCxcbiAgICA4NjAxNjogNTUzOTEwMjcyLFxuICAgIDkwMTEyOiA1MzcxMzMxODQsXG4gICAgOTQyMDg6IDE2Nzc3MjE2LFxuICAgIDk4MzA0OiA1NTM5MTA0MDAsXG4gICAgMTAyNDAwOiA1NTM2NDgxMjgsXG4gICAgMTA2NDk2OiAxNzAzOTM2MCxcbiAgICAxMTA1OTI6IDUzNzEzMzA1NixcbiAgICAxMTQ2ODg6IDI2MjI3MixcbiAgICAxMTg3ODQ6IDUzNjg3MTA0MCxcbiAgICAxMjI4ODA6IDAsXG4gICAgMTI2OTc2OiAxNzAzOTQ4OCxcbiAgICA2NzU4NDogNTUzNjQ4MjU2LFxuICAgIDcxNjgwOiAxNjc3NzIxNixcbiAgICA3NTc3NjogMTcwMzkzNjAsXG4gICAgNzk4NzI6IDUzNzEzMzE4NCxcbiAgICA4Mzk2ODogNTM2ODcwOTEyLFxuICAgIDg4MDY0OiAxNzAzOTQ4OCxcbiAgICA5MjE2MDogMTI4LFxuICAgIDk2MjU2OiA1NTM5MTAyNzIsXG4gICAgMTAwMzUyOiAyNjIyNzIsXG4gICAgMTA0NDQ4OiA1NTM5MTA0MDAsXG4gICAgMTA4NTQ0OiAwLFxuICAgIDExMjY0MDogNTUzNjQ4MTI4LFxuICAgIDExNjczNjogMTY3NzczNDQsXG4gICAgMTIwODMyOiAyNjIxNDQsXG4gICAgMTI0OTI4OiA1MzcxMzMwNTYsXG4gICAgMTI5MDI0OiA1MzY4NzEwNDBcbiAgfSwge1xuICAgIDA6IDI2ODQzNTQ2NCxcbiAgICAyNTY6IDgxOTIsXG4gICAgNTEyOiAyNzA1MzI2MDgsXG4gICAgNzY4OiAyNzA1NDA4MDgsXG4gICAgMTAyNDogMjY4NDQzNjQ4LFxuICAgIDEyODA6IDIwOTcxNTIsXG4gICAgMTUzNjogMjA5NzE2MCxcbiAgICAxNzkyOiAyNjg0MzU0NTYsXG4gICAgMjA0ODogMCxcbiAgICAyMzA0OiAyNjg0NDM2NTYsXG4gICAgMjU2MDogMjEwNTM0NCxcbiAgICAyODE2OiA4LFxuICAgIDMwNzI6IDI3MDUzMjYxNixcbiAgICAzMzI4OiAyMTA1MzUyLFxuICAgIDM1ODQ6IDgyMDAsXG4gICAgMzg0MDogMjcwNTQwODAwLFxuICAgIDEyODogMjcwNTMyNjA4LFxuICAgIDM4NDogMjcwNTQwODA4LFxuICAgIDY0MDogOCxcbiAgICA4OTY6IDIwOTcxNTIsXG4gICAgMTE1MjogMjEwNTM1MixcbiAgICAxNDA4OiAyNjg0MzU0NjQsXG4gICAgMTY2NDogMjY4NDQzNjQ4LFxuICAgIDE5MjA6IDgyMDAsXG4gICAgMjE3NjogMjA5NzE2MCxcbiAgICAyNDMyOiA4MTkyLFxuICAgIDI2ODg6IDI2ODQ0MzY1NixcbiAgICAyOTQ0OiAyNzA1MzI2MTYsXG4gICAgMzIwMDogMCxcbiAgICAzNDU2OiAyNzA1NDA4MDAsXG4gICAgMzcxMjogMjEwNTM0NCxcbiAgICAzOTY4OiAyNjg0MzU0NTYsXG4gICAgNDA5NjogMjY4NDQzNjQ4LFxuICAgIDQzNTI6IDI3MDUzMjYxNixcbiAgICA0NjA4OiAyNzA1NDA4MDgsXG4gICAgNDg2NDogODIwMCxcbiAgICA1MTIwOiAyMDk3MTUyLFxuICAgIDUzNzY6IDI2ODQzNTQ1NixcbiAgICA1NjMyOiAyNjg0MzU0NjQsXG4gICAgNTg4ODogMjEwNTM0NCxcbiAgICA2MTQ0OiAyMTA1MzUyLFxuICAgIDY0MDA6IDAsXG4gICAgNjY1NjogOCxcbiAgICA2OTEyOiAyNzA1MzI2MDgsXG4gICAgNzE2ODogODE5MixcbiAgICA3NDI0OiAyNjg0NDM2NTYsXG4gICAgNzY4MDogMjcwNTQwODAwLFxuICAgIDc5MzY6IDIwOTcxNjAsXG4gICAgNDIyNDogOCxcbiAgICA0NDgwOiAyMTA1MzQ0LFxuICAgIDQ3MzY6IDIwOTcxNTIsXG4gICAgNDk5MjogMjY4NDM1NDY0LFxuICAgIDUyNDg6IDI2ODQ0MzY0OCxcbiAgICA1NTA0OiA4MjAwLFxuICAgIDU3NjA6IDI3MDU0MDgwOCxcbiAgICA2MDE2OiAyNzA1MzI2MDgsXG4gICAgNjI3MjogMjcwNTQwODAwLFxuICAgIDY1Mjg6IDI3MDUzMjYxNixcbiAgICA2Nzg0OiA4MTkyLFxuICAgIDcwNDA6IDIxMDUzNTIsXG4gICAgNzI5NjogMjA5NzE2MCxcbiAgICA3NTUyOiAwLFxuICAgIDc4MDg6IDI2ODQzNTQ1NixcbiAgICA4MDY0OiAyNjg0NDM2NTZcbiAgfSwge1xuICAgIDA6IDEwNDg1NzYsXG4gICAgMTY6IDMzNTU1NDU3LFxuICAgIDMyOiAxMDI0LFxuICAgIDQ4OiAxMDQ5NjAxLFxuICAgIDY0OiAzNDYwNDAzMyxcbiAgICA4MDogMCxcbiAgICA5NjogMSxcbiAgICAxMTI6IDM0NjAzMDA5LFxuICAgIDEyODogMzM1NTU0NTYsXG4gICAgMTQ0OiAxMDQ4NTc3LFxuICAgIDE2MDogMzM1NTQ0MzMsXG4gICAgMTc2OiAzNDYwNDAzMixcbiAgICAxOTI6IDM0NjAzMDA4LFxuICAgIDIwODogMTAyNSxcbiAgICAyMjQ6IDEwNDk2MDAsXG4gICAgMjQwOiAzMzU1NDQzMixcbiAgICA4OiAzNDYwMzAwOSxcbiAgICAyNDogMCxcbiAgICA0MDogMzM1NTU0NTcsXG4gICAgNTY6IDM0NjA0MDMyLFxuICAgIDcyOiAxMDQ4NTc2LFxuICAgIDg4OiAzMzU1NDQzMyxcbiAgICAxMDQ6IDMzNTU0NDMyLFxuICAgIDEyMDogMTAyNSxcbiAgICAxMzY6IDEwNDk2MDEsXG4gICAgMTUyOiAzMzU1NTQ1NixcbiAgICAxNjg6IDM0NjAzMDA4LFxuICAgIDE4NDogMTA0ODU3NyxcbiAgICAyMDA6IDEwMjQsXG4gICAgMjE2OiAzNDYwNDAzMyxcbiAgICAyMzI6IDEsXG4gICAgMjQ4OiAxMDQ5NjAwLFxuICAgIDI1NjogMzM1NTQ0MzIsXG4gICAgMjcyOiAxMDQ4NTc2LFxuICAgIDI4ODogMzM1NTU0NTcsXG4gICAgMzA0OiAzNDYwMzAwOSxcbiAgICAzMjA6IDEwNDg1NzcsXG4gICAgMzM2OiAzMzU1NTQ1NixcbiAgICAzNTI6IDM0NjA0MDMyLFxuICAgIDM2ODogMTA0OTYwMSxcbiAgICAzODQ6IDEwMjUsXG4gICAgNDAwOiAzNDYwNDAzMyxcbiAgICA0MTY6IDEwNDk2MDAsXG4gICAgNDMyOiAxLFxuICAgIDQ0ODogMCxcbiAgICA0NjQ6IDM0NjAzMDA4LFxuICAgIDQ4MDogMzM1NTQ0MzMsXG4gICAgNDk2OiAxMDI0LFxuICAgIDI2NDogMTA0OTYwMCxcbiAgICAyODA6IDMzNTU1NDU3LFxuICAgIDI5NjogMzQ2MDMwMDksXG4gICAgMzEyOiAxLFxuICAgIDMyODogMzM1NTQ0MzIsXG4gICAgMzQ0OiAxMDQ4NTc2LFxuICAgIDM2MDogMTAyNSxcbiAgICAzNzY6IDM0NjA0MDMyLFxuICAgIDM5MjogMzM1NTQ0MzMsXG4gICAgNDA4OiAzNDYwMzAwOCxcbiAgICA0MjQ6IDAsXG4gICAgNDQwOiAzNDYwNDAzMyxcbiAgICA0NTY6IDEwNDk2MDEsXG4gICAgNDcyOiAxMDI0LFxuICAgIDQ4ODogMzM1NTU0NTYsXG4gICAgNTA0OiAxMDQ4NTc3XG4gIH0sIHtcbiAgICAwOiAxMzQyMTk4MDgsXG4gICAgMTogMTMxMDcyLFxuICAgIDI6IDEzNDIxNzcyOCxcbiAgICAzOiAzMixcbiAgICA0OiAxMzExMDQsXG4gICAgNTogMTM0MzUwODgwLFxuICAgIDY6IDEzNDM1MDg0OCxcbiAgICA3OiAyMDQ4LFxuICAgIDg6IDEzNDM0ODgwMCxcbiAgICA5OiAxMzQyMTk3NzYsXG4gICAgMTA6IDEzMzEyMCxcbiAgICAxMTogMTM0MzQ4ODMyLFxuICAgIDEyOiAyMDgwLFxuICAgIDEzOiAwLFxuICAgIDE0OiAxMzQyMTc3NjAsXG4gICAgMTU6IDEzMzE1MixcbiAgICAyMTQ3NDgzNjQ4OiAyMDQ4LFxuICAgIDIxNDc0ODM2NDk6IDEzNDM1MDg4MCxcbiAgICAyMTQ3NDgzNjUwOiAxMzQyMTk4MDgsXG4gICAgMjE0NzQ4MzY1MTogMTM0MjE3NzI4LFxuICAgIDIxNDc0ODM2NTI6IDEzNDM0ODgwMCxcbiAgICAyMTQ3NDgzNjUzOiAxMzMxMjAsXG4gICAgMjE0NzQ4MzY1NDogMTMzMTUyLFxuICAgIDIxNDc0ODM2NTU6IDMyLFxuICAgIDIxNDc0ODM2NTY6IDEzNDIxNzc2MCxcbiAgICAyMTQ3NDgzNjU3OiAyMDgwLFxuICAgIDIxNDc0ODM2NTg6IDEzMTEwNCxcbiAgICAyMTQ3NDgzNjU5OiAxMzQzNTA4NDgsXG4gICAgMjE0NzQ4MzY2MDogMCxcbiAgICAyMTQ3NDgzNjYxOiAxMzQzNDg4MzIsXG4gICAgMjE0NzQ4MzY2MjogMTM0MjE5Nzc2LFxuICAgIDIxNDc0ODM2NjM6IDEzMTA3MixcbiAgICAxNjogMTMzMTUyLFxuICAgIDE3OiAxMzQzNTA4NDgsXG4gICAgMTg6IDMyLFxuICAgIDE5OiAyMDQ4LFxuICAgIDIwOiAxMzQyMTk3NzYsXG4gICAgMjE6IDEzNDIxNzc2MCxcbiAgICAyMjogMTM0MzQ4ODMyLFxuICAgIDIzOiAxMzEwNzIsXG4gICAgMjQ6IDAsXG4gICAgMjU6IDEzMTEwNCxcbiAgICAyNjogMTM0MzQ4ODAwLFxuICAgIDI3OiAxMzQyMTk4MDgsXG4gICAgMjg6IDEzNDM1MDg4MCxcbiAgICAyOTogMTMzMTIwLFxuICAgIDMwOiAyMDgwLFxuICAgIDMxOiAxMzQyMTc3MjgsXG4gICAgMjE0NzQ4MzY2NDogMTMxMDcyLFxuICAgIDIxNDc0ODM2NjU6IDIwNDgsXG4gICAgMjE0NzQ4MzY2NjogMTM0MzQ4ODMyLFxuICAgIDIxNDc0ODM2Njc6IDEzMzE1MixcbiAgICAyMTQ3NDgzNjY4OiAzMixcbiAgICAyMTQ3NDgzNjY5OiAxMzQzNDg4MDAsXG4gICAgMjE0NzQ4MzY3MDogMTM0MjE3NzI4LFxuICAgIDIxNDc0ODM2NzE6IDEzNDIxOTgwOCxcbiAgICAyMTQ3NDgzNjcyOiAxMzQzNTA4ODAsXG4gICAgMjE0NzQ4MzY3MzogMTM0MjE3NzYwLFxuICAgIDIxNDc0ODM2NzQ6IDEzNDIxOTc3NixcbiAgICAyMTQ3NDgzNjc1OiAwLFxuICAgIDIxNDc0ODM2NzY6IDEzMzEyMCxcbiAgICAyMTQ3NDgzNjc3OiAyMDgwLFxuICAgIDIxNDc0ODM2Nzg6IDEzMTEwNCxcbiAgICAyMTQ3NDgzNjc5OiAxMzQzNTA4NDhcbiAgfV0sIHkgPSBbNDE2MDc0OTU2OSwgNTI4NDgyMzA0LCAzMzAzMDE0NCwgMjA2NDM4NCwgMTI5MDI0LCA4MDY0LCA1MDQsIDIxNDc0ODM2NzldLCB2ID0gbi5ERVMgPSBzLmV4dGVuZCh7IF9kb1Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBvID0gdGhpcy5fa2V5LndvcmRzLCBsID0gW10sIGYgPSAwOyA1NiA+IGY7IGYrKykge1xuICAgICAgdmFyIGQgPSBoW2ZdIC0gMTtcbiAgICAgIGxbZl0gPSBvW2QgPj4+IDVdID4+PiAzMSAtIGQgJSAzMiAmIDE7XG4gICAgfVxuICAgIGZvciAobyA9IHRoaXMuX3N1YktleXMgPSBbXSwgZCA9IDA7IDE2ID4gZDsgZCsrKSB7XG4gICAgICBmb3IgKHZhciBnID0gb1tkXSA9IFtdLCBTID0gcFtkXSwgZiA9IDA7IDI0ID4gZjsgZisrKSBnW2YgLyA2IHwgMF0gfD0gbFsodVtmXSAtIDEgKyBTKSAlIDI4XSA8PCAzMSAtIGYgJSA2LCBnWzQgKyAoZiAvIDYgfCAwKV0gfD0gbFsyOCArICh1W2YgKyAyNF0gLSAxICsgUykgJSAyOF0gPDwgMzEgLSBmICUgNjtcbiAgICAgIGZvciAoZ1swXSA9IGdbMF0gPDwgMSB8IGdbMF0gPj4+IDMxLCBmID0gMTsgNyA+IGY7IGYrKykgZ1tmXSA+Pj49IDQgKiAoZiAtIDEpICsgMztcbiAgICAgIGdbN10gPSBnWzddIDw8IDUgfCBnWzddID4+PiAyNztcbiAgICB9XG4gICAgZm9yIChsID0gdGhpcy5faW52U3ViS2V5cyA9IFtdLCBmID0gMDsgMTYgPiBmOyBmKyspIGxbZl0gPSBvWzE1IC0gZl07XG4gIH0sIGVuY3J5cHRCbG9jazogZnVuY3Rpb24obywgbCkge1xuICAgIHRoaXMuX2RvQ3J5cHRCbG9jayhvLCBsLCB0aGlzLl9zdWJLZXlzKTtcbiAgfSwgZGVjcnlwdEJsb2NrOiBmdW5jdGlvbihvLCBsKSB7XG4gICAgdGhpcy5fZG9DcnlwdEJsb2NrKG8sIGwsIHRoaXMuX2ludlN1YktleXMpO1xuICB9LCBfZG9DcnlwdEJsb2NrOiBmdW5jdGlvbihvLCBsLCBmKSB7XG4gICAgdGhpcy5fbEJsb2NrID0gb1tsXSwgdGhpcy5fckJsb2NrID0gb1tsICsgMV0sIGUuY2FsbCh0aGlzLCA0LCAyNTI2NDUxMzUpLCBlLmNhbGwodGhpcywgMTYsIDY1NTM1KSwgdC5jYWxsKHRoaXMsIDIsIDg1ODk5MzQ1OSksIHQuY2FsbCh0aGlzLCA4LCAxNjcxMTkzNSksIGUuY2FsbCh0aGlzLCAxLCAxNDMxNjU1NzY1KTtcbiAgICBmb3IgKHZhciBkID0gMDsgMTYgPiBkOyBkKyspIHtcbiAgICAgIGZvciAodmFyIGcgPSBmW2RdLCBTID0gdGhpcy5fbEJsb2NrLCBiID0gdGhpcy5fckJsb2NrLCBEID0gMCwgQSA9IDA7IDggPiBBOyBBKyspIEQgfD0gY1tBXVsoKGIgXiBnW0FdKSAmIHlbQV0pID4+PiAwXTtcbiAgICAgIHRoaXMuX2xCbG9jayA9IGIsIHRoaXMuX3JCbG9jayA9IFMgXiBEO1xuICAgIH1cbiAgICBmID0gdGhpcy5fbEJsb2NrLCB0aGlzLl9sQmxvY2sgPSB0aGlzLl9yQmxvY2ssIHRoaXMuX3JCbG9jayA9IGYsIGUuY2FsbCh0aGlzLCAxLCAxNDMxNjU1NzY1KSwgdC5jYWxsKHRoaXMsIDgsIDE2NzExOTM1KSwgdC5jYWxsKHRoaXMsIDIsIDg1ODk5MzQ1OSksIGUuY2FsbCh0aGlzLCAxNiwgNjU1MzUpLCBlLmNhbGwodGhpcywgNCwgMjUyNjQ1MTM1KSwgb1tsXSA9IHRoaXMuX2xCbG9jaywgb1tsICsgMV0gPSB0aGlzLl9yQmxvY2s7XG4gIH0sIGtleVNpemU6IDIsIGl2U2l6ZTogMiwgYmxvY2tTaXplOiAyIH0pO1xuICByLkRFUyA9IHMuX2NyZWF0ZUhlbHBlcih2KSwgbiA9IG4uVHJpcGxlREVTID0gcy5leHRlbmQoeyBfZG9SZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIG8gPSB0aGlzLl9rZXkud29yZHM7XG4gICAgdGhpcy5fZGVzMSA9IHYuY3JlYXRlRW5jcnlwdG9yKGkuY3JlYXRlKG8uc2xpY2UoMCwgMikpKSwgdGhpcy5fZGVzMiA9IHYuY3JlYXRlRW5jcnlwdG9yKGkuY3JlYXRlKG8uc2xpY2UoMiwgNCkpKSwgdGhpcy5fZGVzMyA9IHYuY3JlYXRlRW5jcnlwdG9yKGkuY3JlYXRlKG8uc2xpY2UoNCwgNikpKTtcbiAgfSwgZW5jcnlwdEJsb2NrOiBmdW5jdGlvbihvLCBsKSB7XG4gICAgdGhpcy5fZGVzMS5lbmNyeXB0QmxvY2sobywgbCksIHRoaXMuX2RlczIuZGVjcnlwdEJsb2NrKG8sIGwpLCB0aGlzLl9kZXMzLmVuY3J5cHRCbG9jayhvLCBsKTtcbiAgfSwgZGVjcnlwdEJsb2NrOiBmdW5jdGlvbihvLCBsKSB7XG4gICAgdGhpcy5fZGVzMy5kZWNyeXB0QmxvY2sobywgbCksIHRoaXMuX2RlczIuZW5jcnlwdEJsb2NrKG8sIGwpLCB0aGlzLl9kZXMxLmRlY3J5cHRCbG9jayhvLCBsKTtcbiAgfSwga2V5U2l6ZTogNiwgaXZTaXplOiAyLCBibG9ja1NpemU6IDIgfSksIHIuVHJpcGxlREVTID0gcy5fY3JlYXRlSGVscGVyKG4pO1xufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBLLCB0ID0gZS5saWIuV29yZEFycmF5O1xuICBlLmVuYy5CYXNlNjQgPSB7IHN0cmluZ2lmeTogZnVuY3Rpb24ocikge1xuICAgIHZhciBpID0gci53b3JkcywgcyA9IHIuc2lnQnl0ZXMsIG4gPSB0aGlzLl9tYXA7XG4gICAgci5jbGFtcCgpLCByID0gW107XG4gICAgZm9yICh2YXIgaCA9IDA7IGggPCBzOyBoICs9IDMpIGZvciAodmFyIHUgPSAoaVtoID4+PiAyXSA+Pj4gMjQgLSA4ICogKGggJSA0KSAmIDI1NSkgPDwgMTYgfCAoaVtoICsgMSA+Pj4gMl0gPj4+IDI0IC0gOCAqICgoaCArIDEpICUgNCkgJiAyNTUpIDw8IDggfCBpW2ggKyAyID4+PiAyXSA+Pj4gMjQgLSA4ICogKChoICsgMikgJSA0KSAmIDI1NSwgcCA9IDA7IDQgPiBwICYmIGggKyAwLjc1ICogcCA8IHM7IHArKykgci5wdXNoKG4uY2hhckF0KHUgPj4+IDYgKiAoMyAtIHApICYgNjMpKTtcbiAgICBpZiAoaSA9IG4uY2hhckF0KDY0KSkgZm9yICg7IHIubGVuZ3RoICUgNDsgKSByLnB1c2goaSk7XG4gICAgcmV0dXJuIHIuam9pbihcIlwiKTtcbiAgfSwgcGFyc2U6IGZ1bmN0aW9uKHIpIHtcbiAgICB2YXIgaSA9IHIubGVuZ3RoLCBzID0gdGhpcy5fbWFwLCBuID0gcy5jaGFyQXQoNjQpO1xuICAgIG4gJiYgKG4gPSByLmluZGV4T2YobiksIG4gIT0gLTEgJiYgKGkgPSBuKSk7XG4gICAgZm9yICh2YXIgbiA9IFtdLCBoID0gMCwgdSA9IDA7IHUgPCBpOyB1KyspIGlmICh1ICUgNCkge1xuICAgICAgdmFyIHAgPSBzLmluZGV4T2Yoci5jaGFyQXQodSAtIDEpKSA8PCAyICogKHUgJSA0KSwgYyA9IHMuaW5kZXhPZihyLmNoYXJBdCh1KSkgPj4+IDYgLSAyICogKHUgJSA0KTtcbiAgICAgIG5baCA+Pj4gMl0gfD0gKHAgfCBjKSA8PCAyNCAtIDggKiAoaCAlIDQpLCBoKys7XG4gICAgfVxuICAgIHJldHVybiB0LmNyZWF0ZShuLCBoKTtcbiAgfSwgX21hcDogXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiIH07XG59KSgpO1xuKGZ1bmN0aW9uKGUpIHtcbiAgZnVuY3Rpb24gdCh2LCBvLCBsLCBmLCBkLCBnLCBTKSB7XG4gICAgcmV0dXJuIHYgPSB2ICsgKG8gJiBsIHwgfm8gJiBmKSArIGQgKyBTLCAodiA8PCBnIHwgdiA+Pj4gMzIgLSBnKSArIG87XG4gIH1cbiAgZnVuY3Rpb24gcih2LCBvLCBsLCBmLCBkLCBnLCBTKSB7XG4gICAgcmV0dXJuIHYgPSB2ICsgKG8gJiBmIHwgbCAmIH5mKSArIGQgKyBTLCAodiA8PCBnIHwgdiA+Pj4gMzIgLSBnKSArIG87XG4gIH1cbiAgZnVuY3Rpb24gaSh2LCBvLCBsLCBmLCBkLCBnLCBTKSB7XG4gICAgcmV0dXJuIHYgPSB2ICsgKG8gXiBsIF4gZikgKyBkICsgUywgKHYgPDwgZyB8IHYgPj4+IDMyIC0gZykgKyBvO1xuICB9XG4gIGZ1bmN0aW9uIHModiwgbywgbCwgZiwgZCwgZywgUykge1xuICAgIHJldHVybiB2ID0gdiArIChsIF4gKG8gfCB+ZikpICsgZCArIFMsICh2IDw8IGcgfCB2ID4+PiAzMiAtIGcpICsgbztcbiAgfVxuICBmb3IgKHZhciBuID0gSywgcCA9IG4ubGliLCBoID0gcC5Xb3JkQXJyYXksIHUgPSBwLkhhc2hlciwgcCA9IG4uYWxnbywgYyA9IFtdLCB5ID0gMDsgNjQgPiB5OyB5KyspIGNbeV0gPSA0Mjk0OTY3Mjk2ICogZS5hYnMoZS5zaW4oeSArIDEpKSB8IDA7XG4gIHAgPSBwLk1ENSA9IHUuZXh0ZW5kKHtcbiAgICBfZG9SZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9oYXNoID0gbmV3IGguaW5pdChbMTczMjU4NDE5MywgNDAyMzIzMzQxNywgMjU2MjM4MzEwMiwgMjcxNzMzODc4XSk7XG4gICAgfSxcbiAgICBfZG9Qcm9jZXNzQmxvY2s6IGZ1bmN0aW9uKHYsIG8pIHtcbiAgICAgIGZvciAodmFyIGwgPSAwOyAxNiA+IGw7IGwrKykge1xuICAgICAgICB2YXIgZiA9IG8gKyBsLCBkID0gdltmXTtcbiAgICAgICAgdltmXSA9IChkIDw8IDggfCBkID4+PiAyNCkgJiAxNjcxMTkzNSB8IChkIDw8IDI0IHwgZCA+Pj4gOCkgJiA0Mjc4MjU1MzYwO1xuICAgICAgfVxuICAgICAgdmFyIGwgPSB0aGlzLl9oYXNoLndvcmRzLCBmID0gdltvICsgMF0sIGQgPSB2W28gKyAxXSwgZyA9IHZbbyArIDJdLCBTID0gdltvICsgM10sIGIgPSB2W28gKyA0XSwgRCA9IHZbbyArIDVdLCBBID0gdltvICsgNl0sIEkgPSB2W28gKyA3XSwgbSA9IHZbbyArIDhdLCBFID0gdltvICsgOV0sIHcgPSB2W28gKyAxMF0sIHggPSB2W28gKyAxMV0sIEYgPSB2W28gKyAxMl0sIFAgPSB2W28gKyAxM10sIFQgPSB2W28gKyAxNF0sIEggPSB2W28gKyAxNV0sIEMgPSBsWzBdLCBqID0gbFsxXSwgTyA9IGxbMl0sIEIgPSBsWzNdLCBDID0gdChDLCBqLCBPLCBCLCBmLCA3LCBjWzBdKSwgQiA9IHQoQiwgQywgaiwgTywgZCwgMTIsIGNbMV0pLCBPID0gdChPLCBCLCBDLCBqLCBnLCAxNywgY1syXSksIGogPSB0KGosIE8sIEIsIEMsIFMsIDIyLCBjWzNdKSwgQyA9IHQoQywgaiwgTywgQiwgYiwgNywgY1s0XSksIEIgPSB0KEIsIEMsIGosIE8sIEQsIDEyLCBjWzVdKSwgTyA9IHQoTywgQiwgQywgaiwgQSwgMTcsIGNbNl0pLCBqID0gdChqLCBPLCBCLCBDLCBJLCAyMiwgY1s3XSksIEMgPSB0KEMsIGosIE8sIEIsIG0sIDcsIGNbOF0pLCBCID0gdChCLCBDLCBqLCBPLCBFLCAxMiwgY1s5XSksIE8gPSB0KE8sIEIsIEMsIGosIHcsIDE3LCBjWzEwXSksIGogPSB0KGosIE8sIEIsIEMsIHgsIDIyLCBjWzExXSksIEMgPSB0KEMsIGosIE8sIEIsIEYsIDcsIGNbMTJdKSwgQiA9IHQoQiwgQywgaiwgTywgUCwgMTIsIGNbMTNdKSwgTyA9IHQoTywgQiwgQywgaiwgVCwgMTcsIGNbMTRdKSwgaiA9IHQoaiwgTywgQiwgQywgSCwgMjIsIGNbMTVdKSwgQyA9IHIoQywgaiwgTywgQiwgZCwgNSwgY1sxNl0pLCBCID0gcihCLCBDLCBqLCBPLCBBLCA5LCBjWzE3XSksIE8gPSByKE8sIEIsIEMsIGosIHgsIDE0LCBjWzE4XSksIGogPSByKGosIE8sIEIsIEMsIGYsIDIwLCBjWzE5XSksIEMgPSByKEMsIGosIE8sIEIsIEQsIDUsIGNbMjBdKSwgQiA9IHIoQiwgQywgaiwgTywgdywgOSwgY1syMV0pLCBPID0gcihPLCBCLCBDLCBqLCBILCAxNCwgY1syMl0pLCBqID0gcihqLCBPLCBCLCBDLCBiLCAyMCwgY1syM10pLCBDID0gcihDLCBqLCBPLCBCLCBFLCA1LCBjWzI0XSksIEIgPSByKEIsIEMsIGosIE8sIFQsIDksIGNbMjVdKSwgTyA9IHIoTywgQiwgQywgaiwgUywgMTQsIGNbMjZdKSwgaiA9IHIoaiwgTywgQiwgQywgbSwgMjAsIGNbMjddKSwgQyA9IHIoQywgaiwgTywgQiwgUCwgNSwgY1syOF0pLCBCID0gcihcbiAgICAgICAgQixcbiAgICAgICAgQyxcbiAgICAgICAgaixcbiAgICAgICAgTyxcbiAgICAgICAgZyxcbiAgICAgICAgOSxcbiAgICAgICAgY1syOV1cbiAgICAgICksIE8gPSByKE8sIEIsIEMsIGosIEksIDE0LCBjWzMwXSksIGogPSByKGosIE8sIEIsIEMsIEYsIDIwLCBjWzMxXSksIEMgPSBpKEMsIGosIE8sIEIsIEQsIDQsIGNbMzJdKSwgQiA9IGkoQiwgQywgaiwgTywgbSwgMTEsIGNbMzNdKSwgTyA9IGkoTywgQiwgQywgaiwgeCwgMTYsIGNbMzRdKSwgaiA9IGkoaiwgTywgQiwgQywgVCwgMjMsIGNbMzVdKSwgQyA9IGkoQywgaiwgTywgQiwgZCwgNCwgY1szNl0pLCBCID0gaShCLCBDLCBqLCBPLCBiLCAxMSwgY1szN10pLCBPID0gaShPLCBCLCBDLCBqLCBJLCAxNiwgY1szOF0pLCBqID0gaShqLCBPLCBCLCBDLCB3LCAyMywgY1szOV0pLCBDID0gaShDLCBqLCBPLCBCLCBQLCA0LCBjWzQwXSksIEIgPSBpKEIsIEMsIGosIE8sIGYsIDExLCBjWzQxXSksIE8gPSBpKE8sIEIsIEMsIGosIFMsIDE2LCBjWzQyXSksIGogPSBpKGosIE8sIEIsIEMsIEEsIDIzLCBjWzQzXSksIEMgPSBpKEMsIGosIE8sIEIsIEUsIDQsIGNbNDRdKSwgQiA9IGkoQiwgQywgaiwgTywgRiwgMTEsIGNbNDVdKSwgTyA9IGkoTywgQiwgQywgaiwgSCwgMTYsIGNbNDZdKSwgaiA9IGkoaiwgTywgQiwgQywgZywgMjMsIGNbNDddKSwgQyA9IHMoQywgaiwgTywgQiwgZiwgNiwgY1s0OF0pLCBCID0gcyhCLCBDLCBqLCBPLCBJLCAxMCwgY1s0OV0pLCBPID0gcyhcbiAgICAgICAgTyxcbiAgICAgICAgQixcbiAgICAgICAgQyxcbiAgICAgICAgaixcbiAgICAgICAgVCxcbiAgICAgICAgMTUsXG4gICAgICAgIGNbNTBdXG4gICAgICApLCBqID0gcyhqLCBPLCBCLCBDLCBELCAyMSwgY1s1MV0pLCBDID0gcyhDLCBqLCBPLCBCLCBGLCA2LCBjWzUyXSksIEIgPSBzKEIsIEMsIGosIE8sIFMsIDEwLCBjWzUzXSksIE8gPSBzKE8sIEIsIEMsIGosIHcsIDE1LCBjWzU0XSksIGogPSBzKGosIE8sIEIsIEMsIGQsIDIxLCBjWzU1XSksIEMgPSBzKEMsIGosIE8sIEIsIG0sIDYsIGNbNTZdKSwgQiA9IHMoQiwgQywgaiwgTywgSCwgMTAsIGNbNTddKSwgTyA9IHMoTywgQiwgQywgaiwgQSwgMTUsIGNbNThdKSwgaiA9IHMoaiwgTywgQiwgQywgUCwgMjEsIGNbNTldKSwgQyA9IHMoQywgaiwgTywgQiwgYiwgNiwgY1s2MF0pLCBCID0gcyhCLCBDLCBqLCBPLCB4LCAxMCwgY1s2MV0pLCBPID0gcyhPLCBCLCBDLCBqLCBnLCAxNSwgY1s2Ml0pLCBqID0gcyhqLCBPLCBCLCBDLCBFLCAyMSwgY1s2M10pO1xuICAgICAgbFswXSA9IGxbMF0gKyBDIHwgMCwgbFsxXSA9IGxbMV0gKyBqIHwgMCwgbFsyXSA9IGxbMl0gKyBPIHwgMCwgbFszXSA9IGxbM10gKyBCIHwgMDtcbiAgICB9LFxuICAgIF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2ID0gdGhpcy5fZGF0YSwgbyA9IHYud29yZHMsIGwgPSA4ICogdGhpcy5fbkRhdGFCeXRlcywgZiA9IDggKiB2LnNpZ0J5dGVzO1xuICAgICAgb1tmID4+PiA1XSB8PSAxMjggPDwgMjQgLSBmICUgMzI7XG4gICAgICB2YXIgZCA9IGUuZmxvb3IobCAvIDQyOTQ5NjcyOTYpO1xuICAgICAgZm9yIChvWyhmICsgNjQgPj4+IDkgPDwgNCkgKyAxNV0gPSAoZCA8PCA4IHwgZCA+Pj4gMjQpICYgMTY3MTE5MzUgfCAoZCA8PCAyNCB8IGQgPj4+IDgpICYgNDI3ODI1NTM2MCwgb1soZiArIDY0ID4+PiA5IDw8IDQpICsgMTRdID0gKGwgPDwgOCB8IGwgPj4+IDI0KSAmIDE2NzExOTM1IHwgKGwgPDwgMjQgfCBsID4+PiA4KSAmIDQyNzgyNTUzNjAsIHYuc2lnQnl0ZXMgPSA0ICogKG8ubGVuZ3RoICsgMSksIHRoaXMuX3Byb2Nlc3MoKSwgdiA9IHRoaXMuX2hhc2gsIG8gPSB2LndvcmRzLCBsID0gMDsgNCA+IGw7IGwrKykgZiA9IG9bbF0sIG9bbF0gPSAoZiA8PCA4IHwgZiA+Pj4gMjQpICYgMTY3MTE5MzUgfCAoZiA8PCAyNCB8IGYgPj4+IDgpICYgNDI3ODI1NTM2MDtcbiAgICAgIHJldHVybiB2O1xuICAgIH0sXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHYgPSB1LmNsb25lLmNhbGwodGhpcyk7XG4gICAgICByZXR1cm4gdi5faGFzaCA9IHRoaXMuX2hhc2guY2xvbmUoKSwgdjtcbiAgICB9XG4gIH0pLCBuLk1ENSA9IHUuX2NyZWF0ZUhlbHBlcihwKSwgbi5IbWFjTUQ1ID0gdS5fY3JlYXRlSG1hY0hlbHBlcihwKTtcbn0pKE1hdGgpO1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IEssIHMgPSBlLmxpYiwgdCA9IHMuV29yZEFycmF5LCByID0gcy5IYXNoZXIsIGkgPSBbXSwgcyA9IGUuYWxnby5TSEExID0gci5leHRlbmQoeyBfZG9SZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faGFzaCA9IG5ldyB0LmluaXQoWzE3MzI1ODQxOTMsIDQwMjMyMzM0MTcsIDI1NjIzODMxMDIsIDI3MTczMzg3OCwgMzI4NTM3NzUyMF0pO1xuICB9LCBfZG9Qcm9jZXNzQmxvY2s6IGZ1bmN0aW9uKG4sIGgpIHtcbiAgICBmb3IgKHZhciB1ID0gdGhpcy5faGFzaC53b3JkcywgcCA9IHVbMF0sIGMgPSB1WzFdLCB5ID0gdVsyXSwgdiA9IHVbM10sIG8gPSB1WzRdLCBsID0gMDsgODAgPiBsOyBsKyspIHtcbiAgICAgIGlmICgxNiA+IGwpIGlbbF0gPSBuW2ggKyBsXSB8IDA7XG4gICAgICBlbHNlIHtcbiAgICAgICAgdmFyIGYgPSBpW2wgLSAzXSBeIGlbbCAtIDhdIF4gaVtsIC0gMTRdIF4gaVtsIC0gMTZdO1xuICAgICAgICBpW2xdID0gZiA8PCAxIHwgZiA+Pj4gMzE7XG4gICAgICB9XG4gICAgICBmID0gKHAgPDwgNSB8IHAgPj4+IDI3KSArIG8gKyBpW2xdLCBmID0gMjAgPiBsID8gZiArICgoYyAmIHkgfCB+YyAmIHYpICsgMTUxODUwMDI0OSkgOiA0MCA+IGwgPyBmICsgKChjIF4geSBeIHYpICsgMTg1OTc3NTM5MykgOiA2MCA+IGwgPyBmICsgKChjICYgeSB8IGMgJiB2IHwgeSAmIHYpIC0gMTg5NDAwNzU4OCkgOiBmICsgKChjIF4geSBeIHYpIC0gODk5NDk3NTE0KSwgbyA9IHYsIHYgPSB5LCB5ID0gYyA8PCAzMCB8IGMgPj4+IDIsIGMgPSBwLCBwID0gZjtcbiAgICB9XG4gICAgdVswXSA9IHVbMF0gKyBwIHwgMCwgdVsxXSA9IHVbMV0gKyBjIHwgMCwgdVsyXSA9IHVbMl0gKyB5IHwgMCwgdVszXSA9IHVbM10gKyB2IHwgMCwgdVs0XSA9IHVbNF0gKyBvIHwgMDtcbiAgfSwgX2RvRmluYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gdGhpcy5fZGF0YSwgaCA9IG4ud29yZHMsIHUgPSA4ICogdGhpcy5fbkRhdGFCeXRlcywgcCA9IDggKiBuLnNpZ0J5dGVzO1xuICAgIHJldHVybiBoW3AgPj4+IDVdIHw9IDEyOCA8PCAyNCAtIHAgJSAzMiwgaFsocCArIDY0ID4+PiA5IDw8IDQpICsgMTRdID0gTWF0aC5mbG9vcih1IC8gNDI5NDk2NzI5NiksIGhbKHAgKyA2NCA+Pj4gOSA8PCA0KSArIDE1XSA9IHUsIG4uc2lnQnl0ZXMgPSA0ICogaC5sZW5ndGgsIHRoaXMuX3Byb2Nlc3MoKSwgdGhpcy5faGFzaDtcbiAgfSwgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gci5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIHJldHVybiBuLl9oYXNoID0gdGhpcy5faGFzaC5jbG9uZSgpLCBuO1xuICB9IH0pO1xuICBlLlNIQTEgPSByLl9jcmVhdGVIZWxwZXIocyksIGUuSG1hY1NIQTEgPSByLl9jcmVhdGVIbWFjSGVscGVyKHMpO1xufSkoKTtcbihmdW5jdGlvbihlKSB7XG4gIGZvciAodmFyIHQgPSBLLCBsID0gdC5saWIsIHIgPSBsLldvcmRBcnJheSwgaSA9IGwuSGFzaGVyLCBsID0gdC5hbGdvLCBzID0gW10sIG4gPSBbXSwgaCA9IGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gNDI5NDk2NzI5NiAqIChkIC0gKGQgfCAwKSkgfCAwO1xuICB9LCB1ID0gMiwgcCA9IDA7IDY0ID4gcDsgKSB7XG4gICAgdmFyIGM7XG4gICAgZToge1xuICAgICAgYyA9IHU7XG4gICAgICBmb3IgKHZhciB5ID0gZS5zcXJ0KGMpLCB2ID0gMjsgdiA8PSB5OyB2KyspIGlmICghKGMgJSB2KSkge1xuICAgICAgICBjID0gITE7XG4gICAgICAgIGJyZWFrIGU7XG4gICAgICB9XG4gICAgICBjID0gITA7XG4gICAgfVxuICAgIGMgJiYgKDggPiBwICYmIChzW3BdID0gaChlLnBvdyh1LCAwLjUpKSksIG5bcF0gPSBoKGUucG93KHUsIDEgLyAzKSksIHArKyksIHUrKztcbiAgfVxuICB2YXIgbyA9IFtdLCBsID0gbC5TSEEyNTYgPSBpLmV4dGVuZCh7IF9kb1Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9oYXNoID0gbmV3IHIuaW5pdChzLnNsaWNlKDApKTtcbiAgfSwgX2RvUHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbihmLCBkKSB7XG4gICAgZm9yICh2YXIgZyA9IHRoaXMuX2hhc2gud29yZHMsIFMgPSBnWzBdLCBiID0gZ1sxXSwgRCA9IGdbMl0sIEEgPSBnWzNdLCBJID0gZ1s0XSwgbSA9IGdbNV0sIEUgPSBnWzZdLCB3ID0gZ1s3XSwgeCA9IDA7IDY0ID4geDsgeCsrKSB7XG4gICAgICBpZiAoMTYgPiB4KSBvW3hdID0gZltkICsgeF0gfCAwO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciBGID0gb1t4IC0gMTVdLCBQID0gb1t4IC0gMl07XG4gICAgICAgIG9beF0gPSAoKEYgPDwgMjUgfCBGID4+PiA3KSBeIChGIDw8IDE0IHwgRiA+Pj4gMTgpIF4gRiA+Pj4gMykgKyBvW3ggLSA3XSArICgoUCA8PCAxNSB8IFAgPj4+IDE3KSBeIChQIDw8IDEzIHwgUCA+Pj4gMTkpIF4gUCA+Pj4gMTApICsgb1t4IC0gMTZdO1xuICAgICAgfVxuICAgICAgRiA9IHcgKyAoKEkgPDwgMjYgfCBJID4+PiA2KSBeIChJIDw8IDIxIHwgSSA+Pj4gMTEpIF4gKEkgPDwgNyB8IEkgPj4+IDI1KSkgKyAoSSAmIG0gXiB+SSAmIEUpICsgblt4XSArIG9beF0sIFAgPSAoKFMgPDwgMzAgfCBTID4+PiAyKSBeIChTIDw8IDE5IHwgUyA+Pj4gMTMpIF4gKFMgPDwgMTAgfCBTID4+PiAyMikpICsgKFMgJiBiIF4gUyAmIEQgXiBiICYgRCksIHcgPSBFLCBFID0gbSwgbSA9IEksIEkgPSBBICsgRiB8IDAsIEEgPSBELCBEID0gYiwgYiA9IFMsIFMgPSBGICsgUCB8IDA7XG4gICAgfVxuICAgIGdbMF0gPSBnWzBdICsgUyB8IDAsIGdbMV0gPSBnWzFdICsgYiB8IDAsIGdbMl0gPSBnWzJdICsgRCB8IDAsIGdbM10gPSBnWzNdICsgQSB8IDAsIGdbNF0gPSBnWzRdICsgSSB8IDAsIGdbNV0gPSBnWzVdICsgbSB8IDAsIGdbNl0gPSBnWzZdICsgRSB8IDAsIGdbN10gPSBnWzddICsgdyB8IDA7XG4gIH0sIF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZiA9IHRoaXMuX2RhdGEsIGQgPSBmLndvcmRzLCBnID0gOCAqIHRoaXMuX25EYXRhQnl0ZXMsIFMgPSA4ICogZi5zaWdCeXRlcztcbiAgICByZXR1cm4gZFtTID4+PiA1XSB8PSAxMjggPDwgMjQgLSBTICUgMzIsIGRbKFMgKyA2NCA+Pj4gOSA8PCA0KSArIDE0XSA9IGUuZmxvb3IoZyAvIDQyOTQ5NjcyOTYpLCBkWyhTICsgNjQgPj4+IDkgPDwgNCkgKyAxNV0gPSBnLCBmLnNpZ0J5dGVzID0gNCAqIGQubGVuZ3RoLCB0aGlzLl9wcm9jZXNzKCksIHRoaXMuX2hhc2g7XG4gIH0sIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZiA9IGkuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gZi5faGFzaCA9IHRoaXMuX2hhc2guY2xvbmUoKSwgZjtcbiAgfSB9KTtcbiAgdC5TSEEyNTYgPSBpLl9jcmVhdGVIZWxwZXIobCksIHQuSG1hY1NIQTI1NiA9IGkuX2NyZWF0ZUhtYWNIZWxwZXIobCk7XG59KShNYXRoKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBLLCB0ID0gZS5saWIuV29yZEFycmF5LCBpID0gZS5hbGdvLCByID0gaS5TSEEyNTYsIGkgPSBpLlNIQTIyNCA9IHIuZXh0ZW5kKHsgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2hhc2ggPSBuZXcgdC5pbml0KFszMjM4MzcxMDMyLCA5MTQxNTA2NjMsIDgxMjcwMjk5OSwgNDE0NDkxMjY5NywgNDI5MDc3NTg1NywgMTc1MDYwMzAyNSwgMTY5NDA3NjgzOSwgMzIwNDA3NTQyOF0pO1xuICB9LCBfZG9GaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSByLl9kb0ZpbmFsaXplLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHMuc2lnQnl0ZXMgLT0gNCwgcztcbiAgfSB9KTtcbiAgZS5TSEEyMjQgPSByLl9jcmVhdGVIZWxwZXIoaSksIGUuSG1hY1NIQTIyNCA9IHIuX2NyZWF0ZUhtYWNIZWxwZXIoaSk7XG59KSgpO1xuKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlKCkge1xuICAgIHJldHVybiBpLmNyZWF0ZS5hcHBseShpLCBhcmd1bWVudHMpO1xuICB9XG4gIGZvciAodmFyIHQgPSBLLCByID0gdC5saWIuSGFzaGVyLCBuID0gdC54NjQsIGkgPSBuLldvcmQsIHMgPSBuLldvcmRBcnJheSwgbiA9IHQuYWxnbywgaCA9IFtcbiAgICBlKDExMTYzNTI0MDgsIDM2MDk3Njc0NTgpLFxuICAgIGUoMTg5OTQ0NzQ0MSwgNjAyODkxNzI1KSxcbiAgICBlKDMwNDkzMjM0NzEsIDM5NjQ0ODQzOTkpLFxuICAgIGUoMzkyMTAwOTU3MywgMjE3MzI5NTU0OCksXG4gICAgZSg5NjE5ODcxNjMsIDQwODE2Mjg0NzIpLFxuICAgIGUoMTUwODk3MDk5MywgMzA1MzgzNDI2NSksXG4gICAgZSgyNDUzNjM1NzQ4LCAyOTM3NjcxNTc5KSxcbiAgICBlKDI4NzA3NjMyMjEsIDM2NjQ2MDk1NjApLFxuICAgIGUoMzYyNDM4MTA4MCwgMjczNDg4MzM5NCksXG4gICAgZSgzMTA1OTg0MDEsIDExNjQ5OTY1NDIpLFxuICAgIGUoNjA3MjI1Mjc4LCAxMzIzNjEwNzY0KSxcbiAgICBlKDE0MjY4ODE5ODcsIDM1OTAzMDQ5OTQpLFxuICAgIGUoMTkyNTA3ODM4OCwgNDA2ODE4MjM4MyksXG4gICAgZSgyMTYyMDc4MjA2LCA5OTEzMzYxMTMpLFxuICAgIGUoMjYxNDg4ODEwMywgNjMzODAzMzE3KSxcbiAgICBlKDMyNDgyMjI1ODAsIDM0Nzk3NzQ4NjgpLFxuICAgIGUoMzgzNTM5MDQwMSwgMjY2NjYxMzQ1OCksXG4gICAgZSg0MDIyMjI0Nzc0LCA5NDQ3MTExMzkpLFxuICAgIGUoMjY0MzQ3MDc4LCAyMzQxMjYyNzczKSxcbiAgICBlKDYwNDgwNzYyOCwgMjAwNzgwMDkzMyksXG4gICAgZSg3NzAyNTU5ODMsIDE0OTU5OTA5MDEpLFxuICAgIGUoMTI0OTE1MDEyMiwgMTg1NjQzMTIzNSksXG4gICAgZSgxNTU1MDgxNjkyLCAzMTc1MjE4MTMyKSxcbiAgICBlKDE5OTYwNjQ5ODYsIDIxOTg5NTA4MzcpLFxuICAgIGUoMjU1NDIyMDg4MiwgMzk5OTcxOTMzOSksXG4gICAgZSgyODIxODM0MzQ5LCA3NjY3ODQwMTYpLFxuICAgIGUoMjk1Mjk5NjgwOCwgMjU2NjU5NDg3OSksXG4gICAgZSgzMjEwMzEzNjcxLCAzMjAzMzM3OTU2KSxcbiAgICBlKDMzMzY1NzE4OTEsIDEwMzQ0NTcwMjYpLFxuICAgIGUoMzU4NDUyODcxMSwgMjQ2Njk0ODkwMSksXG4gICAgZSgxMTM5MjY5OTMsIDM3NTgzMjYzODMpLFxuICAgIGUoMzM4MjQxODk1LCAxNjg3MTc5MzYpLFxuICAgIGUoNjY2MzA3MjA1LCAxMTg4MTc5OTY0KSxcbiAgICBlKDc3MzUyOTkxMiwgMTU0NjA0NTczNCksXG4gICAgZSgxMjk0NzU3MzcyLCAxNTIyODA1NDg1KSxcbiAgICBlKFxuICAgICAgMTM5NjE4MjI5MSxcbiAgICAgIDI2NDM4MzM4MjNcbiAgICApLFxuICAgIGUoMTY5NTE4MzcwMCwgMjM0MzUyNzM5MCksXG4gICAgZSgxOTg2NjYxMDUxLCAxMDE0NDc3NDgwKSxcbiAgICBlKDIxNzcwMjYzNTAsIDEyMDY3NTkxNDIpLFxuICAgIGUoMjQ1Njk1NjAzNywgMzQ0MDc3NjI3KSxcbiAgICBlKDI3MzA0ODU5MjEsIDEyOTA4NjM0NjApLFxuICAgIGUoMjgyMDMwMjQxMSwgMzE1ODQ1NDI3MyksXG4gICAgZSgzMjU5NzMwODAwLCAzNTA1OTUyNjU3KSxcbiAgICBlKDMzNDU3NjQ3NzEsIDEwNjIxNzAwOCksXG4gICAgZSgzNTE2MDY1ODE3LCAzNjA2MDA4MzQ0KSxcbiAgICBlKDM2MDAzNTI4MDQsIDE0MzI3MjU3NzYpLFxuICAgIGUoNDA5NDU3MTkwOSwgMTQ2NzAzMTU5NCksXG4gICAgZSgyNzU0MjMzNDQsIDg1MTE2OTcyMCksXG4gICAgZSg0MzAyMjc3MzQsIDMxMDA4MjM3NTIpLFxuICAgIGUoNTA2OTQ4NjE2LCAxMzYzMjU4MTk1KSxcbiAgICBlKDY1OTA2MDU1NiwgMzc1MDY4NTU5MyksXG4gICAgZSg4ODM5OTc4NzcsIDM3ODUwNTAyODApLFxuICAgIGUoOTU4MTM5NTcxLCAzMzE4MzA3NDI3KSxcbiAgICBlKDEzMjI4MjIyMTgsIDM4MTI3MjM0MDMpLFxuICAgIGUoMTUzNzAwMjA2MywgMjAwMzAzNDk5NSksXG4gICAgZSgxNzQ3ODczNzc5LCAzNjAyMDM2ODk5KSxcbiAgICBlKDE5NTU1NjIyMjIsIDE1NzU5OTAwMTIpLFxuICAgIGUoMjAyNDEwNDgxNSwgMTEyNTU5MjkyOCksXG4gICAgZSgyMjI3NzMwNDUyLCAyNzE2OTA0MzA2KSxcbiAgICBlKDIzNjE4NTI0MjQsIDQ0Mjc3NjA0NCksXG4gICAgZSgyNDI4NDM2NDc0LCA1OTM2OTgzNDQpLFxuICAgIGUoMjc1NjczNDE4NywgMzczMzExMDI0OSksXG4gICAgZSgzMjA0MDMxNDc5LCAyOTk5MzUxNTczKSxcbiAgICBlKDMzMjkzMjUyOTgsIDM4MTU5MjA0MjcpLFxuICAgIGUoMzM5MTU2OTYxNCwgMzkyODM4MzkwMCksXG4gICAgZSgzNTE1MjY3MjcxLCA1NjYyODA3MTEpLFxuICAgIGUoMzk0MDE4NzYwNiwgMzQ1NDA2OTUzNCksXG4gICAgZSg0MTE4NjMwMjcxLCA0MDAwMjM5OTkyKSxcbiAgICBlKDExNjQxODQ3NCwgMTkxNDEzODU1NCksXG4gICAgZSgxNzQyOTI0MjEsIDI3MzEwNTUyNzApLFxuICAgIGUoMjg5MzgwMzU2LCAzMjAzOTkzMDA2KSxcbiAgICBlKDQ2MDM5MzI2OSwgMzIwNjIwMzE1KSxcbiAgICBlKDY4NTQ3MTczMywgNTg3NDk2ODM2KSxcbiAgICBlKDg1MjE0Mjk3MSwgMTA4Njc5Mjg1MSksXG4gICAgZSgxMDE3MDM2Mjk4LCAzNjU1NDMxMDApLFxuICAgIGUoMTEyNjAwMDU4MCwgMjYxODI5NzY3NiksXG4gICAgZShcbiAgICAgIDEyODgwMzM0NzAsXG4gICAgICAzNDA5ODU1MTU4XG4gICAgKSxcbiAgICBlKDE1MDE1MDU5NDgsIDQyMzQ1MDk4NjYpLFxuICAgIGUoMTYwNzE2NzkxNSwgOTg3MTY3NDY4KSxcbiAgICBlKDE4MTY0MDIzMTYsIDEyNDYxODk1OTEpXG4gIF0sIHUgPSBbXSwgcCA9IDA7IDgwID4gcDsgcCsrKSB1W3BdID0gZSgpO1xuICBuID0gbi5TSEE1MTIgPSByLmV4dGVuZCh7IF9kb1Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9oYXNoID0gbmV3IHMuaW5pdChbbmV3IGkuaW5pdCgxNzc5MDMzNzAzLCA0MDg5MjM1NzIwKSwgbmV3IGkuaW5pdCgzMTQ0MTM0Mjc3LCAyMjI3ODczNTk1KSwgbmV3IGkuaW5pdCgxMDEzOTA0MjQyLCA0MjcxMTc1NzIzKSwgbmV3IGkuaW5pdCgyNzczNDgwNzYyLCAxNTk1NzUwMTI5KSwgbmV3IGkuaW5pdCgxMzU5ODkzMTE5LCAyOTE3NTY1MTM3KSwgbmV3IGkuaW5pdCgyNjAwODIyOTI0LCA3MjU1MTExOTkpLCBuZXcgaS5pbml0KDUyODczNDYzNSwgNDIxNTM4OTU0NyksIG5ldyBpLmluaXQoMTU0MTQ1OTIyNSwgMzI3MDMzMjA5KV0pO1xuICB9LCBfZG9Qcm9jZXNzQmxvY2s6IGZ1bmN0aW9uKGMsIHkpIHtcbiAgICBmb3IgKHZhciBiID0gdGhpcy5faGFzaC53b3JkcywgdiA9IGJbMF0sIG8gPSBiWzFdLCBsID0gYlsyXSwgZiA9IGJbM10sIGQgPSBiWzRdLCBnID0gYls1XSwgUyA9IGJbNl0sIGIgPSBiWzddLCBEID0gdi5oaWdoLCBBID0gdi5sb3csIEkgPSBvLmhpZ2gsIG0gPSBvLmxvdywgRSA9IGwuaGlnaCwgdyA9IGwubG93LCB4ID0gZi5oaWdoLCBGID0gZi5sb3csIFAgPSBkLmhpZ2gsIFQgPSBkLmxvdywgSCA9IGcuaGlnaCwgQyA9IGcubG93LCBCID0gUy5oaWdoLCBPID0gUy5sb3csIGogPSBiLmhpZ2gsIGZlID0gYi5sb3csIFogPSBELCBYID0gQSwgcmUgPSBJLCBuZSA9IG0sIGhlID0gRSwgc2UgPSB3LCBrZSA9IHgsIGNlID0gRiwgTSA9IFAsIEcgPSBULCBRID0gSCwgZWUgPSBDLCBwZSA9IEIsIHRlID0gTywgTWUgPSBqLCBOZSA9IGZlLCB4ZSA9IDA7IDgwID4geGU7IHhlKyspIHtcbiAgICAgIHZhciBDZSA9IHVbeGVdO1xuICAgICAgaWYgKDE2ID4geGUpIHZhciB5ZSA9IENlLmhpZ2ggPSBjW3kgKyAyICogeGVdIHwgMCwgVSA9IENlLmxvdyA9IGNbeSArIDIgKiB4ZSArIDFdIHwgMDtcbiAgICAgIGVsc2Uge1xuICAgICAgICB2YXIgeWUgPSB1W3hlIC0gMTVdLCBVID0geWUuaGlnaCwgRmUgPSB5ZS5sb3csIHllID0gKFUgPj4+IDEgfCBGZSA8PCAzMSkgXiAoVSA+Pj4gOCB8IEZlIDw8IDI0KSBeIFUgPj4+IDcsIEZlID0gKEZlID4+PiAxIHwgVSA8PCAzMSkgXiAoRmUgPj4+IDggfCBVIDw8IDI0KSBeIChGZSA+Pj4gNyB8IFUgPDwgMjUpLCBIZSA9IHVbeGUgLSAyXSwgVSA9IEhlLmhpZ2gsICQgPSBIZS5sb3csIEhlID0gKFUgPj4+IDE5IHwgJCA8PCAxMykgXiAoVSA8PCAzIHwgJCA+Pj4gMjkpIF4gVSA+Pj4gNiwgJCA9ICgkID4+PiAxOSB8IFUgPDwgMTMpIF4gKCQgPDwgMyB8IFUgPj4+IDI5KSBeICgkID4+PiA2IHwgVSA8PCAyNiksIFUgPSB1W3hlIC0gN10sIFFlID0gVS5oaWdoLCBJZSA9IHVbeGUgLSAxNl0sIGJlID0gSWUuaGlnaCwgSWUgPSBJZS5sb3csIFUgPSBGZSArIFUubG93LCB5ZSA9IHllICsgUWUgKyAoVSA+Pj4gMCA8IEZlID4+PiAwID8gMSA6IDApLCBVID0gVSArICQsIHllID0geWUgKyBIZSArIChVID4+PiAwIDwgJCA+Pj4gMCA/IDEgOiAwKSwgVSA9IFUgKyBJZSwgeWUgPSB5ZSArIGJlICsgKFUgPj4+IDAgPCBJZSA+Pj4gMCA/IDEgOiAwKTtcbiAgICAgICAgQ2UuaGlnaCA9IHllLCBDZS5sb3cgPSBVO1xuICAgICAgfVxuICAgICAgdmFyIFFlID0gTSAmIFEgXiB+TSAmIHBlLCBJZSA9IEcgJiBlZSBeIH5HICYgdGUsIENlID0gWiAmIHJlIF4gWiAmIGhlIF4gcmUgJiBoZSwgS3QgPSBYICYgbmUgXiBYICYgc2UgXiBuZSAmIHNlLCBGZSA9IChaID4+PiAyOCB8IFggPDwgNCkgXiAoWiA8PCAzMCB8IFggPj4+IDIpIF4gKFogPDwgMjUgfCBYID4+PiA3KSwgSGUgPSAoWCA+Pj4gMjggfCBaIDw8IDQpIF4gKFggPDwgMzAgfCBaID4+PiAyKSBeIChYIDw8IDI1IHwgWiA+Pj4gNyksICQgPSBoW3hlXSwgTHQgPSAkLmhpZ2gsIGN0ID0gJC5sb3csICQgPSBOZSArICgoRyA+Pj4gMTQgfCBNIDw8IDE4KSBeIChHID4+PiAxOCB8IE0gPDwgMTQpIF4gKEcgPDwgMjMgfCBNID4+PiA5KSksIGJlID0gTWUgKyAoKE0gPj4+IDE0IHwgRyA8PCAxOCkgXiAoTSA+Pj4gMTggfCBHIDw8IDE0KSBeIChNIDw8IDIzIHwgRyA+Pj4gOSkpICsgKCQgPj4+IDAgPCBOZSA+Pj4gMCA/IDEgOiAwKSwgJCA9ICQgKyBJZSwgYmUgPSBiZSArIFFlICsgKCQgPj4+IDAgPCBJZSA+Pj4gMCA/IDEgOiAwKSwgJCA9ICQgKyBjdCwgYmUgPSBiZSArIEx0ICsgKCQgPj4+IDAgPCBjdCA+Pj4gMCA/IDEgOiAwKSwgJCA9ICQgKyBVLCBiZSA9IGJlICsgeWUgKyAoJCA+Pj4gMCA8IFUgPj4+IDAgPyAxIDogMCksIFUgPSBIZSArIEt0LCBDZSA9IEZlICsgQ2UgKyAoVSA+Pj4gMCA8IEhlID4+PiAwID8gMSA6IDApLCBNZSA9IHBlLCBOZSA9IHRlLCBwZSA9IFEsIHRlID0gZWUsIFEgPSBNLCBlZSA9IEcsIEcgPSBjZSArICQgfCAwLCBNID0ga2UgKyBiZSArIChHID4+PiAwIDwgY2UgPj4+IDAgPyAxIDogMCkgfCAwLCBrZSA9IGhlLCBjZSA9IHNlLCBoZSA9IHJlLCBzZSA9IG5lLCByZSA9IFosIG5lID0gWCwgWCA9ICQgKyBVIHwgMCwgWiA9IGJlICsgQ2UgKyAoWCA+Pj4gMCA8ICQgPj4+IDAgPyAxIDogMCkgfCAwO1xuICAgIH1cbiAgICBBID0gdi5sb3cgPSBBICsgWCwgdi5oaWdoID0gRCArIFogKyAoQSA+Pj4gMCA8IFggPj4+IDAgPyAxIDogMCksIG0gPSBvLmxvdyA9IG0gKyBuZSwgby5oaWdoID0gSSArIHJlICsgKG0gPj4+IDAgPCBuZSA+Pj4gMCA/IDEgOiAwKSwgdyA9IGwubG93ID0gdyArIHNlLCBsLmhpZ2ggPSBFICsgaGUgKyAodyA+Pj4gMCA8IHNlID4+PiAwID8gMSA6IDApLCBGID0gZi5sb3cgPSBGICsgY2UsIGYuaGlnaCA9IHggKyBrZSArIChGID4+PiAwIDwgY2UgPj4+IDAgPyAxIDogMCksIFQgPSBkLmxvdyA9IFQgKyBHLCBkLmhpZ2ggPSBQICsgTSArIChUID4+PiAwIDwgRyA+Pj4gMCA/IDEgOiAwKSwgQyA9IGcubG93ID0gQyArIGVlLCBnLmhpZ2ggPSBIICsgUSArIChDID4+PiAwIDwgZWUgPj4+IDAgPyAxIDogMCksIE8gPSBTLmxvdyA9IE8gKyB0ZSwgUy5oaWdoID0gQiArIHBlICsgKE8gPj4+IDAgPCB0ZSA+Pj4gMCA/IDEgOiAwKSwgZmUgPSBiLmxvdyA9IGZlICsgTmUsIGIuaGlnaCA9IGogKyBNZSArIChmZSA+Pj4gMCA8IE5lID4+PiAwID8gMSA6IDApO1xuICB9LCBfZG9GaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGMgPSB0aGlzLl9kYXRhLCB5ID0gYy53b3JkcywgdiA9IDggKiB0aGlzLl9uRGF0YUJ5dGVzLCBvID0gOCAqIGMuc2lnQnl0ZXM7XG4gICAgcmV0dXJuIHlbbyA+Pj4gNV0gfD0gMTI4IDw8IDI0IC0gbyAlIDMyLCB5WyhvICsgMTI4ID4+PiAxMCA8PCA1KSArIDMwXSA9IE1hdGguZmxvb3IodiAvIDQyOTQ5NjcyOTYpLCB5WyhvICsgMTI4ID4+PiAxMCA8PCA1KSArIDMxXSA9IHYsIGMuc2lnQnl0ZXMgPSA0ICogeS5sZW5ndGgsIHRoaXMuX3Byb2Nlc3MoKSwgdGhpcy5faGFzaC50b1gzMigpO1xuICB9LCBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGMgPSByLmNsb25lLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIGMuX2hhc2ggPSB0aGlzLl9oYXNoLmNsb25lKCksIGM7XG4gIH0sIGJsb2NrU2l6ZTogMzIgfSksIHQuU0hBNTEyID0gci5fY3JlYXRlSGVscGVyKG4pLCB0LkhtYWNTSEE1MTIgPSByLl9jcmVhdGVIbWFjSGVscGVyKG4pO1xufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBLLCBzID0gZS54NjQsIHQgPSBzLldvcmQsIHIgPSBzLldvcmRBcnJheSwgcyA9IGUuYWxnbywgaSA9IHMuU0hBNTEyLCBzID0gcy5TSEEzODQgPSBpLmV4dGVuZCh7IF9kb1Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9oYXNoID0gbmV3IHIuaW5pdChbbmV3IHQuaW5pdCgzNDE4MDcwMzY1LCAzMjM4MzcxMDMyKSwgbmV3IHQuaW5pdCgxNjU0MjcwMjUwLCA5MTQxNTA2NjMpLCBuZXcgdC5pbml0KDI0Mzg1MjkzNzAsIDgxMjcwMjk5OSksIG5ldyB0LmluaXQoMzU1NDYyMzYwLCA0MTQ0OTEyNjk3KSwgbmV3IHQuaW5pdCgxNzMxNDA1NDE1LCA0MjkwNzc1ODU3KSwgbmV3IHQuaW5pdCgyMzk0MTgwMjMxLCAxNzUwNjAzMDI1KSwgbmV3IHQuaW5pdCgzNjc1MDA4NTI1LCAxNjk0MDc2ODM5KSwgbmV3IHQuaW5pdCgxMjAzMDYyODEzLCAzMjA0MDc1NDI4KV0pO1xuICB9LCBfZG9GaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSBpLl9kb0ZpbmFsaXplLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIG4uc2lnQnl0ZXMgLT0gMTYsIG47XG4gIH0gfSk7XG4gIGUuU0hBMzg0ID0gaS5fY3JlYXRlSGVscGVyKHMpLCBlLkhtYWNTSEEzODQgPSBpLl9jcmVhdGVIbWFjSGVscGVyKHMpO1xufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBLLCBjID0gZS5saWIsIHQgPSBjLldvcmRBcnJheSwgciA9IGMuSGFzaGVyLCBjID0gZS5hbGdvLCBpID0gdC5jcmVhdGUoWzAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsIDcsIDQsIDEzLCAxLCAxMCwgNiwgMTUsIDMsIDEyLCAwLCA5LCA1LCAyLCAxNCwgMTEsIDgsIDMsIDEwLCAxNCwgNCwgOSwgMTUsIDgsIDEsIDIsIDcsIDAsIDYsIDEzLCAxMSwgNSwgMTIsIDEsIDksIDExLCAxMCwgMCwgOCwgMTIsIDQsIDEzLCAzLCA3LCAxNSwgMTQsIDUsIDYsIDIsIDQsIDAsIDUsIDksIDcsIDEyLCAyLCAxMCwgMTQsIDEsIDMsIDgsIDExLCA2LCAxNSwgMTNdKSwgcyA9IHQuY3JlYXRlKFs1LCAxNCwgNywgMCwgOSwgMiwgMTEsIDQsIDEzLCA2LCAxNSwgOCwgMSwgMTAsIDMsIDEyLCA2LCAxMSwgMywgNywgMCwgMTMsIDUsIDEwLCAxNCwgMTUsIDgsIDEyLCA0LCA5LCAxLCAyLCAxNSwgNSwgMSwgMywgNywgMTQsIDYsIDksIDExLCA4LCAxMiwgMiwgMTAsIDAsIDQsIDEzLCA4LCA2LCA0LCAxLCAzLCAxMSwgMTUsIDAsIDUsIDEyLCAyLCAxMywgOSwgNywgMTAsIDE0LCAxMiwgMTUsIDEwLCA0LCAxLCA1LCA4LCA3LCA2LCAyLCAxMywgMTQsIDAsIDMsIDksIDExXSksIG4gPSB0LmNyZWF0ZShbXG4gICAgMTEsXG4gICAgMTQsXG4gICAgMTUsXG4gICAgMTIsXG4gICAgNSxcbiAgICA4LFxuICAgIDcsXG4gICAgOSxcbiAgICAxMSxcbiAgICAxMyxcbiAgICAxNCxcbiAgICAxNSxcbiAgICA2LFxuICAgIDcsXG4gICAgOSxcbiAgICA4LFxuICAgIDcsXG4gICAgNixcbiAgICA4LFxuICAgIDEzLFxuICAgIDExLFxuICAgIDksXG4gICAgNyxcbiAgICAxNSxcbiAgICA3LFxuICAgIDEyLFxuICAgIDE1LFxuICAgIDksXG4gICAgMTEsXG4gICAgNyxcbiAgICAxMyxcbiAgICAxMixcbiAgICAxMSxcbiAgICAxMyxcbiAgICA2LFxuICAgIDcsXG4gICAgMTQsXG4gICAgOSxcbiAgICAxMyxcbiAgICAxNSxcbiAgICAxNCxcbiAgICA4LFxuICAgIDEzLFxuICAgIDYsXG4gICAgNSxcbiAgICAxMixcbiAgICA3LFxuICAgIDUsXG4gICAgMTEsXG4gICAgMTIsXG4gICAgMTQsXG4gICAgMTUsXG4gICAgMTQsXG4gICAgMTUsXG4gICAgOSxcbiAgICA4LFxuICAgIDksXG4gICAgMTQsXG4gICAgNSxcbiAgICA2LFxuICAgIDgsXG4gICAgNixcbiAgICA1LFxuICAgIDEyLFxuICAgIDksXG4gICAgMTUsXG4gICAgNSxcbiAgICAxMSxcbiAgICA2LFxuICAgIDgsXG4gICAgMTMsXG4gICAgMTIsXG4gICAgNSxcbiAgICAxMixcbiAgICAxMyxcbiAgICAxNCxcbiAgICAxMSxcbiAgICA4LFxuICAgIDUsXG4gICAgNlxuICBdKSwgaCA9IHQuY3JlYXRlKFs4LCA5LCA5LCAxMSwgMTMsIDE1LCAxNSwgNSwgNywgNywgOCwgMTEsIDE0LCAxNCwgMTIsIDYsIDksIDEzLCAxNSwgNywgMTIsIDgsIDksIDExLCA3LCA3LCAxMiwgNywgNiwgMTUsIDEzLCAxMSwgOSwgNywgMTUsIDExLCA4LCA2LCA2LCAxNCwgMTIsIDEzLCA1LCAxNCwgMTMsIDEzLCA3LCA1LCAxNSwgNSwgOCwgMTEsIDE0LCAxNCwgNiwgMTQsIDYsIDksIDEyLCA5LCAxMiwgNSwgMTUsIDgsIDgsIDUsIDEyLCA5LCAxMiwgNSwgMTQsIDYsIDgsIDEzLCA2LCA1LCAxNSwgMTMsIDExLCAxMV0pLCB1ID0gdC5jcmVhdGUoWzAsIDE1MTg1MDAyNDksIDE4NTk3NzUzOTMsIDI0MDA5NTk3MDgsIDI4NDA4NTM4MzhdKSwgcCA9IHQuY3JlYXRlKFtcbiAgICAxMzUyODI5OTI2LFxuICAgIDE1NDg2MDM2ODQsXG4gICAgMTgzNjA3MjY5MSxcbiAgICAyMDUzOTk0MjE3LFxuICAgIDBcbiAgXSksIGMgPSBjLlJJUEVNRDE2MCA9IHIuZXh0ZW5kKHsgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2hhc2ggPSB0LmNyZWF0ZShbMTczMjU4NDE5MywgNDAyMzIzMzQxNywgMjU2MjM4MzEwMiwgMjcxNzMzODc4LCAzMjg1Mzc3NTIwXSk7XG4gIH0sIF9kb1Byb2Nlc3NCbG9jazogZnVuY3Rpb24oeSwgdikge1xuICAgIGZvciAodmFyIG8gPSAwOyAxNiA+IG87IG8rKykge1xuICAgICAgdmFyIGwgPSB2ICsgbywgZiA9IHlbbF07XG4gICAgICB5W2xdID0gKGYgPDwgOCB8IGYgPj4+IDI0KSAmIDE2NzExOTM1IHwgKGYgPDwgMjQgfCBmID4+PiA4KSAmIDQyNzgyNTUzNjA7XG4gICAgfVxuICAgIHZhciBsID0gdGhpcy5faGFzaC53b3JkcywgZiA9IHUud29yZHMsIGQgPSBwLndvcmRzLCBnID0gaS53b3JkcywgUyA9IHMud29yZHMsIGIgPSBuLndvcmRzLCBEID0gaC53b3JkcywgQSwgSSwgbSwgRSwgdywgeCwgRiwgUCwgVCwgSDtcbiAgICB4ID0gQSA9IGxbMF0sIEYgPSBJID0gbFsxXSwgUCA9IG0gPSBsWzJdLCBUID0gRSA9IGxbM10sIEggPSB3ID0gbFs0XTtcbiAgICBmb3IgKHZhciBDLCBvID0gMDsgODAgPiBvOyBvICs9IDEpIEMgPSBBICsgeVt2ICsgZ1tvXV0gfCAwLCBDID0gMTYgPiBvID8gQyArICgoSSBeIG0gXiBFKSArIGZbMF0pIDogMzIgPiBvID8gQyArICgoSSAmIG0gfCB+SSAmIEUpICsgZlsxXSkgOiA0OCA+IG8gPyBDICsgKCgoSSB8IH5tKSBeIEUpICsgZlsyXSkgOiA2NCA+IG8gPyBDICsgKChJICYgRSB8IG0gJiB+RSkgKyBmWzNdKSA6IEMgKyAoKEkgXiAobSB8IH5FKSkgKyBmWzRdKSwgQyB8PSAwLCBDID0gQyA8PCBiW29dIHwgQyA+Pj4gMzIgLSBiW29dLCBDID0gQyArIHcgfCAwLCBBID0gdywgdyA9IEUsIEUgPSBtIDw8IDEwIHwgbSA+Pj4gMjIsIG0gPSBJLCBJID0gQywgQyA9IHggKyB5W3YgKyBTW29dXSB8IDAsIEMgPSAxNiA+IG8gPyBDICsgKChGIF4gKFAgfCB+VCkpICsgZFswXSkgOiAzMiA+IG8gPyBDICsgKChGICYgVCB8IFAgJiB+VCkgKyBkWzFdKSA6IDQ4ID4gbyA/IEMgKyAoKChGIHwgflApIF4gVCkgKyBkWzJdKSA6IDY0ID4gbyA/IEMgKyAoKEYgJiBQIHwgfkYgJiBUKSArIGRbM10pIDogQyArICgoRiBeIFAgXiBUKSArIGRbNF0pLCBDIHw9IDAsIEMgPSBDIDw8IERbb10gfCBDID4+PiAzMiAtIERbb10sIEMgPSBDICsgSCB8IDAsIHggPSBILCBIID0gVCwgVCA9IFAgPDwgMTAgfCBQID4+PiAyMiwgUCA9IEYsIEYgPSBDO1xuICAgIEMgPSBsWzFdICsgbSArIFQgfCAwLCBsWzFdID0gbFsyXSArIEUgKyBIIHwgMCwgbFsyXSA9IGxbM10gKyB3ICsgeCB8IDAsIGxbM10gPSBsWzRdICsgQSArIEYgfCAwLCBsWzRdID0gbFswXSArIEkgKyBQIHwgMCwgbFswXSA9IEM7XG4gIH0sIF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgeSA9IHRoaXMuX2RhdGEsIHYgPSB5LndvcmRzLCBvID0gOCAqIHRoaXMuX25EYXRhQnl0ZXMsIGwgPSA4ICogeS5zaWdCeXRlcztcbiAgICBmb3IgKHZbbCA+Pj4gNV0gfD0gMTI4IDw8IDI0IC0gbCAlIDMyLCB2WyhsICsgNjQgPj4+IDkgPDwgNCkgKyAxNF0gPSAobyA8PCA4IHwgbyA+Pj4gMjQpICYgMTY3MTE5MzUgfCAobyA8PCAyNCB8IG8gPj4+IDgpICYgNDI3ODI1NTM2MCwgeS5zaWdCeXRlcyA9IDQgKiAodi5sZW5ndGggKyAxKSwgdGhpcy5fcHJvY2VzcygpLCB5ID0gdGhpcy5faGFzaCwgdiA9IHkud29yZHMsIG8gPSAwOyA1ID4gbzsgbysrKSBsID0gdltvXSwgdltvXSA9IChsIDw8IDggfCBsID4+PiAyNCkgJiAxNjcxMTkzNSB8IChsIDw8IDI0IHwgbCA+Pj4gOCkgJiA0Mjc4MjU1MzYwO1xuICAgIHJldHVybiB5O1xuICB9LCBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHkgPSByLmNsb25lLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIHkuX2hhc2ggPSB0aGlzLl9oYXNoLmNsb25lKCksIHk7XG4gIH0gfSk7XG4gIGUuUklQRU1EMTYwID0gci5fY3JlYXRlSGVscGVyKGMpLCBlLkhtYWNSSVBFTUQxNjAgPSByLl9jcmVhdGVIbWFjSGVscGVyKGMpO1xufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBLLCB0ID0gZS5lbmMuVXRmODtcbiAgZS5hbGdvLkhNQUMgPSBlLmxpYi5CYXNlLmV4dGVuZCh7IGluaXQ6IGZ1bmN0aW9uKHIsIGkpIHtcbiAgICByID0gdGhpcy5faGFzaGVyID0gbmV3IHIuaW5pdCgpLCB0eXBlb2YgaSA9PSBcInN0cmluZ1wiICYmIChpID0gdC5wYXJzZShpKSk7XG4gICAgdmFyIHMgPSByLmJsb2NrU2l6ZSwgbiA9IDQgKiBzO1xuICAgIGkuc2lnQnl0ZXMgPiBuICYmIChpID0gci5maW5hbGl6ZShpKSksIGkuY2xhbXAoKTtcbiAgICBmb3IgKHZhciBoID0gdGhpcy5fb0tleSA9IGkuY2xvbmUoKSwgdSA9IHRoaXMuX2lLZXkgPSBpLmNsb25lKCksIHAgPSBoLndvcmRzLCBjID0gdS53b3JkcywgeSA9IDA7IHkgPCBzOyB5KyspIHBbeV0gXj0gMTU0OTU1NjgyOCwgY1t5XSBePSA5MDk1MjI0ODY7XG4gICAgaC5zaWdCeXRlcyA9IHUuc2lnQnl0ZXMgPSBuLCB0aGlzLnJlc2V0KCk7XG4gIH0sIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgciA9IHRoaXMuX2hhc2hlcjtcbiAgICByLnJlc2V0KCksIHIudXBkYXRlKHRoaXMuX2lLZXkpO1xuICB9LCB1cGRhdGU6IGZ1bmN0aW9uKHIpIHtcbiAgICByZXR1cm4gdGhpcy5faGFzaGVyLnVwZGF0ZShyKSwgdGhpcztcbiAgfSwgZmluYWxpemU6IGZ1bmN0aW9uKHIpIHtcbiAgICB2YXIgaSA9IHRoaXMuX2hhc2hlcjtcbiAgICByZXR1cm4gciA9IGkuZmluYWxpemUociksIGkucmVzZXQoKSwgaS5maW5hbGl6ZSh0aGlzLl9vS2V5LmNsb25lKCkuY29uY2F0KHIpKTtcbiAgfSB9KTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gSywgaSA9IGUubGliLCB0ID0gaS5CYXNlLCByID0gaS5Xb3JkQXJyYXksIGkgPSBlLmFsZ28sIHMgPSBpLkhNQUMsIG4gPSBpLlBCS0RGMiA9IHQuZXh0ZW5kKHsgY2ZnOiB0LmV4dGVuZCh7IGtleVNpemU6IDQsIGhhc2hlcjogaS5TSEExLCBpdGVyYXRpb25zOiAxIH0pLCBpbml0OiBmdW5jdGlvbihoKSB7XG4gICAgdGhpcy5jZmcgPSB0aGlzLmNmZy5leHRlbmQoaCk7XG4gIH0sIGNvbXB1dGU6IGZ1bmN0aW9uKGgsIHUpIHtcbiAgICBmb3IgKHZhciBmID0gdGhpcy5jZmcsIHAgPSBzLmNyZWF0ZShmLmhhc2hlciwgaCksIGMgPSByLmNyZWF0ZSgpLCB5ID0gci5jcmVhdGUoWzFdKSwgdiA9IGMud29yZHMsIG8gPSB5LndvcmRzLCBsID0gZi5rZXlTaXplLCBmID0gZi5pdGVyYXRpb25zOyB2Lmxlbmd0aCA8IGw7ICkge1xuICAgICAgdmFyIGQgPSBwLnVwZGF0ZSh1KS5maW5hbGl6ZSh5KTtcbiAgICAgIHAucmVzZXQoKTtcbiAgICAgIGZvciAodmFyIGcgPSBkLndvcmRzLCBTID0gZy5sZW5ndGgsIGIgPSBkLCBEID0gMTsgRCA8IGY7IEQrKykge1xuICAgICAgICBiID0gcC5maW5hbGl6ZShiKSwgcC5yZXNldCgpO1xuICAgICAgICBmb3IgKHZhciBBID0gYi53b3JkcywgSSA9IDA7IEkgPCBTOyBJKyspIGdbSV0gXj0gQVtJXTtcbiAgICAgIH1cbiAgICAgIGMuY29uY2F0KGQpLCBvWzBdKys7XG4gICAgfVxuICAgIHJldHVybiBjLnNpZ0J5dGVzID0gNCAqIGwsIGM7XG4gIH0gfSk7XG4gIGUuUEJLREYyID0gZnVuY3Rpb24oaCwgdSwgcCkge1xuICAgIHJldHVybiBuLmNyZWF0ZShwKS5jb21wdXRlKGgsIHUpO1xuICB9O1xufSkoKTtcbi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuL1xuICovXG52YXIgS2UgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIiwgRXQgPSBcIj1cIjtcbmZ1bmN0aW9uIF9lKGUpIHtcbiAgdmFyIHQsIHIsIGkgPSBcIlwiO1xuICBmb3IgKHQgPSAwOyB0ICsgMyA8PSBlLmxlbmd0aDsgdCArPSAzKVxuICAgIHIgPSBwYXJzZUludChlLnN1YnN0cmluZyh0LCB0ICsgMyksIDE2KSwgaSArPSBLZS5jaGFyQXQociA+PiA2KSArIEtlLmNoYXJBdChyICYgNjMpO1xuICBmb3IgKHQgKyAxID09IGUubGVuZ3RoID8gKHIgPSBwYXJzZUludChlLnN1YnN0cmluZyh0LCB0ICsgMSksIDE2KSwgaSArPSBLZS5jaGFyQXQociA8PCAyKSkgOiB0ICsgMiA9PSBlLmxlbmd0aCAmJiAociA9IHBhcnNlSW50KGUuc3Vic3RyaW5nKHQsIHQgKyAyKSwgMTYpLCBpICs9IEtlLmNoYXJBdChyID4+IDIpICsgS2UuY2hhckF0KChyICYgMykgPDwgNCkpOyAoaS5sZW5ndGggJiAzKSA+IDA7IClcbiAgICBpICs9IEV0O1xuICByZXR1cm4gaTtcbn1cbmZ1bmN0aW9uIGl0KGUpIHtcbiAgdmFyIHQgPSBcIlwiLCByLCBpID0gMCwgcywgbjtcbiAgZm9yIChyID0gMDsgciA8IGUubGVuZ3RoICYmIGUuY2hhckF0KHIpICE9IEV0OyArK3IpXG4gICAgbiA9IEtlLmluZGV4T2YoZS5jaGFyQXQocikpLCAhKG4gPCAwKSAmJiAoaSA9PSAwID8gKHQgKz0gRGUobiA+PiAyKSwgcyA9IG4gJiAzLCBpID0gMSkgOiBpID09IDEgPyAodCArPSBEZShzIDw8IDIgfCBuID4+IDQpLCBzID0gbiAmIDE1LCBpID0gMikgOiBpID09IDIgPyAodCArPSBEZShzKSwgdCArPSBEZShuID4+IDIpLCBzID0gbiAmIDMsIGkgPSAzKSA6ICh0ICs9IERlKHMgPDwgMiB8IG4gPj4gNCksIHQgKz0gRGUobiAmIDE1KSwgaSA9IDApKTtcbiAgcmV0dXJuIGkgPT0gMSAmJiAodCArPSBEZShzIDw8IDIpKSwgdDtcbn1cbi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuL1xuKi9cbnZhciBUZTtcbmZ1bmN0aW9uIFIoZSwgdCwgcikge1xuICBlICE9IG51bGwgJiYgKHR5cGVvZiBlID09IFwibnVtYmVyXCIgPyB0aGlzLmZyb21OdW1iZXIoZSwgdCwgcikgOiB0ID09IG51bGwgJiYgdHlwZW9mIGUgIT0gXCJzdHJpbmdcIiA/IHRoaXMuZnJvbVN0cmluZyhlLCAyNTYpIDogdGhpcy5mcm9tU3RyaW5nKGUsIHQpKTtcbn1cbmZ1bmN0aW9uIF8oKSB7XG4gIHJldHVybiBuZXcgUihudWxsKTtcbn1cbmZ1bmN0aW9uIHF0KGUsIHQsIHIsIGksIHMsIG4pIHtcbiAgZm9yICg7IC0tbiA+PSAwOyApIHtcbiAgICB2YXIgaCA9IHQgKiB0aGlzW2UrK10gKyByW2ldICsgcztcbiAgICBzID0gTWF0aC5mbG9vcihoIC8gNjcxMDg4NjQpLCByW2krK10gPSBoICYgNjcxMDg4NjM7XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5mdW5jdGlvbiBrdChlLCB0LCByLCBpLCBzLCBuKSB7XG4gIGZvciAodmFyIGggPSB0ICYgMzI3NjcsIHUgPSB0ID4+IDE1OyAtLW4gPj0gMDsgKSB7XG4gICAgdmFyIHAgPSB0aGlzW2VdICYgMzI3NjcsIGMgPSB0aGlzW2UrK10gPj4gMTUsIHkgPSB1ICogcCArIGMgKiBoO1xuICAgIHAgPSBoICogcCArICgoeSAmIDMyNzY3KSA8PCAxNSkgKyByW2ldICsgKHMgJiAxMDczNzQxODIzKSwgcyA9IChwID4+PiAzMCkgKyAoeSA+Pj4gMTUpICsgdSAqIGMgKyAocyA+Pj4gMzApLCByW2krK10gPSBwICYgMTA3Mzc0MTgyMztcbiAgfVxuICByZXR1cm4gcztcbn1cbmZ1bmN0aW9uIE10KGUsIHQsIHIsIGksIHMsIG4pIHtcbiAgZm9yICh2YXIgaCA9IHQgJiAxNjM4MywgdSA9IHQgPj4gMTQ7IC0tbiA+PSAwOyApIHtcbiAgICB2YXIgcCA9IHRoaXNbZV0gJiAxNjM4MywgYyA9IHRoaXNbZSsrXSA+PiAxNCwgeSA9IHUgKiBwICsgYyAqIGg7XG4gICAgcCA9IGggKiBwICsgKCh5ICYgMTYzODMpIDw8IDE0KSArIHJbaV0gKyBzLCBzID0gKHAgPj4gMjgpICsgKHkgPj4gMTQpICsgdSAqIGMsIHJbaSsrXSA9IHAgJiAyNjg0MzU0NTU7XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5VZS5hcHBOYW1lID09IFwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCIgPyAoUi5wcm90b3R5cGUuYW0gPSBrdCwgVGUgPSAzMCkgOiBVZS5hcHBOYW1lICE9IFwiTmV0c2NhcGVcIiA/IChSLnByb3RvdHlwZS5hbSA9IHF0LCBUZSA9IDI2KSA6IChSLnByb3RvdHlwZS5hbSA9IE10LCBUZSA9IDI4KTtcblIucHJvdG90eXBlLkRCID0gVGU7XG5SLnByb3RvdHlwZS5ETSA9ICgxIDw8IFRlKSAtIDE7XG5SLnByb3RvdHlwZS5EViA9IDEgPDwgVGU7XG52YXIgbnQgPSA1MjtcblIucHJvdG90eXBlLkZWID0gTWF0aC5wb3coMiwgbnQpO1xuUi5wcm90b3R5cGUuRjEgPSBudCAtIFRlO1xuUi5wcm90b3R5cGUuRjIgPSAyICogVGUgLSBudDtcbnZhciBfdCA9IFwiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIsICRlID0gbmV3IEFycmF5KCksIExlLCBtZTtcbkxlID0gNDg7XG5mb3IgKG1lID0gMDsgbWUgPD0gOTsgKyttZSlcbiAgJGVbTGUrK10gPSBtZTtcbkxlID0gOTc7XG5mb3IgKG1lID0gMTA7IG1lIDwgMzY7ICsrbWUpXG4gICRlW0xlKytdID0gbWU7XG5MZSA9IDY1O1xuZm9yIChtZSA9IDEwOyBtZSA8IDM2OyArK21lKVxuICAkZVtMZSsrXSA9IG1lO1xuZnVuY3Rpb24gRGUoZSkge1xuICByZXR1cm4gX3QuY2hhckF0KGUpO1xufVxuZnVuY3Rpb24gd3QoZSwgdCkge1xuICB2YXIgciA9ICRlW2UuY2hhckNvZGVBdCh0KV07XG4gIHJldHVybiByID8/IC0xO1xufVxuZnVuY3Rpb24gVXQoZSkge1xuICBmb3IgKHZhciB0ID0gdGhpcy50IC0gMTsgdCA+PSAwOyAtLXQpXG4gICAgZVt0XSA9IHRoaXNbdF07XG4gIGUudCA9IHRoaXMudCwgZS5zID0gdGhpcy5zO1xufVxuZnVuY3Rpb24genQoZSkge1xuICB0aGlzLnQgPSAxLCB0aGlzLnMgPSBlIDwgMCA/IC0xIDogMCwgZSA+IDAgPyB0aGlzWzBdID0gZSA6IGUgPCAtMSA/IHRoaXNbMF0gPSBlICsgdGhpcy5EViA6IHRoaXMudCA9IDA7XG59XG5mdW5jdGlvbiBSZShlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdC5mcm9tSW50KGUpLCB0O1xufVxuZnVuY3Rpb24gR3QoZSwgdCkge1xuICB2YXIgcjtcbiAgaWYgKHQgPT0gMTYpXG4gICAgciA9IDQ7XG4gIGVsc2UgaWYgKHQgPT0gOClcbiAgICByID0gMztcbiAgZWxzZSBpZiAodCA9PSAyNTYpXG4gICAgciA9IDg7XG4gIGVsc2UgaWYgKHQgPT0gMilcbiAgICByID0gMTtcbiAgZWxzZSBpZiAodCA9PSAzMilcbiAgICByID0gNTtcbiAgZWxzZSBpZiAodCA9PSA0KVxuICAgIHIgPSAyO1xuICBlbHNlIHtcbiAgICB0aGlzLmZyb21SYWRpeChlLCB0KTtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy50ID0gMCwgdGhpcy5zID0gMDtcbiAgZm9yICh2YXIgaSA9IGUubGVuZ3RoLCBzID0gITEsIG4gPSAwOyAtLWkgPj0gMDsgKSB7XG4gICAgdmFyIGggPSByID09IDggPyBlW2ldICYgMjU1IDogd3QoZSwgaSk7XG4gICAgaWYgKGggPCAwKSB7XG4gICAgICBlLmNoYXJBdChpKSA9PSBcIi1cIiAmJiAocyA9ICEwKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBzID0gITEsIG4gPT0gMCA/IHRoaXNbdGhpcy50KytdID0gaCA6IG4gKyByID4gdGhpcy5EQiA/ICh0aGlzW3RoaXMudCAtIDFdIHw9IChoICYgKDEgPDwgdGhpcy5EQiAtIG4pIC0gMSkgPDwgbiwgdGhpc1t0aGlzLnQrK10gPSBoID4+IHRoaXMuREIgLSBuKSA6IHRoaXNbdGhpcy50IC0gMV0gfD0gaCA8PCBuLCBuICs9IHIsIG4gPj0gdGhpcy5EQiAmJiAobiAtPSB0aGlzLkRCKTtcbiAgfVxuICByID09IDggJiYgZVswXSAmIDEyOCAmJiAodGhpcy5zID0gLTEsIG4gPiAwICYmICh0aGlzW3RoaXMudCAtIDFdIHw9ICgxIDw8IHRoaXMuREIgLSBuKSAtIDEgPDwgbikpLCB0aGlzLmNsYW1wKCksIHMgJiYgUi5aRVJPLnN1YlRvKHRoaXMsIHRoaXMpO1xufVxuZnVuY3Rpb24gV3QoKSB7XG4gIGZvciAodmFyIGUgPSB0aGlzLnMgJiB0aGlzLkRNOyB0aGlzLnQgPiAwICYmIHRoaXNbdGhpcy50IC0gMV0gPT0gZTsgKVxuICAgIC0tdGhpcy50O1xufVxuZnVuY3Rpb24gWHQoZSkge1xuICBpZiAodGhpcy5zIDwgMClcbiAgICByZXR1cm4gXCItXCIgKyB0aGlzLm5lZ2F0ZSgpLnRvU3RyaW5nKGUpO1xuICB2YXIgdDtcbiAgaWYgKGUgPT0gMTYpXG4gICAgdCA9IDQ7XG4gIGVsc2UgaWYgKGUgPT0gOClcbiAgICB0ID0gMztcbiAgZWxzZSBpZiAoZSA9PSAyKVxuICAgIHQgPSAxO1xuICBlbHNlIGlmIChlID09IDMyKVxuICAgIHQgPSA1O1xuICBlbHNlIGlmIChlID09IDQpXG4gICAgdCA9IDI7XG4gIGVsc2VcbiAgICByZXR1cm4gdGhpcy50b1JhZGl4KGUpO1xuICB2YXIgciA9ICgxIDw8IHQpIC0gMSwgaSwgcyA9ICExLCBuID0gXCJcIiwgaCA9IHRoaXMudCwgdSA9IHRoaXMuREIgLSBoICogdGhpcy5EQiAlIHQ7XG4gIGlmIChoLS0gPiAwKVxuICAgIGZvciAodSA8IHRoaXMuREIgJiYgKGkgPSB0aGlzW2hdID4+IHUpID4gMCAmJiAocyA9ICEwLCBuID0gRGUoaSkpOyBoID49IDA7IClcbiAgICAgIHUgPCB0ID8gKGkgPSAodGhpc1toXSAmICgxIDw8IHUpIC0gMSkgPDwgdCAtIHUsIGkgfD0gdGhpc1stLWhdID4+ICh1ICs9IHRoaXMuREIgLSB0KSkgOiAoaSA9IHRoaXNbaF0gPj4gKHUgLT0gdCkgJiByLCB1IDw9IDAgJiYgKHUgKz0gdGhpcy5EQiwgLS1oKSksIGkgPiAwICYmIChzID0gITApLCBzICYmIChuICs9IERlKGkpKTtcbiAgcmV0dXJuIHMgPyBuIDogXCIwXCI7XG59XG5mdW5jdGlvbiBKdCgpIHtcbiAgdmFyIGUgPSBfKCk7XG4gIHJldHVybiBSLlpFUk8uc3ViVG8odGhpcywgZSksIGU7XG59XG5mdW5jdGlvbiAkdCgpIHtcbiAgcmV0dXJuIHRoaXMucyA8IDAgPyB0aGlzLm5lZ2F0ZSgpIDogdGhpcztcbn1cbmZ1bmN0aW9uIFl0KGUpIHtcbiAgdmFyIHQgPSB0aGlzLnMgLSBlLnM7XG4gIGlmICh0ICE9IDApXG4gICAgcmV0dXJuIHQ7XG4gIHZhciByID0gdGhpcy50O1xuICBpZiAodCA9IHIgLSBlLnQsIHQgIT0gMClcbiAgICByZXR1cm4gdGhpcy5zIDwgMCA/IC10IDogdDtcbiAgZm9yICg7IC0tciA+PSAwOyApXG4gICAgaWYgKCh0ID0gdGhpc1tyXSAtIGVbcl0pICE9IDApXG4gICAgICByZXR1cm4gdDtcbiAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBZZShlKSB7XG4gIHZhciB0ID0gMSwgcjtcbiAgcmV0dXJuIChyID0gZSA+Pj4gMTYpICE9IDAgJiYgKGUgPSByLCB0ICs9IDE2KSwgKHIgPSBlID4+IDgpICE9IDAgJiYgKGUgPSByLCB0ICs9IDgpLCAociA9IGUgPj4gNCkgIT0gMCAmJiAoZSA9IHIsIHQgKz0gNCksIChyID0gZSA+PiAyKSAhPSAwICYmIChlID0gciwgdCArPSAyKSwgKHIgPSBlID4+IDEpICE9IDAgJiYgKGUgPSByLCB0ICs9IDEpLCB0O1xufVxuZnVuY3Rpb24gWnQoKSB7XG4gIHJldHVybiB0aGlzLnQgPD0gMCA/IDAgOiB0aGlzLkRCICogKHRoaXMudCAtIDEpICsgWWUodGhpc1t0aGlzLnQgLSAxXSBeIHRoaXMucyAmIHRoaXMuRE0pO1xufVxuZnVuY3Rpb24gUXQoZSwgdCkge1xuICB2YXIgcjtcbiAgZm9yIChyID0gdGhpcy50IC0gMTsgciA+PSAwOyAtLXIpXG4gICAgdFtyICsgZV0gPSB0aGlzW3JdO1xuICBmb3IgKHIgPSBlIC0gMTsgciA+PSAwOyAtLXIpXG4gICAgdFtyXSA9IDA7XG4gIHQudCA9IHRoaXMudCArIGUsIHQucyA9IHRoaXMucztcbn1cbmZ1bmN0aW9uIGVyKGUsIHQpIHtcbiAgZm9yICh2YXIgciA9IGU7IHIgPCB0aGlzLnQ7ICsrcilcbiAgICB0W3IgLSBlXSA9IHRoaXNbcl07XG4gIHQudCA9IE1hdGgubWF4KHRoaXMudCAtIGUsIDApLCB0LnMgPSB0aGlzLnM7XG59XG5mdW5jdGlvbiB0cihlLCB0KSB7XG4gIHZhciByID0gZSAlIHRoaXMuREIsIGkgPSB0aGlzLkRCIC0gciwgcyA9ICgxIDw8IGkpIC0gMSwgbiA9IE1hdGguZmxvb3IoZSAvIHRoaXMuREIpLCBoID0gdGhpcy5zIDw8IHIgJiB0aGlzLkRNLCB1O1xuICBmb3IgKHUgPSB0aGlzLnQgLSAxOyB1ID49IDA7IC0tdSlcbiAgICB0W3UgKyBuICsgMV0gPSB0aGlzW3VdID4+IGkgfCBoLCBoID0gKHRoaXNbdV0gJiBzKSA8PCByO1xuICBmb3IgKHUgPSBuIC0gMTsgdSA+PSAwOyAtLXUpXG4gICAgdFt1XSA9IDA7XG4gIHRbbl0gPSBoLCB0LnQgPSB0aGlzLnQgKyBuICsgMSwgdC5zID0gdGhpcy5zLCB0LmNsYW1wKCk7XG59XG5mdW5jdGlvbiBycihlLCB0KSB7XG4gIHQucyA9IHRoaXMucztcbiAgdmFyIHIgPSBNYXRoLmZsb29yKGUgLyB0aGlzLkRCKTtcbiAgaWYgKHIgPj0gdGhpcy50KSB7XG4gICAgdC50ID0gMDtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGkgPSBlICUgdGhpcy5EQiwgcyA9IHRoaXMuREIgLSBpLCBuID0gKDEgPDwgaSkgLSAxO1xuICB0WzBdID0gdGhpc1tyXSA+PiBpO1xuICBmb3IgKHZhciBoID0gciArIDE7IGggPCB0aGlzLnQ7ICsraClcbiAgICB0W2ggLSByIC0gMV0gfD0gKHRoaXNbaF0gJiBuKSA8PCBzLCB0W2ggLSByXSA9IHRoaXNbaF0gPj4gaTtcbiAgaSA+IDAgJiYgKHRbdGhpcy50IC0gciAtIDFdIHw9ICh0aGlzLnMgJiBuKSA8PCBzKSwgdC50ID0gdGhpcy50IC0gciwgdC5jbGFtcCgpO1xufVxuZnVuY3Rpb24gaXIoZSwgdCkge1xuICBmb3IgKHZhciByID0gMCwgaSA9IDAsIHMgPSBNYXRoLm1pbihlLnQsIHRoaXMudCk7IHIgPCBzOyApXG4gICAgaSArPSB0aGlzW3JdIC0gZVtyXSwgdFtyKytdID0gaSAmIHRoaXMuRE0sIGkgPj49IHRoaXMuREI7XG4gIGlmIChlLnQgPCB0aGlzLnQpIHtcbiAgICBmb3IgKGkgLT0gZS5zOyByIDwgdGhpcy50OyApXG4gICAgICBpICs9IHRoaXNbcl0sIHRbcisrXSA9IGkgJiB0aGlzLkRNLCBpID4+PSB0aGlzLkRCO1xuICAgIGkgKz0gdGhpcy5zO1xuICB9IGVsc2Uge1xuICAgIGZvciAoaSArPSB0aGlzLnM7IHIgPCBlLnQ7IClcbiAgICAgIGkgLT0gZVtyXSwgdFtyKytdID0gaSAmIHRoaXMuRE0sIGkgPj49IHRoaXMuREI7XG4gICAgaSAtPSBlLnM7XG4gIH1cbiAgdC5zID0gaSA8IDAgPyAtMSA6IDAsIGkgPCAtMSA/IHRbcisrXSA9IHRoaXMuRFYgKyBpIDogaSA+IDAgJiYgKHRbcisrXSA9IGkpLCB0LnQgPSByLCB0LmNsYW1wKCk7XG59XG5mdW5jdGlvbiBucihlLCB0KSB7XG4gIHZhciByID0gdGhpcy5hYnMoKSwgaSA9IGUuYWJzKCksIHMgPSByLnQ7XG4gIGZvciAodC50ID0gcyArIGkudDsgLS1zID49IDA7IClcbiAgICB0W3NdID0gMDtcbiAgZm9yIChzID0gMDsgcyA8IGkudDsgKytzKVxuICAgIHRbcyArIHIudF0gPSByLmFtKDAsIGlbc10sIHQsIHMsIDAsIHIudCk7XG4gIHQucyA9IDAsIHQuY2xhbXAoKSwgdGhpcy5zICE9IGUucyAmJiBSLlpFUk8uc3ViVG8odCwgdCk7XG59XG5mdW5jdGlvbiBzcihlKSB7XG4gIGZvciAodmFyIHQgPSB0aGlzLmFicygpLCByID0gZS50ID0gMiAqIHQudDsgLS1yID49IDA7IClcbiAgICBlW3JdID0gMDtcbiAgZm9yIChyID0gMDsgciA8IHQudCAtIDE7ICsrcikge1xuICAgIHZhciBpID0gdC5hbShyLCB0W3JdLCBlLCAyICogciwgMCwgMSk7XG4gICAgKGVbciArIHQudF0gKz0gdC5hbShyICsgMSwgMiAqIHRbcl0sIGUsIDIgKiByICsgMSwgaSwgdC50IC0gciAtIDEpKSA+PSB0LkRWICYmIChlW3IgKyB0LnRdIC09IHQuRFYsIGVbciArIHQudCArIDFdID0gMSk7XG4gIH1cbiAgZS50ID4gMCAmJiAoZVtlLnQgLSAxXSArPSB0LmFtKHIsIHRbcl0sIGUsIDIgKiByLCAwLCAxKSksIGUucyA9IDAsIGUuY2xhbXAoKTtcbn1cbmZ1bmN0aW9uIGFyKGUsIHQsIHIpIHtcbiAgdmFyIGkgPSBlLmFicygpO1xuICBpZiAoIShpLnQgPD0gMCkpIHtcbiAgICB2YXIgcyA9IHRoaXMuYWJzKCk7XG4gICAgaWYgKHMudCA8IGkudCkge1xuICAgICAgdCAhPSBudWxsICYmIHQuZnJvbUludCgwKSwgciAhPSBudWxsICYmIHRoaXMuY29weVRvKHIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByID09IG51bGwgJiYgKHIgPSBfKCkpO1xuICAgIHZhciBuID0gXygpLCBoID0gdGhpcy5zLCB1ID0gZS5zLCBwID0gdGhpcy5EQiAtIFllKGlbaS50IC0gMV0pO1xuICAgIHAgPiAwID8gKGkubFNoaWZ0VG8ocCwgbiksIHMubFNoaWZ0VG8ocCwgcikpIDogKGkuY29weVRvKG4pLCBzLmNvcHlUbyhyKSk7XG4gICAgdmFyIGMgPSBuLnQsIHkgPSBuW2MgLSAxXTtcbiAgICBpZiAoeSAhPSAwKSB7XG4gICAgICB2YXIgdiA9IHkgKiAoMSA8PCB0aGlzLkYxKSArIChjID4gMSA/IG5bYyAtIDJdID4+IHRoaXMuRjIgOiAwKSwgbyA9IHRoaXMuRlYgLyB2LCBsID0gKDEgPDwgdGhpcy5GMSkgLyB2LCBmID0gMSA8PCB0aGlzLkYyLCBkID0gci50LCBnID0gZCAtIGMsIFMgPSB0ID8/IF8oKTtcbiAgICAgIGZvciAobi5kbFNoaWZ0VG8oZywgUyksIHIuY29tcGFyZVRvKFMpID49IDAgJiYgKHJbci50KytdID0gMSwgci5zdWJUbyhTLCByKSksIFIuT05FLmRsU2hpZnRUbyhjLCBTKSwgUy5zdWJUbyhuLCBuKTsgbi50IDwgYzsgKVxuICAgICAgICBuW24udCsrXSA9IDA7XG4gICAgICBmb3IgKDsgLS1nID49IDA7ICkge1xuICAgICAgICB2YXIgYiA9IHJbLS1kXSA9PSB5ID8gdGhpcy5ETSA6IE1hdGguZmxvb3IocltkXSAqIG8gKyAocltkIC0gMV0gKyBmKSAqIGwpO1xuICAgICAgICBpZiAoKHJbZF0gKz0gbi5hbSgwLCBiLCByLCBnLCAwLCBjKSkgPCBiKVxuICAgICAgICAgIGZvciAobi5kbFNoaWZ0VG8oZywgUyksIHIuc3ViVG8oUywgcik7IHJbZF0gPCAtLWI7IClcbiAgICAgICAgICAgIHIuc3ViVG8oUywgcik7XG4gICAgICB9XG4gICAgICB0ICE9IG51bGwgJiYgKHIuZHJTaGlmdFRvKGMsIHQpLCBoICE9IHUgJiYgUi5aRVJPLnN1YlRvKHQsIHQpKSwgci50ID0gYywgci5jbGFtcCgpLCBwID4gMCAmJiByLnJTaGlmdFRvKHAsIHIpLCBoIDwgMCAmJiBSLlpFUk8uc3ViVG8ociwgcik7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBvcihlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdGhpcy5hYnMoKS5kaXZSZW1UbyhlLCBudWxsLCB0KSwgdGhpcy5zIDwgMCAmJiB0LmNvbXBhcmVUbyhSLlpFUk8pID4gMCAmJiBlLnN1YlRvKHQsIHQpLCB0O1xufVxuZnVuY3Rpb24gT2UoZSkge1xuICB0aGlzLm0gPSBlO1xufVxuZnVuY3Rpb24gdXIoZSkge1xuICByZXR1cm4gZS5zIDwgMCB8fCBlLmNvbXBhcmVUbyh0aGlzLm0pID49IDAgPyBlLm1vZCh0aGlzLm0pIDogZTtcbn1cbmZ1bmN0aW9uIGhyKGUpIHtcbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBmcihlKSB7XG4gIGUuZGl2UmVtVG8odGhpcy5tLCBudWxsLCBlKTtcbn1cbmZ1bmN0aW9uIGNyKGUsIHQsIHIpIHtcbiAgZS5tdWx0aXBseVRvKHQsIHIpLCB0aGlzLnJlZHVjZShyKTtcbn1cbmZ1bmN0aW9uIGxyKGUsIHQpIHtcbiAgZS5zcXVhcmVUbyh0KSwgdGhpcy5yZWR1Y2UodCk7XG59XG5PZS5wcm90b3R5cGUuY29udmVydCA9IHVyO1xuT2UucHJvdG90eXBlLnJldmVydCA9IGhyO1xuT2UucHJvdG90eXBlLnJlZHVjZSA9IGZyO1xuT2UucHJvdG90eXBlLm11bFRvID0gY3I7XG5PZS5wcm90b3R5cGUuc3FyVG8gPSBscjtcbmZ1bmN0aW9uIGRyKCkge1xuICBpZiAodGhpcy50IDwgMSlcbiAgICByZXR1cm4gMDtcbiAgdmFyIGUgPSB0aGlzWzBdO1xuICBpZiAoIShlICYgMSkpXG4gICAgcmV0dXJuIDA7XG4gIHZhciB0ID0gZSAmIDM7XG4gIHJldHVybiB0ID0gdCAqICgyIC0gKGUgJiAxNSkgKiB0KSAmIDE1LCB0ID0gdCAqICgyIC0gKGUgJiAyNTUpICogdCkgJiAyNTUsIHQgPSB0ICogKDIgLSAoKGUgJiA2NTUzNSkgKiB0ICYgNjU1MzUpKSAmIDY1NTM1LCB0ID0gdCAqICgyIC0gZSAqIHQgJSB0aGlzLkRWKSAlIHRoaXMuRFYsIHQgPiAwID8gdGhpcy5EViAtIHQgOiAtdDtcbn1cbmZ1bmN0aW9uIGplKGUpIHtcbiAgdGhpcy5tID0gZSwgdGhpcy5tcCA9IGUuaW52RGlnaXQoKSwgdGhpcy5tcGwgPSB0aGlzLm1wICYgMzI3NjcsIHRoaXMubXBoID0gdGhpcy5tcCA+PiAxNSwgdGhpcy51bSA9ICgxIDw8IGUuREIgLSAxNSkgLSAxLCB0aGlzLm10MiA9IDIgKiBlLnQ7XG59XG5mdW5jdGlvbiBwcihlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gZS5hYnMoKS5kbFNoaWZ0VG8odGhpcy5tLnQsIHQpLCB0LmRpdlJlbVRvKHRoaXMubSwgbnVsbCwgdCksIGUucyA8IDAgJiYgdC5jb21wYXJlVG8oUi5aRVJPKSA+IDAgJiYgdGhpcy5tLnN1YlRvKHQsIHQpLCB0O1xufVxuZnVuY3Rpb24gdnIoZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIGUuY29weVRvKHQpLCB0aGlzLnJlZHVjZSh0KSwgdDtcbn1cbmZ1bmN0aW9uIGdyKGUpIHtcbiAgZm9yICg7IGUudCA8PSB0aGlzLm10MjsgKVxuICAgIGVbZS50KytdID0gMDtcbiAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLm0udDsgKyt0KSB7XG4gICAgdmFyIHIgPSBlW3RdICYgMzI3NjcsIGkgPSByICogdGhpcy5tcGwgKyAoKHIgKiB0aGlzLm1waCArIChlW3RdID4+IDE1KSAqIHRoaXMubXBsICYgdGhpcy51bSkgPDwgMTUpICYgZS5ETTtcbiAgICBmb3IgKHIgPSB0ICsgdGhpcy5tLnQsIGVbcl0gKz0gdGhpcy5tLmFtKDAsIGksIGUsIHQsIDAsIHRoaXMubS50KTsgZVtyXSA+PSBlLkRWOyApXG4gICAgICBlW3JdIC09IGUuRFYsIGVbKytyXSsrO1xuICB9XG4gIGUuY2xhbXAoKSwgZS5kclNoaWZ0VG8odGhpcy5tLnQsIGUpLCBlLmNvbXBhcmVUbyh0aGlzLm0pID49IDAgJiYgZS5zdWJUbyh0aGlzLm0sIGUpO1xufVxuZnVuY3Rpb24geXIoZSwgdCkge1xuICBlLnNxdWFyZVRvKHQpLCB0aGlzLnJlZHVjZSh0KTtcbn1cbmZ1bmN0aW9uIG1yKGUsIHQsIHIpIHtcbiAgZS5tdWx0aXBseVRvKHQsIHIpLCB0aGlzLnJlZHVjZShyKTtcbn1cbmplLnByb3RvdHlwZS5jb252ZXJ0ID0gcHI7XG5qZS5wcm90b3R5cGUucmV2ZXJ0ID0gdnI7XG5qZS5wcm90b3R5cGUucmVkdWNlID0gZ3I7XG5qZS5wcm90b3R5cGUubXVsVG8gPSBtcjtcbmplLnByb3RvdHlwZS5zcXJUbyA9IHlyO1xuZnVuY3Rpb24geHIoKSB7XG4gIHJldHVybiAodGhpcy50ID4gMCA/IHRoaXNbMF0gJiAxIDogdGhpcy5zKSA9PSAwO1xufVxuZnVuY3Rpb24gU3IoZSwgdCkge1xuICBpZiAoZSA+IDQyOTQ5NjcyOTUgfHwgZSA8IDEpXG4gICAgcmV0dXJuIFIuT05FO1xuICB2YXIgciA9IF8oKSwgaSA9IF8oKSwgcyA9IHQuY29udmVydCh0aGlzKSwgbiA9IFllKGUpIC0gMTtcbiAgZm9yIChzLmNvcHlUbyhyKTsgLS1uID49IDA7IClcbiAgICBpZiAodC5zcXJUbyhyLCBpKSwgKGUgJiAxIDw8IG4pID4gMClcbiAgICAgIHQubXVsVG8oaSwgcywgcik7XG4gICAgZWxzZSB7XG4gICAgICB2YXIgaCA9IHI7XG4gICAgICByID0gaSwgaSA9IGg7XG4gICAgfVxuICByZXR1cm4gdC5yZXZlcnQocik7XG59XG5mdW5jdGlvbiBFcihlLCB0KSB7XG4gIHZhciByO1xuICByZXR1cm4gZSA8IDI1NiB8fCB0LmlzRXZlbigpID8gciA9IG5ldyBPZSh0KSA6IHIgPSBuZXcgamUodCksIHRoaXMuZXhwKGUsIHIpO1xufVxuUi5wcm90b3R5cGUuY29weVRvID0gVXQ7XG5SLnByb3RvdHlwZS5mcm9tSW50ID0genQ7XG5SLnByb3RvdHlwZS5mcm9tU3RyaW5nID0gR3Q7XG5SLnByb3RvdHlwZS5jbGFtcCA9IFd0O1xuUi5wcm90b3R5cGUuZGxTaGlmdFRvID0gUXQ7XG5SLnByb3RvdHlwZS5kclNoaWZ0VG8gPSBlcjtcblIucHJvdG90eXBlLmxTaGlmdFRvID0gdHI7XG5SLnByb3RvdHlwZS5yU2hpZnRUbyA9IHJyO1xuUi5wcm90b3R5cGUuc3ViVG8gPSBpcjtcblIucHJvdG90eXBlLm11bHRpcGx5VG8gPSBucjtcblIucHJvdG90eXBlLnNxdWFyZVRvID0gc3I7XG5SLnByb3RvdHlwZS5kaXZSZW1UbyA9IGFyO1xuUi5wcm90b3R5cGUuaW52RGlnaXQgPSBkcjtcblIucHJvdG90eXBlLmlzRXZlbiA9IHhyO1xuUi5wcm90b3R5cGUuZXhwID0gU3I7XG5SLnByb3RvdHlwZS50b1N0cmluZyA9IFh0O1xuUi5wcm90b3R5cGUubmVnYXRlID0gSnQ7XG5SLnByb3RvdHlwZS5hYnMgPSAkdDtcblIucHJvdG90eXBlLmNvbXBhcmVUbyA9IFl0O1xuUi5wcm90b3R5cGUuYml0TGVuZ3RoID0gWnQ7XG5SLnByb3RvdHlwZS5tb2QgPSBvcjtcblIucHJvdG90eXBlLm1vZFBvd0ludCA9IEVyO1xuUi5aRVJPID0gUmUoMCk7XG5SLk9ORSA9IFJlKDEpO1xuLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbmZ1bmN0aW9uIHdyKCkge1xuICB2YXIgZSA9IF8oKTtcbiAgcmV0dXJuIHRoaXMuY29weVRvKGUpLCBlO1xufVxuZnVuY3Rpb24gRnIoKSB7XG4gIGlmICh0aGlzLnMgPCAwKSB7XG4gICAgaWYgKHRoaXMudCA9PSAxKVxuICAgICAgcmV0dXJuIHRoaXNbMF0gLSB0aGlzLkRWO1xuICAgIGlmICh0aGlzLnQgPT0gMClcbiAgICAgIHJldHVybiAtMTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhpcy50ID09IDEpXG4gICAgICByZXR1cm4gdGhpc1swXTtcbiAgICBpZiAodGhpcy50ID09IDApXG4gICAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gKHRoaXNbMV0gJiAoMSA8PCAzMiAtIHRoaXMuREIpIC0gMSkgPDwgdGhpcy5EQiB8IHRoaXNbMF07XG59XG5mdW5jdGlvbiBicigpIHtcbiAgcmV0dXJuIHRoaXMudCA9PSAwID8gdGhpcy5zIDogdGhpc1swXSA8PCAyNCA+PiAyNDtcbn1cbmZ1bmN0aW9uIEFyKCkge1xuICByZXR1cm4gdGhpcy50ID09IDAgPyB0aGlzLnMgOiB0aGlzWzBdIDw8IDE2ID4+IDE2O1xufVxuZnVuY3Rpb24gRHIoZSkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLkxOMiAqIHRoaXMuREIgLyBNYXRoLmxvZyhlKSk7XG59XG5mdW5jdGlvbiBQcigpIHtcbiAgcmV0dXJuIHRoaXMucyA8IDAgPyAtMSA6IHRoaXMudCA8PSAwIHx8IHRoaXMudCA9PSAxICYmIHRoaXNbMF0gPD0gMCA/IDAgOiAxO1xufVxuZnVuY3Rpb24gSXIoZSkge1xuICBpZiAoZSA9PSBudWxsICYmIChlID0gMTApLCB0aGlzLnNpZ251bSgpID09IDAgfHwgZSA8IDIgfHwgZSA+IDM2KVxuICAgIHJldHVybiBcIjBcIjtcbiAgdmFyIHQgPSB0aGlzLmNodW5rU2l6ZShlKSwgciA9IE1hdGgucG93KGUsIHQpLCBpID0gUmUociksIHMgPSBfKCksIG4gPSBfKCksIGggPSBcIlwiO1xuICBmb3IgKHRoaXMuZGl2UmVtVG8oaSwgcywgbik7IHMuc2lnbnVtKCkgPiAwOyApXG4gICAgaCA9IChyICsgbi5pbnRWYWx1ZSgpKS50b1N0cmluZyhlKS5zdWJzdHIoMSkgKyBoLCBzLmRpdlJlbVRvKGksIHMsIG4pO1xuICByZXR1cm4gbi5pbnRWYWx1ZSgpLnRvU3RyaW5nKGUpICsgaDtcbn1cbmZ1bmN0aW9uIENyKGUsIHQpIHtcbiAgdGhpcy5mcm9tSW50KDApLCB0ID09IG51bGwgJiYgKHQgPSAxMCk7XG4gIGZvciAodmFyIHIgPSB0aGlzLmNodW5rU2l6ZSh0KSwgaSA9IE1hdGgucG93KHQsIHIpLCBzID0gITEsIG4gPSAwLCBoID0gMCwgdSA9IDA7IHUgPCBlLmxlbmd0aDsgKyt1KSB7XG4gICAgdmFyIHAgPSB3dChlLCB1KTtcbiAgICBpZiAocCA8IDApIHtcbiAgICAgIGUuY2hhckF0KHUpID09IFwiLVwiICYmIHRoaXMuc2lnbnVtKCkgPT0gMCAmJiAocyA9ICEwKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBoID0gdCAqIGggKyBwLCArK24gPj0gciAmJiAodGhpcy5kTXVsdGlwbHkoaSksIHRoaXMuZEFkZE9mZnNldChoLCAwKSwgbiA9IDAsIGggPSAwKTtcbiAgfVxuICBuID4gMCAmJiAodGhpcy5kTXVsdGlwbHkoTWF0aC5wb3codCwgbikpLCB0aGlzLmRBZGRPZmZzZXQoaCwgMCkpLCBzICYmIFIuWkVSTy5zdWJUbyh0aGlzLCB0aGlzKTtcbn1cbmZ1bmN0aW9uIFJyKGUsIHQsIHIpIHtcbiAgaWYgKHR5cGVvZiB0ID09IFwibnVtYmVyXCIpXG4gICAgaWYgKGUgPCAyKVxuICAgICAgdGhpcy5mcm9tSW50KDEpO1xuICAgIGVsc2VcbiAgICAgIGZvciAodGhpcy5mcm9tTnVtYmVyKGUsIHIpLCB0aGlzLnRlc3RCaXQoZSAtIDEpIHx8IHRoaXMuYml0d2lzZVRvKFIuT05FLnNoaWZ0TGVmdChlIC0gMSksIHN0LCB0aGlzKSwgdGhpcy5pc0V2ZW4oKSAmJiB0aGlzLmRBZGRPZmZzZXQoMSwgMCk7ICF0aGlzLmlzUHJvYmFibGVQcmltZSh0KTsgKVxuICAgICAgICB0aGlzLmRBZGRPZmZzZXQoMiwgMCksIHRoaXMuYml0TGVuZ3RoKCkgPiBlICYmIHRoaXMuc3ViVG8oUi5PTkUuc2hpZnRMZWZ0KGUgLSAxKSwgdGhpcyk7XG4gIGVsc2Uge1xuICAgIHZhciBpID0gbmV3IEFycmF5KCksIHMgPSBlICYgNztcbiAgICBpLmxlbmd0aCA9IChlID4+IDMpICsgMSwgdC5uZXh0Qnl0ZXMoaSksIHMgPiAwID8gaVswXSAmPSAoMSA8PCBzKSAtIDEgOiBpWzBdID0gMCwgdGhpcy5mcm9tU3RyaW5nKGksIDI1Nik7XG4gIH1cbn1cbmZ1bmN0aW9uIFRyKCkge1xuICB2YXIgZSA9IHRoaXMudCwgdCA9IG5ldyBBcnJheSgpO1xuICB0WzBdID0gdGhpcy5zO1xuICB2YXIgciA9IHRoaXMuREIgLSBlICogdGhpcy5EQiAlIDgsIGksIHMgPSAwO1xuICBpZiAoZS0tID4gMClcbiAgICBmb3IgKHIgPCB0aGlzLkRCICYmIChpID0gdGhpc1tlXSA+PiByKSAhPSAodGhpcy5zICYgdGhpcy5ETSkgPj4gciAmJiAodFtzKytdID0gaSB8IHRoaXMucyA8PCB0aGlzLkRCIC0gcik7IGUgPj0gMDsgKVxuICAgICAgciA8IDggPyAoaSA9ICh0aGlzW2VdICYgKDEgPDwgcikgLSAxKSA8PCA4IC0gciwgaSB8PSB0aGlzWy0tZV0gPj4gKHIgKz0gdGhpcy5EQiAtIDgpKSA6IChpID0gdGhpc1tlXSA+PiAociAtPSA4KSAmIDI1NSwgciA8PSAwICYmIChyICs9IHRoaXMuREIsIC0tZSkpLCBpICYgMTI4ICYmIChpIHw9IC0yNTYpLCBzID09IDAgJiYgKHRoaXMucyAmIDEyOCkgIT0gKGkgJiAxMjgpICYmICsrcywgKHMgPiAwIHx8IGkgIT0gdGhpcy5zKSAmJiAodFtzKytdID0gaSk7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gQnIoZSkge1xuICByZXR1cm4gdGhpcy5jb21wYXJlVG8oZSkgPT0gMDtcbn1cbmZ1bmN0aW9uIE5yKGUpIHtcbiAgcmV0dXJuIHRoaXMuY29tcGFyZVRvKGUpIDwgMCA/IHRoaXMgOiBlO1xufVxuZnVuY3Rpb24gSHIoZSkge1xuICByZXR1cm4gdGhpcy5jb21wYXJlVG8oZSkgPiAwID8gdGhpcyA6IGU7XG59XG5mdW5jdGlvbiBPcihlLCB0LCByKSB7XG4gIHZhciBpLCBzLCBuID0gTWF0aC5taW4oZS50LCB0aGlzLnQpO1xuICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIHJbaV0gPSB0KHRoaXNbaV0sIGVbaV0pO1xuICBpZiAoZS50IDwgdGhpcy50KSB7XG4gICAgZm9yIChzID0gZS5zICYgdGhpcy5ETSwgaSA9IG47IGkgPCB0aGlzLnQ7ICsraSlcbiAgICAgIHJbaV0gPSB0KHRoaXNbaV0sIHMpO1xuICAgIHIudCA9IHRoaXMudDtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHMgPSB0aGlzLnMgJiB0aGlzLkRNLCBpID0gbjsgaSA8IGUudDsgKytpKVxuICAgICAgcltpXSA9IHQocywgZVtpXSk7XG4gICAgci50ID0gZS50O1xuICB9XG4gIHIucyA9IHQodGhpcy5zLCBlLnMpLCByLmNsYW1wKCk7XG59XG5mdW5jdGlvbiBqcihlLCB0KSB7XG4gIHJldHVybiBlICYgdDtcbn1cbmZ1bmN0aW9uIFZyKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiB0aGlzLmJpdHdpc2VUbyhlLCBqciwgdCksIHQ7XG59XG5mdW5jdGlvbiBzdChlLCB0KSB7XG4gIHJldHVybiBlIHwgdDtcbn1cbmZ1bmN0aW9uIEtyKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiB0aGlzLmJpdHdpc2VUbyhlLCBzdCwgdCksIHQ7XG59XG5mdW5jdGlvbiBGdChlLCB0KSB7XG4gIHJldHVybiBlIF4gdDtcbn1cbmZ1bmN0aW9uIExyKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiB0aGlzLmJpdHdpc2VUbyhlLCBGdCwgdCksIHQ7XG59XG5mdW5jdGlvbiBidChlLCB0KSB7XG4gIHJldHVybiBlICYgfnQ7XG59XG5mdW5jdGlvbiBxcihlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdGhpcy5iaXR3aXNlVG8oZSwgYnQsIHQpLCB0O1xufVxuZnVuY3Rpb24ga3IoKSB7XG4gIGZvciAodmFyIGUgPSBfKCksIHQgPSAwOyB0IDwgdGhpcy50OyArK3QpXG4gICAgZVt0XSA9IHRoaXMuRE0gJiB+dGhpc1t0XTtcbiAgcmV0dXJuIGUudCA9IHRoaXMudCwgZS5zID0gfnRoaXMucywgZTtcbn1cbmZ1bmN0aW9uIE1yKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiBlIDwgMCA/IHRoaXMuclNoaWZ0VG8oLWUsIHQpIDogdGhpcy5sU2hpZnRUbyhlLCB0KSwgdDtcbn1cbmZ1bmN0aW9uIF9yKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiBlIDwgMCA/IHRoaXMubFNoaWZ0VG8oLWUsIHQpIDogdGhpcy5yU2hpZnRUbyhlLCB0KSwgdDtcbn1cbmZ1bmN0aW9uIFVyKGUpIHtcbiAgaWYgKGUgPT0gMClcbiAgICByZXR1cm4gLTE7XG4gIHZhciB0ID0gMDtcbiAgcmV0dXJuIGUgJiA2NTUzNSB8fCAoZSA+Pj0gMTYsIHQgKz0gMTYpLCBlICYgMjU1IHx8IChlID4+PSA4LCB0ICs9IDgpLCBlICYgMTUgfHwgKGUgPj49IDQsIHQgKz0gNCksIGUgJiAzIHx8IChlID4+PSAyLCB0ICs9IDIpLCBlICYgMSB8fCArK3QsIHQ7XG59XG5mdW5jdGlvbiB6cigpIHtcbiAgZm9yICh2YXIgZSA9IDA7IGUgPCB0aGlzLnQ7ICsrZSlcbiAgICBpZiAodGhpc1tlXSAhPSAwKVxuICAgICAgcmV0dXJuIGUgKiB0aGlzLkRCICsgVXIodGhpc1tlXSk7XG4gIHJldHVybiB0aGlzLnMgPCAwID8gdGhpcy50ICogdGhpcy5EQiA6IC0xO1xufVxuZnVuY3Rpb24gR3IoZSkge1xuICBmb3IgKHZhciB0ID0gMDsgZSAhPSAwOyApXG4gICAgZSAmPSBlIC0gMSwgKyt0O1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIFdyKCkge1xuICBmb3IgKHZhciBlID0gMCwgdCA9IHRoaXMucyAmIHRoaXMuRE0sIHIgPSAwOyByIDwgdGhpcy50OyArK3IpXG4gICAgZSArPSBHcih0aGlzW3JdIF4gdCk7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gWHIoZSkge1xuICB2YXIgdCA9IE1hdGguZmxvb3IoZSAvIHRoaXMuREIpO1xuICByZXR1cm4gdCA+PSB0aGlzLnQgPyB0aGlzLnMgIT0gMCA6ICh0aGlzW3RdICYgMSA8PCBlICUgdGhpcy5EQikgIT0gMDtcbn1cbmZ1bmN0aW9uIEpyKGUsIHQpIHtcbiAgdmFyIHIgPSBSLk9ORS5zaGlmdExlZnQoZSk7XG4gIHJldHVybiB0aGlzLmJpdHdpc2VUbyhyLCB0LCByKSwgcjtcbn1cbmZ1bmN0aW9uICRyKGUpIHtcbiAgcmV0dXJuIHRoaXMuY2hhbmdlQml0KGUsIHN0KTtcbn1cbmZ1bmN0aW9uIFlyKGUpIHtcbiAgcmV0dXJuIHRoaXMuY2hhbmdlQml0KGUsIGJ0KTtcbn1cbmZ1bmN0aW9uIFpyKGUpIHtcbiAgcmV0dXJuIHRoaXMuY2hhbmdlQml0KGUsIEZ0KTtcbn1cbmZ1bmN0aW9uIFFyKGUsIHQpIHtcbiAgZm9yICh2YXIgciA9IDAsIGkgPSAwLCBzID0gTWF0aC5taW4oZS50LCB0aGlzLnQpOyByIDwgczsgKVxuICAgIGkgKz0gdGhpc1tyXSArIGVbcl0sIHRbcisrXSA9IGkgJiB0aGlzLkRNLCBpID4+PSB0aGlzLkRCO1xuICBpZiAoZS50IDwgdGhpcy50KSB7XG4gICAgZm9yIChpICs9IGUuczsgciA8IHRoaXMudDsgKVxuICAgICAgaSArPSB0aGlzW3JdLCB0W3IrK10gPSBpICYgdGhpcy5ETSwgaSA+Pj0gdGhpcy5EQjtcbiAgICBpICs9IHRoaXMucztcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGkgKz0gdGhpcy5zOyByIDwgZS50OyApXG4gICAgICBpICs9IGVbcl0sIHRbcisrXSA9IGkgJiB0aGlzLkRNLCBpID4+PSB0aGlzLkRCO1xuICAgIGkgKz0gZS5zO1xuICB9XG4gIHQucyA9IGkgPCAwID8gLTEgOiAwLCBpID4gMCA/IHRbcisrXSA9IGkgOiBpIDwgLTEgJiYgKHRbcisrXSA9IHRoaXMuRFYgKyBpKSwgdC50ID0gciwgdC5jbGFtcCgpO1xufVxuZnVuY3Rpb24gZWkoZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIHRoaXMuYWRkVG8oZSwgdCksIHQ7XG59XG5mdW5jdGlvbiB0aShlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdGhpcy5zdWJUbyhlLCB0KSwgdDtcbn1cbmZ1bmN0aW9uIHJpKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiB0aGlzLm11bHRpcGx5VG8oZSwgdCksIHQ7XG59XG5mdW5jdGlvbiBpaSgpIHtcbiAgdmFyIGUgPSBfKCk7XG4gIHJldHVybiB0aGlzLnNxdWFyZVRvKGUpLCBlO1xufVxuZnVuY3Rpb24gbmkoZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIHRoaXMuZGl2UmVtVG8oZSwgdCwgbnVsbCksIHQ7XG59XG5mdW5jdGlvbiBzaShlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdGhpcy5kaXZSZW1UbyhlLCBudWxsLCB0KSwgdDtcbn1cbmZ1bmN0aW9uIGFpKGUpIHtcbiAgdmFyIHQgPSBfKCksIHIgPSBfKCk7XG4gIHJldHVybiB0aGlzLmRpdlJlbVRvKGUsIHQsIHIpLCBuZXcgQXJyYXkodCwgcik7XG59XG5mdW5jdGlvbiBvaShlKSB7XG4gIHRoaXNbdGhpcy50XSA9IHRoaXMuYW0oMCwgZSAtIDEsIHRoaXMsIDAsIDAsIHRoaXMudCksICsrdGhpcy50LCB0aGlzLmNsYW1wKCk7XG59XG5mdW5jdGlvbiB1aShlLCB0KSB7XG4gIGlmIChlICE9IDApIHtcbiAgICBmb3IgKDsgdGhpcy50IDw9IHQ7IClcbiAgICAgIHRoaXNbdGhpcy50KytdID0gMDtcbiAgICBmb3IgKHRoaXNbdF0gKz0gZTsgdGhpc1t0XSA+PSB0aGlzLkRWOyApXG4gICAgICB0aGlzW3RdIC09IHRoaXMuRFYsICsrdCA+PSB0aGlzLnQgJiYgKHRoaXNbdGhpcy50KytdID0gMCksICsrdGhpc1t0XTtcbiAgfVxufVxuZnVuY3Rpb24gemUoKSB7XG59XG5mdW5jdGlvbiBBdChlKSB7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gaGkoZSwgdCwgcikge1xuICBlLm11bHRpcGx5VG8odCwgcik7XG59XG5mdW5jdGlvbiBmaShlLCB0KSB7XG4gIGUuc3F1YXJlVG8odCk7XG59XG56ZS5wcm90b3R5cGUuY29udmVydCA9IEF0O1xuemUucHJvdG90eXBlLnJldmVydCA9IEF0O1xuemUucHJvdG90eXBlLm11bFRvID0gaGk7XG56ZS5wcm90b3R5cGUuc3FyVG8gPSBmaTtcbmZ1bmN0aW9uIGNpKGUpIHtcbiAgcmV0dXJuIHRoaXMuZXhwKGUsIG5ldyB6ZSgpKTtcbn1cbmZ1bmN0aW9uIGxpKGUsIHQsIHIpIHtcbiAgdmFyIGkgPSBNYXRoLm1pbih0aGlzLnQgKyBlLnQsIHQpO1xuICBmb3IgKHIucyA9IDAsIHIudCA9IGk7IGkgPiAwOyApXG4gICAgclstLWldID0gMDtcbiAgdmFyIHM7XG4gIGZvciAocyA9IHIudCAtIHRoaXMudDsgaSA8IHM7ICsraSlcbiAgICByW2kgKyB0aGlzLnRdID0gdGhpcy5hbSgwLCBlW2ldLCByLCBpLCAwLCB0aGlzLnQpO1xuICBmb3IgKHMgPSBNYXRoLm1pbihlLnQsIHQpOyBpIDwgczsgKytpKVxuICAgIHRoaXMuYW0oMCwgZVtpXSwgciwgaSwgMCwgdCAtIGkpO1xuICByLmNsYW1wKCk7XG59XG5mdW5jdGlvbiBkaShlLCB0LCByKSB7XG4gIC0tdDtcbiAgdmFyIGkgPSByLnQgPSB0aGlzLnQgKyBlLnQgLSB0O1xuICBmb3IgKHIucyA9IDA7IC0taSA+PSAwOyApXG4gICAgcltpXSA9IDA7XG4gIGZvciAoaSA9IE1hdGgubWF4KHQgLSB0aGlzLnQsIDApOyBpIDwgZS50OyArK2kpXG4gICAgclt0aGlzLnQgKyBpIC0gdF0gPSB0aGlzLmFtKHQgLSBpLCBlW2ldLCByLCAwLCAwLCB0aGlzLnQgKyBpIC0gdCk7XG4gIHIuY2xhbXAoKSwgci5kclNoaWZ0VG8oMSwgcik7XG59XG5mdW5jdGlvbiBxZShlKSB7XG4gIHRoaXMucjIgPSBfKCksIHRoaXMucTMgPSBfKCksIFIuT05FLmRsU2hpZnRUbygyICogZS50LCB0aGlzLnIyKSwgdGhpcy5tdSA9IHRoaXMucjIuZGl2aWRlKGUpLCB0aGlzLm0gPSBlO1xufVxuZnVuY3Rpb24gcGkoZSkge1xuICBpZiAoZS5zIDwgMCB8fCBlLnQgPiAyICogdGhpcy5tLnQpXG4gICAgcmV0dXJuIGUubW9kKHRoaXMubSk7XG4gIGlmIChlLmNvbXBhcmVUbyh0aGlzLm0pIDwgMClcbiAgICByZXR1cm4gZTtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiBlLmNvcHlUbyh0KSwgdGhpcy5yZWR1Y2UodCksIHQ7XG59XG5mdW5jdGlvbiB2aShlKSB7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gZ2koZSkge1xuICBmb3IgKGUuZHJTaGlmdFRvKHRoaXMubS50IC0gMSwgdGhpcy5yMiksIGUudCA+IHRoaXMubS50ICsgMSAmJiAoZS50ID0gdGhpcy5tLnQgKyAxLCBlLmNsYW1wKCkpLCB0aGlzLm11Lm11bHRpcGx5VXBwZXJUbyh0aGlzLnIyLCB0aGlzLm0udCArIDEsIHRoaXMucTMpLCB0aGlzLm0ubXVsdGlwbHlMb3dlclRvKHRoaXMucTMsIHRoaXMubS50ICsgMSwgdGhpcy5yMik7IGUuY29tcGFyZVRvKHRoaXMucjIpIDwgMDsgKVxuICAgIGUuZEFkZE9mZnNldCgxLCB0aGlzLm0udCArIDEpO1xuICBmb3IgKGUuc3ViVG8odGhpcy5yMiwgZSk7IGUuY29tcGFyZVRvKHRoaXMubSkgPj0gMDsgKVxuICAgIGUuc3ViVG8odGhpcy5tLCBlKTtcbn1cbmZ1bmN0aW9uIHlpKGUsIHQpIHtcbiAgZS5zcXVhcmVUbyh0KSwgdGhpcy5yZWR1Y2UodCk7XG59XG5mdW5jdGlvbiBtaShlLCB0LCByKSB7XG4gIGUubXVsdGlwbHlUbyh0LCByKSwgdGhpcy5yZWR1Y2Uocik7XG59XG5xZS5wcm90b3R5cGUuY29udmVydCA9IHBpO1xucWUucHJvdG90eXBlLnJldmVydCA9IHZpO1xucWUucHJvdG90eXBlLnJlZHVjZSA9IGdpO1xucWUucHJvdG90eXBlLm11bFRvID0gbWk7XG5xZS5wcm90b3R5cGUuc3FyVG8gPSB5aTtcbmZ1bmN0aW9uIHhpKGUsIHQpIHtcbiAgdmFyIHIgPSBlLmJpdExlbmd0aCgpLCBpLCBzID0gUmUoMSksIG47XG4gIGlmIChyIDw9IDApXG4gICAgcmV0dXJuIHM7XG4gIHIgPCAxOCA/IGkgPSAxIDogciA8IDQ4ID8gaSA9IDMgOiByIDwgMTQ0ID8gaSA9IDQgOiByIDwgNzY4ID8gaSA9IDUgOiBpID0gNiwgciA8IDggPyBuID0gbmV3IE9lKHQpIDogdC5pc0V2ZW4oKSA/IG4gPSBuZXcgcWUodCkgOiBuID0gbmV3IGplKHQpO1xuICB2YXIgaCA9IG5ldyBBcnJheSgpLCB1ID0gMywgcCA9IGkgLSAxLCBjID0gKDEgPDwgaSkgLSAxO1xuICBpZiAoaFsxXSA9IG4uY29udmVydCh0aGlzKSwgaSA+IDEpIHtcbiAgICB2YXIgeSA9IF8oKTtcbiAgICBmb3IgKG4uc3FyVG8oaFsxXSwgeSk7IHUgPD0gYzsgKVxuICAgICAgaFt1XSA9IF8oKSwgbi5tdWxUbyh5LCBoW3UgLSAyXSwgaFt1XSksIHUgKz0gMjtcbiAgfVxuICB2YXIgdiA9IGUudCAtIDEsIG8sIGwgPSAhMCwgZiA9IF8oKSwgZDtcbiAgZm9yIChyID0gWWUoZVt2XSkgLSAxOyB2ID49IDA7ICkge1xuICAgIGZvciAociA+PSBwID8gbyA9IGVbdl0gPj4gciAtIHAgJiBjIDogKG8gPSAoZVt2XSAmICgxIDw8IHIgKyAxKSAtIDEpIDw8IHAgLSByLCB2ID4gMCAmJiAobyB8PSBlW3YgLSAxXSA+PiB0aGlzLkRCICsgciAtIHApKSwgdSA9IGk7ICEobyAmIDEpOyApXG4gICAgICBvID4+PSAxLCAtLXU7XG4gICAgaWYgKChyIC09IHUpIDwgMCAmJiAociArPSB0aGlzLkRCLCAtLXYpLCBsKVxuICAgICAgaFtvXS5jb3B5VG8ocyksIGwgPSAhMTtcbiAgICBlbHNlIHtcbiAgICAgIGZvciAoOyB1ID4gMTsgKVxuICAgICAgICBuLnNxclRvKHMsIGYpLCBuLnNxclRvKGYsIHMpLCB1IC09IDI7XG4gICAgICB1ID4gMCA/IG4uc3FyVG8ocywgZikgOiAoZCA9IHMsIHMgPSBmLCBmID0gZCksIG4ubXVsVG8oZiwgaFtvXSwgcyk7XG4gICAgfVxuICAgIGZvciAoOyB2ID49IDAgJiYgIShlW3ZdICYgMSA8PCByKTsgKVxuICAgICAgbi5zcXJUbyhzLCBmKSwgZCA9IHMsIHMgPSBmLCBmID0gZCwgLS1yIDwgMCAmJiAociA9IHRoaXMuREIgLSAxLCAtLXYpO1xuICB9XG4gIHJldHVybiBuLnJldmVydChzKTtcbn1cbmZ1bmN0aW9uIFNpKGUpIHtcbiAgdmFyIHQgPSB0aGlzLnMgPCAwID8gdGhpcy5uZWdhdGUoKSA6IHRoaXMuY2xvbmUoKSwgciA9IGUucyA8IDAgPyBlLm5lZ2F0ZSgpIDogZS5jbG9uZSgpO1xuICBpZiAodC5jb21wYXJlVG8ocikgPCAwKSB7XG4gICAgdmFyIGkgPSB0O1xuICAgIHQgPSByLCByID0gaTtcbiAgfVxuICB2YXIgcyA9IHQuZ2V0TG93ZXN0U2V0Qml0KCksIG4gPSByLmdldExvd2VzdFNldEJpdCgpO1xuICBpZiAobiA8IDApXG4gICAgcmV0dXJuIHQ7XG4gIGZvciAocyA8IG4gJiYgKG4gPSBzKSwgbiA+IDAgJiYgKHQuclNoaWZ0VG8obiwgdCksIHIuclNoaWZ0VG8obiwgcikpOyB0LnNpZ251bSgpID4gMDsgKVxuICAgIChzID0gdC5nZXRMb3dlc3RTZXRCaXQoKSkgPiAwICYmIHQuclNoaWZ0VG8ocywgdCksIChzID0gci5nZXRMb3dlc3RTZXRCaXQoKSkgPiAwICYmIHIuclNoaWZ0VG8ocywgciksIHQuY29tcGFyZVRvKHIpID49IDAgPyAodC5zdWJUbyhyLCB0KSwgdC5yU2hpZnRUbygxLCB0KSkgOiAoci5zdWJUbyh0LCByKSwgci5yU2hpZnRUbygxLCByKSk7XG4gIHJldHVybiBuID4gMCAmJiByLmxTaGlmdFRvKG4sIHIpLCByO1xufVxuZnVuY3Rpb24gRWkoZSkge1xuICBpZiAoZSA8PSAwKVxuICAgIHJldHVybiAwO1xuICB2YXIgdCA9IHRoaXMuRFYgJSBlLCByID0gdGhpcy5zIDwgMCA/IGUgLSAxIDogMDtcbiAgaWYgKHRoaXMudCA+IDApXG4gICAgaWYgKHQgPT0gMClcbiAgICAgIHIgPSB0aGlzWzBdICUgZTtcbiAgICBlbHNlXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50IC0gMTsgaSA+PSAwOyAtLWkpXG4gICAgICAgIHIgPSAodCAqIHIgKyB0aGlzW2ldKSAlIGU7XG4gIHJldHVybiByO1xufVxuZnVuY3Rpb24gd2koZSkge1xuICB2YXIgdCA9IGUuaXNFdmVuKCk7XG4gIGlmICh0aGlzLmlzRXZlbigpICYmIHQgfHwgZS5zaWdudW0oKSA9PSAwKVxuICAgIHJldHVybiBSLlpFUk87XG4gIGZvciAodmFyIHIgPSBlLmNsb25lKCksIGkgPSB0aGlzLmNsb25lKCksIHMgPSBSZSgxKSwgbiA9IFJlKDApLCBoID0gUmUoMCksIHUgPSBSZSgxKTsgci5zaWdudW0oKSAhPSAwOyApIHtcbiAgICBmb3IgKDsgci5pc0V2ZW4oKTsgKVxuICAgICAgci5yU2hpZnRUbygxLCByKSwgdCA/ICgoIXMuaXNFdmVuKCkgfHwgIW4uaXNFdmVuKCkpICYmIChzLmFkZFRvKHRoaXMsIHMpLCBuLnN1YlRvKGUsIG4pKSwgcy5yU2hpZnRUbygxLCBzKSkgOiBuLmlzRXZlbigpIHx8IG4uc3ViVG8oZSwgbiksIG4uclNoaWZ0VG8oMSwgbik7XG4gICAgZm9yICg7IGkuaXNFdmVuKCk7IClcbiAgICAgIGkuclNoaWZ0VG8oMSwgaSksIHQgPyAoKCFoLmlzRXZlbigpIHx8ICF1LmlzRXZlbigpKSAmJiAoaC5hZGRUbyh0aGlzLCBoKSwgdS5zdWJUbyhlLCB1KSksIGguclNoaWZ0VG8oMSwgaCkpIDogdS5pc0V2ZW4oKSB8fCB1LnN1YlRvKGUsIHUpLCB1LnJTaGlmdFRvKDEsIHUpO1xuICAgIHIuY29tcGFyZVRvKGkpID49IDAgPyAoci5zdWJUbyhpLCByKSwgdCAmJiBzLnN1YlRvKGgsIHMpLCBuLnN1YlRvKHUsIG4pKSA6IChpLnN1YlRvKHIsIGkpLCB0ICYmIGguc3ViVG8ocywgaCksIHUuc3ViVG8obiwgdSkpO1xuICB9XG4gIGlmIChpLmNvbXBhcmVUbyhSLk9ORSkgIT0gMClcbiAgICByZXR1cm4gUi5aRVJPO1xuICBpZiAodS5jb21wYXJlVG8oZSkgPj0gMClcbiAgICByZXR1cm4gdS5zdWJ0cmFjdChlKTtcbiAgaWYgKHUuc2lnbnVtKCkgPCAwKVxuICAgIHUuYWRkVG8oZSwgdSk7XG4gIGVsc2VcbiAgICByZXR1cm4gdTtcbiAgcmV0dXJuIHUuc2lnbnVtKCkgPCAwID8gdS5hZGQoZSkgOiB1O1xufVxudmFyIGxlID0gWzIsIDMsIDUsIDcsIDExLCAxMywgMTcsIDE5LCAyMywgMjksIDMxLCAzNywgNDEsIDQzLCA0NywgNTMsIDU5LCA2MSwgNjcsIDcxLCA3MywgNzksIDgzLCA4OSwgOTcsIDEwMSwgMTAzLCAxMDcsIDEwOSwgMTEzLCAxMjcsIDEzMSwgMTM3LCAxMzksIDE0OSwgMTUxLCAxNTcsIDE2MywgMTY3LCAxNzMsIDE3OSwgMTgxLCAxOTEsIDE5MywgMTk3LCAxOTksIDIxMSwgMjIzLCAyMjcsIDIyOSwgMjMzLCAyMzksIDI0MSwgMjUxLCAyNTcsIDI2MywgMjY5LCAyNzEsIDI3NywgMjgxLCAyODMsIDI5MywgMzA3LCAzMTEsIDMxMywgMzE3LCAzMzEsIDMzNywgMzQ3LCAzNDksIDM1MywgMzU5LCAzNjcsIDM3MywgMzc5LCAzODMsIDM4OSwgMzk3LCA0MDEsIDQwOSwgNDE5LCA0MjEsIDQzMSwgNDMzLCA0MzksIDQ0MywgNDQ5LCA0NTcsIDQ2MSwgNDYzLCA0NjcsIDQ3OSwgNDg3LCA0OTEsIDQ5OSwgNTAzLCA1MDksIDUyMSwgNTIzLCA1NDEsIDU0NywgNTU3LCA1NjMsIDU2OSwgNTcxLCA1NzcsIDU4NywgNTkzLCA1OTksIDYwMSwgNjA3LCA2MTMsIDYxNywgNjE5LCA2MzEsIDY0MSwgNjQzLCA2NDcsIDY1MywgNjU5LCA2NjEsIDY3MywgNjc3LCA2ODMsIDY5MSwgNzAxLCA3MDksIDcxOSwgNzI3LCA3MzMsIDczOSwgNzQzLCA3NTEsIDc1NywgNzYxLCA3NjksIDc3MywgNzg3LCA3OTcsIDgwOSwgODExLCA4MjEsIDgyMywgODI3LCA4MjksIDgzOSwgODUzLCA4NTcsIDg1OSwgODYzLCA4NzcsIDg4MSwgODgzLCA4ODcsIDkwNywgOTExLCA5MTksIDkyOSwgOTM3LCA5NDEsIDk0NywgOTUzLCA5NjcsIDk3MSwgOTc3LCA5ODMsIDk5MSwgOTk3XSwgRmkgPSAoMSA8PCAyNikgLyBsZVtsZS5sZW5ndGggLSAxXTtcbmZ1bmN0aW9uIGJpKGUpIHtcbiAgdmFyIHQsIHIgPSB0aGlzLmFicygpO1xuICBpZiAoci50ID09IDEgJiYgclswXSA8PSBsZVtsZS5sZW5ndGggLSAxXSkge1xuICAgIGZvciAodCA9IDA7IHQgPCBsZS5sZW5ndGg7ICsrdClcbiAgICAgIGlmIChyWzBdID09IGxlW3RdKVxuICAgICAgICByZXR1cm4gITA7XG4gICAgcmV0dXJuICExO1xuICB9XG4gIGlmIChyLmlzRXZlbigpKVxuICAgIHJldHVybiAhMTtcbiAgZm9yICh0ID0gMTsgdCA8IGxlLmxlbmd0aDsgKSB7XG4gICAgZm9yICh2YXIgaSA9IGxlW3RdLCBzID0gdCArIDE7IHMgPCBsZS5sZW5ndGggJiYgaSA8IEZpOyApXG4gICAgICBpICo9IGxlW3MrK107XG4gICAgZm9yIChpID0gci5tb2RJbnQoaSk7IHQgPCBzOyApXG4gICAgICBpZiAoaSAlIGxlW3QrK10gPT0gMClcbiAgICAgICAgcmV0dXJuICExO1xuICB9XG4gIHJldHVybiByLm1pbGxlclJhYmluKGUpO1xufVxuZnVuY3Rpb24gQWkoZSkge1xuICB2YXIgdCA9IHRoaXMuc3VidHJhY3QoUi5PTkUpLCByID0gdC5nZXRMb3dlc3RTZXRCaXQoKTtcbiAgaWYgKHIgPD0gMClcbiAgICByZXR1cm4gITE7XG4gIHZhciBpID0gdC5zaGlmdFJpZ2h0KHIpO1xuICBlID0gZSArIDEgPj4gMSwgZSA+IGxlLmxlbmd0aCAmJiAoZSA9IGxlLmxlbmd0aCk7XG4gIGZvciAodmFyIHMgPSBfKCksIG4gPSAwOyBuIDwgZTsgKytuKSB7XG4gICAgcy5mcm9tSW50KGxlW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxlLmxlbmd0aCldKTtcbiAgICB2YXIgaCA9IHMubW9kUG93KGksIHRoaXMpO1xuICAgIGlmIChoLmNvbXBhcmVUbyhSLk9ORSkgIT0gMCAmJiBoLmNvbXBhcmVUbyh0KSAhPSAwKSB7XG4gICAgICBmb3IgKHZhciB1ID0gMTsgdSsrIDwgciAmJiBoLmNvbXBhcmVUbyh0KSAhPSAwOyApXG4gICAgICAgIGlmIChoID0gaC5tb2RQb3dJbnQoMiwgdGhpcyksIGguY29tcGFyZVRvKFIuT05FKSA9PSAwKVxuICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgIGlmIChoLmNvbXBhcmVUbyh0KSAhPSAwKVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICB9XG4gIHJldHVybiAhMDtcbn1cblIucHJvdG90eXBlLmNodW5rU2l6ZSA9IERyO1xuUi5wcm90b3R5cGUudG9SYWRpeCA9IElyO1xuUi5wcm90b3R5cGUuZnJvbVJhZGl4ID0gQ3I7XG5SLnByb3RvdHlwZS5mcm9tTnVtYmVyID0gUnI7XG5SLnByb3RvdHlwZS5iaXR3aXNlVG8gPSBPcjtcblIucHJvdG90eXBlLmNoYW5nZUJpdCA9IEpyO1xuUi5wcm90b3R5cGUuYWRkVG8gPSBRcjtcblIucHJvdG90eXBlLmRNdWx0aXBseSA9IG9pO1xuUi5wcm90b3R5cGUuZEFkZE9mZnNldCA9IHVpO1xuUi5wcm90b3R5cGUubXVsdGlwbHlMb3dlclRvID0gbGk7XG5SLnByb3RvdHlwZS5tdWx0aXBseVVwcGVyVG8gPSBkaTtcblIucHJvdG90eXBlLm1vZEludCA9IEVpO1xuUi5wcm90b3R5cGUubWlsbGVyUmFiaW4gPSBBaTtcblIucHJvdG90eXBlLmNsb25lID0gd3I7XG5SLnByb3RvdHlwZS5pbnRWYWx1ZSA9IEZyO1xuUi5wcm90b3R5cGUuYnl0ZVZhbHVlID0gYnI7XG5SLnByb3RvdHlwZS5zaG9ydFZhbHVlID0gQXI7XG5SLnByb3RvdHlwZS5zaWdudW0gPSBQcjtcblIucHJvdG90eXBlLnRvQnl0ZUFycmF5ID0gVHI7XG5SLnByb3RvdHlwZS5lcXVhbHMgPSBCcjtcblIucHJvdG90eXBlLm1pbiA9IE5yO1xuUi5wcm90b3R5cGUubWF4ID0gSHI7XG5SLnByb3RvdHlwZS5hbmQgPSBWcjtcblIucHJvdG90eXBlLm9yID0gS3I7XG5SLnByb3RvdHlwZS54b3IgPSBMcjtcblIucHJvdG90eXBlLmFuZE5vdCA9IHFyO1xuUi5wcm90b3R5cGUubm90ID0ga3I7XG5SLnByb3RvdHlwZS5zaGlmdExlZnQgPSBNcjtcblIucHJvdG90eXBlLnNoaWZ0UmlnaHQgPSBfcjtcblIucHJvdG90eXBlLmdldExvd2VzdFNldEJpdCA9IHpyO1xuUi5wcm90b3R5cGUuYml0Q291bnQgPSBXcjtcblIucHJvdG90eXBlLnRlc3RCaXQgPSBYcjtcblIucHJvdG90eXBlLnNldEJpdCA9ICRyO1xuUi5wcm90b3R5cGUuY2xlYXJCaXQgPSBZcjtcblIucHJvdG90eXBlLmZsaXBCaXQgPSBacjtcblIucHJvdG90eXBlLmFkZCA9IGVpO1xuUi5wcm90b3R5cGUuc3VidHJhY3QgPSB0aTtcblIucHJvdG90eXBlLm11bHRpcGx5ID0gcmk7XG5SLnByb3RvdHlwZS5kaXZpZGUgPSBuaTtcblIucHJvdG90eXBlLnJlbWFpbmRlciA9IHNpO1xuUi5wcm90b3R5cGUuZGl2aWRlQW5kUmVtYWluZGVyID0gYWk7XG5SLnByb3RvdHlwZS5tb2RQb3cgPSB4aTtcblIucHJvdG90eXBlLm1vZEludmVyc2UgPSB3aTtcblIucHJvdG90eXBlLnBvdyA9IGNpO1xuUi5wcm90b3R5cGUuZ2NkID0gU2k7XG5SLnByb3RvdHlwZS5pc1Byb2JhYmxlUHJpbWUgPSBiaTtcblIucHJvdG90eXBlLnNxdWFyZSA9IGlpO1xuLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbmZ1bmN0aW9uIGF0KCkge1xuICB0aGlzLmkgPSAwLCB0aGlzLmogPSAwLCB0aGlzLlMgPSBuZXcgQXJyYXkoKTtcbn1cbmZ1bmN0aW9uIERpKGUpIHtcbiAgdmFyIHQsIHIsIGk7XG4gIGZvciAodCA9IDA7IHQgPCAyNTY7ICsrdClcbiAgICB0aGlzLlNbdF0gPSB0O1xuICBmb3IgKHIgPSAwLCB0ID0gMDsgdCA8IDI1NjsgKyt0KVxuICAgIHIgPSByICsgdGhpcy5TW3RdICsgZVt0ICUgZS5sZW5ndGhdICYgMjU1LCBpID0gdGhpcy5TW3RdLCB0aGlzLlNbdF0gPSB0aGlzLlNbcl0sIHRoaXMuU1tyXSA9IGk7XG4gIHRoaXMuaSA9IDAsIHRoaXMuaiA9IDA7XG59XG5mdW5jdGlvbiBQaSgpIHtcbiAgdmFyIGU7XG4gIHJldHVybiB0aGlzLmkgPSB0aGlzLmkgKyAxICYgMjU1LCB0aGlzLmogPSB0aGlzLmogKyB0aGlzLlNbdGhpcy5pXSAmIDI1NSwgZSA9IHRoaXMuU1t0aGlzLmldLCB0aGlzLlNbdGhpcy5pXSA9IHRoaXMuU1t0aGlzLmpdLCB0aGlzLlNbdGhpcy5qXSA9IGUsIHRoaXMuU1tlICsgdGhpcy5TW3RoaXMuaV0gJiAyNTVdO1xufVxuYXQucHJvdG90eXBlLmluaXQgPSBEaTtcbmF0LnByb3RvdHlwZS5uZXh0ID0gUGk7XG5mdW5jdGlvbiBJaSgpIHtcbiAgcmV0dXJuIG5ldyBhdCgpO1xufVxudmFyIGV0ID0gMjU2O1xuLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbnZhciBXZSwgZ2UsIG9lO1xuZnVuY3Rpb24gQ2koZSkge1xuICBnZVtvZSsrXSBePSBlICYgMjU1LCBnZVtvZSsrXSBePSBlID4+IDggJiAyNTUsIGdlW29lKytdIF49IGUgPj4gMTYgJiAyNTUsIGdlW29lKytdIF49IGUgPj4gMjQgJiAyNTUsIG9lID49IGV0ICYmIChvZSAtPSBldCk7XG59XG5mdW5jdGlvbiBEdCgpIHtcbiAgQ2koKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS5nZXRUaW1lKCkpO1xufVxuaWYgKGdlID09IG51bGwpIHtcbiAgZ2UgPSBuZXcgQXJyYXkoKSwgb2UgPSAwO1xuICB2YXIgU2U7XG4gIGlmIChWZSAhPT0gdm9pZCAwICYmIChWZS5jcnlwdG8gIT09IHZvaWQgMCB8fCBWZS5tc0NyeXB0byAhPT0gdm9pZCAwKSkge1xuICAgIHZhciBsdCA9IFZlLmNyeXB0byB8fCBWZS5tc0NyeXB0bztcbiAgICBpZiAobHQuZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB2YXIgZHQgPSBuZXcgVWludDhBcnJheSgzMik7XG4gICAgICBmb3IgKGx0LmdldFJhbmRvbVZhbHVlcyhkdCksIFNlID0gMDsgU2UgPCAzMjsgKytTZSlcbiAgICAgICAgZ2Vbb2UrK10gPSBkdFtTZV07XG4gICAgfSBlbHNlIGlmIChVZS5hcHBOYW1lID09IFwiTmV0c2NhcGVcIiAmJiBVZS5hcHBWZXJzaW9uIDwgXCI1XCIpIHtcbiAgICAgIHZhciBwdCA9IFZlLmNyeXB0by5yYW5kb20oMzIpO1xuICAgICAgZm9yIChTZSA9IDA7IFNlIDwgcHQubGVuZ3RoOyArK1NlKVxuICAgICAgICBnZVtvZSsrXSA9IHB0LmNoYXJDb2RlQXQoU2UpICYgMjU1O1xuICAgIH1cbiAgfVxuICBmb3IgKDsgb2UgPCBldDsgKVxuICAgIFNlID0gTWF0aC5mbG9vcig2NTUzNiAqIE1hdGgucmFuZG9tKCkpLCBnZVtvZSsrXSA9IFNlID4+PiA4LCBnZVtvZSsrXSA9IFNlICYgMjU1O1xuICBvZSA9IDAsIER0KCk7XG59XG5mdW5jdGlvbiBSaSgpIHtcbiAgaWYgKFdlID09IG51bGwpIHtcbiAgICBmb3IgKER0KCksIFdlID0gSWkoKSwgV2UuaW5pdChnZSksIG9lID0gMDsgb2UgPCBnZS5sZW5ndGg7ICsrb2UpXG4gICAgICBnZVtvZV0gPSAwO1xuICAgIG9lID0gMDtcbiAgfVxuICByZXR1cm4gV2UubmV4dCgpO1xufVxuZnVuY3Rpb24gVGkoZSkge1xuICB2YXIgdDtcbiAgZm9yICh0ID0gMDsgdCA8IGUubGVuZ3RoOyArK3QpXG4gICAgZVt0XSA9IFJpKCk7XG59XG5mdW5jdGlvbiBHZSgpIHtcbn1cbkdlLnByb3RvdHlwZS5uZXh0Qnl0ZXMgPSBUaTtcbi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuL1xuICovXG5mdW5jdGlvbiB2ZShlLCB0KSB7XG4gIHJldHVybiBuZXcgUihlLCB0KTtcbn1cbmZ1bmN0aW9uIHEoKSB7XG4gIHRoaXMubiA9IG51bGwsIHRoaXMuZSA9IDAsIHRoaXMuZCA9IG51bGwsIHRoaXMucCA9IG51bGwsIHRoaXMucSA9IG51bGwsIHRoaXMuZG1wMSA9IG51bGwsIHRoaXMuZG1xMSA9IG51bGwsIHRoaXMuY29lZmYgPSBudWxsO1xufVxuZnVuY3Rpb24gQmkoZSwgdCkge1xuICBpZiAodGhpcy5pc1B1YmxpYyA9ICEwLCB0aGlzLmlzUHJpdmF0ZSA9ICExLCB0eXBlb2YgZSAhPSBcInN0cmluZ1wiKVxuICAgIHRoaXMubiA9IGUsIHRoaXMuZSA9IHQ7XG4gIGVsc2UgaWYgKGUgIT0gbnVsbCAmJiB0ICE9IG51bGwgJiYgZS5sZW5ndGggPiAwICYmIHQubGVuZ3RoID4gMClcbiAgICB0aGlzLm4gPSB2ZShlLCAxNiksIHRoaXMuZSA9IHBhcnNlSW50KHQsIDE2KTtcbiAgZWxzZVxuICAgIHRocm93IFwiSW52YWxpZCBSU0EgcHVibGljIGtleVwiO1xufVxuZnVuY3Rpb24gTmkoZSkge1xuICByZXR1cm4gZS5tb2RQb3dJbnQodGhpcy5lLCB0aGlzLm4pO1xufVxucS5wcm90b3R5cGUuZG9QdWJsaWMgPSBOaTtcbnEucHJvdG90eXBlLnNldFB1YmxpYyA9IEJpO1xucS5wcm90b3R5cGUudHlwZSA9IFwiUlNBXCI7XG5mdW5jdGlvbiBIaShlLCB0LCByKSB7XG4gIGlmICh0aGlzLmlzUHJpdmF0ZSA9ICEwLCB0eXBlb2YgZSAhPSBcInN0cmluZ1wiKVxuICAgIHRoaXMubiA9IGUsIHRoaXMuZSA9IHQsIHRoaXMuZCA9IHI7XG4gIGVsc2UgaWYgKGUgIT0gbnVsbCAmJiB0ICE9IG51bGwgJiYgZS5sZW5ndGggPiAwICYmIHQubGVuZ3RoID4gMClcbiAgICB0aGlzLm4gPSB2ZShlLCAxNiksIHRoaXMuZSA9IHBhcnNlSW50KHQsIDE2KSwgdGhpcy5kID0gdmUociwgMTYpO1xuICBlbHNlXG4gICAgdGhyb3cgXCJJbnZhbGlkIFJTQSBwcml2YXRlIGtleVwiO1xufVxuZnVuY3Rpb24gT2koZSwgdCwgciwgaSwgcywgbiwgaCwgdSkge1xuICBpZiAodGhpcy5pc1ByaXZhdGUgPSAhMCwgdGhpcy5pc1B1YmxpYyA9ICExLCBlID09IG51bGwpXG4gICAgdGhyb3cgXCJSU0FTZXRQcml2YXRlRXggTiA9PSBudWxsXCI7XG4gIGlmICh0ID09IG51bGwpXG4gICAgdGhyb3cgXCJSU0FTZXRQcml2YXRlRXggRSA9PSBudWxsXCI7XG4gIGlmIChlLmxlbmd0aCA9PSAwKVxuICAgIHRocm93IFwiUlNBU2V0UHJpdmF0ZUV4IE4ubGVuZ3RoID09IDBcIjtcbiAgaWYgKHQubGVuZ3RoID09IDApXG4gICAgdGhyb3cgXCJSU0FTZXRQcml2YXRlRXggRS5sZW5ndGggPT0gMFwiO1xuICBpZiAoZSAhPSBudWxsICYmIHQgIT0gbnVsbCAmJiBlLmxlbmd0aCA+IDAgJiYgdC5sZW5ndGggPiAwKVxuICAgIHRoaXMubiA9IHZlKGUsIDE2KSwgdGhpcy5lID0gcGFyc2VJbnQodCwgMTYpLCB0aGlzLmQgPSB2ZShyLCAxNiksIHRoaXMucCA9IHZlKGksIDE2KSwgdGhpcy5xID0gdmUocywgMTYpLCB0aGlzLmRtcDEgPSB2ZShuLCAxNiksIHRoaXMuZG1xMSA9IHZlKGgsIDE2KSwgdGhpcy5jb2VmZiA9IHZlKHUsIDE2KTtcbiAgZWxzZVxuICAgIHRocm93IFwiSW52YWxpZCBSU0EgcHJpdmF0ZSBrZXkgaW4gUlNBU2V0UHJpdmF0ZUV4XCI7XG59XG5mdW5jdGlvbiBqaShlLCB0KSB7XG4gIHZhciByID0gbmV3IEdlKCksIGkgPSBlID4+IDE7XG4gIHRoaXMuZSA9IHBhcnNlSW50KHQsIDE2KTtcbiAgZm9yICh2YXIgcyA9IG5ldyBSKHQsIDE2KSwgbiA9IGUgLyAyIC0gMTAwLCBoID0gUi5PTkUuc2hpZnRMZWZ0KG4pOyA7ICkge1xuICAgIGZvciAoOyB0aGlzLnAgPSBuZXcgUihlIC0gaSwgMSwgciksICEodGhpcy5wLnN1YnRyYWN0KFIuT05FKS5nY2QocykuY29tcGFyZVRvKFIuT05FKSA9PSAwICYmIHRoaXMucC5pc1Byb2JhYmxlUHJpbWUoMTApKTsgKVxuICAgICAgO1xuICAgIGZvciAoOyB0aGlzLnEgPSBuZXcgUihpLCAxLCByKSwgISh0aGlzLnEuc3VidHJhY3QoUi5PTkUpLmdjZChzKS5jb21wYXJlVG8oUi5PTkUpID09IDAgJiYgdGhpcy5xLmlzUHJvYmFibGVQcmltZSgxMCkpOyApXG4gICAgICA7XG4gICAgaWYgKHRoaXMucC5jb21wYXJlVG8odGhpcy5xKSA8PSAwKSB7XG4gICAgICB2YXIgdSA9IHRoaXMucDtcbiAgICAgIHRoaXMucCA9IHRoaXMucSwgdGhpcy5xID0gdTtcbiAgICB9XG4gICAgdmFyIHAgPSB0aGlzLnEuc3VidHJhY3QodGhpcy5wKS5hYnMoKTtcbiAgICBpZiAoIShwLmJpdExlbmd0aCgpIDwgbiB8fCBwLmNvbXBhcmVUbyhoKSA8PSAwKSkge1xuICAgICAgdmFyIGMgPSB0aGlzLnAuc3VidHJhY3QoUi5PTkUpLCB5ID0gdGhpcy5xLnN1YnRyYWN0KFIuT05FKSwgdiA9IGMubXVsdGlwbHkoeSk7XG4gICAgICBpZiAodi5nY2QocykuY29tcGFyZVRvKFIuT05FKSA9PSAwICYmICh0aGlzLm4gPSB0aGlzLnAubXVsdGlwbHkodGhpcy5xKSwgdGhpcy5uLmJpdExlbmd0aCgpID09IGUpKSB7XG4gICAgICAgIHRoaXMuZCA9IHMubW9kSW52ZXJzZSh2KSwgdGhpcy5kbXAxID0gdGhpcy5kLm1vZChjKSwgdGhpcy5kbXExID0gdGhpcy5kLm1vZCh5KSwgdGhpcy5jb2VmZiA9IHRoaXMucS5tb2RJbnZlcnNlKHRoaXMucCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB0aGlzLmlzUHJpdmF0ZSA9ICEwO1xufVxuZnVuY3Rpb24gVmkoZSkge1xuICBpZiAodGhpcy5wID09IG51bGwgfHwgdGhpcy5xID09IG51bGwpXG4gICAgcmV0dXJuIGUubW9kUG93KHRoaXMuZCwgdGhpcy5uKTtcbiAgZm9yICh2YXIgdCA9IGUubW9kKHRoaXMucCkubW9kUG93KHRoaXMuZG1wMSwgdGhpcy5wKSwgciA9IGUubW9kKHRoaXMucSkubW9kUG93KHRoaXMuZG1xMSwgdGhpcy5xKTsgdC5jb21wYXJlVG8ocikgPCAwOyApXG4gICAgdCA9IHQuYWRkKHRoaXMucCk7XG4gIHJldHVybiB0LnN1YnRyYWN0KHIpLm11bHRpcGx5KHRoaXMuY29lZmYpLm1vZCh0aGlzLnApLm11bHRpcGx5KHRoaXMucSkuYWRkKHIpO1xufVxucS5wcm90b3R5cGUuZG9Qcml2YXRlID0gVmk7XG5xLnByb3RvdHlwZS5zZXRQcml2YXRlID0gSGk7XG5xLnByb3RvdHlwZS5zZXRQcml2YXRlRXggPSBPaTtcbnEucHJvdG90eXBlLmdlbmVyYXRlID0gamk7XG4vKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi9cbiAqL1xuZnVuY3Rpb24gdWUoZSwgdCkge1xuICB0aGlzLnggPSB0LCB0aGlzLnEgPSBlO1xufVxuZnVuY3Rpb24gS2koZSkge1xuICByZXR1cm4gZSA9PSB0aGlzID8gITAgOiB0aGlzLnEuZXF1YWxzKGUucSkgJiYgdGhpcy54LmVxdWFscyhlLngpO1xufVxuZnVuY3Rpb24gTGkoKSB7XG4gIHJldHVybiB0aGlzLng7XG59XG5mdW5jdGlvbiBxaSgpIHtcbiAgcmV0dXJuIG5ldyB1ZSh0aGlzLnEsIHRoaXMueC5uZWdhdGUoKS5tb2QodGhpcy5xKSk7XG59XG5mdW5jdGlvbiBraShlKSB7XG4gIHJldHVybiBuZXcgdWUodGhpcy5xLCB0aGlzLnguYWRkKGUudG9CaWdJbnRlZ2VyKCkpLm1vZCh0aGlzLnEpKTtcbn1cbmZ1bmN0aW9uIE1pKGUpIHtcbiAgcmV0dXJuIG5ldyB1ZSh0aGlzLnEsIHRoaXMueC5zdWJ0cmFjdChlLnRvQmlnSW50ZWdlcigpKS5tb2QodGhpcy5xKSk7XG59XG5mdW5jdGlvbiBfaShlKSB7XG4gIHJldHVybiBuZXcgdWUodGhpcy5xLCB0aGlzLngubXVsdGlwbHkoZS50b0JpZ0ludGVnZXIoKSkubW9kKHRoaXMucSkpO1xufVxuZnVuY3Rpb24gVWkoKSB7XG4gIHJldHVybiBuZXcgdWUodGhpcy5xLCB0aGlzLnguc3F1YXJlKCkubW9kKHRoaXMucSkpO1xufVxuZnVuY3Rpb24gemkoZSkge1xuICByZXR1cm4gbmV3IHVlKHRoaXMucSwgdGhpcy54Lm11bHRpcGx5KGUudG9CaWdJbnRlZ2VyKCkubW9kSW52ZXJzZSh0aGlzLnEpKS5tb2QodGhpcy5xKSk7XG59XG51ZS5wcm90b3R5cGUuZXF1YWxzID0gS2k7XG51ZS5wcm90b3R5cGUudG9CaWdJbnRlZ2VyID0gTGk7XG51ZS5wcm90b3R5cGUubmVnYXRlID0gcWk7XG51ZS5wcm90b3R5cGUuYWRkID0ga2k7XG51ZS5wcm90b3R5cGUuc3VidHJhY3QgPSBNaTtcbnVlLnByb3RvdHlwZS5tdWx0aXBseSA9IF9pO1xudWUucHJvdG90eXBlLnNxdWFyZSA9IFVpO1xudWUucHJvdG90eXBlLmRpdmlkZSA9IHppO1xudWUucHJvdG90eXBlLnNxcnQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyB1ZSh0aGlzLnEsIHRoaXMueC5zcXJ0KCkubW9kKHRoaXMucSkpO1xufTtcbmZ1bmN0aW9uIHooZSwgdCwgciwgaSkge1xuICB0aGlzLmN1cnZlID0gZSwgdGhpcy54ID0gdCwgdGhpcy55ID0gciwgaSA9PSBudWxsID8gdGhpcy56ID0gUi5PTkUgOiB0aGlzLnogPSBpLCB0aGlzLnppbnYgPSBudWxsO1xufVxuZnVuY3Rpb24gR2koKSB7XG4gIHJldHVybiB0aGlzLnppbnYgPT0gbnVsbCAmJiAodGhpcy56aW52ID0gdGhpcy56Lm1vZEludmVyc2UodGhpcy5jdXJ2ZS5xKSksIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIodGhpcy54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMuemludikubW9kKHRoaXMuY3VydmUucSkpO1xufVxuZnVuY3Rpb24gV2koKSB7XG4gIHJldHVybiB0aGlzLnppbnYgPT0gbnVsbCAmJiAodGhpcy56aW52ID0gdGhpcy56Lm1vZEludmVyc2UodGhpcy5jdXJ2ZS5xKSksIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIodGhpcy55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMuemludikubW9kKHRoaXMuY3VydmUucSkpO1xufVxuZnVuY3Rpb24gWGkoZSkge1xuICBpZiAoZSA9PSB0aGlzKVxuICAgIHJldHVybiAhMDtcbiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiBlLmlzSW5maW5pdHkoKTtcbiAgaWYgKGUuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiB0aGlzLmlzSW5maW5pdHkoKTtcbiAgdmFyIHQsIHI7XG4gIHJldHVybiB0ID0gZS55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy55LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KGUueikpLm1vZCh0aGlzLmN1cnZlLnEpLCB0LmVxdWFscyhSLlpFUk8pID8gKHIgPSBlLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkoZS56KSkubW9kKHRoaXMuY3VydmUucSksIHIuZXF1YWxzKFIuWkVSTykpIDogITE7XG59XG5mdW5jdGlvbiBKaSgpIHtcbiAgcmV0dXJuIHRoaXMueCA9PSBudWxsICYmIHRoaXMueSA9PSBudWxsID8gITAgOiB0aGlzLnouZXF1YWxzKFIuWkVSTykgJiYgIXRoaXMueS50b0JpZ0ludGVnZXIoKS5lcXVhbHMoUi5aRVJPKTtcbn1cbmZ1bmN0aW9uICRpKCkge1xuICByZXR1cm4gbmV3IHoodGhpcy5jdXJ2ZSwgdGhpcy54LCB0aGlzLnkubmVnYXRlKCksIHRoaXMueik7XG59XG5mdW5jdGlvbiBZaShlKSB7XG4gIGlmICh0aGlzLmlzSW5maW5pdHkoKSlcbiAgICByZXR1cm4gZTtcbiAgaWYgKGUuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiB0aGlzO1xuICB2YXIgdCA9IGUueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShlLnopKS5tb2QodGhpcy5jdXJ2ZS5xKSwgciA9IGUueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShlLnopKS5tb2QodGhpcy5jdXJ2ZS5xKTtcbiAgaWYgKFIuWkVSTy5lcXVhbHMocikpXG4gICAgcmV0dXJuIFIuWkVSTy5lcXVhbHModCkgPyB0aGlzLnR3aWNlKCkgOiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCk7XG4gIHZhciBpID0gbmV3IFIoXCIzXCIpLCBzID0gdGhpcy54LnRvQmlnSW50ZWdlcigpLCBuID0gdGhpcy55LnRvQmlnSW50ZWdlcigpO1xuICBlLngudG9CaWdJbnRlZ2VyKCksIGUueS50b0JpZ0ludGVnZXIoKTtcbiAgdmFyIGggPSByLnNxdWFyZSgpLCB1ID0gaC5tdWx0aXBseShyKSwgcCA9IHMubXVsdGlwbHkoaCksIGMgPSB0LnNxdWFyZSgpLm11bHRpcGx5KHRoaXMueiksIHkgPSBjLnN1YnRyYWN0KHAuc2hpZnRMZWZ0KDEpKS5tdWx0aXBseShlLnopLnN1YnRyYWN0KHUpLm11bHRpcGx5KHIpLm1vZCh0aGlzLmN1cnZlLnEpLCB2ID0gcC5tdWx0aXBseShpKS5tdWx0aXBseSh0KS5zdWJ0cmFjdChuLm11bHRpcGx5KHUpKS5zdWJ0cmFjdChjLm11bHRpcGx5KHQpKS5tdWx0aXBseShlLnopLmFkZCh0Lm11bHRpcGx5KHUpKS5tb2QodGhpcy5jdXJ2ZS5xKSwgbyA9IHUubXVsdGlwbHkodGhpcy56KS5tdWx0aXBseShlLnopLm1vZCh0aGlzLmN1cnZlLnEpO1xuICByZXR1cm4gbmV3IHoodGhpcy5jdXJ2ZSwgdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcih5KSwgdGhpcy5jdXJ2ZS5mcm9tQmlnSW50ZWdlcih2KSwgbyk7XG59XG5mdW5jdGlvbiBaaSgpIHtcbiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiB0aGlzO1xuICBpZiAodGhpcy55LnRvQmlnSW50ZWdlcigpLnNpZ251bSgpID09IDApXG4gICAgcmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKTtcbiAgdmFyIGUgPSBuZXcgUihcIjNcIiksIHQgPSB0aGlzLngudG9CaWdJbnRlZ2VyKCksIHIgPSB0aGlzLnkudG9CaWdJbnRlZ2VyKCksIGkgPSByLm11bHRpcGx5KHRoaXMueiksIHMgPSBpLm11bHRpcGx5KHIpLm1vZCh0aGlzLmN1cnZlLnEpLCBuID0gdGhpcy5jdXJ2ZS5hLnRvQmlnSW50ZWdlcigpLCBoID0gdC5zcXVhcmUoKS5tdWx0aXBseShlKTtcbiAgUi5aRVJPLmVxdWFscyhuKSB8fCAoaCA9IGguYWRkKHRoaXMuei5zcXVhcmUoKS5tdWx0aXBseShuKSkpLCBoID0gaC5tb2QodGhpcy5jdXJ2ZS5xKTtcbiAgdmFyIHUgPSBoLnNxdWFyZSgpLnN1YnRyYWN0KHQuc2hpZnRMZWZ0KDMpLm11bHRpcGx5KHMpKS5zaGlmdExlZnQoMSkubXVsdGlwbHkoaSkubW9kKHRoaXMuY3VydmUucSksIHAgPSBoLm11bHRpcGx5KGUpLm11bHRpcGx5KHQpLnN1YnRyYWN0KHMuc2hpZnRMZWZ0KDEpKS5zaGlmdExlZnQoMikubXVsdGlwbHkocykuc3VidHJhY3QoaC5zcXVhcmUoKS5tdWx0aXBseShoKSkubW9kKHRoaXMuY3VydmUucSksIGMgPSBpLnNxdWFyZSgpLm11bHRpcGx5KGkpLnNoaWZ0TGVmdCgzKS5tb2QodGhpcy5jdXJ2ZS5xKTtcbiAgcmV0dXJuIG5ldyB6KHRoaXMuY3VydmUsIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIodSksIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIocCksIGMpO1xufVxuZnVuY3Rpb24gUWkoZSkge1xuICBpZiAodGhpcy5pc0luZmluaXR5KCkpXG4gICAgcmV0dXJuIHRoaXM7XG4gIGlmIChlLnNpZ251bSgpID09IDApXG4gICAgcmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKTtcbiAgdmFyIHQgPSBlLCByID0gdC5tdWx0aXBseShuZXcgUihcIjNcIikpLCBpID0gdGhpcy5uZWdhdGUoKSwgcyA9IHRoaXMsIG4gPSB0aGlzLmN1cnZlLnEuc3VidHJhY3QoZSksIGggPSBuLm11bHRpcGx5KG5ldyBSKFwiM1wiKSksIHUgPSBuZXcgeih0aGlzLmN1cnZlLCB0aGlzLngsIHRoaXMueSksIHAgPSB1Lm5lZ2F0ZSgpLCBjO1xuICBmb3IgKGMgPSByLmJpdExlbmd0aCgpIC0gMjsgYyA+IDA7IC0tYykge1xuICAgIHMgPSBzLnR3aWNlKCk7XG4gICAgdmFyIHkgPSByLnRlc3RCaXQoYyksIHYgPSB0LnRlc3RCaXQoYyk7XG4gICAgeSAhPSB2ICYmIChzID0gcy5hZGQoeSA/IHRoaXMgOiBpKSk7XG4gIH1cbiAgZm9yIChjID0gaC5iaXRMZW5ndGgoKSAtIDI7IGMgPiAwOyAtLWMpIHtcbiAgICB1ID0gdS50d2ljZSgpO1xuICAgIHZhciBvID0gaC50ZXN0Qml0KGMpLCBsID0gbi50ZXN0Qml0KGMpO1xuICAgIG8gIT0gbCAmJiAodSA9IHUuYWRkKG8gPyB1IDogcCkpO1xuICB9XG4gIHJldHVybiBzO1xufVxuZnVuY3Rpb24gZW4oZSwgdCwgcikge1xuICB2YXIgaTtcbiAgZS5iaXRMZW5ndGgoKSA+IHIuYml0TGVuZ3RoKCkgPyBpID0gZS5iaXRMZW5ndGgoKSAtIDEgOiBpID0gci5iaXRMZW5ndGgoKSAtIDE7XG4gIGZvciAodmFyIHMgPSB0aGlzLmN1cnZlLmdldEluZmluaXR5KCksIG4gPSB0aGlzLmFkZCh0KTsgaSA+PSAwOyApXG4gICAgcyA9IHMudHdpY2UoKSwgZS50ZXN0Qml0KGkpID8gci50ZXN0Qml0KGkpID8gcyA9IHMuYWRkKG4pIDogcyA9IHMuYWRkKHRoaXMpIDogci50ZXN0Qml0KGkpICYmIChzID0gcy5hZGQodCkpLCAtLWk7XG4gIHJldHVybiBzO1xufVxuei5wcm90b3R5cGUuZ2V0WCA9IEdpO1xuei5wcm90b3R5cGUuZ2V0WSA9IFdpO1xuei5wcm90b3R5cGUuZXF1YWxzID0gWGk7XG56LnByb3RvdHlwZS5pc0luZmluaXR5ID0gSmk7XG56LnByb3RvdHlwZS5uZWdhdGUgPSAkaTtcbnoucHJvdG90eXBlLmFkZCA9IFlpO1xuei5wcm90b3R5cGUudHdpY2UgPSBaaTtcbnoucHJvdG90eXBlLm11bHRpcGx5ID0gUWk7XG56LnByb3RvdHlwZS5tdWx0aXBseVR3byA9IGVuO1xuZnVuY3Rpb24gQmUoZSwgdCwgcikge1xuICB0aGlzLnEgPSBlLCB0aGlzLmEgPSB0aGlzLmZyb21CaWdJbnRlZ2VyKHQpLCB0aGlzLmIgPSB0aGlzLmZyb21CaWdJbnRlZ2VyKHIpLCB0aGlzLmluZmluaXR5ID0gbmV3IHoodGhpcywgbnVsbCwgbnVsbCk7XG59XG5mdW5jdGlvbiB0bigpIHtcbiAgcmV0dXJuIHRoaXMucTtcbn1cbmZ1bmN0aW9uIHJuKCkge1xuICByZXR1cm4gdGhpcy5hO1xufVxuZnVuY3Rpb24gbm4oKSB7XG4gIHJldHVybiB0aGlzLmI7XG59XG5mdW5jdGlvbiBzbihlKSB7XG4gIHJldHVybiBlID09IHRoaXMgPyAhMCA6IHRoaXMucS5lcXVhbHMoZS5xKSAmJiB0aGlzLmEuZXF1YWxzKGUuYSkgJiYgdGhpcy5iLmVxdWFscyhlLmIpO1xufVxuZnVuY3Rpb24gYW4oKSB7XG4gIHJldHVybiB0aGlzLmluZmluaXR5O1xufVxuZnVuY3Rpb24gb24oZSkge1xuICByZXR1cm4gbmV3IHVlKHRoaXMucSwgZSk7XG59XG5mdW5jdGlvbiB1bihlKSB7XG4gIHN3aXRjaCAocGFyc2VJbnQoZS5zdWJzdHIoMCwgMiksIDE2KSkge1xuICAgIGNhc2UgMDpcbiAgICAgIHJldHVybiB0aGlzLmluZmluaXR5O1xuICAgIGNhc2UgMjpcbiAgICBjYXNlIDM6XG4gICAgICB2YXIgdCA9IGUuc3Vic3RyKDAsIDIpO1xuICAgICAgZS5zdWJzdHIoMik7XG4gICAgICB2YXIgciA9IHRoaXMuZnJvbUJpZ0ludGVnZXIobmV3IFIocCwgMTYpKSwgaSA9IHRoaXMuZ2V0QSgpLCBzID0gdGhpcy5nZXRCKCksIG4gPSByLnNxdWFyZSgpLmFkZChpKS5tdWx0aXBseShyKS5hZGQocyksIGggPSBuLnNxcnQoKTtcbiAgICAgIHJldHVybiB0ID09IFwiMDNcIiAmJiAoaCA9IGgubmVnYXRlKCkpLCBuZXcgeih0aGlzLCByLCBoKTtcbiAgICBjYXNlIDQ6XG4gICAgY2FzZSA2OlxuICAgIGNhc2UgNzpcbiAgICAgIHZhciB1ID0gKGUubGVuZ3RoIC0gMikgLyAyLCBwID0gZS5zdWJzdHIoMiwgdSksIGMgPSBlLnN1YnN0cih1ICsgMiwgdSk7XG4gICAgICByZXR1cm4gbmV3IHoodGhpcywgdGhpcy5mcm9tQmlnSW50ZWdlcihuZXcgUihwLCAxNikpLCB0aGlzLmZyb21CaWdJbnRlZ2VyKG5ldyBSKGMsIDE2KSkpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuQmUucHJvdG90eXBlLmdldFEgPSB0bjtcbkJlLnByb3RvdHlwZS5nZXRBID0gcm47XG5CZS5wcm90b3R5cGUuZ2V0QiA9IG5uO1xuQmUucHJvdG90eXBlLmVxdWFscyA9IHNuO1xuQmUucHJvdG90eXBlLmdldEluZmluaXR5ID0gYW47XG5CZS5wcm90b3R5cGUuZnJvbUJpZ0ludGVnZXIgPSBvbjtcbkJlLnByb3RvdHlwZS5kZWNvZGVQb2ludEhleCA9IHVuO1xuLyohIChjKSBTdGVmYW4gVGhvbWFzIHwgaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW5qcy9iaXRjb2luanMtbGliXG4gKi9cbnVlLnByb3RvdHlwZS5nZXRCeXRlTGVuZ3RoID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKCh0aGlzLnRvQmlnSW50ZWdlcigpLmJpdExlbmd0aCgpICsgNykgLyA4KTtcbn07XG56LnByb3RvdHlwZS5nZXRFbmNvZGVkID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGZ1bmN0aW9uKG4sIGgpIHtcbiAgICB2YXIgdSA9IG4udG9CeXRlQXJyYXlVbnNpZ25lZCgpO1xuICAgIGlmIChoIDwgdS5sZW5ndGgpXG4gICAgICB1ID0gdS5zbGljZSh1Lmxlbmd0aCAtIGgpO1xuICAgIGVsc2VcbiAgICAgIGZvciAoOyBoID4gdS5sZW5ndGg7IClcbiAgICAgICAgdS51bnNoaWZ0KDApO1xuICAgIHJldHVybiB1O1xuICB9LCByID0gdGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCksIGkgPSB0aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKSwgcyA9IHQociwgMzIpO1xuICByZXR1cm4gZSA/IGkuaXNFdmVuKCkgPyBzLnVuc2hpZnQoMikgOiBzLnVuc2hpZnQoMykgOiAocy51bnNoaWZ0KDQpLCBzID0gcy5jb25jYXQodChpLCAzMikpKSwgcztcbn07XG56LmRlY29kZUZyb20gPSBmdW5jdGlvbihlLCB0KSB7XG4gIHRbMF07XG4gIHZhciByID0gdC5sZW5ndGggLSAxLCBpID0gdC5zbGljZSgxLCAxICsgciAvIDIpLCBzID0gdC5zbGljZSgxICsgciAvIDIsIDEgKyByKTtcbiAgaS51bnNoaWZ0KDApLCBzLnVuc2hpZnQoMCk7XG4gIHZhciBuID0gbmV3IFIoaSksIGggPSBuZXcgUihzKTtcbiAgcmV0dXJuIG5ldyB6KGUsIGUuZnJvbUJpZ0ludGVnZXIobiksIGUuZnJvbUJpZ0ludGVnZXIoaCkpO1xufTtcbnouZGVjb2RlRnJvbUhleCA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdC5zdWJzdHIoMCwgMik7XG4gIHZhciByID0gdC5sZW5ndGggLSAyLCBpID0gdC5zdWJzdHIoMiwgciAvIDIpLCBzID0gdC5zdWJzdHIoMiArIHIgLyAyLCByIC8gMiksIG4gPSBuZXcgUihpLCAxNiksIGggPSBuZXcgUihzLCAxNik7XG4gIHJldHVybiBuZXcgeihlLCBlLmZyb21CaWdJbnRlZ2VyKG4pLCBlLmZyb21CaWdJbnRlZ2VyKGgpKTtcbn07XG56LnByb3RvdHlwZS5hZGQyRCA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiBlO1xuICBpZiAoZS5pc0luZmluaXR5KCkpXG4gICAgcmV0dXJuIHRoaXM7XG4gIGlmICh0aGlzLnguZXF1YWxzKGUueCkpXG4gICAgcmV0dXJuIHRoaXMueS5lcXVhbHMoZS55KSA/IHRoaXMudHdpY2UoKSA6IHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKTtcbiAgdmFyIHQgPSBlLnguc3VidHJhY3QodGhpcy54KSwgciA9IGUueS5zdWJ0cmFjdCh0aGlzLnkpLCBpID0gci5kaXZpZGUodCksIHMgPSBpLnNxdWFyZSgpLnN1YnRyYWN0KHRoaXMueCkuc3VidHJhY3QoZS54KSwgbiA9IGkubXVsdGlwbHkodGhpcy54LnN1YnRyYWN0KHMpKS5zdWJ0cmFjdCh0aGlzLnkpO1xuICByZXR1cm4gbmV3IHoodGhpcy5jdXJ2ZSwgcywgbik7XG59O1xuei5wcm90b3R5cGUudHdpY2UyRCA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5pc0luZmluaXR5KCkpXG4gICAgcmV0dXJuIHRoaXM7XG4gIGlmICh0aGlzLnkudG9CaWdJbnRlZ2VyKCkuc2lnbnVtKCkgPT0gMClcbiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpO1xuICB2YXIgZSA9IHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoUi52YWx1ZU9mKDIpKSwgdCA9IHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoUi52YWx1ZU9mKDMpKSwgciA9IHRoaXMueC5zcXVhcmUoKS5tdWx0aXBseSh0KS5hZGQodGhpcy5jdXJ2ZS5hKS5kaXZpZGUodGhpcy55Lm11bHRpcGx5KGUpKSwgaSA9IHIuc3F1YXJlKCkuc3VidHJhY3QodGhpcy54Lm11bHRpcGx5KGUpKSwgcyA9IHIubXVsdGlwbHkodGhpcy54LnN1YnRyYWN0KGkpKS5zdWJ0cmFjdCh0aGlzLnkpO1xuICByZXR1cm4gbmV3IHoodGhpcy5jdXJ2ZSwgaSwgcyk7XG59O1xuei5wcm90b3R5cGUubXVsdGlwbHkyRCA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiB0aGlzO1xuICBpZiAoZS5zaWdudW0oKSA9PSAwKVxuICAgIHJldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCk7XG4gIHZhciB0ID0gZSwgciA9IHQubXVsdGlwbHkobmV3IFIoXCIzXCIpKSwgaSA9IHRoaXMubmVnYXRlKCksIHMgPSB0aGlzLCBuO1xuICBmb3IgKG4gPSByLmJpdExlbmd0aCgpIC0gMjsgbiA+IDA7IC0tbikge1xuICAgIHMgPSBzLnR3aWNlKCk7XG4gICAgdmFyIGggPSByLnRlc3RCaXQobiksIHUgPSB0LnRlc3RCaXQobik7XG4gICAgaCAhPSB1ICYmIChzID0gcy5hZGQyRChoID8gdGhpcyA6IGkpKTtcbiAgfVxuICByZXR1cm4gcztcbn07XG56LnByb3RvdHlwZS5pc09uQ3VydmUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSB0aGlzLmdldFgoKS50b0JpZ0ludGVnZXIoKSwgdCA9IHRoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpLCByID0gdGhpcy5jdXJ2ZS5nZXRBKCkudG9CaWdJbnRlZ2VyKCksIGkgPSB0aGlzLmN1cnZlLmdldEIoKS50b0JpZ0ludGVnZXIoKSwgcyA9IHRoaXMuY3VydmUuZ2V0USgpLCBuID0gdC5tdWx0aXBseSh0KS5tb2QocyksIGggPSBlLm11bHRpcGx5KGUpLm11bHRpcGx5KGUpLmFkZChyLm11bHRpcGx5KGUpKS5hZGQoaSkubW9kKHMpO1xuICByZXR1cm4gbi5lcXVhbHMoaCk7XG59O1xuei5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIFwiKFwiICsgdGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCkudG9TdHJpbmcoKSArIFwiLFwiICsgdGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCkudG9TdHJpbmcoKSArIFwiKVwiO1xufTtcbnoucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gdGhpcy5jdXJ2ZS5nZXRRKCk7XG4gIGlmICh0aGlzLmlzSW5maW5pdHkoKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQb2ludCBpcyBhdCBpbmZpbml0eS5cIik7XG4gIHZhciB0ID0gdGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCksIHIgPSB0aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKTtcbiAgaWYgKHQuY29tcGFyZVRvKFIuT05FKSA8IDAgfHwgdC5jb21wYXJlVG8oZS5zdWJ0cmFjdChSLk9ORSkpID4gMClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ4IGNvb3JkaW5hdGUgb3V0IG9mIGJvdW5kc1wiKTtcbiAgaWYgKHIuY29tcGFyZVRvKFIuT05FKSA8IDAgfHwgci5jb21wYXJlVG8oZS5zdWJ0cmFjdChSLk9ORSkpID4gMClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ5IGNvb3JkaW5hdGUgb3V0IG9mIGJvdW5kc1wiKTtcbiAgaWYgKCF0aGlzLmlzT25DdXJ2ZSgpKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlBvaW50IGlzIG5vdCBvbiB0aGUgY3VydmUuXCIpO1xuICBpZiAodGhpcy5tdWx0aXBseShlKS5pc0luZmluaXR5KCkpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUG9pbnQgaXMgbm90IGEgc2NhbGFyIG11bHRpcGxlIG9mIEcuXCIpO1xuICByZXR1cm4gITA7XG59O1xuLyohIE1pa2UgU2FtdWVsIChjKSAyMDA5IHwgY29kZS5nb29nbGUuY29tL3AvanNvbi1zYW5zLWV2YWxcbiAqL1xudmFyIFB0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gXCIoPzotP1xcXFxiKD86MHxbMS05XVswLTldKikoPzpcXFxcLlswLTldKyk/KD86W2VFXVsrLV0/WzAtOV0rKT9cXFxcYilcIiwgdCA9ICcoPzpbXlxcXFwwLVxcXFx4MDhcXFxceDBhLVxcXFx4MWZcIlxcXFxcXFxcXXxcXFxcXFxcXCg/OltcIi9cXFxcXFxcXGJmbnJ0XXx1WzAtOUEtRmEtZl17NH0pKScsIHIgPSAnKD86XCInICsgdCArICcqXCIpJywgaSA9IG5ldyBSZWdFeHAoXCIoPzpmYWxzZXx0cnVlfG51bGx8W1xcXFx7XFxcXH1cXFxcW1xcXFxdXXxcIiArIGUgKyBcInxcIiArIHIgKyBcIilcIiwgXCJnXCIpLCBzID0gbmV3IFJlZ0V4cChcIlxcXFxcXFxcKD86KFtedV0pfHUoLns0fSkpXCIsIFwiZ1wiKSwgbiA9IHsgJ1wiJzogJ1wiJywgXCIvXCI6IFwiL1wiLCBcIlxcXFxcIjogXCJcXFxcXCIsIGI6IFwiXFxiXCIsIGY6IFwiXFxmXCIsIG46IGBcbmAsIHI6IFwiXFxyXCIsIHQ6IFwiXHRcIiB9O1xuICBmdW5jdGlvbiBoKHksIHYsIG8pIHtcbiAgICByZXR1cm4gdiA/IG5bdl0gOiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG8sIDE2KSk7XG4gIH1cbiAgdmFyIHUgPSBuZXcgU3RyaW5nKFwiXCIpLCBwID0gXCJcXFxcXCIsIGMgPSBPYmplY3QuaGFzT3duUHJvcGVydHk7XG4gIHJldHVybiBmdW5jdGlvbih5LCB2KSB7XG4gICAgdmFyIG8gPSB5Lm1hdGNoKGkpLCBsLCBmID0gb1swXSwgZCA9ICExO1xuICAgIGYgPT09IFwie1wiID8gbCA9IHt9IDogZiA9PT0gXCJbXCIgPyBsID0gW10gOiAobCA9IFtdLCBkID0gITApO1xuICAgIGZvciAodmFyIGcsIFMgPSBbbF0sIGIgPSAxIC0gZCwgRCA9IG8ubGVuZ3RoOyBiIDwgRDsgKytiKSB7XG4gICAgICBmID0gb1tiXTtcbiAgICAgIHZhciBBO1xuICAgICAgc3dpdGNoIChmLmNoYXJDb2RlQXQoMCkpIHtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBBID0gU1swXSwgQVtnIHx8IEEubGVuZ3RoXSA9ICtmLCBnID0gdm9pZCAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM0OlxuICAgICAgICAgIGlmIChmID0gZi5zdWJzdHJpbmcoMSwgZi5sZW5ndGggLSAxKSwgZi5pbmRleE9mKHApICE9PSAtMSAmJiAoZiA9IGYucmVwbGFjZShzLCBoKSksIEEgPSBTWzBdLCAhZylcbiAgICAgICAgICAgIGlmIChBIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICAgIGcgPSBBLmxlbmd0aDtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBnID0gZiB8fCB1O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBBW2ddID0gZiwgZyA9IHZvaWQgMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA5MTpcbiAgICAgICAgICBBID0gU1swXSwgUy51bnNoaWZ0KEFbZyB8fCBBLmxlbmd0aF0gPSBbXSksIGcgPSB2b2lkIDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTM6XG4gICAgICAgICAgUy5zaGlmdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMjpcbiAgICAgICAgICBBID0gU1swXSwgQVtnIHx8IEEubGVuZ3RoXSA9ICExLCBnID0gdm9pZCAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDExMDpcbiAgICAgICAgICBBID0gU1swXSwgQVtnIHx8IEEubGVuZ3RoXSA9IG51bGwsIGcgPSB2b2lkIDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTE2OlxuICAgICAgICAgIEEgPSBTWzBdLCBBW2cgfHwgQS5sZW5ndGhdID0gITAsIGcgPSB2b2lkIDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTIzOlxuICAgICAgICAgIEEgPSBTWzBdLCBTLnVuc2hpZnQoQVtnIHx8IEEubGVuZ3RoXSA9IHt9KSwgZyA9IHZvaWQgMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMjU6XG4gICAgICAgICAgUy5zaGlmdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZCkge1xuICAgICAgaWYgKFMubGVuZ3RoICE9PSAxKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIGwgPSBsWzBdO1xuICAgIH0gZWxzZSBpZiAoUy5sZW5ndGgpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICBpZiAodikge1xuICAgICAgdmFyIEkgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgICAgIHZhciB3ID0gbVtFXTtcbiAgICAgICAgaWYgKHcgJiYgdHlwZW9mIHcgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHZhciB4ID0gbnVsbDtcbiAgICAgICAgICBmb3IgKHZhciBGIGluIHcpXG4gICAgICAgICAgICBpZiAoYy5jYWxsKHcsIEYpICYmIHcgIT09IG0pIHtcbiAgICAgICAgICAgICAgdmFyIFAgPSBJKHcsIEYpO1xuICAgICAgICAgICAgICBQICE9PSB2b2lkIDAgPyB3W0ZdID0gUCA6ICh4IHx8ICh4ID0gW10pLCB4LnB1c2goRikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIGlmICh4KVxuICAgICAgICAgICAgZm9yICh2YXIgVCA9IHgubGVuZ3RoOyAtLVQgPj0gMDsgKVxuICAgICAgICAgICAgICBkZWxldGUgd1t4W1RdXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdi5jYWxsKG0sIEUsIHcpO1xuICAgICAgfTtcbiAgICAgIGwgPSBJKHsgXCJcIjogbCB9LCBcIlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGw7XG4gIH07XG59KCk7XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMSA+IFwidVwiIHx8ICFhLmFzbjEpICYmIChhLmFzbjEgPSB7fSk7XG5hLmFzbjEuQVNOMVV0aWwgPSBuZXcgZnVuY3Rpb24oKSB7XG4gIHRoaXMuaW50ZWdlclRvQnl0ZUhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgdCA9IGUudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiB0Lmxlbmd0aCAlIDIgPT0gMSAmJiAodCA9IFwiMFwiICsgdCksIHQ7XG4gIH0sIHRoaXMuYmlnSW50VG9NaW5Ud29zQ29tcGxlbWVudHNIZXggPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIFplKGUpO1xuICB9LCB0aGlzLmdldFBFTVN0cmluZ0Zyb21IZXggPSBmdW5jdGlvbihlLCB0KSB7XG4gICAgcmV0dXJuIGRlKGUsIHQpO1xuICB9LCB0aGlzLm5ld09iamVjdCA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkFTTjFPYmplY3QsIHMgPSByLkRFUkJvb2xlYW4sIG4gPSByLkRFUkludGVnZXIsIGggPSByLkRFUkJpdFN0cmluZywgdSA9IHIuREVST2N0ZXRTdHJpbmcsIHAgPSByLkRFUk51bGwsIGMgPSByLkRFUk9iamVjdElkZW50aWZpZXIsIHkgPSByLkRFUkVudW1lcmF0ZWQsIHYgPSByLkRFUlVURjhTdHJpbmcsIG8gPSByLkRFUk51bWVyaWNTdHJpbmcsIGwgPSByLkRFUlByaW50YWJsZVN0cmluZywgZiA9IHIuREVSVGVsZXRleFN0cmluZywgZCA9IHIuREVSSUE1U3RyaW5nLCBnID0gci5ERVJVVENUaW1lLCBTID0gci5ERVJHZW5lcmFsaXplZFRpbWUsIGIgPSByLkRFUlZpc2libGVTdHJpbmcsIEQgPSByLkRFUkJNUFN0cmluZywgQSA9IHIuREVSU2VxdWVuY2UsIEkgPSByLkRFUlNldCwgbSA9IHIuREVSVGFnZ2VkT2JqZWN0LCBFID0gci5BU04xVXRpbC5uZXdPYmplY3Q7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiByLkFTTjFPYmplY3QpXG4gICAgICByZXR1cm4gZTtcbiAgICB2YXIgdyA9IE9iamVjdC5rZXlzKGUpO1xuICAgIGlmICh3Lmxlbmd0aCAhPSAxKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwia2V5IG9mIHBhcmFtIHNoYWxsIGJlIG9ubHkgb25lLlwiKTtcbiAgICB2YXIgeCA9IHdbMF07XG4gICAgaWYgKFwiOmFzbjE6Ym9vbDppbnQ6Yml0c3RyOm9jdHN0cjpudWxsOm9pZDplbnVtOnV0ZjhzdHI6bnVtc3RyOnBybnN0cjp0ZWxzdHI6aWE1c3RyOnV0Y3RpbWU6Z2VudGltZTp2aXNzdHI6Ym1wc3RyOnNlcTpzZXQ6dGFnOlwiLmluZGV4T2YoXCI6XCIgKyB4ICsgXCI6XCIpID09IC0xKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5kZWZpbmVkIGtleTogXCIgKyB4KTtcbiAgICBpZiAoeCA9PSBcImJvb2xcIilcbiAgICAgIHJldHVybiBuZXcgcyhlW3hdKTtcbiAgICBpZiAoeCA9PSBcImludFwiKVxuICAgICAgcmV0dXJuIG5ldyBuKGVbeF0pO1xuICAgIGlmICh4ID09IFwiYml0c3RyXCIpXG4gICAgICByZXR1cm4gbmV3IGgoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJvY3RzdHJcIilcbiAgICAgIHJldHVybiBuZXcgdShlW3hdKTtcbiAgICBpZiAoeCA9PSBcIm51bGxcIilcbiAgICAgIHJldHVybiBuZXcgcChlW3hdKTtcbiAgICBpZiAoeCA9PSBcIm9pZFwiKVxuICAgICAgcmV0dXJuIG5ldyBjKGVbeF0pO1xuICAgIGlmICh4ID09IFwiZW51bVwiKVxuICAgICAgcmV0dXJuIG5ldyB5KGVbeF0pO1xuICAgIGlmICh4ID09IFwidXRmOHN0clwiKVxuICAgICAgcmV0dXJuIG5ldyB2KGVbeF0pO1xuICAgIGlmICh4ID09IFwibnVtc3RyXCIpXG4gICAgICByZXR1cm4gbmV3IG8oZVt4XSk7XG4gICAgaWYgKHggPT0gXCJwcm5zdHJcIilcbiAgICAgIHJldHVybiBuZXcgbChlW3hdKTtcbiAgICBpZiAoeCA9PSBcInRlbHN0clwiKVxuICAgICAgcmV0dXJuIG5ldyBmKGVbeF0pO1xuICAgIGlmICh4ID09IFwiaWE1c3RyXCIpXG4gICAgICByZXR1cm4gbmV3IGQoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJ1dGN0aW1lXCIpXG4gICAgICByZXR1cm4gbmV3IGcoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJnZW50aW1lXCIpXG4gICAgICByZXR1cm4gbmV3IFMoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJ2aXNzdHJcIilcbiAgICAgIHJldHVybiBuZXcgYihlW3hdKTtcbiAgICBpZiAoeCA9PSBcImJtcHN0clwiKVxuICAgICAgcmV0dXJuIG5ldyBEKGVbeF0pO1xuICAgIGlmICh4ID09IFwiYXNuMVwiKVxuICAgICAgcmV0dXJuIG5ldyBpKGVbeF0pO1xuICAgIGlmICh4ID09IFwic2VxXCIpIHtcbiAgICAgIGZvciAodmFyIEYgPSBlW3hdLCBQID0gW10sIFQgPSAwOyBUIDwgRi5sZW5ndGg7IFQrKykge1xuICAgICAgICB2YXIgSCA9IEUoRltUXSk7XG4gICAgICAgIFAucHVzaChIKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQSh7IGFycmF5OiBQIH0pO1xuICAgIH1cbiAgICBpZiAoeCA9PSBcInNldFwiKSB7XG4gICAgICBmb3IgKHZhciBGID0gZVt4XSwgUCA9IFtdLCBUID0gMDsgVCA8IEYubGVuZ3RoOyBUKyspIHtcbiAgICAgICAgdmFyIEggPSBFKEZbVF0pO1xuICAgICAgICBQLnB1c2goSCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEkoeyBhcnJheTogUCB9KTtcbiAgICB9XG4gICAgaWYgKHggPT0gXCJ0YWdcIikge1xuICAgICAgdmFyIEMgPSBlW3hdO1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChDKSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiICYmIEMubGVuZ3RoID09IDMpIHtcbiAgICAgICAgdmFyIEIgPSBFKENbMl0pO1xuICAgICAgICByZXR1cm4gbmV3IG0oeyB0YWc6IENbMF0sIGV4cGxpY2l0OiBDWzFdLCBvYmo6IEIgfSk7XG4gICAgICB9IGVsc2VcbiAgICAgICAgcmV0dXJuIG5ldyBtKEMpO1xuICAgIH1cbiAgfSwgdGhpcy5qc29uVG9BU04xSEVYID0gZnVuY3Rpb24oZSkge1xuICAgIHZhciB0ID0gdGhpcy5uZXdPYmplY3QoZSk7XG4gICAgcmV0dXJuIHQudG9oZXgoKTtcbiAgfTtcbn0oKTtcbmEuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludCA9IGZ1bmN0aW9uKGUpIHtcbiAgZm9yICh2YXIgcyA9IFwiXCIsIHQgPSBwYXJzZUludChlLnN1YnN0cigwLCAyKSwgMTYpLCByID0gTWF0aC5mbG9vcih0IC8gNDApLCBpID0gdCAlIDQwLCBzID0gciArIFwiLlwiICsgaSwgbiA9IFwiXCIsIGggPSAyOyBoIDwgZS5sZW5ndGg7IGggKz0gMikge1xuICAgIHZhciB1ID0gcGFyc2VJbnQoZS5zdWJzdHIoaCwgMiksIDE2KSwgcCA9IChcIjAwMDAwMDAwXCIgKyB1LnRvU3RyaW5nKDIpKS5zbGljZSgtOCk7XG4gICAgaWYgKG4gPSBuICsgcC5zdWJzdHIoMSwgNyksIHAuc3Vic3RyKDAsIDEpID09IFwiMFwiKSB7XG4gICAgICB2YXIgYyA9IG5ldyBSKG4sIDIpO1xuICAgICAgcyA9IHMgKyBcIi5cIiArIGMudG9TdHJpbmcoMTApLCBuID0gXCJcIjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHM7XG59O1xuYS5hc24xLkFTTjFVdGlsLm9pZEludFRvSGV4ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGZ1bmN0aW9uKHUpIHtcbiAgICB2YXIgcCA9IHUudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBwLmxlbmd0aCA9PSAxICYmIChwID0gXCIwXCIgKyBwKSwgcDtcbiAgfSwgciA9IGZ1bmN0aW9uKHUpIHtcbiAgICB2YXIgcCA9IFwiXCIsIGMgPSBuZXcgUih1LCAxMCksIHkgPSBjLnRvU3RyaW5nKDIpLCB2ID0gNyAtIHkubGVuZ3RoICUgNztcbiAgICB2ID09IDcgJiYgKHYgPSAwKTtcbiAgICBmb3IgKHZhciBvID0gXCJcIiwgbCA9IDA7IGwgPCB2OyBsKyspXG4gICAgICBvICs9IFwiMFwiO1xuICAgIHkgPSBvICsgeTtcbiAgICBmb3IgKHZhciBsID0gMDsgbCA8IHkubGVuZ3RoIC0gMTsgbCArPSA3KSB7XG4gICAgICB2YXIgZiA9IHkuc3Vic3RyKGwsIDcpO1xuICAgICAgbCAhPSB5Lmxlbmd0aCAtIDcgJiYgKGYgPSBcIjFcIiArIGYpLCBwICs9IHQocGFyc2VJbnQoZiwgMikpO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfTtcbiAgaWYgKCFlLm1hdGNoKC9eWzAtOS5dKyQvKSlcbiAgICB0aHJvdyBcIm1hbGZvcm1lZCBvaWQgc3RyaW5nOiBcIiArIGU7XG4gIHZhciBpID0gXCJcIiwgcyA9IGUuc3BsaXQoXCIuXCIpLCBuID0gcGFyc2VJbnQoc1swXSkgKiA0MCArIHBhcnNlSW50KHNbMV0pO1xuICBpICs9IHQobiksIHMuc3BsaWNlKDAsIDIpO1xuICBmb3IgKHZhciBoID0gMDsgaCA8IHMubGVuZ3RoOyBoKyspXG4gICAgaSArPSByKHNbaF0pO1xuICByZXR1cm4gaTtcbn07XG5hLmFzbjEuQVNOMU9iamVjdCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBcIlwiO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0TGVuZ3RoSGV4RnJvbVZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmhWID4gXCJ1XCIgfHwgdGhpcy5oViA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhpcy5oViBpcyBudWxsIG9yIHVuZGVmaW5lZFwiKTtcbiAgICBpZiAodGhpcy5oVi5sZW5ndGggJSAyID09IDEpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2YWx1ZSBoZXggbXVzdCBiZSBldmVuIGxlbmd0aDogbj1cIiArIHQubGVuZ3RoICsgXCIsdj1cIiArIHRoaXMuaFYpO1xuICAgIHZhciByID0gdGhpcy5oVi5sZW5ndGggLyAyLCBpID0gci50b1N0cmluZygxNik7XG4gICAgaWYgKGkubGVuZ3RoICUgMiA9PSAxICYmIChpID0gXCIwXCIgKyBpKSwgciA8IDEyOClcbiAgICAgIHJldHVybiBpO1xuICAgIHZhciBzID0gaS5sZW5ndGggLyAyO1xuICAgIGlmIChzID4gMTUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBU04uMSBsZW5ndGggdG9vIGxvbmcgdG8gcmVwcmVzZW50IGJ5IDh4OiBuID0gXCIgKyByLnRvU3RyaW5nKDE2KSk7XG4gICAgdmFyIG4gPSAxMjggKyBzO1xuICAgIHJldHVybiBuLnRvU3RyaW5nKDE2KSArIGk7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMuaFRMViA9PSBudWxsIHx8IHRoaXMuaXNNb2RpZmllZCkgJiYgKHRoaXMuaFYgPSB0aGlzLmdldEZyZXNoVmFsdWVIZXgoKSwgdGhpcy5oTCA9IHRoaXMuZ2V0TGVuZ3RoSGV4RnJvbVZhbHVlKCksIHRoaXMuaFRMViA9IHRoaXMuaFQgKyB0aGlzLmhMICsgdGhpcy5oViwgdGhpcy5pc01vZGlmaWVkID0gITEpLCB0aGlzLmhUTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0VmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpLCB0aGlzLmhWO1xuICB9LCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24ocikge1xuICAgIHRoaXMucGFyYW1zID0gcjtcbiAgfSwgZSAhPSBudWxsICYmIGUudGx2ICE9IG51bGwgJiYgKHRoaXMuaFRMViA9IGUudGx2LCB0aGlzLmlzTW9kaWZpZWQgPSAhMSk7XG59O1xuYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmdldFN0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnM7XG4gIH0sIHRoaXMuc2V0U3RyaW5nID0gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLnMgPSB0LCB0aGlzLmhWID0gaHQodGhpcy5zKS50b0xvd2VyQ2FzZSgpO1xuICB9LCB0aGlzLnNldFN0cmluZ0hleCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5zID0gbnVsbCwgdGhpcy5oViA9IHQ7XG4gIH0sIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmhWO1xuICB9LCB0eXBlb2YgZSA8IFwidVwiICYmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gdGhpcy5zZXRTdHJpbmcoZSkgOiB0eXBlb2YgZS5zdHIgPCBcInVcIiA/IHRoaXMuc2V0U3RyaW5nKGUuc3RyKSA6IHR5cGVvZiBlLmhleCA8IFwidVwiICYmIHRoaXMuc2V0U3RyaW5nSGV4KGUuaGV4KSk7XG59O1xuTihhLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5ERVJBYnN0cmFjdFRpbWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJBYnN0cmFjdFRpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmxvY2FsRGF0ZVRvVVRDID0gZnVuY3Rpb24odCkge1xuICAgIHZhciByID0gdC5nZXRUaW1lKCkgKyB0LmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2ZTQsIGkgPSBuZXcgRGF0ZShyKTtcbiAgICByZXR1cm4gaTtcbiAgfSwgdGhpcy5mb3JtYXREYXRlID0gZnVuY3Rpb24odCwgciwgaSkge1xuICAgIHZhciBzID0gdGhpcy56ZXJvUGFkZGluZywgbiA9IHRoaXMubG9jYWxEYXRlVG9VVEModCksIGggPSBTdHJpbmcobi5nZXRGdWxsWWVhcigpKTtcbiAgICByID09IFwidXRjXCIgJiYgKGggPSBoLnN1YnN0cigyLCAyKSk7XG4gICAgdmFyIHUgPSBzKFN0cmluZyhuLmdldE1vbnRoKCkgKyAxKSwgMiksIHAgPSBzKFN0cmluZyhuLmdldERhdGUoKSksIDIpLCBjID0gcyhTdHJpbmcobi5nZXRIb3VycygpKSwgMiksIHkgPSBzKFN0cmluZyhuLmdldE1pbnV0ZXMoKSksIDIpLCB2ID0gcyhTdHJpbmcobi5nZXRTZWNvbmRzKCkpLCAyKSwgbyA9IGggKyB1ICsgcCArIGMgKyB5ICsgdjtcbiAgICBpZiAoaSA9PT0gITApIHtcbiAgICAgIHZhciBsID0gbi5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICAgIGlmIChsICE9IDApIHtcbiAgICAgICAgdmFyIGYgPSBzKFN0cmluZyhsKSwgMyk7XG4gICAgICAgIGYgPSBmLnJlcGxhY2UoL1swXSskLywgXCJcIiksIG8gPSBvICsgXCIuXCIgKyBmO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbyArIFwiWlwiO1xuICB9LCB0aGlzLnplcm9QYWRkaW5nID0gZnVuY3Rpb24odCwgcikge1xuICAgIHJldHVybiB0Lmxlbmd0aCA+PSByID8gdCA6IG5ldyBBcnJheShyIC0gdC5sZW5ndGggKyAxKS5qb2luKFwiMFwiKSArIHQ7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLmhWID0gbnVsbCwgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5wYXJhbXMgPSB0O1xuICB9LCB0aGlzLmdldFN0cmluZyA9IGZ1bmN0aW9uKCkge1xuICB9LCB0aGlzLnNldFN0cmluZyA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5wYXJhbXMgPT0gbnVsbCAmJiAodGhpcy5wYXJhbXMgPSB7fSksIHRoaXMucGFyYW1zLnN0ciA9IHQ7XG4gIH0sIHRoaXMuc2V0QnlEYXRlID0gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLnBhcmFtcyA9PSBudWxsICYmICh0aGlzLnBhcmFtcyA9IHt9KSwgdGhpcy5wYXJhbXMuZGF0ZSA9IHQ7XG4gIH0sIHRoaXMuc2V0QnlEYXRlVmFsdWUgPSBmdW5jdGlvbih0LCByLCBpLCBzLCBuLCBoKSB7XG4gICAgdmFyIHUgPSBuZXcgRGF0ZShEYXRlLlVUQyh0LCByIC0gMSwgaSwgcywgbiwgaCwgMCkpO1xuICAgIHRoaXMuc2V0QnlEYXRlKHUpO1xuICB9LCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5oVjtcbiAgfTtcbn07XG5OKGEuYXNuMS5ERVJBYnN0cmFjdFRpbWUsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5ERVJBYnN0cmFjdFN0cnVjdHVyZWQgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuc2V0QnlBU04xT2JqZWN0QXJyYXkgPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMuYXNuMUFycmF5ID0gdDtcbiAgfSwgdGhpcy5hcHBlbmRBU04xT2JqZWN0ID0gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLmFzbjFBcnJheS5wdXNoKHQpO1xuICB9LCB0aGlzLmFzbjFBcnJheSA9IG5ldyBBcnJheSgpLCB0eXBlb2YgZSA8IFwidVwiICYmIHR5cGVvZiBlLmFycmF5IDwgXCJ1XCIgJiYgKHRoaXMuYXNuMUFycmF5ID0gZS5hcnJheSk7XG59O1xuTihhLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuREVSQm9vbGVhbiA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUkJvb2xlYW4uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmhUID0gXCIwMVwiLCBlID09ICExID8gdGhpcy5oVExWID0gXCIwMTAxMDBcIiA6IHRoaXMuaFRMViA9IFwiMDEwMWZmXCI7XG59O1xuTihhLmFzbjEuREVSQm9vbGVhbiwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLkRFUkludGVnZXIgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJJbnRlZ2VyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5oVCA9IFwiMDJcIiwgdGhpcy5wYXJhbXMgPSBudWxsO1xuICB2YXIgdCA9IFplO1xuICB0aGlzLnNldEJ5QmlnSW50ZWdlciA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5wYXJhbXMgPSB7IGJpZ2ludDogciB9O1xuICB9LCB0aGlzLnNldEJ5SW50ZWdlciA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5wYXJhbXMgPSByO1xuICB9LCB0aGlzLnNldFZhbHVlSGV4ID0gZnVuY3Rpb24ocikge1xuICAgIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLnBhcmFtcyA9IHsgaGV4OiByIH07XG4gIH0sIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByID0gdGhpcy5wYXJhbXMsIGkgPSBudWxsO1xuICAgIGlmIChyID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2YWx1ZSBub3Qgc2V0XCIpO1xuICAgIGlmICh0eXBlb2YgciA9PSBcIm9iamVjdFwiICYmIHIuaGV4ICE9IG51bGwpXG4gICAgICByZXR1cm4gdGhpcy5oViA9IHIuaGV4LCB0aGlzLmhWO1xuICAgIGlmICh0eXBlb2YgciA9PSBcIm51bWJlclwiKVxuICAgICAgaSA9IG5ldyBSKFN0cmluZyhyKSwgMTApO1xuICAgIGVsc2UgaWYgKHIuaW50ICE9IG51bGwpXG4gICAgICBpID0gbmV3IFIoU3RyaW5nKHIuaW50KSwgMTApO1xuICAgIGVsc2UgaWYgKHIuYmlnaW50ICE9IG51bGwpXG4gICAgICBpID0gci5iaWdpbnQ7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwid3JvbmcgcGFyYW1ldGVyXCIpO1xuICAgIHJldHVybiB0aGlzLmhWID0gdChpKSwgdGhpcy5oVjtcbiAgfSwgZSAhPSBudWxsICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLkRFUkludGVnZXIsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5ERVJCaXRTdHJpbmcgPSBmdW5jdGlvbihlKSB7XG4gIGlmIChlICE9PSB2b2lkIDAgJiYgdHlwZW9mIGUub2JqIDwgXCJ1XCIpIHtcbiAgICB2YXIgdCA9IGEuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QoZS5vYmopO1xuICAgIGUuaGV4ID0gXCIwMFwiICsgdC50b2hleCgpO1xuICB9XG4gIGEuYXNuMS5ERVJCaXRTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmhUID0gXCIwM1wiLCB0aGlzLnNldEhleFZhbHVlSW5jbHVkaW5nVW51c2VkQml0cyA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5oViA9IHI7XG4gIH0sIHRoaXMuc2V0VW51c2VkQml0c0FuZEhleFZhbHVlID0gZnVuY3Rpb24ociwgaSkge1xuICAgIGlmIChyIDwgMCB8fCA3IDwgcilcbiAgICAgIHRocm93IFwidW51c2VkIGJpdHMgc2hhbGwgYmUgZnJvbSAwIHRvIDc6IHUgPSBcIiArIHI7XG4gICAgdmFyIHMgPSBcIjBcIiArIHI7XG4gICAgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMuaFYgPSBzICsgaTtcbiAgfSwgdGhpcy5zZXRCeUJpbmFyeVN0cmluZyA9IGZ1bmN0aW9uKHIpIHtcbiAgICByID0gci5yZXBsYWNlKC8wKyQvLCBcIlwiKTtcbiAgICB2YXIgaSA9IDggLSByLmxlbmd0aCAlIDg7XG4gICAgaSA9PSA4ICYmIChpID0gMCksIHIgKz0gXCIwMDAwMDAwXCIuc3Vic3RyKDAsIGkpO1xuICAgIGZvciAodmFyIHMgPSBcIlwiLCBuID0gMDsgbiA8IHIubGVuZ3RoIC0gMTsgbiArPSA4KSB7XG4gICAgICB2YXIgaCA9IHIuc3Vic3RyKG4sIDgpLCB1ID0gcGFyc2VJbnQoaCwgMikudG9TdHJpbmcoMTYpO1xuICAgICAgdS5sZW5ndGggPT0gMSAmJiAodSA9IFwiMFwiICsgdSksIHMgKz0gdTtcbiAgICB9XG4gICAgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMuaFYgPSBcIjBcIiArIGkgKyBzO1xuICB9LCB0aGlzLnNldEJ5Qm9vbGVhbkFycmF5ID0gZnVuY3Rpb24ocikge1xuICAgIGZvciAodmFyIGkgPSBcIlwiLCBzID0gMDsgcyA8IHIubGVuZ3RoOyBzKyspXG4gICAgICByW3NdID09ICEwID8gaSArPSBcIjFcIiA6IGkgKz0gXCIwXCI7XG4gICAgdGhpcy5zZXRCeUJpbmFyeVN0cmluZyhpKTtcbiAgfSwgdGhpcy5uZXdGYWxzZUFycmF5ID0gZnVuY3Rpb24ocikge1xuICAgIGZvciAodmFyIGkgPSBuZXcgQXJyYXkociksIHMgPSAwOyBzIDwgcjsgcysrKVxuICAgICAgaVtzXSA9ICExO1xuICAgIHJldHVybiBpO1xuICB9LCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5oVjtcbiAgfSwgdHlwZW9mIGUgPCBcInVcIiAmJiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIiAmJiBlLnRvTG93ZXJDYXNlKCkubWF0Y2goL15bMC05YS1mXSskLykgPyB0aGlzLnNldEhleFZhbHVlSW5jbHVkaW5nVW51c2VkQml0cyhlKSA6IHR5cGVvZiBlLmhleCA8IFwidVwiID8gdGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHMoZS5oZXgpIDogdHlwZW9mIGUuYmluIDwgXCJ1XCIgPyB0aGlzLnNldEJ5QmluYXJ5U3RyaW5nKGUuYmluKSA6IHR5cGVvZiBlLmFycmF5IDwgXCJ1XCIgJiYgdGhpcy5zZXRCeUJvb2xlYW5BcnJheShlLmFycmF5KSk7XG59O1xuTihhLmFzbjEuREVSQml0U3RyaW5nLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuREVST2N0ZXRTdHJpbmcgPSBmdW5jdGlvbihlKSB7XG4gIGlmIChlICE9PSB2b2lkIDAgJiYgdHlwZW9mIGUub2JqIDwgXCJ1XCIpIHtcbiAgICB2YXIgdCA9IGEuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QoZS5vYmopO1xuICAgIGUuaGV4ID0gdC50b2hleCgpO1xuICB9XG4gIGEuYXNuMS5ERVJPY3RldFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjA0XCI7XG59O1xuTihhLmFzbjEuREVST2N0ZXRTdHJpbmcsIGEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7XG5hLmFzbjEuREVSTnVsbCA9IGZ1bmN0aW9uKCkge1xuICBhLmFzbjEuREVSTnVsbC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuaFQgPSBcIjA1XCIsIHRoaXMuaFRMViA9IFwiMDUwMFwiO1xufTtcbk4oYS5hc24xLkRFUk51bGwsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVST2JqZWN0SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuaFQgPSBcIjA2XCIsIHRoaXMuc2V0VmFsdWVIZXggPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMucyA9IG51bGwsIHRoaXMuaFYgPSB0O1xuICB9LCB0aGlzLnNldFZhbHVlT2lkU3RyaW5nID0gZnVuY3Rpb24odCkge1xuICAgIHZhciByID0gbW4odCk7XG4gICAgaWYgKHIgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBvaWQgc3RyaW5nOiBcIiArIHQpO1xuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLnMgPSBudWxsLCB0aGlzLmhWID0gcjtcbiAgfSwgdGhpcy5zZXRWYWx1ZU5hbWUgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIHIgPSBhLmFzbjEueDUwOS5PSUQubmFtZTJvaWQodCk7XG4gICAgaWYgKHIgIT09IFwiXCIpXG4gICAgICB0aGlzLnNldFZhbHVlT2lkU3RyaW5nKHIpO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRFUk9iamVjdElkZW50aWZpZXIgb2lkTmFtZSB1bmRlZmluZWQ6IFwiICsgdCk7XG4gIH0sIHRoaXMuc2V0VmFsdWVOYW1lT3JPaWQgPSBmdW5jdGlvbih0KSB7XG4gICAgdC5tYXRjaCgvXlswLTJdLlswLTkuXSskLykgPyB0aGlzLnNldFZhbHVlT2lkU3RyaW5nKHQpIDogdGhpcy5zZXRWYWx1ZU5hbWUodCk7XG4gIH0sIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmhWO1xuICB9LCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbih0KSB7XG4gICAgdHlwZW9mIHQgPT0gXCJzdHJpbmdcIiA/IHRoaXMuc2V0VmFsdWVOYW1lT3JPaWQodCkgOiB0Lm9pZCAhPT0gdm9pZCAwID8gdGhpcy5zZXRWYWx1ZU5hbWVPck9pZCh0Lm9pZCkgOiB0Lm5hbWUgIT09IHZvaWQgMCA/IHRoaXMuc2V0VmFsdWVOYW1lT3JPaWQodC5uYW1lKSA6IHQuaGV4ICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRWYWx1ZUhleCh0LmhleCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuREVST2JqZWN0SWRlbnRpZmllciwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLkRFUkVudW1lcmF0ZWQgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJFbnVtZXJhdGVkLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5oVCA9IFwiMGFcIiwgdGhpcy5zZXRCeUJpZ0ludGVnZXIgPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMuaFYgPSBaZSh0KTtcbiAgfSwgdGhpcy5zZXRCeUludGVnZXIgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIHIgPSBuZXcgUihTdHJpbmcodCksIDEwKTtcbiAgICB0aGlzLnNldEJ5QmlnSW50ZWdlcihyKTtcbiAgfSwgdGhpcy5zZXRWYWx1ZUhleCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLmhWID0gdDtcbiAgfSwgdGhpcy5nZXRGcmVzaFZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaFY7XG4gIH0sIHR5cGVvZiBlIDwgXCJ1XCIgJiYgKHR5cGVvZiBlLmludCA8IFwidVwiID8gdGhpcy5zZXRCeUludGVnZXIoZS5pbnQpIDogdHlwZW9mIGUgPT0gXCJudW1iZXJcIiA/IHRoaXMuc2V0QnlJbnRlZ2VyKGUpIDogdHlwZW9mIGUuaGV4IDwgXCJ1XCIgJiYgdGhpcy5zZXRWYWx1ZUhleChlLmhleCkpO1xufTtcbk4oYS5hc24xLkRFUkVudW1lcmF0ZWQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5ERVJVVEY4U3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSVVRGOFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjBjXCI7XG59O1xuTihhLmFzbjEuREVSVVRGOFN0cmluZywgYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtcbmEuYXNuMS5ERVJOdW1lcmljU3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSTnVtZXJpY1N0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjEyXCI7XG59O1xuTihhLmFzbjEuREVSTnVtZXJpY1N0cmluZywgYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtcbmEuYXNuMS5ERVJQcmludGFibGVTdHJpbmcgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJQcmludGFibGVTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIxM1wiO1xufTtcbk4oYS5hc24xLkRFUlByaW50YWJsZVN0cmluZywgYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtcbmEuYXNuMS5ERVJUZWxldGV4U3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSVGVsZXRleFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjE0XCI7XG59O1xuTihhLmFzbjEuREVSVGVsZXRleFN0cmluZywgYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtcbmEuYXNuMS5ERVJJQTVTdHJpbmcgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJJQTVTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIxNlwiO1xufTtcbk4oYS5hc24xLkRFUklBNVN0cmluZywgYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtcbmEuYXNuMS5ERVJWaXNpYmxlU3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSSUE1U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5oVCA9IFwiMWFcIjtcbn07XG5OKGEuYXNuMS5ERVJWaXNpYmxlU3RyaW5nLCBhLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO1xuYS5hc24xLkRFUkJNUFN0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUkJNUFN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjFlXCI7XG59O1xuTihhLmFzbjEuREVSQk1QU3RyaW5nLCBhLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO1xuYS5hc24xLkRFUlVUQ1RpbWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJVVENUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5oVCA9IFwiMTdcIiwgdGhpcy5wYXJhbXMgPSB2b2lkIDAsIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKHRoaXMucGFyYW1zID09IG51bGwgJiYgKHQgPSB7IGRhdGU6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLCB0eXBlb2YgdCA9PSBcInN0cmluZ1wiKVxuICAgICAgaWYgKHQubWF0Y2goL15bMC05XXsxMn1aJC8pIHx8IHQubWF0Y2goL15bMC05XXsxMn1cXC5bMC05XStaJC8pKVxuICAgICAgICB0aGlzLmhWID0gRWUodCk7XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBzdHJpbmcgZm9yIFVUQ1RpbWU6IFwiICsgdCk7XG4gICAgZWxzZSBpZiAodC5zdHIgIT0gbnVsbClcbiAgICAgIHRoaXMuaFYgPSBFZSh0LnN0cik7XG4gICAgZWxzZSBpZiAodC5kYXRlID09IG51bGwgJiYgdC5taWxsaXMgPT0gITApIHtcbiAgICAgIHZhciByID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgICB0aGlzLmhWID0gRWUodGhpcy5mb3JtYXREYXRlKHIsIFwidXRjXCIsICEwKSk7XG4gICAgfSBlbHNlIGlmICh0LmRhdGUgIT0gbnVsbCAmJiB0LmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICB2YXIgaSA9IHQubWlsbGlzID09PSAhMDtcbiAgICAgIHRoaXMuaFYgPSBFZSh0aGlzLmZvcm1hdERhdGUodC5kYXRlLCBcInV0Y1wiLCBpKSk7XG4gICAgfSBlbHNlXG4gICAgICB0IGluc3RhbmNlb2YgRGF0ZSAmJiAodGhpcy5oViA9IEVlKHRoaXMuZm9ybWF0RGF0ZSh0LCBcInV0Y1wiKSkpO1xuICAgIGlmICh0aGlzLmhWID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwYXJhbWV0ZXIgbm90IHNwZWNpZmllZCBwcm9wZXJseSBmb3IgVVRDVGltZVwiKTtcbiAgICByZXR1cm4gdGhpcy5oVjtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5ERVJVVENUaW1lLCBhLmFzbjEuREVSQWJzdHJhY3RUaW1lKTtcbmEuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJHZW5lcmFsaXplZFRpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIxOFwiLCB0aGlzLnBhcmFtcyA9IGUsIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKHRoaXMucGFyYW1zID09IG51bGwgJiYgKHQgPSB7IGRhdGU6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH0pLCB0eXBlb2YgdCA9PSBcInN0cmluZ1wiKVxuICAgICAgaWYgKHQubWF0Y2goL15bMC05XXsxNH1aJC8pIHx8IHQubWF0Y2goL15bMC05XXsxNH1cXC5bMC05XStaJC8pKVxuICAgICAgICB0aGlzLmhWID0gRWUodCk7XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBzdHJpbmcgZm9yIEdlbmVyYWxpemVkVGltZTogXCIgKyB0KTtcbiAgICBlbHNlIGlmICh0LnN0ciAhPSBudWxsKVxuICAgICAgdGhpcy5oViA9IEVlKHQuc3RyKTtcbiAgICBlbHNlIGlmICh0LmRhdGUgPT0gbnVsbCAmJiB0Lm1pbGxpcyA9PSAhMCkge1xuICAgICAgdmFyIHIgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICAgIHRoaXMuaFYgPSBFZSh0aGlzLmZvcm1hdERhdGUociwgXCJnZW5cIiwgITApKTtcbiAgICB9IGVsc2UgaWYgKHQuZGF0ZSAhPSBudWxsICYmIHQuZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHZhciBpID0gdC5taWxsaXMgPT09ICEwO1xuICAgICAgdGhpcy5oViA9IEVlKHRoaXMuZm9ybWF0RGF0ZSh0LmRhdGUsIFwiZ2VuXCIsIGkpKTtcbiAgICB9IGVsc2VcbiAgICAgIHQgaW5zdGFuY2VvZiBEYXRlICYmICh0aGlzLmhWID0gRWUodGhpcy5mb3JtYXREYXRlKHQsIFwiZ2VuXCIpKSk7XG4gICAgaWYgKHRoaXMuaFYgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInBhcmFtZXRlciBub3Qgc3BlY2lmaWVkIHByb3Blcmx5IGZvciBHZW5lcmFsaXplZFRpbWVcIik7XG4gICAgcmV0dXJuIHRoaXMuaFY7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lLCBhLmFzbjEuREVSQWJzdHJhY3RUaW1lKTtcbmEuYXNuMS5ERVJTZXF1ZW5jZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUlNlcXVlbmNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5oVCA9IFwiMzBcIiwgdGhpcy5nZXRGcmVzaFZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgdCA9IFwiXCIsIHIgPSAwOyByIDwgdGhpcy5hc24xQXJyYXkubGVuZ3RoOyByKyspIHtcbiAgICAgIHZhciBpID0gdGhpcy5hc24xQXJyYXlbcl07XG4gICAgICB0ICs9IGkudG9oZXgoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaFYgPSB0LCB0aGlzLmhWO1xuICB9O1xufTtcbk4oYS5hc24xLkRFUlNlcXVlbmNlLCBhLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKTtcbmEuYXNuMS5ERVJTZXQgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJTZXQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIzMVwiLCB0aGlzLnNvcnRGbGFnID0gITAsIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHQgPSBuZXcgQXJyYXkoKSwgciA9IDA7IHIgPCB0aGlzLmFzbjFBcnJheS5sZW5ndGg7IHIrKykge1xuICAgICAgdmFyIGkgPSB0aGlzLmFzbjFBcnJheVtyXTtcbiAgICAgIHQucHVzaChpLnRvaGV4KCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zb3J0RmxhZyA9PSAhMCAmJiB0LnNvcnQoKSwgdGhpcy5oViA9IHQuam9pbihcIlwiKSwgdGhpcy5oVjtcbiAgfSwgdHlwZW9mIGUgPCBcInVcIiAmJiB0eXBlb2YgZS5zb3J0ZmxhZyA8IFwidVwiICYmIGUuc29ydGZsYWcgPT0gITEgJiYgKHRoaXMuc29ydEZsYWcgPSAhMSk7XG59O1xuTihhLmFzbjEuREVSU2V0LCBhLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkKTtcbmEuYXNuMS5ERVJUYWdnZWRPYmplY3QgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJUYWdnZWRPYmplY3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEuYXNuMSwgciA9IFYsIGkgPSByLmdldFY7XG4gIHIuaXNBU04xSEVYO1xuICB2YXIgcyA9IHQuQVNOMVV0aWwubmV3T2JqZWN0O1xuICB0aGlzLmhUID0gXCJhMFwiLCB0aGlzLmhWID0gXCJcIiwgdGhpcy5pc0V4cGxpY2l0ID0gITAsIHRoaXMuYXNuMU9iamVjdCA9IG51bGwsIHRoaXMucGFyYW1zID0geyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICEwIH0sIHRoaXMuc2V0QVNOMU9iamVjdCA9IGZ1bmN0aW9uKG4sIGgsIHUpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHsgdGFnOiBoLCBleHBsaWNpdDogbiwgb2JqOiB1IH07XG4gIH0sIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKG4uZXhwbGljaXQgPT0gbnVsbCAmJiAobi5leHBsaWNpdCA9ICEwKSwgbi50YWdlICE9IG51bGwgJiYgKG4udGFnID0gbi50YWdlLCBuLmV4cGxpY2l0ID0gITApLCBuLnRhZ2kgIT0gbnVsbCAmJiAobi50YWcgPSBuLnRhZ2ksIG4uZXhwbGljaXQgPSAhMSksIG4uc3RyICE9IG51bGwpXG4gICAgICB0aGlzLmhWID0gaHQobi5zdHIpO1xuICAgIGVsc2UgaWYgKG4uaGV4ICE9IG51bGwpXG4gICAgICB0aGlzLmhWID0gbi5oZXg7XG4gICAgZWxzZSBpZiAobi5vYmogIT0gbnVsbCkge1xuICAgICAgdmFyIGg7XG4gICAgICBuLm9iaiBpbnN0YW5jZW9mIHQuQVNOMU9iamVjdCA/IGggPSBuLm9iai50b2hleCgpIDogdHlwZW9mIG4ub2JqID09IFwib2JqZWN0XCIgJiYgKGggPSBzKG4ub2JqKS50b2hleCgpKSwgbi5leHBsaWNpdCA/IHRoaXMuaFYgPSBoIDogdGhpcy5oViA9IGkoaCwgMCk7XG4gICAgfSBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzdHIsIGhleCBub3Igb2JqIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgcmV0dXJuIG4udGFnID09IG51bGwgJiYgKG4udGFnID0gXCJhMFwiKSwgdGhpcy5oVCA9IG4udGFnLCB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5oVjtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24obikge1xuICAgIHRoaXMucGFyYW1zID0gbjtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5ERVJUYWdnZWRPYmplY3QsIGEuYXNuMS5BU04xT2JqZWN0KTtcbnZhciBWID0gbmV3IGZ1bmN0aW9uKCkge1xufSgpO1xuVi5nZXRMYmxlbiA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgaWYgKGUuc3Vic3RyKHQgKyAyLCAxKSAhPSBcIjhcIilcbiAgICByZXR1cm4gMTtcbiAgdmFyIHIgPSBwYXJzZUludChlLnN1YnN0cih0ICsgMywgMSkpO1xuICByZXR1cm4gciA9PSAwID8gLTEgOiAwIDwgciAmJiByIDwgMTAgPyByICsgMSA6IC0yO1xufTtcblYuZ2V0TCA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBWLmdldExibGVuKGUsIHQpO1xuICByZXR1cm4gciA8IDEgPyBcIlwiIDogZS5zdWJzdHIodCArIDIsIHIgKiAyKTtcbn07XG5WLmdldFZibGVuID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciwgaTtcbiAgcmV0dXJuIHIgPSBWLmdldEwoZSwgdCksIHIgPT0gXCJcIiA/IC0xIDogKHIuc3Vic3RyKDAsIDEpID09PSBcIjhcIiA/IGkgPSBuZXcgUihyLnN1YnN0cigyKSwgMTYpIDogaSA9IG5ldyBSKHIsIDE2KSwgaS5pbnRWYWx1ZSgpKTtcbn07XG5WLmdldFZpZHggPSBmdW5jdGlvbihlLCB0KSB7XG4gIHZhciByID0gVi5nZXRMYmxlbihlLCB0KTtcbiAgcmV0dXJuIHIgPCAwID8gciA6IHQgKyAociArIDEpICogMjtcbn07XG5WLmdldFYgPSBmdW5jdGlvbihlLCB0KSB7XG4gIHZhciByID0gVi5nZXRWaWR4KGUsIHQpLCBpID0gVi5nZXRWYmxlbihlLCB0KTtcbiAgcmV0dXJuIGUuc3Vic3RyKHIsIGkgKiAyKTtcbn07XG5WLmdldFRMViA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgcmV0dXJuIGUuc3Vic3RyKHQsIDIpICsgVi5nZXRMKGUsIHQpICsgVi5nZXRWKGUsIHQpO1xufTtcblYuZ2V0VExWYmxlbiA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgcmV0dXJuIDIgKyBWLmdldExibGVuKGUsIHQpICogMiArIFYuZ2V0VmJsZW4oZSwgdCkgKiAyO1xufTtcblYuZ2V0TmV4dFNpYmxpbmdJZHggPSBmdW5jdGlvbihlLCB0KSB7XG4gIHZhciByID0gVi5nZXRWaWR4KGUsIHQpLCBpID0gVi5nZXRWYmxlbihlLCB0KTtcbiAgcmV0dXJuIHIgKyBpICogMjtcbn07XG5WLmdldENoaWxkSWR4ID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IFYsIGkgPSBbXSwgcywgbiwgaDtcbiAgcyA9IHIuZ2V0VmlkeChlLCB0KSwgbiA9IHIuZ2V0VmJsZW4oZSwgdCkgKiAyLCBlLnN1YnN0cih0LCAyKSA9PSBcIjAzXCIgJiYgKHMgKz0gMiwgbiAtPSAyKSwgaCA9IDA7XG4gIGZvciAodmFyIHUgPSBzOyBoIDw9IG47ICkge1xuICAgIHZhciBwID0gci5nZXRUTFZibGVuKGUsIHUpO1xuICAgIGlmIChoICs9IHAsIGggPD0gbiAmJiBpLnB1c2godSksIHUgKz0gcCwgaCA+PSBuKVxuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIGk7XG59O1xuVi5nZXROdGhDaGlsZElkeCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgdmFyIGkgPSBWLmdldENoaWxkSWR4KGUsIHQpO1xuICByZXR1cm4gaVtyXTtcbn07XG5WLmdldElkeGJ5TGlzdCA9IGZ1bmN0aW9uKGUsIHQsIHIsIGkpIHtcbiAgdmFyIHMgPSBWLCBuLCBoO1xuICByZXR1cm4gci5sZW5ndGggPT0gMCA/IGkgIT09IHZvaWQgMCAmJiBlLnN1YnN0cih0LCAyKSAhPT0gaSA/IC0xIDogdCA6IChuID0gci5zaGlmdCgpLCBoID0gcy5nZXRDaGlsZElkeChlLCB0KSwgbiA+PSBoLmxlbmd0aCA/IC0xIDogcy5nZXRJZHhieUxpc3QoZSwgaFtuXSwgciwgaSkpO1xufTtcblYuZ2V0SWR4YnlMaXN0RXggPSBmdW5jdGlvbihlLCB0LCByLCBpKSB7XG4gIHZhciBzID0gViwgbiwgaDtcbiAgaWYgKHIubGVuZ3RoID09IDApXG4gICAgcmV0dXJuIGkgIT09IHZvaWQgMCAmJiBlLnN1YnN0cih0LCAyKSAhPT0gaSA/IC0xIDogdDtcbiAgbiA9IHIuc2hpZnQoKSwgaCA9IHMuZ2V0Q2hpbGRJZHgoZSwgdCk7XG4gIGZvciAodmFyIHUgPSAwLCBwID0gMDsgcCA8IGgubGVuZ3RoOyBwKyspIHtcbiAgICB2YXIgYyA9IGUuc3Vic3RyKGhbcF0sIDIpO1xuICAgIGlmICh0eXBlb2YgbiA9PSBcIm51bWJlclwiICYmICFzLmlzQ29udGV4dFRhZyhjKSAmJiB1ID09IG4gfHwgdHlwZW9mIG4gPT0gXCJzdHJpbmdcIiAmJiBzLmlzQ29udGV4dFRhZyhjLCBuKSlcbiAgICAgIHJldHVybiBzLmdldElkeGJ5TGlzdEV4KGUsIGhbcF0sIHIsIGkpO1xuICAgIHMuaXNDb250ZXh0VGFnKGMpIHx8IHUrKztcbiAgfVxuICByZXR1cm4gLTE7XG59O1xuVi5nZXRUTFZieUxpc3QgPSBmdW5jdGlvbihlLCB0LCByLCBpKSB7XG4gIHZhciBzID0gViwgbiA9IHMuZ2V0SWR4YnlMaXN0KGUsIHQsIHIsIGkpO1xuICByZXR1cm4gbiA9PSAtMSB8fCBuID49IGUubGVuZ3RoID8gbnVsbCA6IHMuZ2V0VExWKGUsIG4pO1xufTtcblYuZ2V0VExWYnlMaXN0RXggPSBmdW5jdGlvbihlLCB0LCByLCBpKSB7XG4gIHZhciBzID0gViwgbiA9IHMuZ2V0SWR4YnlMaXN0RXgoZSwgdCwgciwgaSk7XG4gIHJldHVybiBuID09IC0xID8gbnVsbCA6IHMuZ2V0VExWKGUsIG4pO1xufTtcblYuZ2V0VmJ5TGlzdCA9IGZ1bmN0aW9uKGUsIHQsIHIsIGksIHMpIHtcbiAgdmFyIG4gPSBWLCBoLCB1O1xuICByZXR1cm4gaCA9IG4uZ2V0SWR4YnlMaXN0KGUsIHQsIHIsIGkpLCBoID09IC0xIHx8IGggPj0gZS5sZW5ndGggPyBudWxsIDogKHUgPSBuLmdldFYoZSwgaCksIHMgPT09ICEwICYmICh1ID0gdS5zdWJzdHIoMikpLCB1KTtcbn07XG5WLmdldFZieUxpc3RFeCA9IGZ1bmN0aW9uKGUsIHQsIHIsIGksIHMpIHtcbiAgdmFyIG4gPSBWLCBoLCB1O1xuICByZXR1cm4gaCA9IG4uZ2V0SWR4YnlMaXN0RXgoZSwgdCwgciwgaSksIGggPT0gLTEgPyBudWxsIDogKHUgPSBuLmdldFYoZSwgaCksIGUuc3Vic3RyKGgsIDIpID09IFwiMDNcIiAmJiBzICE9PSAhMSAmJiAodSA9IHUuc3Vic3RyKDIpKSwgdSk7XG59O1xuVi5nZXRJbnQgPSBmdW5jdGlvbihlLCB0LCByKSB7XG4gIHIgPT0gbnVsbCAmJiAociA9IC0xKTtcbiAgdHJ5IHtcbiAgICB2YXIgaSA9IGUuc3Vic3RyKHQsIDIpO1xuICAgIGlmIChpICE9IFwiMDJcIiAmJiBpICE9IFwiMDNcIilcbiAgICAgIHJldHVybiByO1xuICAgIHZhciBzID0gVi5nZXRWKGUsIHQpO1xuICAgIHJldHVybiBpID09IFwiMDJcIiA/IHBhcnNlSW50KHMsIDE2KSA6IFNuKHMpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gcjtcbiAgfVxufTtcblYuZ2V0T0lEID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICByID09IG51bGwgJiYgKHIgPSBudWxsKTtcbiAgdHJ5IHtcbiAgICBpZiAoZS5zdWJzdHIodCwgMikgIT0gXCIwNlwiKVxuICAgICAgcmV0dXJuIHI7XG4gICAgdmFyIGkgPSBWLmdldFYoZSwgdCk7XG4gICAgcmV0dXJuIGZ0KGkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gcjtcbiAgfVxufTtcblYuZ2V0T0lETmFtZSA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgciA9PSBudWxsICYmIChyID0gbnVsbCk7XG4gIHRyeSB7XG4gICAgdmFyIGkgPSBWLmdldE9JRChlLCB0LCByKTtcbiAgICBpZiAoaSA9PSByKVxuICAgICAgcmV0dXJuIHI7XG4gICAgdmFyIHMgPSBhLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoaSk7XG4gICAgcmV0dXJuIHMgPT0gXCJcIiA/IGkgOiBzO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gcjtcbiAgfVxufTtcblYuZ2V0U3RyaW5nID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICByID09IG51bGwgJiYgKHIgPSBudWxsKTtcbiAgdHJ5IHtcbiAgICB2YXIgaSA9IFYuZ2V0VihlLCB0KTtcbiAgICByZXR1cm4gQWUoaSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiByO1xuICB9XG59O1xuVi5oZXh0b29pZHN0ciA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBmdW5jdGlvbih2LCBvKSB7XG4gICAgcmV0dXJuIHYubGVuZ3RoID49IG8gPyB2IDogbmV3IEFycmF5KG8gLSB2Lmxlbmd0aCArIDEpLmpvaW4oXCIwXCIpICsgdjtcbiAgfSwgciA9IFtdLCBpID0gZS5zdWJzdHIoMCwgMiksIHMgPSBwYXJzZUludChpLCAxNik7XG4gIHJbMF0gPSBuZXcgU3RyaW5nKE1hdGguZmxvb3IocyAvIDQwKSksIHJbMV0gPSBuZXcgU3RyaW5nKHMgJSA0MCk7XG4gIGZvciAodmFyIG4gPSBlLnN1YnN0cigyKSwgaCA9IFtdLCB1ID0gMDsgdSA8IG4ubGVuZ3RoIC8gMjsgdSsrKVxuICAgIGgucHVzaChwYXJzZUludChuLnN1YnN0cih1ICogMiwgMiksIDE2KSk7XG4gIGZvciAodmFyIHAgPSBbXSwgYyA9IFwiXCIsIHUgPSAwOyB1IDwgaC5sZW5ndGg7IHUrKylcbiAgICBoW3VdICYgMTI4ID8gYyA9IGMgKyB0KChoW3VdICYgMTI3KS50b1N0cmluZygyKSwgNykgOiAoYyA9IGMgKyB0KChoW3VdICYgMTI3KS50b1N0cmluZygyKSwgNyksIHAucHVzaChuZXcgU3RyaW5nKHBhcnNlSW50KGMsIDIpKSksIGMgPSBcIlwiKTtcbiAgdmFyIHkgPSByLmpvaW4oXCIuXCIpO1xuICByZXR1cm4gcC5sZW5ndGggPiAwICYmICh5ID0geSArIFwiLlwiICsgcC5qb2luKFwiLlwiKSksIHk7XG59O1xuVi5kdW1wID0gZnVuY3Rpb24oZSwgdCwgciwgaSkge1xuICB2YXIgcyA9IFYsIG4gPSBzLmdldFYsIGggPSBzLmR1bXAsIHUgPSBzLmdldENoaWxkSWR4LCBwID0gZTtcbiAgZSBpbnN0YW5jZW9mIGEuYXNuMS5BU04xT2JqZWN0ICYmIChwID0gZS50b2hleCgpKTtcbiAgdmFyIGMgPSBmdW5jdGlvbihFLCB3KSB7XG4gICAgaWYgKEUubGVuZ3RoIDw9IHcgKiAyKVxuICAgICAgcmV0dXJuIEU7XG4gICAgdmFyIHggPSBFLnN1YnN0cigwLCB3KSArIFwiLi4odG90YWwgXCIgKyBFLmxlbmd0aCAvIDIgKyBcImJ5dGVzKS4uXCIgKyBFLnN1YnN0cihFLmxlbmd0aCAtIHcsIHcpO1xuICAgIHJldHVybiB4O1xuICB9O1xuICB0ID09PSB2b2lkIDAgJiYgKHQgPSB7IG9tbWl0X2xvbmdfb2N0ZXQ6IDMyIH0pLCByID09PSB2b2lkIDAgJiYgKHIgPSAwKSwgaSA9PT0gdm9pZCAwICYmIChpID0gXCJcIik7XG4gIHZhciB5ID0gdC5vbW1pdF9sb25nX29jdGV0LCBJID0gcC5zdWJzdHIociwgMik7XG4gIGlmIChJID09IFwiMDFcIikge1xuICAgIHZhciB2ID0gbihwLCByKTtcbiAgICByZXR1cm4gdiA9PSBcIjAwXCIgPyBpICsgYEJPT0xFQU4gRkFMU0VcbmAgOiBpICsgYEJPT0xFQU4gVFJVRVxuYDtcbiAgfVxuICBpZiAoSSA9PSBcIjAyXCIpIHtcbiAgICB2YXIgdiA9IG4ocCwgcik7XG4gICAgcmV0dXJuIGkgKyBcIklOVEVHRVIgXCIgKyBjKHYsIHkpICsgYFxuYDtcbiAgfVxuICBpZiAoSSA9PSBcIjAzXCIpIHtcbiAgICB2YXIgdiA9IG4ocCwgcik7XG4gICAgaWYgKHMuaXNBU04xSEVYKHYuc3Vic3RyKDIpKSkge1xuICAgICAgdmFyIG8gPSBpICsgYEJJVFNUUklORywgZW5jYXBzdWxhdGVzXG5gO1xuICAgICAgcmV0dXJuIG8gPSBvICsgaCh2LnN1YnN0cigyKSwgdCwgMCwgaSArIFwiICBcIiksIG87XG4gICAgfSBlbHNlXG4gICAgICByZXR1cm4gaSArIFwiQklUU1RSSU5HIFwiICsgYyh2LCB5KSArIGBcbmA7XG4gIH1cbiAgaWYgKEkgPT0gXCIwNFwiKSB7XG4gICAgdmFyIHYgPSBuKHAsIHIpO1xuICAgIGlmIChzLmlzQVNOMUhFWCh2KSkge1xuICAgICAgdmFyIG8gPSBpICsgYE9DVEVUU1RSSU5HLCBlbmNhcHN1bGF0ZXNcbmA7XG4gICAgICByZXR1cm4gbyA9IG8gKyBoKHYsIHQsIDAsIGkgKyBcIiAgXCIpLCBvO1xuICAgIH0gZWxzZVxuICAgICAgcmV0dXJuIGkgKyBcIk9DVEVUU1RSSU5HIFwiICsgYyh2LCB5KSArIGBcbmA7XG4gIH1cbiAgaWYgKEkgPT0gXCIwNVwiKVxuICAgIHJldHVybiBpICsgYE5VTExcbmA7XG4gIGlmIChJID09IFwiMDZcIikge1xuICAgIHZhciBsID0gbihwLCByKSwgZiA9IGEuYXNuMS5BU04xVXRpbC5vaWRIZXhUb0ludChsKSwgZCA9IGEuYXNuMS54NTA5Lk9JRC5vaWQybmFtZShmKSwgZyA9IGYucmVwbGFjZSgvXFwuL2csIFwiIFwiKTtcbiAgICByZXR1cm4gZCAhPSBcIlwiID8gaSArIFwiT2JqZWN0SWRlbnRpZmllciBcIiArIGQgKyBcIiAoXCIgKyBnICsgYClcbmAgOiBpICsgXCJPYmplY3RJZGVudGlmaWVyIChcIiArIGcgKyBgKVxuYDtcbiAgfVxuICBpZiAoSSA9PSBcIjBhXCIpXG4gICAgcmV0dXJuIGkgKyBcIkVOVU1FUkFURUQgXCIgKyBwYXJzZUludChuKHAsIHIpKSArIGBcbmA7XG4gIGlmIChJID09IFwiMGNcIilcbiAgICByZXR1cm4gaSArIFwiVVRGOFN0cmluZyAnXCIgKyBXKG4ocCwgcikpICsgYCdcbmA7XG4gIGlmIChJID09IFwiMTNcIilcbiAgICByZXR1cm4gaSArIFwiUHJpbnRhYmxlU3RyaW5nICdcIiArIFcobihwLCByKSkgKyBgJ1xuYDtcbiAgaWYgKEkgPT0gXCIxNFwiKVxuICAgIHJldHVybiBpICsgXCJUZWxldGV4U3RyaW5nICdcIiArIFcobihwLCByKSkgKyBgJ1xuYDtcbiAgaWYgKEkgPT0gXCIxNlwiKVxuICAgIHJldHVybiBpICsgXCJJQTVTdHJpbmcgJ1wiICsgVyhuKHAsIHIpKSArIGAnXG5gO1xuICBpZiAoSSA9PSBcIjE3XCIpXG4gICAgcmV0dXJuIGkgKyBcIlVUQ1RpbWUgXCIgKyBXKG4ocCwgcikpICsgYFxuYDtcbiAgaWYgKEkgPT0gXCIxOFwiKVxuICAgIHJldHVybiBpICsgXCJHZW5lcmFsaXplZFRpbWUgXCIgKyBXKG4ocCwgcikpICsgYFxuYDtcbiAgaWYgKEkgPT0gXCIxYVwiKVxuICAgIHJldHVybiBpICsgXCJWaXN1YWxTdHJpbmcgJ1wiICsgVyhuKHAsIHIpKSArIGAnXG5gO1xuICBpZiAoSSA9PSBcIjFlXCIpXG4gICAgcmV0dXJuIGkgKyBcIkJNUFN0cmluZyAnXCIgKyBUdChuKHAsIHIpKSArIGAnXG5gO1xuICBpZiAoSSA9PSBcIjMwXCIpIHtcbiAgICBpZiAocC5zdWJzdHIociwgNCkgPT0gXCIzMDAwXCIpXG4gICAgICByZXR1cm4gaSArIGBTRVFVRU5DRSB7fVxuYDtcbiAgICB2YXIgbyA9IGkgKyBgU0VRVUVOQ0VcbmAsIFMgPSB1KHAsIHIpLCBiID0gdDtcbiAgICBpZiAoKFMubGVuZ3RoID09IDIgfHwgUy5sZW5ndGggPT0gMykgJiYgcC5zdWJzdHIoU1swXSwgMikgPT0gXCIwNlwiICYmIHAuc3Vic3RyKFNbUy5sZW5ndGggLSAxXSwgMikgPT0gXCIwNFwiKSB7XG4gICAgICB2YXIgZCA9IHMub2lkbmFtZShuKHAsIFNbMF0pKSwgRCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgICAgRC54NTA5RXh0TmFtZSA9IGQsIGIgPSBEO1xuICAgIH1cbiAgICBmb3IgKHZhciBBID0gMDsgQSA8IFMubGVuZ3RoOyBBKyspXG4gICAgICBvID0gbyArIGgocCwgYiwgU1tBXSwgaSArIFwiICBcIik7XG4gICAgcmV0dXJuIG87XG4gIH1cbiAgaWYgKEkgPT0gXCIzMVwiKSB7XG4gICAgZm9yICh2YXIgbyA9IGkgKyBgU0VUXG5gLCBTID0gdShwLCByKSwgQSA9IDA7IEEgPCBTLmxlbmd0aDsgQSsrKVxuICAgICAgbyA9IG8gKyBoKHAsIHQsIFNbQV0sIGkgKyBcIiAgXCIpO1xuICAgIHJldHVybiBvO1xuICB9XG4gIHZhciBJID0gcGFyc2VJbnQoSSwgMTYpO1xuICBpZiAoSSAmIDEyOCkge1xuICAgIHZhciBtID0gSSAmIDMxO1xuICAgIGlmIChJICYgMzIpIHtcbiAgICAgIGZvciAodmFyIG8gPSBpICsgXCJbXCIgKyBtICsgYF1cbmAsIFMgPSB1KHAsIHIpLCBBID0gMDsgQSA8IFMubGVuZ3RoOyBBKyspXG4gICAgICAgIG8gPSBvICsgaChwLCB0LCBTW0FdLCBpICsgXCIgIFwiKTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdiA9IG4ocCwgcik7XG4gICAgICBpZiAoVi5pc0FTTjFIRVgodikpIHtcbiAgICAgICAgdmFyIG8gPSBpICsgXCJbXCIgKyBtICsgYF1cbmA7XG4gICAgICAgIHJldHVybiBvID0gbyArIGgodiwgdCwgMCwgaSArIFwiICBcIiksIG87XG4gICAgICB9IGVsc2VcbiAgICAgICAgKHYuc3Vic3RyKDAsIDgpID09IFwiNjg3NDc0NzBcIiB8fCB0Lng1MDlFeHROYW1lID09PSBcInN1YmplY3RBbHROYW1lXCIgJiYgbSA9PSAyKSAmJiAodiA9IFcodikpO1xuICAgICAgdmFyIG8gPSBpICsgXCJbXCIgKyBtICsgXCJdIFwiICsgdiArIGBcbmA7XG4gICAgICByZXR1cm4gbztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGkgKyBcIlVOS05PV04oXCIgKyBJICsgXCIpIFwiICsgbihwLCByKSArIGBcbmA7XG59O1xuVi5wYXJzZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWLCByID0gdC5wYXJzZSwgaSA9IHQuaXNBU04xSEVYLCBzID0gdC5nZXRWLCBuID0gdC5nZXRUTFYsIGggPSB0LmdldENoaWxkSWR4LCB1ID0gYS5hc24xLCBwID0gdS5BU04xVXRpbC5vaWRIZXhUb0ludCwgYyA9IHUueDUwOS5PSUQub2lkMm5hbWUsIHkgPSBXLCB2ID0gVHQsIG8gPSBmbiwgbCA9IHsgXCIwY1wiOiBcInV0ZjhzdHJcIiwgMTI6IFwibnVtc3RyXCIsIDEzOiBcInBybnN0clwiLCAxNDogXCJ0ZWxzdHJcIiwgMTY6IFwiaWE1c3RyXCIsIDE3OiBcInV0Y3RpbWVcIiwgMTg6IFwiZ2VudGltZVwiLCBcIjFhXCI6IFwidmlzc3RyXCIsIFwiMWVcIjogXCJibXBzdHJcIiwgMzA6IFwic2VxXCIsIDMxOiBcInNldFwiIH0sIGYgPSBmdW5jdGlvbih4KSB7XG4gICAgZm9yICh2YXIgRiA9IFtdLCBQID0gaCh4LCAwKSwgVCA9IDA7IFQgPCBQLmxlbmd0aDsgVCsrKSB7XG4gICAgICB2YXIgSCA9IFBbVF0sIEMgPSBuKHgsIEgpLCBCID0gcihDKTtcbiAgICAgIEYucHVzaChCKTtcbiAgICB9XG4gICAgcmV0dXJuIEY7XG4gIH0sIGQgPSBlLnN1YnN0cigwLCAyKSwgZyA9IHt9LCBTID0gcyhlLCAwKTtcbiAgaWYgKGQgPT0gXCIwMVwiKVxuICAgIHJldHVybiBlID09IFwiMDEwMWZmXCIgPyB7IGJvb2w6ICEwIH0gOiB7IGJvb2w6ICExIH07XG4gIGlmIChkID09IFwiMDJcIilcbiAgICByZXR1cm4geyBpbnQ6IHsgaGV4OiBTIH0gfTtcbiAgaWYgKGQgPT0gXCIwM1wiKVxuICAgIHRyeSB7XG4gICAgICBpZiAoUy5zdWJzdHIoMCwgMikgIT0gXCIwMFwiKVxuICAgICAgICB0aHJvdyBcIm5vdCBlbmNhcFwiO1xuICAgICAgdmFyIGIgPSBTLnN1YnN0cigyKTtcbiAgICAgIGlmICghaShiKSlcbiAgICAgICAgdGhyb3cgXCJub3QgZW5jYXBcIjtcbiAgICAgIHJldHVybiB7IGJpdHN0cjogeyBvYmo6IHIoYikgfSB9O1xuICAgIH0gY2F0Y2gge1xuICAgICAgdmFyIEQgPSBudWxsO1xuICAgICAgcmV0dXJuIFMubGVuZ3RoIDw9IDEwICYmIChEID0gRW4oUykpLCBEID09IG51bGwgPyB7IGJpdHN0cjogeyBoZXg6IFMgfSB9IDogeyBiaXRzdHI6IHsgYmluOiBEIH0gfTtcbiAgICB9XG4gIGVsc2UgaWYgKGQgPT0gXCIwNFwiKVxuICAgIHRyeSB7XG4gICAgICBpZiAoIWkoUykpXG4gICAgICAgIHRocm93IFwibm90IGVuY2FwXCI7XG4gICAgICByZXR1cm4geyBvY3RzdHI6IHsgb2JqOiByKFMpIH0gfTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB7IG9jdHN0cjogeyBoZXg6IFMgfSB9O1xuICAgIH1cbiAgZWxzZSB7XG4gICAgaWYgKGQgPT0gXCIwNVwiKVxuICAgICAgcmV0dXJuIHsgbnVsbDogXCJcIiB9O1xuICAgIGlmIChkID09IFwiMDZcIikge1xuICAgICAgdmFyIEEgPSBwKFMpLCBJID0gYyhBKTtcbiAgICAgIHJldHVybiBJID09IFwiXCIgPyB7IG9pZDogQSB9IDogeyBvaWQ6IEkgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGQgPT0gXCIwYVwiKVxuICAgICAgICByZXR1cm4gUy5sZW5ndGggPiA0ID8geyBlbnVtOiB7IGhleDogUyB9IH0gOiB7IGVudW06IHBhcnNlSW50KFMsIDE2KSB9O1xuICAgICAgaWYgKGQgPT0gXCIzMFwiIHx8IGQgPT0gXCIzMVwiKVxuICAgICAgICByZXR1cm4gZ1tsW2RdXSA9IGYoZSksIGc7XG4gICAgICBpZiAoZCA9PSBcIjE0XCIpIHtcbiAgICAgICAgdmFyIG0gPSBvKFMpO1xuICAgICAgICByZXR1cm4gZ1tsW2RdXSA9IHsgc3RyOiBtIH0sIGc7XG4gICAgICB9IGVsc2UgaWYgKGQgPT0gXCIxZVwiKSB7XG4gICAgICAgIHZhciBtID0gdihTKTtcbiAgICAgICAgcmV0dXJuIGdbbFtkXV0gPSB7IHN0cjogbSB9LCBnO1xuICAgICAgfSBlbHNlIGlmIChcIjowYzoxMjoxMzoxNjoxNzoxODoxYTpcIi5pbmRleE9mKGQpICE9IC0xKSB7XG4gICAgICAgIHZhciBtID0geShTKTtcbiAgICAgICAgcmV0dXJuIGdbbFtkXV0gPSB7IHN0cjogbSB9LCBnO1xuICAgICAgfSBlbHNlIGlmIChkLm1hdGNoKC9eOFswLTldJC8pKSB7XG4gICAgICAgIHZhciBtID0geShTKTtcbiAgICAgICAgcmV0dXJuIG0gPT0gbnVsbCB8IG0gPT0gXCJcIiA/IHsgdGFnOiB7IHRhZzogZCwgZXhwbGljaXQ6ICExLCBoZXg6IFMgfSB9IDogbS5tYXRjaCgvW1xceDAwLVxceDFGXFx4N0YtXFx4OUZdLykgIT0gbnVsbCB8fCBtLm1hdGNoKC9bXFx1MDAwMC1cXHUwMDFGXFx1MDA4MOKAk1xcdTAwOUZdLykgIT0gbnVsbCA/IHsgdGFnOiB7IHRhZzogZCwgZXhwbGljaXQ6ICExLCBoZXg6IFMgfSB9IDogeyB0YWc6IHsgdGFnOiBkLCBleHBsaWNpdDogITEsIHN0cjogbSB9IH07XG4gICAgICB9IGVsc2UgaWYgKGQubWF0Y2goL15hWzAtOV0kLykpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFpKFMpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IGVuY2FwXCIpO1xuICAgICAgICAgIHJldHVybiB7IHRhZzogeyB0YWc6IGQsIGV4cGxpY2l0OiAhMCwgb2JqOiByKFMpIH0gfTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgcmV0dXJuIHsgdGFnOiB7IHRhZzogZCwgZXhwbGljaXQ6ICEwLCBoZXg6IFMgfSB9O1xuICAgICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdmFyIEUgPSBuZXcgYS5hc24xLkFTTjFPYmplY3QoKTtcbiAgICAgICAgRS5oViA9IFM7XG4gICAgICAgIHZhciB3ID0gRS5nZXRMZW5ndGhIZXhGcm9tVmFsdWUoKTtcbiAgICAgICAgcmV0dXJuIHsgYXNuMTogeyB0bHY6IGQgKyB3ICsgUyB9IH07XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuVi5pc0NvbnRleHRUYWcgPSBmdW5jdGlvbihlLCB0KSB7XG4gIGUgPSBlLnRvTG93ZXJDYXNlKCk7XG4gIHZhciByLCBpO1xuICB0cnkge1xuICAgIHIgPSBwYXJzZUludChlLCAxNik7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBpZiAodCA9PT0gdm9pZCAwKVxuICAgIHJldHVybiAociAmIDE5MikgPT0gMTI4O1xuICB0cnkge1xuICAgIHZhciBzID0gdC5tYXRjaCgvXlxcW1swLTldK1xcXSQvKTtcbiAgICByZXR1cm4gcyA9PSBudWxsIHx8IChpID0gcGFyc2VJbnQodC5zdWJzdHIoMSwgdC5sZW5ndGggLSAxKSwgMTApLCBpID4gMzEpID8gITEgOiAociAmIDE5MikgPT0gMTI4ICYmIChyICYgMzEpID09IGk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiAhMTtcbiAgfVxufTtcblYuaXNBU04xSEVYID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IFY7XG4gIGlmIChlLmxlbmd0aCAlIDIgPT0gMSlcbiAgICByZXR1cm4gITE7XG4gIHZhciByID0gdC5nZXRWYmxlbihlLCAwKSwgaSA9IGUuc3Vic3RyKDAsIDIpLCBzID0gdC5nZXRMKGUsIDApLCBuID0gZS5sZW5ndGggLSBpLmxlbmd0aCAtIHMubGVuZ3RoO1xuICByZXR1cm4gbiA9PSByICogMjtcbn07XG5WLmNoZWNrU3RyaWN0REVSID0gZnVuY3Rpb24oZSwgdCwgciwgaSwgcykge1xuICB2YXIgbiA9IFY7XG4gIGlmIChyID09PSB2b2lkIDApIHtcbiAgICBpZiAodHlwZW9mIGUgIT0gXCJzdHJpbmdcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBoZXggc3RyaW5nXCIpO1xuICAgIGlmIChlID0gZS50b0xvd2VyQ2FzZSgpLCAhYS5sYW5nLlN0cmluZy5pc0hleChlKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBoZXggc3RyaW5nXCIpO1xuICAgIHIgPSBlLmxlbmd0aCwgaSA9IGUubGVuZ3RoIC8gMiwgaSA8IDEyOCA/IHMgPSAxIDogcyA9IE1hdGguY2VpbChpLnRvU3RyaW5nKDE2KSkgKyAxO1xuICB9XG4gIHZhciBoID0gbi5nZXRMKGUsIHQpO1xuICBpZiAoaC5sZW5ndGggPiBzICogMilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJMIG9mIFRMViB0b28gbG9uZzogaWR4PVwiICsgdCk7XG4gIHZhciB1ID0gbi5nZXRWYmxlbihlLCB0KTtcbiAgaWYgKHUgPiBpKVxuICAgIHRocm93IG5ldyBFcnJvcihcInZhbHVlIG9mIEwgdG9vIGxvbmcgdGhhbiBoZXg6IGlkeD1cIiArIHQpO1xuICB2YXIgcCA9IG4uZ2V0VExWKGUsIHQpLCBjID0gcC5sZW5ndGggLSAyIC0gbi5nZXRMKGUsIHQpLmxlbmd0aDtcbiAgaWYgKGMgIT09IHUgKiAyKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlYgc3RyaW5nIGxlbmd0aCBhbmQgTCdzIHZhbHVlIG5vdCB0aGUgc2FtZTpcIiArIGMgKyBcIi9cIiArIHUgKiAyKTtcbiAgaWYgKHQgPT09IDAgJiYgZS5sZW5ndGggIT0gcC5sZW5ndGgpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwidG90YWwgbGVuZ3RoIGFuZCBUTFYgbGVuZ3RoIHVubWF0Y2g6XCIgKyBlLmxlbmd0aCArIFwiIT1cIiArIHAubGVuZ3RoKTtcbiAgdmFyIHkgPSBlLnN1YnN0cih0LCAyKTtcbiAgaWYgKHkgPT09IFwiMDJcIikge1xuICAgIHZhciB2ID0gbi5nZXRWaWR4KGUsIHQpO1xuICAgIGlmIChlLnN1YnN0cih2LCAyKSA9PSBcIjAwXCIgJiYgZS5jaGFyQ29kZUF0KHYgKyAyKSA8IDU2KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IGxlYXN0IHplcm9zIGZvciBERVIgSU5URUdFUlwiKTtcbiAgfVxuICBpZiAocGFyc2VJbnQoeSwgMTYpICYgMzIpIHtcbiAgICBmb3IgKHZhciBvID0gbi5nZXRWYmxlbihlLCB0KSwgbCA9IDAsIGYgPSBuLmdldENoaWxkSWR4KGUsIHQpLCBkID0gMDsgZCA8IGYubGVuZ3RoOyBkKyspIHtcbiAgICAgIHZhciBnID0gbi5nZXRUTFYoZSwgZltkXSk7XG4gICAgICBsICs9IGcubGVuZ3RoLCBuLmNoZWNrU3RyaWN0REVSKGUsIGZbZF0sIHIsIGksIHMpO1xuICAgIH1cbiAgICBpZiAobyAqIDIgIT0gbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInN1bSBvZiBjaGlsZHJlbidzIFRMViBsZW5ndGggYW5kIEwgdW5tYXRjaDogXCIgKyBvICogMiArIFwiIT1cIiArIGwpO1xuICB9XG59O1xuVi5vaWRuYW1lID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEuYXNuMTtcbiAgYS5sYW5nLlN0cmluZy5pc0hleChlKSAmJiAoZSA9IHQuQVNOMVV0aWwub2lkSGV4VG9JbnQoZSkpO1xuICB2YXIgciA9IHQueDUwOS5PSUQub2lkMm5hbWUoZSk7XG4gIHJldHVybiByID09PSBcIlwiICYmIChyID0gZSksIHI7XG59O1xuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmFzbjEgPiBcInVcIiB8fCAhYS5hc24xKSAmJiAoYS5hc24xID0ge30pO1xuKHR5cGVvZiBhLmFzbjEueDUwOSA+IFwidVwiIHx8ICFhLmFzbjEueDUwOSkgJiYgKGEuYXNuMS54NTA5ID0ge30pO1xuYS5hc24xLng1MDkuQ2VydGlmaWNhdGUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkNlcnRpZmljYXRlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJCaXRTdHJpbmcsIHMgPSByLkRFUlNlcXVlbmNlLCBuID0gci54NTA5LCBoID0gbi5UQlNDZXJ0aWZpY2F0ZSwgdSA9IG4uQWxnb3JpdGhtSWRlbnRpZmllcjtcbiAgdGhpcy5wYXJhbXMgPSB2b2lkIDAsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHApIHtcbiAgICB0aGlzLnBhcmFtcyA9IHA7XG4gIH0sIHRoaXMuc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gdGhpcy5wYXJhbXMsIGMgPSBwLnNpZ2FsZztcbiAgICBwLnNpZ2FsZy5uYW1lICE9IG51bGwgJiYgKGMgPSBwLnNpZ2FsZy5uYW1lKTtcbiAgICB2YXIgeSA9IHAudGJzb2JqLnRvaGV4KCksIHYgPSBuZXcgYS5jcnlwdG8uU2lnbmF0dXJlKHsgYWxnOiBjIH0pO1xuICAgIHYuaW5pdChwLmNha2V5KSwgdi51cGRhdGVIZXgoeSksIHAuc2lnaGV4ID0gdi5zaWduKCk7XG4gIH0sIHRoaXMuZ2V0UEVNID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlKHRoaXMudG9oZXgoKSwgXCJDRVJUSUZJQ0FURVwiKTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKChwLnRic29iaiA9PSBudWxsIHx8IHAudGJzb2JqID09IG51bGwpICYmIChwLnRic29iaiA9IG5ldyBoKHApKSwgcC5zaWdoZXggPT0gbnVsbCAmJiBwLmNha2V5ICE9IG51bGwgJiYgdGhpcy5zaWduKCksIHAuc2lnaGV4ID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzaWdoZXggb3IgY2FrZXkgcGFyYW1ldGVyIG5vdCBkZWZpbmVkXCIpO1xuICAgIHZhciBjID0gW107XG4gICAgYy5wdXNoKHAudGJzb2JqKSwgYy5wdXNoKG5ldyB1KHsgbmFtZTogcC5zaWdhbGcgfSkpLCBjLnB1c2gobmV3IGkoeyBoZXg6IFwiMDBcIiArIHAuc2lnaGV4IH0pKTtcbiAgICB2YXIgeSA9IG5ldyBzKHsgYXJyYXk6IGMgfSk7XG4gICAgcmV0dXJuIHkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuQ2VydGlmaWNhdGUsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LlRCU0NlcnRpZmljYXRlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIueDUwOSwgcyA9IHIuREVSVGFnZ2VkT2JqZWN0LCBuID0gci5ERVJJbnRlZ2VyLCBoID0gci5ERVJTZXF1ZW5jZSwgdSA9IGkuQWxnb3JpdGhtSWRlbnRpZmllciwgcCA9IGkuVGltZSwgYyA9IGkuWDUwME5hbWUsIHkgPSBpLkV4dGVuc2lvbnMsIHYgPSBpLlN1YmplY3RQdWJsaWNLZXlJbmZvO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKG8pIHtcbiAgICB0aGlzLnBhcmFtcyA9IG87XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IFtdLCBsID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKGwudmVyc2lvbiAhPSBudWxsIHx8IGwudmVyc2lvbiAhPSAxKSB7XG4gICAgICB2YXIgZiA9IDI7XG4gICAgICBsLnZlcnNpb24gIT0gbnVsbCAmJiAoZiA9IGwudmVyc2lvbiAtIDEpO1xuICAgICAgdmFyIGQgPSBuZXcgcyh7IG9iajogbmV3IG4oeyBpbnQ6IGYgfSkgfSk7XG4gICAgICBvLnB1c2goZCk7XG4gICAgfVxuICAgIG8ucHVzaChuZXcgbihsLnNlcmlhbCkpLCBvLnB1c2gobmV3IHUoeyBuYW1lOiBsLnNpZ2FsZyB9KSksIG8ucHVzaChuZXcgYyhsLmlzc3VlcikpLCBvLnB1c2gobmV3IGgoeyBhcnJheTogW25ldyBwKGwubm90YmVmb3JlKSwgbmV3IHAobC5ub3RhZnRlcildIH0pKSwgby5wdXNoKG5ldyBjKGwuc3ViamVjdCkpLCBvLnB1c2gobmV3IHYoay5nZXRLZXkobC5zYmpwdWJrZXkpKSksIGwuZXh0ICE9PSB2b2lkIDAgJiYgbC5leHQubGVuZ3RoID4gMCAmJiBvLnB1c2gobmV3IHMoeyB0YWc6IFwiYTNcIiwgb2JqOiBuZXcgeShsLmV4dCkgfSkpO1xuICAgIHZhciBnID0gbmV3IGEuYXNuMS5ERVJTZXF1ZW5jZSh7IGFycmF5OiBvIH0pO1xuICAgIHJldHVybiBnLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuRXh0ZW5zaW9ucyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuRXh0ZW5zaW9ucy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSU2VxdWVuY2UsIHMgPSByLng1MDk7XG4gIHRoaXMuYVBhcmFtID0gW10sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKG4pIHtcbiAgICB0aGlzLmFQYXJhbSA9IG47XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBuID0gW10sIGggPSAwOyBoIDwgdGhpcy5hUGFyYW0ubGVuZ3RoOyBoKyspIHtcbiAgICAgIHZhciB1ID0gdGhpcy5hUGFyYW1baF0sIHAgPSB1LmV4dG5hbWUsIGMgPSBudWxsO1xuICAgICAgaWYgKHUuZXh0biAhPSBudWxsKVxuICAgICAgICBjID0gbmV3IHMuUHJpdmF0ZUV4dGVuc2lvbih1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJzdWJqZWN0S2V5SWRlbnRpZmllclwiKVxuICAgICAgICBjID0gbmV3IHMuU3ViamVjdEtleUlkZW50aWZpZXIodSk7XG4gICAgICBlbHNlIGlmIChwID09IFwia2V5VXNhZ2VcIilcbiAgICAgICAgYyA9IG5ldyBzLktleVVzYWdlKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcInN1YmplY3RBbHROYW1lXCIpXG4gICAgICAgIGMgPSBuZXcgcy5TdWJqZWN0QWx0TmFtZSh1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJpc3N1ZXJBbHROYW1lXCIpXG4gICAgICAgIGMgPSBuZXcgcy5Jc3N1ZXJBbHROYW1lKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcImJhc2ljQ29uc3RyYWludHNcIilcbiAgICAgICAgYyA9IG5ldyBzLkJhc2ljQ29uc3RyYWludHModSk7XG4gICAgICBlbHNlIGlmIChwID09IFwibmFtZUNvbnN0cmFpbnRzXCIpXG4gICAgICAgIGMgPSBuZXcgcy5OYW1lQ29uc3RyYWludHModSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiY1JMRGlzdHJpYnV0aW9uUG9pbnRzXCIpXG4gICAgICAgIGMgPSBuZXcgcy5DUkxEaXN0cmlidXRpb25Qb2ludHModSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiY2VydGlmaWNhdGVQb2xpY2llc1wiKVxuICAgICAgICBjID0gbmV3IHMuQ2VydGlmaWNhdGVQb2xpY2llcyh1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJwb2xpY3lNYXBwaW5nc1wiKVxuICAgICAgICBjID0gbmV3IHMuUG9saWN5TWFwcGluZ3ModSk7XG4gICAgICBlbHNlIGlmIChwID09IFwicG9saWN5Q29uc3RyYWludHNcIilcbiAgICAgICAgYyA9IG5ldyBzLlBvbGljeUNvbnN0cmFpbnRzKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcImluaGliaXRBbnlQb2xpY3lcIilcbiAgICAgICAgYyA9IG5ldyBzLkluaGliaXRBbnlQb2xpY3kodSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiYXV0aG9yaXR5S2V5SWRlbnRpZmllclwiKVxuICAgICAgICBjID0gbmV3IHMuQXV0aG9yaXR5S2V5SWRlbnRpZmllcih1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJleHRLZXlVc2FnZVwiKVxuICAgICAgICBjID0gbmV3IHMuRXh0S2V5VXNhZ2UodSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiYXV0aG9yaXR5SW5mb0FjY2Vzc1wiKVxuICAgICAgICBjID0gbmV3IHMuQXV0aG9yaXR5SW5mb0FjY2Vzcyh1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJjUkxOdW1iZXJcIilcbiAgICAgICAgYyA9IG5ldyBzLkNSTE51bWJlcih1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJjUkxSZWFzb25cIilcbiAgICAgICAgYyA9IG5ldyBzLkNSTFJlYXNvbih1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJvY3NwTm9uY2VcIilcbiAgICAgICAgYyA9IG5ldyBzLk9DU1BOb25jZSh1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJvY3NwTm9DaGVja1wiKVxuICAgICAgICBjID0gbmV3IHMuT0NTUE5vQ2hlY2sodSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiYWRvYmVUaW1lU3RhbXBcIilcbiAgICAgICAgYyA9IG5ldyBzLkFkb2JlVGltZVN0YW1wKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcInN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzXCIpXG4gICAgICAgIGMgPSBuZXcgcy5TdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcyh1KTtcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZXh0ZW5zaW9uIG5vdCBzdXBwb3J0ZWQ6XCIgKyBKU09OLnN0cmluZ2lmeSh1KSk7XG4gICAgICBjICE9IG51bGwgJiYgbi5wdXNoKGMpO1xuICAgIH1cbiAgICB2YXIgeSA9IG5ldyBpKHsgYXJyYXk6IG4gfSk7XG4gICAgcmV0dXJuIHkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS54NTA5LkV4dGVuc2lvbnMsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkV4dGVuc2lvbiA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuRXh0ZW5zaW9uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJPYmplY3RJZGVudGlmaWVyLCBzID0gci5ERVJPY3RldFN0cmluZztcbiAgci5ERVJCaXRTdHJpbmc7XG4gIHZhciBuID0gci5ERVJCb29sZWFuLCBoID0gci5ERVJTZXF1ZW5jZTtcbiAgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1ID0gbmV3IGkoeyBvaWQ6IHRoaXMub2lkIH0pLCBwID0gbmV3IHMoeyBoZXg6IHRoaXMuZ2V0RXh0blZhbHVlSGV4KCkgfSksIGMgPSBuZXcgQXJyYXkoKTtcbiAgICBjLnB1c2godSksIHRoaXMuY3JpdGljYWwgJiYgYy5wdXNoKG5ldyBuKCkpLCBjLnB1c2gocCk7XG4gICAgdmFyIHkgPSBuZXcgaCh7IGFycmF5OiBjIH0pO1xuICAgIHJldHVybiB5LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuY3JpdGljYWwgPSAhMSwgZSAhPT0gdm9pZCAwICYmIGUuY3JpdGljYWwgIT09IHZvaWQgMCAmJiAodGhpcy5jcml0aWNhbCA9IGUuY3JpdGljYWwpO1xufTtcbk4oYS5hc24xLng1MDkuRXh0ZW5zaW9uLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5LZXlVc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuS2V5VXNhZ2Uuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IEVycm9yLCByID0geyBkaWdpdGFsU2lnbmF0dXJlOiAwLCBub25SZXB1ZGlhdGlvbjogMSwga2V5RW5jaXBoZXJtZW50OiAyLCBkYXRhRW5jaXBoZXJtZW50OiAzLCBrZXlBZ3JlZW1lbnQ6IDQsIGtleUNlcnRTaWduOiA1LCBjUkxTaWduOiA2LCBlbmNpcGhlck9ubHk6IDcsIGRlY2lwaGVyT25seTogOCB9O1xuICB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpID0gdGhpcy5nZXRCaW5WYWx1ZSgpO1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBuZXcgYS5hc24xLkRFUkJpdFN0cmluZyh7IGJpbjogaSB9KSwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0QmluVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IHRoaXMucGFyYW1zO1xuICAgIGlmICh0eXBlb2YgaSAhPSBcIm9iamVjdFwiIHx8IHR5cGVvZiBpLm5hbWVzICE9IFwib2JqZWN0XCIgJiYgdHlwZW9mIGkuYmluICE9IFwic3RyaW5nXCIpXG4gICAgICB0aHJvdyBuZXcgdChcInBhcmFtZXRlciBub3QgeWV0IHNldFwiKTtcbiAgICBpZiAoaS5uYW1lcyAhPSBudWxsKVxuICAgICAgcmV0dXJuIHJ0KGkubmFtZXMsIHIpO1xuICAgIGlmIChpLmJpbiAhPSBudWxsKVxuICAgICAgcmV0dXJuIGkuYmluO1xuICAgIHRocm93IG5ldyB0KFwicGFyYW1ldGVyIG5vdCBzZXQgcHJvcGVybHlcIik7XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuMTVcIiwgZSAhPT0gdm9pZCAwICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuS2V5VXNhZ2UsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5CYXNpY0NvbnN0cmFpbnRzID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5CYXNpY0NvbnN0cmFpbnRzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLmFzbjEsIHIgPSB0LkRFUkJvb2xlYW4sIGkgPSB0LkRFUkludGVnZXIsIHMgPSB0LkRFUlNlcXVlbmNlO1xuICB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gbmV3IEFycmF5KCk7XG4gICAgdGhpcy5jQSAmJiBuLnB1c2gobmV3IHIoKSksIHRoaXMucGF0aExlbiA+IC0xICYmIG4ucHVzaChuZXcgaSh7IGludDogdGhpcy5wYXRoTGVuIH0pKTtcbiAgICB2YXIgaCA9IG5ldyBzKHsgYXJyYXk6IG4gfSk7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IGgsIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjE5XCIsIHRoaXMuY0EgPSAhMSwgdGhpcy5wYXRoTGVuID0gLTEsIGUgIT09IHZvaWQgMCAmJiAoZS5jQSAhPT0gdm9pZCAwICYmICh0aGlzLmNBID0gZS5jQSksIGUucGF0aExlbiAhPT0gdm9pZCAwICYmICh0aGlzLnBhdGhMZW4gPSBlLnBhdGhMZW4pKTtcbn07XG5OKGEuYXNuMS54NTA5LkJhc2ljQ29uc3RyYWludHMsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5DUkxEaXN0cmlidXRpb25Qb2ludHMgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkNSTERpc3RyaWJ1dGlvblBvaW50cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIueDUwOTtcbiAgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0QnlEUEFycmF5ID0gZnVuY3Rpb24ocykge1xuICAgIGZvciAodmFyIG4gPSBbXSwgaCA9IDA7IGggPCBzLmxlbmd0aDsgaCsrKVxuICAgICAgaWYgKHNbaF0gaW5zdGFuY2VvZiBhLmFzbjEuQVNOMU9iamVjdClcbiAgICAgICAgbi5wdXNoKHNbaF0pO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciB1ID0gbmV3IGkuRGlzdHJpYnV0aW9uUG9pbnQoc1toXSk7XG4gICAgICAgIG4ucHVzaCh1KTtcbiAgICAgIH1cbiAgICB0aGlzLmFzbjFFeHRuVmFsdWUgPSBuZXcgci5ERVJTZXF1ZW5jZSh7IGFycmF5OiBuIH0pO1xuICB9LCB0aGlzLnNldEJ5T25lVVJJID0gZnVuY3Rpb24ocykge1xuICAgIHZhciBuID0gbmV3IGkuRGlzdHJpYnV0aW9uUG9pbnQoeyBmdWxsdXJpOiBzIH0pO1xuICAgIHRoaXMuc2V0QnlEUEFycmF5KFtuXSk7XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuMzFcIiwgZSAhPT0gdm9pZCAwICYmIChlLmFycmF5ICE9PSB2b2lkIDAgPyB0aGlzLnNldEJ5RFBBcnJheShlLmFycmF5KSA6IGUudXJpICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeU9uZVVSSShlLnVyaSkpO1xufTtcbk4oYS5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnQgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci54NTA5LkRpc3RyaWJ1dGlvblBvaW50TmFtZTtcbiAgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gbmV3IHIuREVSU2VxdWVuY2UoKTtcbiAgICBpZiAodGhpcy5hc24xRFAgIT0gbnVsbCkge1xuICAgICAgdmFyIG4gPSBuZXcgci5ERVJUYWdnZWRPYmplY3QoeyBleHBsaWNpdDogITAsIHRhZzogXCJhMFwiLCBvYmo6IHRoaXMuYXNuMURQIH0pO1xuICAgICAgcy5hcHBlbmRBU04xT2JqZWN0KG4pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5oVExWID0gcy50b2hleCgpLCB0aGlzLmhUTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiAoZS5kcG9iaiAhPT0gdm9pZCAwID8gdGhpcy5hc24xRFAgPSBlLmRwb2JqIDogZS5kcG5hbWUgIT09IHZvaWQgMCA/IHRoaXMuYXNuMURQID0gbmV3IGkoZS5kcG5hbWUpIDogZS5mdWxsdXJpICE9PSB2b2lkIDAgJiYgKHRoaXMuYXNuMURQID0gbmV3IGkoeyBmdWxsOiBbeyB1cmk6IGUuZnVsbHVyaSB9XSB9KSkpO1xufTtcbk4oYS5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50TmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnROYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJUYWdnZWRPYmplY3Q7XG4gIGlmICh0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPSBcImZ1bGxcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImN1cnJlbnRseSB0eXBlIHNoYWxsIGJlICdmdWxsJzogXCIgKyB0aGlzLnR5cGUpO1xuICAgIHJldHVybiB0aGlzLmFzbjFPYmogPSBuZXcgaSh7IGV4cGxpY2l0OiAhMSwgdGFnOiB0aGlzLnRhZywgb2JqOiB0aGlzLmFzbjFWIH0pLCB0aGlzLmhUTFYgPSB0aGlzLmFzbjFPYmoudG9oZXgoKSwgdGhpcy5oVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDApXG4gICAgaWYgKHIueDUwOS5HZW5lcmFsTmFtZXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZSkpXG4gICAgICB0aGlzLnR5cGUgPSBcImZ1bGxcIiwgdGhpcy50YWcgPSBcImEwXCIsIHRoaXMuYXNuMVYgPSBlO1xuICAgIGVsc2UgaWYgKGUuZnVsbCAhPT0gdm9pZCAwKVxuICAgICAgdGhpcy50eXBlID0gXCJmdWxsXCIsIHRoaXMudGFnID0gXCJhMFwiLCB0aGlzLmFzbjFWID0gbmV3IHIueDUwOS5HZW5lcmFsTmFtZXMoZS5mdWxsKTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGNsYXNzIHN1cHBvcnRzIEdlbmVyYWxOYW1lcyBvbmx5IGFzIGFyZ3VtZW50XCIpO1xufTtcbk4oYS5hc24xLng1MDkuRGlzdHJpYnV0aW9uUG9pbnROYW1lLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZVBvbGljaWVzID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZVBvbGljaWVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci54NTA5LCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IGkuUG9saWN5SW5mb3JtYXRpb247XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBoID0gW10sIHUgPSAwOyB1IDwgdGhpcy5wYXJhbXMuYXJyYXkubGVuZ3RoOyB1KyspXG4gICAgICBoLnB1c2gobmV3IG4odGhpcy5wYXJhbXMuYXJyYXlbdV0pKTtcbiAgICB2YXIgcCA9IG5ldyBzKHsgYXJyYXk6IGggfSk7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IHAsIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjMyXCIsIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LkNlcnRpZmljYXRlUG9saWNpZXMsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5Qb2xpY3lJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuUG9saWN5SW5mb3JtYXRpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEuYXNuMSwgciA9IHQuREVSU2VxdWVuY2UsIGkgPSB0LkRFUk9iamVjdElkZW50aWZpZXIsIHMgPSB0Lng1MDkuUG9saWN5UXVhbGlmaWVySW5mbztcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucGFyYW1zLnBvbGljeW9pZCA9PT0gdm9pZCAwICYmIHRoaXMucGFyYW1zLmFycmF5ID09PSB2b2lkIDApXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwYXJhbWV0ZXIgb2lkIGFuZCBhcnJheSBtaXNzaW5nXCIpO1xuICAgIHZhciBuID0gW25ldyBpKHRoaXMucGFyYW1zLnBvbGljeW9pZCldO1xuICAgIGlmICh0aGlzLnBhcmFtcy5hcnJheSAhPT0gdm9pZCAwKSB7XG4gICAgICBmb3IgKHZhciBoID0gW10sIHUgPSAwOyB1IDwgdGhpcy5wYXJhbXMuYXJyYXkubGVuZ3RoOyB1KyspXG4gICAgICAgIGgucHVzaChuZXcgcyh0aGlzLnBhcmFtcy5hcnJheVt1XSkpO1xuICAgICAgaC5sZW5ndGggPiAwICYmIG4ucHVzaChuZXcgcih7IGFycmF5OiBoIH0pKTtcbiAgICB9XG4gICAgdmFyIHAgPSBuZXcgcih7IGFycmF5OiBuIH0pO1xuICAgIHJldHVybiBwLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LlBvbGljeUluZm9ybWF0aW9uLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5Qb2xpY3lRdWFsaWZpZXJJbmZvID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5Qb2xpY3lRdWFsaWZpZXJJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLmFzbjEsIHIgPSB0LkRFUlNlcXVlbmNlLCBpID0gdC5ERVJJQTVTdHJpbmcsIHMgPSB0LkRFUk9iamVjdElkZW50aWZpZXIsIG4gPSB0Lng1MDkuVXNlck5vdGljZTtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucGFyYW1zLmNwcyAhPT0gdm9pZCAwKSB7XG4gICAgICB2YXIgaCA9IG5ldyByKHsgYXJyYXk6IFtuZXcgcyh7IG9pZDogXCIxLjMuNi4xLjUuNS43LjIuMVwiIH0pLCBuZXcgaSh7IHN0cjogdGhpcy5wYXJhbXMuY3BzIH0pXSB9KTtcbiAgICAgIHJldHVybiBoLnRvaGV4KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnBhcmFtcy51bm90aWNlICE9IG51bGwpIHtcbiAgICAgIHZhciBoID0gbmV3IHIoeyBhcnJheTogW25ldyBzKHsgb2lkOiBcIjEuMy42LjEuNS41LjcuMi4yXCIgfSksIG5ldyBuKHRoaXMucGFyYW1zLnVub3RpY2UpXSB9KTtcbiAgICAgIHJldHVybiBoLnRvaGV4KCk7XG4gICAgfVxuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5Qb2xpY3lRdWFsaWZpZXJJbmZvLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5Vc2VyTm90aWNlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5Vc2VyTm90aWNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLmFzbjEuREVSU2VxdWVuY2U7XG4gIGEuYXNuMS5ERVJJbnRlZ2VyO1xuICB2YXIgciA9IGEuYXNuMS54NTA5LkRpc3BsYXlUZXh0LCBpID0gYS5hc24xLng1MDkuTm90aWNlUmVmZXJlbmNlO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcyA9IFtdO1xuICAgIHRoaXMucGFyYW1zLm5vdGljZXJlZiAhPT0gdm9pZCAwICYmIHMucHVzaChuZXcgaSh0aGlzLnBhcmFtcy5ub3RpY2VyZWYpKSwgdGhpcy5wYXJhbXMuZXhwdGV4dCAhPT0gdm9pZCAwICYmIHMucHVzaChuZXcgcih0aGlzLnBhcmFtcy5leHB0ZXh0KSk7XG4gICAgdmFyIG4gPSBuZXcgdCh7IGFycmF5OiBzIH0pO1xuICAgIHJldHVybiBuLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LlVzZXJOb3RpY2UsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5Lk5vdGljZVJlZmVyZW5jZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuTm90aWNlUmVmZXJlbmNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLmFzbjEuREVSU2VxdWVuY2UsIHIgPSBhLmFzbjEuREVSSW50ZWdlciwgaSA9IGEuYXNuMS54NTA5LkRpc3BsYXlUZXh0O1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcyA9IFtdO1xuICAgIGlmICh0aGlzLnBhcmFtcy5vcmcgIT09IHZvaWQgMCAmJiBzLnB1c2gobmV3IGkodGhpcy5wYXJhbXMub3JnKSksIHRoaXMucGFyYW1zLm5vdGljZW51bSAhPT0gdm9pZCAwKSB7XG4gICAgICBmb3IgKHZhciBuID0gW10sIGggPSB0aGlzLnBhcmFtcy5ub3RpY2VudW0sIHUgPSAwOyB1IDwgaC5sZW5ndGg7IHUrKylcbiAgICAgICAgbi5wdXNoKG5ldyByKGhbdV0pKTtcbiAgICAgIHMucHVzaChuZXcgdCh7IGFycmF5OiBuIH0pKTtcbiAgICB9XG4gICAgaWYgKHMubGVuZ3RoID09IDApXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwYXJhbWV0ZXIgaXMgZW1wdHlcIik7XG4gICAgdmFyIHAgPSBuZXcgdCh7IGFycmF5OiBzIH0pO1xuICAgIHJldHVybiBwLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5Lk5vdGljZVJlZmVyZW5jZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuRGlzcGxheVRleHQgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkRpc3BsYXlUZXh0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5oVCA9IFwiMGNcIiwgZSAhPT0gdm9pZCAwICYmIChlLnR5cGUgPT09IFwiaWE1XCIgPyB0aGlzLmhUID0gXCIxNlwiIDogZS50eXBlID09PSBcInZpc1wiID8gdGhpcy5oVCA9IFwiMWFcIiA6IGUudHlwZSA9PT0gXCJibXBcIiAmJiAodGhpcy5oVCA9IFwiMWVcIikpO1xufTtcbk4oYS5hc24xLng1MDkuRGlzcGxheVRleHQsIGEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7XG5hLmFzbjEueDUwOS5Qb2xpY3lNYXBwaW5ncyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuUG9saWN5TWFwcGluZ3Muc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjE7XG4gIHIueDUwOTtcbiAgdmFyIGkgPSByLkFTTjFVdGlsLm5ld09iamVjdDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHMgPSB0aGlzLnBhcmFtcywgbiA9IFtdLCBoID0gMDsgaCA8IHMuYXJyYXkubGVuZ3RoOyBoKyspIHtcbiAgICAgIHZhciB1ID0gcy5hcnJheVtoXTtcbiAgICAgIG4ucHVzaCh7IHNlcTogW3sgb2lkOiB1WzBdIH0sIHsgb2lkOiB1WzFdIH1dIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlID0gaSh7IHNlcTogbiB9KSwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuMzNcIiwgZSAhPT0gdm9pZCAwICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuUG9saWN5TWFwcGluZ3MsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5Qb2xpY3lDb25zdHJhaW50cyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuUG9saWN5Q29uc3RyYWludHMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjE7XG4gIHIueDUwOTtcbiAgdmFyIGkgPSByLkFTTjFVdGlsLm5ld09iamVjdDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gdGhpcy5wYXJhbXMsIG4gPSBbXTtcbiAgICByZXR1cm4gcy5yZXFleHAgIT0gbnVsbCAmJiBuLnB1c2goeyB0YWc6IHsgdGFnaTogXCI4MFwiLCBvYmo6IHsgaW50OiBzLnJlcWV4cCB9IH0gfSksIHMuaW5oaWJpdCAhPSBudWxsICYmIG4ucHVzaCh7IHRhZzogeyB0YWdpOiBcIjgxXCIsIG9iajogeyBpbnQ6IHMuaW5oaWJpdCB9IH0gfSksIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IGkoeyBzZXE6IG4gfSksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjM2XCIsIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LlBvbGljeUNvbnN0cmFpbnRzLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuSW5oaWJpdEFueVBvbGljeSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuSW5oaWJpdEFueVBvbGljeS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgci54NTA5O1xuICB2YXIgaSA9IHIuQVNOMVV0aWwubmV3T2JqZWN0O1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IGkoeyBpbnQ6IHRoaXMucGFyYW1zLnNraXAgfSksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjU0XCIsIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LkluaGliaXRBbnlQb2xpY3ksIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5OYW1lQ29uc3RyYWludHMgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5Lk5hbWVDb25zdHJhaW50cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIueDUwOSwgcyA9IHIuQVNOMVV0aWwubmV3T2JqZWN0LCBuID0gaS5HZW5lcmFsU3VidHJlZTtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoID0gdGhpcy5wYXJhbXMsIHUgPSBbXTtcbiAgICBpZiAoaC5wZXJtaXQgIT0gbnVsbCAmJiBoLnBlcm1pdC5sZW5ndGggIT0gbnVsbCkge1xuICAgICAgZm9yICh2YXIgcCA9IFtdLCBjID0gMDsgYyA8IGgucGVybWl0Lmxlbmd0aDsgYysrKVxuICAgICAgICBwLnB1c2gobmV3IG4oaC5wZXJtaXRbY10pKTtcbiAgICAgIHUucHVzaCh7IHRhZzogeyB0YWdpOiBcImEwXCIsIG9iajogeyBzZXE6IHAgfSB9IH0pO1xuICAgIH1cbiAgICBpZiAoaC5leGNsdWRlICE9IG51bGwgJiYgaC5leGNsdWRlLmxlbmd0aCAhPSBudWxsKSB7XG4gICAgICBmb3IgKHZhciB5ID0gW10sIGMgPSAwOyBjIDwgaC5leGNsdWRlLmxlbmd0aDsgYysrKVxuICAgICAgICB5LnB1c2gobmV3IG4oaC5leGNsdWRlW2NdKSk7XG4gICAgICB1LnB1c2goeyB0YWc6IHsgdGFnaTogXCJhMVwiLCBvYmo6IHsgc2VxOiB5IH0gfSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IHMoeyBzZXE6IHUgfSksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjMwXCIsIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5Lk5hbWVDb25zdHJhaW50cywgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5LkdlbmVyYWxTdWJ0cmVlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5HZW5lcmFsU3VidHJlZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYS5hc24xLCByID0gdC54NTA5LCBpID0gci5HZW5lcmFsTmFtZSwgcyA9IHQuQVNOMVV0aWwubmV3T2JqZWN0O1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKG4pIHtcbiAgICB0aGlzLnBhcmFtcyA9IG47XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXMucGFyYW1zLCBoID0gW25ldyBpKG4pXTtcbiAgICBuLm1pbiAhPSBudWxsICYmIGgucHVzaCh7IHRhZzogeyB0YWdpOiBcIjgwXCIsIG9iajogeyBpbnQ6IG4ubWluIH0gfSB9KSwgbi5tYXggIT0gbnVsbCAmJiBoLnB1c2goeyB0YWc6IHsgdGFnaTogXCI4MVwiLCBvYmo6IHsgaW50OiBuLm1heCB9IH0gfSk7XG4gICAgdmFyIHUgPSBzKHsgc2VxOiBoIH0pO1xuICAgIHJldHVybiB1LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEueDUwOS5HZW5lcmFsU3VidHJlZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuRXh0S2V5VXNhZ2UgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkV4dEtleVVzYWdlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICB0aGlzLnNldFB1cnBvc2VBcnJheSA9IGZ1bmN0aW9uKGkpIHtcbiAgICB0aGlzLmFzbjFFeHRuVmFsdWUgPSBuZXcgci5ERVJTZXF1ZW5jZSgpO1xuICAgIGZvciAodmFyIHMgPSAwOyBzIDwgaS5sZW5ndGg7IHMrKykge1xuICAgICAgdmFyIG4gPSBuZXcgci5ERVJPYmplY3RJZGVudGlmaWVyKGlbc10pO1xuICAgICAgdGhpcy5hc24xRXh0blZhbHVlLmFwcGVuZEFTTjFPYmplY3Qobik7XG4gICAgfVxuICB9LCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4zN1wiLCBlICE9PSB2b2lkIDAgJiYgZS5hcnJheSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0UHVycG9zZUFycmF5KGUuYXJyYXkpO1xufTtcbk4oYS5hc24xLng1MDkuRXh0S2V5VXNhZ2UsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5BdXRob3JpdHlLZXlJZGVudGlmaWVyID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5BdXRob3JpdHlLZXlJZGVudGlmaWVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJUYWdnZWRPYmplY3QsIHMgPSByLng1MDkuR2VuZXJhbE5hbWVzO1xuICB0LmNyeXB0by5VdGlsLmlzS2V5LCB0aGlzLmFzbjFLSUQgPSBudWxsLCB0aGlzLmFzbjFDZXJ0SXNzdWVyID0gbnVsbCwgdGhpcy5hc24xQ2VydFNOID0gbnVsbCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IG5ldyBBcnJheSgpO1xuICAgIHRoaXMuYXNuMUtJRCAmJiBuLnB1c2gobmV3IGkoeyBleHBsaWNpdDogITEsIHRhZzogXCI4MFwiLCBvYmo6IHRoaXMuYXNuMUtJRCB9KSksIHRoaXMuYXNuMUNlcnRJc3N1ZXIgJiYgbi5wdXNoKG5ldyBpKHsgZXhwbGljaXQ6ICExLCB0YWc6IFwiYTFcIiwgb2JqOiBuZXcgcyhbeyBkbjogdGhpcy5hc24xQ2VydElzc3VlciB9XSkgfSkpLCB0aGlzLmFzbjFDZXJ0U04gJiYgbi5wdXNoKG5ldyBpKHsgZXhwbGljaXQ6ICExLCB0YWc6IFwiODJcIiwgb2JqOiB0aGlzLmFzbjFDZXJ0U04gfSkpO1xuICAgIHZhciBoID0gbmV3IHIuREVSU2VxdWVuY2UoeyBhcnJheTogbiB9KTtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlID0gaCwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0S0lEQnlQYXJhbSA9IGZ1bmN0aW9uKG4pIHtcbiAgICBpZiAobi5zdHIgIT09IHZvaWQgMCB8fCBuLmhleCAhPT0gdm9pZCAwKVxuICAgICAgdGhpcy5hc24xS0lEID0gbmV3IGEuYXNuMS5ERVJPY3RldFN0cmluZyhuKTtcbiAgICBlbHNlIGlmICh0eXBlb2YgbiA9PSBcIm9iamVjdFwiICYmIGEuY3J5cHRvLlV0aWwuaXNLZXkobikgfHwgdHlwZW9mIG4gPT0gXCJzdHJpbmdcIiAmJiBuLmluZGV4T2YoXCJCRUdJTiBcIikgIT0gLTEpIHtcbiAgICAgIHZhciBoID0gbjtcbiAgICAgIHR5cGVvZiBuID09IFwic3RyaW5nXCIgJiYgKGggPSBrLmdldEtleShuKSk7XG4gICAgICB2YXIgdSA9IGsuZ2V0S2V5SUQoaCk7XG4gICAgICB0aGlzLmFzbjFLSUQgPSBuZXcgYS5hc24xLkRFUk9jdGV0U3RyaW5nKHsgaGV4OiB1IH0pO1xuICAgIH1cbiAgfSwgdGhpcy5zZXRDZXJ0SXNzdWVyQnlQYXJhbSA9IGZ1bmN0aW9uKG4pIHtcbiAgICBuLnN0ciAhPT0gdm9pZCAwIHx8IG4ubGRhcHN0ciAhPT0gdm9pZCAwIHx8IG4uaGV4ICE9PSB2b2lkIDAgfHwgbi5jZXJ0c3ViamVjdCAhPT0gdm9pZCAwIHx8IG4uY2VydGlzc3VlciAhPT0gdm9pZCAwID8gdGhpcy5hc24xQ2VydElzc3VlciA9IG5ldyBhLmFzbjEueDUwOS5YNTAwTmFtZShuKSA6IHR5cGVvZiBuID09IFwic3RyaW5nXCIgJiYgbi5pbmRleE9mKFwiQkVHSU4gXCIpICE9IC0xICYmIG4uaW5kZXhPZihcIkNFUlRJRklDQVRFXCIpICE9IC0xICYmICh0aGlzLmFzbjFDZXJ0SXNzdWVyID0gbmV3IGEuYXNuMS54NTA5Llg1MDBOYW1lKHsgY2VydGlzc3VlcjogbiB9KSk7XG4gIH0sIHRoaXMuc2V0Q2VydFNOQnlQYXJhbSA9IGZ1bmN0aW9uKG4pIHtcbiAgICBpZiAobi5zdHIgIT09IHZvaWQgMCB8fCBuLmJpZ2ludCAhPT0gdm9pZCAwIHx8IG4uaGV4ICE9PSB2b2lkIDApXG4gICAgICB0aGlzLmFzbjFDZXJ0U04gPSBuZXcgYS5hc24xLkRFUkludGVnZXIobik7XG4gICAgZWxzZSBpZiAodHlwZW9mIG4gPT0gXCJzdHJpbmdcIiAmJiBuLmluZGV4T2YoXCJCRUdJTiBcIikgIT0gLTEgJiYgbi5pbmRleE9mKFwiQ0VSVElGSUNBVEVcIikpIHtcbiAgICAgIHZhciBoID0gbmV3IEwoKTtcbiAgICAgIGgucmVhZENlcnRQRU0obik7XG4gICAgICB2YXIgdSA9IGguZ2V0U2VyaWFsTnVtYmVySGV4KCk7XG4gICAgICB0aGlzLmFzbjFDZXJ0U04gPSBuZXcgYS5hc24xLkRFUkludGVnZXIoeyBoZXg6IHUgfSk7XG4gICAgfVxuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjM1XCIsIGUgIT09IHZvaWQgMCAmJiAoZS5raWQgIT09IHZvaWQgMCAmJiB0aGlzLnNldEtJREJ5UGFyYW0oZS5raWQpLCBlLmlzc3VlciAhPT0gdm9pZCAwICYmIHRoaXMuc2V0Q2VydElzc3VlckJ5UGFyYW0oZS5pc3N1ZXIpLCBlLnNuICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRDZXJ0U05CeVBhcmFtKGUuc24pLCBlLmlzc3VlcnNuICE9PSB2b2lkIDAgJiYgdHlwZW9mIGUuaXNzdWVyc24gPT0gXCJzdHJpbmdcIiAmJiBlLmlzc3VlcnNuLmluZGV4T2YoXCJCRUdJTiBcIikgIT0gLTEgJiYgZS5pc3N1ZXJzbi5pbmRleE9mKFwiQ0VSVElGSUNBVEVcIikgJiYgKHRoaXMuc2V0Q2VydFNOQnlQYXJhbShlLmlzc3VlcnNuKSwgdGhpcy5zZXRDZXJ0SXNzdWVyQnlQYXJhbShlLmlzc3VlcnNuKSkpO1xufTtcbk4oYS5hc24xLng1MDkuQXV0aG9yaXR5S2V5SWRlbnRpZmllciwgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5LlN1YmplY3RLZXlJZGVudGlmaWVyID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5TdWJqZWN0S2V5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVST2N0ZXRTdHJpbmc7XG4gIHRoaXMuYXNuMUtJRCA9IG51bGwsIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IHRoaXMuYXNuMUtJRCwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0S0lEQnlQYXJhbSA9IGZ1bmN0aW9uKHMpIHtcbiAgICBpZiAocy5zdHIgIT09IHZvaWQgMCB8fCBzLmhleCAhPT0gdm9pZCAwKVxuICAgICAgdGhpcy5hc24xS0lEID0gbmV3IGkocyk7XG4gICAgZWxzZSBpZiAodHlwZW9mIHMgPT0gXCJvYmplY3RcIiAmJiBhLmNyeXB0by5VdGlsLmlzS2V5KHMpIHx8IHR5cGVvZiBzID09IFwic3RyaW5nXCIgJiYgcy5pbmRleE9mKFwiQkVHSU5cIikgIT0gLTEpIHtcbiAgICAgIHZhciBuID0gcztcbiAgICAgIHR5cGVvZiBzID09IFwic3RyaW5nXCIgJiYgKG4gPSBrLmdldEtleShzKSk7XG4gICAgICB2YXIgaCA9IGsuZ2V0S2V5SUQobik7XG4gICAgICB0aGlzLmFzbjFLSUQgPSBuZXcgYS5hc24xLkRFUk9jdGV0U3RyaW5nKHsgaGV4OiBoIH0pO1xuICAgIH1cbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4xNFwiLCBlICE9PSB2b2lkIDAgJiYgZS5raWQgIT09IHZvaWQgMCAmJiB0aGlzLnNldEtJREJ5UGFyYW0oZS5raWQpO1xufTtcbk4oYS5hc24xLng1MDkuU3ViamVjdEtleUlkZW50aWZpZXIsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5BdXRob3JpdHlJbmZvQWNjZXNzID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5BdXRob3JpdHlJbmZvQWNjZXNzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5zZXRBY2Nlc3NEZXNjcmlwdGlvbkFycmF5ID0gZnVuY3Rpb24odCkge1xuICAgIGZvciAodmFyIHIgPSBuZXcgQXJyYXkoKSwgaSA9IGEsIHMgPSBpLmFzbjEsIG4gPSBzLkRFUlNlcXVlbmNlLCBoID0gcy5ERVJPYmplY3RJZGVudGlmaWVyLCB1ID0gcy54NTA5LkdlbmVyYWxOYW1lLCBwID0gMDsgcCA8IHQubGVuZ3RoOyBwKyspIHtcbiAgICAgIHZhciBjLCB5ID0gdFtwXTtcbiAgICAgIGlmICh5Lm9jc3AgIT09IHZvaWQgMClcbiAgICAgICAgYyA9IG5ldyBuKHsgYXJyYXk6IFtuZXcgaCh7IG9pZDogXCIxLjMuNi4xLjUuNS43LjQ4LjFcIiB9KSwgbmV3IHUoeyB1cmk6IHkub2NzcCB9KV0gfSk7XG4gICAgICBlbHNlIGlmICh5LmNhaXNzdWVyICE9PSB2b2lkIDApXG4gICAgICAgIGMgPSBuZXcgbih7IGFycmF5OiBbbmV3IGgoeyBvaWQ6IFwiMS4zLjYuMS41LjUuNy40OC4yXCIgfSksIG5ldyB1KHsgdXJpOiB5LmNhaXNzdWVyIH0pXSB9KTtcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biBBY2Nlc3NNZXRob2QgcGFyYW1ldGVyOiBcIiArIEpTT04uc3RyaW5naWZ5KHkpKTtcbiAgICAgIHIucHVzaChjKTtcbiAgICB9XG4gICAgdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IG4oeyBhcnJheTogciB9KTtcbiAgfSwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIxLjMuNi4xLjUuNS43LjEuMVwiLCBlICE9PSB2b2lkIDAgJiYgZS5hcnJheSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QWNjZXNzRGVzY3JpcHRpb25BcnJheShlLmFycmF5KTtcbn07XG5OKGEuYXNuMS54NTA5LkF1dGhvcml0eUluZm9BY2Nlc3MsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5TdWJqZWN0QWx0TmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuU3ViamVjdEFsdE5hbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLnNldE5hbWVBcnJheSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLmFzbjFFeHRuVmFsdWUgPSBuZXcgYS5hc24xLng1MDkuR2VuZXJhbE5hbWVzKHQpO1xuICB9LCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4xN1wiLCBlICE9PSB2b2lkIDAgJiYgZS5hcnJheSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0TmFtZUFycmF5KGUuYXJyYXkpO1xufTtcbk4oYS5hc24xLng1MDkuU3ViamVjdEFsdE5hbWUsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5Jc3N1ZXJBbHROYW1lID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5Jc3N1ZXJBbHROYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5zZXROYW1lQXJyYXkgPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IGEuYXNuMS54NTA5LkdlbmVyYWxOYW1lcyh0KTtcbiAgfSwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuMThcIiwgZSAhPT0gdm9pZCAwICYmIGUuYXJyYXkgIT09IHZvaWQgMCAmJiB0aGlzLnNldE5hbWVBcnJheShlLmFycmF5KTtcbn07XG5OKGEuYXNuMS54NTA5Lklzc3VlckFsdE5hbWUsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5TdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuU3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEuYXNuMSwgciA9IHQuREVSU2VxdWVuY2UsIGkgPSB0LkFTTjFVdGlsLm5ld09iamVjdCwgcyA9IHQueDUwOS5PSUQubmFtZTJvaWQ7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBuID0gW10sIGggPSAwOyBoIDwgdGhpcy5wYXJhbXMuYXJyYXkubGVuZ3RoOyBoKyspIHtcbiAgICAgIHZhciB1ID0gdGhpcy5wYXJhbXMuYXJyYXlbaF07XG4gICAgICBpZiAodS5hdHRyICE9IG51bGwgJiYgdS5hcnJheSAhPSBudWxsKSB7XG4gICAgICAgIHZhciBwID0geyBzZXE6IFt7IG9pZDogdS5hdHRyIH0sIHsgc2V0OiB1LmFycmF5IH1dIH07XG4gICAgICAgIG4ucHVzaChpKHApKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgYyA9IHsgc2VxOiBbeyBvaWQ6IFwiMS4yLjMuNFwiIH0sIHsgc2V0OiBbeyB1dGY4c3RyOiBcIkRFXCIgfV0gfV0gfTtcbiAgICAgIGlmICh1LmF0dHIgPT0gXCJkYXRlT2ZCaXJ0aFwiKVxuICAgICAgICBjLnNlcVswXS5vaWQgPSBzKHUuYXR0ciksIGMuc2VxWzFdLnNldFswXSA9IHsgZ2VudGltZTogdS5zdHIgfTtcbiAgICAgIGVsc2UgaWYgKHUuYXR0ciA9PSBcInBsYWNlT2ZCaXJ0aFwiKVxuICAgICAgICBjLnNlcVswXS5vaWQgPSBzKHUuYXR0ciksIGMuc2VxWzFdLnNldFswXSA9IHsgdXRmOHN0cjogdS5zdHIgfTtcbiAgICAgIGVsc2UgaWYgKHUuYXR0ciA9PSBcImdlbmRlclwiKVxuICAgICAgICBjLnNlcVswXS5vaWQgPSBzKHUuYXR0ciksIGMuc2VxWzFdLnNldFswXSA9IHsgcHJuc3RyOiB1LnN0ciB9O1xuICAgICAgZWxzZSBpZiAodS5hdHRyID09IFwiY291bnRyeU9mQ2l0aXplbnNoaXBcIilcbiAgICAgICAgYy5zZXFbMF0ub2lkID0gcyh1LmF0dHIpLCBjLnNlcVsxXS5zZXRbMF0gPSB7IHBybnN0cjogdS5zdHIgfTtcbiAgICAgIGVsc2UgaWYgKHUuYXR0ciA9PSBcImNvdW50cnlPZlJlc2lkZW5jZVwiKVxuICAgICAgICBjLnNlcVswXS5vaWQgPSBzKHUuYXR0ciksIGMuc2VxWzFdLnNldFswXSA9IHsgcHJuc3RyOiB1LnN0ciB9O1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBhdHRyaWJ1dGU6IFwiICsgdS5hdHRyKTtcbiAgICAgIG4ucHVzaChuZXcgaShjKSk7XG4gICAgfVxuICAgIHZhciB5ID0gbmV3IHIoeyBhcnJheTogbiB9KTtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlID0geSwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuOVwiLCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5TdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcywgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5LlByaXZhdGVFeHRlbnNpb24gPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlByaXZhdGVFeHRlbnNpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmxhbmcuU3RyaW5nLmlzSGV4LCBpID0gdC5hc24xLCBzID0gaS54NTA5Lk9JRC5uYW1lMm9pZCwgbiA9IGkuQVNOMVV0aWwubmV3T2JqZWN0O1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKGgpIHtcbiAgICB0aGlzLm9pZCA9IHMoaC5leHRuYW1lKSwgdGhpcy5wYXJhbXMgPSBoO1xuICB9LCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBhcmFtcy5leHRuYW1lID09IG51bGwgfHwgdGhpcy5wYXJhbXMuZXh0biA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZXh0bmFtZSBvciBleHRuaGV4IG5vdCBzcGVjaWZpZWRcIik7XG4gICAgdmFyIGggPSB0aGlzLnBhcmFtcy5leHRuO1xuICAgIGlmICh0eXBlb2YgaCA9PSBcInN0cmluZ1wiICYmIHIoaCkpXG4gICAgICByZXR1cm4gaDtcbiAgICBpZiAodHlwZW9mIGggPT0gXCJvYmplY3RcIilcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuKGgpLnRvaGV4KCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBleHRuIHZhbHVlXCIpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLng1MDkuUHJpdmF0ZUV4dGVuc2lvbiwgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5LkNSTCA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQ1JMLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJTZXF1ZW5jZSwgcyA9IHIuREVSQml0U3RyaW5nLCBuID0gci54NTA5LCBoID0gbi5BbGdvcml0aG1JZGVudGlmaWVyLCB1ID0gbi5UQlNDZXJ0TGlzdDtcbiAgdGhpcy5wYXJhbXMgPSB2b2lkIDAsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHApIHtcbiAgICB0aGlzLnBhcmFtcyA9IHA7XG4gIH0sIHRoaXMuc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gbmV3IHUodGhpcy5wYXJhbXMpLnRvaGV4KCksIGMgPSBuZXcgYS5jcnlwdG8uU2lnbmF0dXJlKHsgYWxnOiB0aGlzLnBhcmFtcy5zaWdhbGcgfSk7XG4gICAgYy5pbml0KHRoaXMucGFyYW1zLmNha2V5KSwgYy51cGRhdGVIZXgocCk7XG4gICAgdmFyIHkgPSBjLnNpZ24oKTtcbiAgICB0aGlzLnBhcmFtcy5zaWdoZXggPSB5O1xuICB9LCB0aGlzLmdldFBFTSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkZSh0aGlzLnRvaGV4KCksIFwiWDUwOSBDUkxcIik7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcCA9IHRoaXMucGFyYW1zO1xuICAgIGlmIChwLnRic29iaiA9PSBudWxsICYmIChwLnRic29iaiA9IG5ldyB1KHApKSwgcC5zaWdoZXggPT0gbnVsbCAmJiBwLmNha2V5ICE9IG51bGwgJiYgdGhpcy5zaWduKCksIHAuc2lnaGV4ID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzaWdoZXggb3IgY2FrZXkgcGFyYW1ldGVyIG5vdCBkZWZpbmVkXCIpO1xuICAgIHZhciBjID0gW107XG4gICAgYy5wdXNoKHAudGJzb2JqKSwgYy5wdXNoKG5ldyBoKHsgbmFtZTogcC5zaWdhbGcgfSkpLCBjLnB1c2gobmV3IHMoeyBoZXg6IFwiMDBcIiArIHAuc2lnaGV4IH0pKTtcbiAgICB2YXIgeSA9IG5ldyBpKHsgYXJyYXk6IGMgfSk7XG4gICAgcmV0dXJuIHkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuQ1JMLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5UQlNDZXJ0TGlzdCA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuVEJTQ2VydExpc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUkludGVnZXIsIHMgPSByLkRFUlNlcXVlbmNlLCBuID0gci5ERVJUYWdnZWRPYmplY3Q7XG4gIHIuREVST2JqZWN0SWRlbnRpZmllcjtcbiAgdmFyIGggPSByLng1MDksIHUgPSBoLkFsZ29yaXRobUlkZW50aWZpZXIsIHAgPSBoLlRpbWUsIGMgPSBoLkV4dGVuc2lvbnMsIHkgPSBoLlg1MDBOYW1lO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHY7XG4gIH0sIHRoaXMuZ2V0UmV2Q2VydFNlcXVlbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgdiA9IFtdLCBvID0gdGhpcy5wYXJhbXMucmV2Y2VydCwgbCA9IDA7IGwgPCBvLmxlbmd0aDsgbCsrKSB7XG4gICAgICB2YXIgZiA9IFtuZXcgaShvW2xdLnNuKSwgbmV3IHAob1tsXS5kYXRlKV07XG4gICAgICBvW2xdLmV4dCAhPSBudWxsICYmIGYucHVzaChuZXcgYyhvW2xdLmV4dCkpLCB2LnB1c2gobmV3IHMoeyBhcnJheTogZiB9KSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgcyh7IGFycmF5OiB2IH0pO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSBbXSwgbyA9IHRoaXMucGFyYW1zO1xuICAgIGlmIChvLnZlcnNpb24gIT0gbnVsbCkge1xuICAgICAgdmFyIGwgPSBvLnZlcnNpb24gLSAxLCBmID0gbmV3IGkoeyBpbnQ6IGwgfSk7XG4gICAgICB2LnB1c2goZik7XG4gICAgfVxuICAgIGlmICh2LnB1c2gobmV3IHUoeyBuYW1lOiBvLnNpZ2FsZyB9KSksIHYucHVzaChuZXcgeShvLmlzc3VlcikpLCB2LnB1c2gobmV3IHAoby50aGlzdXBkYXRlKSksIG8ubmV4dHVwZGF0ZSAhPSBudWxsICYmIHYucHVzaChuZXcgcChvLm5leHR1cGRhdGUpKSwgby5yZXZjZXJ0ICE9IG51bGwgJiYgdi5wdXNoKHRoaXMuZ2V0UmV2Q2VydFNlcXVlbmNlKCkpLCBvLmV4dCAhPSBudWxsKSB7XG4gICAgICB2YXIgZCA9IG5ldyBjKG8uZXh0KTtcbiAgICAgIHYucHVzaChuZXcgbih7IHRhZzogXCJhMFwiLCBleHBsaWNpdDogITAsIG9iajogZCB9KSk7XG4gICAgfVxuICAgIHZhciBnID0gbmV3IHMoeyBhcnJheTogdiB9KTtcbiAgICByZXR1cm4gZy50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLng1MDkuVEJTQ2VydExpc3QsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkNSTEVudHJ5ID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5DUkxFbnRyeS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgdGhpcy5zZXRDZXJ0U2VyaWFsID0gZnVuY3Rpb24oaSkge1xuICAgIHRoaXMuc24gPSBuZXcgci5ERVJJbnRlZ2VyKGkpO1xuICB9LCB0aGlzLnNldFJldm9jYXRpb25EYXRlID0gZnVuY3Rpb24oaSkge1xuICAgIHRoaXMudGltZSA9IG5ldyByLng1MDkuVGltZShpKTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpID0gbmV3IHIuREVSU2VxdWVuY2UoeyBhcnJheTogW3RoaXMuc24sIHRoaXMudGltZV0gfSk7XG4gICAgcmV0dXJuIHRoaXMuVExWID0gaS50b2hleCgpLCB0aGlzLlRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIChlLnRpbWUgIT09IHZvaWQgMCAmJiB0aGlzLnNldFJldm9jYXRpb25EYXRlKGUudGltZSksIGUuc24gIT09IHZvaWQgMCAmJiB0aGlzLnNldENlcnRTZXJpYWwoZS5zbikpO1xufTtcbk4oYS5hc24xLng1MDkuQ1JMRW50cnksIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkNSTE51bWJlciA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQ1JMTnVtYmVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5wYXJhbXMgPSB2b2lkIDAsIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IG5ldyBhLmFzbjEuREVSSW50ZWdlcih0aGlzLnBhcmFtcy5udW0pLCB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4yMFwiLCBlICE9IG51bGwgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5DUkxOdW1iZXIsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5DUkxSZWFzb24gPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkNSTFJlYXNvbi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMucGFyYW1zID0gdm9pZCAwLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBuZXcgYS5hc24xLkRFUkVudW1lcmF0ZWQodGhpcy5wYXJhbXMuY29kZSksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjIxXCIsIGUgIT0gbnVsbCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LkNSTFJlYXNvbiwgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5Lk9DU1BOb25jZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuT0NTUE5vbmNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5wYXJhbXMgPSB2b2lkIDAsIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IG5ldyBhLmFzbjEuREVST2N0ZXRTdHJpbmcodGhpcy5wYXJhbXMpLCB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjEuMy42LjEuNS41LjcuNDguMS4yXCIsIGUgIT0gbnVsbCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5Lk9DU1BOb25jZSwgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5Lk9DU1BOb0NoZWNrID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5PQ1NQTm9DaGVjay5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMucGFyYW1zID0gdm9pZCAwLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBuZXcgYS5hc24xLkRFUk51bGwoKSwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIxLjMuNi4xLjUuNS43LjQ4LjEuNVwiLCBlICE9IG51bGwgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5PQ1NQTm9DaGVjaywgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5LkFkb2JlVGltZVN0YW1wID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5BZG9iZVRpbWVTdGFtcC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSSW50ZWdlciwgcyA9IHIuREVSQm9vbGVhbiwgbiA9IHIuREVSU2VxdWVuY2UsIGggPSByLng1MDkuR2VuZXJhbE5hbWU7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IHRoaXMucGFyYW1zLCBwID0gW25ldyBpKDEpXTtcbiAgICByZXR1cm4gcC5wdXNoKG5ldyBoKHsgdXJpOiB1LnVyaSB9KSksIHUucmVxYXV0aCAhPSBudWxsICYmIHAucHVzaChuZXcgcyh1LnJlcWF1dGgpKSwgdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IG4oeyBhcnJheTogcCB9KSwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIxLjIuODQwLjExMzU4My4xLjEuOS4xXCIsIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEueDUwOS5BZG9iZVRpbWVTdGFtcCwgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5Llg1MDBOYW1lID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5YNTAwTmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuYXNuMUFycmF5ID0gW10sIHRoaXMucGFyYW1BcnJheSA9IFtdLCB0aGlzLnNSdWxlID0gXCJ1dGY4XCI7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIueDUwOSwgcyA9IGkuUkROO1xuICB0aGlzLnNldEJ5U3RyaW5nID0gZnVuY3Rpb24obiwgaCkge1xuICAgIGggIT09IHZvaWQgMCAmJiAodGhpcy5zUnVsZSA9IGgpO1xuICAgIHZhciB1ID0gbi5zcGxpdChcIi9cIik7XG4gICAgdS5zaGlmdCgpO1xuICAgIGZvciAodmFyIHAgPSBbXSwgYyA9IDA7IGMgPCB1Lmxlbmd0aDsgYysrKVxuICAgICAgaWYgKHVbY10ubWF0Y2goL15bXj1dKz0uKyQvKSlcbiAgICAgICAgcC5wdXNoKHVbY10pO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciB5ID0gcC5sZW5ndGggLSAxO1xuICAgICAgICBwW3ldID0gcFt5XSArIFwiL1wiICsgdVtjXTtcbiAgICAgIH1cbiAgICBmb3IgKHZhciBjID0gMDsgYyA8IHAubGVuZ3RoOyBjKyspXG4gICAgICB0aGlzLmFzbjFBcnJheS5wdXNoKG5ldyBzKHsgc3RyOiBwW2NdLCBydWxlOiB0aGlzLnNSdWxlIH0pKTtcbiAgfSwgdGhpcy5zZXRCeUxkYXBTdHJpbmcgPSBmdW5jdGlvbihuLCBoKSB7XG4gICAgaCAhPT0gdm9pZCAwICYmICh0aGlzLnNSdWxlID0gaCk7XG4gICAgdmFyIHUgPSBpLlg1MDBOYW1lLmxkYXBUb0NvbXBhdChuKTtcbiAgICB0aGlzLnNldEJ5U3RyaW5nKHUsIGgpO1xuICB9LCB0aGlzLnNldEJ5T2JqZWN0ID0gZnVuY3Rpb24obiwgaCkge1xuICAgIGggIT09IHZvaWQgMCAmJiAodGhpcy5zUnVsZSA9IGgpO1xuICAgIGZvciAodmFyIHUgaW4gbilcbiAgICAgIGlmIChuLmhhc093blByb3BlcnR5KHUpKSB7XG4gICAgICAgIHZhciBwID0gbmV3IHMoeyBzdHI6IHUgKyBcIj1cIiArIG5bdV0sIHJ1bGU6IHRoaXMuc1J1bGUgfSk7XG4gICAgICAgIHRoaXMuYXNuMUFycmF5ID8gdGhpcy5hc24xQXJyYXkucHVzaChwKSA6IHRoaXMuYXNuMUFycmF5ID0gW3BdO1xuICAgICAgfVxuICB9LCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihuKSB7XG4gICAgaWYgKG4ucnVsZSAhPT0gdm9pZCAwICYmICh0aGlzLnNSdWxlID0gbi5ydWxlKSwgbi5hcnJheSAhPT0gdm9pZCAwKVxuICAgICAgdGhpcy5wYXJhbUFycmF5ID0gbi5hcnJheTtcbiAgICBlbHNlIGlmIChuLnN0ciAhPT0gdm9pZCAwKVxuICAgICAgdGhpcy5zZXRCeVN0cmluZyhuLnN0cik7XG4gICAgZWxzZSBpZiAobi5sZGFwc3RyICE9PSB2b2lkIDApXG4gICAgICB0aGlzLnNldEJ5TGRhcFN0cmluZyhuLmxkYXBzdHIpO1xuICAgIGVsc2UgaWYgKG4uaGV4ICE9PSB2b2lkIDApXG4gICAgICB0aGlzLmhUTFYgPSBuLmhleDtcbiAgICBlbHNlIGlmIChuLmNlcnRpc3N1ZXIgIT09IHZvaWQgMCkge1xuICAgICAgdmFyIGggPSBuZXcgTCgpO1xuICAgICAgaC5yZWFkQ2VydFBFTShuLmNlcnRpc3N1ZXIpLCB0aGlzLmhUTFYgPSBoLmdldElzc3VlckhleCgpO1xuICAgIH0gZWxzZSBpZiAobi5jZXJ0c3ViamVjdCAhPT0gdm9pZCAwKSB7XG4gICAgICB2YXIgaCA9IG5ldyBMKCk7XG4gICAgICBoLnJlYWRDZXJ0UEVNKG4uY2VydHN1YmplY3QpLCB0aGlzLmhUTFYgPSBoLmdldFN1YmplY3RIZXgoKTtcbiAgICB9IGVsc2VcbiAgICAgIHR5cGVvZiBuID09IFwib2JqZWN0XCIgJiYgbi5jZXJ0c3ViamVjdCA9PT0gdm9pZCAwICYmIG4uY2VydGlzc3VlciA9PT0gdm9pZCAwICYmIHRoaXMuc2V0QnlPYmplY3Qobik7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuaFRMViA9PSBcInN0cmluZ1wiKVxuICAgICAgcmV0dXJuIHRoaXMuaFRMVjtcbiAgICBpZiAodGhpcy5hc24xQXJyYXkubGVuZ3RoID09IDAgJiYgdGhpcy5wYXJhbUFycmF5Lmxlbmd0aCA+IDApXG4gICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHRoaXMucGFyYW1BcnJheS5sZW5ndGg7IG4rKykge1xuICAgICAgICB2YXIgaCA9IHsgYXJyYXk6IHRoaXMucGFyYW1BcnJheVtuXSB9O1xuICAgICAgICB0aGlzLnNSdWxlICE9IFwidXRmOFwiICYmIChoLnJ1bGUgPSB0aGlzLnNSdWxlKTtcbiAgICAgICAgdmFyIHUgPSBuZXcgcyhoKTtcbiAgICAgICAgdGhpcy5hc24xQXJyYXkucHVzaCh1KTtcbiAgICAgIH1cbiAgICB2YXIgcCA9IG5ldyByLkRFUlNlcXVlbmNlKHsgYXJyYXk6IHRoaXMuYXNuMUFycmF5IH0pO1xuICAgIHJldHVybiB0aGlzLmhUTFYgPSBwLnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS54NTA5Llg1MDBOYW1lLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5YNTAwTmFtZS5jb21wYXRUb0xEQVAgPSBmdW5jdGlvbihlKSB7XG4gIGlmIChlLnN1YnN0cigwLCAxKSAhPT0gXCIvXCIpXG4gICAgdGhyb3cgXCJtYWxmb3JtZWQgaW5wdXRcIjtcbiAgZSA9IGUuc3Vic3RyKDEpO1xuICB2YXIgdCA9IGUuc3BsaXQoXCIvXCIpO1xuICByZXR1cm4gdC5yZXZlcnNlKCksIHQgPSB0Lm1hcChmdW5jdGlvbihyKSB7XG4gICAgcmV0dXJuIHIucmVwbGFjZSgvLC8sIFwiXFxcXCxcIik7XG4gIH0pLCB0LmpvaW4oXCIsXCIpO1xufTtcbmEuYXNuMS54NTA5Llg1MDBOYW1lLm9uZWxpbmVUb0xEQVAgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBhLmFzbjEueDUwOS5YNTAwTmFtZS5jb21wYXRUb0xEQVAoZSk7XG59O1xuYS5hc24xLng1MDkuWDUwME5hbWUubGRhcFRvQ29tcGF0ID0gZnVuY3Rpb24oZSkge1xuICBmb3IgKHZhciB0ID0gZS5zcGxpdChcIixcIiksIHIgPSAhMSwgaSA9IFtdLCBzID0gMDsgdC5sZW5ndGggPiAwOyBzKyspIHtcbiAgICB2YXIgbiA9IHQuc2hpZnQoKTtcbiAgICBpZiAociA9PT0gITApIHtcbiAgICAgIHZhciBoID0gaS5wb3AoKSwgdSA9IChoICsgXCIsXCIgKyBuKS5yZXBsYWNlKC9cXFxcLC9nLCBcIixcIik7XG4gICAgICBpLnB1c2godSksIHIgPSAhMTtcbiAgICB9IGVsc2VcbiAgICAgIGkucHVzaChuKTtcbiAgICBuLnN1YnN0cigtMSwgMSkgPT09IFwiXFxcXFwiICYmIChyID0gITApO1xuICB9XG4gIHJldHVybiBpID0gaS5tYXAoZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiBwLnJlcGxhY2UoXCIvXCIsIFwiXFxcXC9cIik7XG4gIH0pLCBpLnJldmVyc2UoKSwgXCIvXCIgKyBpLmpvaW4oXCIvXCIpO1xufTtcbmEuYXNuMS54NTA5Llg1MDBOYW1lLmxkYXBUb09uZWxpbmUgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBhLmFzbjEueDUwOS5YNTAwTmFtZS5sZGFwVG9Db21wYXQoZSk7XG59O1xuYS5hc24xLng1MDkuUkROID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5SRE4uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmFzbjFBcnJheSA9IFtdLCB0aGlzLnBhcmFtQXJyYXkgPSBbXSwgdGhpcy5zUnVsZSA9IFwidXRmOFwiO1xuICB2YXIgdCA9IGEuYXNuMS54NTA5LkF0dHJpYnV0ZVR5cGVBbmRWYWx1ZTtcbiAgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24ocikge1xuICAgIHIucnVsZSAhPT0gdm9pZCAwICYmICh0aGlzLnNSdWxlID0gci5ydWxlKSwgci5zdHIgIT09IHZvaWQgMCAmJiB0aGlzLmFkZEJ5TXVsdGlWYWx1ZWRTdHJpbmcoci5zdHIpLCByLmFycmF5ICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1BcnJheSA9IHIuYXJyYXkpO1xuICB9LCB0aGlzLmFkZEJ5U3RyaW5nID0gZnVuY3Rpb24ocikge1xuICAgIHRoaXMuYXNuMUFycmF5LnB1c2gobmV3IGEuYXNuMS54NTA5LkF0dHJpYnV0ZVR5cGVBbmRWYWx1ZSh7IHN0cjogciwgcnVsZTogdGhpcy5zUnVsZSB9KSk7XG4gIH0sIHRoaXMuYWRkQnlNdWx0aVZhbHVlZFN0cmluZyA9IGZ1bmN0aW9uKHIpIHtcbiAgICBmb3IgKHZhciBpID0gYS5hc24xLng1MDkuUkROLnBhcnNlU3RyaW5nKHIpLCBzID0gMDsgcyA8IGkubGVuZ3RoOyBzKyspXG4gICAgICB0aGlzLmFkZEJ5U3RyaW5nKGlbc10pO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuYXNuMUFycmF5Lmxlbmd0aCA9PSAwICYmIHRoaXMucGFyYW1BcnJheS5sZW5ndGggPiAwKVxuICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCB0aGlzLnBhcmFtQXJyYXkubGVuZ3RoOyByKyspIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLnBhcmFtQXJyYXlbcl07XG4gICAgICAgIGkucnVsZSAhPT0gdm9pZCAwICYmIHRoaXMuc1J1bGUgIT0gXCJ1dGY4XCIgJiYgKGkucnVsZSA9IHRoaXMuc1J1bGUpO1xuICAgICAgICB2YXIgcyA9IG5ldyB0KGkpO1xuICAgICAgICB0aGlzLmFzbjFBcnJheS5wdXNoKHMpO1xuICAgICAgfVxuICAgIHZhciBuID0gbmV3IGEuYXNuMS5ERVJTZXQoeyBhcnJheTogdGhpcy5hc24xQXJyYXkgfSk7XG4gICAgcmV0dXJuIHRoaXMuVExWID0gbi50b2hleCgpLCB0aGlzLlRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS54NTA5LlJETiwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuUkROLnBhcnNlU3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBmb3IgKHZhciB0ID0gZS5zcGxpdCgvXFwrLyksIHIgPSAhMSwgaSA9IFtdLCBzID0gMDsgdC5sZW5ndGggPiAwOyBzKyspIHtcbiAgICB2YXIgbiA9IHQuc2hpZnQoKTtcbiAgICBpZiAociA9PT0gITApIHtcbiAgICAgIHZhciBoID0gaS5wb3AoKSwgdSA9IChoICsgXCIrXCIgKyBuKS5yZXBsYWNlKC9cXFxcXFwrL2csIFwiK1wiKTtcbiAgICAgIGkucHVzaCh1KSwgciA9ICExO1xuICAgIH0gZWxzZVxuICAgICAgaS5wdXNoKG4pO1xuICAgIG4uc3Vic3RyKC0xLCAxKSA9PT0gXCJcXFxcXCIgJiYgKHIgPSAhMCk7XG4gIH1cbiAgZm9yICh2YXIgcCA9ICExLCBjID0gW10sIHMgPSAwOyBpLmxlbmd0aCA+IDA7IHMrKykge1xuICAgIHZhciBuID0gaS5zaGlmdCgpO1xuICAgIGlmIChwID09PSAhMCkge1xuICAgICAgdmFyIHkgPSBjLnBvcCgpO1xuICAgICAgaWYgKG4ubWF0Y2goL1wiJC8pKSB7XG4gICAgICAgIHZhciB1ID0gKHkgKyBcIitcIiArIG4pLnJlcGxhY2UoL14oW149XSspPVwiKC4qKVwiJC8sIFwiJDE9JDJcIik7XG4gICAgICAgIGMucHVzaCh1KSwgcCA9ICExO1xuICAgICAgfSBlbHNlXG4gICAgICAgIGMucHVzaCh5ICsgXCIrXCIgKyBuKTtcbiAgICB9IGVsc2VcbiAgICAgIGMucHVzaChuKTtcbiAgICBuLm1hdGNoKC9eW149XSs9XCIvKSAmJiAocCA9ICEwKTtcbiAgfVxuICByZXR1cm4gYztcbn07XG5hLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkF0dHJpYnV0ZVR5cGVBbmRWYWx1ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuc1J1bGUgPSBcInV0ZjhcIiwgdGhpcy5zVHlwZSA9IG51bGwsIHRoaXMuc1ZhbHVlID0gbnVsbCwgdGhpcy5kc1R5cGUgPSBudWxsO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5ERVJVVEY4U3RyaW5nLCBuID0gci5ERVJQcmludGFibGVTdHJpbmcsIGggPSByLkRFUlRlbGV0ZXhTdHJpbmcsIHUgPSByLkRFUklBNVN0cmluZywgcCA9IHIuREVSVmlzaWJsZVN0cmluZywgYyA9IHIuREVSQk1QU3RyaW5nLCB5ID0gdC5sYW5nLlN0cmluZy5pc01haWwsIHYgPSB0LmxhbmcuU3RyaW5nLmlzUHJpbnRhYmxlO1xuICB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihvKSB7XG4gICAgaWYgKG8ucnVsZSAhPT0gdm9pZCAwICYmICh0aGlzLnNSdWxlID0gby5ydWxlKSwgby5kcyAhPT0gdm9pZCAwICYmICh0aGlzLmRzVHlwZSA9IG8uZHMpLCBvLnZhbHVlID09PSB2b2lkIDAgJiYgby5zdHIgIT09IHZvaWQgMCkge1xuICAgICAgdmFyIGwgPSBvLnN0ciwgZiA9IGwubWF0Y2goL14oW149XSspPSguKykkLyk7XG4gICAgICBpZiAoZilcbiAgICAgICAgdGhpcy5zVHlwZSA9IGZbMV0sIHRoaXMuc1ZhbHVlID0gZlsyXTtcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGF0dHJUeXBlQW5kVmFsdWVTdHI6IFwiICsgYXR0clR5cGVBbmRWYWx1ZVN0cik7XG4gICAgfSBlbHNlXG4gICAgICB0aGlzLnNUeXBlID0gby50eXBlLCB0aGlzLnNWYWx1ZSA9IG8udmFsdWU7XG4gIH0sIHRoaXMuc2V0QnlTdHJpbmcgPSBmdW5jdGlvbihvLCBsKSB7XG4gICAgbCAhPT0gdm9pZCAwICYmICh0aGlzLnNSdWxlID0gbCk7XG4gICAgdmFyIGYgPSBvLm1hdGNoKC9eKFtePV0rKT0oLispJC8pO1xuICAgIGlmIChmKVxuICAgICAgdGhpcy5zZXRCeUF0dHJUeXBlQW5kVmFsdWVTdHIoZlsxXSwgZlsyXSk7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGF0dHJUeXBlQW5kVmFsdWVTdHI6IFwiICsgYXR0clR5cGVBbmRWYWx1ZVN0cik7XG4gIH0sIHRoaXMuX2dldERzVHlwZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvID0gdGhpcy5zVHlwZSwgbCA9IHRoaXMuc1ZhbHVlLCBmID0gdGhpcy5zUnVsZTtcbiAgICByZXR1cm4gZiA9PT0gXCJwcm5cIiA/IG8gPT0gXCJDTlwiICYmIHkobCkgPyBcImlhNVwiIDogdihsKSA/IFwicHJuXCIgOiBcInV0ZjhcIiA6IGYgPT09IFwidXRmOFwiID8gbyA9PSBcIkNOXCIgJiYgeShsKSA/IFwiaWE1XCIgOiBvID09IFwiQ1wiID8gXCJwcm5cIiA6IFwidXRmOFwiIDogXCJ1dGY4XCI7XG4gIH0sIHRoaXMuc2V0QnlBdHRyVHlwZUFuZFZhbHVlU3RyID0gZnVuY3Rpb24obywgbCwgZikge1xuICAgIGYgIT09IHZvaWQgMCAmJiAodGhpcy5zUnVsZSA9IGYpLCB0aGlzLnNUeXBlID0gbywgdGhpcy5zVmFsdWUgPSBsO1xuICB9LCB0aGlzLmdldFZhbHVlT2JqID0gZnVuY3Rpb24obywgbCkge1xuICAgIGlmIChvID09IFwidXRmOFwiKVxuICAgICAgcmV0dXJuIG5ldyBzKHsgc3RyOiBsIH0pO1xuICAgIGlmIChvID09IFwicHJuXCIpXG4gICAgICByZXR1cm4gbmV3IG4oeyBzdHI6IGwgfSk7XG4gICAgaWYgKG8gPT0gXCJ0ZWxcIilcbiAgICAgIHJldHVybiBuZXcgaCh7IHN0cjogbCB9KTtcbiAgICBpZiAobyA9PSBcImlhNVwiKVxuICAgICAgcmV0dXJuIG5ldyB1KHsgc3RyOiBsIH0pO1xuICAgIGlmIChvID09IFwidmlzXCIpXG4gICAgICByZXR1cm4gbmV3IHAoeyBzdHI6IGwgfSk7XG4gICAgaWYgKG8gPT0gXCJibXBcIilcbiAgICAgIHJldHVybiBuZXcgYyh7IHN0cjogbCB9KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBkaXJlY3Rvcnkgc3RyaW5nIHR5cGU6IHR5cGU9XCIgKyBvICsgXCIgdmFsdWU9XCIgKyBsKTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZHNUeXBlID09IG51bGwgJiYgKHRoaXMuZHNUeXBlID0gdGhpcy5fZ2V0RHNUeXBlKCkpO1xuICAgIHZhciBvID0gYS5hc24xLng1MDkuT0lELmF0eXBlMm9iaih0aGlzLnNUeXBlKSwgbCA9IHRoaXMuZ2V0VmFsdWVPYmoodGhpcy5kc1R5cGUsIHRoaXMuc1ZhbHVlKSwgZiA9IG5ldyBpKHsgYXJyYXk6IFtvLCBsXSB9KTtcbiAgICByZXR1cm4gdGhpcy5UTFYgPSBmLnRvaGV4KCksIHRoaXMuVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLng1MDkuQXR0cmlidXRlVHlwZUFuZFZhbHVlLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5TdWJqZWN0UHVibGljS2V5SW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUkludGVnZXIsIHMgPSByLkRFUkJpdFN0cmluZywgbiA9IHIuREVST2JqZWN0SWRlbnRpZmllciwgaCA9IHIuREVSU2VxdWVuY2UsIHUgPSByLkFTTjFVdGlsLm5ld09iamVjdCwgcCA9IHIueDUwOSwgYyA9IHAuQWxnb3JpdGhtSWRlbnRpZmllciwgeSA9IHQuY3J5cHRvO1xuICB5LkVDRFNBLCB5LkRTQSwgdGhpcy5nZXRBU04xT2JqZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuYXNuMUFsZ0lkID09IG51bGwgfHwgdGhpcy5hc24xU3VialBLZXkgPT0gbnVsbClcbiAgICAgIHRocm93IFwiYWxnSWQgYW5kL29yIHN1YmpQdWJLZXkgbm90IHNldFwiO1xuICAgIHZhciB2ID0gbmV3IGgoeyBhcnJheTogW3RoaXMuYXNuMUFsZ0lkLCB0aGlzLmFzbjFTdWJqUEtleV0gfSk7XG4gICAgcmV0dXJuIHY7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHRoaXMuZ2V0QVNOMU9iamVjdCgpO1xuICAgIHJldHVybiB0aGlzLmhUTFYgPSB2LnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5zZXRQdWJLZXkgPSBmdW5jdGlvbih2KSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh2IGluc3RhbmNlb2YgcSkge1xuICAgICAgICB2YXIgbyA9IHUoeyBzZXE6IFt7IGludDogeyBiaWdpbnQ6IHYubiB9IH0sIHsgaW50OiB7IGludDogdi5lIH0gfV0gfSksIGwgPSBvLnRvaGV4KCk7XG4gICAgICAgIHRoaXMuYXNuMUFsZ0lkID0gbmV3IGMoeyBuYW1lOiBcInJzYUVuY3J5cHRpb25cIiB9KSwgdGhpcy5hc24xU3VialBLZXkgPSBuZXcgcyh7IGhleDogXCIwMFwiICsgbCB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGlmICh2IGluc3RhbmNlb2YgYS5jcnlwdG8uRUNEU0EpIHtcbiAgICAgICAgdmFyIGYgPSBuZXcgbih7IG5hbWU6IHYuY3VydmVOYW1lIH0pO1xuICAgICAgICB0aGlzLmFzbjFBbGdJZCA9IG5ldyBjKHsgbmFtZTogXCJlY1B1YmxpY0tleVwiLCBhc24xcGFyYW1zOiBmIH0pLCB0aGlzLmFzbjFTdWJqUEtleSA9IG5ldyBzKHsgaGV4OiBcIjAwXCIgKyB2LnB1YktleUhleCB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGlmICh2IGluc3RhbmNlb2YgYS5jcnlwdG8uRFNBKSB7XG4gICAgICAgIHZhciBmID0gbmV3IHUoeyBzZXE6IFt7IGludDogeyBiaWdpbnQ6IHYucCB9IH0sIHsgaW50OiB7IGJpZ2ludDogdi5xIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiB2LmcgfSB9XSB9KTtcbiAgICAgICAgdGhpcy5hc24xQWxnSWQgPSBuZXcgYyh7IG5hbWU6IFwiZHNhXCIsIGFzbjFwYXJhbXM6IGYgfSk7XG4gICAgICAgIHZhciBkID0gbmV3IGkoeyBiaWdpbnQ6IHYueSB9KTtcbiAgICAgICAgdGhpcy5hc24xU3VialBLZXkgPSBuZXcgcyh7IGhleDogXCIwMFwiICsgZC50b2hleCgpIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgIH1cbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0UHViS2V5KGUpO1xufTtcbk4oYS5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8sIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LlRpbWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlRpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlVUQ1RpbWUsIHMgPSByLkRFUkdlbmVyYWxpemVkVGltZTtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnR5cGUgPSBudWxsLCB0aGlzLnNldFRpbWVQYXJhbXMgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy50aW1lUGFyYW1zID0gbjtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24obikge1xuICAgIHRoaXMucGFyYW1zID0gbjtcbiAgfSwgdGhpcy5nZXRUeXBlID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiBuLm1hdGNoKC9eWzAtOV17MTJ9WiQvKSA/IFwidXRjXCIgOiBuLm1hdGNoKC9eWzAtOV17MTR9WiQvKSA/IFwiZ2VuXCIgOiBuLm1hdGNoKC9eWzAtOV17MTJ9XFwuWzAtOV0rWiQvKSA/IFwidXRjXCIgOiBuLm1hdGNoKC9eWzAtOV17MTR9XFwuWzAtOV0rWiQvKSA/IFwiZ2VuXCIgOiBudWxsO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSB0aGlzLnBhcmFtcywgaCA9IG51bGw7XG4gICAgaWYgKHR5cGVvZiBuID09IFwic3RyaW5nXCIgJiYgKG4gPSB7IHN0cjogbiB9KSwgbiAhPSBudWxsICYmIG4uc3RyICYmIChuLnR5cGUgPT0gbnVsbCB8fCBuLnR5cGUgPT0gbnVsbCkgJiYgKG4udHlwZSA9IHRoaXMuZ2V0VHlwZShuLnN0cikpLCBuICE9IG51bGwgJiYgbi5zdHIgPyAobi50eXBlID09IFwidXRjXCIgJiYgKGggPSBuZXcgaShuLnN0cikpLCBuLnR5cGUgPT0gXCJnZW5cIiAmJiAoaCA9IG5ldyBzKG4uc3RyKSkpIDogdGhpcy50eXBlID09IFwiZ2VuXCIgPyBoID0gbmV3IHMoKSA6IGggPSBuZXcgaSgpLCBoID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ3cm9uZyBzZXR0aW5nIGZvciBUaW1lXCIpO1xuICAgIHJldHVybiB0aGlzLlRMViA9IGgudG9oZXgoKSwgdGhpcy5UTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuYS5hc24xLng1MDkuVGltZV9iYWsgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlRpbWVfYmFrLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJVVENUaW1lLCBzID0gci5ERVJHZW5lcmFsaXplZFRpbWU7XG4gIHRoaXMuc2V0VGltZVBhcmFtcyA9IGZ1bmN0aW9uKG4pIHtcbiAgICB0aGlzLnRpbWVQYXJhbXMgPSBuO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSBudWxsO1xuICAgIHJldHVybiB0aGlzLnRpbWVQYXJhbXMgIT0gbnVsbCA/IHRoaXMudHlwZSA9PSBcInV0Y1wiID8gbiA9IG5ldyBpKHRoaXMudGltZVBhcmFtcykgOiBuID0gbmV3IHModGhpcy50aW1lUGFyYW1zKSA6IHRoaXMudHlwZSA9PSBcInV0Y1wiID8gbiA9IG5ldyBpKCkgOiBuID0gbmV3IHMoKSwgdGhpcy5UTFYgPSBuLnRvaGV4KCksIHRoaXMuVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0aGlzLnR5cGUgPSBcInV0Y1wiLCBlICE9PSB2b2lkIDAgJiYgKGUudHlwZSAhPT0gdm9pZCAwID8gdGhpcy50eXBlID0gZS50eXBlIDogZS5zdHIgIT09IHZvaWQgMCAmJiAoZS5zdHIubWF0Y2goL15bMC05XXsxMn1aJC8pICYmICh0aGlzLnR5cGUgPSBcInV0Y1wiKSwgZS5zdHIubWF0Y2goL15bMC05XXsxNH1aJC8pICYmICh0aGlzLnR5cGUgPSBcImdlblwiKSksIHRoaXMudGltZVBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuVGltZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllciA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMubmFtZUFsZyA9IG51bGwsIHRoaXMuYXNuMUFsZyA9IG51bGwsIHRoaXMuYXNuMVBhcmFtcyA9IG51bGwsIHRoaXMucGFyYW1FbXB0eSA9ICExO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllci5QU1NOQU1FMkFTTjFUTFY7XG4gIGlmICh0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMubmFtZUFsZyA9PT0gbnVsbCAmJiB0aGlzLmFzbjFBbGcgPT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhbGdvcml0aG0gbm90IHNwZWNpZmllZFwiKTtcbiAgICBpZiAodGhpcy5uYW1lQWxnICE9PSBudWxsKSB7XG4gICAgICB2YXIgbiA9IG51bGw7XG4gICAgICBmb3IgKHZhciBoIGluIGkpXG4gICAgICAgIGggPT09IHRoaXMubmFtZUFsZyAmJiAobiA9IGlbaF0pO1xuICAgICAgaWYgKG4gIT09IG51bGwpXG4gICAgICAgIHJldHVybiB0aGlzLmhUTFYgPSBuLCB0aGlzLmhUTFY7XG4gICAgfVxuICAgIHRoaXMubmFtZUFsZyAhPT0gbnVsbCAmJiB0aGlzLmFzbjFBbGcgPT09IG51bGwgJiYgKHRoaXMuYXNuMUFsZyA9IHIueDUwOS5PSUQubmFtZTJvYmoodGhpcy5uYW1lQWxnKSk7XG4gICAgdmFyIHUgPSBbdGhpcy5hc24xQWxnXTtcbiAgICB0aGlzLmFzbjFQYXJhbXMgIT09IG51bGwgJiYgdS5wdXNoKHRoaXMuYXNuMVBhcmFtcyk7XG4gICAgdmFyIHAgPSBuZXcgci5ERVJTZXF1ZW5jZSh7IGFycmF5OiB1IH0pO1xuICAgIHJldHVybiB0aGlzLmhUTFYgPSBwLnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIChlLm5hbWUgIT09IHZvaWQgMCAmJiAodGhpcy5uYW1lQWxnID0gZS5uYW1lKSwgZS5hc24xcGFyYW1zICE9PSB2b2lkIDAgJiYgKHRoaXMuYXNuMVBhcmFtcyA9IGUuYXNuMXBhcmFtcyksIGUucGFyYW1lbXB0eSAhPT0gdm9pZCAwICYmICh0aGlzLnBhcmFtRW1wdHkgPSBlLnBhcmFtZW1wdHkpKSwgdGhpcy5hc24xUGFyYW1zID09PSBudWxsICYmIHRoaXMucGFyYW1FbXB0eSA9PT0gITEgJiYgdGhpcy5uYW1lQWxnICE9PSBudWxsKSB7XG4gICAgdGhpcy5uYW1lQWxnLm5hbWUgIT09IHZvaWQgMCAmJiAodGhpcy5uYW1lQWxnID0gdGhpcy5uYW1lQWxnLm5hbWUpO1xuICAgIHZhciBzID0gdGhpcy5uYW1lQWxnLnRvTG93ZXJDYXNlKCk7XG4gICAgcy5zdWJzdHIoLTcsIDcpICE9PSBcIndpdGhkc2FcIiAmJiBzLnN1YnN0cigtOSwgOSkgIT09IFwid2l0aGVjZHNhXCIgJiYgKHRoaXMuYXNuMVBhcmFtcyA9IG5ldyByLkRFUk51bGwoKSk7XG4gIH1cbn07XG5OKGEuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIuUFNTTkFNRTJBU04xVExWID0geyBTSEF3aXRoUlNBYW5kTUdGMTogXCIzMDBkMDYwOTJhODY0ODg2ZjcwZDAxMDEwYTMwMDBcIiwgU0hBMjU2d2l0aFJTQWFuZE1HRjE6IFwiMzAzZDA2MDkyYTg2NDg4NmY3MGQwMTAxMGEzMDMwYTAwZDMwMGIwNjA5NjA4NjQ4MDE2NTAzMDQwMjAxYTExYTMwMTgwNjA5MmE4NjQ4ODZmNzBkMDEwMTA4MzAwYjA2MDk2MDg2NDgwMTY1MDMwNDAyMDFhMjAzMDIwMTIwXCIsIFNIQTM4NHdpdGhSU0FhbmRNR0YxOiBcIjMwM2QwNjA5MmE4NjQ4ODZmNzBkMDEwMTBhMzAzMGEwMGQzMDBiMDYwOTYwODY0ODAxNjUwMzA0MDIwMmExMWEzMDE4MDYwOTJhODY0ODg2ZjcwZDAxMDEwODMwMGIwNjA5NjA4NjQ4MDE2NTAzMDQwMjAyYTIwMzAyMDEzMFwiLCBTSEE1MTJ3aXRoUlNBYW5kTUdGMTogXCIzMDNkMDYwOTJhODY0ODg2ZjcwZDAxMDEwYTMwMzBhMDBkMzAwYjA2MDk2MDg2NDgwMTY1MDMwNDAyMDNhMTFhMzAxODA2MDkyYTg2NDg4NmY3MGQwMTAxMDgzMDBiMDYwOTYwODY0ODAxNjUwMzA0MDIwM2EyMDMwMjAxNDBcIiB9O1xuYS5hc24xLng1MDkuR2VuZXJhbE5hbWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkdlbmVyYWxOYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci54NTA5LCBzID0gaS5YNTAwTmFtZSwgbiA9IGkuT3RoZXJOYW1lLCBoID0gci5ERVJJQTVTdHJpbmc7XG4gIHIuREVSUHJpbnRhYmxlU3RyaW5nO1xuICB2YXIgdSA9IHIuREVST2N0ZXRTdHJpbmcsIHAgPSByLkRFUlRhZ2dlZE9iamVjdCwgYyA9IHIuQVNOMU9iamVjdCwgeSA9IEVycm9yO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHY7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHRoaXMucGFyYW1zLCBvLCBmLCBsLCBmID0gITE7XG4gICAgaWYgKHYub3RoZXIgIT09IHZvaWQgMClcbiAgICAgIG8gPSBcImEwXCIsIGwgPSBuZXcgbih2Lm90aGVyKTtcbiAgICBlbHNlIGlmICh2LnJmYzgyMiAhPT0gdm9pZCAwKVxuICAgICAgbyA9IFwiODFcIiwgbCA9IG5ldyBoKHsgc3RyOiB2LnJmYzgyMiB9KTtcbiAgICBlbHNlIGlmICh2LmRucyAhPT0gdm9pZCAwKVxuICAgICAgbyA9IFwiODJcIiwgbCA9IG5ldyBoKHsgc3RyOiB2LmRucyB9KTtcbiAgICBlbHNlIGlmICh2LmRuICE9PSB2b2lkIDApXG4gICAgICBvID0gXCJhNFwiLCBmID0gITAsIHR5cGVvZiB2LmRuID09IFwic3RyaW5nXCIgPyBsID0gbmV3IHMoeyBzdHI6IHYuZG4gfSkgOiB2LmRuIGluc3RhbmNlb2YgYS5hc24xLng1MDkuWDUwME5hbWUgPyBsID0gdi5kbiA6IGwgPSBuZXcgcyh2LmRuKTtcbiAgICBlbHNlIGlmICh2LmxkYXBkbiAhPT0gdm9pZCAwKVxuICAgICAgbyA9IFwiYTRcIiwgZiA9ICEwLCBsID0gbmV3IHMoeyBsZGFwc3RyOiB2LmxkYXBkbiB9KTtcbiAgICBlbHNlIGlmICh2LmNlcnRpc3N1ZXIgIT09IHZvaWQgMCB8fCB2LmNlcnRzdWJqICE9PSB2b2lkIDApIHtcbiAgICAgIG8gPSBcImE0XCIsIGYgPSAhMDtcbiAgICAgIHZhciBkLCBnLCBTID0gbnVsbDtcbiAgICAgIGlmICh2LmNlcnRzdWJqICE9PSB2b2lkIDAgPyAoZCA9ICExLCBnID0gdi5jZXJ0c3ViaikgOiAoZCA9ICEwLCBnID0gdi5jZXJ0aXNzdWVyKSwgZy5tYXRjaCgvXlswLTlBLUZhLWZdKyQvKSwgZy5pbmRleE9mKFwiLS0tLS1CRUdJTiBcIikgIT0gLTEgJiYgKFMgPSBpZShnKSksIFMgPT0gbnVsbClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2VydHN1YmovY2VydGlzc3VlciBub3QgY2VydFwiKTtcbiAgICAgIHZhciBiID0gbmV3IEwoKTtcbiAgICAgIGIuaGV4ID0gUztcbiAgICAgIHZhciBEO1xuICAgICAgZCA/IEQgPSBiLmdldElzc3VlckhleCgpIDogRCA9IGIuZ2V0U3ViamVjdEhleCgpLCBsID0gbmV3IGMoKSwgbC5oVExWID0gRDtcbiAgICB9IGVsc2UgaWYgKHYudXJpICE9PSB2b2lkIDApXG4gICAgICBvID0gXCI4NlwiLCBsID0gbmV3IGgoeyBzdHI6IHYudXJpIH0pO1xuICAgIGVsc2UgaWYgKHYuaXAgIT09IHZvaWQgMCkge1xuICAgICAgbyA9IFwiODdcIjtcbiAgICAgIHZhciBBLCBJID0gdi5pcDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChJLm1hdGNoKC9eWzAtOWEtZl0rJC8pKSB7XG4gICAgICAgICAgdmFyIG0gPSBJLmxlbmd0aDtcbiAgICAgICAgICBpZiAobSA9PSA4IHx8IG0gPT0gMTYgfHwgbSA9PSAzMiB8fCBtID09IDY0KVxuICAgICAgICAgICAgQSA9IEk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhyb3cgXCJlcnJcIjtcbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgQSA9IFJ0KEkpO1xuICAgICAgfSBjYXRjaCAodykge1xuICAgICAgICB0aHJvdyBuZXcgeShcIm1hbGZvcm1lZCBJUCBhZGRyZXNzOiBcIiArIHYuaXAgKyBcIjpcIiArIHcubWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBsID0gbmV3IHUoeyBoZXg6IEEgfSk7XG4gICAgfSBlbHNlXG4gICAgICB0aHJvdyBuZXcgeShcImltcHJvcGVyIHBhcmFtc1wiKTtcbiAgICB2YXIgRSA9IG5ldyBwKHsgdGFnOiBvLCBleHBsaWNpdDogZiwgb2JqOiBsIH0pO1xuICAgIHJldHVybiBFLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEueDUwOS5HZW5lcmFsTmFtZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuR2VuZXJhbE5hbWVzID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5HZW5lcmFsTmFtZXMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjE7XG4gIHRoaXMuc2V0QnlQYXJhbUFycmF5ID0gZnVuY3Rpb24oaSkge1xuICAgIGZvciAodmFyIHMgPSAwOyBzIDwgaS5sZW5ndGg7IHMrKykge1xuICAgICAgdmFyIG4gPSBuZXcgci54NTA5LkdlbmVyYWxOYW1lKGlbc10pO1xuICAgICAgdGhpcy5hc24xQXJyYXkucHVzaChuKTtcbiAgICB9XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IG5ldyByLkRFUlNlcXVlbmNlKHsgYXJyYXk6IHRoaXMuYXNuMUFycmF5IH0pO1xuICAgIHJldHVybiBpLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuYXNuMUFycmF5ID0gbmV3IEFycmF5KCksIHR5cGVvZiBlIDwgXCJ1XCIgJiYgdGhpcy5zZXRCeVBhcmFtQXJyYXkoZSk7XG59O1xuTihhLmFzbjEueDUwOS5HZW5lcmFsTmFtZXMsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5Lk90aGVyTmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuT3RoZXJOYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJPYmplY3RJZGVudGlmaWVyLCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IHIuQVNOMVV0aWwubmV3T2JqZWN0O1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKGgpIHtcbiAgICB0aGlzLnBhcmFtcyA9IGg7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IHRoaXMucGFyYW1zO1xuICAgIGlmIChoLm9pZCA9PSBudWxsIHx8IGgudmFsdWUgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm9pZCBvciB2YWx1ZSBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIHZhciB1ID0gbmV3IGkoeyBvaWQ6IGgub2lkIH0pLCBwID0gbih7IHRhZzogeyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICEwLCBvYmo6IGgudmFsdWUgfSB9KSwgYyA9IG5ldyBzKHsgYXJyYXk6IFt1LCBwXSB9KTtcbiAgICByZXR1cm4gYy50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLng1MDkuT3RoZXJOYW1lLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5PSUQgPSBuZXcgZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gYS5hc24xLkRFUk9iamVjdElkZW50aWZpZXI7XG4gIHRoaXMubmFtZTJvaWRMaXN0ID0geyBcImFlczEyOC1DQkNcIjogXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS4yXCIsIFwiYWVzMjU2LUNCQ1wiOiBcIjIuMTYuODQwLjEuMTAxLjMuNC4xLjQyXCIsIHNoYTE6IFwiMS4zLjE0LjMuMi4yNlwiLCBzaGEyNTY6IFwiMi4xNi44NDAuMS4xMDEuMy40LjIuMVwiLCBzaGEzODQ6IFwiMi4xNi44NDAuMS4xMDEuMy40LjIuMlwiLCBzaGE1MTI6IFwiMi4xNi44NDAuMS4xMDEuMy40LjIuM1wiLCBzaGEyMjQ6IFwiMi4xNi44NDAuMS4xMDEuMy40LjIuNFwiLCBtZDU6IFwiMS4yLjg0MC4xMTM1NDkuMi41XCIsIG1kMjogXCIxLjMuMTQuNy4yLjIuMVwiLCByaXBlbWQxNjA6IFwiMS4zLjM2LjMuMi4xXCIsIGhtYWNXaXRoU0hBMTogXCIxLjIuODQwLjExMzU0OS4yLjdcIiwgaG1hY1dpdGhTSEEyMjQ6IFwiMS4yLjg0MC4xMTM1NDkuMi44XCIsIGhtYWNXaXRoU0hBMjU2OiBcIjEuMi44NDAuMTEzNTQ5LjIuOVwiLCBobWFjV2l0aFNIQTM4NDogXCIxLjIuODQwLjExMzU0OS4yLjEwXCIsIGhtYWNXaXRoU0hBNTEyOiBcIjEuMi44NDAuMTEzNTQ5LjIuMTFcIiwgTUQyd2l0aFJTQTogXCIxLjIuODQwLjExMzU0OS4xLjEuMlwiLCBNRDR3aXRoUlNBOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS4zXCIsIE1ENXdpdGhSU0E6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjRcIiwgU0hBMXdpdGhSU0E6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjVcIiwgXCJwa2NzMS1NR0ZcIjogXCIxLjIuODQwLjExMzU0OS4xLjEuOFwiLCByc2FQU1M6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEwXCIsIFNIQTIyNHdpdGhSU0E6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjE0XCIsIFNIQTI1NndpdGhSU0E6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjExXCIsIFNIQTM4NHdpdGhSU0E6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEyXCIsIFNIQTUxMndpdGhSU0E6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjEzXCIsIFNIQTF3aXRoRUNEU0E6IFwiMS4yLjg0MC4xMDA0NS40LjFcIiwgU0hBMjI0d2l0aEVDRFNBOiBcIjEuMi44NDAuMTAwNDUuNC4zLjFcIiwgU0hBMjU2d2l0aEVDRFNBOiBcIjEuMi44NDAuMTAwNDUuNC4zLjJcIiwgU0hBMzg0d2l0aEVDRFNBOiBcIjEuMi44NDAuMTAwNDUuNC4zLjNcIiwgU0hBNTEyd2l0aEVDRFNBOiBcIjEuMi44NDAuMTAwNDUuNC4zLjRcIiwgZHNhOiBcIjEuMi44NDAuMTAwNDAuNC4xXCIsIFNIQTF3aXRoRFNBOiBcIjEuMi44NDAuMTAwNDAuNC4zXCIsIFNIQTIyNHdpdGhEU0E6IFwiMi4xNi44NDAuMS4xMDEuMy40LjMuMVwiLCBTSEEyNTZ3aXRoRFNBOiBcIjIuMTYuODQwLjEuMTAxLjMuNC4zLjJcIiwgcnNhRW5jcnlwdGlvbjogXCIxLjIuODQwLjExMzU0OS4xLjEuMVwiLCBjb21tb25OYW1lOiBcIjIuNS40LjNcIiwgY291bnRyeU5hbWU6IFwiMi41LjQuNlwiLCBsb2NhbGl0eU5hbWU6IFwiMi41LjQuN1wiLCBzdGF0ZU9yUHJvdmluY2VOYW1lOiBcIjIuNS40LjhcIiwgc3RyZWV0QWRkcmVzczogXCIyLjUuNC45XCIsIG9yZ2FuaXphdGlvbk5hbWU6IFwiMi41LjQuMTBcIiwgb3JnYW5pemF0aW9uYWxVbml0TmFtZTogXCIyLjUuNC4xMVwiLCBkb21haW5Db21wb25lbnQ6IFwiMC45LjIzNDIuMTkyMDAzMDAuMTAwLjEuMjVcIiwgdXNlcklkOiBcIjAuOS4yMzQyLjE5MjAwMzAwLjEwMC4xLjFcIiwgc3VybmFtZTogXCIyLjUuNC40XCIsIGdpdmVuTmFtZTogXCIyLjUuNC40MlwiLCB0aXRsZTogXCIyLjUuNC4xMlwiLCBkaXN0aW5ndWlzaGVkTmFtZTogXCIyLjUuNC40OVwiLCBlbWFpbEFkZHJlc3M6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjFcIiwgZGVzY3JpcHRpb246IFwiMi41LjQuMTNcIiwgYnVzaW5lc3NDYXRlZ29yeTogXCIyLjUuNC4xNVwiLCBwb3N0YWxDb2RlOiBcIjIuNS40LjE3XCIsIHVuaXF1ZUlkZW50aWZpZXI6IFwiMi41LjQuNDVcIiwgb3JnYW5pemF0aW9uSWRlbnRpZmllcjogXCIyLjUuNC45N1wiLCBqdXJpc2RpY3Rpb25PZkluY29ycG9yYXRpb25MOiBcIjEuMy42LjEuNC4xLjMxMS42MC4yLjEuMVwiLCBqdXJpc2RpY3Rpb25PZkluY29ycG9yYXRpb25TUDogXCIxLjMuNi4xLjQuMS4zMTEuNjAuMi4xLjJcIiwganVyaXNkaWN0aW9uT2ZJbmNvcnBvcmF0aW9uQzogXCIxLjMuNi4xLjQuMS4zMTEuNjAuMi4xLjNcIiwgc3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXM6IFwiMi41LjI5LjlcIiwgc3ViamVjdEtleUlkZW50aWZpZXI6IFwiMi41LjI5LjE0XCIsIGtleVVzYWdlOiBcIjIuNS4yOS4xNVwiLCBzdWJqZWN0QWx0TmFtZTogXCIyLjUuMjkuMTdcIiwgaXNzdWVyQWx0TmFtZTogXCIyLjUuMjkuMThcIiwgYmFzaWNDb25zdHJhaW50czogXCIyLjUuMjkuMTlcIiwgY1JMTnVtYmVyOiBcIjIuNS4yOS4yMFwiLCBjUkxSZWFzb246IFwiMi41LjI5LjIxXCIsIG5hbWVDb25zdHJhaW50czogXCIyLjUuMjkuMzBcIiwgY1JMRGlzdHJpYnV0aW9uUG9pbnRzOiBcIjIuNS4yOS4zMVwiLCBjZXJ0aWZpY2F0ZVBvbGljaWVzOiBcIjIuNS4yOS4zMlwiLCBhbnlQb2xpY3k6IFwiMi41LjI5LjMyLjBcIiwgcG9saWN5TWFwcGluZ3M6IFwiMi41LjI5LjMzXCIsIGF1dGhvcml0eUtleUlkZW50aWZpZXI6IFwiMi41LjI5LjM1XCIsIHBvbGljeUNvbnN0cmFpbnRzOiBcIjIuNS4yOS4zNlwiLCBleHRLZXlVc2FnZTogXCIyLjUuMjkuMzdcIiwgaW5oaWJpdEFueVBvbGljeTogXCIyLjUuMjkuNTRcIiwgYXV0aG9yaXR5SW5mb0FjY2VzczogXCIxLjMuNi4xLjUuNS43LjEuMVwiLCBvY3NwOiBcIjEuMy42LjEuNS41LjcuNDguMVwiLCBvY3NwQmFzaWM6IFwiMS4zLjYuMS41LjUuNy40OC4xLjFcIiwgb2NzcE5vbmNlOiBcIjEuMy42LjEuNS41LjcuNDguMS4yXCIsIG9jc3BOb0NoZWNrOiBcIjEuMy42LjEuNS41LjcuNDguMS41XCIsIGNhSXNzdWVyczogXCIxLjMuNi4xLjUuNS43LjQ4LjJcIiwgYW55RXh0ZW5kZWRLZXlVc2FnZTogXCIyLjUuMjkuMzcuMFwiLCBzZXJ2ZXJBdXRoOiBcIjEuMy42LjEuNS41LjcuMy4xXCIsIGNsaWVudEF1dGg6IFwiMS4zLjYuMS41LjUuNy4zLjJcIiwgY29kZVNpZ25pbmc6IFwiMS4zLjYuMS41LjUuNy4zLjNcIiwgZW1haWxQcm90ZWN0aW9uOiBcIjEuMy42LjEuNS41LjcuMy40XCIsIHRpbWVTdGFtcGluZzogXCIxLjMuNi4xLjUuNS43LjMuOFwiLCBvY3NwU2lnbmluZzogXCIxLjMuNi4xLjUuNS43LjMuOVwiLCBzbXRwVVRGOE1haWxib3g6IFwiMS4zLjYuMS41LjUuNy44LjlcIiwgZGF0ZU9mQmlydGg6IFwiMS4zLjYuMS41LjUuNy45LjFcIiwgcGxhY2VPZkJpcnRoOiBcIjEuMy42LjEuNS41LjcuOS4yXCIsIGdlbmRlcjogXCIxLjMuNi4xLjUuNS43LjkuM1wiLCBjb3VudHJ5T2ZDaXRpemVuc2hpcDogXCIxLjMuNi4xLjUuNS43LjkuNFwiLCBjb3VudHJ5T2ZSZXNpZGVuY2U6IFwiMS4zLjYuMS41LjUuNy45LjVcIiwgZWNQdWJsaWNLZXk6IFwiMS4yLjg0MC4xMDA0NS4yLjFcIiwgXCJQLTI1NlwiOiBcIjEuMi44NDAuMTAwNDUuMy4xLjdcIiwgc2VjcDI1NnIxOiBcIjEuMi44NDAuMTAwNDUuMy4xLjdcIiwgc2VjcDI1NmsxOiBcIjEuMy4xMzIuMC4xMFwiLCBzZWNwMzg0cjE6IFwiMS4zLjEzMi4wLjM0XCIsIHNlY3A1MjFyMTogXCIxLjMuMTMyLjAuMzVcIiwgcGtjczVQQkVTMjogXCIxLjIuODQwLjExMzU0OS4xLjUuMTNcIiwgcGtjczVQQktERjI6IFwiMS4yLjg0MC4xMTM1NDkuMS41LjEyXCIsIFwiZGVzLUVERTMtQ0JDXCI6IFwiMS4yLjg0MC4xMTM1NDkuMy43XCIsIGRhdGE6IFwiMS4yLjg0MC4xMTM1NDkuMS43LjFcIiwgXCJzaWduZWQtZGF0YVwiOiBcIjEuMi44NDAuMTEzNTQ5LjEuNy4yXCIsIFwiZW52ZWxvcGVkLWRhdGFcIjogXCIxLjIuODQwLjExMzU0OS4xLjcuM1wiLCBcImRpZ2VzdGVkLWRhdGFcIjogXCIxLjIuODQwLjExMzU0OS4xLjcuNVwiLCBcImVuY3J5cHRlZC1kYXRhXCI6IFwiMS4yLjg0MC4xMTM1NDkuMS43LjZcIiwgXCJhdXRoZW50aWNhdGVkLWRhdGFcIjogXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMS4yXCIsIHRzdGluZm86IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjEuNFwiLCBzaWduaW5nQ2VydGlmaWNhdGU6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTJcIiwgdGltZVN0YW1wVG9rZW46IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTRcIiwgc2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcjogXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4xNVwiLCBldHNBcmNoaXZlVGltZVN0YW1wOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjI3XCIsIHNpZ25pbmdDZXJ0aWZpY2F0ZVYyOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjQ3XCIsIGV0c0FyY2hpdmVUaW1lU3RhbXBWMjogXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi40OFwiLCBleHRlbnNpb25SZXF1ZXN0OiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNFwiLCBjb250ZW50VHlwZTogXCIxLjIuODQwLjExMzU0OS4xLjkuM1wiLCBtZXNzYWdlRGlnZXN0OiBcIjEuMi44NDAuMTEzNTQ5LjEuOS40XCIsIHNpZ25pbmdUaW1lOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS41XCIsIGNvdW50ZXJTaWduYXR1cmU6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjZcIiwgYXJjaGl2ZVRpbWVTdGFtcFYzOiBcIjAuNC4wLjE3MzMuMi40XCIsIHBkZlJldm9jYXRpb25JbmZvQXJjaGl2YWw6IFwiMS4yLjg0MC4xMTM1ODMuMS4xLjhcIiwgYWRvYmVUaW1lU3RhbXA6IFwiMS4yLjg0MC4xMTM1ODMuMS4xLjkuMVwiLCBzbWltZU1haWxib3hMZWdhY3k6IFwiMi4yMy4xNDAuMS41LjEuMVwiLCBzbWltZU1haWxib3hNdWx0aTogXCIyLjIzLjE0MC4xLjUuMS4yXCIsIHNtaW1lTWFpbGJveFN0cmljdDogXCIyLjIzLjE0MC4xLjUuMS4zXCIsIHNtaW1lT3JnYW5pemF0aW9uTGVnYWN5OiBcIjIuMjMuMTQwLjEuNS4yLjFcIiwgc21pbWVPcmdhbml6YXRpb25NdWx0aTogXCIyLjIzLjE0MC4xLjUuMi4yXCIsIHNtaW1lT3JnYW5pemF0aW9uU3RyaWN0OiBcIjIuMjMuMTQwLjEuNS4yLjNcIiwgc21pbWVTcG9uc29yTGVnYWN5OiBcIjIuMjMuMTQwLjEuNS4zLjFcIiwgc21pbWVTcG9uc29yTXVsdGk6IFwiMi4yMy4xNDAuMS41LjMuMlwiLCBzbWltZVNwb25zb3JTdHJpY3Q6IFwiMi4yMy4xNDAuMS41LjMuM1wiLCBzbWltZUluZGl2aWR1YWxMZWdhY3k6IFwiMi4yMy4xNDAuMS41LjQuMVwiLCBzbWltZUluZGl2aWR1YWxNdWx0aTogXCIyLjIzLjE0MC4xLjUuNC4yXCIsIHNtaW1lSW5kaXZpZHVhbFN0cmljdDogXCIyLjIzLjE0MC4xLjUuNC4zXCIgfSwgdGhpcy5hdHlwZTJvaWRMaXN0ID0geyBDTjogXCIyLjUuNC4zXCIsIEw6IFwiMi41LjQuN1wiLCBTVDogXCIyLjUuNC44XCIsIE86IFwiMi41LjQuMTBcIiwgT1U6IFwiMi41LjQuMTFcIiwgQzogXCIyLjUuNC42XCIsIFNUUkVFVDogXCIyLjUuNC45XCIsIERDOiBcIjAuOS4yMzQyLjE5MjAwMzAwLjEwMC4xLjI1XCIsIFVJRDogXCIwLjkuMjM0Mi4xOTIwMDMwMC4xMDAuMS4xXCIsIFNOOiBcIjIuNS40LjRcIiwgVDogXCIyLjUuNC4xMlwiLCBHTjogXCIyLjUuNC40MlwiLCBETjogXCIyLjUuNC40OVwiLCBFOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xXCIsIGRlc2NyaXB0aW9uOiBcIjIuNS40LjEzXCIsIGJ1c2luZXNzQ2F0ZWdvcnk6IFwiMi41LjQuMTVcIiwgcG9zdGFsQ29kZTogXCIyLjUuNC4xN1wiLCBzZXJpYWxOdW1iZXI6IFwiMi41LjQuNVwiLCB1bmlxdWVJZGVudGlmaWVyOiBcIjIuNS40LjQ1XCIsIG9yZ2FuaXphdGlvbklkZW50aWZpZXI6IFwiMi41LjQuOTdcIiwganVyaXNkaWN0aW9uT2ZJbmNvcnBvcmF0aW9uTDogXCIxLjMuNi4xLjQuMS4zMTEuNjAuMi4xLjFcIiwganVyaXNkaWN0aW9uT2ZJbmNvcnBvcmF0aW9uU1A6IFwiMS4zLjYuMS40LjEuMzExLjYwLjIuMS4yXCIsIGp1cmlzZGljdGlvbk9mSW5jb3Jwb3JhdGlvbkM6IFwiMS4zLjYuMS40LjEuMzExLjYwLjIuMS4zXCIgfSwgdGhpcy5vYmpDYWNoZSA9IHt9LCB0aGlzLm5hbWUyb2JqID0gZnVuY3Rpb24odCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5vYmpDYWNoZVt0XSA8IFwidVwiKVxuICAgICAgcmV0dXJuIHRoaXMub2JqQ2FjaGVbdF07XG4gICAgaWYgKHR5cGVvZiB0aGlzLm5hbWUyb2lkTGlzdFt0XSA+IFwidVwiKVxuICAgICAgdGhyb3cgXCJOYW1lIG9mIE9iamVjdElkZW50aWZpZXIgbm90IGRlZmluZWQ6IFwiICsgdDtcbiAgICB2YXIgciA9IHRoaXMubmFtZTJvaWRMaXN0W3RdLCBpID0gbmV3IGUoeyBvaWQ6IHIgfSk7XG4gICAgcmV0dXJuIHRoaXMub2JqQ2FjaGVbdF0gPSBpLCBpO1xuICB9LCB0aGlzLmF0eXBlMm9iaiA9IGZ1bmN0aW9uKHQpIHtcbiAgICBpZiAodGhpcy5vYmpDYWNoZVt0XSAhPT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIHRoaXMub2JqQ2FjaGVbdF07XG4gICAgdmFyIHI7XG4gICAgaWYgKHQubWF0Y2goL15cXGQrXFwuXFxkK1xcLlswLTkuXSskLykpXG4gICAgICByID0gdDtcbiAgICBlbHNlIGlmICh0aGlzLmF0eXBlMm9pZExpc3RbdF0gIT09IHZvaWQgMClcbiAgICAgIHIgPSB0aGlzLmF0eXBlMm9pZExpc3RbdF07XG4gICAgZWxzZSBpZiAodGhpcy5uYW1lMm9pZExpc3RbdF0gIT09IHZvaWQgMClcbiAgICAgIHIgPSB0aGlzLm5hbWUyb2lkTGlzdFt0XTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdHRyaWJ1dGVUeXBlIG5hbWUgdW5kZWZpbmVkOiBcIiArIHQpO1xuICAgIHZhciBpID0gbmV3IGUoeyBvaWQ6IHIgfSk7XG4gICAgcmV0dXJuIHRoaXMub2JqQ2FjaGVbdF0gPSBpLCBpO1xuICB9LCB0aGlzLnJlZ2lzdGVyT0lEcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICBpZiAodGhpcy5jaGVja09JRHModCkpXG4gICAgICBmb3IgKHZhciByIGluIHQpXG4gICAgICAgIHRoaXMubmFtZTJvaWRMaXN0W3JdID0gdFtyXTtcbiAgfSwgdGhpcy5jaGVja09JRHMgPSBmdW5jdGlvbih0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByID0gT2JqZWN0LmtleXModCk7XG4gICAgICByZXR1cm4gci5sZW5ndGggPT0gMCA/ICExIDogKHIubWFwKGZ1bmN0aW9uKGksIHMsIG4pIHtcbiAgICAgICAgdmFyIGggPSB0aGlzW2ldO1xuICAgICAgICBpZiAoIWgubWF0Y2goL15bMC0yXVxcLlswLTkuXSskLykpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidmFsdWUgaXMgbm90IE9JRFwiKTtcbiAgICAgIH0sIHQpLCAhMCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICB9O1xufSgpO1xuYS5hc24xLng1MDkuT0lELm9pZDJuYW1lID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3Q7XG4gIGZvciAodmFyIHIgaW4gdClcbiAgICBpZiAodFtyXSA9PSBlKVxuICAgICAgcmV0dXJuIHI7XG4gIHJldHVybiBcIlwiO1xufTtcbmEuYXNuMS54NTA5Lk9JRC5vaWQyYXR5cGUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYS5hc24xLng1MDkuT0lELmF0eXBlMm9pZExpc3Q7XG4gIGZvciAodmFyIHIgaW4gdClcbiAgICBpZiAodFtyXSA9PSBlKVxuICAgICAgcmV0dXJuIHI7XG4gIHJldHVybiBlO1xufTtcbmEuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZCA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUubWF0Y2goL15bMC05Ll0rJC8pKVxuICAgIHJldHVybiBlO1xuICB2YXIgdCA9IGEuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZExpc3Q7XG4gIHJldHVybiB0W2VdID09PSB2b2lkIDAgPyBcIlwiIDogdFtlXTtcbn07XG5hLmFzbjEueDUwOS5YNTA5VXRpbCA9IHt9O1xuYS5hc24xLng1MDkuWDUwOVV0aWwubmV3Q2VydFBFTSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLmFzbjEueDUwOTtcbiAgdC5UQlNDZXJ0aWZpY2F0ZTtcbiAgdmFyIHIgPSB0LkNlcnRpZmljYXRlLCBpID0gbmV3IHIoZSk7XG4gIHJldHVybiBpLmdldFBFTSgpO1xufTtcbih0eXBlb2YgYSA+IFwidVwiIHx8ICFhKSAmJiAoYSA9IHt9KTtcbih0eXBlb2YgYS5hc24xID4gXCJ1XCIgfHwgIWEuYXNuMSkgJiYgKGEuYXNuMSA9IHt9KTtcbih0eXBlb2YgYS5hc24xLmNtcyA+IFwidVwiIHx8ICFhLmFzbjEuY21zKSAmJiAoYS5hc24xLmNtcyA9IHt9KTtcbmEuYXNuMS5jbXMuQXR0cmlidXRlID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVSU2VxdWVuY2UsIG4gPSBpLkRFUlNldCwgaCA9IGkuREVST2JqZWN0SWRlbnRpZmllcjtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnR5cGVPaWQgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbih1KSB7XG4gICAgdGhpcy5wYXJhbXMgPSB1O1xuICB9LCB0aGlzLmdldFZhbHVlQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgdChcIm5vdCB5ZXQgaW1wbGVtZW50ZWQgYWJzdHJhY3RcIik7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IG5ldyBoKHsgb2lkOiB0aGlzLnR5cGVPaWQgfSksIHAgPSBuZXcgbih7IGFycmF5OiB0aGlzLmdldFZhbHVlQXJyYXkoKSB9KSwgYyA9IG5ldyBzKHsgYXJyYXk6IFt1LCBwXSB9KTtcbiAgICByZXR1cm4gYy50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9O1xufTtcbk4oYS5hc24xLmNtcy5BdHRyaWJ1dGUsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuQ29udGVudFR5cGUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgci5jbXMuQ29udGVudFR5cGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnR5cGVPaWQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS4zXCIsIHRoaXMuZ2V0VmFsdWVBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpID0gbmV3IHIuREVST2JqZWN0SWRlbnRpZmllcih0aGlzLnBhcmFtcy50eXBlKTtcbiAgICByZXR1cm4gW2ldO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5Db250ZW50VHlwZSwgYS5hc24xLmNtcy5BdHRyaWJ1dGUpO1xuYS5hc24xLmNtcy5NZXNzYWdlRGlnZXN0ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUk9jdGV0U3RyaW5nLCBzID0gci5jbXM7XG4gIHMuTWVzc2FnZURpZ2VzdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMudHlwZU9pZCA9IFwiMS4yLjg0MC4xMTM1NDkuMS45LjRcIiwgdGhpcy5nZXRWYWx1ZUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSBuZXcgaSh0aGlzLnBhcmFtcyk7XG4gICAgcmV0dXJuIFtuXTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuTWVzc2FnZURpZ2VzdCwgYS5hc24xLmNtcy5BdHRyaWJ1dGUpO1xuYS5hc24xLmNtcy5TaWduaW5nVGltZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICByLmNtcy5TaWduaW5nVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMudHlwZU9pZCA9IFwiMS4yLjg0MC4xMTM1NDkuMS45LjVcIiwgdGhpcy5nZXRWYWx1ZUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGkgPSBuZXcgci54NTA5LlRpbWUodGhpcy5wYXJhbXMpO1xuICAgIHJldHVybiBbaV07XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLlNpZ25pbmdUaW1lLCBhLmFzbjEuY21zLkF0dHJpYnV0ZSk7XG5hLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUlNlcXVlbmNlLCBuID0gaS5jbXMsIGggPSBuLkVTU0NlcnRJRDtcbiAgci5jcnlwdG8sIG4uU2lnbmluZ0NlcnRpZmljYXRlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy50eXBlT2lkID0gXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4xMlwiLCB0aGlzLmdldFZhbHVlQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5wYXJhbXMgPT0gbnVsbCB8fCB0aGlzLnBhcmFtcyA9PSBudWxsIHx8IHRoaXMucGFyYW1zLmFycmF5ID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcInBhcmFtZXRlciAnYXJyYXknIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgZm9yICh2YXIgdSA9IHRoaXMucGFyYW1zLmFycmF5LCBwID0gW10sIGMgPSAwOyBjIDwgdS5sZW5ndGg7IGMrKykge1xuICAgICAgdmFyIHkgPSB1W2NdO1xuICAgICAgZS5oYXNpcyA9PSAhMSAmJiB0eXBlb2YgeSA9PSBcInN0cmluZ1wiICYmICh5LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xIHx8IFYuaXNBU04xSEVYKHkpKSAmJiAoeSA9IHsgY2VydDogeSB9KSwgeS5oYXNpcyAhPSAhMSAmJiBlLmhhc2lzID09ICExICYmICh5Lmhhc2lzID0gITEpLCBwLnB1c2gobmV3IGgoeSkpO1xuICAgIH1cbiAgICB2YXIgdiA9IG5ldyBzKHsgYXJyYXk6IHAgfSksIG8gPSBuZXcgcyh7IGFycmF5OiBbdl0gfSk7XG4gICAgcmV0dXJuIFtvXTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlLCBhLmFzbjEuY21zLkF0dHJpYnV0ZSk7XG5hLmFzbjEuY21zLkVTU0NlcnRJRCA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLmNtcy5FU1NDZXJ0SUQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVST2N0ZXRTdHJpbmcsIG4gPSBpLkRFUlNlcXVlbmNlLCBoID0gaS5jbXMuSXNzdWVyU2VyaWFsO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0Q2VydEhhc2ggPSBmdW5jdGlvbih1LCBwKSB7XG4gICAgaWYgKHUuaGFzaCAhPSBudWxsKVxuICAgICAgcmV0dXJuIHUuaGFzaDtcbiAgICBpZiAodHlwZW9mIHUgPT0gXCJzdHJpbmdcIiAmJiB1LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpID09IC0xICYmICFWLmlzQVNOMUhFWCh1KSlcbiAgICAgIHJldHVybiB1O1xuICAgIHZhciBjO1xuICAgIGlmICh0eXBlb2YgdSA9PSBcInN0cmluZ1wiKVxuICAgICAgYyA9IHU7XG4gICAgZWxzZSBpZiAodS5jZXJ0ICE9IG51bGwpXG4gICAgICBjID0gdS5jZXJ0O1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyB0KFwiaGFzaCBub3IgY2VydCB1bnNwZWNpZmllZFwiKTtcbiAgICB2YXIgeTtcbiAgICBjLmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xID8geSA9IGllKGMpIDogeSA9IGMsIHR5cGVvZiB1ID09IFwic3RyaW5nXCIgJiYgKHUuaW5kZXhPZihcIi0tLS0tQkVHSU5cIikgIT0gLTEgPyB5ID0gaWUodSkgOiBWLmlzQVNOMUhFWCh1KSAmJiAoeSA9IHUpKTtcbiAgICB2YXIgdjtcbiAgICBpZiAodS5hbGcgIT0gbnVsbClcbiAgICAgIHYgPSB1LmFsZztcbiAgICBlbHNlIGlmIChwICE9IG51bGwpXG4gICAgICB2ID0gcDtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgdChcImhhc2ggYWxnIHVuc3BlY2lmaWVkXCIpO1xuICAgIHJldHVybiByLmNyeXB0by5VdGlsLmhhc2hIZXgoeSwgdik7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IHRoaXMucGFyYW1zLCBwID0gdGhpcy5nZXRDZXJ0SGFzaCh1LCBcInNoYTFcIiksIGMgPSBbXTtcbiAgICBjLnB1c2gobmV3IHMoeyBoZXg6IHAgfSkpLCAodHlwZW9mIHUgPT0gXCJzdHJpbmdcIiAmJiB1LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xIHx8IHUuY2VydCAhPSBudWxsICYmIHUuaGFzaXMgIT0gITEgfHwgdS5pc3N1ZXIgIT0gbnVsbCAmJiB1LnNlcmlhbCAhPSBudWxsKSAmJiBjLnB1c2gobmV3IGgodSkpO1xuICAgIHZhciB5ID0gbmV3IG4oeyBhcnJheTogYyB9KTtcbiAgICByZXR1cm4geS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5FU1NDZXJ0SUQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlVjIgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5ERVJTZXF1ZW5jZTtcbiAgaS54NTA5O1xuICB2YXIgbiA9IGkuY21zLCBoID0gbi5FU1NDZXJ0SUR2MjtcbiAgci5jcnlwdG8sIG4uU2lnbmluZ0NlcnRpZmljYXRlVjIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnR5cGVPaWQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjQ3XCIsIHRoaXMuZ2V0VmFsdWVBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBhcmFtcyA9PSBudWxsIHx8IHRoaXMucGFyYW1zID09IG51bGwgfHwgdGhpcy5wYXJhbXMuYXJyYXkgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyB0KFwicGFyYW1ldGVyICdhcnJheScgbm90IHNwZWNpZmllZFwiKTtcbiAgICBmb3IgKHZhciB1ID0gdGhpcy5wYXJhbXMuYXJyYXksIHAgPSBbXSwgYyA9IDA7IGMgPCB1Lmxlbmd0aDsgYysrKSB7XG4gICAgICB2YXIgeSA9IHVbY107XG4gICAgICAoZS5hbGcgIT0gbnVsbCB8fCBlLmhhc2lzID09ICExKSAmJiB0eXBlb2YgeSA9PSBcInN0cmluZ1wiICYmICh5LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xIHx8IFYuaXNBU04xSEVYKHkpKSAmJiAoeSA9IHsgY2VydDogeSB9KSwgeS5hbGcgPT0gbnVsbCAmJiBlLmFsZyAhPSBudWxsICYmICh5LmFsZyA9IGUuYWxnKSwgeS5oYXNpcyAhPSAhMSAmJiBlLmhhc2lzID09ICExICYmICh5Lmhhc2lzID0gITEpLCBwLnB1c2gobmV3IGgoeSkpO1xuICAgIH1cbiAgICB2YXIgdiA9IG5ldyBzKHsgYXJyYXk6IHAgfSksIG8gPSBuZXcgcyh7IGFycmF5OiBbdl0gfSk7XG4gICAgcmV0dXJuIFtvXTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuU2lnbmluZ0NlcnRpZmljYXRlVjIsIGEuYXNuMS5jbXMuQXR0cmlidXRlKTtcbmEuYXNuMS5jbXMuRVNTQ2VydElEdjIgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5jbXMuRVNTQ2VydElEdjIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUk9jdGV0U3RyaW5nLCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IHIuY21zLklzc3VlclNlcmlhbCwgaCA9IHIueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IHRoaXMucGFyYW1zLCBwID0gdGhpcy5nZXRDZXJ0SGFzaCh1LCBcInNoYTI1NlwiKSwgYyA9IFtdO1xuICAgIHUuYWxnICE9IG51bGwgJiYgdS5hbGcgIT0gXCJzaGEyNTZcIiAmJiBjLnB1c2gobmV3IGgoeyBuYW1lOiB1LmFsZyB9KSksIGMucHVzaChuZXcgaSh7IGhleDogcCB9KSksICh0eXBlb2YgdSA9PSBcInN0cmluZ1wiICYmIHUuaW5kZXhPZihcIi0tLS0tQkVHSU5cIikgIT0gLTEgfHwgdS5jZXJ0ICE9IG51bGwgJiYgdS5oYXNpcyAhPSAhMSB8fCB1Lmlzc3VlciAhPSBudWxsICYmIHUuc2VyaWFsICE9IG51bGwpICYmIGMucHVzaChuZXcgbih1KSk7XG4gICAgdmFyIHkgPSBuZXcgcyh7IGFycmF5OiBjIH0pO1xuICAgIHJldHVybiB5LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLkVTU0NlcnRJRHYyLCBhLmFzbjEuY21zLkVTU0NlcnRJRCk7XG5hLmFzbjEuY21zLklzc3VlclNlcmlhbCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUkludGVnZXIsIG4gPSBpLkRFUlNlcXVlbmNlLCBoID0gaS5jbXMsIHUgPSBpLng1MDksIHAgPSB1LkdlbmVyYWxOYW1lcywgYyA9IEw7XG4gIGguSXNzdWVyU2VyaWFsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24oeSkge1xuICAgIHRoaXMucGFyYW1zID0geTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB5ID0gdGhpcy5wYXJhbXMsIHYsIG87XG4gICAgaWYgKHR5cGVvZiB5ID09IFwic3RyaW5nXCIgJiYgeS5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSB8fCB5LmNlcnQgIT0gbnVsbCkge1xuICAgICAgdmFyIGw7XG4gICAgICB5LmNlcnQgIT0gbnVsbCA/IGwgPSB5LmNlcnQgOiBsID0geTtcbiAgICAgIHZhciBmID0gbmV3IGMoKTtcbiAgICAgIGYucmVhZENlcnRQRU0obCksIHYgPSBmLmdldElzc3VlcigpLCBvID0geyBoZXg6IGYuZ2V0U2VyaWFsTnVtYmVySGV4KCkgfTtcbiAgICB9IGVsc2UgaWYgKHkuaXNzdWVyICE9IG51bGwgJiYgeS5zZXJpYWwpXG4gICAgICB2ID0geS5pc3N1ZXIsIG8gPSB5LnNlcmlhbDtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgdChcImNlcnQgb3IgaXNzdWVyIGFuZCBzZXJpYWwgcGFyYW1ldGVyIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgdmFyIGQgPSBuZXcgcChbeyBkbjogdiB9XSksIGcgPSBuZXcgcyhvKSwgUyA9IG5ldyBuKHsgYXJyYXk6IFtkLCBnXSB9KTtcbiAgICByZXR1cm4gUy50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5Jc3N1ZXJTZXJpYWwsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuU2lnbmVySWRlbnRpZmllciA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICByLkRFUkludGVnZXIsIHIuREVSU2VxdWVuY2U7XG4gIHZhciBpID0gci5jbXMsIHMgPSBpLklzc3VlckFuZFNlcmlhbE51bWJlciwgbiA9IGkuU3ViamVjdEtleUlkZW50aWZpZXIsIGggPSByLng1MDk7XG4gIGguWDUwME5hbWUsIGkuU2lnbmVySWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKHUudHlwZSA9PSBcImlzc3NuXCIpIHtcbiAgICAgIHZhciBwID0gbmV3IHModSk7XG4gICAgICByZXR1cm4gcC50b2hleCgpO1xuICAgIH0gZWxzZSBpZiAodS50eXBlID09IFwic2tpZFwiKSB7XG4gICAgICB2YXIgYyA9IG5ldyBuKHUpO1xuICAgICAgcmV0dXJuIGMudG9oZXgoKTtcbiAgICB9IGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIndyb25nIHByb3BlcnR5IGZvciBpc3NzbiBvciBza2lkXCIpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5TaWduZXJJZGVudGlmaWVyLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLklzc3VlckFuZFNlcmlhbE51bWJlciA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJJbnRlZ2VyLCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IHIuY21zLCBoID0gci54NTA5LCB1ID0gaC5YNTAwTmFtZSwgcCA9IEwsIGMgPSBFcnJvcjtcbiAgbi5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgeSA9IHRoaXMucGFyYW1zLCB2LCBvO1xuICAgIGlmICh0eXBlb2YgeSA9PSBcInN0cmluZ1wiICYmIHkuaW5kZXhPZihcIi0tLS0tQkVHSU5cIikgIT0gLTEgfHwgeS5jZXJ0ICE9IG51bGwpIHtcbiAgICAgIHZhciBsO1xuICAgICAgeS5jZXJ0ICE9IG51bGwgPyBsID0geS5jZXJ0IDogbCA9IHk7XG4gICAgICB2YXIgZiA9IG5ldyBwKCk7XG4gICAgICBmLnJlYWRDZXJ0UEVNKGwpLCB2ID0gZi5nZXRJc3N1ZXIoKSwgbyA9IHsgaGV4OiBmLmdldFNlcmlhbE51bWJlckhleCgpIH07XG4gICAgfSBlbHNlIGlmICh5Lmlzc3VlciAhPSBudWxsICYmIHkuc2VyaWFsKVxuICAgICAgdiA9IHkuaXNzdWVyLCBvID0geS5zZXJpYWw7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IGMoXCJjZXJ0IG9yIGlzc3VlciBhbmQgc2VyaWFsIHBhcmFtZXRlciBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIHZhciBkID0gbmV3IHUodiksIGcgPSBuZXcgaShvKSwgUyA9IG5ldyBzKHsgYXJyYXk6IFtkLCBnXSB9KTtcbiAgICByZXR1cm4gUy50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbih5KSB7XG4gICAgdGhpcy5wYXJhbXMgPSB5O1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuU3ViamVjdEtleUlkZW50aWZpZXIgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgci5ERVJJbnRlZ2VyLCByLkRFUlNlcXVlbmNlO1xuICB2YXIgaSA9IHIuQVNOMVV0aWwubmV3T2JqZWN0LCBzID0gci5jbXM7XG4gIHMuSXNzdWVyQW5kU2VyaWFsTmFtZSwgcy5TdWJqZWN0S2V5SWRlbnRpZmllcjtcbiAgdmFyIG4gPSByLng1MDk7XG4gIG4uWDUwME5hbWU7XG4gIHZhciBoID0gTCwgdSA9IEVycm9yO1xuICBzLlN1YmplY3RLZXlJZGVudGlmaWVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKHAuY2VydCA9PSBudWxsICYmIHAuc2tpZCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IHUoXCJwcm9wZXJ0eSBjZXJ0IG5vciBza2lkIHVuZGVmaW5lZFwiKTtcbiAgICB2YXIgYztcbiAgICBpZiAocC5jZXJ0ICE9IG51bGwpIHtcbiAgICAgIHZhciB5ID0gbmV3IGgocC5jZXJ0KSwgdiA9IHkuZ2V0RXh0U3ViamVjdEtleUlkZW50aWZpZXIoKTtcbiAgICAgIGMgPSB2LmtpZC5oZXg7XG4gICAgfSBlbHNlXG4gICAgICBwLnNraWQgIT0gbnVsbCAmJiAoYyA9IHAuc2tpZCk7XG4gICAgdmFyIG8gPSBpKHsgdGFnOiB7IHRhZ2U6IFwiYTBcIiwgb2JqOiB7IG9jdHN0cjogeyBoZXg6IGMgfSB9IH0gfSk7XG4gICAgcmV0dXJuIG8udG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuU3ViamVjdEtleUlkZW50aWZpZXIsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuQXR0cmlidXRlTGlzdCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUlNldCwgbiA9IGkuY21zO1xuICBuLkF0dHJpYnV0ZUxpc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKGgpIHtcbiAgICB0aGlzLnBhcmFtcyA9IGg7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IHRoaXMucGFyYW1zO1xuICAgIGlmICh0aGlzLmhUTFYgIT0gbnVsbClcbiAgICAgIHJldHVybiB0aGlzLmhUTFY7XG4gICAgdmFyIHUgPSAhMDtcbiAgICBoLnNvcnRmbGFnICE9IG51bGwgJiYgKHUgPSBoLnNvcnRmbGFnKTtcbiAgICBmb3IgKHZhciBwID0gaC5hcnJheSwgYyA9IFtdLCB5ID0gMDsgeSA8IHAubGVuZ3RoOyB5KyspIHtcbiAgICAgIHZhciB2ID0gcFt5XSwgbyA9IHYuYXR0cjtcbiAgICAgIGlmIChvID09IFwiY29udGVudFR5cGVcIilcbiAgICAgICAgYy5wdXNoKG5ldyBuLkNvbnRlbnRUeXBlKHYpKTtcbiAgICAgIGVsc2UgaWYgKG8gPT0gXCJtZXNzYWdlRGlnZXN0XCIpXG4gICAgICAgIGMucHVzaChuZXcgbi5NZXNzYWdlRGlnZXN0KHYpKTtcbiAgICAgIGVsc2UgaWYgKG8gPT0gXCJzaWduaW5nVGltZVwiKVxuICAgICAgICBjLnB1c2gobmV3IG4uU2lnbmluZ1RpbWUodikpO1xuICAgICAgZWxzZSBpZiAobyA9PSBcInNpZ25pbmdDZXJ0aWZpY2F0ZVwiKVxuICAgICAgICBjLnB1c2gobmV3IG4uU2lnbmluZ0NlcnRpZmljYXRlKHYpKTtcbiAgICAgIGVsc2UgaWYgKG8gPT0gXCJzaWduaW5nQ2VydGlmaWNhdGVWMlwiKVxuICAgICAgICBjLnB1c2gobmV3IG4uU2lnbmluZ0NlcnRpZmljYXRlVjIodikpO1xuICAgICAgZWxzZSBpZiAobyA9PSBcInNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXJcIilcbiAgICAgICAgYy5wdXNoKG5ldyBhLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcih2KSk7XG4gICAgICBlbHNlIGlmIChvID09IFwic2lnbmF0dXJlVGltZVN0YW1wXCIgfHwgbyA9PSBcInRpbWVTdGFtcFRva2VuXCIpXG4gICAgICAgIGMucHVzaChuZXcgYS5hc24xLmNhZGVzLlNpZ25hdHVyZVRpbWVTdGFtcCh2KSk7XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyB0KFwidW5rbm93biBhdHRyOiBcIiArIG8pO1xuICAgIH1cbiAgICB2YXIgbCA9IG5ldyBzKHsgYXJyYXk6IGMsIHNvcnRmbGFnOiB1IH0pO1xuICAgIHJldHVybiB0aGlzLmhUTFYgPSBsLnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuQXR0cmlidXRlTGlzdCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNtcy5TaWduZXJJbmZvID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVSSW50ZWdlciwgbiA9IGkuREVST2N0ZXRTdHJpbmcsIGggPSBpLkRFUlNlcXVlbmNlLCB1ID0gaS5ERVJUYWdnZWRPYmplY3QsIHAgPSBpLmNtcywgYyA9IHAuU2lnbmVySWRlbnRpZmllciwgeSA9IHAuQXR0cmlidXRlTGlzdDtcbiAgcC5Db250ZW50VHlwZSwgcC5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbywgcC5NZXNzYWdlRGlnZXN0LCBwLlNpZ25lZERhdGE7XG4gIHZhciB2ID0gaS54NTA5LCBvID0gdi5BbGdvcml0aG1JZGVudGlmaWVyLCBsID0gci5jcnlwdG8sIGYgPSBrO1xuICBwLlNpZ25lckluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkID0gdGhpcy5wYXJhbXMsIGcgPSBkLnNpZ2FsZywgUyA9IG5ldyB5KGQuc2F0dHJzKS50b2hleCgpLCBiID0gZi5nZXRLZXkoZC5zaWdua2V5KSwgRCA9IG5ldyBsLlNpZ25hdHVyZSh7IGFsZzogZyB9KTtcbiAgICBELmluaXQoYiksIEQudXBkYXRlSGV4KFMpO1xuICAgIHZhciBBID0gRC5zaWduKCk7XG4gICAgZC5zaWdoZXggPSBBO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGQgPSB0aGlzLnBhcmFtcywgZyA9IFtdO1xuICAgIGlmIChnLnB1c2gobmV3IHMoeyBpbnQ6IGQudmVyc2lvbiB9KSksIGcucHVzaChuZXcgYyhkLmlkKSksIGcucHVzaChuZXcgbyh7IG5hbWU6IGQuaGFzaGFsZyB9KSksIGQuc2F0dHJzICE9IG51bGwpIHtcbiAgICAgIHZhciBTID0gbmV3IHkoZC5zYXR0cnMpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZy5wdXNoKG5ldyB1KHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMSwgb2JqOiBTIH0pKTtcbiAgICAgIH0gY2F0Y2ggKEQpIHtcbiAgICAgICAgdGhyb3cgbmV3IHQoXCJzaSBzYXR0ciBlcnJvcjogXCIgKyBEKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGQuc2lnYWxnZmllbGQgIT0gbnVsbCA/IGcucHVzaChuZXcgbyh7IG5hbWU6IGQuc2lnYWxnZmllbGQgfSkpIDogZy5wdXNoKG5ldyBvKHsgbmFtZTogZC5zaWdhbGcgfSkpLCBkLnNpZ2hleCA9PSBudWxsICYmIGQuc2lnbmtleSAhPSBudWxsICYmIHRoaXMuc2lnbigpLCBnLnB1c2gobmV3IG4oeyBoZXg6IGQuc2lnaGV4IH0pKSwgZC51YXR0cnMgIT0gbnVsbCkge1xuICAgICAgdmFyIFMgPSBuZXcgeShkLnVhdHRycyk7XG4gICAgICB0cnkge1xuICAgICAgICBnLnB1c2gobmV3IHUoeyB0YWc6IFwiYTFcIiwgZXhwbGljaXQ6ICExLCBvYmo6IFMgfSkpO1xuICAgICAgfSBjYXRjaCAoQSkge1xuICAgICAgICB0aHJvdyBuZXcgdChcInNpIHVhdHRyIGVycm9yOiBcIiArIEEpO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgYiA9IG5ldyBoKHsgYXJyYXk6IGcgfSk7XG4gICAgcmV0dXJuIGIudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuU2lnbmVySW5mbywgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNtcy5FbmNhcHN1bGF0ZWRDb250ZW50SW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJUYWdnZWRPYmplY3QsIHMgPSByLkRFUlNlcXVlbmNlLCBuID0gci5ERVJPYmplY3RJZGVudGlmaWVyLCBoID0gci5ERVJPY3RldFN0cmluZywgdSA9IHIuY21zO1xuICB1LkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHAgPSB0aGlzLnBhcmFtcywgYyA9IFtdO1xuICAgIGlmIChjLnB1c2gobmV3IG4ocC50eXBlKSksIHAuY29udGVudCAhPSBudWxsICYmIChwLmNvbnRlbnQuaGV4ICE9IG51bGwgfHwgcC5jb250ZW50LnN0ciAhPSBudWxsKSAmJiBwLmlzRGV0YWNoZWQgIT0gITApIHtcbiAgICAgIHZhciB5ID0gbmV3IGgocC5jb250ZW50KSwgdiA9IG5ldyBpKHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiB5IH0pO1xuICAgICAgYy5wdXNoKHYpO1xuICAgIH1cbiAgICB2YXIgbyA9IG5ldyBzKHsgYXJyYXk6IGMgfSk7XG4gICAgcmV0dXJuIG8udG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24ocCkge1xuICAgIHRoaXMucGFyYW1zID0gcDtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuRW5jYXBzdWxhdGVkQ29udGVudEluZm8sIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuQ29udGVudEluZm8gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSVGFnZ2VkT2JqZWN0LCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IHIuREVST2JqZWN0SWRlbnRpZmllciwgaCA9IHIueDUwOTtcbiAgaC5PSUQubmFtZTJvYmosIGEuYXNuMS5jbXMuQ29udGVudEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IHRoaXMucGFyYW1zLCBwID0gW107XG4gICAgcC5wdXNoKG5ldyBuKHUudHlwZSkpO1xuICAgIHZhciBjID0gbmV3IGkoeyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICEwLCBvYmo6IHUub2JqIH0pO1xuICAgIHAucHVzaChjKTtcbiAgICB2YXIgeSA9IG5ldyBzKHsgYXJyYXk6IHAgfSk7XG4gICAgcmV0dXJuIHkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMucGFyYW1zID0gdTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuQ29udGVudEluZm8sIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuU2lnbmVkRGF0YSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICByLkFTTjFPYmplY3Q7XG4gIHZhciBpID0gci5ERVJJbnRlZ2VyLCBzID0gci5ERVJTZXQsIG4gPSByLkRFUlNlcXVlbmNlO1xuICByLkRFUlRhZ2dlZE9iamVjdDtcbiAgdmFyIGggPSByLmNtcywgdSA9IGguRW5jYXBzdWxhdGVkQ29udGVudEluZm8sIHAgPSBoLlNpZ25lckluZm8sIGMgPSBoLkNvbnRlbnRJbmZvLCB5ID0gaC5DZXJ0aWZpY2F0ZVNldCwgdiA9IGguUmV2b2NhdGlvbkluZm9DaG9pY2VzLCBvID0gci54NTA5LCBsID0gby5BbGdvcml0aG1JZGVudGlmaWVyO1xuICBhLmFzbjEuY21zLlNpZ25lZERhdGEuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuY2hlY2tBbmRGaXhQYXJhbSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmID0gdGhpcy5wYXJhbXM7XG4gICAgdGhpcy5fc2V0RGlnZXN0QWxncyhmKSwgdGhpcy5fc2V0Q29udGVudFR5cGVCeUVDb250ZW50KGYpLCB0aGlzLl9zZXRNZXNzYWdlRGlnZXN0QnlFQ29udGVudChmKSwgdGhpcy5fc2V0U2lnbmVySW5mb1ZlcnNpb24oZiksIHRoaXMuX3NldFNpZ25lZERhdGFWZXJzaW9uKGYpO1xuICB9LCB0aGlzLl9zZXREaWdlc3RBbGdzID0gZnVuY3Rpb24oZikge1xuICAgIGZvciAodmFyIGQgPSB7fSwgZyA9IGYuc2luZm9zLCBTID0gMDsgUyA8IGcubGVuZ3RoOyBTKyspIHtcbiAgICAgIHZhciBiID0gZ1tTXTtcbiAgICAgIGRbYi5oYXNoYWxnXSA9IDE7XG4gICAgfVxuICAgIGYuaGFzaGFsZ3MgPSBPYmplY3Qua2V5cyhkKS5zb3J0KCk7XG4gIH0sIHRoaXMuX3NldENvbnRlbnRUeXBlQnlFQ29udGVudCA9IGZ1bmN0aW9uKGYpIHtcbiAgICBmb3IgKHZhciBkID0gZi5lY29udGVudC50eXBlLCBnID0gZi5zaW5mb3MsIFMgPSAwOyBTIDwgZy5sZW5ndGg7IFMrKykge1xuICAgICAgdmFyIGIgPSBnW1NdLCBEID0gdGhpcy5fZ2V0QXR0clBhcmFtQnlOYW1lKGIsIFwiY29udGVudFR5cGVcIik7XG4gICAgICBELnR5cGUgPSBkO1xuICAgIH1cbiAgfSwgdGhpcy5fc2V0TWVzc2FnZURpZ2VzdEJ5RUNvbnRlbnQgPSBmdW5jdGlvbihmKSB7XG4gICAgdmFyIGQgPSBmLmVjb250ZW50O1xuICAgIGYuZWNvbnRlbnQudHlwZTtcbiAgICB2YXIgZyA9IGQuY29udGVudC5oZXg7XG4gICAgZyA9PSBudWxsICYmIGQudHlwZSA9PSBcImRhdGFcIiAmJiBkLmNvbnRlbnQuc3RyICE9IG51bGwgJiYgKGcgPSBQZShkLmNvbnRlbnQuc3RyKSk7XG4gICAgZm9yICh2YXIgUyA9IGYuc2luZm9zLCBiID0gMDsgYiA8IFMubGVuZ3RoOyBiKyspIHtcbiAgICAgIHZhciBEID0gU1tiXSwgQSA9IEQuaGFzaGFsZywgSSA9IHRoaXMuX2dldEF0dHJQYXJhbUJ5TmFtZShELCBcIm1lc3NhZ2VEaWdlc3RcIiksIG0gPSBhLmNyeXB0by5VdGlsLmhhc2hIZXgoZywgQSk7XG4gICAgICBJLmhleCA9IG07XG4gICAgfVxuICB9LCB0aGlzLl9nZXRBdHRyUGFyYW1CeU5hbWUgPSBmdW5jdGlvbihmLCBkKSB7XG4gICAgZm9yICh2YXIgZyA9IGYuc2F0dHJzLmFycmF5LCBTID0gMDsgUyA8IGcubGVuZ3RoOyBTKyspXG4gICAgICBpZiAoZ1tTXS5hdHRyID09IGQpXG4gICAgICAgIHJldHVybiBnW1NdO1xuICB9LCB0aGlzLl9zZXRTaWduZXJJbmZvVmVyc2lvbiA9IGZ1bmN0aW9uKGYpIHtcbiAgICBmb3IgKHZhciBkID0gZi5zaW5mb3MsIGcgPSAwOyBnIDwgZC5sZW5ndGg7IGcrKykge1xuICAgICAgdmFyIFMgPSBkW2ddLCBiID0gMTtcbiAgICAgIFMuaWQudHlwZSA9PSBcInNraWRcIiAmJiAoYiA9IDMpLCBTLnZlcnNpb24gPSBiO1xuICAgIH1cbiAgfSwgdGhpcy5fc2V0U2lnbmVkRGF0YVZlcnNpb24gPSBmdW5jdGlvbihmKSB7XG4gICAgdmFyIGQgPSB0aGlzLl9nZXRTaWduZWREYXRhVmVyc2lvbihmKTtcbiAgICBmLnZlcnNpb24gPSBkO1xuICB9LCB0aGlzLl9nZXRTaWduZWREYXRhVmVyc2lvbiA9IGZ1bmN0aW9uKGYpIHtcbiAgICBpZiAoZi5yZXZpbmZvcyAhPSBudWxsKVxuICAgICAgZm9yICh2YXIgZCA9IGYucmV2aW5mb3MsIGcgPSAwOyBnIDwgZC5sZW5ndGg7IGcrKykge1xuICAgICAgICB2YXIgUyA9IGRbZ107XG4gICAgICAgIGlmIChTLm9jc3AgIT0gbnVsbClcbiAgICAgICAgICByZXR1cm4gNTtcbiAgICAgIH1cbiAgICBmb3IgKHZhciBiID0gZi5zaW5mb3MsIGcgPSAwOyBnIDwgYi5sZW5ndGg7IGcrKykge1xuICAgICAgdmFyIEQgPSBmLnNpbmZvc1tnXTtcbiAgICAgIGlmIChELnZlcnNpb24gPT0gMylcbiAgICAgICAgcmV0dXJuIDM7XG4gICAgfVxuICAgIHJldHVybiBmLmVjb250ZW50LnR5cGUgIT0gXCJkYXRhXCIgPyAzIDogMTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmID0gdGhpcy5wYXJhbXM7XG4gICAgdGhpcy5nZXRFbmNvZGVkSGV4UHJlcGFyZSAhPSBudWxsICYmIHRoaXMuZ2V0RW5jb2RlZEhleFByZXBhcmUoKSwgZi5maXhlZCAhPSAhMCAmJiB0aGlzLmNoZWNrQW5kRml4UGFyYW0oKTtcbiAgICB2YXIgZCA9IFtdO1xuICAgIGQucHVzaChuZXcgaSh7IGludDogZi52ZXJzaW9uIH0pKTtcbiAgICBmb3IgKHZhciBnID0gW10sIFMgPSAwOyBTIDwgZi5oYXNoYWxncy5sZW5ndGg7IFMrKykge1xuICAgICAgdmFyIGIgPSBmLmhhc2hhbGdzW1NdO1xuICAgICAgZy5wdXNoKG5ldyBsKHsgbmFtZTogYiB9KSk7XG4gICAgfVxuICAgIGQucHVzaChuZXcgcyh7IGFycmF5OiBnIH0pKSwgZC5wdXNoKG5ldyB1KGYuZWNvbnRlbnQpKSwgZi5jZXJ0cyAhPSBudWxsICYmIGQucHVzaChuZXcgeShmLmNlcnRzKSksIGYucmV2aW5mb3MgIT0gbnVsbCAmJiBkLnB1c2gobmV3IHYoZi5yZXZpbmZvcykpO1xuICAgIGZvciAodmFyIEQgPSBbXSwgUyA9IDA7IFMgPCBmLnNpbmZvcy5sZW5ndGg7IFMrKykge1xuICAgICAgdmFyIEEgPSBmLnNpbmZvc1tTXTtcbiAgICAgIEQucHVzaChuZXcgcChBKSk7XG4gICAgfVxuICAgIGQucHVzaChuZXcgcyh7IGFycmF5OiBEIH0pKTtcbiAgICB2YXIgSSA9IG5ldyBuKHsgYXJyYXk6IGQgfSk7XG4gICAgcmV0dXJuIEkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRDb250ZW50SW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmID0gbmV3IGMoeyB0eXBlOiBcInNpZ25lZC1kYXRhXCIsIG9iajogdGhpcyB9KTtcbiAgICByZXR1cm4gZjtcbiAgfSwgdGhpcy5nZXRDb250ZW50SW5mb0VuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb250ZW50SW5mbygpLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLlNpZ25lZERhdGEsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuQ2VydGlmaWNhdGVTZXQgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5jbXMuQ2VydGlmaWNhdGVTZXQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IEVycm9yLCByID0gYS5hc24xLCBpID0gci5ERVJUYWdnZWRPYmplY3QsIHMgPSByLkRFUlNldCwgbiA9IHIuQVNOMU9iamVjdDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSB0aGlzLnBhcmFtcywgdSA9IFtdLCBwO1xuICAgIGlmIChoIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICBwID0gaDtcbiAgICBlbHNlIGlmIChoLmFycmF5ICE9IG51bGwpXG4gICAgICBwID0gaC5hcnJheTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgdChcImNlcnQgYXJyYXkgbm90IHNwZWNpZmllZFwiKTtcbiAgICBmb3IgKHZhciBjID0gMDsgYyA8IHAubGVuZ3RoOyBjKyspIHtcbiAgICAgIHZhciB5ID0gcFtjXSwgdiA9IGllKHkpLCBvID0gbmV3IG4oKTtcbiAgICAgIG8uaFRMViA9IHYsIHUucHVzaChvKTtcbiAgICB9XG4gICAgdmFyIGwgPSB7IGFycmF5OiB1IH07XG4gICAgaC5zb3J0ZmxhZyA9PSAhMSAmJiAobC5zb3J0ZmxhZyA9ICExKTtcbiAgICB2YXIgZiA9IG5ldyBzKGwpLCBkID0gbmV3IGkoeyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICExLCBvYmo6IGYgfSk7XG4gICAgcmV0dXJuIGQudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuQ2VydGlmaWNhdGVTZXQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuUmV2b2NhdGlvbkluZm9DaG9pY2VzID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuY21zLlJldm9jYXRpb25JbmZvQ2hvaWNlcy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKCF0IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwYXJhbXMgaXMgbm90IGFycmF5XCIpO1xuICAgIGZvciAodmFyIHIgPSBbXSwgaSA9IDA7IGkgPCB0Lmxlbmd0aDsgaSsrKVxuICAgICAgci5wdXNoKG5ldyBhLmFzbjEuY21zLlJldm9jYXRpb25JbmZvQ2hvaWNlKHRbaV0pKTtcbiAgICB2YXIgcyA9IGEuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QoeyB0YWc6IHsgdGFnaTogXCJhMVwiLCBvYmo6IHsgc2V0OiByIH0gfSB9KTtcbiAgICByZXR1cm4gcy50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5SZXZvY2F0aW9uSW5mb0Nob2ljZXMsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuUmV2b2NhdGlvbkluZm9DaG9pY2UgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5jbXMuUmV2b2NhdGlvbkluZm9DaG9pY2Uuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IHRoaXMucGFyYW1zO1xuICAgIGlmICh0LmNybCAhPSBudWxsICYmIHR5cGVvZiB0LmNybCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgciA9IHQuY3JsO1xuICAgICAgcmV0dXJuIHQuY3JsLmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xICYmIChyID0gaWUodC5jcmwpKSwgcjtcbiAgICB9IGVsc2UgaWYgKHQub2NzcCAhPSBudWxsKSB7XG4gICAgICB2YXIgaSA9IGEuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QoeyB0YWc6IHsgdGFnaTogXCJhMVwiLCBvYmo6IG5ldyBhLmFzbjEuY21zLk90aGVyUmV2b2NhdGlvbkZvcm1hdCh0KSB9IH0pO1xuICAgICAgcmV0dXJuIGkudG9oZXgoKTtcbiAgICB9IGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInByb3BlcnR5IGNybCBvciBvY3NwIHVuZGVmaW5lZFwiKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuUmV2b2NhdGlvbkluZm9DaG9pY2UsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuT3RoZXJSZXZvY2F0aW9uRm9ybWF0ID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuY21zLk90aGVyUmV2b2NhdGlvbkZvcm1hdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5BU04xVXRpbC5uZXdPYmplY3QsIG4gPSByLmxhbmcuU3RyaW5nLmlzSGV4O1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IHRoaXMucGFyYW1zO1xuICAgIGlmIChoLm9jc3AgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyB0KFwicHJvcGVydHkgb2NzcCBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIGlmICghbihoLm9jc3ApIHx8ICFWLmlzQVNOMUhFWChoLm9jc3ApKVxuICAgICAgdGhyb3cgbmV3IHQoXCJvY3NwIHZhbHVlIG5vdCBBU04uMSBoZXggc3RyaW5nXCIpO1xuICAgIHZhciB1ID0gcyh7IHNlcTogW3sgb2lkOiBcIjEuMy42LjEuNS41LjcuMTYuMlwiIH0sIHsgYXNuMTogeyB0bHY6IGgub2NzcCB9IH1dIH0pO1xuICAgIHJldHVybiB1LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLk90aGVyUmV2b2NhdGlvbkZvcm1hdCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNtcy5DTVNVdGlsID0gbmV3IGZ1bmN0aW9uKCkge1xufSgpO1xuYS5hc24xLmNtcy5DTVNVdGlsLm5ld1NpZ25lZERhdGEgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBuZXcgYS5hc24xLmNtcy5TaWduZWREYXRhKGUpO1xufTtcbmEuYXNuMS5jbXMuQ01TVXRpbC52ZXJpZnlTaWduZWREYXRhID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLmNtcztcbiAgaS5TaWduZXJJbmZvLCBpLlNpZ25lZERhdGEsIGkuU2lnbmluZ1RpbWUsIGkuU2lnbmluZ0NlcnRpZmljYXRlLCBpLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyO1xuICB2YXIgcyA9IHIuY2FkZXM7XG4gIHMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcjtcbiAgdmFyIG4gPSB0LmxhbmcuU3RyaW5nLmlzSGV4LCBoID0gViwgdSA9IGguZ2V0VmJ5TGlzdCwgcCA9IGguZ2V0VExWYnlMaXN0LCBjID0gaC5nZXRJZHhieUxpc3QsIHkgPSBoLmdldENoaWxkSWR4LCB2ID0gaC5nZXRUTFYsIG8gPSBoLm9pZG5hbWUsIGwgPSB0LmNyeXB0by5VdGlsLmhhc2hIZXg7XG4gIGUuY21zID09PSB2b2lkIDAgJiYgbihlLmNtcyk7XG4gIHZhciBmID0gZS5jbXMsIGQgPSBmdW5jdGlvbih3LCB4KSB7XG4gICAgZm9yICh2YXIgRiwgUCA9IDM7IFAgPCA2OyBQKyspXG4gICAgICBpZiAoRiA9IGModywgMCwgWzEsIDAsIFBdKSwgRiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHZhciBUID0gdy5zdWJzdHIoRiwgMik7XG4gICAgICAgIFQgPT09IFwiYTBcIiAmJiAoeC5jZXJ0c0lkeCA9IEYpLCBUID09PSBcImExXCIgJiYgKHgucmV2aW5mb3NJZHggPSBGKSwgVCA9PT0gXCIzMVwiICYmICh4LnNpZ25lcmluZm9zSWR4ID0gRik7XG4gICAgICB9XG4gIH0sIGcgPSBmdW5jdGlvbih3LCB4KSB7XG4gICAgdmFyIEYgPSB4LnNpZ25lcmluZm9zSWR4O1xuICAgIGlmIChGICE9PSB2b2lkIDApIHtcbiAgICAgIHZhciBQID0geSh3LCBGKTtcbiAgICAgIHguc2lnbmVySW5mb0lkeExpc3QgPSBQO1xuICAgICAgZm9yICh2YXIgVCA9IDA7IFQgPCBQLmxlbmd0aDsgVCsrKSB7XG4gICAgICAgIHZhciBIID0gUFtUXSwgQyA9IHsgaWR4OiBIIH07XG4gICAgICAgIFModywgQyksIHguc2lnbmVySW5mb3MucHVzaChDKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFMgPSBmdW5jdGlvbih3LCB4KSB7XG4gICAgdmFyIEYgPSB4LmlkeDtcbiAgICB4LnNpZ25lcmlkX2lzc3VlcjEgPSBwKHcsIEYsIFsxLCAwXSwgXCIzMFwiKSwgeC5zaWduZXJpZF9zZXJpYWwxID0gdSh3LCBGLCBbMSwgMV0sIFwiMDJcIiksIHguaGFzaGFsZyA9IG8odSh3LCBGLCBbMiwgMF0sIFwiMDZcIikpO1xuICAgIHZhciBQID0gYyh3LCBGLCBbM10sIFwiYTBcIik7XG4gICAgeC5pZHhTaWduZWRBdHRycyA9IFAsIGIodywgeCwgUCk7XG4gICAgdmFyIFQgPSB5KHcsIEYpLCBIID0gVC5sZW5ndGg7XG4gICAgaWYgKEggPCA2KVxuICAgICAgdGhyb3cgXCJtYWxmb3JtZWQgU2lnbmVySW5mb1wiO1xuICAgIHguc2lnYWxnID0gbyh1KHcsIEYsIFtIIC0gMiwgMF0sIFwiMDZcIikpLCB4LnNpZ3ZhbCA9IHUodywgRiwgW0ggLSAxXSwgXCIwNFwiKTtcbiAgfSwgYiA9IGZ1bmN0aW9uKHcsIHgsIEYpIHtcbiAgICB2YXIgUCA9IHkodywgRik7XG4gICAgeC5zaWduZWRBdHRySWR4TGlzdCA9IFA7XG4gICAgZm9yICh2YXIgVCA9IDA7IFQgPCBQLmxlbmd0aDsgVCsrKSB7XG4gICAgICB2YXIgSCA9IFBbVF0sIEMgPSB1KHcsIEgsIFswXSwgXCIwNlwiKSwgQjtcbiAgICAgIEMgPT09IFwiMmE4NjQ4ODZmNzBkMDEwOTA1XCIgPyAoQiA9IFcodSh3LCBILCBbMSwgMF0pKSwgeC5zYVNpZ25pbmdUaW1lID0gQikgOiBDID09PSBcIjJhODY0ODg2ZjcwZDAxMDkwNFwiICYmIChCID0gdSh3LCBILCBbMSwgMF0sIFwiMDRcIiksIHguc2FNZXNzYWdlRGlnZXN0ID0gQik7XG4gICAgfVxuICB9LCBEID0gZnVuY3Rpb24odywgeCkge1xuICAgIGlmICh1KHcsIDAsIFswXSwgXCIwNlwiKSAhPT0gXCIyYTg2NDg4NmY3MGQwMTA3MDJcIilcbiAgICAgIHJldHVybiB4O1xuICAgIHguY21zVHlwZSA9IFwic2lnbmVkRGF0YVwiLCB4LmVjb250ZW50ID0gdSh3LCAwLCBbMSwgMCwgMiwgMSwgMF0pLCBkKHcsIHgpLCB4LnNpZ25lckluZm9zID0gW10sIGcodywgeCk7XG4gIH0sIEEgPSBmdW5jdGlvbih3LCB4KSB7XG4gICAgZm9yICh2YXIgRiA9IHgucGFyc2Uuc2lnbmVySW5mb3MsIFAgPSBGLmxlbmd0aCwgVCA9ICEwLCBIID0gMDsgSCA8IFA7IEgrKykge1xuICAgICAgdmFyIEMgPSBGW0hdO1xuICAgICAgbSh3LCB4LCBDKSwgQy5pc1ZhbGlkIHx8IChUID0gITEpO1xuICAgIH1cbiAgICB4LmlzVmFsaWQgPSBUO1xuICB9LCBJID0gZnVuY3Rpb24odywgeCwgRiwgUCkge1xuICAgIHZhciBUID0geC5wYXJzZS5jZXJ0c0lkeCwgSDtcbiAgICBpZiAoeC5jZXJ0cyA9PT0gdm9pZCAwKSB7XG4gICAgICBIID0gW10sIHguY2VydGtleXMgPSBbXTtcbiAgICAgIGZvciAodmFyIEMgPSB5KHcsIFQpLCBCID0gMDsgQiA8IEMubGVuZ3RoOyBCKyspIHtcbiAgICAgICAgdmFyIE8gPSB2KHcsIENbQl0pLCBqID0gbmV3IEwoKTtcbiAgICAgICAgai5yZWFkQ2VydEhleChPKSwgSFtCXSA9IGosIHguY2VydGtleXNbQl0gPSBqLmdldFB1YmxpY0tleSgpO1xuICAgICAgfVxuICAgICAgeC5jZXJ0cyA9IEg7XG4gICAgfSBlbHNlXG4gICAgICBIID0geC5jZXJ0cztcbiAgICB4LmNjY2MgPSBILmxlbmd0aCwgeC5jY2NjaSA9IEMubGVuZ3RoO1xuICAgIGZvciAodmFyIEIgPSAwOyBCIDwgSC5sZW5ndGg7IEIrKykge1xuICAgICAgdmFyIGZlID0gai5nZXRJc3N1ZXJIZXgoKSwgWiA9IGouZ2V0U2VyaWFsTnVtYmVySGV4KCk7XG4gICAgICBGLnNpZ25lcmlkX2lzc3VlcjEgPT09IGZlICYmIEYuc2lnbmVyaWRfc2VyaWFsMSA9PT0gWiAmJiAoRi5jZXJ0a2V5X2lkeCA9IEIpO1xuICAgIH1cbiAgfSwgbSA9IGZ1bmN0aW9uKHcsIHgsIEYsIFApIHtcbiAgICBGLnZlcmlmeURldGFpbCA9IHt9O1xuICAgIHZhciBUID0gRi52ZXJpZnlEZXRhaWwsIEggPSB4LnBhcnNlLmVjb250ZW50LCBDID0gRi5oYXNoYWxnLCBCID0gRi5zYU1lc3NhZ2VEaWdlc3Q7XG4gICAgVC52YWxpZE1lc3NhZ2VEaWdlc3QgPSAhMSwgbChILCBDKSA9PT0gQiAmJiAoVC52YWxpZE1lc3NhZ2VEaWdlc3QgPSAhMCksIEkodywgeCwgRiksIFQudmFsaWRTaWduYXR1cmVWYWx1ZSA9ICExO1xuICAgIHZhciBPID0gRi5zaWdhbGcsIGogPSBcIjMxXCIgKyB2KHcsIEYuaWR4U2lnbmVkQXR0cnMpLnN1YnN0cigyKTtcbiAgICBGLnNpZ25lZGF0dHJzaGV4ID0gajtcbiAgICB2YXIgZmUgPSB4LmNlcnRzW0YuY2VydGtleV9pZHhdLmdldFB1YmxpY0tleSgpLCBaID0gbmV3IGEuY3J5cHRvLlNpZ25hdHVyZSh7IGFsZzogTyB9KTtcbiAgICBaLmluaXQoZmUpLCBaLnVwZGF0ZUhleChqKTtcbiAgICB2YXIgWCA9IFoudmVyaWZ5KEYuc2lndmFsKTtcbiAgICBULnZhbGlkU2lnbmF0dXJlVmFsdWVfaXNWYWxpZCA9IFgsIFggPT09ICEwICYmIChULnZhbGlkU2lnbmF0dXJlVmFsdWUgPSAhMCksIEYuaXNWYWxpZCA9ICExLCBULnZhbGlkTWVzc2FnZURpZ2VzdCAmJiBULnZhbGlkU2lnbmF0dXJlVmFsdWUgJiYgKEYuaXNWYWxpZCA9ICEwKTtcbiAgfSwgRSA9IHsgaXNWYWxpZDogITEsIHBhcnNlOiB7fSB9O1xuICByZXR1cm4gRChmLCBFLnBhcnNlKSwgQShmLCBFKSwgRTtcbn07XG5hLmFzbjEuY21zLkNNU1BhcnNlciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IEVycm9yLCB0ID0gTCwgciA9IG5ldyB0KCksIGkgPSBWLCBzID0gaS5nZXRWLCBuID0gaS5nZXRUTFY7XG4gIGkuZ2V0SWR4YnlMaXN0O1xuICB2YXIgaCA9IGkuZ2V0VExWYnlMaXN0LCB1ID0gaS5nZXRUTFZieUxpc3RFeCwgcCA9IGkuZ2V0VmJ5TGlzdCwgYyA9IGkuZ2V0VmJ5TGlzdEV4LCB5ID0gaS5nZXRDaGlsZElkeDtcbiAgdGhpcy5nZXRDTVNTaWduZWREYXRhID0gZnVuY3Rpb24odikge1xuICAgIHZhciBvID0gaCh2LCAwLCBbMSwgMF0pLCBsID0gdGhpcy5nZXRTaWduZWREYXRhKG8pO1xuICAgIHJldHVybiBsO1xuICB9LCB0aGlzLmdldFNpZ25lZERhdGEgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB5KHYsIDApLCBsID0ge30sIGYgPSBzKHYsIG9bMF0pLCBkID0gcGFyc2VJbnQoZiwgMTYpO1xuICAgIGwudmVyc2lvbiA9IGQ7XG4gICAgdmFyIGcgPSBuKHYsIG9bMV0pO1xuICAgIGwuaGFzaGFsZ3MgPSB0aGlzLmdldEhhc2hBbGdBcnJheShnKTtcbiAgICB2YXIgUyA9IG4odiwgb1syXSk7XG4gICAgbC5lY29udGVudCA9IHRoaXMuZ2V0RUNvbnRlbnQoUyk7XG4gICAgdmFyIGIgPSB1KHYsIDAsIFtcIlswXVwiXSk7XG4gICAgYiAhPSBudWxsICYmIChsLmNlcnRzID0gdGhpcy5nZXRDZXJ0aWZpY2F0ZVNldChiKSksIHUodiwgMCwgW1wiWzFdXCJdKTtcbiAgICB2YXIgRCA9IHUodiwgMCwgWzNdKTtcbiAgICByZXR1cm4gbC5zaW5mb3MgPSB0aGlzLmdldFNpZ25lckluZm9zKEQpLCBsO1xuICB9LCB0aGlzLmdldEhhc2hBbGdBcnJheSA9IGZ1bmN0aW9uKHYpIHtcbiAgICBmb3IgKHZhciBvID0geSh2LCAwKSwgbCA9IG5ldyB0KCksIGYgPSBbXSwgZCA9IDA7IGQgPCBvLmxlbmd0aDsgZCsrKSB7XG4gICAgICB2YXIgZyA9IG4odiwgb1tkXSksIFMgPSBsLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lKGcpO1xuICAgICAgZi5wdXNoKFMpO1xuICAgIH1cbiAgICByZXR1cm4gZjtcbiAgfSwgdGhpcy5nZXRFQ29udGVudCA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHt9LCBsID0gcCh2LCAwLCBbMF0pLCBmID0gcCh2LCAwLCBbMSwgMF0pO1xuICAgIHJldHVybiBvLnR5cGUgPSBhLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoVi5oZXh0b29pZHN0cihsKSksIG8uY29udGVudCA9IHsgaGV4OiBmIH0sIG87XG4gIH0sIHRoaXMuZ2V0U2lnbmVySW5mb3MgPSBmdW5jdGlvbih2KSB7XG4gICAgZm9yICh2YXIgbyA9IFtdLCBsID0geSh2LCAwKSwgZiA9IDA7IGYgPCBsLmxlbmd0aDsgZisrKSB7XG4gICAgICB2YXIgZCA9IG4odiwgbFtmXSksIGcgPSB0aGlzLmdldFNpZ25lckluZm8oZCk7XG4gICAgICBvLnB1c2goZyk7XG4gICAgfVxuICAgIHJldHVybiBvO1xuICB9LCB0aGlzLmdldFNpZ25lckluZm8gPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB7fSwgbCA9IHkodiwgMCksIGYgPSBpLmdldEludCh2LCBsWzBdLCAtMSk7XG4gICAgZiAhPSAtMSAmJiAoby52ZXJzaW9uID0gZik7XG4gICAgdmFyIGQgPSBuKHYsIGxbMV0pLCBnID0gdGhpcy5nZXRJc3N1ZXJBbmRTZXJpYWxOdW1iZXIoZCk7XG4gICAgby5pZCA9IGc7XG4gICAgdmFyIFMgPSBuKHYsIGxbMl0pLCBiID0gci5nZXRBbGdvcml0aG1JZGVudGlmaWVyTmFtZShTKTtcbiAgICBvLmhhc2hhbGcgPSBiO1xuICAgIHZhciBEID0gdSh2LCAwLCBbXCJbMF1cIl0pO1xuICAgIGlmIChEICE9IG51bGwpIHtcbiAgICAgIHZhciBBID0gdGhpcy5nZXRBdHRyaWJ1dGVMaXN0KEQpO1xuICAgICAgby5zYXR0cnMgPSBBO1xuICAgIH1cbiAgICB2YXIgSSA9IHUodiwgMCwgWzNdKSwgbSA9IHIuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWUoSSk7XG4gICAgby5zaWdhbGcgPSBtO1xuICAgIHZhciBFID0gYyh2LCAwLCBbNF0pO1xuICAgIG8uc2lnaGV4ID0gRTtcbiAgICB2YXIgdyA9IHUodiwgMCwgW1wiWzFdXCJdKTtcbiAgICBpZiAodyAhPSBudWxsKSB7XG4gICAgICB2YXIgeCA9IHRoaXMuZ2V0QXR0cmlidXRlTGlzdCh3KTtcbiAgICAgIG8udWF0dHJzID0geDtcbiAgICB9XG4gICAgcmV0dXJuIG87XG4gIH0sIHRoaXMuZ2V0U2lnbmVySWRlbnRpZmllciA9IGZ1bmN0aW9uKHYpIHtcbiAgICBpZiAodi5zdWJzdHIoMCwgMikgPT0gXCIzMFwiKVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0SXNzdWVyQW5kU2VyaWFsTnVtYmVyKHYpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIlNLSUQgb2Ygc2lnbmVySWRlbnRpZmllciBub3Qgc3VwcG9ydGVkXCIpO1xuICB9LCB0aGlzLmdldElzc3VlckFuZFNlcmlhbE51bWJlciA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHsgdHlwZTogXCJpc3NzblwiIH0sIGwgPSB5KHYsIDApLCBmID0gbih2LCBsWzBdKTtcbiAgICBvLmlzc3VlciA9IHIuZ2V0WDUwME5hbWUoZik7XG4gICAgdmFyIGQgPSBzKHYsIGxbMV0pO1xuICAgIHJldHVybiBvLnNlcmlhbCA9IHsgaGV4OiBkIH0sIG87XG4gIH0sIHRoaXMuZ2V0QXR0cmlidXRlTGlzdCA9IGZ1bmN0aW9uKHYpIHtcbiAgICBmb3IgKHZhciBvID0gW10sIGwgPSB5KHYsIDApLCBmID0gMDsgZiA8IGwubGVuZ3RoOyBmKyspIHtcbiAgICAgIHZhciBkID0gbih2LCBsW2ZdKSwgZyA9IHRoaXMuZ2V0QXR0cmlidXRlKGQpO1xuICAgICAgby5wdXNoKGcpO1xuICAgIH1cbiAgICByZXR1cm4geyBhcnJheTogbyB9O1xuICB9LCB0aGlzLmdldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHt9LCBsID0geSh2LCAwKSwgZiA9IGkuZ2V0T0lEKHYsIGxbMF0pLCBkID0gYS5hc24xLng1MDkuT0lELm9pZDJuYW1lKGYpO1xuICAgIG8uYXR0ciA9IGQ7XG4gICAgdmFyIGcgPSBuKHYsIGxbMV0pLCBTID0geShnLCAwKTtcbiAgICBpZiAoUy5sZW5ndGggPT0gMSlcbiAgICAgIG8udmFsaGV4ID0gbihnLCBTWzBdKTtcbiAgICBlbHNlIHtcbiAgICAgIGZvciAodmFyIGIgPSBbXSwgRCA9IDA7IEQgPCBTLmxlbmd0aDsgRCsrKVxuICAgICAgICBiLnB1c2gobihnLCBTW0RdKSk7XG4gICAgICBvLnZhbGhleCA9IGI7XG4gICAgfVxuICAgIHJldHVybiBkID09IFwiY29udGVudFR5cGVcIiA/IHRoaXMuc2V0Q29udGVudFR5cGUobykgOiBkID09IFwibWVzc2FnZURpZ2VzdFwiID8gdGhpcy5zZXRNZXNzYWdlRGlnZXN0KG8pIDogZCA9PSBcInNpZ25pbmdUaW1lXCIgPyB0aGlzLnNldFNpZ25pbmdUaW1lKG8pIDogZCA9PSBcInNpZ25pbmdDZXJ0aWZpY2F0ZVwiID8gdGhpcy5zZXRTaWduaW5nQ2VydGlmaWNhdGUobykgOiBkID09IFwic2lnbmluZ0NlcnRpZmljYXRlVjJcIiA/IHRoaXMuc2V0U2lnbmluZ0NlcnRpZmljYXRlVjIobykgOiBkID09IFwic2lnbmF0dXJlUG9saWN5SWRlbnRpZmllclwiICYmIHRoaXMuc2V0U2lnbmF0dXJlUG9saWN5SWRlbnRpZmllcihvKSwgbztcbiAgfSwgdGhpcy5zZXRDb250ZW50VHlwZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IGkuZ2V0T0lETmFtZSh2LnZhbGhleCwgMCwgbnVsbCk7XG4gICAgbyAhPSBudWxsICYmICh2LnR5cGUgPSBvLCBkZWxldGUgdi52YWxoZXgpO1xuICB9LCB0aGlzLnNldFNpZ25pbmdUaW1lID0gZnVuY3Rpb24odikge1xuICAgIHZhciBvID0gcyh2LnZhbGhleCwgMCksIGwgPSBXKG8pO1xuICAgIHYuc3RyID0gbCwgZGVsZXRlIHYudmFsaGV4O1xuICB9LCB0aGlzLnNldE1lc3NhZ2VEaWdlc3QgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSBzKHYudmFsaGV4LCAwKTtcbiAgICB2LmhleCA9IG8sIGRlbGV0ZSB2LnZhbGhleDtcbiAgfSwgdGhpcy5zZXRTaWduaW5nQ2VydGlmaWNhdGUgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB5KHYudmFsaGV4LCAwKTtcbiAgICBpZiAoby5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKHZhciBsID0gbih2LnZhbGhleCwgb1swXSksIGYgPSB5KGwsIDApLCBkID0gW10sIGcgPSAwOyBnIDwgZi5sZW5ndGg7IGcrKykge1xuICAgICAgICB2YXIgUyA9IG4obCwgZltnXSksIGIgPSB0aGlzLmdldEVTU0NlcnRJRChTKTtcbiAgICAgICAgZC5wdXNoKGIpO1xuICAgICAgfVxuICAgICAgdi5hcnJheSA9IGQ7XG4gICAgfVxuICAgIGlmIChvLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBEID0gbih2LnZhbGhleCwgb1sxXSk7XG4gICAgICB2LnBvbGhleCA9IEQ7XG4gICAgfVxuICAgIGRlbGV0ZSB2LnZhbGhleDtcbiAgfSwgdGhpcy5zZXRTaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyID0gZnVuY3Rpb24odikge1xuICAgIHZhciBvID0geSh2LnZhbGhleCwgMCk7XG4gICAgaWYgKG8ubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGwgPSBpLmdldE9JRCh2LnZhbGhleCwgb1swXSk7XG4gICAgICB2Lm9pZCA9IGw7XG4gICAgfVxuICAgIGlmIChvLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBmID0gbmV3IHQoKSwgZCA9IHkodi52YWxoZXgsIG9bMV0pLCBnID0gbih2LnZhbGhleCwgZFswXSksIFMgPSBmLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lKGcpO1xuICAgICAgdi5hbGcgPSBTO1xuICAgICAgdmFyIGIgPSBzKHYudmFsaGV4LCBkWzFdKTtcbiAgICAgIHYuaGFzaCA9IGI7XG4gICAgfVxuICAgIGRlbGV0ZSB2LnZhbGhleDtcbiAgfSwgdGhpcy5zZXRTaWduaW5nQ2VydGlmaWNhdGVWMiA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHkodi52YWxoZXgsIDApO1xuICAgIGlmIChvLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAodmFyIGwgPSBuKHYudmFsaGV4LCBvWzBdKSwgZiA9IHkobCwgMCksIGQgPSBbXSwgZyA9IDA7IGcgPCBmLmxlbmd0aDsgZysrKSB7XG4gICAgICAgIHZhciBTID0gbihsLCBmW2ddKSwgYiA9IHRoaXMuZ2V0RVNTQ2VydElEdjIoUyk7XG4gICAgICAgIGQucHVzaChiKTtcbiAgICAgIH1cbiAgICAgIHYuYXJyYXkgPSBkO1xuICAgIH1cbiAgICBpZiAoby5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgRCA9IG4odi52YWxoZXgsIG9bMV0pO1xuICAgICAgdi5wb2xoZXggPSBEO1xuICAgIH1cbiAgICBkZWxldGUgdi52YWxoZXg7XG4gIH0sIHRoaXMuZ2V0RVNTQ2VydElEID0gZnVuY3Rpb24odikge1xuICAgIHZhciBvID0ge30sIGwgPSB5KHYsIDApO1xuICAgIGlmIChsLmxlbmd0aCA+IDApIHtcbiAgICAgIHZhciBmID0gcyh2LCBsWzBdKTtcbiAgICAgIG8uaGFzaCA9IGY7XG4gICAgfVxuICAgIGlmIChsLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBkID0gbih2LCBsWzFdKSwgZyA9IHRoaXMuZ2V0SXNzdWVyU2VyaWFsKGQpO1xuICAgICAgZy5zZXJpYWwgIT0gbnVsbCAmJiAoby5zZXJpYWwgPSBnLnNlcmlhbCksIGcuaXNzdWVyICE9IG51bGwgJiYgKG8uaXNzdWVyID0gZy5pc3N1ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbztcbiAgfSwgdGhpcy5nZXRFU1NDZXJ0SUR2MiA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHt9LCBsID0geSh2LCAwKTtcbiAgICBpZiAobC5sZW5ndGggPCAxIHx8IDMgPCBsLmxlbmd0aClcbiAgICAgIHRocm93IG5ldyBlKFwid3JvbmcgbnVtYmVyIG9mIGVsZW1lbnRzXCIpO1xuICAgIHZhciBmID0gMDtcbiAgICBpZiAodi5zdWJzdHIobFswXSwgMikgPT0gXCIzMFwiKSB7XG4gICAgICB2YXIgZCA9IG4odiwgbFswXSk7XG4gICAgICBvLmFsZyA9IHIuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWUoZCksIGYrKztcbiAgICB9IGVsc2VcbiAgICAgIG8uYWxnID0gXCJzaGEyNTZcIjtcbiAgICB2YXIgZyA9IHModiwgbFtmXSk7XG4gICAgaWYgKG8uaGFzaCA9IGcsIGwubGVuZ3RoID4gZiArIDEpIHtcbiAgICAgIHZhciBTID0gbih2LCBsW2YgKyAxXSksIGIgPSB0aGlzLmdldElzc3VlclNlcmlhbChTKTtcbiAgICAgIG8uaXNzdWVyID0gYi5pc3N1ZXIsIG8uc2VyaWFsID0gYi5zZXJpYWw7XG4gICAgfVxuICAgIHJldHVybiBvO1xuICB9LCB0aGlzLmdldElzc3VlclNlcmlhbCA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHt9LCBsID0geSh2LCAwKSwgZiA9IG4odiwgbFswXSksIGQgPSByLmdldEdlbmVyYWxOYW1lcyhmKSwgZyA9IGRbMF0uZG47XG4gICAgby5pc3N1ZXIgPSBnO1xuICAgIHZhciBTID0gcyh2LCBsWzFdKTtcbiAgICByZXR1cm4gby5zZXJpYWwgPSB7IGhleDogUyB9LCBvO1xuICB9LCB0aGlzLmdldENlcnRpZmljYXRlU2V0ID0gZnVuY3Rpb24odikge1xuICAgIGZvciAodmFyIG8gPSB5KHYsIDApLCBsID0gW10sIGYgPSAwOyBmIDwgby5sZW5ndGg7IGYrKykge1xuICAgICAgdmFyIGQgPSBuKHYsIG9bZl0pO1xuICAgICAgaWYgKGQuc3Vic3RyKDAsIDIpID09IFwiMzBcIikge1xuICAgICAgICB2YXIgZyA9IGRlKGQsIFwiQ0VSVElGSUNBVEVcIik7XG4gICAgICAgIGwucHVzaChnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgYXJyYXk6IGwsIHNvcnRmbGFnOiAhMSB9O1xuICB9O1xufTtcbih0eXBlb2YgYSA+IFwidVwiIHx8ICFhKSAmJiAoYSA9IHt9KTtcbih0eXBlb2YgYS5hc24xID4gXCJ1XCIgfHwgIWEuYXNuMSkgJiYgKGEuYXNuMSA9IHt9KTtcbih0eXBlb2YgYS5hc24xLnRzcCA+IFwidVwiIHx8ICFhLmFzbjEudHNwKSAmJiAoYS5hc24xLnRzcCA9IHt9KTtcbmEuYXNuMS50c3AuVGltZVN0YW1wVG9rZW4gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIudHNwO1xuICBpLlRpbWVTdGFtcFRva2VuLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldEVuY29kZWRIZXhQcmVwYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSBuZXcgaS5UU1RJbmZvKHRoaXMucGFyYW1zLmVjb250ZW50LmNvbnRlbnQpO1xuICAgIHRoaXMucGFyYW1zLmVjb250ZW50LmNvbnRlbnQuaGV4ID0gcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLnRzcC5UaW1lU3RhbXBUb2tlbiwgYS5hc24xLmNtcy5TaWduZWREYXRhKTtcbmEuYXNuMS50c3AuVFNUSW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJTZXF1ZW5jZSwgcyA9IHIuREVSSW50ZWdlciwgbiA9IHIuREVSQm9vbGVhbiwgaCA9IHIuREVSR2VuZXJhbGl6ZWRUaW1lLCB1ID0gci5ERVJPYmplY3RJZGVudGlmaWVyLCBwID0gci5ERVJUYWdnZWRPYmplY3QsIGMgPSByLnRzcCwgeSA9IGMuTWVzc2FnZUltcHJpbnQsIHYgPSBjLkFjY3VyYWN5O1xuICByLng1MDkuWDUwME5hbWU7XG4gIHZhciBvID0gci54NTA5LkdlbmVyYWxOYW1lO1xuICBpZiAoYy5UU1RJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5kVmVyc2lvbiA9IG5ldyBzKHsgaW50OiAxIH0pLCB0aGlzLmRQb2xpY3kgPSBudWxsLCB0aGlzLmRNZXNzYWdlSW1wcmludCA9IG51bGwsIHRoaXMuZFNlcmlhbCA9IG51bGwsIHRoaXMuZEdlblRpbWUgPSBudWxsLCB0aGlzLmRBY2N1cmFjeSA9IG51bGwsIHRoaXMuZE9yZGVyaW5nID0gbnVsbCwgdGhpcy5kTm9uY2UgPSBudWxsLCB0aGlzLmRUc2EgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGwgPSBbdGhpcy5kVmVyc2lvbl07XG4gICAgaWYgKHRoaXMuZFBvbGljeSA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicG9saWN5IHNoYWxsIGJlIHNwZWNpZmllZC5cIik7XG4gICAgaWYgKGwucHVzaCh0aGlzLmRQb2xpY3kpLCB0aGlzLmRNZXNzYWdlSW1wcmludCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWVzc2FnZUltcHJpbnQgc2hhbGwgYmUgc3BlY2lmaWVkLlwiKTtcbiAgICBpZiAobC5wdXNoKHRoaXMuZE1lc3NhZ2VJbXByaW50KSwgdGhpcy5kU2VyaWFsID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzZXJpYWxOdW1iZXIgc2hhbGwgYmUgc3BlY2lmaWVkLlwiKTtcbiAgICBpZiAobC5wdXNoKHRoaXMuZFNlcmlhbCksIHRoaXMuZEdlblRpbWUgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImdlblRpbWUgc2hhbGwgYmUgc3BlY2lmaWVkLlwiKTtcbiAgICBsLnB1c2godGhpcy5kR2VuVGltZSksIHRoaXMuZEFjY3VyYWN5ICE9IG51bGwgJiYgbC5wdXNoKHRoaXMuZEFjY3VyYWN5KSwgdGhpcy5kT3JkZXJpbmcgIT0gbnVsbCAmJiBsLnB1c2godGhpcy5kT3JkZXJpbmcpLCB0aGlzLmROb25jZSAhPSBudWxsICYmIGwucHVzaCh0aGlzLmROb25jZSksIHRoaXMuZFRzYSAhPSBudWxsICYmIGwucHVzaCh0aGlzLmRUc2EpO1xuICAgIHZhciBmID0gbmV3IGkoeyBhcnJheTogbCB9KTtcbiAgICByZXR1cm4gdGhpcy5oVExWID0gZi50b2hleCgpLCB0aGlzLmhUTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCkge1xuICAgIGlmICh0eXBlb2YgZS5wb2xpY3kgPT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKCFlLnBvbGljeS5tYXRjaCgvXlswLTkuXSskLykpXG4gICAgICAgIHRocm93IFwicG9saWN5IHNoYWxsIGJlIG9pZCBsaWtlIDAuMS40LjEzNFwiO1xuICAgICAgdGhpcy5kUG9saWN5ID0gbmV3IHUoeyBvaWQ6IGUucG9saWN5IH0pO1xuICAgIH1cbiAgICBlLm1lc3NhZ2VJbXByaW50ICE9PSB2b2lkIDAgJiYgKHRoaXMuZE1lc3NhZ2VJbXByaW50ID0gbmV3IHkoZS5tZXNzYWdlSW1wcmludCkpLCBlLnNlcmlhbCAhPT0gdm9pZCAwICYmICh0aGlzLmRTZXJpYWwgPSBuZXcgcyhlLnNlcmlhbCkpLCBlLmdlblRpbWUgIT09IHZvaWQgMCAmJiAodGhpcy5kR2VuVGltZSA9IG5ldyBoKGUuZ2VuVGltZSkpLCBlLmFjY3VyYWN5ICE9PSB2b2lkIDAgJiYgKHRoaXMuZEFjY3VyYWN5ID0gbmV3IHYoZS5hY2N1cmFjeSkpLCBlLm9yZGVyaW5nICE9PSB2b2lkIDAgJiYgZS5vcmRlcmluZyA9PSAhMCAmJiAodGhpcy5kT3JkZXJpbmcgPSBuZXcgbigpKSwgZS5ub25jZSAhPT0gdm9pZCAwICYmICh0aGlzLmROb25jZSA9IG5ldyBzKGUubm9uY2UpKSwgZS50c2EgIT09IHZvaWQgMCAmJiAodGhpcy5kVHNhID0gbmV3IHAoeyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICEwLCBvYmo6IG5ldyBvKHsgZG46IGUudHNhIH0pIH0pKTtcbiAgfVxufTtcbk4oYS5hc24xLnRzcC5UU1RJbmZvLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEudHNwLkFjY3VyYWN5ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkFTTjFVdGlsLm5ld09iamVjdDtcbiAgci50c3AuQWNjdXJhY3kuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcyA9IHRoaXMucGFyYW1zLCBuID0gW107XG4gICAgcmV0dXJuIHMuc2Vjb25kcyAhPSBudWxsICYmIHR5cGVvZiBzLnNlY29uZHMgPT0gXCJudW1iZXJcIiAmJiBuLnB1c2goeyBpbnQ6IHMuc2Vjb25kcyB9KSwgcy5taWxsaXMgIT0gbnVsbCAmJiB0eXBlb2Ygcy5taWxsaXMgPT0gXCJudW1iZXJcIiAmJiBuLnB1c2goeyB0YWc6IHsgdGFnaTogXCI4MFwiLCBvYmo6IHsgaW50OiBzLm1pbGxpcyB9IH0gfSksIHMubWljcm9zICE9IG51bGwgJiYgdHlwZW9mIHMubWljcm9zID09IFwibnVtYmVyXCIgJiYgbi5wdXNoKHsgdGFnOiB7IHRhZ2k6IFwiODFcIiwgb2JqOiB7IGludDogcy5taWNyb3MgfSB9IH0pLCBpKHsgc2VxOiBuIH0pLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEudHNwLkFjY3VyYWN5LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEudHNwLk1lc3NhZ2VJbXByaW50ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5ERVJPY3RldFN0cmluZywgbiA9IHIueDUwOSwgaCA9IG4uQWxnb3JpdGhtSWRlbnRpZmllcjtcbiAgci50c3AuTWVzc2FnZUltcHJpbnQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IHRoaXMucGFyYW1zLCBwID0gbmV3IGgoeyBuYW1lOiB1LmFsZyB9KSwgYyA9IG5ldyBzKHsgaGV4OiB1Lmhhc2ggfSksIHkgPSBuZXcgaSh7IGFycmF5OiBbcCwgY10gfSk7XG4gICAgcmV0dXJuIHkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS50c3AuTWVzc2FnZUltcHJpbnQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS50c3AuVGltZVN0YW1wUmVxID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5ERVJJbnRlZ2VyLCBuID0gci5ERVJCb29sZWFuO1xuICByLkFTTjFPYmplY3Q7XG4gIHZhciBoID0gci5ERVJPYmplY3RJZGVudGlmaWVyLCB1ID0gci50c3AsIHAgPSB1Lk1lc3NhZ2VJbXByaW50O1xuICB1LlRpbWVTdGFtcFJlcS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjID0gdGhpcy5wYXJhbXMsIHkgPSBbXTtcbiAgICB5LnB1c2gobmV3IHMoeyBpbnQ6IDEgfSkpLCBjLm1lc3NhZ2VJbXByaW50IGluc3RhbmNlb2YgYS5hc24xLkFTTjFPYmplY3QgPyB5LnB1c2goYy5tZXNzYWdlSW1wcmludCkgOiB5LnB1c2gobmV3IHAoYy5tZXNzYWdlSW1wcmludCkpLCBjLnBvbGljeSAhPSBudWxsICYmIHkucHVzaChuZXcgaChjLnBvbGljeSkpLCBjLm5vbmNlICE9IG51bGwgJiYgeS5wdXNoKG5ldyBzKGMubm9uY2UpKSwgYy5jZXJ0cmVxID09ICEwICYmIHkucHVzaChuZXcgbigpKTtcbiAgICB2YXIgdiA9IG5ldyBpKHsgYXJyYXk6IHkgfSk7XG4gICAgcmV0dXJuIHYudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS50c3AuVGltZVN0YW1wUmVxLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEudHNwLlRpbWVTdGFtcFJlc3AgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSU2VxdWVuY2U7XG4gIHIuQVNOMU9iamVjdDtcbiAgdmFyIHMgPSByLnRzcCwgbiA9IHMuUEtJU3RhdHVzSW5mbztcbiAgcy5UaW1lU3RhbXBSZXNwLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSB0aGlzLnBhcmFtcywgdSA9IFtdO1xuICAgIGlmIChoLmVjb250ZW50ICE9IG51bGwgfHwgaC50c3QgIT0gbnVsbClcbiAgICAgIGlmIChoLnN0YXR1c2luZm8gIT0gbnVsbCA/IHUucHVzaChuZXcgbihoLnN0YXR1c2luZm8pKSA6IHUucHVzaChuZXcgbihcImdyYW50ZWRcIikpLCBoLmVjb250ZW50ICE9IG51bGwpXG4gICAgICAgIHUucHVzaChuZXcgcy5UaW1lU3RhbXBUb2tlbihoKS5nZXRDb250ZW50SW5mbygpKTtcbiAgICAgIGVsc2UgaWYgKGgudHN0IGluc3RhbmNlb2Ygci5BU04xT2JqZWN0KVxuICAgICAgICB1LnB1c2goaC50c3QpO1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbXByb3BlciBtZW1iZXIgdHN0IHZhbHVlXCIpO1xuICAgIGVsc2UgaWYgKGguc3RhdHVzaW5mbyAhPSBudWxsKVxuICAgICAgdS5wdXNoKG5ldyBuKGguc3RhdHVzaW5mbykpO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInBhcmFtZXRlciBmb3IgdG9rZW4gbm9yIHN0YXR1c2luZm8gbm90IHNwZWNpZmllZFwiKTtcbiAgICB2YXIgcCA9IG5ldyBpKHsgYXJyYXk6IHUgfSk7XG4gICAgcmV0dXJuIHAudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS50c3AuVGltZVN0YW1wUmVzcCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLnRzcC5QS0lTdGF0dXNJbmZvID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVSU2VxdWVuY2UsIG4gPSBpLnRzcCwgaCA9IG4uUEtJU3RhdHVzLCB1ID0gbi5QS0lGcmVlVGV4dCwgcCA9IG4uUEtJRmFpbHVyZUluZm87XG4gIG4uUEtJU3RhdHVzSW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjID0gdGhpcy5wYXJhbXMsIHkgPSBbXTtcbiAgICBpZiAodHlwZW9mIGMgPT0gXCJzdHJpbmdcIilcbiAgICAgIHkucHVzaChuZXcgaChjKSk7XG4gICAgZWxzZSB7XG4gICAgICBpZiAoYy5zdGF0dXMgPT0gbnVsbClcbiAgICAgICAgdGhyb3cgbmV3IHQoXCJwcm9wZXJ0eSAnc3RhdHVzJyB1bnNwZWNpZmllZFwiKTtcbiAgICAgIHkucHVzaChuZXcgaChjLnN0YXR1cykpLCBjLnN0YXR1c3N0ciAhPSBudWxsICYmIHkucHVzaChuZXcgdShjLnN0YXR1c3N0cikpLCBjLmZhaWxpbmZvICE9IG51bGwgJiYgeS5wdXNoKG5ldyBwKGMuZmFpbGluZm8pKTtcbiAgICB9XG4gICAgdmFyIHYgPSBuZXcgcyh7IGFycmF5OiB5IH0pO1xuICAgIHJldHVybiB2LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEudHNwLlBLSVN0YXR1c0luZm8sIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS50c3AuUEtJU3RhdHVzID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVSSW50ZWdlciwgbiA9IGkudHNwO1xuICBuLlBLSVN0YXR1cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciBoID0geyBncmFudGVkOiAwLCBncmFudGVkV2l0aE1vZHM6IDEsIHJlamVjdGlvbjogMiwgd2FpdGluZzogMywgcmV2b2NhdGlvbldhcm5pbmc6IDQsIHJldm9jYXRpb25Ob3RpZmljYXRpb246IDUgfTtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcywgcDtcbiAgICBpZiAodHlwZW9mIHUgPT0gXCJzdHJpbmdcIilcbiAgICAgIHRyeSB7XG4gICAgICAgIHAgPSBoW3VdO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHRocm93IG5ldyB0KFwidW5kZWZpbmVkIG5hbWU6IFwiICsgdSk7XG4gICAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHUgPT0gXCJudW1iZXJcIilcbiAgICAgIHAgPSB1O1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyB0KFwidW5zdXBwb3J0ZWQgcGFyYW1zXCIpO1xuICAgIHJldHVybiBuZXcgcyh7IGludDogcCB9KS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLnRzcC5QS0lTdGF0dXMsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS50c3AuUEtJRnJlZVRleHQgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5ERVJTZXF1ZW5jZSwgbiA9IGkuREVSVVRGOFN0cmluZywgaCA9IGkudHNwO1xuICBoLlBLSUZyZWVUZXh0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcztcbiAgICBpZiAoIXUgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgIHRocm93IG5ldyB0KFwid3JvbmcgcGFyYW1zOiBub3QgYXJyYXlcIik7XG4gICAgZm9yICh2YXIgcCA9IFtdLCBjID0gMDsgYyA8IHUubGVuZ3RoOyBjKyspXG4gICAgICBwLnB1c2gobmV3IG4oeyBzdHI6IHVbY10gfSkpO1xuICAgIHZhciB5ID0gbmV3IHMoeyBhcnJheTogcCB9KTtcbiAgICByZXR1cm4geS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLnRzcC5QS0lGcmVlVGV4dCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLnRzcC5QS0lGYWlsdXJlSW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUkJpdFN0cmluZywgbiA9IGkudHNwLCBoID0gbi5QS0lGYWlsdXJlSW5mbywgdSA9IHsgYmFkQWxnOiAwLCBiYWRSZXF1ZXN0OiAyLCBiYWREYXRhRm9ybWF0OiA1LCB0aW1lTm90QXZhaWxhYmxlOiAxNCwgdW5hY2NlcHRlZFBvbGljeTogMTUsIHVuYWNjZXB0ZWRFeHRlbnNpb246IDE2LCBhZGRJbmZvTm90QXZhaWxhYmxlOiAxNywgc3lzdGVtRmFpbHVyZTogMjUgfTtcbiAgaC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRCaW5WYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gdGhpcy5wYXJhbXMsIGMgPSAwO1xuICAgIGlmICh0eXBlb2YgcCA9PSBcIm51bWJlclwiICYmIDAgPD0gcCAmJiBwIDw9IDI1KSB7XG4gICAgICBjIHw9IDEgPDwgcDtcbiAgICAgIGZvciAodmFyIHkgPSBjLnRvU3RyaW5nKDIpLCB2ID0gXCJcIiwgbyA9IHkubGVuZ3RoIC0gMTsgbyA+PSAwOyBvLS0pXG4gICAgICAgIHYgKz0geVtvXTtcbiAgICAgIHJldHVybiB2O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHAgPT0gXCJzdHJpbmdcIiAmJiB1W3BdICE9IG51bGwpXG4gICAgICAgIHJldHVybiBydChbcF0sIHUpO1xuICAgICAgaWYgKHR5cGVvZiBwID09IFwib2JqZWN0XCIgJiYgcC5sZW5ndGggIT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHJ0KHAsIHUpO1xuICAgICAgdGhyb3cgbmV3IHQoXCJ3cm9uZyBwYXJhbXNcIik7XG4gICAgfVxuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wYXJhbXM7XG4gICAgdmFyIHAgPSB0aGlzLmdldEJpblZhbHVlKCk7XG4gICAgcmV0dXJuIG5ldyBzKHsgYmluOiBwIH0pLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEudHNwLlBLSUZhaWx1cmVJbmZvLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEudHNwLkFic3RyYWN0VFNBQWRhcHRlciA9IGZ1bmN0aW9uKGUpIHtcbiAgdGhpcy5nZXRUU1RIZXggPSBmdW5jdGlvbih0LCByKSB7XG4gICAgdGhyb3cgXCJub3QgaW1wbGVtZW50ZWQgeWV0XCI7XG4gIH07XG59O1xuYS5hc24xLnRzcC5TaW1wbGVUU0FBZGFwdGVyID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLnRzcCwgcyA9IHQuY3J5cHRvLlV0aWwuaGFzaEhleDtcbiAgaS5TaW1wbGVUU0FBZGFwdGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNlcmlhbCA9IDAsIHRoaXMuZ2V0VFNUSGV4ID0gZnVuY3Rpb24obiwgaCkge1xuICAgIHZhciB1ID0gcyhuLCBoKTtcbiAgICB0aGlzLnBhcmFtcy5lY29udGVudC5jb250ZW50Lm1lc3NhZ2VJbXByaW50ID0geyBhbGc6IGgsIGhhc2g6IHUgfSwgdGhpcy5wYXJhbXMuZWNvbnRlbnQuY29udGVudC5zZXJpYWwgPSB7IGludDogdGhpcy5zZXJpYWwrKyB9O1xuICAgIHZhciBwID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMWU5KTtcbiAgICB0aGlzLnBhcmFtcy5lY29udGVudC5jb250ZW50Lm5vbmNlID0geyBpbnQ6IHAgfTtcbiAgICB2YXIgYyA9IG5ldyBpLlRpbWVTdGFtcFRva2VuKHRoaXMucGFyYW1zKTtcbiAgICByZXR1cm4gYy5nZXRDb250ZW50SW5mb0VuY29kZWRIZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLnRzcC5TaW1wbGVUU0FBZGFwdGVyLCBhLmFzbjEudHNwLkFic3RyYWN0VFNBQWRhcHRlcik7XG5hLmFzbjEudHNwLkZpeGVkVFNBQWRhcHRlciA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci50c3AsIHMgPSB0LmNyeXB0by5VdGlsLmhhc2hIZXg7XG4gIGkuRml4ZWRUU0FBZGFwdGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldFRTVEhleCA9IGZ1bmN0aW9uKG4sIGgpIHtcbiAgICB2YXIgdSA9IHMobiwgaCk7XG4gICAgdGhpcy5wYXJhbXMuZWNvbnRlbnQuY29udGVudC5tZXNzYWdlSW1wcmludCA9IHsgYWxnOiBoLCBoYXNoOiB1IH07XG4gICAgdmFyIHAgPSBuZXcgaS5UaW1lU3RhbXBUb2tlbih0aGlzLnBhcmFtcyk7XG4gICAgcmV0dXJuIHAuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS50c3AuRml4ZWRUU0FBZGFwdGVyLCBhLmFzbjEudHNwLkFic3RyYWN0VFNBQWRhcHRlcik7XG5hLmFzbjEudHNwLlRTUFV0aWwgPSBuZXcgZnVuY3Rpb24oKSB7XG59KCk7XG5hLmFzbjEudHNwLlRTUFV0aWwubmV3VGltZVN0YW1wVG9rZW4gPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBuZXcgYS5hc24xLnRzcC5UaW1lU3RhbXBUb2tlbihlKTtcbn07XG5hLmFzbjEudHNwLlRTUFV0aWwucGFyc2VUaW1lU3RhbXBSZXEgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gbmV3IGEuYXNuMS50c3AuVFNQUGFyc2VyKCk7XG4gIHJldHVybiB0LmdldFRpbWVTdGFtcFJlcShlKTtcbn07XG5hLmFzbjEudHNwLlRTUFV0aWwucGFyc2VNZXNzYWdlSW1wcmludCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBuZXcgYS5hc24xLnRzcC5UU1BQYXJzZXIoKTtcbiAgcmV0dXJuIHQuZ2V0TWVzc2FnZUltcHJpbnQoZSk7XG59O1xuYS5hc24xLnRzcC5UU1BQYXJzZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBMLCB0ID0gbmV3IGUoKSwgciA9IFYsIGkgPSByLmdldFYsIHMgPSByLmdldFRMViwgbiA9IHIuZ2V0SWR4YnlMaXN0O1xuICByLmdldFRMVmJ5TGlzdEV4O1xuICB2YXIgaCA9IHIuZ2V0Q2hpbGRJZHgsIHUgPSBbXCJncmFudGVkXCIsIFwiZ3JhbnRlZFdpdGhNb2RzXCIsIFwicmVqZWN0aW9uXCIsIFwid2FpdGluZ1wiLCBcInJldm9jYXRpb25XYXJuaW5nXCIsIFwicmV2b2NhdGlvbk5vdGlmaWNhdGlvblwiXSwgcCA9IHsgMDogXCJiYWRBbGdcIiwgMjogXCJiYWRSZXF1ZXN0XCIsIDU6IFwiYmFkRGF0YUZvcm1hdFwiLCAxNDogXCJ0aW1lTm90QXZhaWxhYmxlXCIsIDE1OiBcInVuYWNjZXB0ZWRQb2xpY3lcIiwgMTY6IFwidW5hY2NlcHRlZEV4dGVuc2lvblwiLCAxNzogXCJhZGRJbmZvTm90QXZhaWxhYmxlXCIsIDI1OiBcInN5c3RlbUZhaWx1cmVcIiB9O1xuICB0aGlzLmdldFJlc3BvbnNlID0gZnVuY3Rpb24oYykge1xuICAgIHZhciB5ID0gaChjLCAwKTtcbiAgICBpZiAoeS5sZW5ndGggPT0gMSlcbiAgICAgIHJldHVybiB0aGlzLmdldFBLSVN0YXR1c0luZm8ocyhjLCB5WzBdKSk7XG4gICAgaWYgKHkubGVuZ3RoID4gMSkge1xuICAgICAgdmFyIHYgPSB0aGlzLmdldFBLSVN0YXR1c0luZm8ocyhjLCB5WzBdKSksIG8gPSBzKGMsIHlbMV0pLCBsID0gdGhpcy5nZXRUb2tlbihvKTtcbiAgICAgIHJldHVybiBsLnN0YXR1c2luZm8gPSB2LCBsO1xuICAgIH1cbiAgfSwgdGhpcy5nZXRUb2tlbiA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgeSA9IG5ldyBhLmFzbjEuY21zLkNNU1BhcnNlcigpLCB2ID0geS5nZXRDTVNTaWduZWREYXRhKGMpO1xuICAgIHJldHVybiB0aGlzLnNldFRTVEluZm8odiksIHY7XG4gIH0sIHRoaXMuc2V0VFNUSW5mbyA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgeSA9IGMuZWNvbnRlbnQ7XG4gICAgaWYgKHkudHlwZSA9PSBcInRzdGluZm9cIikge1xuICAgICAgdmFyIHYgPSB5LmNvbnRlbnQuaGV4LCBvID0gdGhpcy5nZXRUU1RJbmZvKHYpO1xuICAgICAgeS5jb250ZW50ID0gbztcbiAgICB9XG4gIH0sIHRoaXMuZ2V0VFNUSW5mbyA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgeSA9IHt9LCB2ID0gaChjLCAwKSwgbyA9IGkoYywgdlsxXSk7XG4gICAgeS5wb2xpY3kgPSBmdChvKTtcbiAgICB2YXIgbCA9IHMoYywgdlsyXSk7XG4gICAgeS5tZXNzYWdlSW1wcmludCA9IHRoaXMuZ2V0TWVzc2FnZUltcHJpbnQobCk7XG4gICAgdmFyIGYgPSBpKGMsIHZbM10pO1xuICAgIHkuc2VyaWFsID0geyBoZXg6IGYgfTtcbiAgICB2YXIgZCA9IGkoYywgdls0XSk7XG4gICAgeS5nZW5UaW1lID0geyBzdHI6IFcoZCkgfTtcbiAgICB2YXIgZyA9IDA7XG4gICAgaWYgKHYubGVuZ3RoID4gNSAmJiBjLnN1YnN0cih2WzVdLCAyKSA9PSBcIjMwXCIpIHtcbiAgICAgIHZhciBTID0gcyhjLCB2WzVdKTtcbiAgICAgIHkuYWNjdXJhY3kgPSB0aGlzLmdldEFjY3VyYWN5KFMpLCBnKys7XG4gICAgfVxuICAgIGlmICh2Lmxlbmd0aCA+IDUgKyBnICYmIGMuc3Vic3RyKHZbNSArIGddLCAyKSA9PSBcIjAxXCIpIHtcbiAgICAgIHZhciBiID0gaShjLCB2WzUgKyBnXSk7XG4gICAgICBiID09IFwiZmZcIiAmJiAoeS5vcmRlcmluZyA9ICEwKSwgZysrO1xuICAgIH1cbiAgICBpZiAodi5sZW5ndGggPiA1ICsgZyAmJiBjLnN1YnN0cih2WzUgKyBnXSwgMikgPT0gXCIwMlwiKSB7XG4gICAgICB2YXIgRCA9IGkoYywgdls1ICsgZ10pO1xuICAgICAgeS5ub25jZSA9IHsgaGV4OiBEIH0sIGcrKztcbiAgICB9XG4gICAgaWYgKHYubGVuZ3RoID4gNSArIGcgJiYgYy5zdWJzdHIodls1ICsgZ10sIDIpID09IFwiYTBcIikge1xuICAgICAgdmFyIEEgPSBzKGMsIHZbNSArIGddKTtcbiAgICAgIEEgPSBcIjMwXCIgKyBBLnN1YnN0cigyKSwgcEdlbmVyYWxOYW1lcyA9IHQuZ2V0R2VuZXJhbE5hbWVzKEEpO1xuICAgICAgdmFyIEkgPSBwR2VuZXJhbE5hbWVzWzBdLmRuO1xuICAgICAgeS50c2EgPSBJLCBnKys7XG4gICAgfVxuICAgIGlmICh2Lmxlbmd0aCA+IDUgKyBnICYmIGMuc3Vic3RyKHZbNSArIGddLCAyKSA9PSBcImExXCIpIHtcbiAgICAgIHZhciBtID0gcyhjLCB2WzUgKyBnXSk7XG4gICAgICBtID0gXCIzMFwiICsgbS5zdWJzdHIoMik7XG4gICAgICB2YXIgRSA9IHQuZ2V0RXh0UGFyYW1BcnJheShtKTtcbiAgICAgIHkuZXh0ID0gRSwgZysrO1xuICAgIH1cbiAgICByZXR1cm4geTtcbiAgfSwgdGhpcy5nZXRBY2N1cmFjeSA9IGZ1bmN0aW9uKGMpIHtcbiAgICBmb3IgKHZhciB5ID0ge30sIHYgPSBoKGMsIDApLCBvID0gMDsgbyA8IHYubGVuZ3RoOyBvKyspIHtcbiAgICAgIHZhciBsID0gYy5zdWJzdHIodltvXSwgMiksIGYgPSBpKGMsIHZbb10pLCBkID0gcGFyc2VJbnQoZiwgMTYpO1xuICAgICAgbCA9PSBcIjAyXCIgPyB5LnNlY29uZHMgPSBkIDogbCA9PSBcIjgwXCIgPyB5Lm1pbGxpcyA9IGQgOiBsID09IFwiODFcIiAmJiAoeS5taWNyb3MgPSBkKTtcbiAgICB9XG4gICAgcmV0dXJuIHk7XG4gIH0sIHRoaXMuZ2V0TWVzc2FnZUltcHJpbnQgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYgKGMuc3Vic3RyKDAsIDIpICE9IFwiMzBcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImhlYWQgb2YgbWVzc2FnZUltcHJpbnQgaGV4IHNoYWxsIGJlIHgzMFwiKTtcbiAgICB2YXIgeSA9IHt9O1xuICAgIGgoYywgMCk7XG4gICAgdmFyIHYgPSBuKGMsIDAsIFswLCAwXSksIG8gPSBpKGMsIHYpLCBsID0gci5oZXh0b29pZHN0cihvKSwgZiA9IGEuYXNuMS54NTA5Lk9JRC5vaWQybmFtZShsKTtcbiAgICBpZiAoZiA9PSBcIlwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaGFzaEFsZyBuYW1lIHVuZGVmaW5lZDogXCIgKyBsKTtcbiAgICB2YXIgZCA9IGYsIGcgPSBuKGMsIDAsIFsxXSk7XG4gICAgcmV0dXJuIHkuYWxnID0gZCwgeS5oYXNoID0gaShjLCBnKSwgeTtcbiAgfSwgdGhpcy5nZXRQS0lTdGF0dXNJbmZvID0gZnVuY3Rpb24oYykge1xuICAgIHZhciB5ID0ge30sIHYgPSBoKGMsIDApLCBvID0gMDtcbiAgICB0cnkge1xuICAgICAgdmFyIGwgPSBpKGMsIHZbMF0pLCBmID0gcGFyc2VJbnQobCwgMTYpO1xuICAgICAgeS5zdGF0dXMgPSB1W2ZdO1xuICAgIH0gY2F0Y2gge1xuICAgIH1cbiAgICBpZiAodi5sZW5ndGggPiAxICYmIGMuc3Vic3RyKHZbMV0sIDIpID09IFwiMzBcIikge1xuICAgICAgdmFyIGQgPSBzKGMsIHZbMV0pO1xuICAgICAgeS5zdGF0dXNzdHIgPSB0aGlzLmdldFBLSUZyZWVUZXh0KGQpLCBvKys7XG4gICAgfVxuICAgIGlmICh2Lmxlbmd0aCA+IG8gJiYgYy5zdWJzdHIodlsxICsgb10sIDIpID09IFwiMDNcIikge1xuICAgICAgdmFyIGcgPSBzKGMsIHZbMSArIG9dKTtcbiAgICAgIHkuZmFpbGluZm8gPSB0aGlzLmdldFBLSUZhaWx1cmVJbmZvKGcpO1xuICAgIH1cbiAgICByZXR1cm4geTtcbiAgfSwgdGhpcy5nZXRQS0lGcmVlVGV4dCA9IGZ1bmN0aW9uKGMpIHtcbiAgICBmb3IgKHZhciB5ID0gW10sIHYgPSBoKGMsIDApLCBvID0gMDsgbyA8IHYubGVuZ3RoOyBvKyspXG4gICAgICB5LnB1c2goci5nZXRTdHJpbmcoYywgdltvXSkpO1xuICAgIHJldHVybiB5O1xuICB9LCB0aGlzLmdldFBLSUZhaWx1cmVJbmZvID0gZnVuY3Rpb24oYykge1xuICAgIHZhciB5ID0gci5nZXRJbnQoYywgMCk7XG4gICAgcmV0dXJuIHBbeV0gIT0gbnVsbCA/IHBbeV0gOiB5O1xuICB9LCB0aGlzLmdldFRpbWVTdGFtcFJlcSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgeSA9IHt9O1xuICAgIHkuY2VydHJlcSA9ICExO1xuICAgIHZhciB2ID0gaChjLCAwKTtcbiAgICBpZiAodi5sZW5ndGggPCAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGltZVN0YW1wUmVxIG11c3QgaGF2ZSBhdCBsZWFzdCAyIGl0ZW1zXCIpO1xuICAgIHZhciBvID0gcyhjLCB2WzFdKTtcbiAgICB5Lm1lc3NhZ2VJbXByaW50ID0gYS5hc24xLnRzcC5UU1BVdGlsLnBhcnNlTWVzc2FnZUltcHJpbnQobyk7XG4gICAgZm9yICh2YXIgbCA9IDI7IGwgPCB2Lmxlbmd0aDsgbCsrKSB7XG4gICAgICB2YXIgZiA9IHZbbF0sIGQgPSBjLnN1YnN0cihmLCAyKTtcbiAgICAgIGlmIChkID09IFwiMDZcIikge1xuICAgICAgICB2YXIgZyA9IGkoYywgZik7XG4gICAgICAgIHkucG9saWN5ID0gci5oZXh0b29pZHN0cihnKTtcbiAgICAgIH1cbiAgICAgIGQgPT0gXCIwMlwiICYmICh5Lm5vbmNlID0gaShjLCBmKSksIGQgPT0gXCIwMVwiICYmICh5LmNlcnRyZXEgPSAhMCk7XG4gICAgfVxuICAgIHJldHVybiB5O1xuICB9O1xufTtcbih0eXBlb2YgYSA+IFwidVwiIHx8ICFhKSAmJiAoYSA9IHt9KTtcbih0eXBlb2YgYS5hc24xID4gXCJ1XCIgfHwgIWEuYXNuMSkgJiYgKGEuYXNuMSA9IHt9KTtcbih0eXBlb2YgYS5hc24xLmNhZGVzID4gXCJ1XCIgfHwgIWEuYXNuMS5jYWRlcykgJiYgKGEuYXNuMS5jYWRlcyA9IHt9KTtcbmEuYXNuMS5jYWRlcy5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLmNhZGVzLCBzID0gaS5TaWduYXR1cmVQb2xpY3lJZDtcbiAgaS5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy50eXBlT2lkID0gXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4xNVwiLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0VmFsdWVBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBbbmV3IHModGhpcy5wYXJhbXMpXTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24obikge1xuICAgIHRoaXMucGFyYW1zID0gbjtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jYWRlcy5TaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyLCBhLmFzbjEuY21zLkF0dHJpYnV0ZSk7XG5hLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWQgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSU2VxdWVuY2UsIHMgPSByLkRFUk9iamVjdElkZW50aWZpZXIsIG4gPSByLng1MDk7XG4gIG4uQWxnb3JpdGhtSWRlbnRpZmllcjtcbiAgdmFyIGggPSByLmNhZGVzLCB1ID0gaC5TaWduYXR1cmVQb2xpY3lJZCwgcCA9IGguT3RoZXJIYXNoQWxnQW5kVmFsdWU7XG4gIHUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYyA9IHRoaXMucGFyYW1zLCB5ID0gW107XG4gICAgeS5wdXNoKG5ldyBzKGMub2lkKSksIHkucHVzaChuZXcgcChjKSk7XG4gICAgdmFyIHYgPSBuZXcgaSh7IGFycmF5OiB5IH0pO1xuICAgIHJldHVybiB2LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB0aGlzLnBhcmFtcyA9IGM7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jYWRlcy5PdGhlckhhc2hBbGdBbmRWYWx1ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUlNlcXVlbmNlLCBuID0gaS5ERVJPY3RldFN0cmluZywgaCA9IGkueDUwOSwgdSA9IGguQWxnb3JpdGhtSWRlbnRpZmllciwgcCA9IGkuY2FkZXMsIGMgPSBwLk90aGVySGFzaEFsZ0FuZFZhbHVlO1xuICBjLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHkgPSB0aGlzLnBhcmFtcztcbiAgICBpZiAoeS5hbGcgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyB0KFwicHJvcGVydHkgJ2FsZycgbm90IHNwZWNpZmllZFwiKTtcbiAgICBpZiAoeS5oYXNoID09IG51bGwgJiYgeS5jZXJ0ID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcInByb3BlcnR5ICdoYXNoJyBub3IgJ2NlcnQnIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgdmFyIHYgPSBudWxsO1xuICAgIGlmICh5Lmhhc2ggIT0gbnVsbClcbiAgICAgIHYgPSB5Lmhhc2g7XG4gICAgZWxzZSBpZiAoeS5jZXJ0ICE9IG51bGwpIHtcbiAgICAgIGlmICh0eXBlb2YgeS5jZXJ0ICE9IFwic3RyaW5nXCIpXG4gICAgICAgIHRocm93IG5ldyB0KFwiY2VydCBub3Qgc3RyaW5nXCIpO1xuICAgICAgdmFyIG8gPSB5LmNlcnQ7XG4gICAgICB5LmNlcnQuaW5kZXhPZihcIi0tLS0tQkVHSU5cIikgIT0gLTEgJiYgKG8gPSBpZSh5LmNlcnQpKSwgdiA9IGEuY3J5cHRvLlV0aWwuaGFzaEhleChvLCB5LmFsZyk7XG4gICAgfVxuICAgIHZhciBsID0gW107XG4gICAgbC5wdXNoKG5ldyB1KHsgbmFtZTogeS5hbGcgfSkpLCBsLnB1c2gobmV3IG4oeyBoZXg6IHYgfSkpO1xuICAgIHZhciBmID0gbmV3IHMoeyBhcnJheTogbCB9KTtcbiAgICByZXR1cm4gZi50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNhZGVzLk90aGVySGFzaEFsZ0FuZFZhbHVlLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY2FkZXMuT3RoZXJIYXNoVmFsdWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5jYWRlcy5PdGhlckhhc2hWYWx1ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhO1xuICByLmxhbmcuU3RyaW5nLmlzSGV4O1xuICB2YXIgaSA9IHIuYXNuMSwgcyA9IGkuREVST2N0ZXRTdHJpbmc7XG4gIHIuY3J5cHRvLlV0aWwuaGFzaEhleCwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSB0aGlzLnBhcmFtcztcbiAgICBpZiAobi5oYXNoID09IG51bGwgJiYgbi5jZXJ0ID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcImhhc2ggb3IgY2VydCBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIHZhciBoID0gbnVsbDtcbiAgICBpZiAobi5oYXNoICE9IG51bGwpXG4gICAgICBoID0gbi5oYXNoO1xuICAgIGVsc2UgaWYgKG4uY2VydCAhPSBudWxsKSB7XG4gICAgICBpZiAodHlwZW9mIG4uY2VydCAhPSBcInN0cmluZ1wiKVxuICAgICAgICB0aHJvdyBuZXcgdChcImNlcnQgbm90IHN0cmluZ1wiKTtcbiAgICAgIHZhciB1ID0gbi5jZXJ0O1xuICAgICAgbi5jZXJ0LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xICYmICh1ID0gaWUobi5jZXJ0KSksIGggPSBhLmNyeXB0by5VdGlsLmhhc2hIZXgodSwgXCJzaGExXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IHMoeyBoZXg6IGggfSkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jYWRlcy5PdGhlckhhc2hWYWx1ZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNhZGVzLlNpZ25hdHVyZVRpbWVTdGFtcCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmxhbmcuU3RyaW5nLmlzSGV4LCBzID0gci5hc24xLCBuID0gcy5BU04xT2JqZWN0O1xuICBzLng1MDk7XG4gIHZhciBoID0gcy5jYWRlcztcbiAgaC5TaWduYXR1cmVUaW1lU3RhbXAuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnR5cGVPaWQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjE0XCIsIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRWYWx1ZUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcztcbiAgICBpZiAodS50c3QgIT0gbnVsbClcbiAgICAgIGlmIChpKHUudHN0KSkge1xuICAgICAgICB2YXIgcCA9IG5ldyBuKCk7XG4gICAgICAgIHJldHVybiBwLmhUTFYgPSB1LnRzdCwgW3BdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHUudHN0IGluc3RhbmNlb2YgbilcbiAgICAgICAgICByZXR1cm4gW3UudHN0XTtcbiAgICAgICAgdGhyb3cgbmV3IHQoXCJwYXJhbXMudHN0IGhhcyB3cm9uZyB2YWx1ZVwiKTtcbiAgICAgIH1cbiAgICBlbHNlIGlmICh1LnJlcyAhPSBudWxsKSB7XG4gICAgICB2YXIgYyA9IHUucmVzO1xuICAgICAgaWYgKGMgaW5zdGFuY2VvZiBuICYmIChjID0gYy50b2hleCgpKSwgdHlwZW9mIGMgIT0gXCJzdHJpbmdcIiB8fCAhaShjKSlcbiAgICAgICAgdGhyb3cgbmV3IHQoXCJwYXJhbXMucmVzIGhhcyB3cm9uZyB2YWx1ZVwiKTtcbiAgICAgIFYuZ2V0VExWYnlMaXN0KGMsIDAsIFsxXSk7XG4gICAgICB2YXIgcCA9IG5ldyBuKCk7XG4gICAgICByZXR1cm4gcC5oVExWID0gdS50c3QsIFtwXTtcbiAgICB9XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY2FkZXMuU2lnbmF0dXJlVGltZVN0YW1wLCBhLmFzbjEuY21zLkF0dHJpYnV0ZSk7XG5hLmFzbjEuY2FkZXMuQ29tcGxldGVDZXJ0aWZpY2F0ZVJlZnMgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5ERVJTZXF1ZW5jZSwgbiA9IGkuY2FkZXMsIGggPSBuLk90aGVyQ2VydElELCB1ID0gci5sYW5nLlN0cmluZy5pc0hleDtcbiAgbi5Db21wbGV0ZUNlcnRpZmljYXRlUmVmcy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMudHlwZU9pZCA9IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMjFcIiwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldFZhbHVlQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBwID0gdGhpcy5wYXJhbXMsIGMgPSBbXSwgeSA9IDA7IHkgPCBwLmFycmF5Lmxlbmd0aDsgeSsrKSB7XG4gICAgICB2YXIgdiA9IHAuYXJyYXlbeV07XG4gICAgICBpZiAodHlwZW9mIHYgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgaWYgKHYuaW5kZXhPZihcIi0tLS0tQkVHSU5cIikgIT0gLTEpXG4gICAgICAgICAgdiA9IHsgY2VydDogdiB9O1xuICAgICAgICBlbHNlIGlmICh1KHYpKVxuICAgICAgICAgIHYgPSB7IGhhc2g6IHYgfTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IG5ldyB0KFwidW5zdXBwb3J0ZWQgdmFsdWU6IFwiICsgdik7XG4gICAgICBwLmFsZyAhPSBudWxsICYmIHYuYWxnID09IG51bGwgJiYgKHYuYWxnID0gcC5hbGcpLCBwLmhhc2lzICE9IG51bGwgJiYgdi5oYXNpcyA9PSBudWxsICYmICh2Lmhhc2lzID0gcC5oYXNpcyk7XG4gICAgICB2YXIgbyA9IG5ldyBoKHYpO1xuICAgICAgYy5wdXNoKG8pO1xuICAgIH1cbiAgICB2YXIgbCA9IG5ldyBzKHsgYXJyYXk6IGMgfSk7XG4gICAgcmV0dXJuIFtsXTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jYWRlcy5Db21wbGV0ZUNlcnRpZmljYXRlUmVmcywgYS5hc24xLmNtcy5BdHRyaWJ1dGUpO1xuYS5hc24xLmNhZGVzLk90aGVyQ2VydElEID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5jbXMsIG4gPSBzLklzc3VlclNlcmlhbCwgaCA9IHIuY2FkZXMsIHUgPSBoLk90aGVySGFzaFZhbHVlLCBwID0gaC5PdGhlckhhc2hBbGdBbmRWYWx1ZTtcbiAgaC5PdGhlckNlcnRJRC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gZSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjID0gdGhpcy5wYXJhbXM7XG4gICAgdHlwZW9mIGMgPT0gXCJzdHJpbmdcIiAmJiAoYy5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSA/IGMgPSB7IGNlcnQ6IGMgfSA6IF9pc0hleChjKSAmJiAoYyA9IHsgaGFzaDogYyB9KSk7XG4gICAgdmFyIHkgPSBbXSwgdiA9IG51bGw7XG4gICAgaWYgKGMuYWxnICE9IG51bGwgPyB2ID0gbmV3IHAoYykgOiB2ID0gbmV3IHUoYyksIHkucHVzaCh2KSwgYy5jZXJ0ICE9IG51bGwgJiYgYy5oYXNpcyA9PSAhMCB8fCBjLmlzc3VlciAhPSBudWxsICYmIGMuc2VyaWFsICE9IG51bGwpIHtcbiAgICAgIHZhciBvID0gbmV3IG4oYyk7XG4gICAgICB5LnB1c2gobyk7XG4gICAgfVxuICAgIHZhciBsID0gbmV3IGkoeyBhcnJheTogeSB9KTtcbiAgICByZXR1cm4gbC50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNhZGVzLk90aGVyQ2VydElELCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY2FkZXMuT3RoZXJIYXNoID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjE7XG4gIHIuY21zO1xuICB2YXIgaSA9IHIuY2FkZXMsIHMgPSBpLk90aGVySGFzaEFsZ0FuZFZhbHVlLCBuID0gaS5PdGhlckhhc2hWYWx1ZTtcbiAgdC5jcnlwdG8uVXRpbC5oYXNoSGV4O1xuICB2YXIgaCA9IHQubGFuZy5TdHJpbmcuaXNIZXg7XG4gIGkuT3RoZXJIYXNoLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcztcbiAgICB0eXBlb2YgdSA9PSBcInN0cmluZ1wiICYmICh1LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xID8gdSA9IHsgY2VydDogdSB9IDogaCh1KSAmJiAodSA9IHsgaGFzaDogdSB9KSk7XG4gICAgdmFyIHAgPSBudWxsO1xuICAgIHJldHVybiB1LmFsZyAhPSBudWxsID8gcCA9IG5ldyBzKHUpIDogcCA9IG5ldyBuKHUpLCBwLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY2FkZXMuT3RoZXJIYXNoLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY2FkZXMuQ0FkRVNVdGlsID0gbmV3IGZ1bmN0aW9uKCkge1xufSgpO1xuYS5hc24xLmNhZGVzLkNBZEVTVXRpbC5wYXJzZVNpZ25lZERhdGFGb3JBZGRpbmdVbnNpZ25lZCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBuZXcgYS5hc24xLmNtcy5DTVNQYXJzZXIoKSwgciA9IHQuZ2V0Q01TU2lnbmVkRGF0YShlKTtcbiAgcmV0dXJuIHI7XG59O1xuYS5hc24xLmNhZGVzLkNBZEVTVXRpbC5wYXJzZVNpZ25lckluZm9Gb3JBZGRpbmdVbnNpZ25lZCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgdmFyIGkgPSBWLCBzID0gaS5nZXRDaGlsZElkeCwgbiA9IGkuZ2V0VExWLCBoID0gaS5nZXRWLCB1ID0gYSwgcCA9IHUuYXNuMSwgYyA9IHAuQVNOMU9iamVjdCwgeSA9IHAuY21zLCB2ID0geS5BdHRyaWJ1dGVMaXN0LCBvID0geS5TaWduZXJJbmZvLCBsID0ge30sIGYgPSBzKGUsIHQpO1xuICBpZiAoZi5sZW5ndGggIT0gNilcbiAgICB0aHJvdyBcIm5vdCBzdXBwb3J0ZWQgaXRlbXMgZm9yIFNpZ25lckluZm8gKCE9NilcIjtcbiAgdmFyIGQgPSBmLnNoaWZ0KCk7XG4gIGwudmVyc2lvbiA9IG4oZSwgZCk7XG4gIHZhciBnID0gZi5zaGlmdCgpO1xuICBsLnNpID0gbihlLCBnKTtcbiAgdmFyIFMgPSBmLnNoaWZ0KCk7XG4gIGwuZGlnYWxnID0gbihlLCBTKTtcbiAgdmFyIGIgPSBmLnNoaWZ0KCk7XG4gIGwuc2F0dHJzID0gbihlLCBiKTtcbiAgdmFyIEQgPSBmLnNoaWZ0KCk7XG4gIGwuc2lnYWxnID0gbihlLCBEKTtcbiAgdmFyIEEgPSBmLnNoaWZ0KCk7XG4gIGwuc2lnID0gbihlLCBBKSwgbC5zaWd2YWwgPSBoKGUsIEEpO1xuICB2YXIgSSA9IG51bGw7XG4gIHJldHVybiBsLm9iaiA9IG5ldyBvKCksIEkgPSBuZXcgYygpLCBJLmhUTFYgPSBsLnZlcnNpb24sIGwub2JqLmRDTVNWZXJzaW9uID0gSSwgSSA9IG5ldyBjKCksIEkuaFRMViA9IGwuc2ksIGwub2JqLmRTaWduZXJJZGVudGlmaWVyID0gSSwgSSA9IG5ldyBjKCksIEkuaFRMViA9IGwuZGlnYWxnLCBsLm9iai5kRGlnZXN0QWxnb3JpdGhtID0gSSwgSSA9IG5ldyBjKCksIEkuaFRMViA9IGwuc2F0dHJzLCBsLm9iai5kU2lnbmVkQXR0cnMgPSBJLCBJID0gbmV3IGMoKSwgSS5oVExWID0gbC5zaWdhbGcsIGwub2JqLmRTaWdBbGcgPSBJLCBJID0gbmV3IGMoKSwgSS5oVExWID0gbC5zaWcsIGwub2JqLmRTaWcgPSBJLCBsLm9iai5kVW5zaWduZWRBdHRycyA9IG5ldyB2KCksIGw7XG59O1xuKHR5cGVvZiBhLmFzbjEuY3NyID4gXCJ1XCIgfHwgIWEuYXNuMS5jc3IpICYmIChhLmFzbjEuY3NyID0ge30pO1xuYS5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJCaXRTdHJpbmcsIHMgPSByLkRFUlNlcXVlbmNlLCBuID0gci5jc3I7XG4gIHIueDUwOTtcbiAgdmFyIGggPSBuLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbztcbiAgbi5DZXJ0aWZpY2F0aW9uUmVxdWVzdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHUpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHU7XG4gIH0sIHRoaXMuc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1ID0gbmV3IGgodGhpcy5wYXJhbXMpLnRvaGV4KCksIHAgPSBuZXcgYS5jcnlwdG8uU2lnbmF0dXJlKHsgYWxnOiB0aGlzLnBhcmFtcy5zaWdhbGcgfSk7XG4gICAgcC5pbml0KHRoaXMucGFyYW1zLnNianBydmtleSksIHAudXBkYXRlSGV4KHUpO1xuICAgIHZhciBjID0gcC5zaWduKCk7XG4gICAgdGhpcy5wYXJhbXMuc2lnaGV4ID0gYztcbiAgfSwgdGhpcy5nZXRQRU0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGUodGhpcy50b2hleCgpLCBcIkNFUlRJRklDQVRFIFJFUVVFU1RcIik7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IHRoaXMucGFyYW1zLCBwID0gbmV3IGEuYXNuMS5jc3IuQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvKHRoaXMucGFyYW1zKSwgYyA9IG5ldyBhLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyKHsgbmFtZTogdS5zaWdhbGcgfSk7XG4gICAgaWYgKHUuc2lnaGV4ID09IG51bGwgJiYgdS5zYmpwcnZrZXkgIT0gbnVsbCAmJiB0aGlzLnNpZ24oKSwgdS5zaWdoZXggPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInNpZ2hleCBvciBzYmpwcnZrZXkgcGFyYW1ldGVyIG5vdCBkZWZpbmVkXCIpO1xuICAgIHZhciB5ID0gbmV3IGkoeyBoZXg6IFwiMDBcIiArIHUuc2lnaGV4IH0pLCB2ID0gbmV3IHMoeyBhcnJheTogW3AsIGMsIHldIH0pO1xuICAgIHJldHVybiB2LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICByLkRFUkJpdFN0cmluZztcbiAgdmFyIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5ERVJJbnRlZ2VyLCBuID0gci5ERVJVVEY4U3RyaW5nLCBoID0gci5ERVJUYWdnZWRPYmplY3QsIHUgPSByLkFTTjFVdGlsLm5ld09iamVjdCwgcCA9IHIuY3NyLCBjID0gci54NTA5LCB5ID0gYy5YNTAwTmFtZSwgdiA9IGMuRXh0ZW5zaW9ucywgbyA9IGMuU3ViamVjdFB1YmxpY0tleUluZm87XG4gIHAuQXR0cmlidXRlTGlzdCwgcC5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKGYpIHtcbiAgICBmICE9IG51bGwgJiYgKHRoaXMucGFyYW1zID0gZik7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZiA9IHRoaXMucGFyYW1zLCBkID0gW107XG4gICAgaWYgKGQucHVzaChuZXcgcyh7IGludDogMCB9KSksIGQucHVzaChuZXcgeShmLnN1YmplY3QpKSwgZC5wdXNoKG5ldyBvKGsuZ2V0S2V5KGYuc2JqcHVia2V5KSkpLCBmLmF0dHJzICE9IG51bGwpIHtcbiAgICAgIHZhciBnID0gbChmLmF0dHJzKSwgUyA9IHUoeyB0YWc6IHsgdGFnZTogXCJhMFwiLCBvYmo6IGcgfSB9KTtcbiAgICAgIGQucHVzaChTKTtcbiAgICB9IGVsc2UgaWYgKGYuZXh0cmVxICE9IG51bGwpIHtcbiAgICAgIHZhciBiID0gbmV3IHYoZi5leHRyZXEpLCBTID0gdSh7IHRhZzogeyB0YWdlOiBcImEwXCIsIG9iajogeyBzZXE6IFt7IG9pZDogXCIxLjIuODQwLjExMzU0OS4xLjkuMTRcIiB9LCB7IHNldDogW2JdIH1dIH0gfSB9KTtcbiAgICAgIGQucHVzaChTKTtcbiAgICB9IGVsc2VcbiAgICAgIGQucHVzaChuZXcgaCh7IHRhZzogXCJhMFwiLCBleHBsaWNpdDogITEsIG9iajogbmV3IG4oeyBzdHI6IFwiXCIgfSkgfSkpO1xuICAgIHZhciBEID0gbmV3IGkoeyBhcnJheTogZCB9KTtcbiAgICByZXR1cm4gRC50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9O1xuICBmdW5jdGlvbiBsKGYpIHtcbiAgICBmb3IgKHZhciBkID0gRXJyb3IsIGcgPSBhLmFzbjEueDUwOS5FeHRlbnNpb25zLCBTID0gW10sIGIgPSAwOyBiIDwgZi5sZW5ndGg7IGIrKykge1xuICAgICAgdmFyIEQgPSBmW2JdLCBBID0gRC5hdHRyO1xuICAgICAgaWYgKEEgPT0gXCJleHRlbnNpb25SZXF1ZXN0XCIpIHtcbiAgICAgICAgdmFyIEkgPSBuZXcgZyhELmV4dCksIG0gPSB7IHNlcTogW3sgb2lkOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNFwiIH0sIHsgc2V0OiBbSV0gfV0gfTtcbiAgICAgICAgUy5wdXNoKG0pO1xuICAgICAgfSBlbHNlIGlmIChBID09IFwidW5zdHJ1Y3R1cmVkTmFtZVwiKSB7XG4gICAgICAgIHZhciBtID0geyBzZXE6IFt7IG9pZDogXCIxLjIuODQwLjExMzU0OS4xLjkuMlwiIH0sIHsgc2V0OiBELm5hbWVzIH1dIH07XG4gICAgICAgIFMucHVzaChtKTtcbiAgICAgIH0gZWxzZSBpZiAoQSA9PSBcImNoYWxsZW5nZVBhc3N3b3JkXCIpIHtcbiAgICAgICAgdmFyIG0gPSB7IHNlcTogW3sgb2lkOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS43XCIgfSwgeyBzZXQ6IFt7IHV0ZjhzdHI6IEQucGFzc3dvcmQgfV0gfV0gfTtcbiAgICAgICAgUy5wdXNoKG0pO1xuICAgICAgfSBlbHNlXG4gICAgICAgIHRocm93IG5ldyBkKFwidW5rbm93biBDU1IgYXR0cmlidXRlXCIpO1xuICAgIH1cbiAgICByZXR1cm4geyBzZXQ6IFMgfTtcbiAgfVxuICBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8sIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jc3IuQXR0cmlidXRlTGlzdCA9IGZ1bmN0aW9uKGUpIHtcbn07XG5OKGEuYXNuMS5jc3IuQXR0cmlidXRlTGlzdCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNzci5DU1JVdGlsID0gbmV3IGZ1bmN0aW9uKCkge1xufSgpO1xuYS5hc24xLmNzci5DU1JVdGlsLm5ld0NTUlBFTSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLmFzbjEuY3NyLCByID0gbmV3IHQuQ2VydGlmaWNhdGlvblJlcXVlc3QoZSksIGkgPSByLmdldFBFTSgpO1xuICByZXR1cm4gaTtcbn07XG5hLmFzbjEuY3NyLkNTUlV0aWwuZ2V0UGFyYW0gPSBmdW5jdGlvbihlLCB0KSB7XG4gIHZhciByID0gViwgaSA9IHIuZ2V0ViwgcyA9IHIuZ2V0SWR4YnlMaXN0LCBuID0gci5nZXRUTFZieUxpc3QsIGggPSByLmdldFRMVmJ5TGlzdEV4LCB1ID0gci5nZXRWYnlMaXN0RXgsIHAgPSBmdW5jdGlvbihiKSB7XG4gICAgdmFyIEQgPSBzKGIsIDAsIFswLCAzLCAwLCAwXSwgXCIwNlwiKTtcbiAgICByZXR1cm4gaShiLCBEKSAhPSBcIjJhODY0ODg2ZjcwZDAxMDkwZVwiID8gbnVsbCA6IG4oYiwgMCwgWzAsIDMsIDAsIDEsIDBdLCBcIjMwXCIpO1xuICB9LCBjID0ge307XG4gIGlmIChlLmluZGV4T2YoXCItLS0tLUJFR0lOIENFUlRJRklDQVRFIFJFUVVFU1RcIikgPT0gLTEpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYXJndW1lbnQgaXMgbm90IFBFTSBmaWxlXCIpO1xuICB2YXIgeSA9IGllKGUsIFwiQ0VSVElGSUNBVEUgUkVRVUVTVFwiKTtcbiAgdCAmJiAoYy50YnMgPSBuKHksIDAsIFswXSkpO1xuICB0cnkge1xuICAgIHZhciB2ID0gaCh5LCAwLCBbMCwgMV0pO1xuICAgIGlmICh2ID09IFwiMzAwMFwiKVxuICAgICAgYy5zdWJqZWN0ID0ge307XG4gICAgZWxzZSB7XG4gICAgICB2YXIgZCA9IG5ldyBMKCk7XG4gICAgICBjLnN1YmplY3QgPSBkLmdldFg1MDBOYW1lKHYpO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gIH1cbiAgdmFyIG8gPSBoKHksIDAsIFswLCAyXSksIGwgPSBrLmdldEtleShvLCBudWxsLCBcInBrY3M4cHViXCIpO1xuICBjLnNianB1YmtleSA9IGsuZ2V0UEVNKGwsIFwiUEtDUzhQVUJcIik7XG4gIHZhciBmID0gcCh5KSwgZCA9IG5ldyBMKCk7XG4gIGYgIT0gbnVsbCAmJiAoYy5leHRyZXEgPSBkLmdldEV4dFBhcmFtQXJyYXkoZikpO1xuICB0cnkge1xuICAgIHZhciBnID0gaCh5LCAwLCBbMV0sIFwiMzBcIiksIGQgPSBuZXcgTCgpO1xuICAgIGMuc2lnYWxnID0gZC5nZXRBbGdvcml0aG1JZGVudGlmaWVyTmFtZShnKTtcbiAgfSBjYXRjaCB7XG4gIH1cbiAgdHJ5IHtcbiAgICB2YXIgUyA9IHUoeSwgMCwgWzJdKTtcbiAgICBjLnNpZ2hleCA9IFM7XG4gIH0gY2F0Y2gge1xuICB9XG4gIHJldHVybiBjO1xufTtcbmEuYXNuMS5jc3IuQ1NSVXRpbC52ZXJpZnlTaWduYXR1cmUgPSBmdW5jdGlvbihlKSB7XG4gIHRyeSB7XG4gICAgdmFyIHQgPSBudWxsO1xuICAgIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiICYmIGUuaW5kZXhPZihcIi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUgUkVRVUVTVFwiKSAhPSAtMSA/IHQgPSBhLmFzbjEuY3NyLkNTUlV0aWwuZ2V0UGFyYW0oZSwgITApIDogdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiBlLnNianB1YmtleSAhPSBudWxsICYmIGUuc2lnYWxnICE9IG51bGwgJiYgZS5zaWdoZXggIT0gbnVsbCAmJiBlLnRicyAhPSBudWxsICYmICh0ID0gZSksIHQgPT0gbnVsbClcbiAgICAgIHJldHVybiAhMTtcbiAgICB2YXIgciA9IG5ldyBhLmNyeXB0by5TaWduYXR1cmUoeyBhbGc6IHQuc2lnYWxnIH0pO1xuICAgIHJldHVybiByLmluaXQodC5zYmpwdWJrZXkpLCByLnVwZGF0ZUhleCh0LnRicyksIHIudmVyaWZ5KHQuc2lnaGV4KTtcbiAgfSBjYXRjaCAoaSkge1xuICAgIHJldHVybiBhbGVydChpKSwgITE7XG4gIH1cbn07XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMSA+IFwidVwiIHx8ICFhLmFzbjEpICYmIChhLmFzbjEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMS5vY3NwID4gXCJ1XCIgfHwgIWEuYXNuMS5vY3NwKSAmJiAoYS5hc24xLm9jc3AgPSB7fSk7XG5hLmFzbjEub2NzcC5ERUZBVUxUX0hBU0ggPSBcInNoYTFcIjtcbmEuYXNuMS5vY3NwLk9DU1BSZXNwb25zZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLm9jc3AuT0NTUFJlc3BvbnNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgYS5hc24xLkRFUkVudW1lcmF0ZWQ7XG4gIHZhciB0ID0gYS5hc24xLkFTTjFVdGlsLm5ld09iamVjdCwgciA9IGEuYXNuMS5vY3NwLlJlc3BvbnNlQnl0ZXMsIGkgPSBbXCJzdWNjZXNzZnVsXCIsIFwibWFsZm9ybWVkUmVxdWVzdFwiLCBcImludGVybmFsRXJyb3JcIiwgXCJ0cnlMYXRlclwiLCBcIl9ub3RfdXNlZF9cIiwgXCJzaWdSZXF1aXJlZFwiLCBcInVuYXV0aG9yaXplZFwiXTtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLl9nZXRTdGF0dXNDb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSB0aGlzLnBhcmFtcy5yZXNzdGF0dXM7XG4gICAgcmV0dXJuIHR5cGVvZiBzID09IFwibnVtYmVyXCIgPyBzIDogdHlwZW9mIHMgIT0gXCJzdHJpbmdcIiA/IC0xIDogaS5pbmRleE9mKHMpO1xuICB9LCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihzKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBzO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSB0aGlzLnBhcmFtcywgbiA9IHRoaXMuX2dldFN0YXR1c0NvZGUoKTtcbiAgICBpZiAobiA9PSAtMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInJlc3BvbnNlU3RhdHVzIG5vdCBzdXBwb3J0ZWQ6IFwiICsgcy5yZXNzdGF0dXMpO1xuICAgIGlmIChuICE9IDApXG4gICAgICByZXR1cm4gdCh7IHNlcTogW3sgZW51bTogeyBpbnQ6IG4gfSB9XSB9KS50b2hleCgpO1xuICAgIHZhciBoID0gbmV3IHIocyk7XG4gICAgcmV0dXJuIHQoeyBzZXE6IFt7IGVudW06IHsgaW50OiAwIH0gfSwgeyB0YWc6IHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiBoIH0gfV0gfSkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5vY3NwLk9DU1BSZXNwb25zZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLm9jc3AuUmVzcG9uc2VCeXRlcyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLm9jc3AuUmVzcG9uc2VCeXRlcy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYS5hc24xLCByID0gdC5ERVJTZXF1ZW5jZSwgaSA9IHQuREVST2JqZWN0SWRlbnRpZmllciwgcyA9IHQuREVST2N0ZXRTdHJpbmcsIG4gPSB0Lm9jc3AuQmFzaWNPQ1NQUmVzcG9uc2U7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24oaCkge1xuICAgIHRoaXMucGFyYW1zID0gaDtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKGgucmVzdHlwZSAhPSBcIm9jc3BCYXNpY1wiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IHN1cHBvcnRlZCByZXNwb25zZVR5cGU6IFwiICsgaC5yZXN0eXBlKTtcbiAgICB2YXIgdSA9IG5ldyBuKGgpLCBwID0gW107XG4gICAgcC5wdXNoKG5ldyBpKHsgbmFtZTogXCJvY3NwQmFzaWNcIiB9KSksIHAucHVzaChuZXcgcyh7IGhleDogdS50b2hleCgpIH0pKTtcbiAgICB2YXIgYyA9IG5ldyByKHsgYXJyYXk6IHAgfSk7XG4gICAgcmV0dXJuIGMudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5vY3NwLlJlc3BvbnNlQnl0ZXMsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLkJhc2ljT0NTUFJlc3BvbnNlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEub2NzcC5CYXNpY09DU1BSZXNwb25zZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLmFzbjEsIGkgPSByLkFTTjFPYmplY3QsIHMgPSByLkRFUlNlcXVlbmNlO1xuICByLkRFUkdlbmVyYWxpemVkVGltZTtcbiAgdmFyIG4gPSByLkRFUlRhZ2dlZE9iamVjdCwgaCA9IHIuREVSQml0U3RyaW5nO1xuICByLng1MDkuRXh0ZW5zaW9ucztcbiAgdmFyIHUgPSByLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllciwgcCA9IHIub2NzcDtcbiAgcC5SZXNwb25kZXJJRCwgX1NpbmdsZVJlc3BvbnNlTGlzdCA9IHAuU2luZ2xlUmVzcG9uc2VMaXN0LCBfUmVzcG9uc2VEYXRhID0gcC5SZXNwb25zZURhdGEsIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24oYykge1xuICAgIHRoaXMucGFyYW1zID0gYztcbiAgfSwgdGhpcy5zaWduID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGMgPSB0aGlzLnBhcmFtcywgeSA9IGMudGJzcmVzcC50b2hleCgpLCB2ID0gbmV3IGEuY3J5cHRvLlNpZ25hdHVyZSh7IGFsZzogYy5zaWdhbGcgfSk7XG4gICAgdi5pbml0KGMucmVza2V5KSwgdi51cGRhdGVIZXgoeSksIGMuc2lnaGV4ID0gdi5zaWduKCk7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYyA9IHRoaXMucGFyYW1zO1xuICAgIGMudGJzcmVzcCA9PSBudWxsICYmIChjLnRic3Jlc3AgPSBuZXcgX1Jlc3BvbnNlRGF0YShjKSksIGMuc2lnaGV4ID09IG51bGwgJiYgYy5yZXNrZXkgIT0gbnVsbCAmJiB0aGlzLnNpZ24oKTtcbiAgICB2YXIgeSA9IFtdO1xuICAgIGlmICh5LnB1c2goYy50YnNyZXNwKSwgeS5wdXNoKG5ldyB1KHsgbmFtZTogYy5zaWdhbGcgfSkpLCB5LnB1c2gobmV3IGgoeyBoZXg6IFwiMDBcIiArIGMuc2lnaGV4IH0pKSwgYy5jZXJ0cyAhPSBudWxsICYmIGMuY2VydHMubGVuZ3RoICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIHYgPSBbXSwgbyA9IDA7IG8gPCBjLmNlcnRzLmxlbmd0aDsgbysrKSB7XG4gICAgICAgIHZhciBsID0gYy5jZXJ0c1tvXSwgZiA9IG51bGw7XG4gICAgICAgIGlmIChWLmlzQVNOMUhFWChsKSlcbiAgICAgICAgICBmID0gbDtcbiAgICAgICAgZWxzZSBpZiAobC5tYXRjaCgvLS0tLS1CRUdJTi8pKVxuICAgICAgICAgIGYgPSBpZShsKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IG5ldyB0KFwiY2VydHNbXCIgKyBvICsgXCJdIG5vdCBoZXggb3IgUEVNXCIpO1xuICAgICAgICB2LnB1c2gobmV3IGkoeyB0bHY6IGYgfSkpO1xuICAgICAgfVxuICAgICAgdmFyIGQgPSBuZXcgcyh7IGFycmF5OiB2IH0pO1xuICAgICAgeS5wdXNoKG5ldyBuKHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiBkIH0pKTtcbiAgICB9XG4gICAgdmFyIGcgPSBuZXcgcyh7IGFycmF5OiB5IH0pO1xuICAgIHJldHVybiBnLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEub2NzcC5CYXNpY09DU1BSZXNwb25zZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLm9jc3AuUmVzcG9uc2VEYXRhID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEub2NzcC5SZXNwb25zZURhdGEuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEuYXNuMSwgciA9IHQuREVSU2VxdWVuY2UsIGkgPSB0LkRFUkdlbmVyYWxpemVkVGltZSwgcyA9IHQuREVSVGFnZ2VkT2JqZWN0LCBuID0gdC54NTA5LkV4dGVuc2lvbnMsIGggPSB0Lm9jc3AsIHUgPSBoLlJlc3BvbmRlcklEO1xuICBfU2luZ2xlUmVzcG9uc2VMaXN0ID0gaC5TaW5nbGVSZXNwb25zZUxpc3QsIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gdGhpcy5wYXJhbXM7XG4gICAgcC5yZXNwaWQgIT0gbnVsbCwgcC5wcm9kYXQgIT0gbnVsbCwgcC5hcnJheSAhPSBudWxsO1xuICAgIHZhciBjID0gW107XG4gICAgaWYgKGMucHVzaChuZXcgdShwLnJlc3BpZCkpLCBjLnB1c2gobmV3IGkocC5wcm9kYXQpKSwgYy5wdXNoKG5ldyBfU2luZ2xlUmVzcG9uc2VMaXN0KHAuYXJyYXkpKSwgcC5leHQgIT0gbnVsbCkge1xuICAgICAgdmFyIHkgPSBuZXcgbihwLmV4dCk7XG4gICAgICBjLnB1c2gobmV3IHMoeyB0YWc6IFwiYTFcIiwgZXhwbGljaXQ6ICEwLCBvYmo6IHkgfSkpO1xuICAgIH1cbiAgICB2YXIgdiA9IG5ldyByKHsgYXJyYXk6IGMgfSk7XG4gICAgcmV0dXJuIHYudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24ocCkge1xuICAgIHRoaXMucGFyYW1zID0gcDtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5vY3NwLlJlc3BvbnNlRGF0YSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLm9jc3AuUmVzcG9uZGVySUQgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5vY3NwLlJlc3BvbmRlcklELnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5BU04xVXRpbC5uZXdPYmplY3QsIHMgPSByLng1MDkuWDUwME5hbWUsIG4gPSB0LmxhbmcuU3RyaW5nLmlzSGV4LCBoID0gRXJyb3I7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKHUua2V5ICE9IG51bGwpIHtcbiAgICAgIHZhciBwID0gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgdS5rZXkgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAobih1LmtleSkgJiYgKHAgPSB1LmtleSksIHUua2V5Lm1hdGNoKC8tLS0tLUJFR0lOIENFUlRJRklDQVRFLykpIHtcbiAgICAgICAgICB2YXIgYyA9IG5ldyBMKHUua2V5KSwgeSA9IGMuZ2V0RXh0U3ViamVjdEtleUlkZW50aWZpZXIoKTtcbiAgICAgICAgICB5ICE9IG51bGwgJiYgKHAgPSB5LmtpZC5oZXgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHUua2V5IGluc3RhbmNlb2YgTCkge1xuICAgICAgICB2YXIgeSA9IHUua2V5LmdldEV4dFN1YmplY3RLZXlJZGVudGlmaWVyKCk7XG4gICAgICAgIHkgIT0gbnVsbCAmJiAocCA9IHkua2lkLmhleCk7XG4gICAgICB9XG4gICAgICBpZiAocCA9PSBudWxsKVxuICAgICAgICB0aHJvdyBuZXcgaChcIndyb25nIGtleSBtZW1iZXIgdmFsdWVcIik7XG4gICAgICB2YXIgdiA9IGkoeyB0YWc6IHsgdGFnOiBcImEyXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiB7IG9jdHN0cjogeyBoZXg6IHAgfSB9IH0gfSk7XG4gICAgICByZXR1cm4gdi50b2hleCgpO1xuICAgIH0gZWxzZSBpZiAodS5uYW1lICE9IG51bGwpIHtcbiAgICAgIHZhciBvID0gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgdS5uYW1lID09IFwic3RyaW5nXCIgJiYgdS5uYW1lLm1hdGNoKC8tLS0tLUJFR0lOIENFUlRJRklDQVRFLykpIHtcbiAgICAgICAgdmFyIGMgPSBuZXcgTCh1Lm5hbWUpO1xuICAgICAgICBvID0gYy5nZXRTdWJqZWN0KCk7XG4gICAgICB9IGVsc2VcbiAgICAgICAgdS5uYW1lIGluc3RhbmNlb2YgTCA/IG8gPSB1Lm5hbWUuZ2V0U3ViamVjdCgpIDogdHlwZW9mIHUubmFtZSA9PSBcIm9iamVjdFwiICYmICh1Lm5hbWUuYXJyYXkgIT0gbnVsbCB8fCB1Lm5hbWUuc3RyICE9IG51bGwpICYmIChvID0gdS5uYW1lKTtcbiAgICAgIGlmIChvID09IG51bGwpXG4gICAgICAgIHRocm93IG5ldyBoKFwid3JvbmcgbmFtZSBtZW1iZXIgdmFsdWVcIik7XG4gICAgICB2YXIgdiA9IGkoeyB0YWc6IHsgdGFnOiBcImExXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiBuZXcgcyhvKSB9IH0pO1xuICAgICAgcmV0dXJuIHYudG9oZXgoKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IGgoXCJrZXkgb3IgbmFtZSBub3Qgc3BlY2lmaWVkXCIpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbih1KSB7XG4gICAgdGhpcy5wYXJhbXMgPSB1O1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLm9jc3AuUmVzcG9uZGVySUQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLlNpbmdsZVJlc3BvbnNlTGlzdCA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLm9jc3AuU2luZ2xlUmVzcG9uc2VMaXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLmFzbjEsIHIgPSB0LkRFUlNlcXVlbmNlLCBpID0gdC5vY3NwLlNpbmdsZVJlc3BvbnNlO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcyA9IHRoaXMucGFyYW1zO1xuICAgIGlmICh0eXBlb2YgcyAhPSBcIm9iamVjdFwiIHx8IHMubGVuZ3RoID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwYXJhbXMgbm90IHNwZWNpZmllZCBwcm9wZXJseVwiKTtcbiAgICBmb3IgKHZhciBuID0gW10sIGggPSAwOyBoIDwgcy5sZW5ndGg7IGgrKylcbiAgICAgIG4ucHVzaChuZXcgaShzW2hdKSk7XG4gICAgdmFyIHUgPSBuZXcgcih7IGFycmF5OiBuIH0pO1xuICAgIHJldHVybiB1LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHMpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHM7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEub2NzcC5TaW5nbGVSZXNwb25zZUxpc3QsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLlNpbmdsZVJlc3BvbnNlID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVSU2VxdWVuY2UsIG4gPSBpLkRFUkdlbmVyYWxpemVkVGltZSwgaCA9IGkuREVSVGFnZ2VkT2JqZWN0LCB1ID0gaS5vY3NwLCBwID0gdS5DZXJ0SUQsIGMgPSB1LkNlcnRTdGF0dXMsIHkgPSBpLng1MDksIHYgPSB5LkV4dGVuc2lvbnM7XG4gIHUuU2luZ2xlUmVzcG9uc2Uuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IHRoaXMucGFyYW1zLCBsID0gW107XG4gICAgaWYgKG8uY2VydGlkID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcImNlcnRpZCB1bnNwZWNpZmllZFwiKTtcbiAgICBpZiAoby5zdGF0dXMgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyB0KFwic3RhdHVzIHVuc3BlY2lmaWVkXCIpO1xuICAgIGlmIChvLnRoaXN1cGRhdGUgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyB0KFwidGhpc3VwZGF0ZSB1bnNwZWNpZmllZFwiKTtcbiAgICBpZiAobC5wdXNoKG5ldyBwKG8uY2VydGlkKSksIGwucHVzaChuZXcgYyhvLnN0YXR1cykpLCBsLnB1c2gobmV3IG4oby50aGlzdXBkYXRlKSksIG8ubmV4dHVwZGF0ZSAhPSBudWxsKSB7XG4gICAgICB2YXIgZiA9IG5ldyBuKG8ubmV4dHVwZGF0ZSk7XG4gICAgICBsLnB1c2gobmV3IGgoeyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICEwLCBvYmo6IGYgfSkpO1xuICAgIH1cbiAgICBpZiAoby5leHQgIT0gbnVsbCkge1xuICAgICAgdmFyIGQgPSBuZXcgdihvLmV4dCk7XG4gICAgICBsLnB1c2gobmV3IGgoeyB0YWc6IFwiYTFcIiwgZXhwbGljaXQ6ICEwLCBvYmo6IGQgfSkpO1xuICAgIH1cbiAgICB2YXIgZyA9IG5ldyBzKHsgYXJyYXk6IGwgfSk7XG4gICAgcmV0dXJuIGcudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24obykge1xuICAgIHRoaXMucGFyYW1zID0gbztcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5vY3NwLlNpbmdsZVJlc3BvbnNlLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEub2NzcC5DZXJ0SUQgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVST2N0ZXRTdHJpbmcsIHMgPSByLkRFUkludGVnZXIsIG4gPSByLkRFUlNlcXVlbmNlLCBoID0gci54NTA5LCB1ID0gaC5BbGdvcml0aG1JZGVudGlmaWVyLCBwID0gci5vY3NwO1xuICBwLkRFRkFVTFRfSEFTSDtcbiAgdmFyIGMgPSB0LmNyeXB0bywgeSA9IGMuVXRpbC5oYXNoSGV4LCB2ID0gTCwgbyA9IFYsIGwgPSBvLmdldFZieUxpc3Q7XG4gIHAuQ2VydElELnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5ERUZBVUxUX0hBU0ggPSBcInNoYTFcIiwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNldEJ5VmFsdWUgPSBmdW5jdGlvbihmLCBkLCBnLCBTKSB7XG4gICAgUyA9PSBudWxsICYmIChTID0gdGhpcy5ERUZBVUxUX0hBU0gpLCB0aGlzLnBhcmFtcyA9IHsgYWxnOiBTLCBpc3NuYW1lOiBmLCBpc3NrZXk6IGQsIHNianNuOiBnIH07XG4gIH0sIHRoaXMuc2V0QnlDZXJ0ID0gZnVuY3Rpb24oZiwgZCwgZykge1xuICAgIGcgPT0gbnVsbCAmJiAoZyA9IHRoaXMuREVGQVVMVF9IQVNIKSwgdGhpcy5wYXJhbXMgPSB7IGFsZzogZywgaXNzdWVyQ2VydDogZiwgc3ViamVjdENlcnQ6IGQgfTtcbiAgfSwgdGhpcy5nZXRQYXJhbUJ5Q2VydHMgPSBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgZyA9PSBudWxsICYmIChnID0gdGhpcy5ERUZBVUxUX0hBU0gpO1xuICAgIHZhciBTID0gbmV3IHYoZiksIGIgPSBuZXcgdihkKSwgRCA9IHkoUy5nZXRTdWJqZWN0SGV4KCksIGcpLCBBID0gUy5nZXRQdWJsaWNLZXlIZXgoKSwgSSA9IHkobChBLCAwLCBbMV0sIFwiMDNcIiwgITApLCBnKSwgbSA9IGIuZ2V0U2VyaWFsTnVtYmVySGV4KCksIEUgPSB7IGFsZzogZywgaXNzbmFtZTogRCwgaXNza2V5OiBJLCBzYmpzbjogbSB9O1xuICAgIHJldHVybiBFO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnBhcmFtcyAhPSBcIm9iamVjdFwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicGFyYW1zIG5vdCBzZXRcIik7XG4gICAgdmFyIGYgPSB0aGlzLnBhcmFtcywgZCwgZywgUywgYjtcbiAgICBpZiAoZi5hbGcgPT0gbnVsbCA/IGIgPSB0aGlzLkRFRkFVTFRfSEFTSCA6IGIgPSBmLmFsZywgZi5pc3N1ZXJDZXJ0ICE9IG51bGwgJiYgZi5zdWJqZWN0Q2VydCAhPSBudWxsKSB7XG4gICAgICB2YXIgRCA9IHRoaXMuZ2V0UGFyYW1CeUNlcnRzKGYuaXNzdWVyQ2VydCwgZi5zdWJqZWN0Q2VydCwgYik7XG4gICAgICBkID0gRC5pc3NuYW1lLCBnID0gRC5pc3NrZXksIFMgPSBELnNianNuO1xuICAgIH0gZWxzZSBpZiAoZi5pc3NuYW1lICE9IG51bGwgJiYgZi5pc3NrZXkgIT0gbnVsbCAmJiBmLnNianNuICE9IG51bGwpXG4gICAgICBkID0gZi5pc3NuYW1lLCBnID0gZi5pc3NrZXksIFMgPSBmLnNianNuO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInJlcXVpcmVkIHBhcmFtIG1lbWJlcnMgbm90IGRlZmluZWRcIik7XG4gICAgdmFyIEEgPSBuZXcgdSh7IG5hbWU6IGIgfSksIEkgPSBuZXcgaSh7IGhleDogZCB9KSwgbSA9IG5ldyBpKHsgaGV4OiBnIH0pLCBFID0gbmV3IHMoeyBoZXg6IFMgfSksIHcgPSBuZXcgbih7IGFycmF5OiBbQSwgSSwgbSwgRV0gfSk7XG4gICAgcmV0dXJuIHRoaXMuaFRMViA9IHcudG9oZXgoKSwgdGhpcy5oVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLm9jc3AuQ2VydElELCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEub2NzcC5DZXJ0U3RhdHVzID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEub2NzcC5DZXJ0U3RhdHVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQgPSB0aGlzLnBhcmFtcztcbiAgICBpZiAodC5zdGF0dXMgPT0gXCJnb29kXCIpXG4gICAgICByZXR1cm4gXCI4MDAwXCI7XG4gICAgaWYgKHQuc3RhdHVzID09IFwidW5rbm93blwiKVxuICAgICAgcmV0dXJuIFwiODIwMFwiO1xuICAgIGlmICh0LnN0YXR1cyA9PSBcInJldm9rZWRcIikge1xuICAgICAgdmFyIHIgPSBbeyBnZW50aW1lOiB7IHN0cjogdC50aW1lIH0gfV07XG4gICAgICB0LnJlYXNvbiAhPSBudWxsICYmIHIucHVzaCh7IHRhZzogeyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICEwLCBvYmo6IHsgZW51bTogeyBpbnQ6IHQucmVhc29uIH0gfSB9IH0pO1xuICAgICAgdmFyIGkgPSB7IHRhZzogXCJhMVwiLCBleHBsaWNpdDogITEsIG9iajogeyBzZXE6IHIgfSB9O1xuICAgICAgcmV0dXJuIGEuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QoeyB0YWc6IGkgfSkudG9oZXgoKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYmFkIHN0YXR1c1wiKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24odCkge1xuICAgIHRoaXMucGFyYW1zID0gdDtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5vY3NwLkNlcnRTdGF0dXMsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLlJlcXVlc3QgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSU2VxdWVuY2UsIHMgPSByLm9jc3A7XG4gIGlmIChzLlJlcXVlc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmRSZXFDZXJ0ID0gbnVsbCwgdGhpcy5kRXh0ID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoID0gW107XG4gICAgaWYgKHRoaXMuZFJlcUNlcnQgPT09IG51bGwpXG4gICAgICB0aHJvdyBcInJlcUNlcnQgbm90IHNldFwiO1xuICAgIGgucHVzaCh0aGlzLmRSZXFDZXJ0KTtcbiAgICB2YXIgdSA9IG5ldyBpKHsgYXJyYXk6IGggfSk7XG4gICAgcmV0dXJuIHRoaXMuaFRMViA9IHUudG9oZXgoKSwgdGhpcy5oVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0eXBlb2YgZSA8IFwidVwiKSB7XG4gICAgdmFyIG4gPSBuZXcgcy5DZXJ0SUQoZSk7XG4gICAgdGhpcy5kUmVxQ2VydCA9IG47XG4gIH1cbn07XG5OKGEuYXNuMS5vY3NwLlJlcXVlc3QsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLlRCU1JlcXVlc3QgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSU2VxdWVuY2UsIHMgPSByLm9jc3A7XG4gIHMuVEJTUmVxdWVzdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMudmVyc2lvbiA9IDAsIHRoaXMuZFJlcXVlc3Rvck5hbWUgPSBudWxsLCB0aGlzLmRSZXF1ZXN0TGlzdCA9IFtdLCB0aGlzLmRSZXF1ZXN0RXh0ID0gbnVsbCwgdGhpcy5zZXRSZXF1ZXN0TGlzdEJ5UGFyYW0gPSBmdW5jdGlvbihuKSB7XG4gICAgZm9yICh2YXIgaCA9IFtdLCB1ID0gMDsgdSA8IG4ubGVuZ3RoOyB1KyspIHtcbiAgICAgIHZhciBwID0gbmV3IHMuUmVxdWVzdChuWzBdKTtcbiAgICAgIGgucHVzaChwKTtcbiAgICB9XG4gICAgdGhpcy5kUmVxdWVzdExpc3QgPSBoO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSBbXTtcbiAgICBpZiAodGhpcy52ZXJzaW9uICE9PSAwKVxuICAgICAgdGhyb3cgXCJub3Qgc3VwcG9ydGVkIHZlcnNpb246IFwiICsgdGhpcy52ZXJzaW9uO1xuICAgIGlmICh0aGlzLmRSZXF1ZXN0b3JOYW1lICE9PSBudWxsKVxuICAgICAgdGhyb3cgXCJyZXF1ZXN0b3JOYW1lIG5vdCBzdXBwb3J0ZWRcIjtcbiAgICB2YXIgaCA9IG5ldyBpKHsgYXJyYXk6IHRoaXMuZFJlcXVlc3RMaXN0IH0pO1xuICAgIGlmIChuLnB1c2goaCksIHRoaXMuZFJlcXVlc3RFeHQgIT09IG51bGwpXG4gICAgICB0aHJvdyBcInJlcXVlc3RFeHRlbnNpb25zIG5vdCBzdXBwb3J0ZWRcIjtcbiAgICB2YXIgdSA9IG5ldyBpKHsgYXJyYXk6IG4gfSk7XG4gICAgcmV0dXJuIHRoaXMuaFRMViA9IHUudG9oZXgoKSwgdGhpcy5oVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgZS5yZXFMaXN0ICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRSZXF1ZXN0TGlzdEJ5UGFyYW0oZS5yZXFMaXN0KTtcbn07XG5OKGEuYXNuMS5vY3NwLlRCU1JlcXVlc3QsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLk9DU1BSZXF1ZXN0ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5vY3NwO1xuICBpZiAocy5PQ1NQUmVxdWVzdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuZFRic1JlcXVlc3QgPSBudWxsLCB0aGlzLmRPcHRpb25hbFNpZ25hdHVyZSA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IFtdO1xuICAgIGlmICh0aGlzLmRUYnNSZXF1ZXN0ICE9PSBudWxsKVxuICAgICAgaC5wdXNoKHRoaXMuZFRic1JlcXVlc3QpO1xuICAgIGVsc2VcbiAgICAgIHRocm93IFwidGJzUmVxdWVzdCBub3Qgc2V0XCI7XG4gICAgaWYgKHRoaXMuZE9wdGlvbmFsU2lnbmF0dXJlICE9PSBudWxsKVxuICAgICAgdGhyb3cgXCJvcHRpb25hbFNpZ25hdHVyZSBub3Qgc3VwcG9ydGVkXCI7XG4gICAgdmFyIHUgPSBuZXcgaSh7IGFycmF5OiBoIH0pO1xuICAgIHJldHVybiB0aGlzLmhUTFYgPSB1LnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIGUucmVxTGlzdCAhPT0gdm9pZCAwKSB7XG4gICAgdmFyIG4gPSBuZXcgcy5UQlNSZXF1ZXN0KGUpO1xuICAgIHRoaXMuZFRic1JlcXVlc3QgPSBuO1xuICB9XG59O1xuTihhLmFzbjEub2NzcC5PQ1NQUmVxdWVzdCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLm9jc3AuT0NTUFV0aWwgPSB7fTtcbmEuYXNuMS5vY3NwLk9DU1BVdGlsLmdldFJlcXVlc3RIZXggPSBmdW5jdGlvbihlLCB0LCByKSB7XG4gIHZhciBpID0gYSwgcyA9IGkuYXNuMSwgbiA9IHMub2NzcDtcbiAgciA9PT0gdm9pZCAwICYmIChyID0gbi5ERUZBVUxUX0hBU0gpO1xuICB2YXIgaCA9IHsgYWxnOiByLCBpc3N1ZXJDZXJ0OiBlLCBzdWJqZWN0Q2VydDogdCB9LCB1ID0gbmV3IG4uT0NTUFJlcXVlc3QoeyByZXFMaXN0OiBbaF0gfSk7XG4gIHJldHVybiB1LnRvaGV4KCk7XG59O1xuYS5hc24xLm9jc3AuT0NTUFV0aWwuZ2V0T0NTUFJlc3BvbnNlSW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWLCByID0gdC5nZXRWYnlMaXN0LCBpID0gdC5nZXRWYnlMaXN0RXgsIHMgPSB0LmdldElkeGJ5TGlzdDtcbiAgdC5nZXRJZHhieUxpc3RFeDtcbiAgdmFyIG4gPSB0LmdldFYsIGggPSB7fTtcbiAgdHJ5IHtcbiAgICB2YXIgdSA9IGkoZSwgMCwgWzBdLCBcIjBhXCIpO1xuICAgIGgucmVzcG9uc2VTdGF0dXMgPSBwYXJzZUludCh1LCAxNik7XG4gIH0gY2F0Y2gge1xuICB9XG4gIGlmIChoLnJlc3BvbnNlU3RhdHVzICE9PSAwKVxuICAgIHJldHVybiBoO1xuICB0cnkge1xuICAgIHZhciBwID0gcyhlLCAwLCBbMSwgMCwgMSwgMCwgMCwgMiwgMCwgMV0pO1xuICAgIGUuc3Vic3RyKHAsIDIpID09PSBcIjgwXCIgPyBoLmNlcnRTdGF0dXMgPSBcImdvb2RcIiA6IGUuc3Vic3RyKHAsIDIpID09PSBcImExXCIgPyAoaC5jZXJ0U3RhdHVzID0gXCJyZXZva2VkXCIsIGgucmV2b2NhdGlvblRpbWUgPSBXKHIoZSwgcCwgWzBdKSkpIDogZS5zdWJzdHIocCwgMikgPT09IFwiODJcIiAmJiAoaC5jZXJ0U3RhdHVzID0gXCJ1bmtub3duXCIpO1xuICB9IGNhdGNoIHtcbiAgfVxuICB0cnkge1xuICAgIHZhciBjID0gcyhlLCAwLCBbMSwgMCwgMSwgMCwgMCwgMiwgMCwgMl0pO1xuICAgIGgudGhpc1VwZGF0ZSA9IFcobihlLCBjKSk7XG4gIH0gY2F0Y2gge1xuICB9XG4gIHRyeSB7XG4gICAgdmFyIHkgPSBzKGUsIDAsIFsxLCAwLCAxLCAwLCAwLCAyLCAwLCAzXSk7XG4gICAgZS5zdWJzdHIoeSwgMikgPT09IFwiYTBcIiAmJiAoaC5uZXh0VXBkYXRlID0gVyhyKGUsIHksIFswXSkpKTtcbiAgfSBjYXRjaCB7XG4gIH1cbiAgcmV0dXJuIGg7XG59O1xuYS5hc24xLm9jc3AuT0NTUFBhcnNlciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IEVycm9yLCB0ID0gTCwgciA9IG5ldyB0KCksIGkgPSBWLCBzID0gaS5nZXRWLCBuID0gaS5nZXRUTFYsIGggPSBpLmdldElkeGJ5TGlzdCwgdSA9IGkuZ2V0VmJ5TGlzdCwgcCA9IGkuZ2V0VExWYnlMaXN0LCBjID0gaS5nZXRWYnlMaXN0RXgsIHkgPSBpLmdldFRMVmJ5TGlzdEV4LCB2ID0gaS5nZXRDaGlsZElkeDtcbiAgdGhpcy5nZXRPQ1NQUmVxdWVzdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbCA9IHYobywgMCk7XG4gICAgaWYgKGwubGVuZ3RoICE9IDEgJiYgbC5sZW5ndGggIT0gMilcbiAgICAgIHRocm93IG5ldyBlKFwid3JvbmcgbnVtYmVyIGVsZW1lbnRzOiBcIiArIGwubGVuZ3RoKTtcbiAgICB2YXIgZiA9IHRoaXMuZ2V0VEJTUmVxdWVzdChuKG8sIGxbMF0pKTtcbiAgICByZXR1cm4gZjtcbiAgfSwgdGhpcy5nZXRUQlNSZXF1ZXN0ID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsID0ge30sIGYgPSB5KG8sIDAsIFswXSwgXCIzMFwiKTtcbiAgICBsLmFycmF5ID0gdGhpcy5nZXRSZXF1ZXN0TGlzdChmKTtcbiAgICB2YXIgZCA9IHkobywgMCwgW1wiWzJdXCIsIDBdLCBcIjMwXCIpO1xuICAgIHJldHVybiBkICE9IG51bGwgJiYgKGwuZXh0ID0gci5nZXRFeHRQYXJhbUFycmF5KGQpKSwgbDtcbiAgfSwgdGhpcy5nZXRSZXF1ZXN0TGlzdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICBmb3IgKHZhciBsID0gW10sIGYgPSB2KG8sIDApLCBkID0gMDsgZCA8IGYubGVuZ3RoOyBkKyspIHtcbiAgICAgIHZhciBvID0gbihvLCBmW2RdKTtcbiAgICAgIGwucHVzaCh0aGlzLmdldFJlcXVlc3QobykpO1xuICAgIH1cbiAgICByZXR1cm4gbDtcbiAgfSwgdGhpcy5nZXRSZXF1ZXN0ID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsID0gdihvLCAwKTtcbiAgICBpZiAobC5sZW5ndGggIT0gMSAmJiBsLmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IGUoXCJ3cm9uZyBudW1iZXIgZWxlbWVudHM6IFwiICsgbC5sZW5ndGgpO1xuICAgIHZhciBmID0gdGhpcy5nZXRDZXJ0SUQobihvLCBsWzBdKSk7XG4gICAgaWYgKGwubGVuZ3RoID09IDIpIHtcbiAgICAgIHZhciBkID0gaChvLCAwLCBbMSwgMF0pO1xuICAgICAgZi5leHQgPSByLmdldEV4dFBhcmFtQXJyYXkobihvLCBkKSk7XG4gICAgfVxuICAgIHJldHVybiBmO1xuICB9LCB0aGlzLmdldENlcnRJRCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbCA9IHYobywgMCk7XG4gICAgaWYgKGwubGVuZ3RoICE9IDQpXG4gICAgICB0aHJvdyBuZXcgZShcIndyb25nIG51bWJlciBlbGVtZW50czogXCIgKyBsLmxlbmd0aCk7XG4gICAgdmFyIGYgPSBuZXcgdCgpLCBkID0ge307XG4gICAgcmV0dXJuIGQuYWxnID0gZi5nZXRBbGdvcml0aG1JZGVudGlmaWVyTmFtZShuKG8sIGxbMF0pKSwgZC5pc3NuYW1lID0gcyhvLCBsWzFdKSwgZC5pc3NrZXkgPSBzKG8sIGxbMl0pLCBkLnNianNuID0gcyhvLCBsWzNdKSwgZDtcbiAgfSwgdGhpcy5nZXRPQ1NQUmVzcG9uc2UgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGwgPSB2KG8sIDApLCBmLCBkID0gcyhvLCBsWzBdKSwgZyA9IHBhcnNlSW50KGQpO1xuICAgIGlmIChsLmxlbmd0aCA9PSAxKVxuICAgICAgcmV0dXJuIHsgcmVzc3RhdHVzOiBnIH07XG4gICAgdmFyIFMgPSBwKG8sIDAsIFsxLCAwXSk7XG4gICAgcmV0dXJuIGYgPSB0aGlzLmdldFJlc3BvbnNlQnl0ZXMoUyksIGYucmVzc3RhdHVzID0gZywgZjtcbiAgfSwgdGhpcy5nZXRSZXNwb25zZUJ5dGVzID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsID0gdihvLCAwKSwgZiwgZCA9IHAobywgMCwgWzEsIDBdKTtcbiAgICBmID0gdGhpcy5nZXRCYXNpY09DU1BSZXNwb25zZShkKTtcbiAgICB2YXIgZyA9IHMobywgbFswXSk7XG4gICAgcmV0dXJuIGYucmVzdHlwZSA9IGEuYXNuMS54NTA5Lk9JRC5vaWQybmFtZShmdChnKSksIGY7XG4gIH0sIHRoaXMuZ2V0QmFzaWNPQ1NQUmVzcG9uc2UgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGwgPSB2KG8sIDApLCBmO1xuICAgIGYgPSB0aGlzLmdldFJlc3BvbnNlRGF0YShuKG8sIGxbMF0pKTtcbiAgICB2YXIgZCA9IG5ldyBMKCk7XG4gICAgZi5hbGcgPSBkLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lKG4obywgbFsxXSkpO1xuICAgIHZhciBnID0gcyhvLCBsWzJdKTtcbiAgICBmLnNpZ2hleCA9IGcuc3Vic3RyKDIpO1xuICAgIHZhciBTID0gYyhvLCAwLCBbXCJbMF1cIl0pO1xuICAgIGlmIChTICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIGIgPSB2KFMsIDApLCBEID0gW10sIEEgPSAwOyBBIDwgYi5sZW5ndGg7IEErKykge1xuICAgICAgICB2YXIgSSA9IG4oUywgYltBXSk7XG4gICAgICAgIEQucHVzaChJKTtcbiAgICAgIH1cbiAgICAgIGYuY2VydHMgPSBEO1xuICAgIH1cbiAgICByZXR1cm4gZjtcbiAgfSwgdGhpcy5nZXRSZXNwb25zZURhdGEgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGwgPSB2KG8sIDApLCBmID0gbC5sZW5ndGgsIGQgPSB7fSwgZyA9IDA7XG4gICAgby5zdWJzdHIobFswXSwgMikgPT0gXCJhMFwiICYmIGcrKywgZC5yZXNwaWQgPSB0aGlzLmdldFJlc3BvbmRlcklEKG4obywgbFtnKytdKSk7XG4gICAgdmFyIFMgPSBzKG8sIGxbZysrXSk7XG4gICAgaWYgKGQucHJvZGF0ID0gVyhTKSwgZC5hcnJheSA9IHRoaXMuZ2V0U2luZ2xlUmVzcG9uc2VMaXN0KG4obywgbFtnKytdKSksIG8uc3Vic3RyKGxbZiAtIDFdLCAyKSA9PSBcImExXCIpIHtcbiAgICAgIHZhciBiID0gcChvLCBsW2YgLSAxXSwgWzBdKSwgRCA9IG5ldyBMKCk7XG4gICAgICBkLmV4dCA9IEQuZ2V0RXh0UGFyYW1BcnJheShiKTtcbiAgICB9XG4gICAgcmV0dXJuIGQ7XG4gIH0sIHRoaXMuZ2V0UmVzcG9uZGVySUQgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGwgPSB7fTtcbiAgICBpZiAoby5zdWJzdHIoMCwgMikgPT0gXCJhMlwiKSB7XG4gICAgICB2YXIgZiA9IHUobywgMCwgWzBdKTtcbiAgICAgIGwua2V5ID0gZjtcbiAgICB9XG4gICAgaWYgKG8uc3Vic3RyKDAsIDIpID09IFwiYTFcIikge1xuICAgICAgdmFyIGQgPSBwKG8sIDAsIFswXSksIGcgPSBuZXcgTCgpO1xuICAgICAgbC5uYW1lID0gZy5nZXRYNTAwTmFtZShkKTtcbiAgICB9XG4gICAgcmV0dXJuIGw7XG4gIH0sIHRoaXMuZ2V0U2luZ2xlUmVzcG9uc2VMaXN0ID0gZnVuY3Rpb24obykge1xuICAgIGZvciAodmFyIGwgPSB2KG8sIDApLCBmID0gW10sIGQgPSAwOyBkIDwgbC5sZW5ndGg7IGQrKykge1xuICAgICAgdmFyIGcgPSB0aGlzLmdldFNpbmdsZVJlc3BvbnNlKG4obywgbFtkXSkpO1xuICAgICAgZi5wdXNoKGcpO1xuICAgIH1cbiAgICByZXR1cm4gZjtcbiAgfSwgdGhpcy5nZXRTaW5nbGVSZXNwb25zZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbCA9IHYobywgMCksIGYgPSB7fSwgZCA9IHRoaXMuZ2V0Q2VydElEKG4obywgbFswXSkpO1xuICAgIGYuY2VydGlkID0gZDtcbiAgICB2YXIgZyA9IHRoaXMuZ2V0Q2VydFN0YXR1cyhuKG8sIGxbMV0pKTtcbiAgICBpZiAoZi5zdGF0dXMgPSBnLCBvLnN1YnN0cihsWzJdLCAyKSA9PSBcIjE4XCIpIHtcbiAgICAgIHZhciBTID0gcyhvLCBsWzJdKTtcbiAgICAgIGYudGhpc3VwZGF0ZSA9IFcoUyk7XG4gICAgfVxuICAgIGZvciAodmFyIGIgPSAzOyBiIDwgbC5sZW5ndGg7IGIrKykge1xuICAgICAgaWYgKG8uc3Vic3RyKGxbYl0sIDIpID09IFwiYTBcIikge1xuICAgICAgICB2YXIgRCA9IHUobywgbFtiXSwgWzBdLCBcIjE4XCIpO1xuICAgICAgICBmLm5leHR1cGRhdGUgPSBXKEQpO1xuICAgICAgfVxuICAgICAgaWYgKG8uc3Vic3RyKGxbYl0sIDIpID09IFwiYTFcIikge1xuICAgICAgICB2YXIgQSA9IG5ldyBMKCksIEkgPSBwKG8sIDAsIFtiLCAwXSk7XG4gICAgICAgIGYuZXh0ID0gQS5nZXRFeHRQYXJhbUFycmF5KEkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZjtcbiAgfSwgdGhpcy5nZXRDZXJ0U3RhdHVzID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsID0ge307XG4gICAgaWYgKG8gPT0gXCI4MDAwXCIpXG4gICAgICByZXR1cm4geyBzdGF0dXM6IFwiZ29vZFwiIH07XG4gICAgaWYgKG8gPT0gXCI4MjAwXCIpXG4gICAgICByZXR1cm4geyBzdGF0dXM6IFwidW5rbm93blwiIH07XG4gICAgaWYgKG8uc3Vic3RyKDAsIDIpID09IFwiYTFcIikge1xuICAgICAgbC5zdGF0dXMgPSBcInJldm9rZWRcIjtcbiAgICAgIHZhciBmID0gdShvLCAwLCBbMF0pLCBkID0gVyhmKTtcbiAgICAgIGwudGltZSA9IGQ7XG4gICAgfVxuICAgIHJldHVybiBsO1xuICB9O1xufTtcbnZhciBhO1xuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmxhbmcgPiBcInVcIiB8fCAhYS5sYW5nKSAmJiAoYS5sYW5nID0ge30pO1xuYS5sYW5nLlN0cmluZyA9IGZ1bmN0aW9uKCkge1xufTtcbmZ1bmN0aW9uIGhuKGUpIHtcbiAgZm9yICh2YXIgdCA9IG5ldyBBcnJheSgpLCByID0gMDsgciA8IGUubGVuZ3RoOyByKyspXG4gICAgdFtyXSA9IGUuY2hhckNvZGVBdChyKTtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBvdChlKSB7XG4gIGZvciAodmFyIHQgPSBcIlwiLCByID0gMDsgciA8IGUubGVuZ3RoOyByKyspIHtcbiAgICB2YXIgaSA9IGVbcl0udG9TdHJpbmcoMTYpO1xuICAgIGkubGVuZ3RoID09IDEgJiYgKGkgPSBcIjBcIiArIGkpLCB0ID0gdCArIGk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBFZShlKSB7XG4gIHJldHVybiBvdChobihlKSk7XG59XG5mdW5jdGlvbiBYZShlKSB7XG4gIHJldHVybiBlID0gZS5yZXBsYWNlKC9cXD0vZywgXCJcIiksIGUgPSBlLnJlcGxhY2UoL1xcKy9nLCBcIi1cIiksIGUgPSBlLnJlcGxhY2UoL1xcLy9nLCBcIl9cIiksIGU7XG59XG5mdW5jdGlvbiB1dChlKSB7XG4gIHJldHVybiBlLmxlbmd0aCAlIDQgPT0gMiA/IGUgPSBlICsgXCI9PVwiIDogZS5sZW5ndGggJSA0ID09IDMgJiYgKGUgPSBlICsgXCI9XCIpLCBlID0gZS5yZXBsYWNlKC8tL2csIFwiK1wiKSwgZSA9IGUucmVwbGFjZSgvXy9nLCBcIi9cIiksIGU7XG59XG5mdW5jdGlvbiBhZShlKSB7XG4gIHJldHVybiBlLmxlbmd0aCAlIDIgPT0gMSAmJiAoZSA9IFwiMFwiICsgZSksIFhlKF9lKGUpKTtcbn1cbmZ1bmN0aW9uIFkoZSkge1xuICByZXR1cm4gaXQodXQoZSkpO1xufVxudmFyIEplLCB3ZTtcbnR5cGVvZiBCdWZmZXIgPT0gXCJmdW5jdGlvblwiID8gKEplID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gWGUoQnVmZmVyLmZyb20oZSwgXCJ1dGY4XCIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpKTtcbn0sIHdlID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gQnVmZmVyLmZyb20odXQoZSksIFwiYmFzZTY0XCIpLnRvU3RyaW5nKFwidXRmOFwiKTtcbn0pIDogKEplID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gYWUoSXQoQnQoZSkpKTtcbn0sIHdlID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KEN0KFkoZSkpKTtcbn0pO1xuZnVuY3Rpb24gaHQoZSkge1xuICByZXR1cm4gSXQoQnQoZSkpLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiBXKGUpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KEN0KGUpKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIGZuKGUpIHtcbiAgcmV0dXJuIFcoY24oZSkpO1xufVxuZnVuY3Rpb24gY24oZSkge1xuICBmb3IgKHZhciB0ID0gZS5tYXRjaCgvLnsxLDJ9L2cpLCByID0gW10sIGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzID0gcGFyc2VJbnQodFtpXSwgMTYpO1xuICAgIDE2MSA8PSBzICYmIHMgPD0gMTkxID8gKHIucHVzaChcImMyXCIpLCByLnB1c2godFtpXSkpIDogMTkyIDw9IHMgJiYgcyA8PSAyNTUgPyAoci5wdXNoKFwiYzNcIiksIHIucHVzaCgocyAtIDY0KS50b1N0cmluZygxNikpKSA6IHIucHVzaCh0W2ldKTtcbiAgfVxuICByZXR1cm4gci5qb2luKFwiXCIpO1xufVxuZnVuY3Rpb24gQWUoZSkge1xuICBmb3IgKHZhciB0ID0gXCJcIiwgciA9IDA7IHIgPCBlLmxlbmd0aCAtIDE7IHIgKz0gMilcbiAgICB0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZS5zdWJzdHIociwgMiksIDE2KSk7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gUGUoZSkge1xuICBmb3IgKHZhciB0ID0gXCJcIiwgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKVxuICAgIHQgKz0gKFwiMFwiICsgZS5jaGFyQ29kZUF0KHIpLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIGxuKGUpIHtcbiAgcmV0dXJuIF9lKGUpO1xufVxuZnVuY3Rpb24gZG4oZSwgdCkge1xuICByZXR1cm4gZSA9IGUucmVwbGFjZShuZXcgUmVnRXhwKFwiKC57XCIgKyB0ICsgXCJ9KVwiLCBcImdcIiksIGAkMVxcclxuYCksIGUgPSBlLnJlcGxhY2UoL1xccyskLywgXCJcIiksIGU7XG59XG5mdW5jdGlvbiBwbihlKSB7XG4gIHZhciB0ID0gZS5yZXBsYWNlKC9bXjAtOUEtWmEtelxcLys9XSovZywgXCJcIiksIHIgPSBpdCh0KTtcbiAgcmV0dXJuIHI7XG59XG5mdW5jdGlvbiBkZShlLCB0KSB7XG4gIHJldHVybiBcIi0tLS0tQkVHSU4gXCIgKyB0ICsgYC0tLS0tXFxyXG5gICsgZG4obG4oZSksIDY0KSArIGBcXHJcbi0tLS0tRU5EIGAgKyB0ICsgYC0tLS0tXFxyXG5gO1xufVxuZnVuY3Rpb24gaWUoZSwgdCkge1xuICBpZiAoZS5pbmRleE9mKFwiLS0tLS1CRUdJTiBcIikgPT0gLTEpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiY2FuJ3QgZmluZCBQRU0gaGVhZGVyXCIpO1xuICByZXR1cm4gdCAhPT0gdm9pZCAwID8gKGUgPSBlLnJlcGxhY2UobmV3IFJlZ0V4cChcIl5bXl0qLS0tLS1CRUdJTiBcIiArIHQgKyBcIi0tLS0tXCIpLCBcIlwiKSwgZSA9IGUucmVwbGFjZShuZXcgUmVnRXhwKFwiLS0tLS1FTkQgXCIgKyB0ICsgXCItLS0tLVteXSokXCIpLCBcIlwiKSkgOiAoZSA9IGUucmVwbGFjZSgvXlteXSotLS0tLUJFR0lOIFteLV0rLS0tLS0vLCBcIlwiKSwgZSA9IGUucmVwbGFjZSgvLS0tLS1FTkQgW14tXSstLS0tLVteXSokLywgXCJcIikpLCBwbihlKTtcbn1cbmZ1bmN0aW9uIHZuKGUpIHtcbiAgdmFyIHQsIHIsIGksIHMsIG4sIGgsIHUsIHAsIGMsIHk7XG4gIGlmIChlID0geW4oZSksIHkgPSBlLm1hdGNoKC9eKFxcZHs0fSkoXFxkXFxkKShcXGRcXGQpKFxcZFxcZCkoXFxkXFxkKShcXGRcXGQpKHxcXC5cXGQrKVokLyksIHkpXG4gICAgcmV0dXJuIHQgPSBwYXJzZUludCh5WzFdKSwgciA9IHBhcnNlSW50KHlbMl0pIC0gMSwgaSA9IHBhcnNlSW50KHlbM10pLCBzID0gcGFyc2VJbnQoeVs0XSksIG4gPSBwYXJzZUludCh5WzVdKSwgaCA9IHBhcnNlSW50KHlbNl0pLCB1ID0gMCwgcCA9IHlbN10sIHAgIT09IFwiXCIgJiYgKGMgPSAocC5zdWJzdHIoMSkgKyBcIjAwXCIpLnN1YnN0cigwLCAzKSwgdSA9IHBhcnNlSW50KGMpKSwgRGF0ZS5VVEModCwgciwgaSwgcywgbiwgaCwgdSk7XG4gIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIHp1bHUgZm9ybWF0OiBcIiArIGUpO1xufVxuZnVuY3Rpb24gZ24oZSkge1xuICByZXR1cm4gTWF0aC5yb3VuZCh2bihlKSAvIDFlMyk7XG59XG5mdW5jdGlvbiB5bihlKSB7XG4gIHJldHVybiBlLm1hdGNoKC9eWzAtOV17MTJ9WiQvKSB8fCBlLm1hdGNoKC9eWzAtOV17MTJ9Wy5dWzAtOV0qWiQvKSA/IGUubWF0Y2goL15bMC00XS8pID8gXCIyMFwiICsgZSA6IFwiMTlcIiArIGUgOiBlO1xufVxuZnVuY3Rpb24gSXQoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC8lL2csIFwiXCIpO1xufVxuZnVuY3Rpb24gQ3QoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC8oLi4pL2csIFwiJSQxXCIpO1xufVxuZnVuY3Rpb24gdnQoZSkge1xuICB2YXIgdCA9IFwibWFsZm9ybWVkIElQdjYgYWRkcmVzc1wiO1xuICBpZiAoIWUubWF0Y2goL15bMC05QS1GYS1mOl0rJC8pKVxuICAgIHRocm93IHQ7XG4gIGUgPSBlLnRvTG93ZXJDYXNlKCk7XG4gIHZhciByID0gZS5zcGxpdChcIjpcIikubGVuZ3RoIC0gMTtcbiAgaWYgKHIgPCAyKVxuICAgIHRocm93IHQ7XG4gIHZhciBpID0gXCI6XCIucmVwZWF0KDcgLSByICsgMik7XG4gIGUgPSBlLnJlcGxhY2UoXCI6OlwiLCBpKTtcbiAgdmFyIHMgPSBlLnNwbGl0KFwiOlwiKTtcbiAgaWYgKHMubGVuZ3RoICE9IDgpXG4gICAgdGhyb3cgdDtcbiAgZm9yICh2YXIgbiA9IDA7IG4gPCA4OyBuKyspXG4gICAgc1tuXSA9IChcIjAwMDBcIiArIHNbbl0pLnNsaWNlKC00KTtcbiAgcmV0dXJuIHMuam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIGd0KGUpIHtcbiAgaWYgKCFlLm1hdGNoKC9eWzAtOUEtRmEtZl17MzJ9JC8pKVxuICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBJUHY2IGFkZHJlc3M6IFwiICsgZSk7XG4gIGUgPSBlLnRvTG93ZXJDYXNlKCk7XG4gIHZhciB0ID0gZS5tYXRjaCgvLnsxLDR9L2cpO1xuICB0ID0gdC5tYXAoZnVuY3Rpb24ocykge1xuICAgIHJldHVybiBzLnJlcGxhY2UoL14wKy8sIFwiXCIpO1xuICB9KSwgdCA9IHQubWFwKGZ1bmN0aW9uKHMpIHtcbiAgICByZXR1cm4gcyA9PSBcIlwiID8gXCIwXCIgOiBzO1xuICB9KSwgZSA9IFwiOlwiICsgdC5qb2luKFwiOlwiKSArIFwiOlwiO1xuICB2YXIgciA9IGUubWF0Y2goLzooMDopezIsfS9nKTtcbiAgaWYgKHIgPT0gbnVsbClcbiAgICByZXR1cm4gZS5zbGljZSgxLCAtMSk7XG4gIHZhciBpID0gci5zb3J0KCkuc2xpY2UoLTEpWzBdO1xuICByZXR1cm4gZSA9IGUucmVwbGFjZShpLnN1YnN0cigwLCBpLmxlbmd0aCAtIDEpLCBcIjpcIiksIGUuc3Vic3RyKDAsIDIpICE9IFwiOjpcIiAmJiAoZSA9IGUuc3Vic3RyKDEpKSwgZS5zdWJzdHIoLTIsIDIpICE9IFwiOjpcIiAmJiAoZSA9IGUuc3Vic3RyKDAsIGUubGVuZ3RoIC0gMSkpLCBlO1xufVxuZnVuY3Rpb24gdHQoZSkge1xuICB2YXIgdCA9IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBoZXggdmFsdWVcIik7XG4gIGlmICghZS5tYXRjaCgvXihbMC05QS1GYS1mXVswLTlBLUZhLWZdKXsxLH0kLykpXG4gICAgdGhyb3cgdDtcbiAgaWYgKGUubGVuZ3RoID09IDgpIHtcbiAgICB2YXIgcjtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHIgPSBwYXJzZUludChlLnN1YnN0cigwLCAyKSwgMTYpICsgXCIuXCIgKyBwYXJzZUludChlLnN1YnN0cigyLCAyKSwgMTYpICsgXCIuXCIgKyBwYXJzZUludChlLnN1YnN0cig0LCAyKSwgMTYpICsgXCIuXCIgKyBwYXJzZUludChlLnN1YnN0cig2LCAyKSwgMTYpLCByO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgdDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZS5sZW5ndGggPT0gMTYpXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0dChlLnN1YnN0cigwLCA4KSkgKyBcIi9cIiArIHl0KGUuc3Vic3RyKDgpKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IHQ7XG4gICAgfVxuICBlbHNlIHtcbiAgICBpZiAoZS5sZW5ndGggPT0gMzIpXG4gICAgICByZXR1cm4gZ3QoZSk7XG4gICAgaWYgKGUubGVuZ3RoID09IDY0KSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gZ3QoZS5zdWJzdHIoMCwgMzIpKSArIFwiL1wiICsgeXQoZS5zdWJzdHIoMzIpKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICB0aHJvdyB0O1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZVxuICAgICAgcmV0dXJuIGU7XG4gIH1cbn1cbmZ1bmN0aW9uIHl0KGUpIHtcbiAgdmFyIHQgPSBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgbWFza1wiKSwgcjtcbiAgdHJ5IHtcbiAgICByID0gbmV3IFIoZSwgMTYpLnRvU3RyaW5nKDIpO1xuICB9IGNhdGNoIHtcbiAgICB0aHJvdyB0O1xuICB9XG4gIGlmICghci5tYXRjaCgvXjEqMCokLykpXG4gICAgdGhyb3cgdDtcbiAgcmV0dXJuIHIucmVwbGFjZSgvMCskLywgXCJcIikubGVuZ3RoO1xufVxuZnVuY3Rpb24gUnQoZSkge1xuICB2YXIgdCA9IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBJUCBhZGRyZXNzXCIpO1xuICBpZiAoZSA9IGUudG9Mb3dlckNhc2UoZSksICFlLm1hdGNoKC9eWzAtOWEtZi46L10rJC8pKVxuICAgIHRocm93IHQ7XG4gIGlmIChlLm1hdGNoKC9eWzAtOS5dKyQvKSkge1xuICAgIHZhciByID0gZS5zcGxpdChcIi5cIik7XG4gICAgaWYgKHIubGVuZ3RoICE9PSA0KVxuICAgICAgdGhyb3cgdDtcbiAgICB2YXIgaSA9IFwiXCI7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgNDsgcysrKSB7XG4gICAgICAgIHZhciBuID0gcGFyc2VJbnQocltzXSk7XG4gICAgICAgIGkgKz0gKFwiMFwiICsgbi50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgdDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZS5tYXRjaCgvXlswLTkuXStcXC9bMC05XSskLykpIHtcbiAgICB2YXIgaCA9IGUuc3BsaXQoXCIvXCIpO1xuICAgIHJldHVybiBSdChoWzBdKSArIG10KHBhcnNlSW50KGhbMV0pLCAzMik7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGUubWF0Y2goL15bMC05YS1mOl0rJC8pICYmIGUuaW5kZXhPZihcIjpcIikgIT09IC0xKVxuICAgICAgcmV0dXJuIHZ0KGUpO1xuICAgIGlmIChlLm1hdGNoKC9eWzAtOWEtZjpdK1xcL1swLTldKyQvKSAmJiBlLmluZGV4T2YoXCI6XCIpICE9PSAtMSkge1xuICAgICAgdmFyIGggPSBlLnNwbGl0KFwiL1wiKTtcbiAgICAgIHJldHVybiB2dChoWzBdKSArIG10KHBhcnNlSW50KGhbMV0pLCAxMjgpO1xuICAgIH0gZWxzZVxuICAgICAgdGhyb3cgdDtcbiAgfVxufVxuZnVuY3Rpb24gbXQoZSwgdCkge1xuICBpZiAodCA9PSAzMiAmJiBlID09IDApXG4gICAgcmV0dXJuIFwiMDAwMDAwMDBcIjtcbiAgaWYgKHQgPT0gMTI4ICYmIGUgPT0gMClcbiAgICByZXR1cm4gXCIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMFwiO1xuICB2YXIgciA9IEFycmF5KGUgKyAxKS5qb2luKFwiMVwiKSArIEFycmF5KHQgLSBlICsgMSkuam9pbihcIjBcIik7XG4gIHJldHVybiBuZXcgUihyLCAyKS50b1N0cmluZygxNik7XG59XG5mdW5jdGlvbiBUdChlKSB7XG4gIGZ1bmN0aW9uIHQocykge1xuICAgIHZhciBuID0gcGFyc2VJbnQocy5zdWJzdHIoMCwgMiksIDE2KSwgaCA9IHBhcnNlSW50KHMuc3Vic3RyKDIpLCAxNik7XG4gICAgaWYgKG4gPT0gMCAmIGggPCAxMjgpXG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShoKTtcbiAgICBpZiAobiA8IDgpIHtcbiAgICAgIHZhciB1ID0gMTkyIHwgKG4gJiA3KSA8PCAzIHwgKGggJiAxOTIpID4+IDYsIHAgPSAxMjggfCBoICYgNjM7XG4gICAgICByZXR1cm4gVyh1LnRvU3RyaW5nKDE2KSArIHAudG9TdHJpbmcoMTYpKTtcbiAgICB9XG4gICAgdmFyIHUgPSAyMjQgfCAobiAmIDI0MCkgPj4gNCwgcCA9IDEyOCB8IChuICYgMTUpIDw8IDIgfCAoaCAmIDE5MikgPj4gNiwgYyA9IDEyOCB8IGggJiA2MztcbiAgICByZXR1cm4gVyh1LnRvU3RyaW5nKDE2KSArIHAudG9TdHJpbmcoMTYpICsgYy50b1N0cmluZygxNikpO1xuICB9XG4gIHZhciByID0gZS5tYXRjaCgvLns0fS9nKSwgaSA9IHIubWFwKHQpO1xuICByZXR1cm4gaS5qb2luKFwiXCIpO1xufVxuZnVuY3Rpb24gQnQoZSkge1xuICBmb3IgKHZhciB0ID0gZW5jb2RlVVJJQ29tcG9uZW50KGUpLCByID0gXCJcIiwgaSA9IDA7IGkgPCB0Lmxlbmd0aDsgaSsrKVxuICAgIHRbaV0gPT0gXCIlXCIgPyAociA9IHIgKyB0LnN1YnN0cihpLCAzKSwgaSA9IGkgKyAyKSA6IHIgPSByICsgXCIlXCIgKyBFZSh0W2ldKTtcbiAgcmV0dXJuIHI7XG59XG5hLmxhbmcuU3RyaW5nLmlzSW50ZWdlciA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUubWF0Y2goL15bMC05XSskLykgPyAhMCA6ICEhZS5tYXRjaCgvXi1bMC05XSskLyk7XG59O1xuYS5sYW5nLlN0cmluZy5pc0hleCA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIE50KGUpO1xufTtcbmZ1bmN0aW9uIE50KGUpIHtcbiAgcmV0dXJuICEhKGUubGVuZ3RoICUgMiA9PSAwICYmIChlLm1hdGNoKC9eWzAtOWEtZl0rJC8pIHx8IGUubWF0Y2goL15bMC05QS1GXSskLykpKTtcbn1cbmEubGFuZy5TdHJpbmcuaXNCYXNlNjQgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlID0gZS5yZXBsYWNlKC9cXHMrL2csIFwiXCIpLCAhIShlLm1hdGNoKC9eWzAtOUEtWmEteitcXC9dKz17MCwzfSQvKSAmJiBlLmxlbmd0aCAlIDQgPT0gMCk7XG59O1xuYS5sYW5nLlN0cmluZy5pc0Jhc2U2NFVSTCA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUubWF0Y2goL1srLz1dLykgPyAhMSA6IChlID0gdXQoZSksIGEubGFuZy5TdHJpbmcuaXNCYXNlNjQoZSkpO1xufTtcbmZ1bmN0aW9uIEh0KGUpIHtcbiAgcmV0dXJuICEhZS5tYXRjaCgvXlswLTlBLVphLXotXy5dKyQvKTtcbn1cbmEubGFuZy5TdHJpbmcuaXNJbnRlZ2VyQXJyYXkgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlID0gZS5yZXBsYWNlKC9cXHMrL2csIFwiXCIpLCAhIWUubWF0Y2goL15cXFtbMC05LF0rXFxdJC8pO1xufTtcbmEubGFuZy5TdHJpbmcuaXNQcmludGFibGUgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlLm1hdGNoKC9eWzAtOUEtWmEteiAnKCkrLC0uLzo9P10qJC8pICE9PSBudWxsO1xufTtcbmEubGFuZy5TdHJpbmcuaXNJQTUgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlLm1hdGNoKC9eW1xceDIwLVxceDIxXFx4MjMtXFx4N2ZdKiQvKSAhPT0gbnVsbDtcbn07XG5hLmxhbmcuU3RyaW5nLmlzTWFpbCA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUubWF0Y2goL15bQS1aYS16MC05XXsxfVtBLVphLXowLTlfLi1dKkB7MX1bQS1aYS16MC05Xy4tXXsxLH1cXC5bQS1aYS16MC05XXsxLH0kLykgIT09IG51bGw7XG59O1xuZnVuY3Rpb24geHQoZSkge1xuICByZXR1cm4gZS5sZW5ndGggJSAyID09IDEgPyBcIjBcIiArIGUgOiBlLnN1YnN0cigwLCAxKSA+IFwiN1wiID8gXCIwMFwiICsgZSA6IGU7XG59XG5mdW5jdGlvbiBtbihlKSB7XG4gIHZhciB0ID0gZnVuY3Rpb24odSkge1xuICAgIHZhciBwID0gdS50b1N0cmluZygxNik7XG4gICAgcmV0dXJuIHAubGVuZ3RoID09IDEgJiYgKHAgPSBcIjBcIiArIHApLCBwO1xuICB9LCByID0gZnVuY3Rpb24odSkge1xuICAgIHZhciBwID0gXCJcIiwgYyA9IHBhcnNlSW50KHUsIDEwKSwgeSA9IGMudG9TdHJpbmcoMiksIHYgPSA3IC0geS5sZW5ndGggJSA3O1xuICAgIHYgPT0gNyAmJiAodiA9IDApO1xuICAgIGZvciAodmFyIG8gPSBcIlwiLCBsID0gMDsgbCA8IHY7IGwrKylcbiAgICAgIG8gKz0gXCIwXCI7XG4gICAgeSA9IG8gKyB5O1xuICAgIGZvciAodmFyIGwgPSAwOyBsIDwgeS5sZW5ndGggLSAxOyBsICs9IDcpIHtcbiAgICAgIHZhciBmID0geS5zdWJzdHIobCwgNyk7XG4gICAgICBsICE9IHkubGVuZ3RoIC0gNyAmJiAoZiA9IFwiMVwiICsgZiksIHAgKz0gdChwYXJzZUludChmLCAyKSk7XG4gICAgfVxuICAgIHJldHVybiBwO1xuICB9O1xuICB0cnkge1xuICAgIGlmICghZS5tYXRjaCgvXlswLTkuXSskLykpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB2YXIgaSA9IFwiXCIsIHMgPSBlLnNwbGl0KFwiLlwiKSwgbiA9IHBhcnNlSW50KHNbMF0sIDEwKSAqIDQwICsgcGFyc2VJbnQoc1sxXSwgMTApO1xuICAgIGkgKz0gdChuKSwgcy5zcGxpY2UoMCwgMik7XG4gICAgZm9yICh2YXIgaCA9IDA7IGggPCBzLmxlbmd0aDsgaCsrKVxuICAgICAgaSArPSByKHNbaF0pO1xuICAgIHJldHVybiBpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gZnQoZSkge1xuICBpZiAoIU50KGUpKVxuICAgIHJldHVybiBudWxsO1xuICB0cnkge1xuICAgIHZhciB0ID0gW10sIHIgPSBlLnN1YnN0cigwLCAyKSwgaSA9IHBhcnNlSW50KHIsIDE2KTtcbiAgICB0WzBdID0gbmV3IFN0cmluZyhNYXRoLmZsb29yKGkgLyA0MCkpLCB0WzFdID0gbmV3IFN0cmluZyhpICUgNDApO1xuICAgIGZvciAodmFyIHMgPSBlLnN1YnN0cigyKSwgbiA9IFtdLCBoID0gMDsgaCA8IHMubGVuZ3RoIC8gMjsgaCsrKVxuICAgICAgbi5wdXNoKHBhcnNlSW50KHMuc3Vic3RyKGggKiAyLCAyKSwgMTYpKTtcbiAgICBmb3IgKHZhciB1ID0gW10sIHAgPSBcIlwiLCBoID0gMDsgaCA8IG4ubGVuZ3RoOyBoKyspXG4gICAgICBuW2hdICYgMTI4ID8gcCA9IHAgKyBTdCgobltoXSAmIDEyNykudG9TdHJpbmcoMiksIDcpIDogKHAgPSBwICsgU3QoKG5baF0gJiAxMjcpLnRvU3RyaW5nKDIpLCA3KSwgdS5wdXNoKG5ldyBTdHJpbmcocGFyc2VJbnQocCwgMikpKSwgcCA9IFwiXCIpO1xuICAgIHZhciBjID0gdC5qb2luKFwiLlwiKTtcbiAgICByZXR1cm4gdS5sZW5ndGggPiAwICYmIChjID0gYyArIFwiLlwiICsgdS5qb2luKFwiLlwiKSksIGM7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiB4bihlKSB7XG4gIHZhciB0ID0gbmV3IFIoU3RyaW5nKGUpLCAxMCk7XG4gIHJldHVybiBaZSh0KTtcbn1cbmZ1bmN0aW9uIFplKGUpIHtcbiAgdmFyIHQgPSBlLnRvU3RyaW5nKDE2KTtcbiAgaWYgKHQuc3Vic3RyKDAsIDEpICE9IFwiLVwiKVxuICAgIHJldHVybiB0Lmxlbmd0aCAlIDIgPT0gMSA/IHQgPSBcIjBcIiArIHQgOiB0Lm1hdGNoKC9eWzAtN10vKSB8fCAodCA9IFwiMDBcIiArIHQpLCB0O1xuICB2YXIgciA9IHQuc3Vic3RyKDEpLCBpID0gci5sZW5ndGg7XG4gIGkgJSAyID09IDEgPyBpICs9IDEgOiB0Lm1hdGNoKC9eWzAtN10vKSB8fCAoaSArPSAyKTtcbiAgZm9yICh2YXIgcyA9IFwiXCIsIG4gPSAwOyBuIDwgaTsgbisrKVxuICAgIHMgKz0gXCJmXCI7XG4gIHZhciBoID0gbmV3IFIocywgMTYpLCB1ID0gaC54b3IoZSkuYWRkKFIuT05FKTtcbiAgcmV0dXJuIHQgPSB1LnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eLS8sIFwiXCIpLCB0O1xufVxudmFyIFN0ID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICByZXR1cm4gciA9PSBudWxsICYmIChyID0gXCIwXCIpLCBlLmxlbmd0aCA+PSB0ID8gZSA6IG5ldyBBcnJheSh0IC0gZS5sZW5ndGggKyAxKS5qb2luKHIpICsgZTtcbn07XG5mdW5jdGlvbiBTbihlKSB7XG4gIGlmIChlLmxlbmd0aCAlIDIgIT0gMCB8fCAoZSA9IGUudG9Mb3dlckNhc2UoKSwgZS5tYXRjaCgvXlswLTlhLWZdKyQvKSA9PSBudWxsKSlcbiAgICByZXR1cm4gLTE7XG4gIHRyeSB7XG4gICAgdmFyIHQgPSBlLnN1YnN0cigwLCAyKTtcbiAgICBpZiAodCA9PSBcIjAwXCIpXG4gICAgICByZXR1cm4gcGFyc2VJbnQoZS5zdWJzdHIoMiksIDE2KTtcbiAgICB2YXIgciA9IHBhcnNlSW50KHQsIDE2KTtcbiAgICBpZiAociA+IDcpXG4gICAgICByZXR1cm4gLTE7XG4gICAgdmFyIGkgPSBlLnN1YnN0cigyKSwgcyA9IHBhcnNlSW50KGksIDE2KS50b1N0cmluZygyKTtcbiAgICBzID09IFwiMFwiICYmIChzID0gXCIwMDAwMDAwMFwiKSwgcyA9IHMuc2xpY2UoMCwgMCAtIHIpO1xuICAgIHZhciBuID0gcGFyc2VJbnQocywgMik7XG4gICAgcmV0dXJuIG4gPT0gTmFOID8gLTEgOiBuO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbn1cbmZ1bmN0aW9uIEVuKGUpIHtcbiAgaWYgKHR5cGVvZiBlICE9IFwic3RyaW5nXCIgfHwgZS5sZW5ndGggJSAyICE9IDAgfHwgIWUubWF0Y2goL15bMC05YS1mXSskLykpXG4gICAgcmV0dXJuIG51bGw7XG4gIHRyeSB7XG4gICAgdmFyIHQgPSBwYXJzZUludChlLnN1YnN0cigwLCAyKSwgMTYpO1xuICAgIGlmICh0IDwgMCB8fCA3IDwgdClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGZvciAodmFyIHIgPSBlLnN1YnN0cigyKSwgaSA9IFwiXCIsIHMgPSAwOyBzIDwgci5sZW5ndGg7IHMgKz0gMikge1xuICAgICAgdmFyIG4gPSByLnN1YnN0cihzLCAyKSwgaCA9IHBhcnNlSW50KG4sIDE2KS50b1N0cmluZygyKTtcbiAgICAgIGggPSAoXCIwMDAwMDAwXCIgKyBoKS5zbGljZSgtOCksIGkgKz0gaDtcbiAgICB9XG4gICAgcmV0dXJuIGkuc3Vic3RyKDAsIGkubGVuZ3RoIC0gdCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBydChlLCB0KSB7XG4gIGZvciAodmFyIHIgPSAwLCBpID0gMDsgaSA8IGUubGVuZ3RoOyBpKyspXG4gICAgciB8PSAxIDw8IHRbZVtpXV07XG4gIGZvciAodmFyIHMgPSByLnRvU3RyaW5nKDIpLCBuID0gXCJcIiwgaSA9IHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgbiArPSBzW2ldO1xuICByZXR1cm4gbjtcbn1cbmZ1bmN0aW9uIEooZSwgaSwgcikge1xuICBpZiAodHlwZW9mIGUgPT0gXCJvYmplY3RcIikge1xuICAgIGZvciAodmFyIGkgPSBTdHJpbmcoaSkuc3BsaXQoXCIuXCIpLCBzID0gMDsgcyA8IGkubGVuZ3RoICYmIGU7IHMrKykge1xuICAgICAgdmFyIG4gPSBpW3NdO1xuICAgICAgbi5tYXRjaCgvXlswLTldKyQvKSAmJiAobiA9IHBhcnNlSW50KG4pKSwgZSA9IGVbbl07XG4gICAgfVxuICAgIHJldHVybiBlIHx8IGUgPT09ICExID8gZSA6IHI7XG4gIH1cbn1cbmZ1bmN0aW9uIE4oZSwgdCkge1xuICB2YXIgciA9IGZ1bmN0aW9uKCkge1xuICB9O1xuICByLnByb3RvdHlwZSA9IHQucHJvdG90eXBlLCBlLnByb3RvdHlwZSA9IG5ldyByKCksIGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gZSwgZS5zdXBlcmNsYXNzID0gdC5wcm90b3R5cGUsIHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID09IE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IgJiYgKHQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdCk7XG59XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuY3J5cHRvID4gXCJ1XCIgfHwgIWEuY3J5cHRvKSAmJiAoYS5jcnlwdG8gPSB7fSk7XG5hLmNyeXB0by5VdGlsID0gbmV3IGZ1bmN0aW9uKCkge1xuICB0aGlzLkRJR0VTVElORk9IRUFEID0geyBzaGExOiBcIjMwMjEzMDA5MDYwNTJiMGUwMzAyMWEwNTAwMDQxNFwiLCBzaGEyMjQ6IFwiMzAyZDMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjA0MDUwMDA0MWNcIiwgc2hhMjU2OiBcIjMwMzEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMTA1MDAwNDIwXCIsIHNoYTM4NDogXCIzMDQxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDIwNTAwMDQzMFwiLCBzaGE1MTI6IFwiMzA1MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAzMDUwMDA0NDBcIiwgbWQyOiBcIjMwMjAzMDBjMDYwODJhODY0ODg2ZjcwZDAyMDIwNTAwMDQxMFwiLCBtZDU6IFwiMzAyMDMwMGMwNjA4MmE4NjQ4ODZmNzBkMDIwNTA1MDAwNDEwXCIsIHJpcGVtZDE2MDogXCIzMDIxMzAwOTA2MDUyYjI0MDMwMjAxMDUwMDA0MTRcIiB9LCB0aGlzLkRFRkFVTFRQUk9WSURFUiA9IHsgbWQ1OiBcImNyeXB0b2pzXCIsIHNoYTE6IFwiY3J5cHRvanNcIiwgc2hhMjI0OiBcImNyeXB0b2pzXCIsIHNoYTI1NjogXCJjcnlwdG9qc1wiLCBzaGEzODQ6IFwiY3J5cHRvanNcIiwgc2hhNTEyOiBcImNyeXB0b2pzXCIsIHJpcGVtZDE2MDogXCJjcnlwdG9qc1wiLCBobWFjbWQ1OiBcImNyeXB0b2pzXCIsIGhtYWNzaGExOiBcImNyeXB0b2pzXCIsIGhtYWNzaGEyMjQ6IFwiY3J5cHRvanNcIiwgaG1hY3NoYTI1NjogXCJjcnlwdG9qc1wiLCBobWFjc2hhMzg0OiBcImNyeXB0b2pzXCIsIGhtYWNzaGE1MTI6IFwiY3J5cHRvanNcIiwgaG1hY3JpcGVtZDE2MDogXCJjcnlwdG9qc1wiLCBNRDV3aXRoUlNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTF3aXRoUlNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTIyNHdpdGhSU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMjU2d2l0aFJTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEEzODR3aXRoUlNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTUxMndpdGhSU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgUklQRU1EMTYwd2l0aFJTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBNRDV3aXRoRUNEU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMXdpdGhFQ0RTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEEyMjR3aXRoRUNEU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMjU2d2l0aEVDRFNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTM4NHdpdGhFQ0RTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEE1MTJ3aXRoRUNEU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgUklQRU1EMTYwd2l0aEVDRFNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTF3aXRoRFNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTIyNHdpdGhEU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMjU2d2l0aERTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBNRDV3aXRoUlNBYW5kTUdGMTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEF3aXRoUlNBYW5kTUdGMTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEExd2l0aFJTQWFuZE1HRjE6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMjI0d2l0aFJTQWFuZE1HRjE6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMjU2d2l0aFJTQWFuZE1HRjE6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMzg0d2l0aFJTQWFuZE1HRjE6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBNTEyd2l0aFJTQWFuZE1HRjE6IFwiY3J5cHRvanMvanNyc2FcIiwgUklQRU1EMTYwd2l0aFJTQWFuZE1HRjE6IFwiY3J5cHRvanMvanNyc2FcIiB9LCB0aGlzLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUUgPSB7IG1kNTogSy5hbGdvLk1ENSwgc2hhMTogSy5hbGdvLlNIQTEsIHNoYTIyNDogSy5hbGdvLlNIQTIyNCwgc2hhMjU2OiBLLmFsZ28uU0hBMjU2LCBzaGEzODQ6IEsuYWxnby5TSEEzODQsIHNoYTUxMjogSy5hbGdvLlNIQTUxMiwgcmlwZW1kMTYwOiBLLmFsZ28uUklQRU1EMTYwIH0sIHRoaXMuZ2V0RGlnZXN0SW5mb0hleCA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuRElHRVNUSU5GT0hFQURbdF0gPiBcInVcIilcbiAgICAgIHRocm93IFwiYWxnIG5vdCBzdXBwb3J0ZWQgaW4gVXRpbC5ESUdFU1RJTkZPSEVBRDogXCIgKyB0O1xuICAgIHJldHVybiB0aGlzLkRJR0VTVElORk9IRUFEW3RdICsgZTtcbiAgfSwgdGhpcy5nZXRQYWRkZWREaWdlc3RJbmZvSGV4ID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICAgIHZhciBpID0gdGhpcy5nZXREaWdlc3RJbmZvSGV4KGUsIHQpLCBzID0gciAvIDQ7XG4gICAgaWYgKGkubGVuZ3RoICsgMjIgPiBzKVxuICAgICAgdGhyb3cgXCJrZXkgaXMgdG9vIHNob3J0IGZvciBTaWdBbGc6IGtleWxlbj1cIiArIHIgKyBcIixcIiArIHQ7XG4gICAgZm9yICh2YXIgbiA9IFwiMDAwMVwiLCBoID0gXCIwMFwiICsgaSwgdSA9IFwiXCIsIHAgPSBzIC0gbi5sZW5ndGggLSBoLmxlbmd0aCwgYyA9IDA7IGMgPCBwOyBjICs9IDIpXG4gICAgICB1ICs9IFwiZmZcIjtcbiAgICB2YXIgeSA9IG4gKyB1ICsgaDtcbiAgICByZXR1cm4geTtcbiAgfSwgdGhpcy5oYXNoU3RyaW5nID0gZnVuY3Rpb24oZSwgdCkge1xuICAgIHZhciByID0gbmV3IGEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QoeyBhbGc6IHQgfSk7XG4gICAgcmV0dXJuIHIuZGlnZXN0U3RyaW5nKGUpO1xuICB9LCB0aGlzLmhhc2hIZXggPSBmdW5jdGlvbihlLCB0KSB7XG4gICAgdmFyIHIgPSBuZXcgYS5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7IGFsZzogdCB9KTtcbiAgICByZXR1cm4gci5kaWdlc3RIZXgoZSk7XG4gIH0sIHRoaXMuc2hhMSA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNoU3RyaW5nKGUsIFwic2hhMVwiKTtcbiAgfSwgdGhpcy5zaGEyNTYgPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaFN0cmluZyhlLCBcInNoYTI1NlwiKTtcbiAgfSwgdGhpcy5zaGEyNTZIZXggPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaEhleChlLCBcInNoYTI1NlwiKTtcbiAgfSwgdGhpcy5zaGE1MTIgPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaFN0cmluZyhlLCBcInNoYTUxMlwiKTtcbiAgfSwgdGhpcy5zaGE1MTJIZXggPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaEhleChlLCBcInNoYTUxMlwiKTtcbiAgfSwgdGhpcy5pc0tleSA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIHEgfHwgZSBpbnN0YW5jZW9mIGEuY3J5cHRvLkRTQSB8fCBlIGluc3RhbmNlb2YgYS5jcnlwdG8uRUNEU0E7XG4gIH07XG59KCk7XG5hLmNyeXB0by5VdGlsLm1kNSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBuZXcgYS5jcnlwdG8uTWVzc2FnZURpZ2VzdCh7IGFsZzogXCJtZDVcIiwgcHJvdjogXCJjcnlwdG9qc1wiIH0pO1xuICByZXR1cm4gdC5kaWdlc3RTdHJpbmcoZSk7XG59O1xuYS5jcnlwdG8uVXRpbC5yaXBlbWQxNjAgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gbmV3IGEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QoeyBhbGc6IFwicmlwZW1kMTYwXCIsIHByb3Y6IFwiY3J5cHRvanNcIiB9KTtcbiAgcmV0dXJuIHQuZGlnZXN0U3RyaW5nKGUpO1xufTtcbmEuY3J5cHRvLlV0aWwuU0VDVVJFUkFORE9NR0VOID0gbmV3IEdlKCk7XG5hLmNyeXB0by5VdGlsLmdldFJhbmRvbUhleE9mTmJ5dGVzID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IG5ldyBBcnJheShlKTtcbiAgcmV0dXJuIGEuY3J5cHRvLlV0aWwuU0VDVVJFUkFORE9NR0VOLm5leHRCeXRlcyh0KSwgb3QodCk7XG59O1xuYS5jcnlwdG8uVXRpbC5nZXRSYW5kb21CaWdJbnRlZ2VyT2ZOYnl0ZXMgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBuZXcgUihhLmNyeXB0by5VdGlsLmdldFJhbmRvbUhleE9mTmJ5dGVzKGUpLCAxNik7XG59O1xuYS5jcnlwdG8uVXRpbC5nZXRSYW5kb21IZXhPZk5iaXRzID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGUgJSA4LCByID0gKGUgLSB0KSAvIDgsIGkgPSBuZXcgQXJyYXkociArIDEpO1xuICByZXR1cm4gYS5jcnlwdG8uVXRpbC5TRUNVUkVSQU5ET01HRU4ubmV4dEJ5dGVzKGkpLCBpWzBdID0gKDI1NSA8PCB0ICYgMjU1IF4gMjU1KSAmIGlbMF0sIG90KGkpO1xufTtcbmEuY3J5cHRvLlV0aWwuZ2V0UmFuZG9tQmlnSW50ZWdlck9mTmJpdHMgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBuZXcgUihhLmNyeXB0by5VdGlsLmdldFJhbmRvbUhleE9mTmJpdHMoZSksIDE2KTtcbn07XG5hLmNyeXB0by5VdGlsLmdldFJhbmRvbUJpZ0ludGVnZXJaZXJvVG9NYXggPSBmdW5jdGlvbihlKSB7XG4gIGZvciAodmFyIHQgPSBlLmJpdExlbmd0aCgpOyA7ICkge1xuICAgIHZhciByID0gYS5jcnlwdG8uVXRpbC5nZXRSYW5kb21CaWdJbnRlZ2VyT2ZOYml0cyh0KTtcbiAgICBpZiAoZS5jb21wYXJlVG8ocikgIT0gLTEpXG4gICAgICByZXR1cm4gcjtcbiAgfVxufTtcbmEuY3J5cHRvLlV0aWwuZ2V0UmFuZG9tQmlnSW50ZWdlck1pblRvTWF4ID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IGUuY29tcGFyZVRvKHQpO1xuICBpZiAociA9PSAxKVxuICAgIHRocm93IFwiYmlNaW4gaXMgZ3JlYXRlciB0aGFuIGJpTWF4XCI7XG4gIGlmIChyID09IDApXG4gICAgcmV0dXJuIGU7XG4gIHZhciBpID0gdC5zdWJ0cmFjdChlKSwgcyA9IGEuY3J5cHRvLlV0aWwuZ2V0UmFuZG9tQmlnSW50ZWdlclplcm9Ub01heChpKTtcbiAgcmV0dXJuIHMuYWRkKGUpO1xufTtcbmEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QgPSBmdW5jdGlvbihlKSB7XG4gIHRoaXMuc2V0QWxnQW5kUHJvdmlkZXIgPSBmdW5jdGlvbih0LCByKSB7XG4gICAgaWYgKHQgPSBhLmNyeXB0by5NZXNzYWdlRGlnZXN0LmdldENhbm9uaWNhbEFsZ05hbWUodCksIHQgIT09IG51bGwgJiYgciA9PT0gdm9pZCAwICYmIChyID0gYS5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdF0pLCBcIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOlwiLmluZGV4T2YodCkgIT0gLTEgJiYgciA9PSBcImNyeXB0b2pzXCIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMubWQgPSBhLmNyeXB0by5VdGlsLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUVbdF0uY3JlYXRlKCk7XG4gICAgICB9IGNhdGNoIChpKSB7XG4gICAgICAgIHRocm93IFwic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPVwiICsgdCArIFwiL1wiICsgaTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlU3RyaW5nID0gZnVuY3Rpb24oaSkge1xuICAgICAgICB0aGlzLm1kLnVwZGF0ZShpKTtcbiAgICAgIH0sIHRoaXMudXBkYXRlSGV4ID0gZnVuY3Rpb24oaSkge1xuICAgICAgICB2YXIgcyA9IEsuZW5jLkhleC5wYXJzZShpKTtcbiAgICAgICAgdGhpcy5tZC51cGRhdGUocyk7XG4gICAgICB9LCB0aGlzLmRpZ2VzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IHRoaXMubWQuZmluYWxpemUoKTtcbiAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoSy5lbmMuSGV4KTtcbiAgICAgIH0sIHRoaXMuZGlnZXN0U3RyaW5nID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVTdHJpbmcoaSksIHRoaXMuZGlnZXN0KCk7XG4gICAgICB9LCB0aGlzLmRpZ2VzdEhleCA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSGV4KGkpLCB0aGlzLmRpZ2VzdCgpO1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKFwiOnNoYTI1NjpcIi5pbmRleE9mKHQpICE9IC0xICYmIHIgPT0gXCJzamNsXCIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMubWQgPSBuZXcgc2pjbC5oYXNoLnNoYTI1NigpO1xuICAgICAgfSBjYXRjaCAoaSkge1xuICAgICAgICB0aHJvdyBcInNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGFsZz1cIiArIHQgKyBcIi9cIiArIGk7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVN0cmluZyA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdGhpcy5tZC51cGRhdGUoaSk7XG4gICAgICB9LCB0aGlzLnVwZGF0ZUhleCA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyIHMgPSBzamNsLmNvZGVjLmhleC50b0JpdHMoaSk7XG4gICAgICAgIHRoaXMubWQudXBkYXRlKHMpO1xuICAgICAgfSwgdGhpcy5kaWdlc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLm1kLmZpbmFsaXplKCk7XG4gICAgICAgIHJldHVybiBzamNsLmNvZGVjLmhleC5mcm9tQml0cyhpKTtcbiAgICAgIH0sIHRoaXMuZGlnZXN0U3RyaW5nID0gZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVTdHJpbmcoaSksIHRoaXMuZGlnZXN0KCk7XG4gICAgICB9LCB0aGlzLmRpZ2VzdEhleCA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSGV4KGkpLCB0aGlzLmRpZ2VzdCgpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIHRoaXMudXBkYXRlU3RyaW5nID0gZnVuY3Rpb24odCkge1xuICAgIHRocm93IFwidXBkYXRlU3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ05hbWUgKyBcIi9cIiArIHRoaXMucHJvdk5hbWU7XG4gIH0sIHRoaXMudXBkYXRlSGV4ID0gZnVuY3Rpb24odCkge1xuICAgIHRocm93IFwidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ05hbWUgKyBcIi9cIiArIHRoaXMucHJvdk5hbWU7XG4gIH0sIHRoaXMuZGlnZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgXCJkaWdlc3QoKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIiArIHRoaXMuYWxnTmFtZSArIFwiL1wiICsgdGhpcy5wcm92TmFtZTtcbiAgfSwgdGhpcy5kaWdlc3RTdHJpbmcgPSBmdW5jdGlvbih0KSB7XG4gICAgdGhyb3cgXCJkaWdlc3RTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIiArIHRoaXMuYWxnTmFtZSArIFwiL1wiICsgdGhpcy5wcm92TmFtZTtcbiAgfSwgdGhpcy5kaWdlc3RIZXggPSBmdW5jdGlvbih0KSB7XG4gICAgdGhyb3cgXCJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIiArIHRoaXMuYWxnTmFtZSArIFwiL1wiICsgdGhpcy5wcm92TmFtZTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIGUuYWxnICE9PSB2b2lkIDAgJiYgKHRoaXMuYWxnTmFtZSA9IGUuYWxnLCBlLnByb3YgPT09IHZvaWQgMCAmJiAodGhpcy5wcm92TmFtZSA9IGEuY3J5cHRvLlV0aWwuREVGQVVMVFBST1ZJREVSW3RoaXMuYWxnTmFtZV0pLCB0aGlzLnNldEFsZ0FuZFByb3ZpZGVyKHRoaXMuYWxnTmFtZSwgdGhpcy5wcm92TmFtZSkpO1xufTtcbmEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QuZ2V0Q2Fub25pY2FsQWxnTmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIHR5cGVvZiBlID09IFwic3RyaW5nXCIgJiYgKGUgPSBlLnRvTG93ZXJDYXNlKCksIGUgPSBlLnJlcGxhY2UoLy0vLCBcIlwiKSksIGU7XG59O1xuYS5jcnlwdG8uTWVzc2FnZURpZ2VzdC5nZXRIYXNoTGVuZ3RoID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QsIHIgPSB0LmdldENhbm9uaWNhbEFsZ05hbWUoZSk7XG4gIGlmICh0LkhBU0hMRU5HVEhbcl0gPT09IHZvaWQgMClcbiAgICB0aHJvdyBcIm5vdCBzdXBwb3J0ZWQgYWxnb3JpdGhtOiBcIiArIGU7XG4gIHJldHVybiB0LkhBU0hMRU5HVEhbcl07XG59O1xuYS5jcnlwdG8uTWVzc2FnZURpZ2VzdC5IQVNITEVOR1RIID0geyBtZDU6IDE2LCBzaGExOiAyMCwgc2hhMjI0OiAyOCwgc2hhMjU2OiAzMiwgc2hhMzg0OiA0OCwgc2hhNTEyOiA2NCwgcmlwZW1kMTYwOiAyMCB9O1xuYS5jcnlwdG8uTWFjID0gZnVuY3Rpb24oZSkge1xuICB0aGlzLnNldEFsZ0FuZFByb3ZpZGVyID0gZnVuY3Rpb24odCwgcikge1xuICAgIGlmICh0ID0gdC50b0xvd2VyQ2FzZSgpLCB0ID09IG51bGwgJiYgKHQgPSBcImhtYWNzaGExXCIpLCB0ID0gdC50b0xvd2VyQ2FzZSgpLCB0LnN1YnN0cigwLCA0KSAhPSBcImhtYWNcIilcbiAgICAgIHRocm93IFwic2V0QWxnQW5kUHJvdmlkZXIgdW5zdXBwb3J0ZWQgSE1BQyBhbGc6IFwiICsgdDtcbiAgICByID09PSB2b2lkIDAgJiYgKHIgPSBhLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlt0XSksIHRoaXMuYWxnUHJvdiA9IHQgKyBcIi9cIiArIHI7XG4gICAgdmFyIGkgPSB0LnN1YnN0cig0KTtcbiAgICBpZiAoXCI6bWQ1OnNoYTE6c2hhMjI0OnNoYTI1NjpzaGEzODQ6c2hhNTEyOnJpcGVtZDE2MDpcIi5pbmRleE9mKGkpICE9IC0xICYmIHIgPT0gXCJjcnlwdG9qc1wiKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcyA9IGEuY3J5cHRvLlV0aWwuQ1JZUFRPSlNNRVNTQUdFRElHRVNUTkFNRVtpXTtcbiAgICAgICAgdGhpcy5tYWMgPSBLLmFsZ28uSE1BQy5jcmVhdGUocywgdGhpcy5wYXNzKTtcbiAgICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgdGhyb3cgXCJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBoYXNoQWxnPVwiICsgaSArIFwiL1wiICsgbjtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlU3RyaW5nID0gZnVuY3Rpb24obikge1xuICAgICAgICB0aGlzLm1hYy51cGRhdGUobik7XG4gICAgICB9LCB0aGlzLnVwZGF0ZUhleCA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgdmFyIGggPSBLLmVuYy5IZXgucGFyc2Uobik7XG4gICAgICAgIHRoaXMubWFjLnVwZGF0ZShoKTtcbiAgICAgIH0sIHRoaXMuZG9GaW5hbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbiA9IHRoaXMubWFjLmZpbmFsaXplKCk7XG4gICAgICAgIHJldHVybiBuLnRvU3RyaW5nKEsuZW5jLkhleCk7XG4gICAgICB9LCB0aGlzLmRvRmluYWxTdHJpbmcgPSBmdW5jdGlvbihuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVN0cmluZyhuKSwgdGhpcy5kb0ZpbmFsKCk7XG4gICAgICB9LCB0aGlzLmRvRmluYWxIZXggPSBmdW5jdGlvbihuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUhleChuKSwgdGhpcy5kb0ZpbmFsKCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgdGhpcy51cGRhdGVTdHJpbmcgPSBmdW5jdGlvbih0KSB7XG4gICAgdGhyb3cgXCJ1cGRhdGVTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIiArIHRoaXMuYWxnUHJvdjtcbiAgfSwgdGhpcy51cGRhdGVIZXggPSBmdW5jdGlvbih0KSB7XG4gICAgdGhyb3cgXCJ1cGRhdGVIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIiArIHRoaXMuYWxnUHJvdjtcbiAgfSwgdGhpcy5kb0ZpbmFsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgXCJkaWdlc3QoKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIiArIHRoaXMuYWxnUHJvdjtcbiAgfSwgdGhpcy5kb0ZpbmFsU3RyaW5nID0gZnVuY3Rpb24odCkge1xuICAgIHRocm93IFwiZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ1Byb3Y7XG4gIH0sIHRoaXMuZG9GaW5hbEhleCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aHJvdyBcImRpZ2VzdEhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiICsgdGhpcy5hbGdQcm92O1xuICB9LCB0aGlzLnNldFBhc3N3b3JkID0gZnVuY3Rpb24odCkge1xuICAgIGlmICh0eXBlb2YgdCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgciA9IHQ7XG4gICAgICAodC5sZW5ndGggJSAyID09IDEgfHwgIXQubWF0Y2goL15bMC05QS1GYS1mXSskLykpICYmIChyID0gUGUodCkpLCB0aGlzLnBhc3MgPSBLLmVuYy5IZXgucGFyc2Uocik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdCAhPSBcIm9iamVjdFwiKVxuICAgICAgdGhyb3cgXCJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogXCIgKyB0O1xuICAgIHZhciByID0gbnVsbDtcbiAgICBpZiAodC5oZXggIT09IHZvaWQgMCkge1xuICAgICAgaWYgKHQuaGV4Lmxlbmd0aCAlIDIgIT0gMCB8fCAhdC5oZXgubWF0Y2goL15bMC05QS1GYS1mXSskLykpXG4gICAgICAgIHRocm93IFwiTWFjOiB3cm9uZyBoZXggcGFzc3dvcmQ6IFwiICsgdC5oZXg7XG4gICAgICByID0gdC5oZXg7XG4gICAgfVxuICAgIGlmICh0LnV0ZjggIT09IHZvaWQgMCAmJiAociA9IGh0KHQudXRmOCkpLCB0LnJzdHIgIT09IHZvaWQgMCAmJiAociA9IFBlKHQucnN0cikpLCB0LmI2NCAhPT0gdm9pZCAwICYmIChyID0gaXQodC5iNjQpKSwgdC5iNjR1ICE9PSB2b2lkIDAgJiYgKHIgPSBZKHQuYjY0dSkpLCByID09IG51bGwpXG4gICAgICB0aHJvdyBcIktKVVIuY3J5cHRvLk1hYyB1bnN1cHBvcnRlZCBwYXNzd29yZCB0eXBlOiBcIiArIHQ7XG4gICAgdGhpcy5wYXNzID0gSy5lbmMuSGV4LnBhcnNlKHIpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgKGUucGFzcyAhPT0gdm9pZCAwICYmIHRoaXMuc2V0UGFzc3dvcmQoZS5wYXNzKSwgZS5hbGcgIT09IHZvaWQgMCAmJiAodGhpcy5hbGdOYW1lID0gZS5hbGcsIGUucHJvdiA9PT0gdm9pZCAwICYmICh0aGlzLnByb3ZOYW1lID0gYS5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXSksIHRoaXMuc2V0QWxnQW5kUHJvdmlkZXIodGhpcy5hbGdOYW1lLCB0aGlzLnByb3ZOYW1lKSkpO1xufTtcbmEuY3J5cHRvLlNpZ25hdHVyZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBudWxsO1xuICBpZiAodGhpcy5fc2V0QWxnTmFtZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgciA9IHRoaXMuYWxnTmFtZS5tYXRjaCgvXiguKyl3aXRoKC4rKSQvKTtcbiAgICByICYmICh0aGlzLm1kQWxnTmFtZSA9IHJbMV0udG9Mb3dlckNhc2UoKSwgdGhpcy5wdWJrZXlBbGdOYW1lID0gclsyXS50b0xvd2VyQ2FzZSgpLCB0aGlzLnB1YmtleUFsZ05hbWUgPT0gXCJyc2FhbmRtZ2YxXCIgJiYgdGhpcy5tZEFsZ05hbWUgPT0gXCJzaGFcIiAmJiAodGhpcy5tZEFsZ05hbWUgPSBcInNoYTFcIikpO1xuICB9LCB0aGlzLl96ZXJvUGFkZGluZ09mU2lnbmF0dXJlID0gZnVuY3Rpb24ociwgaSkge1xuICAgIGZvciAodmFyIHMgPSBcIlwiLCBuID0gaSAvIDQgLSByLmxlbmd0aCwgaCA9IDA7IGggPCBuOyBoKyspXG4gICAgICBzID0gcyArIFwiMFwiO1xuICAgIHJldHVybiBzICsgcjtcbiAgfSwgdGhpcy5zZXRBbGdBbmRQcm92aWRlciA9IGZ1bmN0aW9uKHIsIGkpIHtcbiAgICBpZiAodGhpcy5fc2V0QWxnTmFtZXMoKSwgaSAhPSBcImNyeXB0b2pzL2pzcnNhXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwcm92aWRlciBub3Qgc3VwcG9ydGVkOiBcIiArIGkpO1xuICAgIGlmIChcIjptZDU6c2hhMTpzaGEyMjQ6c2hhMjU2OnNoYTM4NDpzaGE1MTI6cmlwZW1kMTYwOlwiLmluZGV4T2YodGhpcy5tZEFsZ05hbWUpICE9IC0xKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLm1kID0gbmV3IGEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QoeyBhbGc6IHRoaXMubWRBbGdOYW1lIH0pO1xuICAgICAgfSBjYXRjaCAocykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBhbGc9XCIgKyB0aGlzLm1kQWxnTmFtZSArIFwiL1wiICsgcyk7XG4gICAgICB9XG4gICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbihzLCBuKSB7XG4gICAgICAgIHZhciBoID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBuID09PSB2b2lkIDAgPyBoID0gay5nZXRLZXkocykgOiBoID0gay5nZXRLZXkocywgbik7XG4gICAgICAgIH0gY2F0Y2ggKHUpIHtcbiAgICAgICAgICB0aHJvdyBcImluaXQgZmFpbGVkOlwiICsgdTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaC5pc1ByaXZhdGUgPT09ICEwKVxuICAgICAgICAgIHRoaXMucHJ2S2V5ID0gaCwgdGhpcy5zdGF0ZSA9IFwiU0lHTlwiO1xuICAgICAgICBlbHNlIGlmIChoLmlzUHVibGljID09PSAhMClcbiAgICAgICAgICB0aGlzLnB1YktleSA9IGgsIHRoaXMuc3RhdGUgPSBcIlZFUklGWVwiO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgdGhyb3cgXCJpbml0IGZhaWxlZC46XCIgKyBoO1xuICAgICAgfSwgdGhpcy51cGRhdGVTdHJpbmcgPSBmdW5jdGlvbihzKSB7XG4gICAgICAgIHRoaXMubWQudXBkYXRlU3RyaW5nKHMpO1xuICAgICAgfSwgdGhpcy51cGRhdGVIZXggPSBmdW5jdGlvbihzKSB7XG4gICAgICAgIHRoaXMubWQudXBkYXRlSGV4KHMpO1xuICAgICAgfSwgdGhpcy5zaWduID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnNIYXNoSGV4ID0gdGhpcy5tZC5kaWdlc3QoKSwgdGhpcy5wcnZLZXkgPT09IHZvaWQgMCAmJiB0aGlzLmVjcHJ2aGV4ICE9PSB2b2lkIDAgJiYgdGhpcy5lY2N1cnZlbmFtZSAhPT0gdm9pZCAwICYmIGEuY3J5cHRvLkVDRFNBICE9PSB2b2lkIDAgJiYgKHRoaXMucHJ2S2V5ID0gbmV3IGEuY3J5cHRvLkVDRFNBKHsgY3VydmU6IHRoaXMuZWNjdXJ2ZW5hbWUsIHBydjogdGhpcy5lY3BydmhleCB9KSksIHRoaXMucHJ2S2V5IGluc3RhbmNlb2YgcSAmJiB0aGlzLnB1YmtleUFsZ05hbWUgPT09IFwicnNhYW5kbWdmMVwiKVxuICAgICAgICAgIHRoaXMuaFNpZ24gPSB0aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKHRoaXMuc0hhc2hIZXgsIHRoaXMubWRBbGdOYW1lLCB0aGlzLnBzc1NhbHRMZW4pO1xuICAgICAgICBlbHNlIGlmICh0aGlzLnBydktleSBpbnN0YW5jZW9mIHEgJiYgdGhpcy5wdWJrZXlBbGdOYW1lID09PSBcInJzYVwiKVxuICAgICAgICAgIHRoaXMuaFNpZ24gPSB0aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsIHRoaXMubWRBbGdOYW1lKTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBhLmNyeXB0by5FQ0RTQSlcbiAgICAgICAgICB0aGlzLmhTaWduID0gdGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4KTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBhLmNyeXB0by5EU0EpXG4gICAgICAgICAgdGhpcy5oU2lnbiA9IHRoaXMucHJ2S2V5LnNpZ25XaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aHJvdyBcIlNpZ25hdHVyZTogdW5zdXBwb3J0ZWQgcHJpdmF0ZSBrZXkgYWxnOiBcIiArIHRoaXMucHVia2V5QWxnTmFtZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaFNpZ247XG4gICAgICB9LCB0aGlzLnNpZ25TdHJpbmcgPSBmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVN0cmluZyhzKSwgdGhpcy5zaWduKCk7XG4gICAgICB9LCB0aGlzLnNpZ25IZXggPSBmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUhleChzKSwgdGhpcy5zaWduKCk7XG4gICAgICB9LCB0aGlzLnZlcmlmeSA9IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgaWYgKHRoaXMuc0hhc2hIZXggPSB0aGlzLm1kLmRpZ2VzdCgpLCB0aGlzLnB1YktleSA9PT0gdm9pZCAwICYmIHRoaXMuZWNwdWJoZXggIT09IHZvaWQgMCAmJiB0aGlzLmVjY3VydmVuYW1lICE9PSB2b2lkIDAgJiYgYS5jcnlwdG8uRUNEU0EgIT09IHZvaWQgMCAmJiAodGhpcy5wdWJLZXkgPSBuZXcgYS5jcnlwdG8uRUNEU0EoeyBjdXJ2ZTogdGhpcy5lY2N1cnZlbmFtZSwgcHViOiB0aGlzLmVjcHViaGV4IH0pKSwgdGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBxICYmIHRoaXMucHVia2V5QWxnTmFtZSA9PT0gXCJyc2FhbmRtZ2YxXCIpXG4gICAgICAgICAgcmV0dXJuIHRoaXMucHViS2V5LnZlcmlmeVdpdGhNZXNzYWdlSGFzaFBTUyh0aGlzLnNIYXNoSGV4LCBzLCB0aGlzLm1kQWxnTmFtZSwgdGhpcy5wc3NTYWx0TGVuKTtcbiAgICAgICAgaWYgKHRoaXMucHViS2V5IGluc3RhbmNlb2YgcSAmJiB0aGlzLnB1YmtleUFsZ05hbWUgPT09IFwicnNhXCIpXG4gICAgICAgICAgcmV0dXJuIHRoaXMucHViS2V5LnZlcmlmeVdpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LCBzKTtcbiAgICAgICAgaWYgKGEuY3J5cHRvLkVDRFNBICE9PSB2b2lkIDAgJiYgdGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBhLmNyeXB0by5FQ0RTQSlcbiAgICAgICAgICByZXR1cm4gdGhpcy5wdWJLZXkudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgsIHMpO1xuICAgICAgICBpZiAoYS5jcnlwdG8uRFNBICE9PSB2b2lkIDAgJiYgdGhpcy5wdWJLZXkgaW5zdGFuY2VvZiBhLmNyeXB0by5EU0EpXG4gICAgICAgICAgcmV0dXJuIHRoaXMucHViS2V5LnZlcmlmeVdpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LCBzKTtcbiAgICAgICAgdGhyb3cgXCJTaWduYXR1cmU6IHVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgYWxnOiBcIiArIHRoaXMucHVia2V5QWxnTmFtZTtcbiAgICAgIH07XG4gICAgfVxuICB9LCB0aGlzLmluaXQgPSBmdW5jdGlvbihyLCBpKSB7XG4gICAgdGhyb3cgXCJpbml0KGtleSwgcGFzcykgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIiArIHRoaXMuYWxnUHJvdk5hbWU7XG4gIH0sIHRoaXMudXBkYXRlU3RyaW5nID0gZnVuY3Rpb24ocikge1xuICAgIHRocm93IFwidXBkYXRlU3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIiArIHRoaXMuYWxnUHJvdk5hbWU7XG4gIH0sIHRoaXMudXBkYXRlSGV4ID0gZnVuY3Rpb24ocikge1xuICAgIHRocm93IFwidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIiArIHRoaXMuYWxnUHJvdk5hbWU7XG4gIH0sIHRoaXMuc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IFwic2lnbigpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIgKyB0aGlzLmFsZ1Byb3ZOYW1lO1xuICB9LCB0aGlzLnNpZ25TdHJpbmcgPSBmdW5jdGlvbihyKSB7XG4gICAgdGhyb3cgXCJkaWdlc3RTdHJpbmcoc3RyKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiICsgdGhpcy5hbGdQcm92TmFtZTtcbiAgfSwgdGhpcy5zaWduSGV4ID0gZnVuY3Rpb24ocikge1xuICAgIHRocm93IFwiZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIiArIHRoaXMuYWxnUHJvdk5hbWU7XG4gIH0sIHRoaXMudmVyaWZ5ID0gZnVuY3Rpb24ocikge1xuICAgIHRocm93IFwidmVyaWZ5KGhTaWdWYWwpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIgKyB0aGlzLmFsZ1Byb3ZOYW1lO1xuICB9LCB0aGlzLmluaXRQYXJhbXMgPSBlLCBlICE9PSB2b2lkIDAgJiYgKGUuYWxnICE9PSB2b2lkIDAgJiYgKHRoaXMuYWxnTmFtZSA9IGUuYWxnLCBlLnByb3YgPT09IHZvaWQgMCA/IHRoaXMucHJvdk5hbWUgPSBhLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlt0aGlzLmFsZ05hbWVdIDogdGhpcy5wcm92TmFtZSA9IGUucHJvdiwgdGhpcy5hbGdQcm92TmFtZSA9IHRoaXMuYWxnTmFtZSArIFwiOlwiICsgdGhpcy5wcm92TmFtZSwgdGhpcy5zZXRBbGdBbmRQcm92aWRlcih0aGlzLmFsZ05hbWUsIHRoaXMucHJvdk5hbWUpLCB0aGlzLl9zZXRBbGdOYW1lcygpKSwgZS5wc3NzYWx0bGVuICE9PSB2b2lkIDAgJiYgKHRoaXMucHNzU2FsdExlbiA9IGUucHNzc2FsdGxlbiksIGUucHJ2a2V5cGVtICE9PSB2b2lkIDApKSB7XG4gICAgaWYgKGUucHJ2a2V5cGFzICE9PSB2b2lkIDApXG4gICAgICB0aHJvdyBcImJvdGggcHJ2a2V5cGVtIGFuZCBwcnZrZXlwYXMgcGFyYW1ldGVycyBub3Qgc3VwcG9ydGVkXCI7XG4gICAgdHJ5IHtcbiAgICAgIHZhciB0ID0gay5nZXRLZXkoZS5wcnZrZXlwZW0pO1xuICAgICAgdGhpcy5pbml0KHQpO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIHRocm93IFwiZmF0YWwgZXJyb3IgdG8gbG9hZCBwZW0gcHJpdmF0ZSBrZXk6IFwiICsgcjtcbiAgICB9XG4gIH1cbn07XG5hLmNyeXB0by5DaXBoZXIgPSBmdW5jdGlvbihlKSB7XG59O1xuYS5jcnlwdG8uQ2lwaGVyLmVuY3J5cHQgPSBmdW5jdGlvbihlLCB0LCByLCBpKSB7XG4gIGlmIChKKGksIFwiZW5jbGFnXCIpICE9IG51bGwgJiYgKHIgPSBpLmVuY2FsZyksIHR5cGVvZiByID09IFwic3RyaW5nXCIgJiYgci5zdWJzdHIoLTQpID09IFwiLUNCQ1wiKSB7XG4gICAgdmFyIHMgPSB0LCBuID0gZTtcbiAgICBKKGksIFwia2V5XCIpICE9IG51bGwgJiYgKHMgPSBpLmtleSksIEooaSwgXCJlbmNcIikgIT0gbnVsbCAmJiAoaEVuYyA9IGkuZW5jKTtcbiAgICB2YXIgaCA9IEsuZW5jLkhleC5wYXJzZShzKSwgdSA9IEsuZW5jLkhleC5wYXJzZShuKSwgcCA9IEsuZW5jLkhleC5wYXJzZShpLml2KSwgYztcbiAgICBpZiAociA9PSBcImRlcy1FREUzLUNCQ1wiKVxuICAgICAgYyA9IEsuVHJpcGxlREVTLmVuY3J5cHQodSwgaCwgeyBpdjogcCB9KTtcbiAgICBlbHNlIGlmIChyID09IFwiYWVzMTI4LUNCQ1wiIHx8IHIgPT0gXCJhZXMyNTYtQ0JDXCIpXG4gICAgICBjID0gSy5BRVMuZW5jcnlwdCh1LCBoLCB7IGl2OiBwIH0pO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGFsZ29yaXRobTogXCIgKyByKTtcbiAgICByZXR1cm4gYyArIFwiXCI7XG4gIH0gZWxzZVxuICAgIHRocm93IG5ldyBFcnJvcihcIkNpcGhlci5lbmNyeXB0OiB1bnN1cHBvcnRlZCBrZXkgb3IgYWxnb3JpdGhtXCIpO1xufTtcbmEuY3J5cHRvLkNpcGhlci5kZWNyeXB0ID0gZnVuY3Rpb24oZSwgdCwgciwgaSkge1xuICBpZiAoSihpLCBcImVuY2xhZ1wiKSAhPSBudWxsICYmIChyID0gaS5lbmNhbGcpLCB0eXBlb2YgciA9PSBcInN0cmluZ1wiICYmIHIuc3Vic3RyKC00KSA9PSBcIi1DQkNcIikge1xuICAgIHZhciBzID0gdCwgbiA9IGU7XG4gICAgSihpLCBcImtleVwiKSAhPSBudWxsICYmIChzID0gaS5rZXkpLCBKKGksIFwiZW5jXCIpICE9IG51bGwgJiYgKG4gPSBpLmVuYyk7XG4gICAgdmFyIGggPSBLLmVuYy5IZXgucGFyc2UocyksIHUgPSBLLmVuYy5IZXgucGFyc2UobiksIHAgPSBLLmVuYy5IZXgucGFyc2UoaS5pdiksIGM7XG4gICAgaWYgKHIgPT0gXCJkZXMtRURFMy1DQkNcIilcbiAgICAgIGMgPSBLLlRyaXBsZURFUy5kZWNyeXB0KHsgY2lwaGVydGV4dDogdSB9LCBoLCB7IGl2OiBwIH0pO1xuICAgIGVsc2UgaWYgKHIgPT0gXCJhZXMxMjgtQ0JDXCIgfHwgciA9PSBcImFlczI1Ni1DQkNcIilcbiAgICAgIGMgPSBLLkFFUy5kZWNyeXB0KHsgY2lwaGVydGV4dDogdSB9LCBoLCB7IGl2OiBwIH0pO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGFsZ29yaXRobTogXCIgKyByKTtcbiAgICByZXR1cm4gSy5lbmMuSGV4LnN0cmluZ2lmeShjKTtcbiAgfSBlbHNlXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ2lwaGVyLmRlY3J5cHQ6IHVuc3VwcG9ydGVkIGtleSBvciBhbGdvcml0aG1cIik7XG59O1xuYS5jcnlwdG8uT0lEID0gbmV3IGZ1bmN0aW9uKCkge1xuICB0aGlzLm9pZGhleDJuYW1lID0geyBcIjJhODY0ODg2ZjcwZDAxMDEwMVwiOiBcInJzYUVuY3J5cHRpb25cIiwgXCIyYTg2NDhjZTNkMDIwMVwiOiBcImVjUHVibGljS2V5XCIsIFwiMmE4NjQ4Y2UzODA0MDFcIjogXCJkc2FcIiwgXCIyYTg2NDhjZTNkMDMwMTA3XCI6IFwic2VjcDI1NnIxXCIsIFwiMmI4MTA0MDAxZlwiOiBcInNlY3AxOTJrMVwiLCBcIjJiODEwNDAwMjFcIjogXCJzZWNwMjI0cjFcIiwgXCIyYjgxMDQwMDBhXCI6IFwic2VjcDI1NmsxXCIsIFwiMmI4MTA0MDAyMlwiOiBcInNlY3AzODRyMVwiLCBcIjJiODEwNDAwMjNcIjogXCJzZWNwNTIxcjFcIiwgXCIyYTg2NDhjZTM4MDQwM1wiOiBcIlNIQTF3aXRoRFNBXCIsIFwiNjA4NjQ4MDE2NTAzMDQwMzAxXCI6IFwiU0hBMjI0d2l0aERTQVwiLCBcIjYwODY0ODAxNjUwMzA0MDMwMlwiOiBcIlNIQTI1NndpdGhEU0FcIiB9O1xufSgpO1xuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmNyeXB0byA+IFwidVwiIHx8ICFhLmNyeXB0bykgJiYgKGEuY3J5cHRvID0ge30pO1xuYS5jcnlwdG8uRUNEU0EgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gXCJzZWNwMjU2cjFcIiwgciA9IEVycm9yLCBpID0gUiwgcyA9IHosIG4gPSBhLmNyeXB0by5FQ0RTQSwgaCA9IGEuY3J5cHRvLkVDUGFyYW1ldGVyREIsIHUgPSBuLmdldE5hbWUsIHAgPSBWLCBjID0gcC5nZXRWYnlMaXN0RXgsIHkgPSBwLmlzQVNOMUhFWCwgdiA9IG5ldyBHZSgpO1xuICB0aGlzLnR5cGUgPSBcIkVDXCIsIHRoaXMuaXNQcml2YXRlID0gITEsIHRoaXMuaXNQdWJsaWMgPSAhMSwgdGhpcy5nZXRCaWdSYW5kb20gPSBmdW5jdGlvbihvKSB7XG4gICAgcmV0dXJuIG5ldyBpKG8uYml0TGVuZ3RoKCksIHYpLm1vZChvLnN1YnRyYWN0KGkuT05FKSkuYWRkKGkuT05FKTtcbiAgfSwgdGhpcy5zZXROYW1lZEN1cnZlID0gZnVuY3Rpb24obykge1xuICAgIHRoaXMuZWNwYXJhbXMgPSBoLmdldEJ5TmFtZShvKSwgdGhpcy5wcnZLZXlIZXggPSBudWxsLCB0aGlzLnB1YktleUhleCA9IG51bGwsIHRoaXMuY3VydmVOYW1lID0gbztcbiAgfSwgdGhpcy5zZXRQcml2YXRlS2V5SGV4ID0gZnVuY3Rpb24obykge1xuICAgIHRoaXMuaXNQcml2YXRlID0gITAsIHRoaXMucHJ2S2V5SGV4ID0gbztcbiAgfSwgdGhpcy5zZXRQdWJsaWNLZXlIZXggPSBmdW5jdGlvbihvKSB7XG4gICAgdGhpcy5pc1B1YmxpYyA9ICEwLCB0aGlzLnB1YktleUhleCA9IG87XG4gIH0sIHRoaXMuZ2V0UHVibGljS2V5WFlIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IHRoaXMucHViS2V5SGV4O1xuICAgIGlmIChvLnN1YnN0cigwLCAyKSAhPT0gXCIwNFwiKVxuICAgICAgdGhyb3cgXCJ0aGlzIG1ldGhvZCBzdXBwb3J0cyB1bmNvbXByZXNzZWQgZm9ybWF0KDA0KSBvbmx5XCI7XG4gICAgdmFyIGwgPSB0aGlzLmVjcGFyYW1zLmtleWNoYXJsZW47XG4gICAgaWYgKG8ubGVuZ3RoICE9PSAyICsgbCAqIDIpXG4gICAgICB0aHJvdyBcIm1hbGZvcm1lZCBwdWJsaWMga2V5IGhleCBsZW5ndGhcIjtcbiAgICB2YXIgZiA9IHt9O1xuICAgIHJldHVybiBmLnggPSBvLnN1YnN0cigyLCBsKSwgZi55ID0gby5zdWJzdHIoMiArIGwpLCBmO1xuICB9LCB0aGlzLmdldFNob3J0TklTVFBDdXJ2ZU5hbWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IHRoaXMuY3VydmVOYW1lO1xuICAgIHJldHVybiBvID09PSBcInNlY3AyNTZyMVwiIHx8IG8gPT09IFwiTklTVCBQLTI1NlwiIHx8IG8gPT09IFwiUC0yNTZcIiB8fCBvID09PSBcInByaW1lMjU2djFcIiA/IFwiUC0yNTZcIiA6IG8gPT09IFwic2VjcDM4NHIxXCIgfHwgbyA9PT0gXCJOSVNUIFAtMzg0XCIgfHwgbyA9PT0gXCJQLTM4NFwiID8gXCJQLTM4NFwiIDogbyA9PT0gXCJzZWNwNTIxcjFcIiB8fCBvID09PSBcIk5JU1QgUC01MjFcIiB8fCBvID09PSBcIlAtNTIxXCIgPyBcIlAtNTIxXCIgOiBudWxsO1xuICB9LCB0aGlzLmdlbmVyYXRlS2V5UGFpckhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvID0gdGhpcy5lY3BhcmFtcy5uLCBsID0gdGhpcy5nZXRCaWdSYW5kb20obyksIGYgPSB0aGlzLmVjcGFyYW1zLmtleWNoYXJsZW4sIGQgPSAoXCIwMDAwMDAwMDAwXCIgKyBsLnRvU3RyaW5nKDE2KSkuc2xpY2UoLWYpO1xuICAgIHRoaXMuc2V0UHJpdmF0ZUtleUhleChkKTtcbiAgICB2YXIgZyA9IHRoaXMuZ2VuZXJhdGVQdWJsaWNLZXlIZXgoKTtcbiAgICByZXR1cm4geyBlY3BydmhleDogZCwgZWNwdWJoZXg6IGcgfTtcbiAgfSwgdGhpcy5nZW5lcmF0ZVB1YmxpY0tleUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvID0gbmV3IGkodGhpcy5wcnZLZXlIZXgsIDE2KSwgbCA9IHRoaXMuZWNwYXJhbXMuRy5tdWx0aXBseShvKSwgZiA9IGwuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLCBkID0gbC5nZXRZKCkudG9CaWdJbnRlZ2VyKCksIGcgPSB0aGlzLmVjcGFyYW1zLmtleWNoYXJsZW4sIFMgPSAoXCIwMDAwMDAwMDAwXCIgKyBmLnRvU3RyaW5nKDE2KSkuc2xpY2UoLWcpLCBiID0gKFwiMDAwMDAwMDAwMFwiICsgZC50b1N0cmluZygxNikpLnNsaWNlKC1nKSwgRCA9IFwiMDRcIiArIFMgKyBiO1xuICAgIHJldHVybiB0aGlzLnNldFB1YmxpY0tleUhleChEKSwgRDtcbiAgfSwgdGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoID0gZnVuY3Rpb24obykge1xuICAgIHJldHVybiB0aGlzLnNpZ25IZXgobywgdGhpcy5wcnZLZXlIZXgpO1xuICB9LCB0aGlzLnNpZ25IZXggPSBmdW5jdGlvbihvLCBsKSB7XG4gICAgdmFyIGYgPSBuZXcgaShsLCAxNiksIGQgPSB0aGlzLmVjcGFyYW1zLm4sIGcgPSBuZXcgaShvLnN1YnN0cmluZygwLCB0aGlzLmVjcGFyYW1zLmtleWNoYXJsZW4pLCAxNik7XG4gICAgZG9cbiAgICAgIHZhciBTID0gdGhpcy5nZXRCaWdSYW5kb20oZCksIGIgPSB0aGlzLmVjcGFyYW1zLkcsIEQgPSBiLm11bHRpcGx5KFMpLCBBID0gRC5nZXRYKCkudG9CaWdJbnRlZ2VyKCkubW9kKGQpO1xuICAgIHdoaWxlIChBLmNvbXBhcmVUbyhpLlpFUk8pIDw9IDApO1xuICAgIHZhciBJID0gUy5tb2RJbnZlcnNlKGQpLm11bHRpcGx5KGcuYWRkKGYubXVsdGlwbHkoQSkpKS5tb2QoZCk7XG4gICAgcmV0dXJuIG4uYmlSU1NpZ1RvQVNOMVNpZyhBLCBJKTtcbiAgfSwgdGhpcy5zaWduID0gZnVuY3Rpb24obywgbCkge1xuICAgIHZhciBmID0gbCwgZCA9IHRoaXMuZWNwYXJhbXMubiwgZyA9IGkuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKG8pO1xuICAgIGRvXG4gICAgICB2YXIgUyA9IHRoaXMuZ2V0QmlnUmFuZG9tKGQpLCBiID0gdGhpcy5lY3BhcmFtcy5HLCBEID0gYi5tdWx0aXBseShTKSwgQSA9IEQuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLm1vZChkKTtcbiAgICB3aGlsZSAoQS5jb21wYXJlVG8oUi5aRVJPKSA8PSAwKTtcbiAgICB2YXIgSSA9IFMubW9kSW52ZXJzZShkKS5tdWx0aXBseShnLmFkZChmLm11bHRpcGx5KEEpKSkubW9kKGQpO1xuICAgIHJldHVybiB0aGlzLnNlcmlhbGl6ZVNpZyhBLCBJKTtcbiAgfSwgdGhpcy52ZXJpZnlXaXRoTWVzc2FnZUhhc2ggPSBmdW5jdGlvbihvLCBsKSB7XG4gICAgcmV0dXJuIHRoaXMudmVyaWZ5SGV4KG8sIGwsIHRoaXMucHViS2V5SGV4KTtcbiAgfSwgdGhpcy52ZXJpZnlIZXggPSBmdW5jdGlvbihvLCBsLCBmKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBkLCBnLCBTID0gbi5wYXJzZVNpZ0hleChsKTtcbiAgICAgIGQgPSBTLnIsIGcgPSBTLnM7XG4gICAgICB2YXIgYiA9IHMuZGVjb2RlRnJvbUhleCh0aGlzLmVjcGFyYW1zLmN1cnZlLCBmKSwgRCA9IG5ldyBpKG8uc3Vic3RyaW5nKDAsIHRoaXMuZWNwYXJhbXMua2V5Y2hhcmxlbiksIDE2KTtcbiAgICAgIHJldHVybiB0aGlzLnZlcmlmeVJhdyhELCBkLCBnLCBiKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIH0sIHRoaXMudmVyaWZ5ID0gZnVuY3Rpb24obywgbCwgZikge1xuICAgIHZhciBkLCBnO1xuICAgIGlmIChCaXRjb2luLlV0aWwuaXNBcnJheShsKSkge1xuICAgICAgdmFyIFMgPSB0aGlzLnBhcnNlU2lnKGwpO1xuICAgICAgZCA9IFMuciwgZyA9IFMucztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsID09IFwib2JqZWN0XCIgJiYgbC5yICYmIGwucylcbiAgICAgIGQgPSBsLnIsIGcgPSBsLnM7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgXCJJbnZhbGlkIHZhbHVlIGZvciBzaWduYXR1cmVcIjtcbiAgICB2YXIgYjtcbiAgICBpZiAoZiBpbnN0YW5jZW9mIHopXG4gICAgICBiID0gZjtcbiAgICBlbHNlIGlmIChCaXRjb2luLlV0aWwuaXNBcnJheShmKSlcbiAgICAgIGIgPSBzLmRlY29kZUZyb20odGhpcy5lY3BhcmFtcy5jdXJ2ZSwgZik7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgXCJJbnZhbGlkIGZvcm1hdCBmb3IgcHVia2V5IHZhbHVlLCBtdXN0IGJlIGJ5dGUgYXJyYXkgb3IgRUNQb2ludEZwXCI7XG4gICAgdmFyIEQgPSBpLmZyb21CeXRlQXJyYXlVbnNpZ25lZChvKTtcbiAgICByZXR1cm4gdGhpcy52ZXJpZnlSYXcoRCwgZCwgZywgYik7XG4gIH0sIHRoaXMudmVyaWZ5UmF3ID0gZnVuY3Rpb24obywgbCwgZiwgZCkge1xuICAgIHZhciBnID0gdGhpcy5lY3BhcmFtcy5uLCBTID0gdGhpcy5lY3BhcmFtcy5HO1xuICAgIGlmIChsLmNvbXBhcmVUbyhpLk9ORSkgPCAwIHx8IGwuY29tcGFyZVRvKGcpID49IDAgfHwgZi5jb21wYXJlVG8oaS5PTkUpIDwgMCB8fCBmLmNvbXBhcmVUbyhnKSA+PSAwKVxuICAgICAgcmV0dXJuICExO1xuICAgIHZhciBiID0gZi5tb2RJbnZlcnNlKGcpLCBEID0gby5tdWx0aXBseShiKS5tb2QoZyksIEEgPSBsLm11bHRpcGx5KGIpLm1vZChnKSwgSSA9IFMubXVsdGlwbHkoRCkuYWRkKGQubXVsdGlwbHkoQSkpLCBtID0gSS5nZXRYKCkudG9CaWdJbnRlZ2VyKCkubW9kKGcpO1xuICAgIHJldHVybiBtLmVxdWFscyhsKTtcbiAgfSwgdGhpcy5zZXJpYWxpemVTaWcgPSBmdW5jdGlvbihvLCBsKSB7XG4gICAgdmFyIGYgPSBvLnRvQnl0ZUFycmF5U2lnbmVkKCksIGQgPSBsLnRvQnl0ZUFycmF5U2lnbmVkKCksIGcgPSBbXTtcbiAgICByZXR1cm4gZy5wdXNoKDIpLCBnLnB1c2goZi5sZW5ndGgpLCBnID0gZy5jb25jYXQoZiksIGcucHVzaCgyKSwgZy5wdXNoKGQubGVuZ3RoKSwgZyA9IGcuY29uY2F0KGQpLCBnLnVuc2hpZnQoZy5sZW5ndGgpLCBnLnVuc2hpZnQoNDgpLCBnO1xuICB9LCB0aGlzLnBhcnNlU2lnID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsO1xuICAgIGlmIChvWzBdICE9IDQ4KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIG5vdCBhIHZhbGlkIERFUlNlcXVlbmNlXCIpO1xuICAgIGlmIChsID0gMiwgb1tsXSAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgZWxlbWVudCBpbiBzaWduYXR1cmUgbXVzdCBiZSBhIERFUkludGVnZXJcIik7XG4gICAgdmFyIGYgPSBvLnNsaWNlKGwgKyAyLCBsICsgMiArIG9bbCArIDFdKTtcbiAgICBpZiAobCArPSAyICsgb1tsICsgMV0sIG9bbF0gIT0gMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlY29uZCBlbGVtZW50IGluIHNpZ25hdHVyZSBtdXN0IGJlIGEgREVSSW50ZWdlclwiKTtcbiAgICB2YXIgZCA9IG8uc2xpY2UobCArIDIsIGwgKyAyICsgb1tsICsgMV0pO1xuICAgIGwgKz0gMiArIG9bbCArIDFdO1xuICAgIHZhciBnID0gaS5mcm9tQnl0ZUFycmF5VW5zaWduZWQoZiksIFMgPSBpLmZyb21CeXRlQXJyYXlVbnNpZ25lZChkKTtcbiAgICByZXR1cm4geyByOiBnLCBzOiBTIH07XG4gIH0sIHRoaXMucGFyc2VTaWdDb21wYWN0ID0gZnVuY3Rpb24obykge1xuICAgIGlmIChvLmxlbmd0aCAhPT0gNjUpXG4gICAgICB0aHJvdyBcIlNpZ25hdHVyZSBoYXMgdGhlIHdyb25nIGxlbmd0aFwiO1xuICAgIHZhciBsID0gb1swXSAtIDI3O1xuICAgIGlmIChsIDwgMCB8fCBsID4gNylcbiAgICAgIHRocm93IFwiSW52YWxpZCBzaWduYXR1cmUgdHlwZVwiO1xuICAgIHZhciBmID0gdGhpcy5lY3BhcmFtcy5uLCBkID0gaS5mcm9tQnl0ZUFycmF5VW5zaWduZWQoby5zbGljZSgxLCAzMykpLm1vZChmKSwgZyA9IGkuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKG8uc2xpY2UoMzMsIDY1KSkubW9kKGYpO1xuICAgIHJldHVybiB7IHI6IGQsIHM6IGcsIGk6IGwgfTtcbiAgfSwgdGhpcy5yZWFkUEtDUzVQcnZLZXlIZXggPSBmdW5jdGlvbihvKSB7XG4gICAgaWYgKHkobykgPT09ICExKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IEFTTi4xIGhleCBzdHJpbmdcIik7XG4gICAgdmFyIGwsIGYsIGQ7XG4gICAgdHJ5IHtcbiAgICAgIGwgPSBjKG8sIDAsIFtcIlswXVwiLCAwXSwgXCIwNlwiKSwgZiA9IGMobywgMCwgWzFdLCBcIjA0XCIpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZCA9IGMobywgMCwgW1wiWzFdXCIsIDBdLCBcIjAzXCIpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUyMxLzUgcGxhaW4gRUNDIHByaXZhdGUga2V5XCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5jdXJ2ZU5hbWUgPSB1KGwpLCB0aGlzLmN1cnZlTmFtZSA9PT0gdm9pZCAwKVxuICAgICAgdGhyb3cgXCJ1bnN1cHBvcnRlZCBjdXJ2ZSBuYW1lXCI7XG4gICAgdGhpcy5zZXROYW1lZEN1cnZlKHRoaXMuY3VydmVOYW1lKSwgdGhpcy5zZXRQdWJsaWNLZXlIZXgoZCksIHRoaXMuc2V0UHJpdmF0ZUtleUhleChmKSwgdGhpcy5pc1B1YmxpYyA9ICExO1xuICB9LCB0aGlzLnJlYWRQS0NTOFBydktleUhleCA9IGZ1bmN0aW9uKG8pIHtcbiAgICBpZiAoeShvKSA9PT0gITEpXG4gICAgICB0aHJvdyBuZXcgcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO1xuICAgIHZhciBsLCBmLCBkLCBnO1xuICAgIHRyeSB7XG4gICAgICBsID0gYyhvLCAwLCBbMSwgMF0sIFwiMDZcIiksIGYgPSBjKG8sIDAsIFsxLCAxXSwgXCIwNlwiKSwgZCA9IGMobywgMCwgWzIsIDAsIDFdLCBcIjA0XCIpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZyA9IGMobywgMCwgWzIsIDAsIFwiWzFdXCIsIDBdLCBcIjAzXCIpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgcihcIm1hbGZvcm1lZCBQS0NTIzggcGxhaW4gRUNDIHByaXZhdGUga2V5XCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5jdXJ2ZU5hbWUgPSB1KGYpLCB0aGlzLmN1cnZlTmFtZSA9PT0gdm9pZCAwKVxuICAgICAgdGhyb3cgbmV3IHIoXCJ1bnN1cHBvcnRlZCBjdXJ2ZSBuYW1lXCIpO1xuICAgIHRoaXMuc2V0TmFtZWRDdXJ2ZSh0aGlzLmN1cnZlTmFtZSksIHRoaXMuc2V0UHVibGljS2V5SGV4KGcpLCB0aGlzLnNldFByaXZhdGVLZXlIZXgoZCksIHRoaXMuaXNQdWJsaWMgPSAhMTtcbiAgfSwgdGhpcy5yZWFkUEtDUzhQdWJLZXlIZXggPSBmdW5jdGlvbihvKSB7XG4gICAgaWYgKHkobykgPT09ICExKVxuICAgICAgdGhyb3cgbmV3IHIoXCJub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgICB2YXIgbCwgZiwgZDtcbiAgICB0cnkge1xuICAgICAgbCA9IGMobywgMCwgWzAsIDBdLCBcIjA2XCIpLCBmID0gYyhvLCAwLCBbMCwgMV0sIFwiMDZcIiksIGQgPSBjKG8sIDAsIFsxXSwgXCIwM1wiKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyByKFwibWFsZm9ybWVkIFBLQ1MjOCBFQ0MgcHVibGljIGtleVwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY3VydmVOYW1lID0gdShmKSwgdGhpcy5jdXJ2ZU5hbWUgPT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgcihcInVuc3VwcG9ydGVkIGN1cnZlIG5hbWVcIik7XG4gICAgdGhpcy5zZXROYW1lZEN1cnZlKHRoaXMuY3VydmVOYW1lKSwgdGhpcy5zZXRQdWJsaWNLZXlIZXgoZCk7XG4gIH0sIHRoaXMucmVhZENlcnRQdWJLZXlIZXggPSBmdW5jdGlvbihvLCBsKSB7XG4gICAgaWYgKHkobykgPT09ICExKVxuICAgICAgdGhyb3cgbmV3IHIoXCJub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgICB2YXIgZiwgZDtcbiAgICB0cnkge1xuICAgICAgZiA9IGMobywgMCwgWzAsIDUsIDAsIDFdLCBcIjA2XCIpLCBkID0gYyhvLCAwLCBbMCwgNSwgMV0sIFwiMDNcIik7XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgcihcIm1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBFQ0MgcHVibGljIGtleVwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY3VydmVOYW1lID0gdShmKSwgdGhpcy5jdXJ2ZU5hbWUgPT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgcihcInVuc3VwcG9ydGVkIGN1cnZlIG5hbWVcIik7XG4gICAgdGhpcy5zZXROYW1lZEN1cnZlKHRoaXMuY3VydmVOYW1lKSwgdGhpcy5zZXRQdWJsaWNLZXlIZXgoZCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiBlLmN1cnZlICE9PSB2b2lkIDAgJiYgKHRoaXMuY3VydmVOYW1lID0gZS5jdXJ2ZSksIHRoaXMuY3VydmVOYW1lID09PSB2b2lkIDAgJiYgKHRoaXMuY3VydmVOYW1lID0gdCksIHRoaXMuc2V0TmFtZWRDdXJ2ZSh0aGlzLmN1cnZlTmFtZSksIGUgIT09IHZvaWQgMCAmJiAoZS5wcnYgIT09IHZvaWQgMCAmJiB0aGlzLnNldFByaXZhdGVLZXlIZXgoZS5wcnYpLCBlLnB1YiAhPT0gdm9pZCAwICYmIHRoaXMuc2V0UHVibGljS2V5SGV4KGUucHViKSk7XG59O1xuYS5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXggPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYS5jcnlwdG8uRUNEU0EucGFyc2VTaWdIZXhJbkhleFJTKGUpLCByID0gbmV3IFIodC5yLCAxNiksIGkgPSBuZXcgUih0LnMsIDE2KTtcbiAgcmV0dXJuIHsgciwgczogaSB9O1xufTtcbmEuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWLCByID0gdC5nZXRDaGlsZElkeCwgaSA9IHQuZ2V0VjtcbiAgaWYgKHQuY2hlY2tTdHJpY3RERVIoZSwgMCksIGUuc3Vic3RyKDAsIDIpICE9IFwiMzBcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJzaWduYXR1cmUgaXMgbm90IGEgQVNOLjEgc2VxdWVuY2VcIik7XG4gIHZhciBzID0gcihlLCAwKTtcbiAgaWYgKHMubGVuZ3RoICE9IDIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwic2lnbmF0dXJlIHNoYWxsIGhhdmUgdHdvIGVsZW1lbnRzXCIpO1xuICB2YXIgbiA9IHNbMF0sIGggPSBzWzFdO1xuICBpZiAoZS5zdWJzdHIobiwgMikgIT0gXCIwMlwiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIjFzdCBpdGVtIG5vdCBBU04uMSBpbnRlZ2VyXCIpO1xuICBpZiAoZS5zdWJzdHIoaCwgMikgIT0gXCIwMlwiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIjJuZCBpdGVtIG5vdCBBU04uMSBpbnRlZ2VyXCIpO1xuICB2YXIgdSA9IGkoZSwgbiksIHAgPSBpKGUsIGgpO1xuICByZXR1cm4geyByOiB1LCBzOiBwIH07XG59O1xuYS5jcnlwdG8uRUNEU0EuYXNuMVNpZ1RvQ29uY2F0U2lnID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUyhlKSwgciA9IHQuciwgaSA9IHQucztcbiAgaWYgKHIubGVuZ3RoID49IDEzMCAmJiByLmxlbmd0aCA8PSAxMzQpIHtcbiAgICBpZiAoci5sZW5ndGggJSAyICE9IDApXG4gICAgICB0aHJvdyBFcnJvcihcInVua25vd24gRUNEU0Egc2lnIHIgbGVuZ3RoIGVycm9yXCIpO1xuICAgIGlmIChpLmxlbmd0aCAlIDIgIT0gMClcbiAgICAgIHRocm93IEVycm9yKFwidW5rbm93biBFQ0RTQSBzaWcgcyBsZW5ndGggZXJyb3JcIik7XG4gICAgci5zdWJzdHIoMCwgMikgPT0gXCIwMFwiICYmIChyID0gci5zdWJzdHIoMikpLCBpLnN1YnN0cigwLCAyKSA9PSBcIjAwXCIgJiYgKGkgPSBpLnN1YnN0cigyKSk7XG4gICAgdmFyIHMgPSBNYXRoLm1heChyLmxlbmd0aCwgaS5sZW5ndGgpO1xuICAgIHJldHVybiByID0gKFwiMDAwMDAwXCIgKyByKS5zbGljZSgtcyksIGkgPSAoXCIwMDAwMDBcIiArIGkpLnNsaWNlKC1zKSwgciArIGk7XG4gIH1cbiAgaWYgKHIuc3Vic3RyKDAsIDIpID09IFwiMDBcIiAmJiByLmxlbmd0aCAlIDMyID09IDIgJiYgKHIgPSByLnN1YnN0cigyKSksIGkuc3Vic3RyKDAsIDIpID09IFwiMDBcIiAmJiBpLmxlbmd0aCAlIDMyID09IDIgJiYgKGkgPSBpLnN1YnN0cigyKSksIHIubGVuZ3RoICUgMzIgPT0gMzAgJiYgKHIgPSBcIjAwXCIgKyByKSwgaS5sZW5ndGggJSAzMiA9PSAzMCAmJiAoaSA9IFwiMDBcIiArIGkpLCByLmxlbmd0aCAlIDMyICE9IDApXG4gICAgdGhyb3cgRXJyb3IoXCJ1bmtub3duIEVDRFNBIHNpZyByIGxlbmd0aCBlcnJvclwiKTtcbiAgaWYgKGkubGVuZ3RoICUgMzIgIT0gMClcbiAgICB0aHJvdyBFcnJvcihcInVua25vd24gRUNEU0Egc2lnIHMgbGVuZ3RoIGVycm9yXCIpO1xuICByZXR1cm4gciArIGk7XG59O1xuYS5jcnlwdG8uRUNEU0EuY29uY2F0U2lnVG9BU04xU2lnID0gZnVuY3Rpb24oZSkge1xuICBpZiAoZS5sZW5ndGggJSA0ICE9IDApXG4gICAgdGhyb3cgRXJyb3IoXCJ1bmtub3duIEVDRFNBIGNvbmNhdGluYXRlZCByLXMgc2lnIGxlbmd0aCBlcnJvclwiKTtcbiAgdmFyIHQgPSBlLnN1YnN0cigwLCBlLmxlbmd0aCAvIDIpLCByID0gZS5zdWJzdHIoZS5sZW5ndGggLyAyKTtcbiAgcmV0dXJuIGEuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnKHQsIHIpO1xufTtcbmEuY3J5cHRvLkVDRFNBLmhleFJTU2lnVG9BU04xU2lnID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IG5ldyBSKGUsIDE2KSwgaSA9IG5ldyBSKHQsIDE2KTtcbiAgcmV0dXJuIGEuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcociwgaSk7XG59O1xuYS5jcnlwdG8uRUNEU0EuYmlSU1NpZ1RvQVNOMVNpZyA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBhLmFzbjEsIGkgPSBuZXcgci5ERVJJbnRlZ2VyKHsgYmlnaW50OiBlIH0pLCBzID0gbmV3IHIuREVSSW50ZWdlcih7IGJpZ2ludDogdCB9KSwgbiA9IG5ldyByLkRFUlNlcXVlbmNlKHsgYXJyYXk6IFtpLCBzXSB9KTtcbiAgcmV0dXJuIG4udG9oZXgoKTtcbn07XG5hLmNyeXB0by5FQ0RTQS5nZXROYW1lID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZSA9PT0gXCIyYjgxMDQwMDFmXCIgPyBcInNlY3AxOTJrMVwiIDogZSA9PT0gXCIyYTg2NDhjZTNkMDMwMTA3XCIgPyBcInNlY3AyNTZyMVwiIDogZSA9PT0gXCIyYjgxMDQwMDBhXCIgPyBcInNlY3AyNTZrMVwiIDogZSA9PT0gXCIyYjgxMDQwMDIxXCIgPyBcInNlY3AyMjRyMVwiIDogZSA9PT0gXCIyYjgxMDQwMDIyXCIgPyBcInNlY3AzODRyMVwiIDogZSA9PT0gXCIyYjgxMDQwMDIzXCIgPyBcInNlY3A1MjFyMVwiIDogXCJ8c2VjcDI1NnIxfE5JU1QgUC0yNTZ8UC0yNTZ8cHJpbWUyNTZ2MXxcIi5pbmRleE9mKGUpICE9PSAtMSA/IFwic2VjcDI1NnIxXCIgOiBcInxzZWNwMjU2azF8XCIuaW5kZXhPZihlKSAhPT0gLTEgPyBcInNlY3AyNTZrMVwiIDogXCJ8c2VjcDIyNHIxfE5JU1QgUC0yMjR8UC0yMjR8XCIuaW5kZXhPZihlKSAhPT0gLTEgPyBcInNlY3AyMjRyMVwiIDogXCJ8c2VjcDM4NHIxfE5JU1QgUC0zODR8UC0zODR8XCIuaW5kZXhPZihlKSAhPT0gLTEgPyBcInNlY3AzODRyMVwiIDogXCJ8c2VjcDUyMXIxfE5JU1QgUC01MjF8UC01MjF8XCIuaW5kZXhPZihlKSAhPT0gLTEgPyBcInNlY3A1MjFyMVwiIDogbnVsbDtcbn07XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuY3J5cHRvID4gXCJ1XCIgfHwgIWEuY3J5cHRvKSAmJiAoYS5jcnlwdG8gPSB7fSk7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCID0gbmV3IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IHt9LCB0ID0ge307XG4gIGZ1bmN0aW9uIHIoaSkge1xuICAgIHJldHVybiBuZXcgUihpLCAxNik7XG4gIH1cbiAgdGhpcy5nZXRCeU5hbWUgPSBmdW5jdGlvbihpKSB7XG4gICAgdmFyIHMgPSBpO1xuICAgIGlmICh0eXBlb2YgdFtzXSA8IFwidVwiICYmIChzID0gdFtpXSksIHR5cGVvZiBlW3NdIDwgXCJ1XCIpXG4gICAgICByZXR1cm4gZVtzXTtcbiAgICB0aHJvdyBcInVucmVnaXN0ZXJlZCBFQyBjdXJ2ZSBuYW1lOiBcIiArIHM7XG4gIH0sIHRoaXMucmVnaXN0ID0gZnVuY3Rpb24oaSwgcywgbiwgaCwgdSwgcCwgYywgeSwgdiwgbywgbCwgZikge1xuICAgIGVbaV0gPSB7fTtcbiAgICB2YXIgZCA9IHIobiksIGcgPSByKGgpLCBTID0gcih1KSwgYiA9IHIocCksIEQgPSByKGMpLCBBID0gbmV3IEJlKGQsIGcsIFMpLCBJID0gQS5kZWNvZGVQb2ludEhleChcIjA0XCIgKyB5ICsgdik7XG4gICAgZVtpXS5uYW1lID0gaSwgZVtpXS5rZXlsZW4gPSBzLCBlW2ldLmtleWNoYXJsZW4gPSBNYXRoLmNlaWwocyAvIDgpICogMiwgZVtpXS5jdXJ2ZSA9IEEsIGVbaV0uRyA9IEksIGVbaV0ubiA9IGIsIGVbaV0uaCA9IEQsIGVbaV0ub2lkID0gbCwgZVtpXS5pbmZvID0gZjtcbiAgICBmb3IgKHZhciBtID0gMDsgbSA8IG8ubGVuZ3RoOyBtKyspXG4gICAgICB0W29bbV1dID0gaTtcbiAgfTtcbn0oKTtcbmEuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDEyOHIxXCIsIDEyOCwgXCJGRkZGRkZGREZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRlwiLCBcIkZGRkZGRkZERkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDXCIsIFwiRTg3NTc5QzExMDc5RjQzREQ4MjQ5OTNDMkNFRTVFRDNcIiwgXCJGRkZGRkZGRTAwMDAwMDAwNzVBMzBEMUI5MDM4QTExNVwiLCBcIjFcIiwgXCIxNjFGRjc1MjhCODk5QjJEMEMyODYwN0NBNTJDNUI4NlwiLCBcIkNGNUFDODM5NUJBRkVCMTNDMDJEQTI5MkRERUQ3QTgzXCIsIFtdLCBcIlwiLCBcInNlY3AxMjhyMSA6IFNFQ0cgY3VydmUgb3ZlciBhIDEyOCBiaXQgcHJpbWUgZmllbGRcIik7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AxNjBrMVwiLCAxNjAsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGQUM3M1wiLCBcIjBcIiwgXCI3XCIsIFwiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMUI4RkExNkRGQUI5QUNBMTZCNkIzXCIsIFwiMVwiLCBcIjNCNEMzODJDRTM3QUExOTJBNDAxOUU3NjMwMzZGNEY1REQ0RDdFQkJcIiwgXCI5MzhDRjkzNTMxOEZEQ0VENkJDMjgyODY1MzE3MzNDM0YwM0M0RkVFXCIsIFtdLCBcIlwiLCBcInNlY3AxNjBrMSA6IFNFQ0cgY3VydmUgb3ZlciBhIDE2MCBiaXQgcHJpbWUgZmllbGRcIik7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AxNjByMVwiLCAxNjAsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY3RkZGRkZGRlwiLCBcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGN0ZGRkZGRkNcIiwgXCIxQzk3QkVGQzU0QkQ3QThCNjVBQ0Y4OUY4MUQ0RDRBREM1NjVGQTQ1XCIsIFwiMDEwMDAwMDAwMDAwMDAwMDAwMDAwMUY0QzhGOTI3QUVEM0NBNzUyMjU3XCIsIFwiMVwiLCBcIjRBOTZCNTY4OEVGNTczMjg0NjY0Njk4OTY4QzM4QkI5MTNDQkZDODJcIiwgXCIyM0E2Mjg1NTMxNjg5NDdENTlEQ0M5MTIwNDIzNTEzNzdBQzVGQjMyXCIsIFtdLCBcIlwiLCBcInNlY3AxNjByMSA6IFNFQ0cgY3VydmUgb3ZlciBhIDE2MCBiaXQgcHJpbWUgZmllbGRcIik7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AxOTJrMVwiLCAxOTIsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZFRTM3XCIsIFwiMFwiLCBcIjNcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkUyNkYyRkMxNzBGNjk0NjZBNzRERUZEOERcIiwgXCIxXCIsIFwiREI0RkYxMEVDMDU3RTlBRTI2QjA3RDAyODBCN0Y0MzQxREE1RDFCMUVBRTA2QzdEXCIsIFwiOUIyRjJGNkQ5QzU2MjhBNzg0NDE2M0QwMTVCRTg2MzQ0MDgyQUE4OEQ5NUUyRjlEXCIsIFtdKTtcbmEuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDE5MnIxXCIsIDE5MiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkZcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkNcIiwgXCI2NDIxMDUxOUU1OUM4MEU3MEZBN0U5QUI3MjI0MzA0OUZFQjhERUVDQzE0NkI5QjFcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY5OURFRjgzNjE0NkJDOUIxQjREMjI4MzFcIiwgXCIxXCIsIFwiMTg4REE4MEVCMDMwOTBGNjdDQkYyMEVCNDNBMTg4MDBGNEZGMEFGRDgyRkYxMDEyXCIsIFwiMDcxOTJCOTVGRkM4REE3ODYzMTAxMUVENkIyNENERDU3M0Y5NzdBMTFFNzk0ODExXCIsIFtdKTtcbmEuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDIyNHIxXCIsIDIyNCwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMVwiLCBcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFXCIsIFwiQjQwNTBBODUwQzA0QjNBQkY1NDEzMjU2NTA0NEIwQjdEN0JGRDhCQTI3MEIzOTQzMjM1NUZGQjRcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGMTZBMkUwQjhGMDNFMTNERDI5NDU1QzVDMkEzRFwiLCBcIjFcIiwgXCJCNzBFMENCRDZCQjRCRjdGMzIxMzkwQjk0QTAzQzFEMzU2QzIxMTIyMzQzMjgwRDYxMTVDMUQyMVwiLCBcIkJEMzc2Mzg4QjVGNzIzRkI0QzIyREZFNkNENDM3NUEwNUEwNzQ3NjQ0NEQ1ODE5OTg1MDA3RTM0XCIsIFtdKTtcbmEuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDI1NmsxXCIsIDI1NiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGQzJGXCIsIFwiMFwiLCBcIjdcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUJBQUVEQ0U2QUY0OEEwM0JCRkQyNUU4Q0QwMzY0MTQxXCIsIFwiMVwiLCBcIjc5QkU2NjdFRjlEQ0JCQUM1NUEwNjI5NUNFODcwQjA3MDI5QkZDREIyRENFMjhEOTU5RjI4MTVCMTZGODE3OThcIiwgXCI0ODNBREE3NzI2QTNDNDY1NURBNEZCRkMwRTExMDhBOEZEMTdCNDQ4QTY4NTU0MTk5QzQ3RDA4RkZCMTBENEI4XCIsIFtdKTtcbmEuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDI1NnIxXCIsIDI1NiwgXCJGRkZGRkZGRjAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGXCIsIFwiRkZGRkZGRkYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQ1wiLCBcIjVBQzYzNUQ4QUEzQTkzRTdCM0VCQkQ1NTc2OTg4NkJDNjUxRDA2QjBDQzUzQjBGNjNCQ0UzQzNFMjdEMjYwNEJcIiwgXCJGRkZGRkZGRjAwMDAwMDAwRkZGRkZGRkZGRkZGRkZGRkJDRTZGQUFEQTcxNzlFODRGM0I5Q0FDMkZDNjMyNTUxXCIsIFwiMVwiLCBcIjZCMTdEMUYyRTEyQzQyNDdGOEJDRTZFNTYzQTQ0MEYyNzcwMzdEODEyREVCMzNBMEY0QTEzOTQ1RDg5OEMyOTZcIiwgXCI0RkUzNDJFMkZFMUE3RjlCOEVFN0VCNEE3QzBGOUUxNjJCQ0UzMzU3NkIzMTVFQ0VDQkI2NDA2ODM3QkY1MUY1XCIsIFtcIk5JU1QgUC0yNTZcIiwgXCJQLTI1NlwiLCBcInByaW1lMjU2djFcIl0pO1xuYS5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoXCJzZWNwMzg0cjFcIiwgMzg0LCBcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkZGRjAwMDAwMDAwMDAwMDAwMDBGRkZGRkZGRlwiLCBcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkZGRjAwMDAwMDAwMDAwMDAwMDBGRkZGRkZGQ1wiLCBcIkIzMzEyRkE3RTIzRUU3RTQ5ODhFMDU2QkUzRjgyRDE5MTgxRDlDNkVGRTgxNDExMjAzMTQwODhGNTAxMzg3NUFDNjU2Mzk4RDhBMkVEMTlEMkE4NUM4RUREM0VDMkFFRlwiLCBcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkM3NjM0RDgxRjQzNzJEREY1ODFBMERCMjQ4QjBBNzdBRUNFQzE5NkFDQ0M1Mjk3M1wiLCBcIjFcIiwgXCJBQTg3Q0EyMkJFOEIwNTM3OEVCMUM3MUVGMzIwQUQ3NDZFMUQzQjYyOEJBNzlCOTg1OUY3NDFFMDgyNTQyQTM4NTUwMkYyNURCRjU1Mjk2QzNBNTQ1RTM4NzI3NjBBQjdcIiwgXCIzNjE3ZGU0YTk2MjYyYzZmNWQ5ZTk4YmY5MjkyZGMyOWY4ZjQxZGJkMjg5YTE0N2NlOWRhMzExM2I1ZjBiOGMwMGE2MGIxY2UxZDdlODE5ZDdhNDMxZDdjOTBlYTBlNWZcIiwgW1wiTklTVCBQLTM4NFwiLCBcIlAtMzg0XCJdKTtcbmEuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDUyMXIxXCIsIDUyMSwgXCIxRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRlwiLCBcIjFGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDXCIsIFwiMDUxOTUzRUI5NjE4RTFDOUExRjkyOUEyMUEwQjY4NTQwRUVBMkRBNzI1Qjk5QjMxNUYzQjhCNDg5OTE4RUYxMDlFMTU2MTkzOTUxRUM3RTkzN0IxNjUyQzBCRDNCQjFCRjA3MzU3M0RGODgzRDJDMzRGMUVGNDUxRkQ0NkI1MDNGMDBcIiwgXCIxRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZBNTE4Njg3ODNCRjJGOTY2QjdGQ0MwMTQ4RjcwOUE1RDAzQkI1QzlCODg5OUM0N0FFQkI2RkI3MUU5MTM4NjQwOVwiLCBcIjFcIiwgXCIwMEM2ODU4RTA2QjcwNDA0RTlDRDlFM0VDQjY2MjM5NUI0NDI5QzY0ODEzOTA1M0ZCNTIxRjgyOEFGNjA2QjREM0RCQUExNEI1RTc3RUZFNzU5MjhGRTFEQzEyN0EyRkZBOERFMzM0OEIzQzE4NTZBNDI5QkY5N0U3RTMxQzJFNUJENjZcIiwgXCIwMTE4MzkyOTZhNzg5YTNiYzAwNDVjOGE1ZmI0MmM3ZDFiZDk5OGY1NDQ0OTU3OWI0NDY4MTdhZmJkMTcyNzNlNjYyYzk3ZWU3Mjk5NWVmNDI2NDBjNTUwYjkwMTNmYWQwNzYxMzUzYzcwODZhMjcyYzI0MDg4YmU5NDc2OWZkMTY2NTBcIiwgW1wiTklTVCBQLTUyMVwiLCBcIlAtNTIxXCJdKTtcbih0eXBlb2YgYSA+IFwidVwiIHx8ICFhKSAmJiAoYSA9IHt9KTtcbih0eXBlb2YgYS5jcnlwdG8gPiBcInVcIiB8fCAhYS5jcnlwdG8pICYmIChhLmNyeXB0byA9IHt9KTtcbmEuY3J5cHRvLkRTQSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IFY7XG4gIGUuZ2V0VmJ5TGlzdDtcbiAgdmFyIHQgPSBlLmdldFZieUxpc3RFeCwgciA9IGUuaXNBU04xSEVYLCBpID0gUjtcbiAgdGhpcy5wID0gbnVsbCwgdGhpcy5xID0gbnVsbCwgdGhpcy5nID0gbnVsbCwgdGhpcy55ID0gbnVsbCwgdGhpcy54ID0gbnVsbCwgdGhpcy50eXBlID0gXCJEU0FcIiwgdGhpcy5pc1ByaXZhdGUgPSAhMSwgdGhpcy5pc1B1YmxpYyA9ICExLCB0aGlzLnNldFByaXZhdGUgPSBmdW5jdGlvbihzLCBuLCBoLCB1LCBwKSB7XG4gICAgdGhpcy5pc1ByaXZhdGUgPSAhMCwgdGhpcy5wID0gcywgdGhpcy5xID0gbiwgdGhpcy5nID0gaCwgdGhpcy55ID0gdSwgdGhpcy54ID0gcDtcbiAgfSwgdGhpcy5zZXRQcml2YXRlSGV4ID0gZnVuY3Rpb24ocywgbiwgaCwgdSwgcCkge1xuICAgIHZhciBjLCB5LCB2LCBvLCBsO1xuICAgIGMgPSBuZXcgUihzLCAxNiksIHkgPSBuZXcgUihuLCAxNiksIHYgPSBuZXcgUihoLCAxNiksIHR5cGVvZiB1ID09IFwic3RyaW5nXCIgJiYgdS5sZW5ndGggPiAxID8gbyA9IG5ldyBSKHUsIDE2KSA6IG8gPSBudWxsLCBsID0gbmV3IFIocCwgMTYpLCB0aGlzLnNldFByaXZhdGUoYywgeSwgdiwgbywgbCk7XG4gIH0sIHRoaXMuc2V0UHVibGljID0gZnVuY3Rpb24ocywgbiwgaCwgdSkge1xuICAgIHRoaXMuaXNQdWJsaWMgPSAhMCwgdGhpcy5wID0gcywgdGhpcy5xID0gbiwgdGhpcy5nID0gaCwgdGhpcy55ID0gdSwgdGhpcy54ID0gbnVsbDtcbiAgfSwgdGhpcy5zZXRQdWJsaWNIZXggPSBmdW5jdGlvbihzLCBuLCBoLCB1KSB7XG4gICAgdmFyIHAsIGMsIHksIHY7XG4gICAgcCA9IG5ldyBSKHMsIDE2KSwgYyA9IG5ldyBSKG4sIDE2KSwgeSA9IG5ldyBSKGgsIDE2KSwgdiA9IG5ldyBSKHUsIDE2KSwgdGhpcy5zZXRQdWJsaWMocCwgYywgeSwgdik7XG4gIH0sIHRoaXMuc2lnbldpdGhNZXNzYWdlSGFzaCA9IGZ1bmN0aW9uKHMpIHtcbiAgICB2YXIgbiA9IHRoaXMucCwgaCA9IHRoaXMucSwgdSA9IHRoaXMuZztcbiAgICB0aGlzLnk7XG4gICAgdmFyIHAgPSB0aGlzLngsIGMgPSBhLmNyeXB0by5VdGlsLmdldFJhbmRvbUJpZ0ludGVnZXJNaW5Ub01heChSLk9ORS5hZGQoUi5PTkUpLCBoLnN1YnRyYWN0KFIuT05FKSksIHkgPSBzLnN1YnN0cigwLCBoLmJpdExlbmd0aCgpIC8gNCksIHYgPSBuZXcgUih5LCAxNiksIG8gPSB1Lm1vZFBvdyhjLCBuKS5tb2QoaCksIGwgPSBjLm1vZEludmVyc2UoaCkubXVsdGlwbHkodi5hZGQocC5tdWx0aXBseShvKSkpLm1vZChoKSwgZiA9IGEuYXNuMS5BU04xVXRpbC5qc29uVG9BU04xSEVYKHsgc2VxOiBbeyBpbnQ6IHsgYmlnaW50OiBvIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBsIH0gfV0gfSk7XG4gICAgcmV0dXJuIGY7XG4gIH0sIHRoaXMudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoID0gZnVuY3Rpb24ocywgbikge1xuICAgIHZhciBoID0gdGhpcy5wLCB1ID0gdGhpcy5xLCBwID0gdGhpcy5nLCBjID0gdGhpcy55LCB5ID0gdGhpcy5wYXJzZUFTTjFTaWduYXR1cmUobiksIHYgPSB5WzBdLCBvID0geVsxXSwgbCA9IHMuc3Vic3RyKDAsIHUuYml0TGVuZ3RoKCkgLyA0KSwgZiA9IG5ldyBSKGwsIDE2KTtcbiAgICBpZiAoUi5aRVJPLmNvbXBhcmVUbyh2KSA+IDAgfHwgdi5jb21wYXJlVG8odSkgPiAwIHx8IFIuWkVSTy5jb21wYXJlVG8obykgPj0gMCB8fCBvLmNvbXBhcmVUbyh1KSA+IDApXG4gICAgICB0aHJvdyBcImludmFsaWQgRFNBIHNpZ25hdHVyZVwiO1xuICAgIHZhciBkID0gby5tb2RJbnZlcnNlKHUpLCBnID0gZi5tdWx0aXBseShkKS5tb2QodSksIFMgPSB2Lm11bHRpcGx5KGQpLm1vZCh1KSwgYiA9IHAubW9kUG93KGcsIGgpLm11bHRpcGx5KGMubW9kUG93KFMsIGgpKS5tb2QoaCkubW9kKHUpO1xuICAgIHJldHVybiBiLmNvbXBhcmVUbyh2KSA9PSAwO1xuICB9LCB0aGlzLnBhcnNlQVNOMVNpZ25hdHVyZSA9IGZ1bmN0aW9uKHMpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIG4gPSBuZXcgaSh0KHMsIDAsIFswXSwgXCIwMlwiKSwgMTYpLCBoID0gbmV3IGkodChzLCAwLCBbMV0sIFwiMDJcIiksIDE2KTtcbiAgICAgIHJldHVybiBbbiwgaF07XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgQVNOLjEgRFNBIHNpZ25hdHVyZVwiKTtcbiAgICB9XG4gIH0sIHRoaXMucmVhZFBLQ1M1UHJ2S2V5SGV4ID0gZnVuY3Rpb24ocykge1xuICAgIHZhciBuLCBoLCB1LCBwLCBjO1xuICAgIGlmIChyKHMpID09PSAhMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO1xuICAgIHRyeSB7XG4gICAgICBuID0gdChzLCAwLCBbMV0sIFwiMDJcIiksIGggPSB0KHMsIDAsIFsyXSwgXCIwMlwiKSwgdSA9IHQocywgMCwgWzNdLCBcIjAyXCIpLCBwID0gdChzLCAwLCBbNF0sIFwiMDJcIiksIGMgPSB0KHMsIDAsIFs1XSwgXCIwMlwiKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTIzEvNSBwbGFpbiBEU0EgcHJpdmF0ZSBrZXlcIik7XG4gICAgfVxuICAgIHRoaXMuc2V0UHJpdmF0ZUhleChuLCBoLCB1LCBwLCBjKTtcbiAgfSwgdGhpcy5yZWFkUEtDUzhQcnZLZXlIZXggPSBmdW5jdGlvbihzKSB7XG4gICAgdmFyIG4sIGgsIHUsIHA7XG4gICAgaWYgKHIocykgPT09ICExKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IEFTTi4xIGhleCBzdHJpbmdcIik7XG4gICAgdHJ5IHtcbiAgICAgIG4gPSB0KHMsIDAsIFsxLCAxLCAwXSwgXCIwMlwiKSwgaCA9IHQocywgMCwgWzEsIDEsIDFdLCBcIjAyXCIpLCB1ID0gdChzLCAwLCBbMSwgMSwgMl0sIFwiMDJcIiksIHAgPSB0KHMsIDAsIFsyLCAwXSwgXCIwMlwiKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTIzggcGxhaW4gRFNBIHByaXZhdGUga2V5XCIpO1xuICAgIH1cbiAgICB0aGlzLnNldFByaXZhdGVIZXgobiwgaCwgdSwgbnVsbCwgcCk7XG4gIH0sIHRoaXMucmVhZFBLQ1M4UHViS2V5SGV4ID0gZnVuY3Rpb24ocykge1xuICAgIHZhciBuLCBoLCB1LCBwO1xuICAgIGlmIChyKHMpID09PSAhMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO1xuICAgIHRyeSB7XG4gICAgICBuID0gdChzLCAwLCBbMCwgMSwgMF0sIFwiMDJcIiksIGggPSB0KHMsIDAsIFswLCAxLCAxXSwgXCIwMlwiKSwgdSA9IHQocywgMCwgWzAsIDEsIDJdLCBcIjAyXCIpLCBwID0gdChzLCAwLCBbMSwgMF0sIFwiMDJcIik7XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUyM4IERTQSBwdWJsaWMga2V5XCIpO1xuICAgIH1cbiAgICB0aGlzLnNldFB1YmxpY0hleChuLCBoLCB1LCBwKTtcbiAgfSwgdGhpcy5yZWFkQ2VydFB1YktleUhleCA9IGZ1bmN0aW9uKHMsIG4pIHtcbiAgICB2YXIgaCwgdSwgcCwgYztcbiAgICBpZiAocihzKSA9PT0gITEpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgICB0cnkge1xuICAgICAgaCA9IHQocywgMCwgWzAsIDUsIDAsIDEsIDBdLCBcIjAyXCIpLCB1ID0gdChzLCAwLCBbMCwgNSwgMCwgMSwgMV0sIFwiMDJcIiksIHAgPSB0KHMsIDAsIFswLCA1LCAwLCAxLCAyXSwgXCIwMlwiKSwgYyA9IHQocywgMCwgWzAsIDUsIDEsIDBdLCBcIjAyXCIpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFguNTA5IGNlcnRpZmljYXRlIERTQSBwdWJsaWMga2V5XCIpO1xuICAgIH1cbiAgICB0aGlzLnNldFB1YmxpY0hleChoLCB1LCBwLCBjKTtcbiAgfTtcbn07XG52YXIgayA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgcmV0dXJuIGkoSy5BRVMsIGYsIGQsIGcpO1xuICB9LCB0ID0gZnVuY3Rpb24oZiwgZCwgZykge1xuICAgIHJldHVybiBpKEsuVHJpcGxlREVTLCBmLCBkLCBnKTtcbiAgfSwgciA9IGZ1bmN0aW9uKGYsIGQsIGcpIHtcbiAgICByZXR1cm4gaShLLkRFUywgZiwgZCwgZyk7XG4gIH0sIGkgPSBmdW5jdGlvbihmLCBkLCBnLCBTKSB7XG4gICAgdmFyIGIgPSBLLmVuYy5IZXgucGFyc2UoZCksIEQgPSBLLmVuYy5IZXgucGFyc2UoZyksIEEgPSBLLmVuYy5IZXgucGFyc2UoUyksIEkgPSB7fTtcbiAgICBJLmtleSA9IEQsIEkuaXYgPSBBLCBJLmNpcGhlcnRleHQgPSBiO1xuICAgIHZhciBtID0gZi5kZWNyeXB0KEksIEQsIHsgaXY6IEEgfSk7XG4gICAgcmV0dXJuIEsuZW5jLkhleC5zdHJpbmdpZnkobSk7XG4gIH0sIHMgPSBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgcmV0dXJuIHUoSy5BRVMsIGYsIGQsIGcpO1xuICB9LCBuID0gZnVuY3Rpb24oZiwgZCwgZykge1xuICAgIHJldHVybiB1KEsuVHJpcGxlREVTLCBmLCBkLCBnKTtcbiAgfSwgaCA9IGZ1bmN0aW9uKGYsIGQsIGcpIHtcbiAgICByZXR1cm4gdShLLkRFUywgZiwgZCwgZyk7XG4gIH0sIHUgPSBmdW5jdGlvbihmLCBkLCBnLCBTKSB7XG4gICAgdmFyIGIgPSBLLmVuYy5IZXgucGFyc2UoZCksIEQgPSBLLmVuYy5IZXgucGFyc2UoZyksIEEgPSBLLmVuYy5IZXgucGFyc2UoUyksIEkgPSBmLmVuY3J5cHQoYiwgRCwgeyBpdjogQSB9KSwgbSA9IEsuZW5jLkhleC5wYXJzZShJLnRvU3RyaW5nKCkpLCBFID0gSy5lbmMuQmFzZTY0LnN0cmluZ2lmeShtKTtcbiAgICByZXR1cm4gRTtcbiAgfSwgcCA9IHsgXCJBRVMtMjU2LUNCQ1wiOiB7IHByb2M6IGUsIGVwcm9jOiBzLCBrZXlsZW46IDMyLCBpdmxlbjogMTYgfSwgXCJBRVMtMTkyLUNCQ1wiOiB7IHByb2M6IGUsIGVwcm9jOiBzLCBrZXlsZW46IDI0LCBpdmxlbjogMTYgfSwgXCJBRVMtMTI4LUNCQ1wiOiB7IHByb2M6IGUsIGVwcm9jOiBzLCBrZXlsZW46IDE2LCBpdmxlbjogMTYgfSwgXCJERVMtRURFMy1DQkNcIjogeyBwcm9jOiB0LCBlcHJvYzogbiwga2V5bGVuOiAyNCwgaXZsZW46IDggfSwgXCJERVMtQ0JDXCI6IHsgcHJvYzogciwgZXByb2M6IGgsIGtleWxlbjogOCwgaXZsZW46IDggfSB9LCBjID0gZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0gSy5saWIuV29yZEFycmF5LnJhbmRvbShmKSwgZyA9IEsuZW5jLkhleC5zdHJpbmdpZnkoZCk7XG4gICAgcmV0dXJuIGc7XG4gIH0sIHkgPSBmdW5jdGlvbihmKSB7XG4gICAgdmFyIGQgPSB7fSwgZyA9IGYubWF0Y2gobmV3IFJlZ0V4cChcIkRFSy1JbmZvOiAoW14sXSspLChbMC05QS1GYS1mXSspXCIsIFwibVwiKSk7XG4gICAgZyAmJiAoZC5jaXBoZXIgPSBnWzFdLCBkLml2c2FsdCA9IGdbMl0pO1xuICAgIHZhciBTID0gZi5tYXRjaChuZXcgUmVnRXhwKFwiLS0tLS1CRUdJTiAoW0EtWl0rKSBQUklWQVRFIEtFWS0tLS0tXCIpKTtcbiAgICBTICYmIChkLnR5cGUgPSBTWzFdKTtcbiAgICB2YXIgYiA9IC0xLCBEID0gMDtcbiAgICBmLmluZGV4T2YoYFxcclxuXFxyXG5gKSAhPSAtMSAmJiAoYiA9IGYuaW5kZXhPZihgXFxyXG5cXHJcbmApLCBEID0gMiksIGYuaW5kZXhPZihgXG5cbmApICE9IC0xICYmIChiID0gZi5pbmRleE9mKGBcblxuYCksIEQgPSAxKTtcbiAgICB2YXIgQSA9IGYuaW5kZXhPZihcIi0tLS0tRU5EXCIpO1xuICAgIGlmIChiICE9IC0xICYmIEEgIT0gLTEpIHtcbiAgICAgIHZhciBJID0gZi5zdWJzdHJpbmcoYiArIEQgKiAyLCBBIC0gRCk7XG4gICAgICBJID0gSS5yZXBsYWNlKC9cXHMrL2csIFwiXCIpLCBkLmRhdGEgPSBJO1xuICAgIH1cbiAgICByZXR1cm4gZDtcbiAgfSwgdiA9IGZ1bmN0aW9uKGYsIGQsIGcpIHtcbiAgICBmb3IgKHZhciBTID0gZy5zdWJzdHJpbmcoMCwgMTYpLCBiID0gSy5lbmMuSGV4LnBhcnNlKFMpLCBEID0gSy5lbmMuVXRmOC5wYXJzZShkKSwgQSA9IHBbZl0ua2V5bGVuICsgcFtmXS5pdmxlbiwgSSA9IFwiXCIsIG0gPSBudWxsOyA7ICkge1xuICAgICAgdmFyIEUgPSBLLmFsZ28uTUQ1LmNyZWF0ZSgpO1xuICAgICAgaWYgKG0gIT0gbnVsbCAmJiBFLnVwZGF0ZShtKSwgRS51cGRhdGUoRCksIEUudXBkYXRlKGIpLCBtID0gRS5maW5hbGl6ZSgpLCBJID0gSSArIEsuZW5jLkhleC5zdHJpbmdpZnkobSksIEkubGVuZ3RoID49IEEgKiAyKVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdmFyIHcgPSB7fTtcbiAgICByZXR1cm4gdy5rZXloZXggPSBJLnN1YnN0cigwLCBwW2ZdLmtleWxlbiAqIDIpLCB3Lml2aGV4ID0gSS5zdWJzdHIocFtmXS5rZXlsZW4gKiAyLCBwW2ZdLml2bGVuICogMiksIHc7XG4gIH0sIG8gPSBmdW5jdGlvbihmLCBkLCBnLCBTKSB7XG4gICAgdmFyIGIgPSBLLmVuYy5CYXNlNjQucGFyc2UoZiksIEQgPSBLLmVuYy5IZXguc3RyaW5naWZ5KGIpLCBBID0gcFtkXS5wcm9jLCBJID0gQShELCBnLCBTKTtcbiAgICByZXR1cm4gSTtcbiAgfSwgbCA9IGZ1bmN0aW9uKGYsIGQsIGcsIFMpIHtcbiAgICB2YXIgYiA9IHBbZF0uZXByb2MsIEQgPSBiKGYsIGcsIFMpO1xuICAgIHJldHVybiBEO1xuICB9O1xuICByZXR1cm4geyB2ZXJzaW9uOiBcIjEuMC4wXCIsIHBhcnNlUEtDUzVQRU06IGZ1bmN0aW9uKGYpIHtcbiAgICByZXR1cm4geShmKTtcbiAgfSwgZ2V0S2V5QW5kVW51c2VkSXZCeVBhc3Njb2RlQW5kSXZzYWx0OiBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgcmV0dXJuIHYoZiwgZCwgZyk7XG4gIH0sIGRlY3J5cHRLZXlCNjQ6IGZ1bmN0aW9uKGYsIGQsIGcsIFMpIHtcbiAgICByZXR1cm4gbyhmLCBkLCBnLCBTKTtcbiAgfSwgZ2V0RGVjcnlwdGVkS2V5SGV4OiBmdW5jdGlvbihmLCBkKSB7XG4gICAgdmFyIGcgPSB5KGYpLCBTID0gZy5jaXBoZXIsIGIgPSBnLml2c2FsdCwgRCA9IGcuZGF0YSwgQSA9IHYoUywgZCwgYiksIEkgPSBBLmtleWhleCwgbSA9IG8oRCwgUywgSSwgYik7XG4gICAgcmV0dXJuIG07XG4gIH0sIGdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleDogZnVuY3Rpb24oZiwgZCwgZywgUywgYikge1xuICAgIHZhciB4ID0gXCJcIjtcbiAgICBpZiAoKHR5cGVvZiBTID4gXCJ1XCIgfHwgUyA9PSBudWxsKSAmJiAoUyA9IFwiQUVTLTI1Ni1DQkNcIiksIHR5cGVvZiBwW1NdID4gXCJ1XCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJLRVlVVElMIHVuc3VwcG9ydGVkIGFsZ29yaXRobTogXCIgKyBTKTtcbiAgICBpZiAodHlwZW9mIGIgPiBcInVcIiB8fCBiID09IG51bGwpIHtcbiAgICAgIHZhciBEID0gcFtTXS5pdmxlbiwgQSA9IGMoRCk7XG4gICAgICBiID0gQS50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbiAgICB2YXIgSSA9IHYoUywgZywgYiksIG0gPSBJLmtleWhleCwgRSA9IGwoZCwgUywgbSwgYiksIHcgPSBFLnJlcGxhY2UoLyguezY0fSkvZywgYCQxXFxyXG5gKSwgeCA9IFwiLS0tLS1CRUdJTiBcIiArIGYgKyBgIFBSSVZBVEUgS0VZLS0tLS1cXHJcbmA7XG4gICAgcmV0dXJuIHggKz0gYFByb2MtVHlwZTogNCxFTkNSWVBURURcXHJcbmAsIHggKz0gXCJERUstSW5mbzogXCIgKyBTICsgXCIsXCIgKyBiICsgYFxcclxuYCwgeCArPSBgXFxyXG5gLCB4ICs9IHcsIHggKz0gYFxcclxuLS0tLS1FTkQgYCArIGYgKyBgIFBSSVZBVEUgS0VZLS0tLS1cXHJcbmAsIHg7XG4gIH0sIGdldEVuY3J5cHRlZFBLQ1M4UEVNOiBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgdmFyIFMgPSB0aGlzLmdldEVuY3J5cHRlZFBLQ1M4SGV4KGYsIGQsIGcpO1xuICAgIHJldHVybiBkZShTLCBcIkVOQ1JZUFRFRCBQUklWQVRFIEtFWVwiKTtcbiAgfSwgZ2V0RW5jcnlwdGVkUEtDUzhIZXg6IGZ1bmN0aW9uKGYsIGQsIGcpIHtcbiAgICB2YXIgUztcbiAgICBnID09IG51bGwgfHwgZyA9PSBudWxsID8gUyA9IHt9IDogUyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZykpLCBTLnBsYWluID0gZiwgdGhpcy5pbml0UEJFUzJQYXJhbShTKSwgdGhpcy5lbmNyeXB0UEJFUzJQYXJhbShTLCBkKTtcbiAgICB2YXIgYiA9IHRoaXMuZ2VuZXJhdGVQQkVTMkFTTjFQYXJhbShTKTtcbiAgICByZXR1cm4gYS5hc24xLkFTTjFVdGlsLm5ld09iamVjdChiKS50b2hleCgpO1xuICB9LCBpbml0UEJFUzJQYXJhbTogZnVuY3Rpb24oZikge1xuICAgIGlmIChKKGYsIFwiZW5jYWxnXCIpID09IG51bGwgJiYgKGYuZW5jYWxnID0gXCJhZXMyNTYtQ0JDXCIpLCBKKGYsIFwiaXRlclwiKSA9PSBudWxsICYmIChmLml0ZXIgPSAyMDQ4KSwgSihmLCBcInByZlwiKSA9PSBudWxsICYmIChmLnByZiA9IFwiaG1hY1dpdGhTSEEyNTZcIiksIEooZiwgXCJzYWx0XCIpID09IG51bGwgJiYgKGYuc2FsdCA9IEsuZW5jLkhleC5zdHJpbmdpZnkoSy5saWIuV29yZEFycmF5LnJhbmRvbSg4KSkpLCBKKGYsIFwiZW5jaXZcIikgPT0gbnVsbCkge1xuICAgICAgdmFyIGQ7XG4gICAgICBmLmVuY2FsZyA9PSBcImRlcy1FREUzLUNCQ1wiICYmIChkID0gOCksIGYuZW5jYWxnID09IFwiYWVzMTI4LUNCQ1wiICYmIChkID0gMTYpLCBmLmVuY2FsZyA9PSBcImFlczI1Ni1DQkNcIiAmJiAoZCA9IDE2KSwgZi5lbmNpdiA9IEsuZW5jLkhleC5zdHJpbmdpZnkoSy5saWIuV29yZEFycmF5LnJhbmRvbShkKSk7XG4gICAgfVxuICB9LCBlbmNyeXB0UEJFUzJQYXJhbTogZnVuY3Rpb24oZiwgZCkge1xuICAgIHZhciBnID0gay5nZXRES0Zyb21QQkVTMlBhcmFtKGYsIGQpO1xuICAgIHRyeSB7XG4gICAgICB2YXIgUyA9IGEuY3J5cHRvLkNpcGhlci5lbmNyeXB0KGYucGxhaW4sIGcsIGYuZW5jYWxnLCB7IGl2OiBmLmVuY2l2IH0pO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZW5jcnlwdCBlcnJvcjogXCIgKyBmLnBsYWluICsgXCIgXCIgKyBnICsgXCIgXCIgKyBmLmVuY2FsZyArIFwiIFwiICsgZi5lbmNpdik7XG4gICAgfVxuICAgIGYuZW5jID0gUztcbiAgfSwgZ2VuZXJhdGVQQkVTMkFTTjFQYXJhbTogZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0geyBzZXE6IFt7IHNlcTogW3sgb2lkOiBcInBrY3M1UEJFUzJcIiB9LCB7IHNlcTogW3sgc2VxOiBbeyBvaWQ6IFwicGtjczVQQktERjJcIiB9LCB7IHNlcTogW3sgb2N0c3RyOiB7IGhleDogZi5zYWx0IH0gfSwgeyBpbnQ6IHsgaGV4OiB4bihmLml0ZXIpIH0gfV0gfV0gfSwgeyBzZXE6IFt7IG9pZDogZi5lbmNhbGcgfSwgeyBvY3RzdHI6IHsgaGV4OiBmLmVuY2l2IH0gfV0gfV0gfV0gfSwgeyBvY3RzdHI6IHsgaGV4OiBmLmVuYyB9IH1dIH07XG4gICAgcmV0dXJuIGYucHJmICE9IFwiaG1hY1dpdGhTSEExXCIgJiYgZC5zZXFbMF0uc2VxWzFdLnNlcVswXS5zZXFbMV0uc2VxLnB1c2goeyBzZXE6IFt7IG9pZDogZi5wcmYgfSwgeyBudWxsOiBcIlwiIH1dIH0pLCBkO1xuICB9LCBwYXJzZUhleE9mRW5jcnlwdGVkUEtDUzg6IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgZCA9IFYsIGcgPSBkLmdldENoaWxkSWR4LCBTID0gZC5nZXRWLCBiID0ge30sIEQgPSBnKGYsIDApO1xuICAgIGlmIChELmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMCkuaXRlbXMgIT0gMjogXCIgKyBELmxlbmd0aCk7XG4gICAgYi5jaXBoZXJ0ZXh0ID0gUyhmLCBEWzFdKTtcbiAgICB2YXIgQSA9IGcoZiwgRFswXSk7XG4gICAgaWYgKEEubGVuZ3RoICE9IDIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjApLml0ZW1zICE9IDI6IFwiICsgQS5sZW5ndGgpO1xuICAgIGlmIChTKGYsIEFbMF0pICE9IFwiMmE4NjQ4ODZmNzBkMDEwNTBkXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQkVTMlwiKTtcbiAgICB2YXIgSSA9IGcoZiwgQVsxXSk7XG4gICAgaWYgKEEubGVuZ3RoICE9IDIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMSkuaXRlbXMgIT0gMjogXCIgKyBJLmxlbmd0aCk7XG4gICAgdmFyIG0gPSBnKGYsIElbMV0pO1xuICAgIGlmIChtLmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMSkuaXRlbXMgIT0gMjogXCIgKyBtLmxlbmd0aCk7XG4gICAgaWYgKFMoZiwgbVswXSkgIT0gXCIyYTg2NDg4NmY3MGQwMzA3XCIpXG4gICAgICB0aHJvdyBcInRoaXMgb25seSBzdXBwb3J0cyBUcmlwbGVERVNcIjtcbiAgICBiLmVuY3J5cHRpb25TY2hlbWVBbGcgPSBcIlRyaXBsZURFU1wiLCBiLmVuY3J5cHRpb25TY2hlbWVJViA9IFMoZiwgbVsxXSk7XG4gICAgdmFyIEUgPSBnKGYsIElbMF0pO1xuICAgIGlmIChFLmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEuMCkuaXRlbXMgIT0gMjogXCIgKyBFLmxlbmd0aCk7XG4gICAgaWYgKFMoZiwgRVswXSkgIT0gXCIyYTg2NDg4NmY3MGQwMTA1MGNcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInRoaXMgb25seSBzdXBwb3J0cyBwa2NzNVBCS0RGMlwiKTtcbiAgICB2YXIgdyA9IGcoZiwgRVsxXSk7XG4gICAgaWYgKHcubGVuZ3RoIDwgMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjAuMSkuaXRlbXMgPCAyOiBcIiArIHcubGVuZ3RoKTtcbiAgICBiLnBia2RmMlNhbHQgPSBTKGYsIHdbMF0pO1xuICAgIHZhciB4ID0gUyhmLCB3WzFdKTtcbiAgICB0cnkge1xuICAgICAgYi5wYmtkZjJJdGVyID0gcGFyc2VJbnQoeCwgMTYpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGZvcm1hdCBwYmtkZjJJdGVyOiBcIiArIHgpO1xuICAgIH1cbiAgICByZXR1cm4gYjtcbiAgfSwgZ2V0UEJLREYyS2V5SGV4RnJvbVBhcmFtOiBmdW5jdGlvbihmLCBkKSB7XG4gICAgdmFyIGcgPSBLLmVuYy5IZXgucGFyc2UoZi5wYmtkZjJTYWx0KSwgUyA9IGYucGJrZGYySXRlciwgYiA9IEsuUEJLREYyKGQsIGcsIHsga2V5U2l6ZTogMTkyIC8gMzIsIGl0ZXJhdGlvbnM6IFMgfSksIEQgPSBLLmVuYy5IZXguc3RyaW5naWZ5KGIpO1xuICAgIHJldHVybiBEO1xuICB9LCBfZ2V0UGxhaW5QS0NTOEhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTTogZnVuY3Rpb24oZiwgZCkge1xuICAgIHZhciBnID0gaWUoZiwgXCJFTkNSWVBURUQgUFJJVkFURSBLRVlcIiksIFMgPSB0aGlzLnBhcnNlSGV4T2ZFbmNyeXB0ZWRQS0NTOChnKSwgYiA9IGsuZ2V0UEJLREYyS2V5SGV4RnJvbVBhcmFtKFMsIGQpLCBEID0ge307XG4gICAgRC5jaXBoZXJ0ZXh0ID0gSy5lbmMuSGV4LnBhcnNlKFMuY2lwaGVydGV4dCk7XG4gICAgdmFyIEEgPSBLLmVuYy5IZXgucGFyc2UoYiksIEkgPSBLLmVuYy5IZXgucGFyc2UoUy5lbmNyeXB0aW9uU2NoZW1lSVYpLCBtID0gSy5UcmlwbGVERVMuZGVjcnlwdChELCBBLCB7IGl2OiBJIH0pLCBFID0gSy5lbmMuSGV4LnN0cmluZ2lmeShtKTtcbiAgICByZXR1cm4gRTtcbiAgfSwgcGFyc2VQQkVTMjogZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0gVi5wYXJzZShmKTtcbiAgICBpZiAoSihkLCBcInNlcS4wLnNlcS4wLm9pZFwiKSAhPSBcInBrY3M1UEJFUzJcIiB8fCBKKGQsIFwic2VxLjAuc2VxLjEuc2VxLjAuc2VxLjAub2lkXCIpICE9IFwicGtjczVQQktERjJcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBwa2NzNVBCRVMyIGFuZCBwa2NzNVBCS0RGMiB1c2VkXCIpO1xuICAgIHZhciBnID0gSihkLCBcInNlcS4wLnNlcS4xLnNlcS4wLnNlcS4xLnNlcVwiKTtcbiAgICBpZiAoZyA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUEJLREYyIHBhcmFtZXRlciBub3QgZm91bmRcIik7XG4gICAgdmFyIFMgPSBKKGcsIFwiMC5vY3RzdHIuaGV4XCIpLCBiID0gSihnLCBcIjEuaW50LmhleFwiKSwgRCA9IEooZywgXCIyLnNlcS4wLm9pZFwiLCBcImhtYWNXaXRoU0hBMVwiKSwgQSA9IC0xO1xuICAgIHRyeSB7XG4gICAgICBBID0gcGFyc2VJbnQoYiwgMTYpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaXRlciBub3QgcHJvcGVyIHZhbHVlXCIpO1xuICAgIH1cbiAgICB2YXIgSSA9IEooZCwgXCJzZXEuMC5zZXEuMS5zZXEuMS5zZXEuMC5vaWRcIiksIG0gPSBKKGQsIFwic2VxLjAuc2VxLjEuc2VxLjEuc2VxLjEub2N0c3RyLmhleFwiKSwgRSA9IEooZCwgXCJzZXEuMS5vY3RzdHIuaGV4XCIpO1xuICAgIGlmIChJID09IG51bGwgfHwgbSA9PSBudWxsIHx8IEUgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImVuY2FsZywgZW5jaXYgb3IgZW5jIGlzIHVuZGVmaW5lZFwiKTtcbiAgICB2YXIgdyA9IHsgc2FsdDogUywgaXRlcjogQSwgcHJmOiBELCBlbmNhbGc6IEksIGVuY2l2OiBtLCBlbmM6IEUgfTtcbiAgICByZXR1cm4gdztcbiAgfSwgZ2V0REtGcm9tUEJFUzJQYXJhbTogZnVuY3Rpb24oZiwgZCkge1xuICAgIHZhciBnID0geyBobWFjV2l0aFNIQTE6IEsuYWxnby5TSEExLCBobWFjV2l0aFNIQTIyNDogSy5hbGdvLlNIQTIyNCwgaG1hY1dpdGhTSEEyNTY6IEsuYWxnby5TSEEyNTYsIGhtYWNXaXRoU0hBMzg0OiBLLmFsZ28uU0hBMzg0LCBobWFjV2l0aFNIQTUxMjogSy5hbGdvLlNIQTUxMiB9LCBTID0geyBcImRlcy1FREUzLUNCQ1wiOiAxOTIgLyAzMiwgXCJhZXMxMjgtQ0JDXCI6IDEyOCAvIDMyLCBcImFlczI1Ni1DQkNcIjogMjU2IC8gMzIgfSwgYiA9IGdbZi5wcmZdO1xuICAgIGlmIChiID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBwcmZcIik7XG4gICAgdmFyIEQgPSBTW2YuZW5jYWxnXTtcbiAgICBpZiAoRCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgZW5jYWxnXCIpO1xuICAgIHZhciBBID0gSy5lbmMuSGV4LnBhcnNlKGYuc2FsdCksIEkgPSBmLml0ZXI7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBtID0gSy5QQktERjIoZCwgQSwgeyBrZXlTaXplOiBELCBpdGVyYXRpb25zOiBJLCBoYXNoZXI6IGIgfSk7XG4gICAgICByZXR1cm4gSy5lbmMuSGV4LnN0cmluZ2lmeShtKTtcbiAgICB9IGNhdGNoIChFKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQQktERjIgZXJyb3I6IFwiICsgRSArIFwiIFwiICsgSlNPTi5zdHJpbmdpZnkoZikgKyBcIiBcIiArIGQpO1xuICAgIH1cbiAgfSwgZ2V0UGxhaW5IZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU06IGZ1bmN0aW9uKGYsIGQpIHtcbiAgICBpZiAoZi5pbmRleE9mKFwiQkVHSU4gRU5DUllQVEVEIFBSSVZBVEUgS0VZXCIpID09IC0xKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IEVuY3J5cHRlZCBQS0NTIzggUEVNIHN0cmluZ1wiKTtcbiAgICB2YXIgZyA9IGllKGYpLCBTO1xuICAgIHRyeSB7XG4gICAgICBTID0gay5wYXJzZVBCRVMyKGcpO1xuICAgIH0gY2F0Y2ggKEQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQQkVTMiBmb3JtYXQ6IFwiICsgRC5tZXNzYWdlKTtcbiAgICB9XG4gICAgdmFyIGIgPSBrLmdldERLRnJvbVBCRVMyUGFyYW0oUywgZCk7XG4gICAgcmV0dXJuIGEuY3J5cHRvLkNpcGhlci5kZWNyeXB0KFMuZW5jLCBiLCBTLmVuY2FsZywgeyBpdjogUy5lbmNpdiB9KTtcbiAgfSwgZ2V0S2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOiBmdW5jdGlvbihmLCBkKSB7XG4gICAgdmFyIGcgPSB0aGlzLmdldFBsYWluSGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKGYsIGQpLCBTID0gdGhpcy5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXgoZyk7XG4gICAgcmV0dXJuIFM7XG4gIH0sIHBhcnNlUGxhaW5Qcml2YXRlUEtDUzhIZXg6IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgZCA9IFYsIGcgPSBkLmdldENoaWxkSWR4LCBTID0gZC5nZXRWLCBiID0ge307XG4gICAgaWYgKGIuYWxncGFyYW0gPSBudWxsLCBmLnN1YnN0cigwLCAyKSAhPSBcIjMwXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgcGxhaW4gUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDEpXCIpO1xuICAgIHZhciBEID0gZyhmLCAwKTtcbiAgICBpZiAoRC5sZW5ndGggPCAzKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIHBsYWluIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDAyKVwiKTtcbiAgICBpZiAoZi5zdWJzdHIoRFsxXSwgMikgIT0gXCIzMFwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDAzKVwiKTtcbiAgICB2YXIgQSA9IGcoZiwgRFsxXSk7XG4gICAgaWYgKEEubGVuZ3RoICE9IDIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDQpXCIpO1xuICAgIGlmIChmLnN1YnN0cihBWzBdLCAyKSAhPSBcIjA2XCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDUpXCIpO1xuICAgIGlmIChiLmFsZ29pZCA9IFMoZiwgQVswXSksIGYuc3Vic3RyKEFbMV0sIDIpID09IFwiMDZcIiAmJiAoYi5hbGdwYXJhbSA9IFMoZiwgQVsxXSkpLCBmLnN1YnN0cihEWzJdLCAyKSAhPSBcIjA0XCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHJpdmF0ZSBrZXkoY29kZTowMDYpXCIpO1xuICAgIHJldHVybiBiLmtleWlkeCA9IGQuZ2V0VmlkeChmLCBEWzJdKSwgYjtcbiAgfSwgZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4UEVNOiBmdW5jdGlvbihmKSB7XG4gICAgdmFyIGQgPSBpZShmLCBcIlBSSVZBVEUgS0VZXCIpLCBnID0gdGhpcy5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXgoZCk7XG4gICAgcmV0dXJuIGc7XG4gIH0sIGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleDogZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0gdGhpcy5wYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4KGYpLCBnO1xuICAgIGlmIChkLmFsZ29pZCA9PSBcIjJhODY0ODg2ZjcwZDAxMDEwMVwiKVxuICAgICAgZyA9IG5ldyBxKCk7XG4gICAgZWxzZSBpZiAoZC5hbGdvaWQgPT0gXCIyYTg2NDhjZTM4MDQwMVwiKVxuICAgICAgZyA9IG5ldyBhLmNyeXB0by5EU0EoKTtcbiAgICBlbHNlIGlmIChkLmFsZ29pZCA9PSBcIjJhODY0OGNlM2QwMjAxXCIpXG4gICAgICBnID0gbmV3IGEuY3J5cHRvLkVDRFNBKCk7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgcHJpdmF0ZSBrZXkgYWxnb3JpdGhtXCIpO1xuICAgIHJldHVybiBnLnJlYWRQS0NTOFBydktleUhleChmKSwgZztcbiAgfSwgX2dldEtleUZyb21QdWJsaWNQS0NTOEhleDogZnVuY3Rpb24oZikge1xuICAgIHZhciBkLCBnID0gVi5nZXRWYnlMaXN0KGYsIDAsIFswLCAwXSwgXCIwNlwiKTtcbiAgICBpZiAoZyA9PT0gXCIyYTg2NDg4NmY3MGQwMTAxMDFcIilcbiAgICAgIGQgPSBuZXcgcSgpO1xuICAgIGVsc2UgaWYgKGcgPT09IFwiMmE4NjQ4Y2UzODA0MDFcIilcbiAgICAgIGQgPSBuZXcgYS5jcnlwdG8uRFNBKCk7XG4gICAgZWxzZSBpZiAoZyA9PT0gXCIyYTg2NDhjZTNkMDIwMVwiKVxuICAgICAgZCA9IG5ldyBhLmNyeXB0by5FQ0RTQSgpO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIFBLQ1MjOCBwdWJsaWMga2V5IGhleFwiKTtcbiAgICByZXR1cm4gZC5yZWFkUEtDUzhQdWJLZXlIZXgoZiksIGQ7XG4gIH0sIHBhcnNlUHVibGljUmF3UlNBS2V5SGV4OiBmdW5jdGlvbihmKSB7XG4gICAgdmFyIGQgPSBWLCBnID0gZC5nZXRDaGlsZElkeCwgUyA9IGQuZ2V0ViwgYiA9IHt9O1xuICAgIGlmIChmLnN1YnN0cigwLCAyKSAhPSBcIjMwXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMSlcIik7XG4gICAgdmFyIEQgPSBnKGYsIDApO1xuICAgIGlmIChELmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDIpXCIpO1xuICAgIGlmIChmLnN1YnN0cihEWzBdLCAyKSAhPSBcIjAyXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwMylcIik7XG4gICAgaWYgKGIubiA9IFMoZiwgRFswXSksIGYuc3Vic3RyKERbMV0sIDIpICE9IFwiMDJcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDA0KVwiKTtcbiAgICByZXR1cm4gYi5lID0gUyhmLCBEWzFdKSwgYjtcbiAgfSwgcGFyc2VQdWJsaWNQS0NTOEhleDogZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0gViwgZyA9IGQuZ2V0Q2hpbGRJZHgsIFMgPSBkLmdldFYsIGIgPSB7fTtcbiAgICBiLmFsZ3BhcmFtID0gbnVsbDtcbiAgICB2YXIgRCA9IGcoZiwgMCk7XG4gICAgaWYgKEQubGVuZ3RoICE9IDIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvdXRlciBERVJTZXF1ZW5jZSBzaGFsbCBoYXZlIDIgZWxlbWVudHM6IFwiICsgRC5sZW5ndGgpO1xuICAgIHZhciBBID0gRFswXTtcbiAgICBpZiAoZi5zdWJzdHIoQSwgMikgIT0gXCIzMFwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDEpXCIpO1xuICAgIHZhciBJID0gZyhmLCBBKTtcbiAgICBpZiAoSS5sZW5ndGggIT0gMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAyKVwiKTtcbiAgICBpZiAoZi5zdWJzdHIoSVswXSwgMikgIT0gXCIwNlwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDMpXCIpO1xuICAgIGlmIChiLmFsZ29pZCA9IFMoZiwgSVswXSksIGYuc3Vic3RyKElbMV0sIDIpID09IFwiMDZcIiA/IGIuYWxncGFyYW0gPSBTKGYsIElbMV0pIDogZi5zdWJzdHIoSVsxXSwgMikgPT0gXCIzMFwiICYmIChiLmFsZ3BhcmFtID0ge30sIGIuYWxncGFyYW0ucCA9IGQuZ2V0VmJ5TGlzdChmLCBJWzFdLCBbMF0sIFwiMDJcIiksIGIuYWxncGFyYW0ucSA9IGQuZ2V0VmJ5TGlzdChmLCBJWzFdLCBbMV0sIFwiMDJcIiksIGIuYWxncGFyYW0uZyA9IGQuZ2V0VmJ5TGlzdChmLCBJWzFdLCBbMl0sIFwiMDJcIikpLCBmLnN1YnN0cihEWzFdLCAyKSAhPSBcIjAzXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwNClcIik7XG4gICAgcmV0dXJuIGIua2V5ID0gUyhmLCBEWzFdKS5zdWJzdHIoMiksIGI7XG4gIH0gfTtcbn0oKTtcbmsuZ2V0S2V5ID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICB2YXIgaSA9IFYsIHMgPSBpLmdldENoaWxkSWR4O1xuICBpLmdldFY7XG4gIHZhciBuID0gaS5nZXRWYnlMaXN0LCBoID0gYS5jcnlwdG8sIHUgPSBoLkVDRFNBLCBwID0gaC5EU0EsIGMgPSBxLCB5ID0gaWUsIHYgPSBrO1xuICBpZiAodHlwZW9mIGMgPCBcInVcIiAmJiBlIGluc3RhbmNlb2YgYyB8fCB0eXBlb2YgdSA8IFwidVwiICYmIGUgaW5zdGFuY2VvZiB1IHx8IHR5cGVvZiBwIDwgXCJ1XCIgJiYgZSBpbnN0YW5jZW9mIHApXG4gICAgcmV0dXJuIGU7XG4gIGlmIChlLmN1cnZlICE9PSB2b2lkIDAgJiYgZS54eSAhPT0gdm9pZCAwICYmIGUuZCA9PT0gdm9pZCAwKVxuICAgIHJldHVybiBuZXcgdSh7IHB1YjogZS54eSwgY3VydmU6IGUuY3VydmUgfSk7XG4gIGlmIChlLmN1cnZlICE9PSB2b2lkIDAgJiYgZS5kICE9PSB2b2lkIDApXG4gICAgcmV0dXJuIG5ldyB1KHsgcHJ2OiBlLmQsIGN1cnZlOiBlLmN1cnZlIH0pO1xuICBpZiAoZS5rdHkgPT09IHZvaWQgMCAmJiBlLm4gIT09IHZvaWQgMCAmJiBlLmUgIT09IHZvaWQgMCAmJiBlLmQgPT09IHZvaWQgMCkge1xuICAgIHZhciBvID0gbmV3IGMoKTtcbiAgICByZXR1cm4gby5zZXRQdWJsaWMoZS5uLCBlLmUpLCBvO1xuICB9XG4gIGlmIChlLmt0eSA9PT0gdm9pZCAwICYmIGUubiAhPT0gdm9pZCAwICYmIGUuZSAhPT0gdm9pZCAwICYmIGUuZCAhPT0gdm9pZCAwICYmIGUucCAhPT0gdm9pZCAwICYmIGUucSAhPT0gdm9pZCAwICYmIGUuZHAgIT09IHZvaWQgMCAmJiBlLmRxICE9PSB2b2lkIDAgJiYgZS5jbyAhPT0gdm9pZCAwICYmIGUucWkgPT09IHZvaWQgMCkge1xuICAgIHZhciBvID0gbmV3IGMoKTtcbiAgICByZXR1cm4gby5zZXRQcml2YXRlRXgoZS5uLCBlLmUsIGUuZCwgZS5wLCBlLnEsIGUuZHAsIGUuZHEsIGUuY28pLCBvO1xuICB9XG4gIGlmIChlLmt0eSA9PT0gdm9pZCAwICYmIGUubiAhPT0gdm9pZCAwICYmIGUuZSAhPT0gdm9pZCAwICYmIGUuZCAhPT0gdm9pZCAwICYmIGUucCA9PT0gdm9pZCAwKSB7XG4gICAgdmFyIG8gPSBuZXcgYygpO1xuICAgIHJldHVybiBvLnNldFByaXZhdGUoZS5uLCBlLmUsIGUuZCksIG87XG4gIH1cbiAgaWYgKGUucCAhPT0gdm9pZCAwICYmIGUucSAhPT0gdm9pZCAwICYmIGUuZyAhPT0gdm9pZCAwICYmIGUueSAhPT0gdm9pZCAwICYmIGUueCA9PT0gdm9pZCAwKSB7XG4gICAgdmFyIG8gPSBuZXcgcCgpO1xuICAgIHJldHVybiBvLnNldFB1YmxpYyhlLnAsIGUucSwgZS5nLCBlLnkpLCBvO1xuICB9XG4gIGlmIChlLnAgIT09IHZvaWQgMCAmJiBlLnEgIT09IHZvaWQgMCAmJiBlLmcgIT09IHZvaWQgMCAmJiBlLnkgIT09IHZvaWQgMCAmJiBlLnggIT09IHZvaWQgMCkge1xuICAgIHZhciBvID0gbmV3IHAoKTtcbiAgICByZXR1cm4gby5zZXRQcml2YXRlKGUucCwgZS5xLCBlLmcsIGUueSwgZS54KSwgbztcbiAgfVxuICBpZiAoZS5rdHkgPT09IFwiUlNBXCIgJiYgZS5uICE9PSB2b2lkIDAgJiYgZS5lICE9PSB2b2lkIDAgJiYgZS5kID09PSB2b2lkIDApIHtcbiAgICB2YXIgbyA9IG5ldyBjKCk7XG4gICAgcmV0dXJuIG8uc2V0UHVibGljKFkoZS5uKSwgWShlLmUpKSwgbztcbiAgfVxuICBpZiAoZS5rdHkgPT09IFwiUlNBXCIgJiYgZS5uICE9PSB2b2lkIDAgJiYgZS5lICE9PSB2b2lkIDAgJiYgZS5kICE9PSB2b2lkIDAgJiYgZS5wICE9PSB2b2lkIDAgJiYgZS5xICE9PSB2b2lkIDAgJiYgZS5kcCAhPT0gdm9pZCAwICYmIGUuZHEgIT09IHZvaWQgMCAmJiBlLnFpICE9PSB2b2lkIDApIHtcbiAgICB2YXIgbyA9IG5ldyBjKCk7XG4gICAgcmV0dXJuIG8uc2V0UHJpdmF0ZUV4KFkoZS5uKSwgWShlLmUpLCBZKGUuZCksIFkoZS5wKSwgWShlLnEpLCBZKGUuZHApLCBZKGUuZHEpLCBZKGUucWkpKSwgbztcbiAgfVxuICBpZiAoZS5rdHkgPT09IFwiUlNBXCIgJiYgZS5uICE9PSB2b2lkIDAgJiYgZS5lICE9PSB2b2lkIDAgJiYgZS5kICE9PSB2b2lkIDApIHtcbiAgICB2YXIgbyA9IG5ldyBjKCk7XG4gICAgcmV0dXJuIG8uc2V0UHJpdmF0ZShZKGUubiksIFkoZS5lKSwgWShlLmQpKSwgbztcbiAgfVxuICBpZiAoZS5rdHkgPT09IFwiRUNcIiAmJiBlLmNydiAhPT0gdm9pZCAwICYmIGUueCAhPT0gdm9pZCAwICYmIGUueSAhPT0gdm9pZCAwICYmIGUuZCA9PT0gdm9pZCAwKSB7XG4gICAgdmFyIGwgPSBuZXcgdSh7IGN1cnZlOiBlLmNydiB9KSwgZiA9IGwuZWNwYXJhbXMua2V5Y2hhcmxlbiwgZCA9IChcIjAwMDAwMDAwMDBcIiArIFkoZS54KSkuc2xpY2UoLWYpLCBnID0gKFwiMDAwMDAwMDAwMFwiICsgWShlLnkpKS5zbGljZSgtZiksIFMgPSBcIjA0XCIgKyBkICsgZztcbiAgICByZXR1cm4gbC5zZXRQdWJsaWNLZXlIZXgoUyksIGw7XG4gIH1cbiAgaWYgKGUua3R5ID09PSBcIkVDXCIgJiYgZS5jcnYgIT09IHZvaWQgMCAmJiBlLnggIT09IHZvaWQgMCAmJiBlLnkgIT09IHZvaWQgMCAmJiBlLmQgIT09IHZvaWQgMCkge1xuICAgIHZhciBsID0gbmV3IHUoeyBjdXJ2ZTogZS5jcnYgfSksIGYgPSBsLmVjcGFyYW1zLmtleWNoYXJsZW4sIGQgPSAoXCIwMDAwMDAwMDAwXCIgKyBZKGUueCkpLnNsaWNlKC1mKSwgZyA9IChcIjAwMDAwMDAwMDBcIiArIFkoZS55KSkuc2xpY2UoLWYpLCBTID0gXCIwNFwiICsgZCArIGcsIGIgPSAoXCIwMDAwMDAwMDAwXCIgKyBZKGUuZCkpLnNsaWNlKC1mKTtcbiAgICByZXR1cm4gbC5zZXRQdWJsaWNLZXlIZXgoUyksIGwuc2V0UHJpdmF0ZUtleUhleChiKSwgbDtcbiAgfVxuICBpZiAociA9PT0gXCJwa2NzNXBydlwiKSB7XG4gICAgdmFyIEQgPSBlLCBpID0gViwgQSwgbztcbiAgICBpZiAoQSA9IHMoRCwgMCksIEEubGVuZ3RoID09PSA5KVxuICAgICAgbyA9IG5ldyBjKCksIG8ucmVhZFBLQ1M1UHJ2S2V5SGV4KEQpO1xuICAgIGVsc2UgaWYgKEEubGVuZ3RoID09PSA2KVxuICAgICAgbyA9IG5ldyBwKCksIG8ucmVhZFBLQ1M1UHJ2S2V5SGV4KEQpO1xuICAgIGVsc2UgaWYgKEEubGVuZ3RoID4gMiAmJiBELnN1YnN0cihBWzFdLCAyKSA9PT0gXCIwNFwiKVxuICAgICAgbyA9IG5ldyB1KCksIG8ucmVhZFBLQ1M1UHJ2S2V5SGV4KEQpO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIFBLQ1MjMS81IGhleGFkZWNpbWFsIGtleVwiKTtcbiAgICByZXR1cm4gbztcbiAgfVxuICBpZiAociA9PT0gXCJwa2NzOHBydlwiKSB7XG4gICAgdmFyIG8gPSB2LmdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOEhleChlKTtcbiAgICByZXR1cm4gbztcbiAgfVxuICBpZiAociA9PT0gXCJwa2NzOHB1YlwiKVxuICAgIHJldHVybiB2Ll9nZXRLZXlGcm9tUHVibGljUEtDUzhIZXgoZSk7XG4gIGlmIChyID09PSBcIng1MDlwdWJcIilcbiAgICByZXR1cm4gTC5nZXRQdWJsaWNLZXlGcm9tQ2VydEhleChlKTtcbiAgaWYgKGUuaW5kZXhPZihcIi1FTkQgQ0VSVElGSUNBVEUtXCIsIDApICE9IC0xIHx8IGUuaW5kZXhPZihcIi1FTkQgWDUwOSBDRVJUSUZJQ0FURS1cIiwgMCkgIT0gLTEgfHwgZS5pbmRleE9mKFwiLUVORCBUUlVTVEVEIENFUlRJRklDQVRFLVwiLCAwKSAhPSAtMSlcbiAgICByZXR1cm4gTC5nZXRQdWJsaWNLZXlGcm9tQ2VydFBFTShlKTtcbiAgaWYgKGUuaW5kZXhPZihcIi1FTkQgUFVCTElDIEtFWS1cIikgIT0gLTEpIHtcbiAgICB2YXIgSSA9IGllKGUsIFwiUFVCTElDIEtFWVwiKTtcbiAgICByZXR1cm4gdi5fZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4SGV4KEkpO1xuICB9XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIFJTQSBQUklWQVRFIEtFWS1cIikgIT0gLTEgJiYgZS5pbmRleE9mKFwiNCxFTkNSWVBURURcIikgPT0gLTEpIHtcbiAgICB2YXIgbSA9IHkoZSwgXCJSU0EgUFJJVkFURSBLRVlcIik7XG4gICAgcmV0dXJuIHYuZ2V0S2V5KG0sIG51bGwsIFwicGtjczVwcnZcIik7XG4gIH1cbiAgaWYgKGUuaW5kZXhPZihcIi1FTkQgRFNBIFBSSVZBVEUgS0VZLVwiKSAhPSAtMSAmJiBlLmluZGV4T2YoXCI0LEVOQ1JZUFRFRFwiKSA9PSAtMSkge1xuICAgIHZhciBFID0geShlLCBcIkRTQSBQUklWQVRFIEtFWVwiKSwgdyA9IG4oRSwgMCwgWzFdLCBcIjAyXCIpLCB4ID0gbihFLCAwLCBbMl0sIFwiMDJcIiksIEYgPSBuKEUsIDAsIFszXSwgXCIwMlwiKSwgUCA9IG4oRSwgMCwgWzRdLCBcIjAyXCIpLCBUID0gbihFLCAwLCBbNV0sIFwiMDJcIiksIG8gPSBuZXcgcCgpO1xuICAgIHJldHVybiBvLnNldFByaXZhdGUobmV3IFIodywgMTYpLCBuZXcgUih4LCAxNiksIG5ldyBSKEYsIDE2KSwgbmV3IFIoUCwgMTYpLCBuZXcgUihULCAxNikpLCBvO1xuICB9XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIEVDIFBSSVZBVEUgS0VZLVwiKSAhPSAtMSAmJiBlLmluZGV4T2YoXCI0LEVOQ1JZUFRFRFwiKSA9PSAtMSkge1xuICAgIHZhciBtID0geShlLCBcIkVDIFBSSVZBVEUgS0VZXCIpO1xuICAgIHJldHVybiB2LmdldEtleShtLCBudWxsLCBcInBrY3M1cHJ2XCIpO1xuICB9XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIFBSSVZBVEUgS0VZLVwiKSAhPSAtMSlcbiAgICByZXR1cm4gdi5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhQRU0oZSk7XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIFJTQSBQUklWQVRFIEtFWS1cIikgIT0gLTEgJiYgZS5pbmRleE9mKFwiNCxFTkNSWVBURURcIikgIT0gLTEpIHtcbiAgICB2YXIgSCA9IHYuZ2V0RGVjcnlwdGVkS2V5SGV4KGUsIHQpLCBDID0gbmV3IHEoKTtcbiAgICByZXR1cm4gQy5yZWFkUEtDUzVQcnZLZXlIZXgoSCksIEM7XG4gIH1cbiAgaWYgKGUuaW5kZXhPZihcIi1FTkQgRUMgUFJJVkFURSBLRVktXCIpICE9IC0xICYmIGUuaW5kZXhPZihcIjQsRU5DUllQVEVEXCIpICE9IC0xKSB7XG4gICAgdmFyIEUgPSB2LmdldERlY3J5cHRlZEtleUhleChlLCB0KSwgbyA9IG4oRSwgMCwgWzFdLCBcIjA0XCIpLCBCID0gbihFLCAwLCBbMiwgMF0sIFwiMDZcIiksIE8gPSBuKEUsIDAsIFszLCAwXSwgXCIwM1wiKS5zdWJzdHIoMiksIGogPSBcIlwiO1xuICAgIGlmIChhLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbQl0gIT09IHZvaWQgMClcbiAgICAgIGogPSBhLmNyeXB0by5PSUQub2lkaGV4Mm5hbWVbQl07XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5kZWZpbmVkIE9JRChoZXgpIGluIEtKVVIuY3J5cHRvLk9JRDogXCIgKyBCKTtcbiAgICB2YXIgbCA9IG5ldyB1KHsgY3VydmU6IGogfSk7XG4gICAgcmV0dXJuIGwuc2V0UHVibGljS2V5SGV4KE8pLCBsLnNldFByaXZhdGVLZXlIZXgobyksIGwuaXNQdWJsaWMgPSAhMSwgbDtcbiAgfVxuICBpZiAoZS5pbmRleE9mKFwiLUVORCBEU0EgUFJJVkFURSBLRVktXCIpICE9IC0xICYmIGUuaW5kZXhPZihcIjQsRU5DUllQVEVEXCIpICE9IC0xKSB7XG4gICAgdmFyIEUgPSB2LmdldERlY3J5cHRlZEtleUhleChlLCB0KSwgdyA9IG4oRSwgMCwgWzFdLCBcIjAyXCIpLCB4ID0gbihFLCAwLCBbMl0sIFwiMDJcIiksIEYgPSBuKEUsIDAsIFszXSwgXCIwMlwiKSwgUCA9IG4oRSwgMCwgWzRdLCBcIjAyXCIpLCBUID0gbihFLCAwLCBbNV0sIFwiMDJcIiksIG8gPSBuZXcgcCgpO1xuICAgIHJldHVybiBvLnNldFByaXZhdGUobmV3IFIodywgMTYpLCBuZXcgUih4LCAxNiksIG5ldyBSKEYsIDE2KSwgbmV3IFIoUCwgMTYpLCBuZXcgUihULCAxNikpLCBvO1xuICB9XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIEVOQ1JZUFRFRCBQUklWQVRFIEtFWS1cIikgIT0gLTEpXG4gICAgcmV0dXJuIHYuZ2V0S2V5RnJvbUVuY3J5cHRlZFBLQ1M4UEVNKGUsIHQpO1xuICB0aHJvdyBuZXcgRXJyb3IoXCJub3Qgc3VwcG9ydGVkIGFyZ3VtZW50XCIpO1xufTtcbmsuZ2VuZXJhdGVLZXlwYWlyID0gZnVuY3Rpb24oZSwgdCkge1xuICBpZiAoZSA9PSBcIlJTQVwiKSB7XG4gICAgdmFyIHIgPSB0LCBpID0gbmV3IHEoKTtcbiAgICBpLmdlbmVyYXRlKHIsIFwiMTAwMDFcIiksIGkuaXNQcml2YXRlID0gITAsIGkuaXNQdWJsaWMgPSAhMDtcbiAgICB2YXIgcyA9IG5ldyBxKCksIG4gPSBpLm4udG9TdHJpbmcoMTYpLCBoID0gaS5lLnRvU3RyaW5nKDE2KTtcbiAgICBzLnNldFB1YmxpYyhuLCBoKSwgcy5pc1ByaXZhdGUgPSAhMSwgcy5pc1B1YmxpYyA9ICEwO1xuICAgIHZhciB1ID0ge307XG4gICAgcmV0dXJuIHUucHJ2S2V5T2JqID0gaSwgdS5wdWJLZXlPYmogPSBzLCB1O1xuICB9IGVsc2UgaWYgKGUgPT0gXCJFQ1wiKSB7XG4gICAgdmFyIHAgPSB0LCBjID0gbmV3IGEuY3J5cHRvLkVDRFNBKHsgY3VydmU6IHAgfSksIHkgPSBjLmdlbmVyYXRlS2V5UGFpckhleCgpLCBpID0gbmV3IGEuY3J5cHRvLkVDRFNBKHsgY3VydmU6IHAgfSk7XG4gICAgaS5zZXRQdWJsaWNLZXlIZXgoeS5lY3B1YmhleCksIGkuc2V0UHJpdmF0ZUtleUhleCh5LmVjcHJ2aGV4KSwgaS5pc1ByaXZhdGUgPSAhMCwgaS5pc1B1YmxpYyA9ICExO1xuICAgIHZhciBzID0gbmV3IGEuY3J5cHRvLkVDRFNBKHsgY3VydmU6IHAgfSk7XG4gICAgcy5zZXRQdWJsaWNLZXlIZXgoeS5lY3B1YmhleCksIHMuaXNQcml2YXRlID0gITEsIHMuaXNQdWJsaWMgPSAhMDtcbiAgICB2YXIgdSA9IHt9O1xuICAgIHJldHVybiB1LnBydktleU9iaiA9IGksIHUucHViS2V5T2JqID0gcywgdTtcbiAgfSBlbHNlXG4gICAgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biBhbGdvcml0aG06IFwiICsgZSk7XG59O1xuay5nZXRQRU0gPSBmdW5jdGlvbihlLCB0LCByLCBpLCBzLCBuKSB7XG4gIHZhciBoID0gYSwgdSA9IGguYXNuMSwgcCA9IHUuREVST2JqZWN0SWRlbnRpZmllciwgYyA9IHUuREVSSW50ZWdlciwgeSA9IHUuQVNOMVV0aWwubmV3T2JqZWN0LCB2ID0gdS54NTA5LCBvID0gdi5TdWJqZWN0UHVibGljS2V5SW5mbywgbCA9IGguY3J5cHRvLCBmID0gbC5EU0EsIGQgPSBsLkVDRFNBLCBnID0gcTtcbiAgZnVuY3Rpb24gUyhCKSB7XG4gICAgdmFyIE8gPSB5KHsgc2VxOiBbeyBpbnQ6IDAgfSwgeyBpbnQ6IHsgYmlnaW50OiBCLm4gfSB9LCB7IGludDogQi5lIH0sIHsgaW50OiB7IGJpZ2ludDogQi5kIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBCLnAgfSB9LCB7IGludDogeyBiaWdpbnQ6IEIucSB9IH0sIHsgaW50OiB7IGJpZ2ludDogQi5kbXAxIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBCLmRtcTEgfSB9LCB7IGludDogeyBiaWdpbnQ6IEIuY29lZmYgfSB9XSB9KTtcbiAgICByZXR1cm4gTztcbiAgfVxuICBmdW5jdGlvbiBiKEIpIHtcbiAgICB2YXIgTyA9IHkoeyBzZXE6IFt7IGludDogMSB9LCB7IG9jdHN0cjogeyBoZXg6IEIucHJ2S2V5SGV4IH0gfSwgeyB0YWc6IFtcImEwXCIsICEwLCB7IG9pZDogeyBuYW1lOiBCLmN1cnZlTmFtZSB9IH1dIH0sIHsgdGFnOiBbXCJhMVwiLCAhMCwgeyBiaXRzdHI6IHsgaGV4OiBcIjAwXCIgKyBCLnB1YktleUhleCB9IH1dIH1dIH0pO1xuICAgIHJldHVybiBPO1xuICB9XG4gIGZ1bmN0aW9uIEQoQikge1xuICAgIHZhciBPID0geSh7IHNlcTogW3sgaW50OiAwIH0sIHsgaW50OiB7IGJpZ2ludDogQi5wIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBCLnEgfSB9LCB7IGludDogeyBiaWdpbnQ6IEIuZyB9IH0sIHsgaW50OiB7IGJpZ2ludDogQi55IH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBCLnggfSB9XSB9KTtcbiAgICByZXR1cm4gTztcbiAgfVxuICBpZiAoKGcgIT09IHZvaWQgMCAmJiBlIGluc3RhbmNlb2YgZyB8fCBmICE9PSB2b2lkIDAgJiYgZSBpbnN0YW5jZW9mIGYgfHwgZCAhPT0gdm9pZCAwICYmIGUgaW5zdGFuY2VvZiBkKSAmJiBlLmlzUHVibGljID09ICEwICYmICh0ID09PSB2b2lkIDAgfHwgdCA9PSBcIlBLQ1M4UFVCXCIpKSB7XG4gICAgdmFyIEEgPSBuZXcgbyhlKSwgSSA9IEEudG9oZXgoKTtcbiAgICByZXR1cm4gZGUoSSwgXCJQVUJMSUMgS0VZXCIpO1xuICB9XG4gIGlmICh0ID09IFwiUEtDUzFQUlZcIiAmJiBnICE9PSB2b2lkIDAgJiYgZSBpbnN0YW5jZW9mIGcgJiYgKHIgPT09IHZvaWQgMCB8fCByID09IG51bGwpICYmIGUuaXNQcml2YXRlID09ICEwKSB7XG4gICAgdmFyIEEgPSBTKGUpLCBJID0gQS50b2hleCgpO1xuICAgIHJldHVybiBkZShJLCBcIlJTQSBQUklWQVRFIEtFWVwiKTtcbiAgfVxuICBpZiAodCA9PSBcIlBLQ1MxUFJWXCIgJiYgZCAhPT0gdm9pZCAwICYmIGUgaW5zdGFuY2VvZiBkICYmIChyID09PSB2b2lkIDAgfHwgciA9PSBudWxsKSAmJiBlLmlzUHJpdmF0ZSA9PSAhMCkge1xuICAgIHZhciBtID0gbmV3IHAoeyBuYW1lOiBlLmN1cnZlTmFtZSB9KSwgRSA9IG0udG9oZXgoKSwgdyA9IGIoZSksIHggPSB3LnRvaGV4KCksIEYgPSBcIlwiO1xuICAgIHJldHVybiBGICs9IGRlKEUsIFwiRUMgUEFSQU1FVEVSU1wiKSwgRiArPSBkZSh4LCBcIkVDIFBSSVZBVEUgS0VZXCIpLCBGO1xuICB9XG4gIGlmICh0ID09IFwiUEtDUzFQUlZcIiAmJiBmICE9PSB2b2lkIDAgJiYgZSBpbnN0YW5jZW9mIGYgJiYgKHIgPT09IHZvaWQgMCB8fCByID09IG51bGwpICYmIGUuaXNQcml2YXRlID09ICEwKSB7XG4gICAgdmFyIEEgPSBEKGUpLCBJID0gQS50b2hleCgpO1xuICAgIHJldHVybiBkZShJLCBcIkRTQSBQUklWQVRFIEtFWVwiKTtcbiAgfVxuICBpZiAodCA9PSBcIlBLQ1M1UFJWXCIgJiYgZyAhPT0gdm9pZCAwICYmIGUgaW5zdGFuY2VvZiBnICYmIHIgIT09IHZvaWQgMCAmJiByICE9IG51bGwgJiYgZS5pc1ByaXZhdGUgPT0gITApIHtcbiAgICB2YXIgQSA9IFMoZSksIEkgPSBBLnRvaGV4KCk7XG4gICAgcmV0dXJuIGkgPT09IHZvaWQgMCAmJiAoaSA9IFwiREVTLUVERTMtQ0JDXCIpLCB0aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleChcIlJTQVwiLCBJLCByLCBpLCBuKTtcbiAgfVxuICBpZiAodCA9PSBcIlBLQ1M1UFJWXCIgJiYgZCAhPT0gdm9pZCAwICYmIGUgaW5zdGFuY2VvZiBkICYmIHIgIT09IHZvaWQgMCAmJiByICE9IG51bGwgJiYgZS5pc1ByaXZhdGUgPT0gITApIHtcbiAgICB2YXIgQSA9IGIoZSksIEkgPSBBLnRvaGV4KCk7XG4gICAgcmV0dXJuIGkgPT09IHZvaWQgMCAmJiAoaSA9IFwiREVTLUVERTMtQ0JDXCIpLCB0aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleChcIkVDXCIsIEksIHIsIGksIG4pO1xuICB9XG4gIGlmICh0ID09IFwiUEtDUzVQUlZcIiAmJiBmICE9PSB2b2lkIDAgJiYgZSBpbnN0YW5jZW9mIGYgJiYgciAhPT0gdm9pZCAwICYmIHIgIT0gbnVsbCAmJiBlLmlzUHJpdmF0ZSA9PSAhMCkge1xuICAgIHZhciBBID0gRChlKSwgSSA9IEEudG9oZXgoKTtcbiAgICByZXR1cm4gaSA9PT0gdm9pZCAwICYmIChpID0gXCJERVMtRURFMy1DQkNcIiksIHRoaXMuZ2V0RW5jcnlwdGVkUEtDUzVQRU1Gcm9tUHJ2S2V5SGV4KFwiRFNBXCIsIEksIHIsIGksIG4pO1xuICB9XG4gIHZhciBQID0gZnVuY3Rpb24oQiwgTykge1xuICAgIGlmICh0eXBlb2YgTyA9PSBcInN0cmluZ1wiKVxuICAgICAgcmV0dXJuIGsuZ2V0RW5jcnlwdGVkUEtDUzhQRU0oQiwgTyk7XG4gICAgaWYgKHR5cGVvZiBPID09IFwib2JqZWN0XCIgJiYgSihPLCBcInBhc3Njb2RlXCIpICE9IG51bGwpIHtcbiAgICAgIHZhciBqID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShPKSksIGZlID0gai5wYXNzY29kZTtcbiAgICAgIHJldHVybiBkZWxldGUgai5wYXNzY29kZSwgay5nZXRFbmNyeXB0ZWRQS0NTOFBFTShCLCBmZSwgaik7XG4gICAgfVxuICB9O1xuICBpZiAodCA9PSBcIlBLQ1M4UFJWXCIgJiYgZyAhPSBudWxsICYmIGUgaW5zdGFuY2VvZiBnICYmIGUuaXNQcml2YXRlID09ICEwKSB7XG4gICAgdmFyIFQgPSBTKGUpLCBIID0gVC50b2hleCgpLCBBID0geSh7IHNlcTogW3sgaW50OiAwIH0sIHsgc2VxOiBbeyBvaWQ6IHsgbmFtZTogXCJyc2FFbmNyeXB0aW9uXCIgfSB9LCB7IG51bGw6ICEwIH1dIH0sIHsgb2N0c3RyOiB7IGhleDogSCB9IH1dIH0pLCBJID0gQS50b2hleCgpO1xuICAgIHJldHVybiByID09PSB2b2lkIDAgfHwgciA9PSBudWxsID8gZGUoSSwgXCJQUklWQVRFIEtFWVwiKSA6IFAoSSwgcik7XG4gIH1cbiAgaWYgKHQgPT0gXCJQS0NTOFBSVlwiICYmIGQgIT09IHZvaWQgMCAmJiBlIGluc3RhbmNlb2YgZCAmJiBlLmlzUHJpdmF0ZSA9PSAhMCkge1xuICAgIHZhciBDID0geyBzZXE6IFt7IGludDogMSB9LCB7IG9jdHN0cjogeyBoZXg6IGUucHJ2S2V5SGV4IH0gfV0gfTtcbiAgICB0eXBlb2YgZS5wdWJLZXlIZXggPT0gXCJzdHJpbmdcIiAmJiBDLnNlcS5wdXNoKHsgdGFnOiBbXCJhMVwiLCAhMCwgeyBiaXRzdHI6IHsgaGV4OiBcIjAwXCIgKyBlLnB1YktleUhleCB9IH1dIH0pO1xuICAgIHZhciBUID0gbmV3IHkoQyksIEggPSBULnRvaGV4KCksIEEgPSB5KHsgc2VxOiBbeyBpbnQ6IDAgfSwgeyBzZXE6IFt7IG9pZDogeyBuYW1lOiBcImVjUHVibGljS2V5XCIgfSB9LCB7IG9pZDogeyBuYW1lOiBlLmN1cnZlTmFtZSB9IH1dIH0sIHsgb2N0c3RyOiB7IGhleDogSCB9IH1dIH0pLCBJID0gQS50b2hleCgpO1xuICAgIHJldHVybiByID09PSB2b2lkIDAgfHwgciA9PSBudWxsID8gZGUoSSwgXCJQUklWQVRFIEtFWVwiKSA6IFAoSSwgcik7XG4gIH1cbiAgaWYgKHQgPT0gXCJQS0NTOFBSVlwiICYmIGYgIT09IHZvaWQgMCAmJiBlIGluc3RhbmNlb2YgZiAmJiBlLmlzUHJpdmF0ZSA9PSAhMCkge1xuICAgIHZhciBUID0gbmV3IGMoeyBiaWdpbnQ6IGUueCB9KSwgSCA9IFQudG9oZXgoKSwgQSA9IHkoeyBzZXE6IFt7IGludDogMCB9LCB7IHNlcTogW3sgb2lkOiB7IG5hbWU6IFwiZHNhXCIgfSB9LCB7IHNlcTogW3sgaW50OiB7IGJpZ2ludDogZS5wIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBlLnEgfSB9LCB7IGludDogeyBiaWdpbnQ6IGUuZyB9IH1dIH1dIH0sIHsgb2N0c3RyOiB7IGhleDogSCB9IH1dIH0pLCBJID0gQS50b2hleCgpO1xuICAgIHJldHVybiByID09PSB2b2lkIDAgfHwgciA9PSBudWxsID8gZGUoSSwgXCJQUklWQVRFIEtFWVwiKSA6IFAoSSwgcik7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgb2JqZWN0IG5vciBmb3JtYXRcIik7XG59O1xuay5nZXRLZXlGcm9tQ1NSUEVNID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGllKGUsIFwiQ0VSVElGSUNBVEUgUkVRVUVTVFwiKSwgciA9IGsuZ2V0S2V5RnJvbUNTUkhleCh0KTtcbiAgcmV0dXJuIHI7XG59O1xuay5nZXRLZXlGcm9tQ1NSSGV4ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGsucGFyc2VDU1JIZXgoZSksIHIgPSBrLmdldEtleSh0LnA4cHVia2V5aGV4LCBudWxsLCBcInBrY3M4cHViXCIpO1xuICByZXR1cm4gcjtcbn07XG5rLnBhcnNlQ1NSSGV4ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IFYsIHIgPSB0LmdldENoaWxkSWR4LCBpID0gdC5nZXRUTFYsIHMgPSB7fSwgbiA9IGU7XG4gIGlmIChuLnN1YnN0cigwLCAyKSAhPSBcIjMwXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIENTUihjb2RlOjAwMSlcIik7XG4gIHZhciBoID0gcihuLCAwKTtcbiAgaWYgKGgubGVuZ3RoIDwgMSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAyKVwiKTtcbiAgaWYgKG4uc3Vic3RyKGhbMF0sIDIpICE9IFwiMzBcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgQ1NSKGNvZGU6MDAzKVwiKTtcbiAgdmFyIHUgPSByKG4sIGhbMF0pO1xuICBpZiAodS5sZW5ndGggPCAzKVxuICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBDU1IoY29kZTowMDQpXCIpO1xuICByZXR1cm4gcy5wOHB1YmtleWhleCA9IGkobiwgdVsyXSksIHM7XG59O1xuay5nZXRLZXlJRCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBrLCByID0gVjtcbiAgdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiAmJiBlLmluZGV4T2YoXCJCRUdJTiBcIikgIT0gLTEgJiYgKGUgPSB0LmdldEtleShlKSk7XG4gIHZhciBpID0gaWUodC5nZXRQRU0oZSkpLCBzID0gci5nZXRJZHhieUxpc3QoaSwgMCwgWzFdKSwgbiA9IHIuZ2V0VihpLCBzKS5zdWJzdHJpbmcoMik7XG4gIHJldHVybiBhLmNyeXB0by5VdGlsLmhhc2hIZXgobiwgXCJzaGExXCIpO1xufTtcbmsuZ2V0SldLID0gZnVuY3Rpb24oZSwgdCwgciwgaSwgcykge1xuICB2YXIgbiwgaCA9IHt9LCB1LCBwID0gYS5jcnlwdG8uVXRpbC5oYXNoSGV4O1xuICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIilcbiAgICBuID0gay5nZXRLZXkoZSksIGUuaW5kZXhPZihcIkNFUlRJRklDQVRFXCIpICE9IC0xICYmICh1ID0gaWUoZSkpO1xuICBlbHNlIGlmICh0eXBlb2YgZSA9PSBcIm9iamVjdFwiKVxuICAgIGUgaW5zdGFuY2VvZiBMID8gKG4gPSBlLmdldFB1YmxpY0tleSgpLCB1ID0gZS5oZXgpIDogbiA9IGU7XG4gIGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBrZXlpbmZvIHR5cGVcIik7XG4gIGlmIChuIGluc3RhbmNlb2YgcSAmJiBuLmlzUHJpdmF0ZSlcbiAgICBoLmt0eSA9IFwiUlNBXCIsIGgubiA9IGFlKG4ubi50b1N0cmluZygxNikpLCBoLmUgPSBhZShuLmUudG9TdHJpbmcoMTYpKSwgaC5kID0gYWUobi5kLnRvU3RyaW5nKDE2KSksIGgucCA9IGFlKG4ucC50b1N0cmluZygxNikpLCBoLnEgPSBhZShuLnEudG9TdHJpbmcoMTYpKSwgaC5kcCA9IGFlKG4uZG1wMS50b1N0cmluZygxNikpLCBoLmRxID0gYWUobi5kbXExLnRvU3RyaW5nKDE2KSksIGgucWkgPSBhZShuLmNvZWZmLnRvU3RyaW5nKDE2KSk7XG4gIGVsc2UgaWYgKG4gaW5zdGFuY2VvZiBxICYmIG4uaXNQdWJsaWMpXG4gICAgaC5rdHkgPSBcIlJTQVwiLCBoLm4gPSBhZShuLm4udG9TdHJpbmcoMTYpKSwgaC5lID0gYWUobi5lLnRvU3RyaW5nKDE2KSk7XG4gIGVsc2UgaWYgKG4gaW5zdGFuY2VvZiBhLmNyeXB0by5FQ0RTQSAmJiBuLmlzUHJpdmF0ZSkge1xuICAgIHZhciBjID0gbi5nZXRTaG9ydE5JU1RQQ3VydmVOYW1lKCk7XG4gICAgaWYgKGMgIT09IFwiUC0yNTZcIiAmJiBjICE9PSBcIlAtMzg0XCIgJiYgYyAhPT0gXCJQLTUyMVwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgY3VydmUgbmFtZSBmb3IgSldUOiBcIiArIGMpO1xuICAgIHZhciB5ID0gbi5nZXRQdWJsaWNLZXlYWUhleCgpO1xuICAgIGgua3R5ID0gXCJFQ1wiLCBoLmNydiA9IGMsIGgueCA9IGFlKHkueCksIGgueSA9IGFlKHkueSksIGguZCA9IGFlKG4ucHJ2S2V5SGV4KTtcbiAgfSBlbHNlIGlmIChuIGluc3RhbmNlb2YgYS5jcnlwdG8uRUNEU0EgJiYgbi5pc1B1YmxpYykge1xuICAgIHZhciBjID0gbi5nZXRTaG9ydE5JU1RQQ3VydmVOYW1lKCk7XG4gICAgaWYgKGMgIT09IFwiUC0yNTZcIiAmJiBjICE9PSBcIlAtMzg0XCIgJiYgYyAhPT0gXCJQLTUyMVwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgY3VydmUgbmFtZSBmb3IgSldUOiBcIiArIGMpO1xuICAgIHZhciB5ID0gbi5nZXRQdWJsaWNLZXlYWUhleCgpO1xuICAgIGgua3R5ID0gXCJFQ1wiLCBoLmNydiA9IGMsIGgueCA9IGFlKHkueCksIGgueSA9IGFlKHkueSk7XG4gIH1cbiAgaWYgKGgua3R5ID09IG51bGwpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQga2V5aW5mb1wiKTtcbiAgcmV0dXJuICFuLmlzUHJpdmF0ZSAmJiB0ICE9ICEwICYmIChoLmtpZCA9IGEuandzLkpXUy5nZXRKV0t0aHVtYnByaW50KGgpKSwgdSAhPSBudWxsICYmIHIgIT0gITAgJiYgKGgueDVjID0gW19lKHUpXSksIHUgIT0gbnVsbCAmJiBpICE9ICEwICYmIChoLng1dCA9IFhlKF9lKHAodSwgXCJzaGExXCIpKSkpLCB1ICE9IG51bGwgJiYgcyAhPSAhMCAmJiAoaFtcIng1dCNTMjU2XCJdID0gWGUoX2UocCh1LCBcInNoYTI1NlwiKSkpKSwgaDtcbn07XG5rLmdldEpXS0Zyb21LZXkgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBrLmdldEpXSyhlLCAhMCwgITAsICEwLCAhMCk7XG59O1xucS5nZXRQb3NBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4ID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gVi5nZXRDaGlsZElkeChlLCAwKTtcbn07XG5xLmdldEhleFZhbHVlQXJyYXlPZkNoaWxkcmVuRnJvbUhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWLCByID0gdC5nZXRWLCBvID0gcS5nZXRQb3NBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KGUpLCBpID0gcihlLCBvWzBdKSwgcyA9IHIoZSwgb1sxXSksIG4gPSByKGUsIG9bMl0pLCBoID0gcihlLCBvWzNdKSwgdSA9IHIoZSwgb1s0XSksIHAgPSByKGUsIG9bNV0pLCBjID0gcihlLCBvWzZdKSwgeSA9IHIoZSwgb1s3XSksIHYgPSByKGUsIG9bOF0pLCBvID0gbmV3IEFycmF5KCk7XG4gIHJldHVybiBvLnB1c2goaSwgcywgbiwgaCwgdSwgcCwgYywgeSwgdiksIG87XG59O1xucS5wcm90b3R5cGUucmVhZFByaXZhdGVLZXlGcm9tUEVNU3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGllKGUpLCByID0gcS5nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgodCk7XG4gIHRoaXMuc2V0UHJpdmF0ZUV4KHJbMV0sIHJbMl0sIHJbM10sIHJbNF0sIHJbNV0sIHJbNl0sIHJbN10sIHJbOF0pO1xufTtcbnEucHJvdG90eXBlLnJlYWRQS0NTNVBydktleUhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBxLmdldEhleFZhbHVlQXJyYXlPZkNoaWxkcmVuRnJvbUhleChlKTtcbiAgdGhpcy5zZXRQcml2YXRlRXgodFsxXSwgdFsyXSwgdFszXSwgdFs0XSwgdFs1XSwgdFs2XSwgdFs3XSwgdFs4XSk7XG59O1xucS5wcm90b3R5cGUucmVhZFBLQ1M4UHJ2S2V5SGV4ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCwgciwgaSwgcywgbiwgaCwgdSwgcCwgYyA9IFYsIHkgPSBjLmdldFZieUxpc3RFeDtcbiAgaWYgKGMuaXNBU04xSEVYKGUpID09PSAhMSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgdHJ5IHtcbiAgICB0ID0geShlLCAwLCBbMiwgMCwgMV0sIFwiMDJcIiksIHIgPSB5KGUsIDAsIFsyLCAwLCAyXSwgXCIwMlwiKSwgaSA9IHkoZSwgMCwgWzIsIDAsIDNdLCBcIjAyXCIpLCBzID0geShlLCAwLCBbMiwgMCwgNF0sIFwiMDJcIiksIG4gPSB5KGUsIDAsIFsyLCAwLCA1XSwgXCIwMlwiKSwgaCA9IHkoZSwgMCwgWzIsIDAsIDZdLCBcIjAyXCIpLCB1ID0geShlLCAwLCBbMiwgMCwgN10sIFwiMDJcIiksIHAgPSB5KGUsIDAsIFsyLCAwLCA4XSwgXCIwMlwiKTtcbiAgfSBjYXRjaCB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1MjOCBwbGFpbiBSU0EgcHJpdmF0ZSBrZXlcIik7XG4gIH1cbiAgdGhpcy5zZXRQcml2YXRlRXgodCwgciwgaSwgcywgbiwgaCwgdSwgcCk7XG59O1xucS5wcm90b3R5cGUucmVhZFBLQ1M1UHViS2V5SGV4ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IFYsIHIgPSB0LmdldFY7XG4gIGlmICh0LmlzQVNOMUhFWChlKSA9PT0gITEpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwia2V5SGV4IGlzIG5vdCBBU04uMSBoZXggc3RyaW5nXCIpO1xuICB2YXIgaSA9IHQuZ2V0Q2hpbGRJZHgoZSwgMCk7XG4gIGlmIChpLmxlbmd0aCAhPT0gMiB8fCBlLnN1YnN0cihpWzBdLCAyKSAhPT0gXCIwMlwiIHx8IGUuc3Vic3RyKGlbMV0sIDIpICE9PSBcIjAyXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwid3JvbmcgaGV4IGZvciBQS0NTIzUgcHVibGljIGtleVwiKTtcbiAgdmFyIHMgPSByKGUsIGlbMF0pLCBuID0gcihlLCBpWzFdKTtcbiAgdGhpcy5zZXRQdWJsaWMocywgbik7XG59O1xucS5wcm90b3R5cGUucmVhZFBLQ1M4UHViS2V5SGV4ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IFY7XG4gIGlmICh0LmlzQVNOMUhFWChlKSA9PT0gITEpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwibm90IEFTTi4xIGhleCBzdHJpbmdcIik7XG4gIGlmICh0LmdldFRMVmJ5TGlzdEV4KGUsIDAsIFswLCAwXSkgIT09IFwiMDYwOTJhODY0ODg2ZjcwZDAxMDEwMVwiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBQS0NTOCBSU0EgcHVibGljIGtleVwiKTtcbiAgdmFyIHIgPSB0LmdldFRMVmJ5TGlzdEV4KGUsIDAsIFsxLCAwXSk7XG4gIHRoaXMucmVhZFBLQ1M1UHViS2V5SGV4KHIpO1xufTtcbnEucHJvdG90eXBlLnJlYWRDZXJ0UHViS2V5SGV4ID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciwgaTtcbiAgciA9IG5ldyBMKCksIHIucmVhZENlcnRIZXgoZSksIGkgPSByLmdldFB1YmxpY0tleUhleCgpLCB0aGlzLnJlYWRQS0NTOFB1YktleUhleChpKTtcbn07XG5mdW5jdGlvbiBPdChlLCB0KSB7XG4gIGZvciAodmFyIHIgPSBcIlwiLCBpID0gdCAvIDQgLSBlLmxlbmd0aCwgcyA9IDA7IHMgPCBpOyBzKyspXG4gICAgciA9IHIgKyBcIjBcIjtcbiAgcmV0dXJuIHIgKyBlO1xufVxucS5wcm90b3R5cGUuc2lnbiA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBmdW5jdGlvbihzKSB7XG4gICAgcmV0dXJuIGEuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyhzLCB0KTtcbiAgfSwgaSA9IHIoZSk7XG4gIHJldHVybiB0aGlzLnNpZ25XaXRoTWVzc2FnZUhhc2goaSwgdCk7XG59O1xucS5wcm90b3R5cGUuc2lnbldpdGhNZXNzYWdlSGFzaCA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBhLmNyeXB0by5VdGlsLmdldFBhZGRlZERpZ2VzdEluZm9IZXgoZSwgdCwgdGhpcy5uLmJpdExlbmd0aCgpKSwgaSA9IHZlKHIsIDE2KSwgcyA9IHRoaXMuZG9Qcml2YXRlKGkpLCBuID0gcy50b1N0cmluZygxNik7XG4gIHJldHVybiBPdChuLCB0aGlzLm4uYml0TGVuZ3RoKCkpO1xufTtcbmZ1bmN0aW9uIGp0KGUsIHQsIHIpIHtcbiAgZm9yICh2YXIgaSA9IFwiXCIsIHMgPSAwOyBpLmxlbmd0aCA8IHQ7IClcbiAgICBpICs9IEFlKHIoUGUoZSArIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBbKHMgJiA0Mjc4MTkwMDgwKSA+PiAyNCwgKHMgJiAxNjcxMTY4MCkgPj4gMTYsIChzICYgNjUyODApID4+IDgsIHMgJiAyNTVdKSkpKSwgcyArPSAxO1xuICByZXR1cm4gaTtcbn1cbnEucHJvdG90eXBlLnNpZ25QU1MgPSBmdW5jdGlvbihlLCB0LCByKSB7XG4gIHZhciBpID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiBhLmNyeXB0by5VdGlsLmhhc2hIZXgobiwgdCk7XG4gIH0sIHMgPSBpKFBlKGUpKTtcbiAgcmV0dXJuIHIgPT09IHZvaWQgMCAmJiAociA9IC0xKSwgdGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTKHMsIHQsIHIpO1xufTtcbnEucHJvdG90eXBlLnNpZ25XaXRoTWVzc2FnZUhhc2hQU1MgPSBmdW5jdGlvbihlLCB0LCByKSB7XG4gIHZhciBpID0gQWUoZSksIHMgPSBpLmxlbmd0aCwgbiA9IHRoaXMubi5iaXRMZW5ndGgoKSAtIDEsIGggPSBNYXRoLmNlaWwobiAvIDgpLCB1LCBwID0gZnVuY3Rpb24oZykge1xuICAgIHJldHVybiBhLmNyeXB0by5VdGlsLmhhc2hIZXgoZywgdCk7XG4gIH07XG4gIGlmIChyID09PSAtMSB8fCByID09PSB2b2lkIDApXG4gICAgciA9IHM7XG4gIGVsc2UgaWYgKHIgPT09IC0yKVxuICAgIHIgPSBoIC0gcyAtIDI7XG4gIGVsc2UgaWYgKHIgPCAtMilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIHNhbHQgbGVuZ3RoXCIpO1xuICBpZiAoaCA8IHMgKyByICsgMilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJkYXRhIHRvbyBsb25nXCIpO1xuICB2YXIgYyA9IFwiXCI7XG4gIHIgPiAwICYmIChjID0gbmV3IEFycmF5KHIpLCBuZXcgR2UoKS5uZXh0Qnl0ZXMoYyksIGMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgYykpO1xuICB2YXIgeSA9IEFlKHAoUGUoXCJcXDBcXDBcXDBcXDBcXDBcXDBcXDBcXDBcIiArIGkgKyBjKSkpLCB2ID0gW107XG4gIGZvciAodSA9IDA7IHUgPCBoIC0gciAtIHMgLSAyOyB1ICs9IDEpXG4gICAgdlt1XSA9IDA7XG4gIHZhciBvID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIHYpICsgXCJcdTAwMDFcIiArIGMsIGwgPSBqdCh5LCBvLmxlbmd0aCwgcCksIGYgPSBbXTtcbiAgZm9yICh1ID0gMDsgdSA8IG8ubGVuZ3RoOyB1ICs9IDEpXG4gICAgZlt1XSA9IG8uY2hhckNvZGVBdCh1KSBeIGwuY2hhckNvZGVBdCh1KTtcbiAgdmFyIGQgPSA2NTI4MCA+PiA4ICogaCAtIG4gJiAyNTU7XG4gIGZvciAoZlswXSAmPSB+ZCwgdSA9IDA7IHUgPCBzOyB1KyspXG4gICAgZi5wdXNoKHkuY2hhckNvZGVBdCh1KSk7XG4gIHJldHVybiBmLnB1c2goMTg4KSwgT3QodGhpcy5kb1ByaXZhdGUobmV3IFIoZikpLnRvU3RyaW5nKDE2KSwgdGhpcy5uLmJpdExlbmd0aCgpKTtcbn07XG5mdW5jdGlvbiBWdChlKSB7XG4gIGZvciAodmFyIHQgaW4gYS5jcnlwdG8uVXRpbC5ESUdFU1RJTkZPSEVBRCkge1xuICAgIHZhciByID0gYS5jcnlwdG8uVXRpbC5ESUdFU1RJTkZPSEVBRFt0XSwgaSA9IHIubGVuZ3RoO1xuICAgIGlmIChlLnN1YnN0cmluZygwLCBpKSA9PSByKSB7XG4gICAgICB2YXIgcyA9IFt0LCBlLnN1YnN0cmluZyhpKV07XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdO1xufVxucS5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24oZSwgdCkge1xuICBpZiAodCA9IHQudG9Mb3dlckNhc2UoKSwgdC5tYXRjaCgvXlswLTlhLWZdKyQvKSA9PSBudWxsKVxuICAgIHJldHVybiAhMTtcbiAgdmFyIHIgPSB2ZSh0LCAxNiksIGkgPSB0aGlzLm4uYml0TGVuZ3RoKCk7XG4gIGlmIChyLmJpdExlbmd0aCgpID4gaSlcbiAgICByZXR1cm4gITE7XG4gIHZhciBzID0gdGhpcy5kb1B1YmxpYyhyKSwgbiA9IHMudG9TdHJpbmcoMTYpO1xuICBpZiAobi5sZW5ndGggKyAzICE9IGkgLyA0KVxuICAgIHJldHVybiAhMTtcbiAgdmFyIGggPSBuLnJlcGxhY2UoL14xZiswMC8sIFwiXCIpLCB1ID0gVnQoaCk7XG4gIGlmICh1Lmxlbmd0aCA9PSAwKVxuICAgIHJldHVybiAhMTtcbiAgdmFyIHAgPSB1WzBdLCBjID0gdVsxXSwgeSA9IGZ1bmN0aW9uKG8pIHtcbiAgICByZXR1cm4gYS5jcnlwdG8uVXRpbC5oYXNoU3RyaW5nKG8sIHApO1xuICB9LCB2ID0geShlKTtcbiAgcmV0dXJuIGMgPT0gdjtcbn07XG5xLnByb3RvdHlwZS52ZXJpZnlXaXRoTWVzc2FnZUhhc2ggPSBmdW5jdGlvbihlLCB0KSB7XG4gIGlmICh0Lmxlbmd0aCAhPSBNYXRoLmNlaWwodGhpcy5uLmJpdExlbmd0aCgpIC8gNCkpXG4gICAgcmV0dXJuICExO1xuICB2YXIgciA9IHZlKHQsIDE2KTtcbiAgaWYgKHIuYml0TGVuZ3RoKCkgPiB0aGlzLm4uYml0TGVuZ3RoKCkpXG4gICAgcmV0dXJuIDA7XG4gIHZhciBpID0gdGhpcy5kb1B1YmxpYyhyKSwgcyA9IGkudG9TdHJpbmcoMTYpLnJlcGxhY2UoL14xZiswMC8sIFwiXCIpLCBuID0gVnQocyk7XG4gIGlmIChuLmxlbmd0aCA9PSAwKVxuICAgIHJldHVybiAhMTtcbiAgblswXTtcbiAgdmFyIGggPSBuWzFdO1xuICByZXR1cm4gaCA9PSBlO1xufTtcbnEucHJvdG90eXBlLnZlcmlmeVBTUyA9IGZ1bmN0aW9uKGUsIHQsIHIsIGkpIHtcbiAgdmFyIHMgPSBmdW5jdGlvbihoKSB7XG4gICAgcmV0dXJuIGEuY3J5cHRvLlV0aWwuaGFzaEhleChoLCByKTtcbiAgfSwgbiA9IHMoUGUoZSkpO1xuICByZXR1cm4gaSA9PT0gdm9pZCAwICYmIChpID0gLTEpLCB0aGlzLnZlcmlmeVdpdGhNZXNzYWdlSGFzaFBTUyhuLCB0LCByLCBpKTtcbn07XG5xLnByb3RvdHlwZS52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1MgPSBmdW5jdGlvbihlLCB0LCByLCBpKSB7XG4gIGlmICh0Lmxlbmd0aCAhPSBNYXRoLmNlaWwodGhpcy5uLmJpdExlbmd0aCgpIC8gNCkpXG4gICAgcmV0dXJuICExO1xuICB2YXIgcyA9IG5ldyBSKHQsIDE2KSwgbiA9IGZ1bmN0aW9uKGIpIHtcbiAgICByZXR1cm4gYS5jcnlwdG8uVXRpbC5oYXNoSGV4KGIsIHIpO1xuICB9LCBoID0gQWUoZSksIHUgPSBoLmxlbmd0aCwgcCA9IHRoaXMubi5iaXRMZW5ndGgoKSAtIDEsIGMgPSBNYXRoLmNlaWwocCAvIDgpLCB5O1xuICBpZiAoaSA9PT0gLTEgfHwgaSA9PT0gdm9pZCAwKVxuICAgIGkgPSB1O1xuICBlbHNlIGlmIChpID09PSAtMilcbiAgICBpID0gYyAtIHUgLSAyO1xuICBlbHNlIGlmIChpIDwgLTIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBzYWx0IGxlbmd0aFwiKTtcbiAgaWYgKGMgPCB1ICsgaSArIDIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZGF0YSB0b28gbG9uZ1wiKTtcbiAgdmFyIHYgPSB0aGlzLmRvUHVibGljKHMpLnRvQnl0ZUFycmF5KCk7XG4gIGZvciAoeSA9IDA7IHkgPCB2Lmxlbmd0aDsgeSArPSAxKVxuICAgIHZbeV0gJj0gMjU1O1xuICBmb3IgKDsgdi5sZW5ndGggPCBjOyApXG4gICAgdi51bnNoaWZ0KDApO1xuICBpZiAodltjIC0gMV0gIT09IDE4OClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJlbmNvZGVkIG1lc3NhZ2UgZG9lcyBub3QgZW5kIGluIDB4YmNcIik7XG4gIHYgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgdik7XG4gIHZhciBvID0gdi5zdWJzdHIoMCwgYyAtIHUgLSAxKSwgbCA9IHYuc3Vic3RyKG8ubGVuZ3RoLCB1KSwgZiA9IDY1MjgwID4+IDggKiBjIC0gcCAmIDI1NTtcbiAgaWYgKG8uY2hhckNvZGVBdCgwKSAmIGYpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYml0cyBiZXlvbmQga2V5c2l6ZSBub3QgemVyb1wiKTtcbiAgdmFyIGQgPSBqdChsLCBvLmxlbmd0aCwgbiksIGcgPSBbXTtcbiAgZm9yICh5ID0gMDsgeSA8IG8ubGVuZ3RoOyB5ICs9IDEpXG4gICAgZ1t5XSA9IG8uY2hhckNvZGVBdCh5KSBeIGQuY2hhckNvZGVBdCh5KTtcbiAgZ1swXSAmPSB+ZjtcbiAgdmFyIFMgPSBjIC0gdSAtIGkgLSAyO1xuICBmb3IgKHkgPSAwOyB5IDwgUzsgeSArPSAxKVxuICAgIGlmIChnW3ldICE9PSAwKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibGVmdG1vc3Qgb2N0ZXRzIG5vdCB6ZXJvXCIpO1xuICBpZiAoZ1tTXSAhPT0gMSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCIweDAxIG1hcmtlciBub3QgZm91bmRcIik7XG4gIHJldHVybiBsID09PSBBZShuKFBlKFwiXFwwXFwwXFwwXFwwXFwwXFwwXFwwXFwwXCIgKyBoICsgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGcuc2xpY2UoLWkpKSkpKTtcbn07XG5xLlNBTFRfTEVOX0hMRU4gPSAtMTtcbnEuU0FMVF9MRU5fTUFYID0gLTI7XG5xLlNBTFRfTEVOX1JFQ09WRVIgPSAtMjtcbmZ1bmN0aW9uIEwoZSkge1xuICB2YXIgdCA9IFYsIHIgPSB0LmdldENoaWxkSWR4LCBpID0gdC5nZXRWO1xuICB0LmR1bXA7XG4gIHZhciBzID0gdC5wYXJzZSwgbiA9IHQuZ2V0VExWLCBoID0gdC5nZXRWYnlMaXN0LCB1ID0gdC5nZXRWYnlMaXN0RXgsIHAgPSB0LmdldFRMVmJ5TGlzdCwgYyA9IHQuZ2V0VExWYnlMaXN0RXgsIHkgPSB0LmdldElkeGJ5TGlzdCwgdiA9IHQuZ2V0SWR4YnlMaXN0RXgsIG8gPSB0LmdldFZpZHgsIGwgPSB0LmdldEludCwgZiA9IHQub2lkbmFtZSwgZCA9IHQuaGV4dG9vaWRzdHIsIGcgPSBpZSwgUywgYiA9IEVycm9yO1xuICB0cnkge1xuICAgIFMgPSBhLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyLlBTU05BTUUyQVNOMVRMVjtcbiAgfSBjYXRjaCB7XG4gIH1cbiAgdGhpcy5IRVgyU1RBRyA9IHsgXCIwY1wiOiBcInV0ZjhcIiwgMTM6IFwicHJuXCIsIDE2OiBcImlhNVwiLCBcIjFhXCI6IFwidmlzXCIsIFwiMWVcIjogXCJibXBcIiB9LCB0aGlzLmhleCA9IG51bGwsIHRoaXMudmVyc2lvbiA9IDAsIHRoaXMuZm9mZnNldCA9IDAsIHRoaXMuYUV4dEluZm8gPSBudWxsLCB0aGlzLmdldFZlcnNpb24gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5oZXggPT09IG51bGwgfHwgdGhpcy52ZXJzaW9uICE9PSAwKVxuICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbjtcbiAgICB2YXIgbSA9IHAodGhpcy5oZXgsIDAsIFswLCAwXSk7XG4gICAgaWYgKG0uc3Vic3RyKDAsIDIpID09IFwiYTBcIikge1xuICAgICAgdmFyIEUgPSBwKG0sIDAsIFswXSksIHcgPSBsKEUsIDApO1xuICAgICAgaWYgKHcgPCAwIHx8IDIgPCB3KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgdmVyc2lvbiBmaWVsZFwiKTtcbiAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB3ICsgMSwgdGhpcy52ZXJzaW9uO1xuICAgIH0gZWxzZVxuICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IDEsIHRoaXMuZm9mZnNldCA9IC0xLCAxO1xuICB9LCB0aGlzLmdldFNlcmlhbE51bWJlckhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB1KHRoaXMuaGV4LCAwLCBbMCwgMF0sIFwiMDJcIik7XG4gIH0sIHRoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtRmllbGQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IGModGhpcy5oZXgsIDAsIFswLCAxXSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWUobSk7XG4gIH0sIHRoaXMuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWUgPSBmdW5jdGlvbihtKSB7XG4gICAgZm9yICh2YXIgRSBpbiBTKVxuICAgICAgaWYgKG0gPT09IFNbRV0pXG4gICAgICAgIHJldHVybiBFO1xuICAgIHJldHVybiBmKHUobSwgMCwgWzBdLCBcIjA2XCIpKTtcbiAgfSwgdGhpcy5nZXRJc3N1ZXIgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0WDUwME5hbWUodGhpcy5nZXRJc3N1ZXJIZXgoKSwgbSwgRSk7XG4gIH0sIHRoaXMuZ2V0SXNzdWVySGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHAodGhpcy5oZXgsIDAsIFswLCAzICsgdGhpcy5mb2Zmc2V0XSwgXCIzMFwiKTtcbiAgfSwgdGhpcy5nZXRJc3N1ZXJTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IHRoaXMuZ2V0SXNzdWVyKCk7XG4gICAgcmV0dXJuIG0uc3RyO1xuICB9LCB0aGlzLmdldFN1YmplY3QgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0WDUwME5hbWUodGhpcy5nZXRTdWJqZWN0SGV4KCksIG0sIEUpO1xuICB9LCB0aGlzLmdldFN1YmplY3RIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gcCh0aGlzLmhleCwgMCwgWzAsIDUgKyB0aGlzLmZvZmZzZXRdLCBcIjMwXCIpO1xuICB9LCB0aGlzLmdldFN1YmplY3RTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IHRoaXMuZ2V0U3ViamVjdCgpO1xuICAgIHJldHVybiBtLnN0cjtcbiAgfSwgdGhpcy5nZXROb3RCZWZvcmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IGgodGhpcy5oZXgsIDAsIFswLCA0ICsgdGhpcy5mb2Zmc2V0LCAwXSk7XG4gICAgcmV0dXJuIG0gPSBtLnJlcGxhY2UoLyguLikvZywgXCIlJDFcIiksIG0gPSBkZWNvZGVVUklDb21wb25lbnQobSksIG07XG4gIH0sIHRoaXMuZ2V0Tm90QWZ0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IGgodGhpcy5oZXgsIDAsIFswLCA0ICsgdGhpcy5mb2Zmc2V0LCAxXSk7XG4gICAgcmV0dXJuIG0gPSBtLnJlcGxhY2UoLyguLikvZywgXCIlJDFcIiksIG0gPSBkZWNvZGVVUklDb21wb25lbnQobSksIG07XG4gIH0sIHRoaXMuZ2V0UHVibGljS2V5SGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U1BLSSgpO1xuICB9LCB0aGlzLmdldFNQS0kgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gcCh0aGlzLmhleCwgMCwgWzAsIDYgKyB0aGlzLmZvZmZzZXRdLCBcIjMwXCIpO1xuICB9LCB0aGlzLmdldFNQS0lWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtID0gdGhpcy5nZXRTUEtJKCk7XG4gICAgcmV0dXJuIG0gPT0gbnVsbCA/IG51bGwgOiBoKG0sIDAsIFsxXSwgXCIwM1wiLCAhMCk7XG4gIH0sIHRoaXMuZ2V0UHVibGljS2V5SWR4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHkodGhpcy5oZXgsIDAsIFswLCA2ICsgdGhpcy5mb2Zmc2V0XSwgXCIzMFwiKTtcbiAgfSwgdGhpcy5nZXRQdWJsaWNLZXlDb250ZW50SWR4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG0gPSB0aGlzLmdldFB1YmxpY0tleUlkeCgpO1xuICAgIHJldHVybiB5KHRoaXMuaGV4LCBtLCBbMSwgMF0sIFwiMzBcIik7XG4gIH0sIHRoaXMuZ2V0UHVibGljS2V5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGsuZ2V0S2V5KHRoaXMuZ2V0UHVibGljS2V5SGV4KCksIG51bGwsIFwicGtjczhwdWJcIik7XG4gIH0sIHRoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtTmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtID0gcCh0aGlzLmhleCwgMCwgWzFdLCBcIjMwXCIpO1xuICAgIHJldHVybiB0aGlzLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lKG0pO1xuICB9LCB0aGlzLmdldFNpZ25hdHVyZVZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGgodGhpcy5oZXgsIDAsIFsyXSwgXCIwM1wiLCAhMCk7XG4gIH0sIHRoaXMudmVyaWZ5U2lnbmF0dXJlID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0gdGhpcy5nZXRTaWduYXR1cmVBbGdvcml0aG1GaWVsZCgpLCB3ID0gdGhpcy5nZXRTaWduYXR1cmVWYWx1ZUhleCgpLCB4ID0gcCh0aGlzLmhleCwgMCwgWzBdLCBcIjMwXCIpLCBGID0gbmV3IGEuY3J5cHRvLlNpZ25hdHVyZSh7IGFsZzogRSB9KTtcbiAgICByZXR1cm4gRi5pbml0KG0pLCBGLnVwZGF0ZUhleCh4KSwgRi52ZXJpZnkodyk7XG4gIH0sIHRoaXMucGFyc2VFeHQgPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUsIHcsIHg7XG4gICAgaWYgKG0gPT09IHZvaWQgMCkge1xuICAgICAgaWYgKHggPSB0aGlzLmhleCwgdGhpcy52ZXJzaW9uICE9PSAzKVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgICBFID0geSh4LCAwLCBbMCwgNywgMF0sIFwiMzBcIiksIHcgPSByKHgsIEUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB4ID0gaWUobSk7XG4gICAgICB2YXIgRiA9IHkoeCwgMCwgWzAsIDMsIDAsIDBdLCBcIjA2XCIpO1xuICAgICAgaWYgKGkoeCwgRikgIT0gXCIyYTg2NDg4NmY3MGQwMTA5MGVcIikge1xuICAgICAgICB0aGlzLmFFeHRJbmZvID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIEUgPSB5KHgsIDAsIFswLCAzLCAwLCAxLCAwXSwgXCIzMFwiKSwgdyA9IHIoeCwgRSksIHRoaXMuaGV4ID0geDtcbiAgICB9XG4gICAgdGhpcy5hRXh0SW5mbyA9IG5ldyBBcnJheSgpO1xuICAgIGZvciAodmFyIFAgPSAwOyBQIDwgdy5sZW5ndGg7IFArKykge1xuICAgICAgdmFyIFQgPSB7fTtcbiAgICAgIFQuY3JpdGljYWwgPSAhMTtcbiAgICAgIHZhciBIID0gcih4LCB3W1BdKSwgQyA9IDA7XG4gICAgICBILmxlbmd0aCA9PT0gMyAmJiAoVC5jcml0aWNhbCA9ICEwLCBDID0gMSksIFQub2lkID0gdC5oZXh0b29pZHN0cihoKHgsIHdbUF0sIFswXSwgXCIwNlwiKSk7XG4gICAgICB2YXIgQiA9IHkoeCwgd1tQXSwgWzEgKyBDXSk7XG4gICAgICBULnZpZHggPSBvKHgsIEIpLCB0aGlzLmFFeHRJbmZvLnB1c2goVCk7XG4gICAgfVxuICB9LCB0aGlzLmdldEV4dEluZm8gPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSB0aGlzLmFFeHRJbmZvLCB3ID0gbTtcbiAgICBpZiAobS5tYXRjaCgvXlswLTkuXSskLykgfHwgKHcgPSBhLmFzbjEueDUwOS5PSUQubmFtZTJvaWQobSkpLCB3ICE9PSBcIlwiKSB7XG4gICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEUubGVuZ3RoOyB4KyspXG4gICAgICAgIGlmIChFW3hdLm9pZCA9PT0gdylcbiAgICAgICAgICByZXR1cm4gRVt4XTtcbiAgICB9XG4gIH0sIHRoaXMuZ2V0Q3JpdGljYWxFeHRWID0gZnVuY3Rpb24obSwgRSwgdykge1xuICAgIGlmIChFICE9IG51bGwpXG4gICAgICByZXR1cm4gW0UsIHddO1xuICAgIHZhciB4ID0gdGhpcy5nZXRFeHRJbmZvKG0pO1xuICAgIHJldHVybiB4ID09IG51bGwgPyBbbnVsbCwgbnVsbF0gOiBbbih0aGlzLmhleCwgeC52aWR4KSwgeC5jcml0aWNhbF07XG4gIH0sIHRoaXMuZ2V0RXh0QmFzaWNDb25zdHJhaW50cyA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICBpZiAobSA9PT0gdm9pZCAwICYmIEUgPT09IHZvaWQgMCkge1xuICAgICAgdmFyIHcgPSB0aGlzLmdldEV4dEluZm8oXCJiYXNpY0NvbnN0cmFpbnRzXCIpO1xuICAgICAgaWYgKHcgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbSA9IG4odGhpcy5oZXgsIHcudmlkeCksIEUgPSB3LmNyaXRpY2FsO1xuICAgIH1cbiAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJiYXNpY0NvbnN0cmFpbnRzXCIgfTtcbiAgICBpZiAoRSAmJiAoeC5jcml0aWNhbCA9ICEwKSwgbSA9PT0gXCIzMDAwXCIpXG4gICAgICByZXR1cm4geDtcbiAgICBpZiAobSA9PT0gXCIzMDAzMDEwMWZmXCIpXG4gICAgICByZXR1cm4geC5jQSA9ICEwLCB4O1xuICAgIGlmIChtLnN1YnN0cigwLCAxMikgPT09IFwiMzAwNjAxMDFmZjAyXCIpIHtcbiAgICAgIHZhciBGID0gaShtLCAxMCksIFAgPSBwYXJzZUludChGLCAxNik7XG4gICAgICByZXR1cm4geC5jQSA9ICEwLCB4LnBhdGhMZW4gPSBQLCB4O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJoRXh0ViBwYXJzZSBlcnJvcjogXCIgKyBtKTtcbiAgfSwgdGhpcy5nZXRFeHROYW1lQ29uc3RyYWludHMgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB0aGlzLmdldENyaXRpY2FsRXh0VihcIm5hbWVDb25zdHJhaW50c1wiLCBtLCBFKTtcbiAgICBpZiAobSA9IHdbMF0sIEUgPSB3WzFdLCBtICE9IG51bGwpIHtcbiAgICAgIHZhciB4ID0geyBleHRuYW1lOiBcIm5hbWVDb25zdHJhaW50c1wiIH07XG4gICAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgICAgZm9yICh2YXIgRiA9IHIobSwgMCksIFAgPSAwOyBQIDwgRi5sZW5ndGg7IFArKykge1xuICAgICAgICBmb3IgKHZhciBUID0gW10sIEggPSByKG0sIEZbUF0pLCBDID0gMDsgQyA8IEgubGVuZ3RoOyBDKyspIHtcbiAgICAgICAgICB2YXIgQiA9IG4obSwgSFtDXSksIE8gPSB0aGlzLmdldEdlbmVyYWxTdWJ0cmVlKEIpO1xuICAgICAgICAgIFQucHVzaChPKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaiA9IG0uc3Vic3RyKEZbUF0sIDIpO1xuICAgICAgICBqID09IFwiYTBcIiA/IHgucGVybWl0ID0gVCA6IGogPT0gXCJhMVwiICYmICh4LmV4Y2x1ZGUgPSBUKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSwgdGhpcy5nZXRHZW5lcmFsU3VidHJlZSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IHIobSwgMCksIHcgPSBFLmxlbmd0aDtcbiAgICBpZiAodyA8IDEgfHwgMiA8IHcpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ3cm9uZyBudW0gZWxlbWVudHNcIik7XG4gICAgZm9yICh2YXIgeCA9IHRoaXMuZ2V0R2VuZXJhbE5hbWUobihtLCBFWzBdKSksIEYgPSAxOyBGIDwgdzsgRisrKSB7XG4gICAgICB2YXIgUCA9IG0uc3Vic3RyKEVbRl0sIDIpLCBUID0gaShtLCBFW0ZdKSwgSCA9IHBhcnNlSW50KFQsIDE2KTtcbiAgICAgIFAgPT0gXCI4MFwiICYmICh4Lm1pbiA9IEgpLCBQID09IFwiODFcIiAmJiAoeC5tYXggPSBIKTtcbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH0sIHRoaXMuZ2V0RXh0S2V5VXNhZ2UgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB0aGlzLmdldENyaXRpY2FsRXh0VihcImtleVVzYWdlXCIsIG0sIEUpO1xuICAgIGlmIChtID0gd1swXSwgRSA9IHdbMV0sIG0gIT0gbnVsbCkge1xuICAgICAgdmFyIHggPSB7IGV4dG5hbWU6IFwia2V5VXNhZ2VcIiB9O1xuICAgICAgcmV0dXJuIEUgJiYgKHguY3JpdGljYWwgPSAhMCksIHgubmFtZXMgPSB0aGlzLmdldEV4dEtleVVzYWdlU3RyaW5nKG0pLnNwbGl0KFwiLFwiKSwgeDtcbiAgICB9XG4gIH0sIHRoaXMuZ2V0RXh0S2V5VXNhZ2VCaW4gPSBmdW5jdGlvbihtKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCkge1xuICAgICAgdmFyIEUgPSB0aGlzLmdldEV4dEluZm8oXCJrZXlVc2FnZVwiKTtcbiAgICAgIGlmIChFID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgbSA9IG4odGhpcy5oZXgsIEUudmlkeCk7XG4gICAgfVxuICAgIGlmIChtLmxlbmd0aCAhPSA4ICYmIG0ubGVuZ3RoICE9IDEwKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGtleSB1c2FnZSB2YWx1ZTogXCIgKyBtKTtcbiAgICB2YXIgdyA9IFwiMDAwMDAwMDAwMDAwMDAwXCIgKyBwYXJzZUludChtLnN1YnN0cig2KSwgMTYpLnRvU3RyaW5nKDIpO1xuICAgIHJldHVybiBtLmxlbmd0aCA9PSA4ICYmICh3ID0gdy5zbGljZSgtOCkpLCBtLmxlbmd0aCA9PSAxMCAmJiAodyA9IHcuc2xpY2UoLTE2KSksIHcgPSB3LnJlcGxhY2UoLzArJC8sIFwiXCIpLCB3ID09IFwiXCIgJiYgKHcgPSBcIjBcIiksIHc7XG4gIH0sIHRoaXMuZ2V0RXh0S2V5VXNhZ2VTdHJpbmcgPSBmdW5jdGlvbihtKSB7XG4gICAgZm9yICh2YXIgRSA9IHRoaXMuZ2V0RXh0S2V5VXNhZ2VCaW4obSksIHcgPSBuZXcgQXJyYXkoKSwgeCA9IDA7IHggPCBFLmxlbmd0aDsgeCsrKVxuICAgICAgRS5zdWJzdHIoeCwgMSkgPT0gXCIxXCIgJiYgdy5wdXNoKEwuS0VZVVNBR0VfTkFNRVt4XSk7XG4gICAgcmV0dXJuIHcuam9pbihcIixcIik7XG4gIH0sIHRoaXMuZ2V0RXh0U3ViamVjdEtleUlkZW50aWZpZXIgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwic3ViamVjdEtleUlkZW50aWZpZXJcIik7XG4gICAgICBpZiAodyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBtID0gbih0aGlzLmhleCwgdy52aWR4KSwgRSA9IHcuY3JpdGljYWw7XG4gICAgfVxuICAgIHZhciB4ID0geyBleHRuYW1lOiBcInN1YmplY3RLZXlJZGVudGlmaWVyXCIgfTtcbiAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgIHZhciBGID0gaShtLCAwKTtcbiAgICByZXR1cm4geC5raWQgPSB7IGhleDogRiB9LCB4O1xuICB9LCB0aGlzLmdldEV4dEF1dGhvcml0eUtleUlkZW50aWZpZXIgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwiYXV0aG9yaXR5S2V5SWRlbnRpZmllclwiKTtcbiAgICAgIGlmICh3ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCB3LnZpZHgpLCBFID0gdy5jcml0aWNhbDtcbiAgICB9XG4gICAgdmFyIHggPSB7IGV4dG5hbWU6IFwiYXV0aG9yaXR5S2V5SWRlbnRpZmllclwiIH07XG4gICAgRSAmJiAoeC5jcml0aWNhbCA9ICEwKTtcbiAgICBmb3IgKHZhciBGID0gcihtLCAwKSwgUCA9IDA7IFAgPCBGLmxlbmd0aDsgUCsrKSB7XG4gICAgICB2YXIgVCA9IG0uc3Vic3RyKEZbUF0sIDIpO1xuICAgICAgaWYgKFQgPT09IFwiODBcIiAmJiAoeC5raWQgPSB7IGhleDogaShtLCBGW1BdKSB9KSwgVCA9PT0gXCJhMVwiKSB7XG4gICAgICAgIHZhciBIID0gbihtLCBGW1BdKSwgQyA9IHRoaXMuZ2V0R2VuZXJhbE5hbWVzKEgpO1xuICAgICAgICB4Lmlzc3VlciA9IENbMF0uZG47XG4gICAgICB9XG4gICAgICBUID09PSBcIjgyXCIgJiYgKHguc24gPSB7IGhleDogaShtLCBGW1BdKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH0sIHRoaXMuZ2V0RXh0RXh0S2V5VXNhZ2UgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwiZXh0S2V5VXNhZ2VcIik7XG4gICAgICBpZiAodyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBtID0gbih0aGlzLmhleCwgdy52aWR4KSwgRSA9IHcuY3JpdGljYWw7XG4gICAgfVxuICAgIHZhciB4ID0geyBleHRuYW1lOiBcImV4dEtleVVzYWdlXCIsIGFycmF5OiBbXSB9O1xuICAgIEUgJiYgKHguY3JpdGljYWwgPSAhMCk7XG4gICAgZm9yICh2YXIgRiA9IHIobSwgMCksIFAgPSAwOyBQIDwgRi5sZW5ndGg7IFArKylcbiAgICAgIHguYXJyYXkucHVzaChmKGkobSwgRltQXSkpKTtcbiAgICByZXR1cm4geDtcbiAgfSwgdGhpcy5nZXRFeHRFeHRLZXlVc2FnZU5hbWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IHRoaXMuZ2V0RXh0SW5mbyhcImV4dEtleVVzYWdlXCIpO1xuICAgIGlmIChtID09PSB2b2lkIDApXG4gICAgICByZXR1cm4gbTtcbiAgICB2YXIgRSA9IG5ldyBBcnJheSgpLCB3ID0gbih0aGlzLmhleCwgbS52aWR4KTtcbiAgICBpZiAodyA9PT0gXCJcIilcbiAgICAgIHJldHVybiBFO1xuICAgIGZvciAodmFyIHggPSByKHcsIDApLCBGID0gMDsgRiA8IHgubGVuZ3RoOyBGKyspXG4gICAgICBFLnB1c2goZihpKHcsIHhbRl0pKSk7XG4gICAgcmV0dXJuIEU7XG4gIH0sIHRoaXMuZ2V0RXh0U3ViamVjdEFsdE5hbWUgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwic3ViamVjdEFsdE5hbWVcIik7XG4gICAgICBpZiAodyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBtID0gbih0aGlzLmhleCwgdy52aWR4KSwgRSA9IHcuY3JpdGljYWw7XG4gICAgfVxuICAgIHZhciB4ID0geyBleHRuYW1lOiBcInN1YmplY3RBbHROYW1lXCIsIGFycmF5OiBbXSB9O1xuICAgIHJldHVybiBFICYmICh4LmNyaXRpY2FsID0gITApLCB4LmFycmF5ID0gdGhpcy5nZXRHZW5lcmFsTmFtZXMobSksIHg7XG4gIH0sIHRoaXMuZ2V0RXh0SXNzdWVyQWx0TmFtZSA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICBpZiAobSA9PT0gdm9pZCAwICYmIEUgPT09IHZvaWQgMCkge1xuICAgICAgdmFyIHcgPSB0aGlzLmdldEV4dEluZm8oXCJpc3N1ZXJBbHROYW1lXCIpO1xuICAgICAgaWYgKHcgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbSA9IG4odGhpcy5oZXgsIHcudmlkeCksIEUgPSB3LmNyaXRpY2FsO1xuICAgIH1cbiAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJpc3N1ZXJBbHROYW1lXCIsIGFycmF5OiBbXSB9O1xuICAgIHJldHVybiBFICYmICh4LmNyaXRpY2FsID0gITApLCB4LmFycmF5ID0gdGhpcy5nZXRHZW5lcmFsTmFtZXMobSksIHg7XG4gIH0sIHRoaXMuZ2V0R2VuZXJhbE5hbWVzID0gZnVuY3Rpb24obSkge1xuICAgIGZvciAodmFyIEUgPSByKG0sIDApLCB3ID0gW10sIHggPSAwOyB4IDwgRS5sZW5ndGg7IHgrKykge1xuICAgICAgdmFyIEYgPSB0aGlzLmdldEdlbmVyYWxOYW1lKG4obSwgRVt4XSkpO1xuICAgICAgRiAhPT0gdm9pZCAwICYmIHcucHVzaChGKTtcbiAgICB9XG4gICAgcmV0dXJuIHc7XG4gIH0sIHRoaXMuZ2V0R2VuZXJhbE5hbWUgPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSBtLnN1YnN0cigwLCAyKSwgdyA9IGkobSwgMCksIHggPSBBZSh3KTtcbiAgICBpZiAoRSA9PSBcIjgxXCIpXG4gICAgICByZXR1cm4geyByZmM4MjI6IHggfTtcbiAgICBpZiAoRSA9PSBcIjgyXCIpXG4gICAgICByZXR1cm4geyBkbnM6IHggfTtcbiAgICBpZiAoRSA9PSBcIjg2XCIpXG4gICAgICByZXR1cm4geyB1cmk6IHggfTtcbiAgICBpZiAoRSA9PSBcIjg3XCIpXG4gICAgICByZXR1cm4geyBpcDogdHQodykgfTtcbiAgICBpZiAoRSA9PSBcImE0XCIpXG4gICAgICByZXR1cm4geyBkbjogdGhpcy5nZXRYNTAwTmFtZSh3KSB9O1xuICAgIGlmIChFID09IFwiYTBcIilcbiAgICAgIHJldHVybiB7IG90aGVyOiB0aGlzLmdldE90aGVyTmFtZShtKSB9O1xuICB9LCB0aGlzLmdldEV4dFN1YmplY3RBbHROYW1lMiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtLCBFLCB3LCB4ID0gdGhpcy5nZXRFeHRJbmZvKFwic3ViamVjdEFsdE5hbWVcIik7XG4gICAgaWYgKHggPT09IHZvaWQgMClcbiAgICAgIHJldHVybiB4O1xuICAgIGZvciAodmFyIEYgPSBuZXcgQXJyYXkoKSwgUCA9IG4odGhpcy5oZXgsIHgudmlkeCksIFQgPSByKFAsIDApLCBIID0gMDsgSCA8IFQubGVuZ3RoOyBIKyspXG4gICAgICB3ID0gUC5zdWJzdHIoVFtIXSwgMiksIG0gPSBpKFAsIFRbSF0pLCB3ID09PSBcIjgxXCIgJiYgKEUgPSBXKG0pLCBGLnB1c2goW1wiTUFJTFwiLCBFXSkpLCB3ID09PSBcIjgyXCIgJiYgKEUgPSBXKG0pLCBGLnB1c2goW1wiRE5TXCIsIEVdKSksIHcgPT09IFwiODRcIiAmJiAoRSA9IEwuaGV4MmRuKG0sIDApLCBGLnB1c2goW1wiRE5cIiwgRV0pKSwgdyA9PT0gXCI4NlwiICYmIChFID0gVyhtKSwgRi5wdXNoKFtcIlVSSVwiLCBFXSkpLCB3ID09PSBcIjg3XCIgJiYgKEUgPSB0dChtKSwgRi5wdXNoKFtcIklQXCIsIEVdKSk7XG4gICAgcmV0dXJuIEY7XG4gIH0sIHRoaXMuZ2V0RXh0Q1JMRGlzdHJpYnV0aW9uUG9pbnRzID0gZnVuY3Rpb24obSwgRSkge1xuICAgIGlmIChtID09PSB2b2lkIDAgJiYgRSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuZ2V0RXh0SW5mbyhcImNSTERpc3RyaWJ1dGlvblBvaW50c1wiKTtcbiAgICAgIGlmICh3ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCB3LnZpZHgpLCBFID0gdy5jcml0aWNhbDtcbiAgICB9XG4gICAgdmFyIHggPSB7IGV4dG5hbWU6IFwiY1JMRGlzdHJpYnV0aW9uUG9pbnRzXCIsIGFycmF5OiBbXSB9O1xuICAgIEUgJiYgKHguY3JpdGljYWwgPSAhMCk7XG4gICAgZm9yICh2YXIgRiA9IHIobSwgMCksIFAgPSAwOyBQIDwgRi5sZW5ndGg7IFArKykge1xuICAgICAgdmFyIFQgPSBuKG0sIEZbUF0pO1xuICAgICAgeC5hcnJheS5wdXNoKHRoaXMuZ2V0RGlzdHJpYnV0aW9uUG9pbnQoVCkpO1xuICAgIH1cbiAgICByZXR1cm4geDtcbiAgfSwgdGhpcy5nZXREaXN0cmlidXRpb25Qb2ludCA9IGZ1bmN0aW9uKG0pIHtcbiAgICBmb3IgKHZhciBFID0ge30sIHcgPSByKG0sIDApLCB4ID0gMDsgeCA8IHcubGVuZ3RoOyB4KyspIHtcbiAgICAgIHZhciBGID0gbS5zdWJzdHIod1t4XSwgMiksIFAgPSBuKG0sIHdbeF0pO1xuICAgICAgRiA9PSBcImEwXCIgJiYgKEUuZHBuYW1lID0gdGhpcy5nZXREaXN0cmlidXRpb25Qb2ludE5hbWUoUCkpO1xuICAgIH1cbiAgICByZXR1cm4gRTtcbiAgfSwgdGhpcy5nZXREaXN0cmlidXRpb25Qb2ludE5hbWUgPSBmdW5jdGlvbihtKSB7XG4gICAgZm9yICh2YXIgRSA9IHt9LCB3ID0gcihtLCAwKSwgeCA9IDA7IHggPCB3Lmxlbmd0aDsgeCsrKSB7XG4gICAgICB2YXIgRiA9IG0uc3Vic3RyKHdbeF0sIDIpLCBQID0gbihtLCB3W3hdKTtcbiAgICAgIEYgPT0gXCJhMFwiICYmIChFLmZ1bGwgPSB0aGlzLmdldEdlbmVyYWxOYW1lcyhQKSk7XG4gICAgfVxuICAgIHJldHVybiBFO1xuICB9LCB0aGlzLmdldEV4dENSTERpc3RyaWJ1dGlvblBvaW50c1VSSSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtID0gdGhpcy5nZXRFeHRDUkxEaXN0cmlidXRpb25Qb2ludHMoKTtcbiAgICBpZiAobSA9PSBudWxsKVxuICAgICAgcmV0dXJuIG07XG4gICAgZm9yICh2YXIgRSA9IG0uYXJyYXksIHcgPSBbXSwgeCA9IDA7IHggPCBFLmxlbmd0aDsgeCsrKVxuICAgICAgdHJ5IHtcbiAgICAgICAgRVt4XS5kcG5hbWUuZnVsbFswXS51cmkgIT0gbnVsbCAmJiB3LnB1c2goRVt4XS5kcG5hbWUuZnVsbFswXS51cmkpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICB9XG4gICAgcmV0dXJuIHc7XG4gIH0sIHRoaXMuZ2V0RXh0QUlBSW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtID0gdGhpcy5nZXRFeHRJbmZvKFwiYXV0aG9yaXR5SW5mb0FjY2Vzc1wiKTtcbiAgICBpZiAobSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIG07XG4gICAgZm9yICh2YXIgRSA9IHsgb2NzcDogW10sIGNhaXNzdWVyOiBbXSB9LCB3ID0gcih0aGlzLmhleCwgbS52aWR4KSwgeCA9IDA7IHggPCB3Lmxlbmd0aDsgeCsrKSB7XG4gICAgICB2YXIgRiA9IGgodGhpcy5oZXgsIHdbeF0sIFswXSwgXCIwNlwiKSwgUCA9IGgodGhpcy5oZXgsIHdbeF0sIFsxXSwgXCI4NlwiKTtcbiAgICAgIEYgPT09IFwiMmIwNjAxMDUwNTA3MzAwMVwiICYmIEUub2NzcC5wdXNoKFcoUCkpLCBGID09PSBcIjJiMDYwMTA1MDUwNzMwMDJcIiAmJiBFLmNhaXNzdWVyLnB1c2goVyhQKSk7XG4gICAgfVxuICAgIHJldHVybiBFO1xuICB9LCB0aGlzLmdldEV4dEF1dGhvcml0eUluZm9BY2Nlc3MgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwiYXV0aG9yaXR5SW5mb0FjY2Vzc1wiKTtcbiAgICAgIGlmICh3ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCB3LnZpZHgpLCBFID0gdy5jcml0aWNhbDtcbiAgICB9XG4gICAgdmFyIHggPSB7IGV4dG5hbWU6IFwiYXV0aG9yaXR5SW5mb0FjY2Vzc1wiLCBhcnJheTogW10gfTtcbiAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgIGZvciAodmFyIEYgPSByKG0sIDApLCBQID0gMDsgUCA8IEYubGVuZ3RoOyBQKyspIHtcbiAgICAgIHZhciBUID0gdShtLCBGW1BdLCBbMF0sIFwiMDZcIiksIEggPSBoKG0sIEZbUF0sIFsxXSwgXCI4NlwiKSwgQyA9IFcoSCk7XG4gICAgICBpZiAoVCA9PSBcIjJiMDYwMTA1MDUwNzMwMDFcIilcbiAgICAgICAgeC5hcnJheS5wdXNoKHsgb2NzcDogQyB9KTtcbiAgICAgIGVsc2UgaWYgKFQgPT0gXCIyYjA2MDEwNTA1MDczMDAyXCIpXG4gICAgICAgIHguYXJyYXkucHVzaCh7IGNhaXNzdWVyOiBDIH0pO1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIG1ldGhvZDogXCIgKyBUKTtcbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH0sIHRoaXMuZ2V0RXh0Q2VydGlmaWNhdGVQb2xpY2llcyA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICBpZiAobSA9PT0gdm9pZCAwICYmIEUgPT09IHZvaWQgMCkge1xuICAgICAgdmFyIHcgPSB0aGlzLmdldEV4dEluZm8oXCJjZXJ0aWZpY2F0ZVBvbGljaWVzXCIpO1xuICAgICAgaWYgKHcgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbSA9IG4odGhpcy5oZXgsIHcudmlkeCksIEUgPSB3LmNyaXRpY2FsO1xuICAgIH1cbiAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJjZXJ0aWZpY2F0ZVBvbGljaWVzXCIsIGFycmF5OiBbXSB9O1xuICAgIEUgJiYgKHguY3JpdGljYWwgPSAhMCk7XG4gICAgZm9yICh2YXIgRiA9IHIobSwgMCksIFAgPSAwOyBQIDwgRi5sZW5ndGg7IFArKykge1xuICAgICAgdmFyIFQgPSBuKG0sIEZbUF0pLCBIID0gdGhpcy5nZXRQb2xpY3lJbmZvcm1hdGlvbihUKTtcbiAgICAgIHguYXJyYXkucHVzaChIKTtcbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH0sIHRoaXMuZ2V0UG9saWN5SW5mb3JtYXRpb24gPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSB7fSwgdyA9IGgobSwgMCwgWzBdLCBcIjA2XCIpO1xuICAgIEUucG9saWN5b2lkID0gZih3KTtcbiAgICB2YXIgeCA9IHYobSwgMCwgWzFdLCBcIjMwXCIpO1xuICAgIGlmICh4ICE9IC0xKSB7XG4gICAgICBFLmFycmF5ID0gW107XG4gICAgICBmb3IgKHZhciBGID0gcihtLCB4KSwgUCA9IDA7IFAgPCBGLmxlbmd0aDsgUCsrKSB7XG4gICAgICAgIHZhciBUID0gbihtLCBGW1BdKSwgSCA9IHRoaXMuZ2V0UG9saWN5UXVhbGlmaWVySW5mbyhUKTtcbiAgICAgICAgRS5hcnJheS5wdXNoKEgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gRTtcbiAgfSwgdGhpcy5nZXRPdGhlck5hbWUgPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSB7fSwgdyA9IHIobSwgMCksIHggPSBoKG0sIHdbMF0sIFtdLCBcIjA2XCIpLCBGID0gaChtLCB3WzFdLCBbXSk7XG4gICAgcmV0dXJuIEUub2lkID0gZih4KSwgRS52YWx1ZSA9IHMoRiksIEU7XG4gIH0sIHRoaXMuZ2V0UG9saWN5UXVhbGlmaWVySW5mbyA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IHt9LCB3ID0gaChtLCAwLCBbMF0sIFwiMDZcIik7XG4gICAgaWYgKHcgPT09IFwiMmIwNjAxMDUwNTA3MDIwMVwiKSB7XG4gICAgICB2YXIgeCA9IHUobSwgMCwgWzFdLCBcIjE2XCIpO1xuICAgICAgRS5jcHMgPSBBZSh4KTtcbiAgICB9IGVsc2UgaWYgKHcgPT09IFwiMmIwNjAxMDUwNTA3MDIwMlwiKSB7XG4gICAgICB2YXIgRiA9IHAobSwgMCwgWzFdLCBcIjMwXCIpO1xuICAgICAgRS51bm90aWNlID0gdGhpcy5nZXRVc2VyTm90aWNlKEYpO1xuICAgIH1cbiAgICByZXR1cm4gRTtcbiAgfSwgdGhpcy5nZXRVc2VyTm90aWNlID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgRSA9IHQucGFyc2UobSk7XG4gICAgICB2YXIgdyA9IHRoaXMuX2FzbjFUb1Vub3RpY2UoRSk7XG4gICAgICByZXR1cm4gdztcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sIHRoaXMuX2FzbjFUb1Vub3RpY2UgPSBmdW5jdGlvbihtKSB7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIEUgPSB7fSwgdyA9IEoobSwgXCJzZXFcIiksIHggPSAwOyB4IDwgdy5sZW5ndGg7IHgrKykge1xuICAgICAgICB2YXIgRiA9IHRoaXMuX2FzbjFUb05vdGljZVJlZih3W3hdKTtcbiAgICAgICAgRiAhPSBudWxsICYmIChFLm5vdGljZXJlZiA9IEYpO1xuICAgICAgICB2YXIgUCA9IHRoaXMuYXNuMVRvRGlzcGxheVRleHQod1t4XSk7XG4gICAgICAgIFAgIT0gbnVsbCAmJiAoRS5leHB0ZXh0ID0gUCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoRSkubGVuZ3RoID4gMCA/IEUgOiB2b2lkIDA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LCB0aGlzLl9hc24xVG9Ob3RpY2VSZWYgPSBmdW5jdGlvbihtKSB7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIEUgPSB7fSwgdyA9IEoobSwgXCJzZXFcIiksIHggPSAwOyB4IDwgdy5sZW5ndGg7IHgrKykge1xuICAgICAgICB2YXIgRiA9IHRoaXMuX2FzbjFUb05vdGljZU51bSh3W3hdKTtcbiAgICAgICAgRiAhPSBudWxsICYmIChFLm5vdGljZW51bSA9IEYpO1xuICAgICAgICB2YXIgUCA9IHRoaXMuYXNuMVRvRGlzcGxheVRleHQod1t4XSk7XG4gICAgICAgIFAgIT0gbnVsbCAmJiAoRS5vcmcgPSBQKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhFKS5sZW5ndGggPiAwID8gRSA6IHZvaWQgMDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0sIHRoaXMuX2FzbjFUb05vdGljZU51bSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgRSA9IEoobSwgXCJzZXFcIiksIHcgPSBbXSwgeCA9IDA7IHggPCBFLmxlbmd0aDsgeCsrKSB7XG4gICAgICAgIHZhciBGID0gRVt4XTtcbiAgICAgICAgdy5wdXNoKHBhcnNlSW50KEooRiwgXCJpbnQuaGV4XCIpLCAxNikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHc7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LCB0aGlzLmdldERpc3BsYXlUZXh0ID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0geyBcIjBjXCI6IFwidXRmOFwiLCAxNjogXCJpYTVcIiwgXCIxYVwiOiBcInZpc1wiLCBcIjFlXCI6IFwiYm1wXCIgfSwgdyA9IHt9O1xuICAgIHJldHVybiB3LnR5cGUgPSBFW20uc3Vic3RyKDAsIDIpXSwgdy5zdHIgPSBBZShpKG0sIDApKSwgdztcbiAgfSwgdGhpcy5hc24xVG9EaXNwbGF5VGV4dCA9IGZ1bmN0aW9uKG0pIHtcbiAgICBpZiAobS51dGY4c3RyICE9IG51bGwpXG4gICAgICByZXR1cm4geyB0eXBlOiBcInV0ZjhcIiwgc3RyOiBtLnV0ZjhzdHIuc3RyIH07XG4gICAgaWYgKG0uaWE1c3RyICE9IG51bGwpXG4gICAgICByZXR1cm4geyB0eXBlOiBcImlhNVwiLCBzdHI6IG0uaWE1c3RyLnN0ciB9O1xuICAgIGlmIChtLnZpc3N0ciAhPSBudWxsKVxuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ2aXNcIiwgc3RyOiBtLnZpc3N0ci5zdHIgfTtcbiAgICBpZiAobS5ibXBzdHIgIT0gbnVsbClcbiAgICAgIHJldHVybiB7IHR5cGU6IFwiYm1wXCIsIHN0cjogbS5ibXBzdHIuc3RyIH07XG4gICAgaWYgKG0ucHJuc3RyICE9IG51bGwpXG4gICAgICByZXR1cm4geyB0eXBlOiBcInByblwiLCBzdHI6IG0ucHJuc3RyLnN0ciB9O1xuICB9LCB0aGlzLmdldEV4dFBvbGljeU1hcHBpbmdzID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0gdGhpcy5nZXRDcml0aWNhbEV4dFYoXCJwb2xpY3lNYXBwaW5nc1wiLCBtLCBFKTtcbiAgICBpZiAobSA9IHdbMF0sIEUgPSB3WzFdLCBtICE9IG51bGwpIHtcbiAgICAgIHZhciB4ID0geyBleHRuYW1lOiBcInBvbGljeU1hcHBpbmdzXCIgfTtcbiAgICAgIEUgJiYgKHguY3JpdGljYWwgPSAhMCk7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBGID0gcyhtKSwgUCA9IEYuc2VxLCBUID0gW10sIEggPSAwOyBIIDwgUC5sZW5ndGg7IEgrKykge1xuICAgICAgICAgIHZhciBDID0gUFtIXS5zZXE7XG4gICAgICAgICAgVC5wdXNoKFtDWzBdLm9pZCwgQ1sxXS5vaWRdKTtcbiAgICAgICAgfVxuICAgICAgICB4LmFycmF5ID0gVDtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICB0aHJvdyBuZXcgYihcIm1hbGZvcm1lZCBwb2xpY3lNYXBwaW5nc1wiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSwgdGhpcy5nZXRFeHRQb2xpY3lDb25zdHJhaW50cyA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICB2YXIgdyA9IHRoaXMuZ2V0Q3JpdGljYWxFeHRWKFwicG9saWN5Q29uc3RyYWludHNcIiwgbSwgRSk7XG4gICAgaWYgKG0gPSB3WzBdLCBFID0gd1sxXSwgbSAhPSBudWxsKSB7XG4gICAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJwb2xpY3lDb25zdHJhaW50c1wiIH07XG4gICAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgICAgdmFyIEYgPSBzKG0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgUCA9IEYuc2VxLCBUID0gMDsgVCA8IFAubGVuZ3RoOyBUKyspIHtcbiAgICAgICAgICB2YXIgSCA9IFBbVF0udGFnO1xuICAgICAgICAgIEguZXhwbGljaXQgPT0gITEgJiYgKEgudGFnID09IFwiODBcIiAmJiAoeC5yZXFleHAgPSBwYXJzZUludChILmhleCwgMTYpKSwgSC50YWcgPT0gXCI4MVwiICYmICh4LmluaGliaXQgPSBwYXJzZUludChILmhleCwgMTYpKSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gbmV3IGIoXCJtYWxmb3JtZWQgcG9saWN5Q29uc3RyYWludHMgdmFsdWVcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4geDtcbiAgICB9XG4gIH0sIHRoaXMuZ2V0RXh0SW5oaWJpdEFueVBvbGljeSA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICB2YXIgdyA9IHRoaXMuZ2V0Q3JpdGljYWxFeHRWKFwiaW5oaWJpdEFueVBvbGljeVwiLCBtLCBFKTtcbiAgICBpZiAobSA9IHdbMF0sIEUgPSB3WzFdLCBtICE9IG51bGwpIHtcbiAgICAgIHZhciB4ID0geyBleHRuYW1lOiBcImluaGliaXRBbnlQb2xpY3lcIiB9O1xuICAgICAgRSAmJiAoeC5jcml0aWNhbCA9ICEwKTtcbiAgICAgIHZhciBGID0gbChtLCAwKTtcbiAgICAgIHJldHVybiBGID09IC0xID8gbmV3IGIoXCJ3cm9uZyB2YWx1ZVwiKSA6ICh4LnNraXAgPSBGLCB4KTtcbiAgICB9XG4gIH0sIHRoaXMuZ2V0RXh0Q1JMTnVtYmVyID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0geyBleHRuYW1lOiBcImNSTE51bWJlclwiIH07XG4gICAgaWYgKEUgJiYgKHcuY3JpdGljYWwgPSAhMCksIG0uc3Vic3RyKDAsIDIpID09IFwiMDJcIilcbiAgICAgIHJldHVybiB3Lm51bSA9IHsgaGV4OiBpKG0sIDApIH0sIHc7XG4gICAgdGhyb3cgbmV3IGIoXCJoRXh0ViBwYXJzZSBlcnJvcjogXCIgKyBtKTtcbiAgfSwgdGhpcy5nZXRFeHRDUkxSZWFzb24gPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB7IGV4dG5hbWU6IFwiY1JMUmVhc29uXCIgfTtcbiAgICBpZiAoRSAmJiAody5jcml0aWNhbCA9ICEwKSwgbS5zdWJzdHIoMCwgMikgPT0gXCIwYVwiKVxuICAgICAgcmV0dXJuIHcuY29kZSA9IHBhcnNlSW50KGkobSwgMCksIDE2KSwgdztcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJoRXh0ViBwYXJzZSBlcnJvcjogXCIgKyBtKTtcbiAgfSwgdGhpcy5nZXRFeHRPY3NwTm9uY2UgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB7IGV4dG5hbWU6IFwib2NzcE5vbmNlXCIgfTtcbiAgICBFICYmICh3LmNyaXRpY2FsID0gITApO1xuICAgIHZhciB4ID0gaShtLCAwKTtcbiAgICByZXR1cm4gdy5oZXggPSB4LCB3O1xuICB9LCB0aGlzLmdldEV4dE9jc3BOb0NoZWNrID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0geyBleHRuYW1lOiBcIm9jc3BOb0NoZWNrXCIgfTtcbiAgICByZXR1cm4gRSAmJiAody5jcml0aWNhbCA9ICEwKSwgdztcbiAgfSwgdGhpcy5nZXRFeHRBZG9iZVRpbWVTdGFtcCA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICBpZiAobSA9PT0gdm9pZCAwICYmIEUgPT09IHZvaWQgMCkge1xuICAgICAgdmFyIHcgPSB0aGlzLmdldEV4dEluZm8oXCJhZG9iZVRpbWVTdGFtcFwiKTtcbiAgICAgIGlmICh3ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCB3LnZpZHgpLCBFID0gdy5jcml0aWNhbDtcbiAgICB9XG4gICAgdmFyIHggPSB7IGV4dG5hbWU6IFwiYWRvYmVUaW1lU3RhbXBcIiB9O1xuICAgIEUgJiYgKHguY3JpdGljYWwgPSAhMCk7XG4gICAgdmFyIEYgPSByKG0sIDApO1xuICAgIGlmIChGLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBQID0gbihtLCBGWzFdKSwgVCA9IHRoaXMuZ2V0R2VuZXJhbE5hbWUoUCk7XG4gICAgICBULnVyaSAhPSBudWxsICYmICh4LnVyaSA9IFQudXJpKTtcbiAgICB9XG4gICAgaWYgKEYubGVuZ3RoID4gMikge1xuICAgICAgdmFyIEggPSBuKG0sIEZbMl0pO1xuICAgICAgSCA9PSBcIjAxMDFmZlwiICYmICh4LnJlcWF1dGggPSAhMCksIEggPT0gXCIwMTAxMDBcIiAmJiAoeC5yZXFhdXRoID0gITEpO1xuICAgIH1cbiAgICByZXR1cm4geDtcbiAgfSwgdGhpcy5nZXRFeHRTdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcyA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICBpZiAobSA9PT0gdm9pZCAwICYmIEUgPT09IHZvaWQgMCkge1xuICAgICAgdmFyIHcgPSB0aGlzLmdldEV4dEluZm8oXCJzdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlc1wiKTtcbiAgICAgIGlmICh3ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCB3LnZpZHgpLCBFID0gdy5jcml0aWNhbDtcbiAgICB9XG4gICAgdmFyIHggPSB7IGV4dG5hbWU6IFwic3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXNcIiB9O1xuICAgIEUgJiYgKHguY3JpdGljYWwgPSAhMCk7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIEYgPSBzKG0pLCBQID0gW10sIFQgPSAwOyBUIDwgRi5zZXEubGVuZ3RoOyBUKyspIHtcbiAgICAgICAgdmFyIEggPSBGLnNlcVtUXSwgQyA9IEooSCwgXCJzZXEuMC5vaWRcIiksIEIgPSBKKEgsIFwic2VxLjEuc2V0XCIpO1xuICAgICAgICBpZiAoQyA9PSBudWxsIHx8IEIgPT0gbnVsbClcbiAgICAgICAgICB0aHJvdyBcImVycm9yXCI7XG4gICAgICAgIFAucHVzaCh7IGF0dHI6IEMsIGFycmF5OiBCIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHguYXJyYXkgPSBQLCB4O1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIHN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzIGV4dGVuc2lvbiB2YWx1ZVwiKTtcbiAgICB9XG4gIH07XG4gIHZhciBEID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0ge307XG4gICAgdHJ5IHtcbiAgICAgIHZhciB3ID0gbS5zZXFbMF0ub2lkLCB4ID0gYS5hc24xLng1MDkuT0lELm5hbWUyb2lkKHcpO1xuICAgICAgRS50eXBlID0gYS5hc24xLng1MDkuT0lELm9pZDJhdHlwZSh4KTtcbiAgICAgIHZhciBGID0gbS5zZXFbMV07XG4gICAgICBpZiAoRi51dGY4c3RyICE9IG51bGwpXG4gICAgICAgIEUuZHMgPSBcInV0ZjhcIiwgRS52YWx1ZSA9IEYudXRmOHN0ci5zdHI7XG4gICAgICBlbHNlIGlmIChGLm51bXN0ciAhPSBudWxsKVxuICAgICAgICBFLmRzID0gXCJudW1cIiwgRS52YWx1ZSA9IEYubnVtc3RyLnN0cjtcbiAgICAgIGVsc2UgaWYgKEYudGVsc3RyICE9IG51bGwpXG4gICAgICAgIEUuZHMgPSBcInRlbFwiLCBFLnZhbHVlID0gRi50ZWxzdHIuc3RyO1xuICAgICAgZWxzZSBpZiAoRi5wcm5zdHIgIT0gbnVsbClcbiAgICAgICAgRS5kcyA9IFwicHJuXCIsIEUudmFsdWUgPSBGLnBybnN0ci5zdHI7XG4gICAgICBlbHNlIGlmIChGLmlhNXN0ciAhPSBudWxsKVxuICAgICAgICBFLmRzID0gXCJpYTVcIiwgRS52YWx1ZSA9IEYuaWE1c3RyLnN0cjtcbiAgICAgIGVsc2UgaWYgKEYudmlzc3RyICE9IG51bGwpXG4gICAgICAgIEUuZHMgPSBcInZpc1wiLCBFLnZhbHVlID0gRi52aXNzdHIuc3RyO1xuICAgICAgZWxzZSBpZiAoRi5ibXBzdHIgIT0gbnVsbClcbiAgICAgICAgRS5kcyA9IFwiYm1wXCIsIEUudmFsdWUgPSBGLmJtcHN0ci5zdHI7XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IFwiZXJyb3JcIjtcbiAgICAgIHJldHVybiBFO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVyb3JyKFwiaW1wcm9wZXIgQVNOLjEgcGFyc2VkIEF0dHJUeXBlQW5kVmFsdWVcIik7XG4gICAgfVxuICB9LCBBID0gZnVuY3Rpb24obSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbS5zZXQubWFwKGZ1bmN0aW9uKEUpIHtcbiAgICAgICAgcmV0dXJuIEQoRSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChFKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbXByb3BlciBBU04uMSBwYXJzZWQgUkROOiBcIiArIEUpO1xuICAgIH1cbiAgfSwgSSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG0uc2VxLm1hcChmdW5jdGlvbihFKSB7XG4gICAgICAgIHJldHVybiBBKEUpO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoRSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW1wcm9wZXIgQVNOLjEgcGFyc2VkIFg1MDBOYW1lOiBcIiArIEUpO1xuICAgIH1cbiAgfTtcbiAgdGhpcy5nZXRYNTAwTmFtZVJ1bGUgPSBmdW5jdGlvbihtKSB7XG4gICAgZm9yICh2YXIgRSA9IG51bGwsIHcgPSBbXSwgeCA9IDA7IHggPCBtLmxlbmd0aDsgeCsrKVxuICAgICAgZm9yICh2YXIgRiA9IG1beF0sIFAgPSAwOyBQIDwgRi5sZW5ndGg7IFArKylcbiAgICAgICAgdy5wdXNoKEZbUF0pO1xuICAgIGZvciAodmFyIHggPSAwOyB4IDwgdy5sZW5ndGg7IHgrKykge1xuICAgICAgdmFyIFQgPSB3W3hdLCBIID0gVC5kcywgQyA9IFQudmFsdWUsIEIgPSBULnR5cGU7XG4gICAgICBpZiAoSCAhPSBcInByblwiICYmIEggIT0gXCJ1dGY4XCIgJiYgSCAhPSBcImlhNVwiKVxuICAgICAgICByZXR1cm4gXCJtaXhlZFwiO1xuICAgICAgaWYgKEggPT0gXCJpYTVcIikge1xuICAgICAgICBpZiAoQiAhPSBcIkNOXCIpXG4gICAgICAgICAgcmV0dXJuIFwibWl4ZWRcIjtcbiAgICAgICAgaWYgKGEubGFuZy5TdHJpbmcuaXNNYWlsKEMpKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICByZXR1cm4gXCJtaXhlZFwiO1xuICAgICAgfVxuICAgICAgaWYgKEIgPT0gXCJDXCIpIHtcbiAgICAgICAgaWYgKEggPT0gXCJwcm5cIilcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgcmV0dXJuIFwibWl4ZWRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChFID09IG51bGwpXG4gICAgICAgIEUgPSBIO1xuICAgICAgZWxzZSBpZiAoRSAhPT0gSClcbiAgICAgICAgcmV0dXJuIFwibWl4ZWRcIjtcbiAgICB9XG4gICAgcmV0dXJuIEUgPz8gXCJwcm5cIjtcbiAgfSwgdGhpcy5nZXRBdHRyVHlwZUFuZFZhbHVlID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0gcyhtKTtcbiAgICByZXR1cm4gRChFKTtcbiAgfSwgdGhpcy5nZXRSRE4gPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSBzKG0pO1xuICAgIHJldHVybiBBKEUpO1xuICB9LCB0aGlzLmdldFg1MDBOYW1lQXJyYXkgPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSBzKG0pO1xuICAgIHJldHVybiBJKEUpO1xuICB9LCB0aGlzLmdldFg1MDBOYW1lID0gZnVuY3Rpb24obSwgRSwgdykge1xuICAgIHZhciB4ID0gdGhpcy5nZXRYNTAwTmFtZUFycmF5KG0pLCBGID0gdGhpcy5kbmFycmF5dG9zdHIoeCksIFAgPSB7IHN0cjogRiB9O1xuICAgIHJldHVybiBQLmFycmF5ID0geCwgdyA9PSAhMCAmJiAoUC5oZXggPSBtKSwgRSA9PSAhMCAmJiAoUC5jYW5vbiA9IHRoaXMuYzE0blJETkFycmF5KHgpKSwgUDtcbiAgfSwgdGhpcy5yZWFkQ2VydFBFTSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0aGlzLnJlYWRDZXJ0SGV4KGcobSkpO1xuICB9LCB0aGlzLnJlYWRDZXJ0SGV4ID0gZnVuY3Rpb24obSkge1xuICAgIHRoaXMuaGV4ID0gbSwgdGhpcy5nZXRWZXJzaW9uKCk7XG4gICAgdHJ5IHtcbiAgICAgIHkodGhpcy5oZXgsIDAsIFswLCA3XSwgXCJhM1wiKSwgdGhpcy5wYXJzZUV4dCgpO1xuICAgIH0gY2F0Y2gge1xuICAgIH1cbiAgfSwgdGhpcy5nZXRQYXJhbSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IHt9O1xuICAgIHJldHVybiBtID09IG51bGwgJiYgKG0gPSB7fSksIEUudmVyc2lvbiA9IHRoaXMuZ2V0VmVyc2lvbigpLCBFLnNlcmlhbCA9IHsgaGV4OiB0aGlzLmdldFNlcmlhbE51bWJlckhleCgpIH0sIEUuc2lnYWxnID0gdGhpcy5nZXRTaWduYXR1cmVBbGdvcml0aG1GaWVsZCgpLCBFLmlzc3VlciA9IHRoaXMuZ2V0SXNzdWVyKG0uZG5jYW5vbiwgbS5kbmhleCksIEUubm90YmVmb3JlID0gdGhpcy5nZXROb3RCZWZvcmUoKSwgRS5ub3RhZnRlciA9IHRoaXMuZ2V0Tm90QWZ0ZXIoKSwgRS5zdWJqZWN0ID0gdGhpcy5nZXRTdWJqZWN0KG0uZG5jYW5vbiwgbS5kbmhleCksIEUuc2JqcHVia2V5ID0gZGUodGhpcy5nZXRQdWJsaWNLZXlIZXgoKSwgXCJQVUJMSUMgS0VZXCIpLCB0aGlzLmFFeHRJbmZvICE9IG51bGwgJiYgdGhpcy5hRXh0SW5mby5sZW5ndGggPiAwICYmIChFLmV4dCA9IHRoaXMuZ2V0RXh0UGFyYW1BcnJheSgpKSwgRS5zaWdoZXggPSB0aGlzLmdldFNpZ25hdHVyZVZhbHVlSGV4KCksIG0udGJzaGV4ID09ICEwICYmIChFLnRic2hleCA9IHAodGhpcy5oZXgsIDAsIFswXSkpLCBtLm5vZG5hcnJheSA9PSAhMCAmJiAoZGVsZXRlIEUuaXNzdWVyLmFycmF5LCBkZWxldGUgRS5zdWJqZWN0LmFycmF5KSwgRTtcbiAgfSwgdGhpcy5nZXRFeHRQYXJhbUFycmF5ID0gZnVuY3Rpb24obSkge1xuICAgIGlmIChtID09IG51bGwpIHtcbiAgICAgIHZhciBFID0gdih0aGlzLmhleCwgMCwgWzAsIFwiWzNdXCJdKTtcbiAgICAgIEUgIT0gLTEgJiYgKG0gPSBjKHRoaXMuaGV4LCAwLCBbMCwgXCJbM11cIiwgMF0sIFwiMzBcIikpO1xuICAgIH1cbiAgICBmb3IgKHZhciB3ID0gW10sIHggPSByKG0sIDApLCBGID0gMDsgRiA8IHgubGVuZ3RoOyBGKyspIHtcbiAgICAgIHZhciBQID0gbihtLCB4W0ZdKSwgVCA9IHRoaXMuZ2V0RXh0UGFyYW0oUCk7XG4gICAgICBUICE9IG51bGwgJiYgdy5wdXNoKFQpO1xuICAgIH1cbiAgICByZXR1cm4gdztcbiAgfSwgdGhpcy5nZXRFeHRQYXJhbSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IHIobSwgMCksIHcgPSBFLmxlbmd0aDtcbiAgICBpZiAodyAhPSAyICYmIHcgIT0gMylcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIndyb25nIG51bWJlciBlbGVtZW50cyBpbiBFeHRlbnNpb246IFwiICsgdyArIFwiIFwiICsgbSk7XG4gICAgdmFyIHggPSBkKGgobSwgMCwgWzBdLCBcIjA2XCIpKSwgRiA9ICExO1xuICAgIHcgPT0gMyAmJiBwKG0sIDAsIFsxXSkgPT0gXCIwMTAxZmZcIiAmJiAoRiA9ICEwKTtcbiAgICB2YXIgUCA9IHAobSwgMCwgW3cgLSAxLCAwXSksIFQgPSB2b2lkIDA7XG4gICAgaWYgKHggPT0gXCIyLjUuMjkuMTRcIiA/IFQgPSB0aGlzLmdldEV4dFN1YmplY3RLZXlJZGVudGlmaWVyKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4xNVwiID8gVCA9IHRoaXMuZ2V0RXh0S2V5VXNhZ2UoUCwgRikgOiB4ID09IFwiMi41LjI5LjE3XCIgPyBUID0gdGhpcy5nZXRFeHRTdWJqZWN0QWx0TmFtZShQLCBGKSA6IHggPT0gXCIyLjUuMjkuMThcIiA/IFQgPSB0aGlzLmdldEV4dElzc3VlckFsdE5hbWUoUCwgRikgOiB4ID09IFwiMi41LjI5LjE5XCIgPyBUID0gdGhpcy5nZXRFeHRCYXNpY0NvbnN0cmFpbnRzKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4zMFwiID8gVCA9IHRoaXMuZ2V0RXh0TmFtZUNvbnN0cmFpbnRzKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4zMVwiID8gVCA9IHRoaXMuZ2V0RXh0Q1JMRGlzdHJpYnV0aW9uUG9pbnRzKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4zMlwiID8gVCA9IHRoaXMuZ2V0RXh0Q2VydGlmaWNhdGVQb2xpY2llcyhQLCBGKSA6IHggPT0gXCIyLjUuMjkuMzNcIiA/IFQgPSB0aGlzLmdldEV4dFBvbGljeU1hcHBpbmdzKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4zNVwiID8gVCA9IHRoaXMuZ2V0RXh0QXV0aG9yaXR5S2V5SWRlbnRpZmllcihQLCBGKSA6IHggPT0gXCIyLjUuMjkuMzZcIiA/IFQgPSB0aGlzLmdldEV4dFBvbGljeUNvbnN0cmFpbnRzKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4zN1wiID8gVCA9IHRoaXMuZ2V0RXh0RXh0S2V5VXNhZ2UoUCwgRikgOiB4ID09IFwiMi41LjI5LjU0XCIgPyBUID0gdGhpcy5nZXRFeHRJbmhpYml0QW55UG9saWN5KFAsIEYpIDogeCA9PSBcIjEuMy42LjEuNS41LjcuMS4xXCIgPyBUID0gdGhpcy5nZXRFeHRBdXRob3JpdHlJbmZvQWNjZXNzKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4yMFwiID8gVCA9IHRoaXMuZ2V0RXh0Q1JMTnVtYmVyKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4yMVwiID8gVCA9IHRoaXMuZ2V0RXh0Q1JMUmVhc29uKFAsIEYpIDogeCA9PSBcIjIuNS4yOS45XCIgPyBUID0gdGhpcy5nZXRFeHRTdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcyhQLCBGKSA6IHggPT0gXCIxLjMuNi4xLjUuNS43LjQ4LjEuMlwiID8gVCA9IHRoaXMuZ2V0RXh0T2NzcE5vbmNlKFAsIEYpIDogeCA9PSBcIjEuMy42LjEuNS41LjcuNDguMS41XCIgPyBUID0gdGhpcy5nZXRFeHRPY3NwTm9DaGVjayhQLCBGKSA6IHggPT0gXCIxLjIuODQwLjExMzU4My4xLjEuOS4xXCIgPyBUID0gdGhpcy5nZXRFeHRBZG9iZVRpbWVTdGFtcChQLCBGKSA6IEwuRVhUX1BBUlNFUlt4XSAhPSBudWxsICYmIChUID0gTC5FWFRfUEFSU0VSW3hdKHgsIEYsIFApKSwgVCAhPSBudWxsKVxuICAgICAgcmV0dXJuIFQ7XG4gICAgdmFyIEggPSB7IGV4dG5hbWU6IHgsIGV4dG46IFAgfTtcbiAgICB0cnkge1xuICAgICAgSC5leHRuID0gcyhQKTtcbiAgICB9IGNhdGNoIHtcbiAgICB9XG4gICAgcmV0dXJuIEYgJiYgKEguY3JpdGljYWwgPSAhMCksIEg7XG4gIH0sIHRoaXMuZmluZEV4dCA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICBmb3IgKHZhciB3ID0gMDsgdyA8IG0ubGVuZ3RoOyB3KyspXG4gICAgICBpZiAobVt3XS5leHRuYW1lID09IEUpXG4gICAgICAgIHJldHVybiBtW3ddO1xuICAgIHJldHVybiBudWxsO1xuICB9LCB0aGlzLnVwZGF0ZUV4dENEUEZ1bGxVUkkgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB0aGlzLmZpbmRFeHQobSwgXCJjUkxEaXN0cmlidXRpb25Qb2ludHNcIik7XG4gICAgaWYgKHcgIT0gbnVsbCAmJiB3LmFycmF5ICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIHggPSB3LmFycmF5LCBGID0gMDsgRiA8IHgubGVuZ3RoOyBGKyspXG4gICAgICAgIGlmICh4W0ZdLmRwbmFtZSAhPSBudWxsICYmIHhbRl0uZHBuYW1lLmZ1bGwgIT0gbnVsbClcbiAgICAgICAgICBmb3IgKHZhciBQID0geFtGXS5kcG5hbWUuZnVsbCwgVCA9IDA7IFQgPCBQLmxlbmd0aDsgVCsrKSB7XG4gICAgICAgICAgICB2YXIgSCA9IFBbRl07XG4gICAgICAgICAgICBILnVyaSAhPSBudWxsICYmIChILnVyaSA9IEUpO1xuICAgICAgICAgIH1cbiAgICB9XG4gIH0sIHRoaXMudXBkYXRlRXh0QUlBT0NTUCA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICB2YXIgdyA9IHRoaXMuZmluZEV4dChtLCBcImF1dGhvcml0eUluZm9BY2Nlc3NcIik7XG4gICAgaWYgKHcgIT0gbnVsbCAmJiB3LmFycmF5ICE9IG51bGwpXG4gICAgICBmb3IgKHZhciB4ID0gdy5hcnJheSwgRiA9IDA7IEYgPCB4Lmxlbmd0aDsgRisrKVxuICAgICAgICB4W0ZdLm9jc3AgIT0gbnVsbCAmJiAoeFtGXS5vY3NwID0gRSk7XG4gIH0sIHRoaXMudXBkYXRlRXh0QUlBQ0FJc3N1ZXIgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB0aGlzLmZpbmRFeHQobSwgXCJhdXRob3JpdHlJbmZvQWNjZXNzXCIpO1xuICAgIGlmICh3ICE9IG51bGwgJiYgdy5hcnJheSAhPSBudWxsKVxuICAgICAgZm9yICh2YXIgeCA9IHcuYXJyYXksIEYgPSAwOyBGIDwgeC5sZW5ndGg7IEYrKylcbiAgICAgICAgeFtGXS5jYWlzc3VlciAhPSBudWxsICYmICh4W0ZdLmNhaXNzdWVyID0gRSk7XG4gIH0sIHRoaXMuZG5hcnJheXRvc3RyID0gZnVuY3Rpb24obSkge1xuICAgIGZ1bmN0aW9uIEUoeCkge1xuICAgICAgcmV0dXJuIHgubWFwKGZ1bmN0aW9uKEYpIHtcbiAgICAgICAgcmV0dXJuIHcoRikucmVwbGFjZSgvXFwrLywgXCJcXFxcK1wiKTtcbiAgICAgIH0pLmpvaW4oXCIrXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB3KHgpIHtcbiAgICAgIHJldHVybiB4LnR5cGUgKyBcIj1cIiArIHgudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBcIi9cIiArIG0ubWFwKGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBFKHgpLnJlcGxhY2UoL1xcLy8sIFwiXFxcXC9cIik7XG4gICAgfSkuam9pbihcIi9cIik7XG4gIH0sIHRoaXMuc2V0Q2Fub25pY2FsaXplZEROID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFO1xuICAgIGlmIChtLnN0ciAhPSBudWxsICYmIG0uYXJyYXkgPT0gbnVsbCkge1xuICAgICAgdmFyIHcgPSBuZXcgYS5hc24xLng1MDkuWDUwME5hbWUoeyBzdHI6IG0uc3RyIH0pLCB4ID0gdy50b2hleCgpO1xuICAgICAgRSA9IHRoaXMuZ2V0WDUwME5hbWVBcnJheSh4KTtcbiAgICB9IGVsc2VcbiAgICAgIEUgPSBtLmFycmF5O1xuICAgIG0uY2Fub24gPT0gbnVsbCAmJiAobS5jYW5vbiA9IHRoaXMuYzE0blJETkFycmF5KEUpKTtcbiAgfSwgdGhpcy5jMTRuUkROQXJyYXkgPSBmdW5jdGlvbihtKSB7XG4gICAgZm9yICh2YXIgRSA9IFtdLCB3ID0gMDsgdyA8IG0ubGVuZ3RoOyB3KyspIHtcbiAgICAgIGZvciAodmFyIHggPSBtW3ddLCBGID0gW10sIFAgPSAwOyBQIDwgeC5sZW5ndGg7IFArKykge1xuICAgICAgICB2YXIgVCA9IHhbUF0sIEggPSBULnZhbHVlO1xuICAgICAgICBIID0gSC5yZXBsYWNlKC9eXFxzKi8sIFwiXCIpLCBIID0gSC5yZXBsYWNlKC9cXHMqJC8sIFwiXCIpLCBIID0gSC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKSwgSCA9IEgudG9Mb3dlckNhc2UoKSwgRi5wdXNoKFQudHlwZS50b0xvd2VyQ2FzZSgpICsgXCI9XCIgKyBIKTtcbiAgICAgIH1cbiAgICAgIEUucHVzaChGLmpvaW4oXCIrXCIpKTtcbiAgICB9XG4gICAgcmV0dXJuIFwiL1wiICsgRS5qb2luKFwiL1wiKTtcbiAgfSwgdGhpcy5nZXRJbmZvID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG0gPSBmdW5jdGlvbihjZSkge1xuICAgICAgZm9yICh2YXIgTSA9IFwiXCIsIEcgPSBcIiAgICBcIiwgUSA9IGBcbmAsIGVlID0gY2UuYXJyYXksIHBlID0gMDsgcGUgPCBlZS5sZW5ndGg7IHBlKyspIHtcbiAgICAgICAgdmFyIHRlID0gZWVbcGVdO1xuICAgICAgICBpZiAodGUuZG4gIT0gbnVsbCAmJiAoTSArPSBHICsgXCJkbjogXCIgKyB0ZS5kbi5zdHIgKyBRKSwgdGUuaXAgIT0gbnVsbCAmJiAoTSArPSBHICsgXCJpcDogXCIgKyB0ZS5pcCArIFEpLCB0ZS5yZmM4MjIgIT0gbnVsbCAmJiAoTSArPSBHICsgXCJyZmM4MjI6IFwiICsgdGUucmZjODIyICsgUSksIHRlLmRucyAhPSBudWxsICYmIChNICs9IEcgKyBcImRuczogXCIgKyB0ZS5kbnMgKyBRKSwgdGUudXJpICE9IG51bGwgJiYgKE0gKz0gRyArIFwidXJpOiBcIiArIHRlLnVyaSArIFEpLCB0ZS5vdGhlciAhPSBudWxsKSB7XG4gICAgICAgICAgdmFyIE1lID0gdGUub3RoZXIub2lkLCBOZSA9IEpTT04uc3RyaW5naWZ5KHRlLm90aGVyLnZhbHVlKS5yZXBsYWNlKC9cXFwiL2csIFwiXCIpO1xuICAgICAgICAgIE0gKz0gRyArIFwib3RoZXI6IFwiICsgTWUgKyBcIj1cIiArIE5lICsgUTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIE0gPSBNLnJlcGxhY2UoL1xcbiQvLCBcIlwiKSwgTTtcbiAgICB9LCBFID0gZnVuY3Rpb24oY2UpIHtcbiAgICAgIGZvciAodmFyIE0gPSBcIlwiLCBHID0gY2UuYXJyYXksIFEgPSAwOyBRIDwgRy5sZW5ndGg7IFErKykge1xuICAgICAgICB2YXIgZWUgPSBHW1FdO1xuICAgICAgICBpZiAoTSArPSBcIiAgICBwb2xpY3kgb2lkOiBcIiArIGVlLnBvbGljeW9pZCArIGBcbmAsIGVlLmFycmF5ICE9PSB2b2lkIDApXG4gICAgICAgICAgZm9yICh2YXIgcGUgPSAwOyBwZSA8IGVlLmFycmF5Lmxlbmd0aDsgcGUrKykge1xuICAgICAgICAgICAgdmFyIHRlID0gZWUuYXJyYXlbcGVdO1xuICAgICAgICAgICAgdGUuY3BzICE9PSB2b2lkIDAgJiYgKE0gKz0gXCIgICAgY3BzOiBcIiArIHRlLmNwcyArIGBcbmApO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBNO1xuICAgIH0sIHcgPSBmdW5jdGlvbihjZSkge1xuICAgICAgZm9yICh2YXIgTSA9IFwiXCIsIEcgPSBjZS5hcnJheSwgUSA9IDA7IFEgPCBHLmxlbmd0aDsgUSsrKSB7XG4gICAgICAgIHZhciBlZSA9IEdbUV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZWUuZHBuYW1lLmZ1bGxbMF0udXJpICE9PSB2b2lkIDAgJiYgKE0gKz0gXCIgICAgXCIgKyBlZS5kcG5hbWUuZnVsbFswXS51cmkgKyBgXG5gKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBlZS5kbmFtZS5mdWxsWzBdLmRuLmhleCAhPT0gdm9pZCAwICYmIChNICs9IFwiICAgIFwiICsgTC5oZXgyZG4oZWUuZHBuYW1lLmZ1bGxbMF0uZG4uaGV4KSArIGBcbmApO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIE07XG4gICAgfSwgeCA9IGZ1bmN0aW9uKGNlKSB7XG4gICAgICBmb3IgKHZhciBNID0gXCJcIiwgRyA9IGNlLmFycmF5LCBRID0gMDsgUSA8IEcubGVuZ3RoOyBRKyspIHtcbiAgICAgICAgdmFyIGVlID0gR1tRXTtcbiAgICAgICAgZWUuY2Fpc3N1ZXIgIT09IHZvaWQgMCAmJiAoTSArPSBcIiAgICBjYWlzc3VlcjogXCIgKyBlZS5jYWlzc3VlciArIGBcbmApLCBlZS5vY3NwICE9PSB2b2lkIDAgJiYgKE0gKz0gXCIgICAgb2NzcDogXCIgKyBlZS5vY3NwICsgYFxuYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gTTtcbiAgICB9LCBGLCBQLCBUO1xuICAgIGlmIChGID0gYEJhc2ljIEZpZWxkc1xuYCwgRiArPSBcIiAgc2VyaWFsIG51bWJlcjogXCIgKyB0aGlzLmdldFNlcmlhbE51bWJlckhleCgpICsgYFxuYCwgRiArPSBcIiAgc2lnbmF0dXJlIGFsZ29yaXRobTogXCIgKyB0aGlzLmdldFNpZ25hdHVyZUFsZ29yaXRobUZpZWxkKCkgKyBgXG5gLCBGICs9IFwiICBpc3N1ZXI6IFwiICsgdGhpcy5nZXRJc3N1ZXJTdHJpbmcoKSArIGBcbmAsIEYgKz0gXCIgIG5vdEJlZm9yZTogXCIgKyB0aGlzLmdldE5vdEJlZm9yZSgpICsgYFxuYCwgRiArPSBcIiAgbm90QWZ0ZXI6IFwiICsgdGhpcy5nZXROb3RBZnRlcigpICsgYFxuYCwgRiArPSBcIiAgc3ViamVjdDogXCIgKyB0aGlzLmdldFN1YmplY3RTdHJpbmcoKSArIGBcbmAsIEYgKz0gYCAgc3ViamVjdCBwdWJsaWMga2V5IGluZm86IFxuYCwgUCA9IHRoaXMuZ2V0UHVibGljS2V5KCksIEYgKz0gXCIgICAga2V5IGFsZ29yaXRobTogXCIgKyBQLnR5cGUgKyBgXG5gLCBQLnR5cGUgPT09IFwiUlNBXCIgJiYgKEYgKz0gXCIgICAgbj1cIiArIHh0KFAubi50b1N0cmluZygxNikpLnN1YnN0cigwLCAxNikgKyBgLi4uXG5gLCBGICs9IFwiICAgIGU9XCIgKyB4dChQLmUudG9TdHJpbmcoMTYpKSArIGBcbmApLCBUID0gdGhpcy5hRXh0SW5mbywgVCAhPSBudWxsKSB7XG4gICAgICBGICs9IGBYNTA5djMgRXh0ZW5zaW9uczpcbmA7XG4gICAgICBmb3IgKHZhciBIID0gMDsgSCA8IFQubGVuZ3RoOyBIKyspIHtcbiAgICAgICAgdmFyIEMgPSBUW0hdLCBCID0gYS5hc24xLng1MDkuT0lELm9pZDJuYW1lKEMub2lkKTtcbiAgICAgICAgQiA9PT0gXCJcIiAmJiAoQiA9IEMub2lkKTtcbiAgICAgICAgdmFyIE8gPSBcIlwiO1xuICAgICAgICBpZiAoQy5jcml0aWNhbCA9PT0gITAgJiYgKE8gPSBcIkNSSVRJQ0FMXCIpLCBGICs9IFwiICBcIiArIEIgKyBcIiBcIiArIE8gKyBgOlxuYCwgQiA9PT0gXCJiYXNpY0NvbnN0cmFpbnRzXCIpIHtcbiAgICAgICAgICB2YXIgaiA9IHRoaXMuZ2V0RXh0QmFzaWNDb25zdHJhaW50cygpO1xuICAgICAgICAgIGouY0EgPT09IHZvaWQgMCA/IEYgKz0gYCAgICB7fVxuYCA6IChGICs9IFwiICAgIGNBPXRydWVcIiwgai5wYXRoTGVuICE9PSB2b2lkIDAgJiYgKEYgKz0gXCIsIHBhdGhMZW49XCIgKyBqLnBhdGhMZW4pLCBGICs9IGBcbmApO1xuICAgICAgICB9IGVsc2UgaWYgKEIgPT0gXCJwb2xpY3lNYXBwaW5nc1wiKSB7XG4gICAgICAgICAgdmFyIGZlID0gdGhpcy5nZXRFeHRQb2xpY3lNYXBwaW5ncygpLmFycmF5LCBaID0gZmUubWFwKGZ1bmN0aW9uKGNlKSB7XG4gICAgICAgICAgICB2YXIgTSA9IGNlO1xuICAgICAgICAgICAgcmV0dXJuIE1bMF0gKyBcIjpcIiArIE1bMV07XG4gICAgICAgICAgfSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgIEYgKz0gXCIgICAgXCIgKyBaICsgYFxuYDtcbiAgICAgICAgfSBlbHNlIGlmIChCID09IFwicG9saWN5Q29uc3RyYWludHNcIikge1xuICAgICAgICAgIHZhciBYID0gdGhpcy5nZXRFeHRQb2xpY3lDb25zdHJhaW50cygpO1xuICAgICAgICAgIEYgKz0gXCIgICAgXCIsIFgucmVxZXhwICE9IG51bGwgJiYgKEYgKz0gXCIgcmVxZXhwPVwiICsgWC5yZXFleHApLCBYLmluaGliaXQgIT0gbnVsbCAmJiAoRiArPSBcIiBpbmhpYml0PVwiICsgWC5pbmhpYml0KSwgRiArPSBgXG5gO1xuICAgICAgICB9IGVsc2UgaWYgKEIgPT0gXCJpbmhpYml0QW55UG9saWN5XCIpIHtcbiAgICAgICAgICB2YXIgWCA9IHRoaXMuZ2V0RXh0SW5oaWJpdEFueVBvbGljeSgpO1xuICAgICAgICAgIEYgKz0gXCIgICAgc2tpcD1cIiArIFguc2tpcCArIGBcbmA7XG4gICAgICAgIH0gZWxzZSBpZiAoQiA9PSBcImtleVVzYWdlXCIpXG4gICAgICAgICAgRiArPSBcIiAgICBcIiArIHRoaXMuZ2V0RXh0S2V5VXNhZ2VTdHJpbmcoKSArIGBcbmA7XG4gICAgICAgIGVsc2UgaWYgKEIgPT0gXCJzdWJqZWN0S2V5SWRlbnRpZmllclwiKVxuICAgICAgICAgIEYgKz0gXCIgICAgXCIgKyB0aGlzLmdldEV4dFN1YmplY3RLZXlJZGVudGlmaWVyKCkua2lkLmhleCArIGBcbmA7XG4gICAgICAgIGVsc2UgaWYgKEIgPT0gXCJhdXRob3JpdHlLZXlJZGVudGlmaWVyXCIpIHtcbiAgICAgICAgICB2YXIgcmUgPSB0aGlzLmdldEV4dEF1dGhvcml0eUtleUlkZW50aWZpZXIoKTtcbiAgICAgICAgICByZS5raWQgIT09IHZvaWQgMCAmJiAoRiArPSBcIiAgICBraWQ9XCIgKyByZS5raWQuaGV4ICsgYFxuYCk7XG4gICAgICAgIH0gZWxzZSBpZiAoQiA9PSBcImV4dEtleVVzYWdlXCIpIHtcbiAgICAgICAgICB2YXIgbmUgPSB0aGlzLmdldEV4dEV4dEtleVVzYWdlKCkuYXJyYXk7XG4gICAgICAgICAgRiArPSBcIiAgICBcIiArIG5lLmpvaW4oXCIsIFwiKSArIGBcbmA7XG4gICAgICAgIH0gZWxzZSBpZiAoQiA9PSBcInN1YmplY3RBbHROYW1lXCIpIHtcbiAgICAgICAgICB2YXIgaGUgPSBtKHRoaXMuZ2V0RXh0U3ViamVjdEFsdE5hbWUoKSk7XG4gICAgICAgICAgRiArPSBoZSArIGBcbmA7XG4gICAgICAgIH0gZWxzZSBpZiAoQiA9PSBcImNSTERpc3RyaWJ1dGlvblBvaW50c1wiKSB7XG4gICAgICAgICAgdmFyIHNlID0gdGhpcy5nZXRFeHRDUkxEaXN0cmlidXRpb25Qb2ludHMoKTtcbiAgICAgICAgICBGICs9IHcoc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKEIgPT0gXCJhdXRob3JpdHlJbmZvQWNjZXNzXCIpIHtcbiAgICAgICAgICB2YXIga2UgPSB0aGlzLmdldEV4dEF1dGhvcml0eUluZm9BY2Nlc3MoKTtcbiAgICAgICAgICBGICs9IHgoa2UpO1xuICAgICAgICB9IGVsc2VcbiAgICAgICAgICBCID09IFwiY2VydGlmaWNhdGVQb2xpY2llc1wiICYmIChGICs9IEUodGhpcy5nZXRFeHRDZXJ0aWZpY2F0ZVBvbGljaWVzKCkpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIEYgKz0gXCJzaWduYXR1cmUgYWxnb3JpdGhtOiBcIiArIHRoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtTmFtZSgpICsgYFxuYCwgRiArPSBcInNpZ25hdHVyZTogXCIgKyB0aGlzLmdldFNpZ25hdHVyZVZhbHVlSGV4KCkuc3Vic3RyKDAsIDE2KSArIGAuLi5cbmAsIEY7XG4gIH0sIHR5cGVvZiBlID09IFwic3RyaW5nXCIgJiYgKGUuaW5kZXhPZihcIi0tLS0tQkVHSU5cIikgIT0gLTEgPyB0aGlzLnJlYWRDZXJ0UEVNKGUpIDogYS5sYW5nLlN0cmluZy5pc0hleChlKSAmJiB0aGlzLnJlYWRDZXJ0SGV4KGUpKTtcbn1cbkwuRVhUX1BBUlNFUiA9IHt9O1xuTC5yZWdpc3RFeHRQYXJzZXIgPSBmdW5jdGlvbihlLCB0KSB7XG4gIEwuRVhUX1BBUlNFUltlXSA9IHQ7XG59O1xuTC5oZXgyZG4gPSBmdW5jdGlvbihlLCB0KSB7XG4gIHQgPT09IHZvaWQgMCAmJiAodCA9IDApO1xuICB2YXIgciA9IG5ldyBMKCk7XG4gIFYuZ2V0VExWKGUsIHQpO1xuICB2YXIgaSA9IHIuZ2V0WDUwME5hbWUoZSk7XG4gIHJldHVybiBpLnN0cjtcbn07XG5MLmhleDJyZG4gPSBmdW5jdGlvbihlLCB0KSB7XG4gIGlmICh0ID09PSB2b2lkIDAgJiYgKHQgPSAwKSwgZS5zdWJzdHIodCwgMikgIT09IFwiMzFcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUkROXCIpO1xuICBmb3IgKHZhciByID0gbmV3IEFycmF5KCksIGkgPSBWLmdldENoaWxkSWR4KGUsIHQpLCBzID0gMDsgcyA8IGkubGVuZ3RoOyBzKyspXG4gICAgci5wdXNoKEwuaGV4MmF0dHJUeXBlVmFsdWUoZSwgaVtzXSkpO1xuICByZXR1cm4gciA9IHIubWFwKGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gbi5yZXBsYWNlKFwiK1wiLCBcIlxcXFwrXCIpO1xuICB9KSwgci5qb2luKFwiK1wiKTtcbn07XG5MLmhleDJhdHRyVHlwZVZhbHVlID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IFYsIGkgPSByLmdldFY7XG4gIGlmICh0ID09PSB2b2lkIDAgJiYgKHQgPSAwKSwgZS5zdWJzdHIodCwgMikgIT09IFwiMzBcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgYXR0cmlidXRlIHR5cGUgYW5kIHZhbHVlXCIpO1xuICB2YXIgcyA9IHIuZ2V0Q2hpbGRJZHgoZSwgdCk7XG4gIHMubGVuZ3RoICE9PSAyIHx8IGUuc3Vic3RyKHNbMF0sIDIpO1xuICB2YXIgbiA9IGkoZSwgc1swXSksIGggPSBhLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQobiksIHUgPSBhLmFzbjEueDUwOS5PSUQub2lkMmF0eXBlKGgpLCBwID0gaShlLCBzWzFdKSwgYyA9IEFlKHApO1xuICByZXR1cm4gdSArIFwiPVwiICsgYztcbn07XG5MLmdldFB1YmxpY0tleUZyb21DZXJ0SGV4ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IG5ldyBMKCk7XG4gIHJldHVybiB0LnJlYWRDZXJ0SGV4KGUpLCB0LmdldFB1YmxpY0tleSgpO1xufTtcbkwuZ2V0UHVibGljS2V5RnJvbUNlcnRQRU0gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gbmV3IEwoKTtcbiAgcmV0dXJuIHQucmVhZENlcnRQRU0oZSksIHQuZ2V0UHVibGljS2V5KCk7XG59O1xuTC5nZXRQdWJsaWNLZXlJbmZvUHJvcE9mQ2VydFBFTSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWLCByID0gdC5nZXRWYnlMaXN0LCBpID0ge30sIHMsIG47XG4gIHJldHVybiBpLmFsZ3BhcmFtID0gbnVsbCwgcyA9IG5ldyBMKCksIHMucmVhZENlcnRQRU0oZSksIG4gPSBzLmdldFB1YmxpY0tleUhleCgpLCBpLmtleWhleCA9IHIobiwgMCwgWzFdLCBcIjAzXCIpLnN1YnN0cigyKSwgaS5hbGdvaWQgPSByKG4sIDAsIFswLCAwXSwgXCIwNlwiKSwgaS5hbGdvaWQgPT09IFwiMmE4NjQ4Y2UzZDAyMDFcIiAmJiAoaS5hbGdwYXJhbSA9IHIobiwgMCwgWzAsIDFdLCBcIjA2XCIpKSwgaTtcbn07XG5MLktFWVVTQUdFX05BTUUgPSBbXCJkaWdpdGFsU2lnbmF0dXJlXCIsIFwibm9uUmVwdWRpYXRpb25cIiwgXCJrZXlFbmNpcGhlcm1lbnRcIiwgXCJkYXRhRW5jaXBoZXJtZW50XCIsIFwia2V5QWdyZWVtZW50XCIsIFwia2V5Q2VydFNpZ25cIiwgXCJjUkxTaWduXCIsIFwiZW5jaXBoZXJPbmx5XCIsIFwiZGVjaXBoZXJPbmx5XCJdO1xuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmp3cyA+IFwidVwiIHx8ICFhLmp3cykgJiYgKGEuandzID0ge30pO1xuYS5qd3MuSldTID0gZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gYSwgdCA9IGUuandzLkpXUywgciA9IHQuaXNTYWZlSlNPTlN0cmluZztcbiAgdGhpcy5wYXJzZUpXUyA9IGZ1bmN0aW9uKGksIHMpIHtcbiAgICBpZiAoISh0aGlzLnBhcnNlZEpXUyAhPT0gdm9pZCAwICYmIChzIHx8IHRoaXMucGFyc2VkSldTLnNpZ3ZhbEggIT09IHZvaWQgMCkpKSB7XG4gICAgICB2YXIgbiA9IGkubWF0Y2goL14oW14uXSspXFwuKFteLl0rKVxcLihbXi5dKykkLyk7XG4gICAgICBpZiAobiA9PSBudWxsKVxuICAgICAgICB0aHJvdyBcIkpXUyBzaWduYXR1cmUgaXMgbm90IGEgZm9ybSBvZiAnSGVhZC5QYXlsb2FkLlNpZ1ZhbHVlJy5cIjtcbiAgICAgIHZhciBoID0gblsxXSwgdSA9IG5bMl0sIHAgPSBuWzNdLCBjID0gaCArIFwiLlwiICsgdTtcbiAgICAgIGlmICh0aGlzLnBhcnNlZEpXUyA9IHt9LCB0aGlzLnBhcnNlZEpXUy5oZWFkQjY0VSA9IGgsIHRoaXMucGFyc2VkSldTLnBheWxvYWRCNjRVID0gdSwgdGhpcy5wYXJzZWRKV1Muc2lndmFsQjY0VSA9IHAsIHRoaXMucGFyc2VkSldTLnNpID0gYywgIXMpIHtcbiAgICAgICAgdmFyIHkgPSBZKHApLCB2ID0gdmUoeSwgMTYpO1xuICAgICAgICB0aGlzLnBhcnNlZEpXUy5zaWd2YWxIID0geSwgdGhpcy5wYXJzZWRKV1Muc2lndmFsQkkgPSB2O1xuICAgICAgfVxuICAgICAgdmFyIG8gPSB3ZShoKSwgbCA9IHdlKHUpO1xuICAgICAgaWYgKHRoaXMucGFyc2VkSldTLmhlYWRTID0gbywgdGhpcy5wYXJzZWRKV1MucGF5bG9hZFMgPSBsLCAhcihvLCB0aGlzLnBhcnNlZEpXUywgXCJoZWFkUFwiKSlcbiAgICAgICAgdGhyb3cgXCJtYWxmb3JtZWQgSlNPTiBzdHJpbmcgZm9yIEpXUyBIZWFkOiBcIiArIG87XG4gICAgfVxuICB9O1xufTtcbmEuandzLkpXUy5zaWduID0gZnVuY3Rpb24oZSwgdCwgciwgaSwgcykge1xuICB2YXIgbiA9IGEsIGggPSBuLmp3cywgdSA9IGguSldTLCBwID0gdS5yZWFkU2FmZUpTT05TdHJpbmcsIGMgPSB1LmlzU2FmZUpTT05TdHJpbmcsIHkgPSBuLmNyeXB0bztcbiAgeS5FQ0RTQTtcbiAgdmFyIHYgPSB5Lk1hYywgbyA9IHkuU2lnbmF0dXJlLCBsID0gSlNPTiwgZiwgZCwgZztcbiAgaWYgKHR5cGVvZiB0ICE9IFwic3RyaW5nXCIgJiYgdHlwZW9mIHQgIT0gXCJvYmplY3RcIilcbiAgICB0aHJvdyBcInNwSGVhZGVyIG11c3QgYmUgSlNPTiBzdHJpbmcgb3Igb2JqZWN0OiBcIiArIHQ7XG4gIGlmICh0eXBlb2YgdCA9PSBcIm9iamVjdFwiICYmIChkID0gdCwgZiA9IGwuc3RyaW5naWZ5KGQpKSwgdHlwZW9mIHQgPT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChmID0gdCwgIWMoZikpXG4gICAgICB0aHJvdyBcIkpXUyBIZWFkIGlzIG5vdCBzYWZlIEpTT04gc3RyaW5nOiBcIiArIGY7XG4gICAgZCA9IHAoZik7XG4gIH1cbiAgaWYgKGcgPSByLCB0eXBlb2YgciA9PSBcIm9iamVjdFwiICYmIChnID0gbC5zdHJpbmdpZnkocikpLCAoZSA9PSBcIlwiIHx8IGUgPT0gbnVsbCkgJiYgZC5hbGcgIT09IHZvaWQgMCAmJiAoZSA9IGQuYWxnKSwgZSAhPSBcIlwiICYmIGUgIT0gbnVsbCAmJiBkLmFsZyA9PT0gdm9pZCAwICYmIChkLmFsZyA9IGUsIGYgPSBsLnN0cmluZ2lmeShkKSksIGUgIT09IGQuYWxnKVxuICAgIHRocm93IFwiYWxnIGFuZCBzSGVhZGVyLmFsZyBkb2Vzbid0IG1hdGNoOiBcIiArIGUgKyBcIiE9XCIgKyBkLmFsZztcbiAgdmFyIFMgPSBudWxsO1xuICBpZiAodS5qd3NhbGcyc2lnYWxnW2VdID09PSB2b2lkIDApXG4gICAgdGhyb3cgXCJ1bnN1cHBvcnRlZCBhbGcgbmFtZTogXCIgKyBlO1xuICBTID0gdS5qd3NhbGcyc2lnYWxnW2VdO1xuICB2YXIgYiA9IEplKGYpLCBEID0gSmUoZyksIEEgPSBiICsgXCIuXCIgKyBELCBJID0gXCJcIjtcbiAgaWYgKFMuc3Vic3RyKDAsIDQpID09IFwiSG1hY1wiKSB7XG4gICAgaWYgKGkgPT09IHZvaWQgMClcbiAgICAgIHRocm93IFwibWFjIGtleSBzaGFsbCBiZSBzcGVjaWZpZWQgZm9yIEhTKiBhbGdcIjtcbiAgICB2YXIgbSA9IG5ldyB2KHsgYWxnOiBTLCBwcm92OiBcImNyeXB0b2pzXCIsIHBhc3M6IGkgfSk7XG4gICAgbS51cGRhdGVTdHJpbmcoQSksIEkgPSBtLmRvRmluYWwoKTtcbiAgfSBlbHNlIGlmIChTLmluZGV4T2YoXCJ3aXRoRUNEU0FcIikgIT0gLTEpIHtcbiAgICB2YXIgRSA9IG5ldyBvKHsgYWxnOiBTIH0pO1xuICAgIEUuaW5pdChpLCBzKSwgRS51cGRhdGVTdHJpbmcoQSk7XG4gICAgdmFyIHcgPSBFLnNpZ24oKTtcbiAgICBJID0gYS5jcnlwdG8uRUNEU0EuYXNuMVNpZ1RvQ29uY2F0U2lnKHcpO1xuICB9IGVsc2UgaWYgKFMgIT0gXCJub25lXCIpIHtcbiAgICB2YXIgRSA9IG5ldyBvKHsgYWxnOiBTIH0pO1xuICAgIEUuaW5pdChpLCBzKSwgRS51cGRhdGVTdHJpbmcoQSksIEkgPSBFLnNpZ24oKTtcbiAgfVxuICB2YXIgeCA9IGFlKEkpO1xuICByZXR1cm4gQSArIFwiLlwiICsgeDtcbn07XG5hLmp3cy5KV1MudmVyaWZ5ID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICB2YXIgaSA9IGEsIHMgPSBpLmp3cywgbiA9IHMuSldTLCBoID0gbi5yZWFkU2FmZUpTT05TdHJpbmcsIHUgPSBpLmNyeXB0bywgcCA9IHUuRUNEU0EsIGMgPSB1Lk1hYywgeSA9IHUuU2lnbmF0dXJlLCB2O1xuICBpZiAodHlwZW9mIHEgIT09IHZvaWQgMCAmJiAodiA9IHEpLCAhSHQoZSkpXG4gICAgcmV0dXJuICExO1xuICB2YXIgbyA9IGUuc3BsaXQoXCIuXCIpO1xuICBpZiAoby5sZW5ndGggIT09IDMpXG4gICAgcmV0dXJuICExO1xuICB2YXIgbCA9IG9bMF0sIGYgPSBvWzFdLCBkID0gbCArIFwiLlwiICsgZiwgZyA9IFkob1syXSksIFMgPSBoKHdlKG9bMF0pKSwgYiA9IG51bGwsIEQgPSBudWxsO1xuICBpZiAoUy5hbGcgPT09IHZvaWQgMClcbiAgICB0aHJvdyBcImFsZ29yaXRobSBub3Qgc3BlY2lmaWVkIGluIGhlYWRlclwiO1xuICBpZiAoYiA9IFMuYWxnLCBEID0gYi5zdWJzdHIoMCwgMiksIHIgIT0gbnVsbCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocikgPT09IFwiW29iamVjdCBBcnJheV1cIiAmJiByLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgQSA9IFwiOlwiICsgci5qb2luKFwiOlwiKSArIFwiOlwiO1xuICAgIGlmIChBLmluZGV4T2YoXCI6XCIgKyBiICsgXCI6XCIpID09IC0xKVxuICAgICAgdGhyb3cgXCJhbGdvcml0aG0gJ1wiICsgYiArIFwiJyBub3QgYWNjZXB0ZWQgaW4gdGhlIGxpc3RcIjtcbiAgfVxuICBpZiAoYiAhPSBcIm5vbmVcIiAmJiB0ID09PSBudWxsKVxuICAgIHRocm93IFwia2V5IHNoYWxsIGJlIHNwZWNpZmllZCB0byB2ZXJpZnkuXCI7XG4gIGlmICh0eXBlb2YgdCA9PSBcInN0cmluZ1wiICYmIHQuaW5kZXhPZihcIi0tLS0tQkVHSU4gXCIpICE9IC0xICYmICh0ID0gay5nZXRLZXkodCkpLCAoRCA9PSBcIlJTXCIgfHwgRCA9PSBcIlBTXCIpICYmICEodCBpbnN0YW5jZW9mIHYpKVxuICAgIHRocm93IFwia2V5IHNoYWxsIGJlIGEgUlNBS2V5IG9iaiBmb3IgUlMqIGFuZCBQUyogYWxnc1wiO1xuICBpZiAoRCA9PSBcIkVTXCIgJiYgISh0IGluc3RhbmNlb2YgcCkpXG4gICAgdGhyb3cgXCJrZXkgc2hhbGwgYmUgYSBFQ0RTQSBvYmogZm9yIEVTKiBhbGdzXCI7XG4gIHZhciBJID0gbnVsbDtcbiAgaWYgKG4uandzYWxnMnNpZ2FsZ1tTLmFsZ10gPT09IHZvaWQgMClcbiAgICB0aHJvdyBcInVuc3VwcG9ydGVkIGFsZyBuYW1lOiBcIiArIGI7XG4gIGlmIChJID0gbi5qd3NhbGcyc2lnYWxnW2JdLCBJID09IFwibm9uZVwiKVxuICAgIHRocm93IFwibm90IHN1cHBvcnRlZFwiO1xuICBpZiAoSS5zdWJzdHIoMCwgNCkgPT0gXCJIbWFjXCIpIHtcbiAgICB2YXIgbSA9IG51bGw7XG4gICAgaWYgKHQgPT09IHZvaWQgMClcbiAgICAgIHRocm93IFwiaGV4YWRlY2ltYWwga2V5IHNoYWxsIGJlIHNwZWNpZmllZCBmb3IgSE1BQ1wiO1xuICAgIHZhciBFID0gbmV3IGMoeyBhbGc6IEksIHBhc3M6IHQgfSk7XG4gICAgcmV0dXJuIEUudXBkYXRlU3RyaW5nKGQpLCBtID0gRS5kb0ZpbmFsKCksIGcgPT0gbTtcbiAgfSBlbHNlIGlmIChJLmluZGV4T2YoXCJ3aXRoRUNEU0FcIikgIT0gLTEpIHtcbiAgICB2YXIgdyA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHcgPSBwLmNvbmNhdFNpZ1RvQVNOMVNpZyhnKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgdmFyIHggPSBuZXcgeSh7IGFsZzogSSB9KTtcbiAgICByZXR1cm4geC5pbml0KHQpLCB4LnVwZGF0ZVN0cmluZyhkKSwgeC52ZXJpZnkodyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHggPSBuZXcgeSh7IGFsZzogSSB9KTtcbiAgICByZXR1cm4geC5pbml0KHQpLCB4LnVwZGF0ZVN0cmluZyhkKSwgeC52ZXJpZnkoZyk7XG4gIH1cbn07XG5hLmp3cy5KV1MucGFyc2UgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gZS5zcGxpdChcIi5cIiksIHIgPSB7fSwgaSwgcywgbjtcbiAgaWYgKHQubGVuZ3RoICE9IDIgJiYgdC5sZW5ndGggIT0gMylcbiAgICB0aHJvdyBcIm1hbGZvcm1lZCBzSldTOiB3cm9uZyBudW1iZXIgb2YgJy4nIHNwbGl0dGVkIGVsZW1lbnRzXCI7XG4gIHJldHVybiBpID0gdFswXSwgcyA9IHRbMV0sIHQubGVuZ3RoID09IDMgJiYgKG4gPSB0WzJdKSwgci5oZWFkZXJPYmogPSBhLmp3cy5KV1MucmVhZFNhZmVKU09OU3RyaW5nKHdlKGkpKSwgci5wYXlsb2FkT2JqID0gYS5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyh3ZShzKSksIHIuaGVhZGVyUFAgPSBKU09OLnN0cmluZ2lmeShyLmhlYWRlck9iaiwgbnVsbCwgXCIgIFwiKSwgci5wYXlsb2FkT2JqID09IG51bGwgPyByLnBheWxvYWRQUCA9IHdlKHMpIDogci5wYXlsb2FkUFAgPSBKU09OLnN0cmluZ2lmeShyLnBheWxvYWRPYmosIG51bGwsIFwiICBcIiksIG4gIT09IHZvaWQgMCAmJiAoci5zaWdIZXggPSBZKG4pKSwgcjtcbn07XG5hLmp3cy5KV1MudmVyaWZ5SldUID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICB2YXIgaSA9IGEsIHMgPSBpLmp3cywgbiA9IHMuSldTLCBoID0gbi5yZWFkU2FmZUpTT05TdHJpbmcsIHUgPSBuLmluQXJyYXksIHAgPSBuLmluY2x1ZGVkQXJyYXk7XG4gIGlmICghSHQoZSkpXG4gICAgcmV0dXJuICExO1xuICB2YXIgYyA9IGUuc3BsaXQoXCIuXCIpO1xuICBpZiAoYy5sZW5ndGggIT0gMylcbiAgICByZXR1cm4gITE7XG4gIHZhciB5ID0gY1swXSwgdiA9IGNbMV07XG4gIFkoY1syXSk7XG4gIHZhciBvID0gaCh3ZSh5KSksIGwgPSBoKHdlKHYpKTtcbiAgaWYgKG8uYWxnID09PSB2b2lkIDApXG4gICAgcmV0dXJuICExO1xuICBpZiAoci5hbGcgPT09IHZvaWQgMClcbiAgICB0aHJvdyBcImFjY2VwdEZpZWxkLmFsZyBzaGFsbCBiZSBzcGVjaWZpZWRcIjtcbiAgaWYgKCF1KG8uYWxnLCByLmFsZykgfHwgbC5pc3MgIT09IHZvaWQgMCAmJiB0eXBlb2Ygci5pc3MgPT0gXCJvYmplY3RcIiAmJiAhdShsLmlzcywgci5pc3MpIHx8IGwuc3ViICE9PSB2b2lkIDAgJiYgdHlwZW9mIHIuc3ViID09IFwib2JqZWN0XCIgJiYgIXUobC5zdWIsIHIuc3ViKSlcbiAgICByZXR1cm4gITE7XG4gIGlmIChsLmF1ZCAhPT0gdm9pZCAwICYmIHR5cGVvZiByLmF1ZCA9PSBcIm9iamVjdFwiKSB7XG4gICAgaWYgKHR5cGVvZiBsLmF1ZCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICBpZiAoIXUobC5hdWQsIHIuYXVkKSlcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGwuYXVkID09IFwib2JqZWN0XCIgJiYgIXAobC5hdWQsIHIuYXVkKSlcbiAgICAgIHJldHVybiAhMTtcbiAgfVxuICB2YXIgZiA9IHMuSW50RGF0ZS5nZXROb3coKTtcbiAgcmV0dXJuIHIudmVyaWZ5QXQgIT09IHZvaWQgMCAmJiB0eXBlb2Ygci52ZXJpZnlBdCA9PSBcIm51bWJlclwiICYmIChmID0gci52ZXJpZnlBdCksIChyLmdyYWNlUGVyaW9kID09PSB2b2lkIDAgfHwgdHlwZW9mIHIuZ3JhY2VQZXJpb2QgIT0gXCJudW1iZXJcIikgJiYgKHIuZ3JhY2VQZXJpb2QgPSAwKSwgIShsLmV4cCAhPT0gdm9pZCAwICYmIHR5cGVvZiBsLmV4cCA9PSBcIm51bWJlclwiICYmIGwuZXhwICsgci5ncmFjZVBlcmlvZCA8IGYgfHwgbC5uYmYgIT09IHZvaWQgMCAmJiB0eXBlb2YgbC5uYmYgPT0gXCJudW1iZXJcIiAmJiBmIDwgbC5uYmYgLSByLmdyYWNlUGVyaW9kIHx8IGwuaWF0ICE9PSB2b2lkIDAgJiYgdHlwZW9mIGwuaWF0ID09IFwibnVtYmVyXCIgJiYgZiA8IGwuaWF0IC0gci5ncmFjZVBlcmlvZCB8fCBsLmp0aSAhPT0gdm9pZCAwICYmIHIuanRpICE9PSB2b2lkIDAgJiYgbC5qdGkgIT09IHIuanRpIHx8ICFuLnZlcmlmeShlLCB0LCByLmFsZykpO1xufTtcbmEuandzLkpXUy5pbmNsdWRlZEFycmF5ID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IGEuandzLkpXUy5pbkFycmF5O1xuICBpZiAoZSA9PT0gbnVsbCB8fCB0eXBlb2YgZSAhPSBcIm9iamVjdFwiIHx8IHR5cGVvZiBlLmxlbmd0aCAhPSBcIm51bWJlclwiKVxuICAgIHJldHVybiAhMTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlLmxlbmd0aDsgaSsrKVxuICAgIGlmICghcihlW2ldLCB0KSlcbiAgICAgIHJldHVybiAhMTtcbiAgcmV0dXJuICEwO1xufTtcbmEuandzLkpXUy5pbkFycmF5ID0gZnVuY3Rpb24oZSwgdCkge1xuICBpZiAodCA9PT0gbnVsbCB8fCB0eXBlb2YgdCAhPSBcIm9iamVjdFwiIHx8IHR5cGVvZiB0Lmxlbmd0aCAhPSBcIm51bWJlclwiKVxuICAgIHJldHVybiAhMTtcbiAgZm9yICh2YXIgciA9IDA7IHIgPCB0Lmxlbmd0aDsgcisrKVxuICAgIGlmICh0W3JdID09IGUpXG4gICAgICByZXR1cm4gITA7XG4gIHJldHVybiAhMTtcbn07XG5hLmp3cy5KV1MuandzYWxnMnNpZ2FsZyA9IHsgSFMyNTY6IFwiSG1hY1NIQTI1NlwiLCBIUzM4NDogXCJIbWFjU0hBMzg0XCIsIEhTNTEyOiBcIkhtYWNTSEE1MTJcIiwgUlMyNTY6IFwiU0hBMjU2d2l0aFJTQVwiLCBSUzM4NDogXCJTSEEzODR3aXRoUlNBXCIsIFJTNTEyOiBcIlNIQTUxMndpdGhSU0FcIiwgRVMyNTY6IFwiU0hBMjU2d2l0aEVDRFNBXCIsIEVTMzg0OiBcIlNIQTM4NHdpdGhFQ0RTQVwiLCBFUzUxMjogXCJTSEE1MTJ3aXRoRUNEU0FcIiwgUFMyNTY6IFwiU0hBMjU2d2l0aFJTQWFuZE1HRjFcIiwgUFMzODQ6IFwiU0hBMzg0d2l0aFJTQWFuZE1HRjFcIiwgUFM1MTI6IFwiU0hBNTEyd2l0aFJTQWFuZE1HRjFcIiwgbm9uZTogXCJub25lXCIgfTtcbmEuandzLkpXUy5pc1NhZmVKU09OU3RyaW5nID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICB2YXIgaSA9IG51bGw7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGkgPSBQdChlKSwgdHlwZW9mIGkgIT0gXCJvYmplY3RcIiB8fCBpLmNvbnN0cnVjdG9yID09PSBBcnJheSA/IDAgOiAodCAmJiAodFtyXSA9IGkpLCAxKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn07XG5hLmp3cy5KV1MucmVhZFNhZmVKU09OU3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IG51bGw7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHQgPSBQdChlKSwgdHlwZW9mIHQgIT0gXCJvYmplY3RcIiB8fCB0LmNvbnN0cnVjdG9yID09PSBBcnJheSA/IG51bGwgOiB0O1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcbmEuandzLkpXUy5nZXRFbmNvZGVkU2lnbmF0dXJlVmFsdWVGcm9tSldTID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGUubWF0Y2goL15bXi5dK1xcLlteLl0rXFwuKFteLl0rKSQvKTtcbiAgaWYgKHQgPT0gbnVsbClcbiAgICB0aHJvdyBcIkpXUyBzaWduYXR1cmUgaXMgbm90IGEgZm9ybSBvZiAnSGVhZC5QYXlsb2FkLlNpZ1ZhbHVlJy5cIjtcbiAgcmV0dXJuIHRbMV07XG59O1xuYS5qd3MuSldTLmdldEpXS3RodW1icHJpbnQgPSBmdW5jdGlvbihlKSB7XG4gIGlmIChlLmt0eSAhPT0gXCJSU0FcIiAmJiBlLmt0eSAhPT0gXCJFQ1wiICYmIGUua3R5ICE9PSBcIm9jdFwiKVxuICAgIHRocm93IFwidW5zdXBwb3J0ZWQgYWxnb3JpdGhtIGZvciBKV0sgVGh1bXByaW50XCI7XG4gIHZhciB0ID0gXCJ7XCI7XG4gIGlmIChlLmt0eSA9PT0gXCJSU0FcIikge1xuICAgIGlmICh0eXBlb2YgZS5uICE9IFwic3RyaW5nXCIgfHwgdHlwZW9mIGUuZSAhPSBcInN0cmluZ1wiKVxuICAgICAgdGhyb3cgXCJ3cm9uZyBuIGFuZCBlIHZhbHVlIGZvciBSU0Ega2V5XCI7XG4gICAgdCArPSAnXCJlXCI6XCInICsgZS5lICsgJ1wiLCcsIHQgKz0gJ1wia3R5XCI6XCInICsgZS5rdHkgKyAnXCIsJywgdCArPSAnXCJuXCI6XCInICsgZS5uICsgJ1wifSc7XG4gIH0gZWxzZSBpZiAoZS5rdHkgPT09IFwiRUNcIikge1xuICAgIGlmICh0eXBlb2YgZS5jcnYgIT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZS54ICE9IFwic3RyaW5nXCIgfHwgdHlwZW9mIGUueSAhPSBcInN0cmluZ1wiKVxuICAgICAgdGhyb3cgXCJ3cm9uZyBjcnYsIHggYW5kIHkgdmFsdWUgZm9yIEVDIGtleVwiO1xuICAgIHQgKz0gJ1wiY3J2XCI6XCInICsgZS5jcnYgKyAnXCIsJywgdCArPSAnXCJrdHlcIjpcIicgKyBlLmt0eSArICdcIiwnLCB0ICs9ICdcInhcIjpcIicgKyBlLnggKyAnXCIsJywgdCArPSAnXCJ5XCI6XCInICsgZS55ICsgJ1wifSc7XG4gIH0gZWxzZSBpZiAoZS5rdHkgPT09IFwib2N0XCIpIHtcbiAgICBpZiAodHlwZW9mIGUuayAhPSBcInN0cmluZ1wiKVxuICAgICAgdGhyb3cgXCJ3cm9uZyBrIHZhbHVlIGZvciBvY3Qoc3ltbWV0cmljKSBrZXlcIjtcbiAgICB0ICs9ICdcImt0eVwiOlwiJyArIGUua3R5ICsgJ1wiLCcsIHQgKz0gJ1wia1wiOlwiJyArIGUuayArICdcIn0nO1xuICB9XG4gIHZhciByID0gUGUodCksIGkgPSBhLmNyeXB0by5VdGlsLmhhc2hIZXgociwgXCJzaGEyNTZcIiksIHMgPSBhZShpKTtcbiAgcmV0dXJuIHM7XG59O1xuYS5qd3MuSW50RGF0ZSA9IHt9O1xuYS5qd3MuSW50RGF0ZS5nZXQgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYS5qd3MuSW50RGF0ZSwgciA9IHQuZ2V0Tm93LCBpID0gdC5nZXRadWx1O1xuICBpZiAoZSA9PSBcIm5vd1wiKVxuICAgIHJldHVybiByKCk7XG4gIGlmIChlID09IFwibm93ICsgMWhvdXJcIilcbiAgICByZXR1cm4gcigpICsgNjAgKiA2MDtcbiAgaWYgKGUgPT0gXCJub3cgKyAxZGF5XCIpXG4gICAgcmV0dXJuIHIoKSArIDYwICogNjAgKiAyNDtcbiAgaWYgKGUgPT0gXCJub3cgKyAxbW9udGhcIilcbiAgICByZXR1cm4gcigpICsgNjAgKiA2MCAqIDI0ICogMzA7XG4gIGlmIChlID09IFwibm93ICsgMXllYXJcIilcbiAgICByZXR1cm4gcigpICsgNjAgKiA2MCAqIDI0ICogMzY1O1xuICBpZiAoZS5tYXRjaCgvWiQvKSlcbiAgICByZXR1cm4gaShlKTtcbiAgaWYgKGUubWF0Y2goL15bMC05XSskLykpXG4gICAgcmV0dXJuIHBhcnNlSW50KGUpO1xuICB0aHJvdyBcInVuc3VwcG9ydGVkIGZvcm1hdDogXCIgKyBlO1xufTtcbmEuandzLkludERhdGUuZ2V0WnVsdSA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGduKGUpO1xufTtcbmEuandzLkludERhdGUuZ2V0Tm93ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gfn4oLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgLyAxZTMpO1xuICByZXR1cm4gZTtcbn07XG5hLmp3cy5JbnREYXRlLmludERhdGUyVVRDU3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IG5ldyBEYXRlKGUgKiAxZTMpO1xuICByZXR1cm4gdC50b1VUQ1N0cmluZygpO1xufTtcbmEuandzLkludERhdGUuaW50RGF0ZTJadWx1ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IG5ldyBEYXRlKGUgKiAxZTMpLCByID0gKFwiMDAwMFwiICsgdC5nZXRVVENGdWxsWWVhcigpKS5zbGljZSgtNCksIGkgPSAoXCIwMFwiICsgKHQuZ2V0VVRDTW9udGgoKSArIDEpKS5zbGljZSgtMiksIHMgPSAoXCIwMFwiICsgdC5nZXRVVENEYXRlKCkpLnNsaWNlKC0yKSwgbiA9IChcIjAwXCIgKyB0LmdldFVUQ0hvdXJzKCkpLnNsaWNlKC0yKSwgaCA9IChcIjAwXCIgKyB0LmdldFVUQ01pbnV0ZXMoKSkuc2xpY2UoLTIpLCB1ID0gKFwiMDBcIiArIHQuZ2V0VVRDU2Vjb25kcygpKS5zbGljZSgtMik7XG4gIHJldHVybiByICsgaSArIHMgKyBuICsgaCArIHUgKyBcIlpcIjtcbn07XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuandzID4gXCJ1XCIgfHwgIWEuandzKSAmJiAoYS5qd3MgPSB7fSk7XG5hLmp3cy5KV1NKUyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IGEsIHQgPSBlLmp3cywgciA9IHQuSldTLCBpID0gci5yZWFkU2FmZUpTT05TdHJpbmc7XG4gIHRoaXMuYUhlYWRlciA9IFtdLCB0aGlzLnNQYXlsb2FkID0gXCJcIiwgdGhpcy5hU2lnbmF0dXJlID0gW10sIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuYUhlYWRlciA9IFtdLCB0aGlzLnNQYXlsb2FkID0gdm9pZCAwLCB0aGlzLmFTaWduYXR1cmUgPSBbXTtcbiAgfSwgdGhpcy5pbml0V2l0aEpXUyA9IGZ1bmN0aW9uKHMpIHtcbiAgICB0aGlzLmluaXQoKTtcbiAgICB2YXIgbiA9IHMuc3BsaXQoXCIuXCIpO1xuICAgIGlmIChuLmxlbmd0aCAhPSAzKVxuICAgICAgdGhyb3cgXCJtYWxmb3JtZWQgaW5wdXQgSldTXCI7XG4gICAgdGhpcy5hSGVhZGVyLnB1c2goblswXSksIHRoaXMuc1BheWxvYWQgPSBuWzFdLCB0aGlzLmFTaWduYXR1cmUucHVzaChuWzJdKTtcbiAgfSwgdGhpcy5hZGRTaWduYXR1cmUgPSBmdW5jdGlvbihzLCBuLCBoLCB1KSB7XG4gICAgaWYgKHRoaXMuc1BheWxvYWQgPT09IHZvaWQgMCB8fCB0aGlzLnNQYXlsb2FkID09PSBudWxsKVxuICAgICAgdGhyb3cgXCJ0aGVyZSdzIG5vIEpTT04tSlMgc2lnbmF0dXJlIHRvIGFkZC5cIjtcbiAgICB2YXIgcCA9IHRoaXMuYUhlYWRlci5sZW5ndGg7XG4gICAgaWYgKHRoaXMuYUhlYWRlci5sZW5ndGggIT0gdGhpcy5hU2lnbmF0dXJlLmxlbmd0aClcbiAgICAgIHRocm93IFwiYUhlYWRlci5sZW5ndGggIT0gYVNpZ25hdHVyZS5sZW5ndGhcIjtcbiAgICB0cnkge1xuICAgICAgdmFyIGMgPSBhLmp3cy5KV1Muc2lnbihzLCBuLCB0aGlzLnNQYXlsb2FkLCBoLCB1KSwgeSA9IGMuc3BsaXQoXCIuXCIpLCB2ID0geVswXSwgbyA9IHlbMl07XG4gICAgICB0aGlzLmFIZWFkZXIucHVzaCh5WzBdKSwgdGhpcy5hU2lnbmF0dXJlLnB1c2goeVsyXSk7XG4gICAgfSBjYXRjaCAobCkge1xuICAgICAgdGhyb3cgdGhpcy5hSGVhZGVyLmxlbmd0aCA+IHAgJiYgdGhpcy5hSGVhZGVyLnBvcCgpLCB0aGlzLmFTaWduYXR1cmUubGVuZ3RoID4gcCAmJiB0aGlzLmFTaWduYXR1cmUucG9wKCksIFwiYWRkU2lnbmF0dXJlIGZhaWxlZDogXCIgKyBsO1xuICAgIH1cbiAgfSwgdGhpcy52ZXJpZnlBbGwgPSBmdW5jdGlvbihzKSB7XG4gICAgaWYgKHRoaXMuYUhlYWRlci5sZW5ndGggIT09IHMubGVuZ3RoIHx8IHRoaXMuYVNpZ25hdHVyZS5sZW5ndGggIT09IHMubGVuZ3RoKVxuICAgICAgcmV0dXJuICExO1xuICAgIGZvciAodmFyIG4gPSAwOyBuIDwgcy5sZW5ndGg7IG4rKykge1xuICAgICAgdmFyIGggPSBzW25dO1xuICAgICAgaWYgKGgubGVuZ3RoICE9PSAyKVxuICAgICAgICByZXR1cm4gITE7XG4gICAgICB2YXIgdSA9IHRoaXMudmVyaWZ5TnRoKG4sIGhbMF0sIGhbMV0pO1xuICAgICAgaWYgKHUgPT09ICExKVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbiAgfSwgdGhpcy52ZXJpZnlOdGggPSBmdW5jdGlvbihzLCBuLCBoKSB7XG4gICAgaWYgKHRoaXMuYUhlYWRlci5sZW5ndGggPD0gcyB8fCB0aGlzLmFTaWduYXR1cmUubGVuZ3RoIDw9IHMpXG4gICAgICByZXR1cm4gITE7XG4gICAgdmFyIHUgPSB0aGlzLmFIZWFkZXJbc10sIHAgPSB0aGlzLmFTaWduYXR1cmVbc10sIGMgPSB1ICsgXCIuXCIgKyB0aGlzLnNQYXlsb2FkICsgXCIuXCIgKyBwLCB5ID0gITE7XG4gICAgdHJ5IHtcbiAgICAgIHkgPSByLnZlcmlmeShjLCBuLCBoKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV0dXJuIHk7XG4gIH0sIHRoaXMucmVhZEpXU0pTID0gZnVuY3Rpb24ocykge1xuICAgIGlmICh0eXBlb2YgcyA9PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgbiA9IGkocyk7XG4gICAgICBpZiAobiA9PSBudWxsKVxuICAgICAgICB0aHJvdyBcImFyZ3VtZW50IGlzIG5vdCBzYWZlIEpTT04gb2JqZWN0IHN0cmluZ1wiO1xuICAgICAgdGhpcy5hSGVhZGVyID0gbi5oZWFkZXJzLCB0aGlzLnNQYXlsb2FkID0gbi5wYXlsb2FkLCB0aGlzLmFTaWduYXR1cmUgPSBuLnNpZ25hdHVyZXM7XG4gICAgfSBlbHNlXG4gICAgICB0cnkge1xuICAgICAgICBpZiAocy5oZWFkZXJzLmxlbmd0aCA+IDApXG4gICAgICAgICAgdGhpcy5hSGVhZGVyID0gcy5oZWFkZXJzO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgdGhyb3cgXCJtYWxmb3JtZWQgaGVhZGVyXCI7XG4gICAgICAgIGlmICh0eXBlb2Ygcy5wYXlsb2FkID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgdGhpcy5zUGF5bG9hZCA9IHMucGF5bG9hZDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IFwibWFsZm9ybWVkIHNpZ25hdHVyZXNcIjtcbiAgICAgICAgaWYgKHMuc2lnbmF0dXJlcy5sZW5ndGggPiAwKVxuICAgICAgICAgIHRoaXMuYVNpZ25hdHVyZSA9IHMuc2lnbmF0dXJlcztcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IFwibWFsZm9ybWVkIHNpZ25hdHVyZXNcIjtcbiAgICAgIH0gY2F0Y2ggKGgpIHtcbiAgICAgICAgdGhyb3cgXCJtYWxmb3JtZWQgSldTLUpTIEpTT04gb2JqZWN0OiBcIiArIGg7XG4gICAgICB9XG4gIH0sIHRoaXMuZ2V0SlNPTiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7IGhlYWRlcnM6IHRoaXMuYUhlYWRlciwgcGF5bG9hZDogdGhpcy5zUGF5bG9hZCwgc2lnbmF0dXJlczogdGhpcy5hU2lnbmF0dXJlIH07XG4gIH0sIHRoaXMuaXNFbXB0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFIZWFkZXIubGVuZ3RoID09IDAgPyAxIDogMDtcbiAgfTtcbn07XG5hLmNyeXB0by5FQ0RTQTtcbmEuY3J5cHRvLkRTQTtcbmEuY3J5cHRvLlNpZ25hdHVyZTtcbmEuY3J5cHRvLk1lc3NhZ2VEaWdlc3Q7XG5hLmNyeXB0by5NYWM7XG52YXIgd24gPSBrLCBGbiA9IHdlLCBibiA9IGE7XG5hLmNyeXB0bztcbmEuYXNuMTtcbmEuandzO1xuYS5sYW5nO1xuY29uc3QgQW4gPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSgvKiBAX19QVVJFX18gKi8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHtcbiAgX19wcm90b19fOiBudWxsLFxuICBLRVlVVElMOiB3bixcbiAgS0pVUjogYm4sXG4gIGI2NHV0b3V0Zjg6IEZuXG59LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSkpO1xuZXhwb3J0IHtcbiAgQW4gYXMgalxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@kinde/jwt-validator/dist/jsrsasign-B2gZIJhY.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@kinde/jwt-validator/dist/jsrsasign-B2gZIJhY.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@kinde/jwt-validator/dist/jsrsasign-B2gZIJhY.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   j: () => (/* binding */ An)\n/* harmony export */ });\nvar Ue = {};\nUe.userAgent = !1;\nvar Ve = {};\n/*! CryptoJS v3.1.2 core-fix.js\n * code.google.com/p/crypto-js\n * (c) 2009-2013 by Jeff Mott. All rights reserved.\n * code.google.com/p/crypto-js/wiki/License\n * THIS IS FIX of 'core.js' to fix Hmac issue.\n * https://code.google.com/p/crypto-js/issues/detail?id=84\n * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js\n */\nvar K = K || function(e, t) {\n  var r = {}, i = r.lib = {}, s = i.Base = /* @__PURE__ */ function() {\n    function o() {\n    }\n    return { extend: function(l) {\n      o.prototype = this;\n      var f = new o();\n      return l && f.mixIn(l), f.hasOwnProperty(\"init\") || (f.init = function() {\n        f.$super.init.apply(this, arguments);\n      }), f.init.prototype = f, f.$super = this, f;\n    }, create: function() {\n      var l = this.extend();\n      return l.init.apply(l, arguments), l;\n    }, init: function() {\n    }, mixIn: function(l) {\n      for (var f in l)\n        l.hasOwnProperty(f) && (this[f] = l[f]);\n      l.hasOwnProperty(\"toString\") && (this.toString = l.toString);\n    }, clone: function() {\n      return this.init.prototype.extend(this);\n    } };\n  }(), n = i.WordArray = s.extend({ init: function(o, l) {\n    o = this.words = o || [], l != t ? this.sigBytes = l : this.sigBytes = o.length * 4;\n  }, toString: function(o) {\n    return (o || u).stringify(this);\n  }, concat: function(o) {\n    var l = this.words, f = o.words, d = this.sigBytes, g = o.sigBytes;\n    if (this.clamp(), d % 4)\n      for (var S = 0; S < g; S++) {\n        var b = f[S >>> 2] >>> 24 - S % 4 * 8 & 255;\n        l[d + S >>> 2] |= b << 24 - (d + S) % 4 * 8;\n      }\n    else\n      for (var S = 0; S < g; S += 4)\n        l[d + S >>> 2] = f[S >>> 2];\n    return this.sigBytes += g, this;\n  }, clamp: function() {\n    var o = this.words, l = this.sigBytes;\n    o[l >>> 2] &= 4294967295 << 32 - l % 4 * 8, o.length = e.ceil(l / 4);\n  }, clone: function() {\n    var o = s.clone.call(this);\n    return o.words = this.words.slice(0), o;\n  }, random: function(o) {\n    for (var l = [], f = 0; f < o; f += 4)\n      l.push(e.random() * 4294967296 | 0);\n    return new n.init(l, o);\n  } }), h = r.enc = {}, u = h.Hex = { stringify: function(o) {\n    for (var l = o.words, f = o.sigBytes, d = [], g = 0; g < f; g++) {\n      var S = l[g >>> 2] >>> 24 - g % 4 * 8 & 255;\n      d.push((S >>> 4).toString(16)), d.push((S & 15).toString(16));\n    }\n    return d.join(\"\");\n  }, parse: function(o) {\n    for (var l = o.length, f = [], d = 0; d < l; d += 2)\n      f[d >>> 3] |= parseInt(o.substr(d, 2), 16) << 24 - d % 8 * 4;\n    return new n.init(f, l / 2);\n  } }, p = h.Latin1 = { stringify: function(o) {\n    for (var l = o.words, f = o.sigBytes, d = [], g = 0; g < f; g++) {\n      var S = l[g >>> 2] >>> 24 - g % 4 * 8 & 255;\n      d.push(String.fromCharCode(S));\n    }\n    return d.join(\"\");\n  }, parse: function(o) {\n    for (var l = o.length, f = [], d = 0; d < l; d++)\n      f[d >>> 2] |= (o.charCodeAt(d) & 255) << 24 - d % 4 * 8;\n    return new n.init(f, l);\n  } }, c = h.Utf8 = { stringify: function(o) {\n    try {\n      return decodeURIComponent(escape(p.stringify(o)));\n    } catch {\n      throw new Error(\"Malformed UTF-8 data\");\n    }\n  }, parse: function(o) {\n    return p.parse(unescape(encodeURIComponent(o)));\n  } }, y = i.BufferedBlockAlgorithm = s.extend({ reset: function() {\n    this._data = new n.init(), this._nDataBytes = 0;\n  }, _append: function(o) {\n    typeof o == \"string\" && (o = c.parse(o)), this._data.concat(o), this._nDataBytes += o.sigBytes;\n  }, _process: function(o) {\n    var l = this._data, f = l.words, d = l.sigBytes, g = this.blockSize, S = g * 4, b = d / S;\n    o ? b = e.ceil(b) : b = e.max((b | 0) - this._minBufferSize, 0);\n    var D = b * g, A = e.min(D * 4, d);\n    if (D) {\n      for (var I = 0; I < D; I += g)\n        this._doProcessBlock(f, I);\n      var m = f.splice(0, D);\n      l.sigBytes -= A;\n    }\n    return new n.init(m, A);\n  }, clone: function() {\n    var o = s.clone.call(this);\n    return o._data = this._data.clone(), o;\n  }, _minBufferSize: 0 });\n  i.Hasher = y.extend({ cfg: s.extend(), init: function(o) {\n    this.cfg = this.cfg.extend(o), this.reset();\n  }, reset: function() {\n    y.reset.call(this), this._doReset();\n  }, update: function(o) {\n    return this._append(o), this._process(), this;\n  }, finalize: function(o) {\n    o && this._append(o);\n    var l = this._doFinalize();\n    return l;\n  }, blockSize: 512 / 32, _createHelper: function(o) {\n    return function(l, f) {\n      return new o.init(f).finalize(l);\n    };\n  }, _createHmacHelper: function(o) {\n    return function(l, f) {\n      return new v.HMAC.init(o, f).finalize(l);\n    };\n  } });\n  var v = r.algo = {};\n  return r;\n}(Math);\n(function(e) {\n  var s = K, t = s.lib, r = t.Base, i = t.WordArray, s = s.x64 = {};\n  s.Word = r.extend({ init: function(n, h) {\n    this.high = n, this.low = h;\n  } }), s.WordArray = r.extend({ init: function(n, h) {\n    n = this.words = n || [], this.sigBytes = h != e ? h : 8 * n.length;\n  }, toX32: function() {\n    for (var n = this.words, h = n.length, u = [], p = 0; p < h; p++) {\n      var c = n[p];\n      u.push(c.high), u.push(c.low);\n    }\n    return i.create(u, this.sigBytes);\n  }, clone: function() {\n    for (var n = r.clone.call(this), h = n.words = this.words.slice(0), u = h.length, p = 0; p < u; p++) h[p] = h[p].clone();\n    return n;\n  } });\n})();\nK.lib.Cipher || function(e) {\n  var l = K, t = l.lib, r = t.Base, i = t.WordArray, s = t.BufferedBlockAlgorithm, n = l.enc.Base64, h = l.algo.EvpKDF, u = t.Cipher = s.extend({ cfg: r.extend(), createEncryptor: function(d, g) {\n    return this.create(this._ENC_XFORM_MODE, d, g);\n  }, createDecryptor: function(d, g) {\n    return this.create(this._DEC_XFORM_MODE, d, g);\n  }, init: function(d, g, S) {\n    this.cfg = this.cfg.extend(S), this._xformMode = d, this._key = g, this.reset();\n  }, reset: function() {\n    s.reset.call(this), this._doReset();\n  }, process: function(d) {\n    return this._append(d), this._process();\n  }, finalize: function(d) {\n    return d && this._append(d), this._doFinalize();\n  }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function(d) {\n    return { encrypt: function(g, S, b) {\n      return (typeof S == \"string\" ? f : o).encrypt(d, g, S, b);\n    }, decrypt: function(g, S, b) {\n      return (typeof S == \"string\" ? f : o).decrypt(d, g, S, b);\n    } };\n  } });\n  t.StreamCipher = u.extend({ _doFinalize: function() {\n    return this._process(!0);\n  }, blockSize: 1 });\n  var v = l.mode = {}, p = function(d, g, S) {\n    var b = this._iv;\n    b ? this._iv = e : b = this._prevBlock;\n    for (var D = 0; D < S; D++) d[g + D] ^= b[D];\n  }, c = (t.BlockCipherMode = r.extend({ createEncryptor: function(d, g) {\n    return this.Encryptor.create(d, g);\n  }, createDecryptor: function(d, g) {\n    return this.Decryptor.create(d, g);\n  }, init: function(d, g) {\n    this._cipher = d, this._iv = g;\n  } })).extend();\n  c.Encryptor = c.extend({ processBlock: function(d, g) {\n    var S = this._cipher, b = S.blockSize;\n    p.call(this, d, g, b), S.encryptBlock(d, g), this._prevBlock = d.slice(g, g + b);\n  } }), c.Decryptor = c.extend({ processBlock: function(d, g) {\n    var S = this._cipher, b = S.blockSize, D = d.slice(g, g + b);\n    S.decryptBlock(\n      d,\n      g\n    ), p.call(this, d, g, b), this._prevBlock = D;\n  } }), v = v.CBC = c, c = (l.pad = {}).Pkcs7 = { pad: function(d, g) {\n    for (var S = 4 * g, S = S - d.sigBytes % S, b = S << 24 | S << 16 | S << 8 | S, D = [], A = 0; A < S; A += 4) D.push(b);\n    S = i.create(D, S), d.concat(S);\n  }, unpad: function(d) {\n    d.sigBytes -= d.words[d.sigBytes - 1 >>> 2] & 255;\n  } }, t.BlockCipher = u.extend({ cfg: u.cfg.extend({ mode: v, padding: c }), reset: function() {\n    u.reset.call(this);\n    var g = this.cfg, d = g.iv, g = g.mode;\n    if (this._xformMode == this._ENC_XFORM_MODE) var S = g.createEncryptor;\n    else S = g.createDecryptor, this._minBufferSize = 1;\n    this._mode = S.call(g, this, d && d.words);\n  }, _doProcessBlock: function(d, g) {\n    this._mode.processBlock(d, g);\n  }, _doFinalize: function() {\n    var d = this.cfg.padding;\n    if (this._xformMode == this._ENC_XFORM_MODE) {\n      d.pad(this._data, this.blockSize);\n      var g = this._process(!0);\n    } else g = this._process(!0), d.unpad(g);\n    return g;\n  }, blockSize: 4 });\n  var y = t.CipherParams = r.extend({ init: function(d) {\n    this.mixIn(d);\n  }, toString: function(d) {\n    return (d || this.formatter).stringify(this);\n  } }), v = (l.format = {}).OpenSSL = { stringify: function(d) {\n    var g = d.ciphertext;\n    return d = d.salt, (d ? i.create([1398893684, 1701076831]).concat(d).concat(g) : g).toString(n);\n  }, parse: function(d) {\n    d = n.parse(d);\n    var g = d.words;\n    if (g[0] == 1398893684 && g[1] == 1701076831) {\n      var S = i.create(g.slice(2, 4));\n      g.splice(0, 4), d.sigBytes -= 16;\n    }\n    return y.create({ ciphertext: d, salt: S });\n  } }, o = t.SerializableCipher = r.extend({ cfg: r.extend({ format: v }), encrypt: function(d, g, S, b) {\n    b = this.cfg.extend(b);\n    var D = d.createEncryptor(S, b);\n    return g = D.finalize(g), D = D.cfg, y.create({\n      ciphertext: g,\n      key: S,\n      iv: D.iv,\n      algorithm: d,\n      mode: D.mode,\n      padding: D.padding,\n      blockSize: d.blockSize,\n      formatter: b.format\n    });\n  }, decrypt: function(d, g, S, b) {\n    return b = this.cfg.extend(b), g = this._parse(g, b.format), d.createDecryptor(S, b).finalize(g.ciphertext);\n  }, _parse: function(d, g) {\n    return typeof d == \"string\" ? g.parse(d, this) : d;\n  } }), l = (l.kdf = {}).OpenSSL = { execute: function(d, g, S, b) {\n    return b || (b = i.random(8)), d = h.create({ keySize: g + S }).compute(d, b), S = i.create(d.words.slice(g), 4 * S), d.sigBytes = 4 * g, y.create({ key: d, iv: S, salt: b });\n  } }, f = t.PasswordBasedCipher = o.extend({ cfg: o.cfg.extend({ kdf: l }), encrypt: function(d, g, S, b) {\n    return b = this.cfg.extend(b), S = b.kdf.execute(S, d.keySize, d.ivSize), b.iv = S.iv, d = o.encrypt.call(this, d, g, S.key, b), d.mixIn(S), d;\n  }, decrypt: function(d, g, S, b) {\n    return b = this.cfg.extend(b), g = this._parse(g, b.format), S = b.kdf.execute(S, d.keySize, d.ivSize, g.salt), b.iv = S.iv, o.decrypt.call(this, d, g, S.key, b);\n  } });\n}();\n(function() {\n  for (var e = K, t = e.lib.BlockCipher, m = e.algo, r = [], i = [], s = [], n = [], h = [], u = [], p = [], c = [], y = [], v = [], o = [], l = 0; 256 > l; l++) o[l] = 128 > l ? l << 1 : l << 1 ^ 283;\n  for (var f = 0, d = 0, l = 0; 256 > l; l++) {\n    var g = d ^ d << 1 ^ d << 2 ^ d << 3 ^ d << 4, g = g >>> 8 ^ g & 255 ^ 99;\n    r[f] = g, i[g] = f;\n    var S = o[f], b = o[S], D = o[b], A = 257 * o[g] ^ 16843008 * g;\n    s[f] = A << 24 | A >>> 8, n[f] = A << 16 | A >>> 16, h[f] = A << 8 | A >>> 24, u[f] = A, A = 16843009 * D ^ 65537 * b ^ 257 * S ^ 16843008 * f, p[g] = A << 24 | A >>> 8, c[g] = A << 16 | A >>> 16, y[g] = A << 8 | A >>> 24, v[g] = A, f ? (f = S ^ o[o[o[D ^ S]]], d ^= o[o[d]]) : f = d = 1;\n  }\n  var I = [\n    0,\n    1,\n    2,\n    4,\n    8,\n    16,\n    32,\n    64,\n    128,\n    27,\n    54\n  ], m = m.AES = t.extend({ _doReset: function() {\n    for (var x = this._key, E = x.words, w = x.sigBytes / 4, x = 4 * ((this._nRounds = w + 6) + 1), F = this._keySchedule = [], P = 0; P < x; P++) if (P < w) F[P] = E[P];\n    else {\n      var T = F[P - 1];\n      P % w ? 6 < w && P % w == 4 && (T = r[T >>> 24] << 24 | r[T >>> 16 & 255] << 16 | r[T >>> 8 & 255] << 8 | r[T & 255]) : (T = T << 8 | T >>> 24, T = r[T >>> 24] << 24 | r[T >>> 16 & 255] << 16 | r[T >>> 8 & 255] << 8 | r[T & 255], T ^= I[P / w | 0] << 24), F[P] = F[P - w] ^ T;\n    }\n    for (E = this._invKeySchedule = [], w = 0; w < x; w++) P = x - w, T = w % 4 ? F[P] : F[P - 4], E[w] = 4 > w || 4 >= P ? T : p[r[T >>> 24]] ^ c[r[T >>> 16 & 255]] ^ y[r[T >>> 8 & 255]] ^ v[r[T & 255]];\n  }, encryptBlock: function(E, w) {\n    this._doCryptBlock(E, w, this._keySchedule, s, n, h, u, r);\n  }, decryptBlock: function(E, w) {\n    var x = E[w + 1];\n    E[w + 1] = E[w + 3], E[w + 3] = x, this._doCryptBlock(E, w, this._invKeySchedule, p, c, y, v, i), x = E[w + 1], E[w + 1] = E[w + 3], E[w + 3] = x;\n  }, _doCryptBlock: function(E, w, x, F, P, T, H, C) {\n    for (var B = this._nRounds, ne = E[w] ^ x[0], he = E[w + 1] ^ x[1], se = E[w + 2] ^ x[2], re = E[w + 3] ^ x[3], O = 4, j = 1; j < B; j++) var fe = F[ne >>> 24] ^ P[he >>> 16 & 255] ^ T[se >>> 8 & 255] ^ H[re & 255] ^ x[O++], Z = F[he >>> 24] ^ P[se >>> 16 & 255] ^ T[re >>> 8 & 255] ^ H[ne & 255] ^ x[O++], X = F[se >>> 24] ^ P[re >>> 16 & 255] ^ T[ne >>> 8 & 255] ^ H[he & 255] ^ x[O++], re = F[re >>> 24] ^ P[ne >>> 16 & 255] ^ T[he >>> 8 & 255] ^ H[se & 255] ^ x[O++], ne = fe, he = Z, se = X;\n    fe = (C[ne >>> 24] << 24 | C[he >>> 16 & 255] << 16 | C[se >>> 8 & 255] << 8 | C[re & 255]) ^ x[O++], Z = (C[he >>> 24] << 24 | C[se >>> 16 & 255] << 16 | C[re >>> 8 & 255] << 8 | C[ne & 255]) ^ x[O++], X = (C[se >>> 24] << 24 | C[re >>> 16 & 255] << 16 | C[ne >>> 8 & 255] << 8 | C[he & 255]) ^ x[O++], re = (C[re >>> 24] << 24 | C[ne >>> 16 & 255] << 16 | C[he >>> 8 & 255] << 8 | C[se & 255]) ^ x[O++], E[w] = fe, E[w + 1] = Z, E[w + 2] = X, E[w + 3] = re;\n  }, keySize: 8 });\n  e.AES = t._createHelper(m);\n})();\n(function() {\n  function e(o, l) {\n    var f = (this._lBlock >>> o ^ this._rBlock) & l;\n    this._rBlock ^= f, this._lBlock ^= f << o;\n  }\n  function t(o, l) {\n    var f = (this._rBlock >>> o ^ this._lBlock) & l;\n    this._lBlock ^= f, this._rBlock ^= f << o;\n  }\n  var r = K, s = r.lib, i = s.WordArray, s = s.BlockCipher, n = r.algo, h = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4], u = [\n    14,\n    17,\n    11,\n    24,\n    1,\n    5,\n    3,\n    28,\n    15,\n    6,\n    21,\n    10,\n    23,\n    19,\n    12,\n    4,\n    26,\n    8,\n    16,\n    7,\n    27,\n    20,\n    13,\n    2,\n    41,\n    52,\n    31,\n    37,\n    47,\n    55,\n    30,\n    40,\n    51,\n    45,\n    33,\n    48,\n    44,\n    49,\n    39,\n    56,\n    34,\n    53,\n    46,\n    42,\n    50,\n    36,\n    29,\n    32\n  ], p = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28], c = [{\n    0: 8421888,\n    268435456: 32768,\n    536870912: 8421378,\n    805306368: 2,\n    1073741824: 512,\n    1342177280: 8421890,\n    1610612736: 8389122,\n    1879048192: 8388608,\n    2147483648: 514,\n    2415919104: 8389120,\n    2684354560: 33280,\n    2952790016: 8421376,\n    3221225472: 32770,\n    3489660928: 8388610,\n    3758096384: 0,\n    4026531840: 33282,\n    134217728: 0,\n    402653184: 8421890,\n    671088640: 33282,\n    939524096: 32768,\n    1207959552: 8421888,\n    1476395008: 512,\n    1744830464: 8421378,\n    2013265920: 2,\n    2281701376: 8389120,\n    2550136832: 33280,\n    2818572288: 8421376,\n    3087007744: 8389122,\n    3355443200: 8388610,\n    3623878656: 32770,\n    3892314112: 514,\n    4160749568: 8388608,\n    1: 32768,\n    268435457: 2,\n    536870913: 8421888,\n    805306369: 8388608,\n    1073741825: 8421378,\n    1342177281: 33280,\n    1610612737: 512,\n    1879048193: 8389122,\n    2147483649: 8421890,\n    2415919105: 8421376,\n    2684354561: 8388610,\n    2952790017: 33282,\n    3221225473: 514,\n    3489660929: 8389120,\n    3758096385: 32770,\n    4026531841: 0,\n    134217729: 8421890,\n    402653185: 8421376,\n    671088641: 8388608,\n    939524097: 512,\n    1207959553: 32768,\n    1476395009: 8388610,\n    1744830465: 2,\n    2013265921: 33282,\n    2281701377: 32770,\n    2550136833: 8389122,\n    2818572289: 514,\n    3087007745: 8421888,\n    3355443201: 8389120,\n    3623878657: 0,\n    3892314113: 33280,\n    4160749569: 8421378\n  }, {\n    0: 1074282512,\n    16777216: 16384,\n    33554432: 524288,\n    50331648: 1074266128,\n    67108864: 1073741840,\n    83886080: 1074282496,\n    100663296: 1073758208,\n    117440512: 16,\n    134217728: 540672,\n    150994944: 1073758224,\n    167772160: 1073741824,\n    184549376: 540688,\n    201326592: 524304,\n    218103808: 0,\n    234881024: 16400,\n    251658240: 1074266112,\n    8388608: 1073758208,\n    25165824: 540688,\n    41943040: 16,\n    58720256: 1073758224,\n    75497472: 1074282512,\n    92274688: 1073741824,\n    109051904: 524288,\n    125829120: 1074266128,\n    142606336: 524304,\n    159383552: 0,\n    176160768: 16384,\n    192937984: 1074266112,\n    209715200: 1073741840,\n    226492416: 540672,\n    243269632: 1074282496,\n    260046848: 16400,\n    268435456: 0,\n    285212672: 1074266128,\n    301989888: 1073758224,\n    318767104: 1074282496,\n    335544320: 1074266112,\n    352321536: 16,\n    369098752: 540688,\n    385875968: 16384,\n    402653184: 16400,\n    419430400: 524288,\n    436207616: 524304,\n    452984832: 1073741840,\n    469762048: 540672,\n    486539264: 1073758208,\n    503316480: 1073741824,\n    520093696: 1074282512,\n    276824064: 540688,\n    293601280: 524288,\n    310378496: 1074266112,\n    327155712: 16384,\n    343932928: 1073758208,\n    360710144: 1074282512,\n    377487360: 16,\n    394264576: 1073741824,\n    411041792: 1074282496,\n    427819008: 1073741840,\n    444596224: 1073758224,\n    461373440: 524304,\n    478150656: 0,\n    494927872: 16400,\n    511705088: 1074266128,\n    528482304: 540672\n  }, {\n    0: 260,\n    1048576: 0,\n    2097152: 67109120,\n    3145728: 65796,\n    4194304: 65540,\n    5242880: 67108868,\n    6291456: 67174660,\n    7340032: 67174400,\n    8388608: 67108864,\n    9437184: 67174656,\n    10485760: 65792,\n    11534336: 67174404,\n    12582912: 67109124,\n    13631488: 65536,\n    14680064: 4,\n    15728640: 256,\n    524288: 67174656,\n    1572864: 67174404,\n    2621440: 0,\n    3670016: 67109120,\n    4718592: 67108868,\n    5767168: 65536,\n    6815744: 65540,\n    7864320: 260,\n    8912896: 4,\n    9961472: 256,\n    11010048: 67174400,\n    12058624: 65796,\n    13107200: 65792,\n    14155776: 67109124,\n    15204352: 67174660,\n    16252928: 67108864,\n    16777216: 67174656,\n    17825792: 65540,\n    18874368: 65536,\n    19922944: 67109120,\n    20971520: 256,\n    22020096: 67174660,\n    23068672: 67108868,\n    24117248: 0,\n    25165824: 67109124,\n    26214400: 67108864,\n    27262976: 4,\n    28311552: 65792,\n    29360128: 67174400,\n    30408704: 260,\n    31457280: 65796,\n    32505856: 67174404,\n    17301504: 67108864,\n    18350080: 260,\n    19398656: 67174656,\n    20447232: 0,\n    21495808: 65540,\n    22544384: 67109120,\n    23592960: 256,\n    24641536: 67174404,\n    25690112: 65536,\n    26738688: 67174660,\n    27787264: 65796,\n    28835840: 67108868,\n    29884416: 67109124,\n    30932992: 67174400,\n    31981568: 4,\n    33030144: 65792\n  }, {\n    0: 2151682048,\n    65536: 2147487808,\n    131072: 4198464,\n    196608: 2151677952,\n    262144: 0,\n    327680: 4198400,\n    393216: 2147483712,\n    458752: 4194368,\n    524288: 2147483648,\n    589824: 4194304,\n    655360: 64,\n    720896: 2147487744,\n    786432: 2151678016,\n    851968: 4160,\n    917504: 4096,\n    983040: 2151682112,\n    32768: 2147487808,\n    98304: 64,\n    163840: 2151678016,\n    229376: 2147487744,\n    294912: 4198400,\n    360448: 2151682112,\n    425984: 0,\n    491520: 2151677952,\n    557056: 4096,\n    622592: 2151682048,\n    688128: 4194304,\n    753664: 4160,\n    819200: 2147483648,\n    884736: 4194368,\n    950272: 4198464,\n    1015808: 2147483712,\n    1048576: 4194368,\n    1114112: 4198400,\n    1179648: 2147483712,\n    1245184: 0,\n    1310720: 4160,\n    1376256: 2151678016,\n    1441792: 2151682048,\n    1507328: 2147487808,\n    1572864: 2151682112,\n    1638400: 2147483648,\n    1703936: 2151677952,\n    1769472: 4198464,\n    1835008: 2147487744,\n    1900544: 4194304,\n    1966080: 64,\n    2031616: 4096,\n    1081344: 2151677952,\n    1146880: 2151682112,\n    1212416: 0,\n    1277952: 4198400,\n    1343488: 4194368,\n    1409024: 2147483648,\n    1474560: 2147487808,\n    1540096: 64,\n    1605632: 2147483712,\n    1671168: 4096,\n    1736704: 2147487744,\n    1802240: 2151678016,\n    1867776: 4160,\n    1933312: 2151682048,\n    1998848: 4194304,\n    2064384: 4198464\n  }, {\n    0: 128,\n    4096: 17039360,\n    8192: 262144,\n    12288: 536870912,\n    16384: 537133184,\n    20480: 16777344,\n    24576: 553648256,\n    28672: 262272,\n    32768: 16777216,\n    36864: 537133056,\n    40960: 536871040,\n    45056: 553910400,\n    49152: 553910272,\n    53248: 0,\n    57344: 17039488,\n    61440: 553648128,\n    2048: 17039488,\n    6144: 553648256,\n    10240: 128,\n    14336: 17039360,\n    18432: 262144,\n    22528: 537133184,\n    26624: 553910272,\n    30720: 536870912,\n    34816: 537133056,\n    38912: 0,\n    43008: 553910400,\n    47104: 16777344,\n    51200: 536871040,\n    55296: 553648128,\n    59392: 16777216,\n    63488: 262272,\n    65536: 262144,\n    69632: 128,\n    73728: 536870912,\n    77824: 553648256,\n    81920: 16777344,\n    86016: 553910272,\n    90112: 537133184,\n    94208: 16777216,\n    98304: 553910400,\n    102400: 553648128,\n    106496: 17039360,\n    110592: 537133056,\n    114688: 262272,\n    118784: 536871040,\n    122880: 0,\n    126976: 17039488,\n    67584: 553648256,\n    71680: 16777216,\n    75776: 17039360,\n    79872: 537133184,\n    83968: 536870912,\n    88064: 17039488,\n    92160: 128,\n    96256: 553910272,\n    100352: 262272,\n    104448: 553910400,\n    108544: 0,\n    112640: 553648128,\n    116736: 16777344,\n    120832: 262144,\n    124928: 537133056,\n    129024: 536871040\n  }, {\n    0: 268435464,\n    256: 8192,\n    512: 270532608,\n    768: 270540808,\n    1024: 268443648,\n    1280: 2097152,\n    1536: 2097160,\n    1792: 268435456,\n    2048: 0,\n    2304: 268443656,\n    2560: 2105344,\n    2816: 8,\n    3072: 270532616,\n    3328: 2105352,\n    3584: 8200,\n    3840: 270540800,\n    128: 270532608,\n    384: 270540808,\n    640: 8,\n    896: 2097152,\n    1152: 2105352,\n    1408: 268435464,\n    1664: 268443648,\n    1920: 8200,\n    2176: 2097160,\n    2432: 8192,\n    2688: 268443656,\n    2944: 270532616,\n    3200: 0,\n    3456: 270540800,\n    3712: 2105344,\n    3968: 268435456,\n    4096: 268443648,\n    4352: 270532616,\n    4608: 270540808,\n    4864: 8200,\n    5120: 2097152,\n    5376: 268435456,\n    5632: 268435464,\n    5888: 2105344,\n    6144: 2105352,\n    6400: 0,\n    6656: 8,\n    6912: 270532608,\n    7168: 8192,\n    7424: 268443656,\n    7680: 270540800,\n    7936: 2097160,\n    4224: 8,\n    4480: 2105344,\n    4736: 2097152,\n    4992: 268435464,\n    5248: 268443648,\n    5504: 8200,\n    5760: 270540808,\n    6016: 270532608,\n    6272: 270540800,\n    6528: 270532616,\n    6784: 8192,\n    7040: 2105352,\n    7296: 2097160,\n    7552: 0,\n    7808: 268435456,\n    8064: 268443656\n  }, {\n    0: 1048576,\n    16: 33555457,\n    32: 1024,\n    48: 1049601,\n    64: 34604033,\n    80: 0,\n    96: 1,\n    112: 34603009,\n    128: 33555456,\n    144: 1048577,\n    160: 33554433,\n    176: 34604032,\n    192: 34603008,\n    208: 1025,\n    224: 1049600,\n    240: 33554432,\n    8: 34603009,\n    24: 0,\n    40: 33555457,\n    56: 34604032,\n    72: 1048576,\n    88: 33554433,\n    104: 33554432,\n    120: 1025,\n    136: 1049601,\n    152: 33555456,\n    168: 34603008,\n    184: 1048577,\n    200: 1024,\n    216: 34604033,\n    232: 1,\n    248: 1049600,\n    256: 33554432,\n    272: 1048576,\n    288: 33555457,\n    304: 34603009,\n    320: 1048577,\n    336: 33555456,\n    352: 34604032,\n    368: 1049601,\n    384: 1025,\n    400: 34604033,\n    416: 1049600,\n    432: 1,\n    448: 0,\n    464: 34603008,\n    480: 33554433,\n    496: 1024,\n    264: 1049600,\n    280: 33555457,\n    296: 34603009,\n    312: 1,\n    328: 33554432,\n    344: 1048576,\n    360: 1025,\n    376: 34604032,\n    392: 33554433,\n    408: 34603008,\n    424: 0,\n    440: 34604033,\n    456: 1049601,\n    472: 1024,\n    488: 33555456,\n    504: 1048577\n  }, {\n    0: 134219808,\n    1: 131072,\n    2: 134217728,\n    3: 32,\n    4: 131104,\n    5: 134350880,\n    6: 134350848,\n    7: 2048,\n    8: 134348800,\n    9: 134219776,\n    10: 133120,\n    11: 134348832,\n    12: 2080,\n    13: 0,\n    14: 134217760,\n    15: 133152,\n    2147483648: 2048,\n    2147483649: 134350880,\n    2147483650: 134219808,\n    2147483651: 134217728,\n    2147483652: 134348800,\n    2147483653: 133120,\n    2147483654: 133152,\n    2147483655: 32,\n    2147483656: 134217760,\n    2147483657: 2080,\n    2147483658: 131104,\n    2147483659: 134350848,\n    2147483660: 0,\n    2147483661: 134348832,\n    2147483662: 134219776,\n    2147483663: 131072,\n    16: 133152,\n    17: 134350848,\n    18: 32,\n    19: 2048,\n    20: 134219776,\n    21: 134217760,\n    22: 134348832,\n    23: 131072,\n    24: 0,\n    25: 131104,\n    26: 134348800,\n    27: 134219808,\n    28: 134350880,\n    29: 133120,\n    30: 2080,\n    31: 134217728,\n    2147483664: 131072,\n    2147483665: 2048,\n    2147483666: 134348832,\n    2147483667: 133152,\n    2147483668: 32,\n    2147483669: 134348800,\n    2147483670: 134217728,\n    2147483671: 134219808,\n    2147483672: 134350880,\n    2147483673: 134217760,\n    2147483674: 134219776,\n    2147483675: 0,\n    2147483676: 133120,\n    2147483677: 2080,\n    2147483678: 131104,\n    2147483679: 134350848\n  }], y = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679], v = n.DES = s.extend({ _doReset: function() {\n    for (var o = this._key.words, l = [], f = 0; 56 > f; f++) {\n      var d = h[f] - 1;\n      l[f] = o[d >>> 5] >>> 31 - d % 32 & 1;\n    }\n    for (o = this._subKeys = [], d = 0; 16 > d; d++) {\n      for (var g = o[d] = [], S = p[d], f = 0; 24 > f; f++) g[f / 6 | 0] |= l[(u[f] - 1 + S) % 28] << 31 - f % 6, g[4 + (f / 6 | 0)] |= l[28 + (u[f + 24] - 1 + S) % 28] << 31 - f % 6;\n      for (g[0] = g[0] << 1 | g[0] >>> 31, f = 1; 7 > f; f++) g[f] >>>= 4 * (f - 1) + 3;\n      g[7] = g[7] << 5 | g[7] >>> 27;\n    }\n    for (l = this._invSubKeys = [], f = 0; 16 > f; f++) l[f] = o[15 - f];\n  }, encryptBlock: function(o, l) {\n    this._doCryptBlock(o, l, this._subKeys);\n  }, decryptBlock: function(o, l) {\n    this._doCryptBlock(o, l, this._invSubKeys);\n  }, _doCryptBlock: function(o, l, f) {\n    this._lBlock = o[l], this._rBlock = o[l + 1], e.call(this, 4, 252645135), e.call(this, 16, 65535), t.call(this, 2, 858993459), t.call(this, 8, 16711935), e.call(this, 1, 1431655765);\n    for (var d = 0; 16 > d; d++) {\n      for (var g = f[d], S = this._lBlock, b = this._rBlock, D = 0, A = 0; 8 > A; A++) D |= c[A][((b ^ g[A]) & y[A]) >>> 0];\n      this._lBlock = b, this._rBlock = S ^ D;\n    }\n    f = this._lBlock, this._lBlock = this._rBlock, this._rBlock = f, e.call(this, 1, 1431655765), t.call(this, 8, 16711935), t.call(this, 2, 858993459), e.call(this, 16, 65535), e.call(this, 4, 252645135), o[l] = this._lBlock, o[l + 1] = this._rBlock;\n  }, keySize: 2, ivSize: 2, blockSize: 2 });\n  r.DES = s._createHelper(v), n = n.TripleDES = s.extend({ _doReset: function() {\n    var o = this._key.words;\n    this._des1 = v.createEncryptor(i.create(o.slice(0, 2))), this._des2 = v.createEncryptor(i.create(o.slice(2, 4))), this._des3 = v.createEncryptor(i.create(o.slice(4, 6)));\n  }, encryptBlock: function(o, l) {\n    this._des1.encryptBlock(o, l), this._des2.decryptBlock(o, l), this._des3.encryptBlock(o, l);\n  }, decryptBlock: function(o, l) {\n    this._des3.decryptBlock(o, l), this._des2.encryptBlock(o, l), this._des1.decryptBlock(o, l);\n  }, keySize: 6, ivSize: 2, blockSize: 2 }), r.TripleDES = s._createHelper(n);\n})();\n(function() {\n  var e = K, t = e.lib.WordArray;\n  e.enc.Base64 = { stringify: function(r) {\n    var i = r.words, s = r.sigBytes, n = this._map;\n    r.clamp(), r = [];\n    for (var h = 0; h < s; h += 3) for (var u = (i[h >>> 2] >>> 24 - 8 * (h % 4) & 255) << 16 | (i[h + 1 >>> 2] >>> 24 - 8 * ((h + 1) % 4) & 255) << 8 | i[h + 2 >>> 2] >>> 24 - 8 * ((h + 2) % 4) & 255, p = 0; 4 > p && h + 0.75 * p < s; p++) r.push(n.charAt(u >>> 6 * (3 - p) & 63));\n    if (i = n.charAt(64)) for (; r.length % 4; ) r.push(i);\n    return r.join(\"\");\n  }, parse: function(r) {\n    var i = r.length, s = this._map, n = s.charAt(64);\n    n && (n = r.indexOf(n), n != -1 && (i = n));\n    for (var n = [], h = 0, u = 0; u < i; u++) if (u % 4) {\n      var p = s.indexOf(r.charAt(u - 1)) << 2 * (u % 4), c = s.indexOf(r.charAt(u)) >>> 6 - 2 * (u % 4);\n      n[h >>> 2] |= (p | c) << 24 - 8 * (h % 4), h++;\n    }\n    return t.create(n, h);\n  }, _map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\" };\n})();\n(function(e) {\n  function t(v, o, l, f, d, g, S) {\n    return v = v + (o & l | ~o & f) + d + S, (v << g | v >>> 32 - g) + o;\n  }\n  function r(v, o, l, f, d, g, S) {\n    return v = v + (o & f | l & ~f) + d + S, (v << g | v >>> 32 - g) + o;\n  }\n  function i(v, o, l, f, d, g, S) {\n    return v = v + (o ^ l ^ f) + d + S, (v << g | v >>> 32 - g) + o;\n  }\n  function s(v, o, l, f, d, g, S) {\n    return v = v + (l ^ (o | ~f)) + d + S, (v << g | v >>> 32 - g) + o;\n  }\n  for (var n = K, p = n.lib, h = p.WordArray, u = p.Hasher, p = n.algo, c = [], y = 0; 64 > y; y++) c[y] = 4294967296 * e.abs(e.sin(y + 1)) | 0;\n  p = p.MD5 = u.extend({\n    _doReset: function() {\n      this._hash = new h.init([1732584193, 4023233417, 2562383102, 271733878]);\n    },\n    _doProcessBlock: function(v, o) {\n      for (var l = 0; 16 > l; l++) {\n        var f = o + l, d = v[f];\n        v[f] = (d << 8 | d >>> 24) & 16711935 | (d << 24 | d >>> 8) & 4278255360;\n      }\n      var l = this._hash.words, f = v[o + 0], d = v[o + 1], g = v[o + 2], S = v[o + 3], b = v[o + 4], D = v[o + 5], A = v[o + 6], I = v[o + 7], m = v[o + 8], E = v[o + 9], w = v[o + 10], x = v[o + 11], F = v[o + 12], P = v[o + 13], T = v[o + 14], H = v[o + 15], C = l[0], j = l[1], O = l[2], B = l[3], C = t(C, j, O, B, f, 7, c[0]), B = t(B, C, j, O, d, 12, c[1]), O = t(O, B, C, j, g, 17, c[2]), j = t(j, O, B, C, S, 22, c[3]), C = t(C, j, O, B, b, 7, c[4]), B = t(B, C, j, O, D, 12, c[5]), O = t(O, B, C, j, A, 17, c[6]), j = t(j, O, B, C, I, 22, c[7]), C = t(C, j, O, B, m, 7, c[8]), B = t(B, C, j, O, E, 12, c[9]), O = t(O, B, C, j, w, 17, c[10]), j = t(j, O, B, C, x, 22, c[11]), C = t(C, j, O, B, F, 7, c[12]), B = t(B, C, j, O, P, 12, c[13]), O = t(O, B, C, j, T, 17, c[14]), j = t(j, O, B, C, H, 22, c[15]), C = r(C, j, O, B, d, 5, c[16]), B = r(B, C, j, O, A, 9, c[17]), O = r(O, B, C, j, x, 14, c[18]), j = r(j, O, B, C, f, 20, c[19]), C = r(C, j, O, B, D, 5, c[20]), B = r(B, C, j, O, w, 9, c[21]), O = r(O, B, C, j, H, 14, c[22]), j = r(j, O, B, C, b, 20, c[23]), C = r(C, j, O, B, E, 5, c[24]), B = r(B, C, j, O, T, 9, c[25]), O = r(O, B, C, j, S, 14, c[26]), j = r(j, O, B, C, m, 20, c[27]), C = r(C, j, O, B, P, 5, c[28]), B = r(\n        B,\n        C,\n        j,\n        O,\n        g,\n        9,\n        c[29]\n      ), O = r(O, B, C, j, I, 14, c[30]), j = r(j, O, B, C, F, 20, c[31]), C = i(C, j, O, B, D, 4, c[32]), B = i(B, C, j, O, m, 11, c[33]), O = i(O, B, C, j, x, 16, c[34]), j = i(j, O, B, C, T, 23, c[35]), C = i(C, j, O, B, d, 4, c[36]), B = i(B, C, j, O, b, 11, c[37]), O = i(O, B, C, j, I, 16, c[38]), j = i(j, O, B, C, w, 23, c[39]), C = i(C, j, O, B, P, 4, c[40]), B = i(B, C, j, O, f, 11, c[41]), O = i(O, B, C, j, S, 16, c[42]), j = i(j, O, B, C, A, 23, c[43]), C = i(C, j, O, B, E, 4, c[44]), B = i(B, C, j, O, F, 11, c[45]), O = i(O, B, C, j, H, 16, c[46]), j = i(j, O, B, C, g, 23, c[47]), C = s(C, j, O, B, f, 6, c[48]), B = s(B, C, j, O, I, 10, c[49]), O = s(\n        O,\n        B,\n        C,\n        j,\n        T,\n        15,\n        c[50]\n      ), j = s(j, O, B, C, D, 21, c[51]), C = s(C, j, O, B, F, 6, c[52]), B = s(B, C, j, O, S, 10, c[53]), O = s(O, B, C, j, w, 15, c[54]), j = s(j, O, B, C, d, 21, c[55]), C = s(C, j, O, B, m, 6, c[56]), B = s(B, C, j, O, H, 10, c[57]), O = s(O, B, C, j, A, 15, c[58]), j = s(j, O, B, C, P, 21, c[59]), C = s(C, j, O, B, b, 6, c[60]), B = s(B, C, j, O, x, 10, c[61]), O = s(O, B, C, j, g, 15, c[62]), j = s(j, O, B, C, E, 21, c[63]);\n      l[0] = l[0] + C | 0, l[1] = l[1] + j | 0, l[2] = l[2] + O | 0, l[3] = l[3] + B | 0;\n    },\n    _doFinalize: function() {\n      var v = this._data, o = v.words, l = 8 * this._nDataBytes, f = 8 * v.sigBytes;\n      o[f >>> 5] |= 128 << 24 - f % 32;\n      var d = e.floor(l / 4294967296);\n      for (o[(f + 64 >>> 9 << 4) + 15] = (d << 8 | d >>> 24) & 16711935 | (d << 24 | d >>> 8) & 4278255360, o[(f + 64 >>> 9 << 4) + 14] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360, v.sigBytes = 4 * (o.length + 1), this._process(), v = this._hash, o = v.words, l = 0; 4 > l; l++) f = o[l], o[l] = (f << 8 | f >>> 24) & 16711935 | (f << 24 | f >>> 8) & 4278255360;\n      return v;\n    },\n    clone: function() {\n      var v = u.clone.call(this);\n      return v._hash = this._hash.clone(), v;\n    }\n  }), n.MD5 = u._createHelper(p), n.HmacMD5 = u._createHmacHelper(p);\n})(Math);\n(function() {\n  var e = K, s = e.lib, t = s.WordArray, r = s.Hasher, i = [], s = e.algo.SHA1 = r.extend({ _doReset: function() {\n    this._hash = new t.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);\n  }, _doProcessBlock: function(n, h) {\n    for (var u = this._hash.words, p = u[0], c = u[1], y = u[2], v = u[3], o = u[4], l = 0; 80 > l; l++) {\n      if (16 > l) i[l] = n[h + l] | 0;\n      else {\n        var f = i[l - 3] ^ i[l - 8] ^ i[l - 14] ^ i[l - 16];\n        i[l] = f << 1 | f >>> 31;\n      }\n      f = (p << 5 | p >>> 27) + o + i[l], f = 20 > l ? f + ((c & y | ~c & v) + 1518500249) : 40 > l ? f + ((c ^ y ^ v) + 1859775393) : 60 > l ? f + ((c & y | c & v | y & v) - 1894007588) : f + ((c ^ y ^ v) - 899497514), o = v, v = y, y = c << 30 | c >>> 2, c = p, p = f;\n    }\n    u[0] = u[0] + p | 0, u[1] = u[1] + c | 0, u[2] = u[2] + y | 0, u[3] = u[3] + v | 0, u[4] = u[4] + o | 0;\n  }, _doFinalize: function() {\n    var n = this._data, h = n.words, u = 8 * this._nDataBytes, p = 8 * n.sigBytes;\n    return h[p >>> 5] |= 128 << 24 - p % 32, h[(p + 64 >>> 9 << 4) + 14] = Math.floor(u / 4294967296), h[(p + 64 >>> 9 << 4) + 15] = u, n.sigBytes = 4 * h.length, this._process(), this._hash;\n  }, clone: function() {\n    var n = r.clone.call(this);\n    return n._hash = this._hash.clone(), n;\n  } });\n  e.SHA1 = r._createHelper(s), e.HmacSHA1 = r._createHmacHelper(s);\n})();\n(function(e) {\n  for (var t = K, l = t.lib, r = l.WordArray, i = l.Hasher, l = t.algo, s = [], n = [], h = function(d) {\n    return 4294967296 * (d - (d | 0)) | 0;\n  }, u = 2, p = 0; 64 > p; ) {\n    var c;\n    e: {\n      c = u;\n      for (var y = e.sqrt(c), v = 2; v <= y; v++) if (!(c % v)) {\n        c = !1;\n        break e;\n      }\n      c = !0;\n    }\n    c && (8 > p && (s[p] = h(e.pow(u, 0.5))), n[p] = h(e.pow(u, 1 / 3)), p++), u++;\n  }\n  var o = [], l = l.SHA256 = i.extend({ _doReset: function() {\n    this._hash = new r.init(s.slice(0));\n  }, _doProcessBlock: function(f, d) {\n    for (var g = this._hash.words, S = g[0], b = g[1], D = g[2], A = g[3], I = g[4], m = g[5], E = g[6], w = g[7], x = 0; 64 > x; x++) {\n      if (16 > x) o[x] = f[d + x] | 0;\n      else {\n        var F = o[x - 15], P = o[x - 2];\n        o[x] = ((F << 25 | F >>> 7) ^ (F << 14 | F >>> 18) ^ F >>> 3) + o[x - 7] + ((P << 15 | P >>> 17) ^ (P << 13 | P >>> 19) ^ P >>> 10) + o[x - 16];\n      }\n      F = w + ((I << 26 | I >>> 6) ^ (I << 21 | I >>> 11) ^ (I << 7 | I >>> 25)) + (I & m ^ ~I & E) + n[x] + o[x], P = ((S << 30 | S >>> 2) ^ (S << 19 | S >>> 13) ^ (S << 10 | S >>> 22)) + (S & b ^ S & D ^ b & D), w = E, E = m, m = I, I = A + F | 0, A = D, D = b, b = S, S = F + P | 0;\n    }\n    g[0] = g[0] + S | 0, g[1] = g[1] + b | 0, g[2] = g[2] + D | 0, g[3] = g[3] + A | 0, g[4] = g[4] + I | 0, g[5] = g[5] + m | 0, g[6] = g[6] + E | 0, g[7] = g[7] + w | 0;\n  }, _doFinalize: function() {\n    var f = this._data, d = f.words, g = 8 * this._nDataBytes, S = 8 * f.sigBytes;\n    return d[S >>> 5] |= 128 << 24 - S % 32, d[(S + 64 >>> 9 << 4) + 14] = e.floor(g / 4294967296), d[(S + 64 >>> 9 << 4) + 15] = g, f.sigBytes = 4 * d.length, this._process(), this._hash;\n  }, clone: function() {\n    var f = i.clone.call(this);\n    return f._hash = this._hash.clone(), f;\n  } });\n  t.SHA256 = i._createHelper(l), t.HmacSHA256 = i._createHmacHelper(l);\n})(Math);\n(function() {\n  var e = K, t = e.lib.WordArray, i = e.algo, r = i.SHA256, i = i.SHA224 = r.extend({ _doReset: function() {\n    this._hash = new t.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428]);\n  }, _doFinalize: function() {\n    var s = r._doFinalize.call(this);\n    return s.sigBytes -= 4, s;\n  } });\n  e.SHA224 = r._createHelper(i), e.HmacSHA224 = r._createHmacHelper(i);\n})();\n(function() {\n  function e() {\n    return i.create.apply(i, arguments);\n  }\n  for (var t = K, r = t.lib.Hasher, n = t.x64, i = n.Word, s = n.WordArray, n = t.algo, h = [\n    e(1116352408, 3609767458),\n    e(1899447441, 602891725),\n    e(3049323471, 3964484399),\n    e(3921009573, 2173295548),\n    e(961987163, 4081628472),\n    e(1508970993, 3053834265),\n    e(2453635748, 2937671579),\n    e(2870763221, 3664609560),\n    e(3624381080, 2734883394),\n    e(310598401, 1164996542),\n    e(607225278, 1323610764),\n    e(1426881987, 3590304994),\n    e(1925078388, 4068182383),\n    e(2162078206, 991336113),\n    e(2614888103, 633803317),\n    e(3248222580, 3479774868),\n    e(3835390401, 2666613458),\n    e(4022224774, 944711139),\n    e(264347078, 2341262773),\n    e(604807628, 2007800933),\n    e(770255983, 1495990901),\n    e(1249150122, 1856431235),\n    e(1555081692, 3175218132),\n    e(1996064986, 2198950837),\n    e(2554220882, 3999719339),\n    e(2821834349, 766784016),\n    e(2952996808, 2566594879),\n    e(3210313671, 3203337956),\n    e(3336571891, 1034457026),\n    e(3584528711, 2466948901),\n    e(113926993, 3758326383),\n    e(338241895, 168717936),\n    e(666307205, 1188179964),\n    e(773529912, 1546045734),\n    e(1294757372, 1522805485),\n    e(\n      1396182291,\n      2643833823\n    ),\n    e(1695183700, 2343527390),\n    e(1986661051, 1014477480),\n    e(2177026350, 1206759142),\n    e(2456956037, 344077627),\n    e(2730485921, 1290863460),\n    e(2820302411, 3158454273),\n    e(3259730800, 3505952657),\n    e(3345764771, 106217008),\n    e(3516065817, 3606008344),\n    e(3600352804, 1432725776),\n    e(4094571909, 1467031594),\n    e(275423344, 851169720),\n    e(430227734, 3100823752),\n    e(506948616, 1363258195),\n    e(659060556, 3750685593),\n    e(883997877, 3785050280),\n    e(958139571, 3318307427),\n    e(1322822218, 3812723403),\n    e(1537002063, 2003034995),\n    e(1747873779, 3602036899),\n    e(1955562222, 1575990012),\n    e(2024104815, 1125592928),\n    e(2227730452, 2716904306),\n    e(2361852424, 442776044),\n    e(2428436474, 593698344),\n    e(2756734187, 3733110249),\n    e(3204031479, 2999351573),\n    e(3329325298, 3815920427),\n    e(3391569614, 3928383900),\n    e(3515267271, 566280711),\n    e(3940187606, 3454069534),\n    e(4118630271, 4000239992),\n    e(116418474, 1914138554),\n    e(174292421, 2731055270),\n    e(289380356, 3203993006),\n    e(460393269, 320620315),\n    e(685471733, 587496836),\n    e(852142971, 1086792851),\n    e(1017036298, 365543100),\n    e(1126000580, 2618297676),\n    e(\n      1288033470,\n      3409855158\n    ),\n    e(1501505948, 4234509866),\n    e(1607167915, 987167468),\n    e(1816402316, 1246189591)\n  ], u = [], p = 0; 80 > p; p++) u[p] = e();\n  n = n.SHA512 = r.extend({ _doReset: function() {\n    this._hash = new s.init([new i.init(1779033703, 4089235720), new i.init(3144134277, 2227873595), new i.init(1013904242, 4271175723), new i.init(2773480762, 1595750129), new i.init(1359893119, 2917565137), new i.init(2600822924, 725511199), new i.init(528734635, 4215389547), new i.init(1541459225, 327033209)]);\n  }, _doProcessBlock: function(c, y) {\n    for (var b = this._hash.words, v = b[0], o = b[1], l = b[2], f = b[3], d = b[4], g = b[5], S = b[6], b = b[7], D = v.high, A = v.low, I = o.high, m = o.low, E = l.high, w = l.low, x = f.high, F = f.low, P = d.high, T = d.low, H = g.high, C = g.low, B = S.high, O = S.low, j = b.high, fe = b.low, Z = D, X = A, re = I, ne = m, he = E, se = w, ke = x, ce = F, M = P, G = T, Q = H, ee = C, pe = B, te = O, Me = j, Ne = fe, xe = 0; 80 > xe; xe++) {\n      var Ce = u[xe];\n      if (16 > xe) var ye = Ce.high = c[y + 2 * xe] | 0, U = Ce.low = c[y + 2 * xe + 1] | 0;\n      else {\n        var ye = u[xe - 15], U = ye.high, Fe = ye.low, ye = (U >>> 1 | Fe << 31) ^ (U >>> 8 | Fe << 24) ^ U >>> 7, Fe = (Fe >>> 1 | U << 31) ^ (Fe >>> 8 | U << 24) ^ (Fe >>> 7 | U << 25), He = u[xe - 2], U = He.high, $ = He.low, He = (U >>> 19 | $ << 13) ^ (U << 3 | $ >>> 29) ^ U >>> 6, $ = ($ >>> 19 | U << 13) ^ ($ << 3 | U >>> 29) ^ ($ >>> 6 | U << 26), U = u[xe - 7], Qe = U.high, Ie = u[xe - 16], be = Ie.high, Ie = Ie.low, U = Fe + U.low, ye = ye + Qe + (U >>> 0 < Fe >>> 0 ? 1 : 0), U = U + $, ye = ye + He + (U >>> 0 < $ >>> 0 ? 1 : 0), U = U + Ie, ye = ye + be + (U >>> 0 < Ie >>> 0 ? 1 : 0);\n        Ce.high = ye, Ce.low = U;\n      }\n      var Qe = M & Q ^ ~M & pe, Ie = G & ee ^ ~G & te, Ce = Z & re ^ Z & he ^ re & he, Kt = X & ne ^ X & se ^ ne & se, Fe = (Z >>> 28 | X << 4) ^ (Z << 30 | X >>> 2) ^ (Z << 25 | X >>> 7), He = (X >>> 28 | Z << 4) ^ (X << 30 | Z >>> 2) ^ (X << 25 | Z >>> 7), $ = h[xe], Lt = $.high, ct = $.low, $ = Ne + ((G >>> 14 | M << 18) ^ (G >>> 18 | M << 14) ^ (G << 23 | M >>> 9)), be = Me + ((M >>> 14 | G << 18) ^ (M >>> 18 | G << 14) ^ (M << 23 | G >>> 9)) + ($ >>> 0 < Ne >>> 0 ? 1 : 0), $ = $ + Ie, be = be + Qe + ($ >>> 0 < Ie >>> 0 ? 1 : 0), $ = $ + ct, be = be + Lt + ($ >>> 0 < ct >>> 0 ? 1 : 0), $ = $ + U, be = be + ye + ($ >>> 0 < U >>> 0 ? 1 : 0), U = He + Kt, Ce = Fe + Ce + (U >>> 0 < He >>> 0 ? 1 : 0), Me = pe, Ne = te, pe = Q, te = ee, Q = M, ee = G, G = ce + $ | 0, M = ke + be + (G >>> 0 < ce >>> 0 ? 1 : 0) | 0, ke = he, ce = se, he = re, se = ne, re = Z, ne = X, X = $ + U | 0, Z = be + Ce + (X >>> 0 < $ >>> 0 ? 1 : 0) | 0;\n    }\n    A = v.low = A + X, v.high = D + Z + (A >>> 0 < X >>> 0 ? 1 : 0), m = o.low = m + ne, o.high = I + re + (m >>> 0 < ne >>> 0 ? 1 : 0), w = l.low = w + se, l.high = E + he + (w >>> 0 < se >>> 0 ? 1 : 0), F = f.low = F + ce, f.high = x + ke + (F >>> 0 < ce >>> 0 ? 1 : 0), T = d.low = T + G, d.high = P + M + (T >>> 0 < G >>> 0 ? 1 : 0), C = g.low = C + ee, g.high = H + Q + (C >>> 0 < ee >>> 0 ? 1 : 0), O = S.low = O + te, S.high = B + pe + (O >>> 0 < te >>> 0 ? 1 : 0), fe = b.low = fe + Ne, b.high = j + Me + (fe >>> 0 < Ne >>> 0 ? 1 : 0);\n  }, _doFinalize: function() {\n    var c = this._data, y = c.words, v = 8 * this._nDataBytes, o = 8 * c.sigBytes;\n    return y[o >>> 5] |= 128 << 24 - o % 32, y[(o + 128 >>> 10 << 5) + 30] = Math.floor(v / 4294967296), y[(o + 128 >>> 10 << 5) + 31] = v, c.sigBytes = 4 * y.length, this._process(), this._hash.toX32();\n  }, clone: function() {\n    var c = r.clone.call(this);\n    return c._hash = this._hash.clone(), c;\n  }, blockSize: 32 }), t.SHA512 = r._createHelper(n), t.HmacSHA512 = r._createHmacHelper(n);\n})();\n(function() {\n  var e = K, s = e.x64, t = s.Word, r = s.WordArray, s = e.algo, i = s.SHA512, s = s.SHA384 = i.extend({ _doReset: function() {\n    this._hash = new r.init([new t.init(3418070365, 3238371032), new t.init(1654270250, 914150663), new t.init(2438529370, 812702999), new t.init(355462360, 4144912697), new t.init(1731405415, 4290775857), new t.init(2394180231, 1750603025), new t.init(3675008525, 1694076839), new t.init(1203062813, 3204075428)]);\n  }, _doFinalize: function() {\n    var n = i._doFinalize.call(this);\n    return n.sigBytes -= 16, n;\n  } });\n  e.SHA384 = i._createHelper(s), e.HmacSHA384 = i._createHmacHelper(s);\n})();\n(function() {\n  var e = K, c = e.lib, t = c.WordArray, r = c.Hasher, c = e.algo, i = t.create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]), s = t.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]), n = t.create([\n    11,\n    14,\n    15,\n    12,\n    5,\n    8,\n    7,\n    9,\n    11,\n    13,\n    14,\n    15,\n    6,\n    7,\n    9,\n    8,\n    7,\n    6,\n    8,\n    13,\n    11,\n    9,\n    7,\n    15,\n    7,\n    12,\n    15,\n    9,\n    11,\n    7,\n    13,\n    12,\n    11,\n    13,\n    6,\n    7,\n    14,\n    9,\n    13,\n    15,\n    14,\n    8,\n    13,\n    6,\n    5,\n    12,\n    7,\n    5,\n    11,\n    12,\n    14,\n    15,\n    14,\n    15,\n    9,\n    8,\n    9,\n    14,\n    5,\n    6,\n    8,\n    6,\n    5,\n    12,\n    9,\n    15,\n    5,\n    11,\n    6,\n    8,\n    13,\n    12,\n    5,\n    12,\n    13,\n    14,\n    11,\n    8,\n    5,\n    6\n  ]), h = t.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]), u = t.create([0, 1518500249, 1859775393, 2400959708, 2840853838]), p = t.create([\n    1352829926,\n    1548603684,\n    1836072691,\n    2053994217,\n    0\n  ]), c = c.RIPEMD160 = r.extend({ _doReset: function() {\n    this._hash = t.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);\n  }, _doProcessBlock: function(y, v) {\n    for (var o = 0; 16 > o; o++) {\n      var l = v + o, f = y[l];\n      y[l] = (f << 8 | f >>> 24) & 16711935 | (f << 24 | f >>> 8) & 4278255360;\n    }\n    var l = this._hash.words, f = u.words, d = p.words, g = i.words, S = s.words, b = n.words, D = h.words, A, I, m, E, w, x, F, P, T, H;\n    x = A = l[0], F = I = l[1], P = m = l[2], T = E = l[3], H = w = l[4];\n    for (var C, o = 0; 80 > o; o += 1) C = A + y[v + g[o]] | 0, C = 16 > o ? C + ((I ^ m ^ E) + f[0]) : 32 > o ? C + ((I & m | ~I & E) + f[1]) : 48 > o ? C + (((I | ~m) ^ E) + f[2]) : 64 > o ? C + ((I & E | m & ~E) + f[3]) : C + ((I ^ (m | ~E)) + f[4]), C |= 0, C = C << b[o] | C >>> 32 - b[o], C = C + w | 0, A = w, w = E, E = m << 10 | m >>> 22, m = I, I = C, C = x + y[v + S[o]] | 0, C = 16 > o ? C + ((F ^ (P | ~T)) + d[0]) : 32 > o ? C + ((F & T | P & ~T) + d[1]) : 48 > o ? C + (((F | ~P) ^ T) + d[2]) : 64 > o ? C + ((F & P | ~F & T) + d[3]) : C + ((F ^ P ^ T) + d[4]), C |= 0, C = C << D[o] | C >>> 32 - D[o], C = C + H | 0, x = H, H = T, T = P << 10 | P >>> 22, P = F, F = C;\n    C = l[1] + m + T | 0, l[1] = l[2] + E + H | 0, l[2] = l[3] + w + x | 0, l[3] = l[4] + A + F | 0, l[4] = l[0] + I + P | 0, l[0] = C;\n  }, _doFinalize: function() {\n    var y = this._data, v = y.words, o = 8 * this._nDataBytes, l = 8 * y.sigBytes;\n    for (v[l >>> 5] |= 128 << 24 - l % 32, v[(l + 64 >>> 9 << 4) + 14] = (o << 8 | o >>> 24) & 16711935 | (o << 24 | o >>> 8) & 4278255360, y.sigBytes = 4 * (v.length + 1), this._process(), y = this._hash, v = y.words, o = 0; 5 > o; o++) l = v[o], v[o] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;\n    return y;\n  }, clone: function() {\n    var y = r.clone.call(this);\n    return y._hash = this._hash.clone(), y;\n  } });\n  e.RIPEMD160 = r._createHelper(c), e.HmacRIPEMD160 = r._createHmacHelper(c);\n})();\n(function() {\n  var e = K, t = e.enc.Utf8;\n  e.algo.HMAC = e.lib.Base.extend({ init: function(r, i) {\n    r = this._hasher = new r.init(), typeof i == \"string\" && (i = t.parse(i));\n    var s = r.blockSize, n = 4 * s;\n    i.sigBytes > n && (i = r.finalize(i)), i.clamp();\n    for (var h = this._oKey = i.clone(), u = this._iKey = i.clone(), p = h.words, c = u.words, y = 0; y < s; y++) p[y] ^= 1549556828, c[y] ^= 909522486;\n    h.sigBytes = u.sigBytes = n, this.reset();\n  }, reset: function() {\n    var r = this._hasher;\n    r.reset(), r.update(this._iKey);\n  }, update: function(r) {\n    return this._hasher.update(r), this;\n  }, finalize: function(r) {\n    var i = this._hasher;\n    return r = i.finalize(r), i.reset(), i.finalize(this._oKey.clone().concat(r));\n  } });\n})();\n(function() {\n  var e = K, i = e.lib, t = i.Base, r = i.WordArray, i = e.algo, s = i.HMAC, n = i.PBKDF2 = t.extend({ cfg: t.extend({ keySize: 4, hasher: i.SHA1, iterations: 1 }), init: function(h) {\n    this.cfg = this.cfg.extend(h);\n  }, compute: function(h, u) {\n    for (var f = this.cfg, p = s.create(f.hasher, h), c = r.create(), y = r.create([1]), v = c.words, o = y.words, l = f.keySize, f = f.iterations; v.length < l; ) {\n      var d = p.update(u).finalize(y);\n      p.reset();\n      for (var g = d.words, S = g.length, b = d, D = 1; D < f; D++) {\n        b = p.finalize(b), p.reset();\n        for (var A = b.words, I = 0; I < S; I++) g[I] ^= A[I];\n      }\n      c.concat(d), o[0]++;\n    }\n    return c.sigBytes = 4 * l, c;\n  } });\n  e.PBKDF2 = function(h, u, p) {\n    return n.create(p).compute(h, u);\n  };\n})();\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nvar Ke = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\", Et = \"=\";\nfunction _e(e) {\n  var t, r, i = \"\";\n  for (t = 0; t + 3 <= e.length; t += 3)\n    r = parseInt(e.substring(t, t + 3), 16), i += Ke.charAt(r >> 6) + Ke.charAt(r & 63);\n  for (t + 1 == e.length ? (r = parseInt(e.substring(t, t + 1), 16), i += Ke.charAt(r << 2)) : t + 2 == e.length && (r = parseInt(e.substring(t, t + 2), 16), i += Ke.charAt(r >> 2) + Ke.charAt((r & 3) << 4)); (i.length & 3) > 0; )\n    i += Et;\n  return i;\n}\nfunction it(e) {\n  var t = \"\", r, i = 0, s, n;\n  for (r = 0; r < e.length && e.charAt(r) != Et; ++r)\n    n = Ke.indexOf(e.charAt(r)), !(n < 0) && (i == 0 ? (t += De(n >> 2), s = n & 3, i = 1) : i == 1 ? (t += De(s << 2 | n >> 4), s = n & 15, i = 2) : i == 2 ? (t += De(s), t += De(n >> 2), s = n & 3, i = 3) : (t += De(s << 2 | n >> 4), t += De(n & 15), i = 0));\n  return i == 1 && (t += De(s << 2)), t;\n}\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n*/\nvar Te;\nfunction R(e, t, r) {\n  e != null && (typeof e == \"number\" ? this.fromNumber(e, t, r) : t == null && typeof e != \"string\" ? this.fromString(e, 256) : this.fromString(e, t));\n}\nfunction _() {\n  return new R(null);\n}\nfunction qt(e, t, r, i, s, n) {\n  for (; --n >= 0; ) {\n    var h = t * this[e++] + r[i] + s;\n    s = Math.floor(h / 67108864), r[i++] = h & 67108863;\n  }\n  return s;\n}\nfunction kt(e, t, r, i, s, n) {\n  for (var h = t & 32767, u = t >> 15; --n >= 0; ) {\n    var p = this[e] & 32767, c = this[e++] >> 15, y = u * p + c * h;\n    p = h * p + ((y & 32767) << 15) + r[i] + (s & 1073741823), s = (p >>> 30) + (y >>> 15) + u * c + (s >>> 30), r[i++] = p & 1073741823;\n  }\n  return s;\n}\nfunction Mt(e, t, r, i, s, n) {\n  for (var h = t & 16383, u = t >> 14; --n >= 0; ) {\n    var p = this[e] & 16383, c = this[e++] >> 14, y = u * p + c * h;\n    p = h * p + ((y & 16383) << 14) + r[i] + s, s = (p >> 28) + (y >> 14) + u * c, r[i++] = p & 268435455;\n  }\n  return s;\n}\nUe.appName == \"Microsoft Internet Explorer\" ? (R.prototype.am = kt, Te = 30) : Ue.appName != \"Netscape\" ? (R.prototype.am = qt, Te = 26) : (R.prototype.am = Mt, Te = 28);\nR.prototype.DB = Te;\nR.prototype.DM = (1 << Te) - 1;\nR.prototype.DV = 1 << Te;\nvar nt = 52;\nR.prototype.FV = Math.pow(2, nt);\nR.prototype.F1 = nt - Te;\nR.prototype.F2 = 2 * Te - nt;\nvar _t = \"0123456789abcdefghijklmnopqrstuvwxyz\", $e = new Array(), Le, me;\nLe = 48;\nfor (me = 0; me <= 9; ++me)\n  $e[Le++] = me;\nLe = 97;\nfor (me = 10; me < 36; ++me)\n  $e[Le++] = me;\nLe = 65;\nfor (me = 10; me < 36; ++me)\n  $e[Le++] = me;\nfunction De(e) {\n  return _t.charAt(e);\n}\nfunction wt(e, t) {\n  var r = $e[e.charCodeAt(t)];\n  return r ?? -1;\n}\nfunction Ut(e) {\n  for (var t = this.t - 1; t >= 0; --t)\n    e[t] = this[t];\n  e.t = this.t, e.s = this.s;\n}\nfunction zt(e) {\n  this.t = 1, this.s = e < 0 ? -1 : 0, e > 0 ? this[0] = e : e < -1 ? this[0] = e + this.DV : this.t = 0;\n}\nfunction Re(e) {\n  var t = _();\n  return t.fromInt(e), t;\n}\nfunction Gt(e, t) {\n  var r;\n  if (t == 16)\n    r = 4;\n  else if (t == 8)\n    r = 3;\n  else if (t == 256)\n    r = 8;\n  else if (t == 2)\n    r = 1;\n  else if (t == 32)\n    r = 5;\n  else if (t == 4)\n    r = 2;\n  else {\n    this.fromRadix(e, t);\n    return;\n  }\n  this.t = 0, this.s = 0;\n  for (var i = e.length, s = !1, n = 0; --i >= 0; ) {\n    var h = r == 8 ? e[i] & 255 : wt(e, i);\n    if (h < 0) {\n      e.charAt(i) == \"-\" && (s = !0);\n      continue;\n    }\n    s = !1, n == 0 ? this[this.t++] = h : n + r > this.DB ? (this[this.t - 1] |= (h & (1 << this.DB - n) - 1) << n, this[this.t++] = h >> this.DB - n) : this[this.t - 1] |= h << n, n += r, n >= this.DB && (n -= this.DB);\n  }\n  r == 8 && e[0] & 128 && (this.s = -1, n > 0 && (this[this.t - 1] |= (1 << this.DB - n) - 1 << n)), this.clamp(), s && R.ZERO.subTo(this, this);\n}\nfunction Wt() {\n  for (var e = this.s & this.DM; this.t > 0 && this[this.t - 1] == e; )\n    --this.t;\n}\nfunction Xt(e) {\n  if (this.s < 0)\n    return \"-\" + this.negate().toString(e);\n  var t;\n  if (e == 16)\n    t = 4;\n  else if (e == 8)\n    t = 3;\n  else if (e == 2)\n    t = 1;\n  else if (e == 32)\n    t = 5;\n  else if (e == 4)\n    t = 2;\n  else\n    return this.toRadix(e);\n  var r = (1 << t) - 1, i, s = !1, n = \"\", h = this.t, u = this.DB - h * this.DB % t;\n  if (h-- > 0)\n    for (u < this.DB && (i = this[h] >> u) > 0 && (s = !0, n = De(i)); h >= 0; )\n      u < t ? (i = (this[h] & (1 << u) - 1) << t - u, i |= this[--h] >> (u += this.DB - t)) : (i = this[h] >> (u -= t) & r, u <= 0 && (u += this.DB, --h)), i > 0 && (s = !0), s && (n += De(i));\n  return s ? n : \"0\";\n}\nfunction Jt() {\n  var e = _();\n  return R.ZERO.subTo(this, e), e;\n}\nfunction $t() {\n  return this.s < 0 ? this.negate() : this;\n}\nfunction Yt(e) {\n  var t = this.s - e.s;\n  if (t != 0)\n    return t;\n  var r = this.t;\n  if (t = r - e.t, t != 0)\n    return this.s < 0 ? -t : t;\n  for (; --r >= 0; )\n    if ((t = this[r] - e[r]) != 0)\n      return t;\n  return 0;\n}\nfunction Ye(e) {\n  var t = 1, r;\n  return (r = e >>> 16) != 0 && (e = r, t += 16), (r = e >> 8) != 0 && (e = r, t += 8), (r = e >> 4) != 0 && (e = r, t += 4), (r = e >> 2) != 0 && (e = r, t += 2), (r = e >> 1) != 0 && (e = r, t += 1), t;\n}\nfunction Zt() {\n  return this.t <= 0 ? 0 : this.DB * (this.t - 1) + Ye(this[this.t - 1] ^ this.s & this.DM);\n}\nfunction Qt(e, t) {\n  var r;\n  for (r = this.t - 1; r >= 0; --r)\n    t[r + e] = this[r];\n  for (r = e - 1; r >= 0; --r)\n    t[r] = 0;\n  t.t = this.t + e, t.s = this.s;\n}\nfunction er(e, t) {\n  for (var r = e; r < this.t; ++r)\n    t[r - e] = this[r];\n  t.t = Math.max(this.t - e, 0), t.s = this.s;\n}\nfunction tr(e, t) {\n  var r = e % this.DB, i = this.DB - r, s = (1 << i) - 1, n = Math.floor(e / this.DB), h = this.s << r & this.DM, u;\n  for (u = this.t - 1; u >= 0; --u)\n    t[u + n + 1] = this[u] >> i | h, h = (this[u] & s) << r;\n  for (u = n - 1; u >= 0; --u)\n    t[u] = 0;\n  t[n] = h, t.t = this.t + n + 1, t.s = this.s, t.clamp();\n}\nfunction rr(e, t) {\n  t.s = this.s;\n  var r = Math.floor(e / this.DB);\n  if (r >= this.t) {\n    t.t = 0;\n    return;\n  }\n  var i = e % this.DB, s = this.DB - i, n = (1 << i) - 1;\n  t[0] = this[r] >> i;\n  for (var h = r + 1; h < this.t; ++h)\n    t[h - r - 1] |= (this[h] & n) << s, t[h - r] = this[h] >> i;\n  i > 0 && (t[this.t - r - 1] |= (this.s & n) << s), t.t = this.t - r, t.clamp();\n}\nfunction ir(e, t) {\n  for (var r = 0, i = 0, s = Math.min(e.t, this.t); r < s; )\n    i += this[r] - e[r], t[r++] = i & this.DM, i >>= this.DB;\n  if (e.t < this.t) {\n    for (i -= e.s; r < this.t; )\n      i += this[r], t[r++] = i & this.DM, i >>= this.DB;\n    i += this.s;\n  } else {\n    for (i += this.s; r < e.t; )\n      i -= e[r], t[r++] = i & this.DM, i >>= this.DB;\n    i -= e.s;\n  }\n  t.s = i < 0 ? -1 : 0, i < -1 ? t[r++] = this.DV + i : i > 0 && (t[r++] = i), t.t = r, t.clamp();\n}\nfunction nr(e, t) {\n  var r = this.abs(), i = e.abs(), s = r.t;\n  for (t.t = s + i.t; --s >= 0; )\n    t[s] = 0;\n  for (s = 0; s < i.t; ++s)\n    t[s + r.t] = r.am(0, i[s], t, s, 0, r.t);\n  t.s = 0, t.clamp(), this.s != e.s && R.ZERO.subTo(t, t);\n}\nfunction sr(e) {\n  for (var t = this.abs(), r = e.t = 2 * t.t; --r >= 0; )\n    e[r] = 0;\n  for (r = 0; r < t.t - 1; ++r) {\n    var i = t.am(r, t[r], e, 2 * r, 0, 1);\n    (e[r + t.t] += t.am(r + 1, 2 * t[r], e, 2 * r + 1, i, t.t - r - 1)) >= t.DV && (e[r + t.t] -= t.DV, e[r + t.t + 1] = 1);\n  }\n  e.t > 0 && (e[e.t - 1] += t.am(r, t[r], e, 2 * r, 0, 1)), e.s = 0, e.clamp();\n}\nfunction ar(e, t, r) {\n  var i = e.abs();\n  if (!(i.t <= 0)) {\n    var s = this.abs();\n    if (s.t < i.t) {\n      t != null && t.fromInt(0), r != null && this.copyTo(r);\n      return;\n    }\n    r == null && (r = _());\n    var n = _(), h = this.s, u = e.s, p = this.DB - Ye(i[i.t - 1]);\n    p > 0 ? (i.lShiftTo(p, n), s.lShiftTo(p, r)) : (i.copyTo(n), s.copyTo(r));\n    var c = n.t, y = n[c - 1];\n    if (y != 0) {\n      var v = y * (1 << this.F1) + (c > 1 ? n[c - 2] >> this.F2 : 0), o = this.FV / v, l = (1 << this.F1) / v, f = 1 << this.F2, d = r.t, g = d - c, S = t ?? _();\n      for (n.dlShiftTo(g, S), r.compareTo(S) >= 0 && (r[r.t++] = 1, r.subTo(S, r)), R.ONE.dlShiftTo(c, S), S.subTo(n, n); n.t < c; )\n        n[n.t++] = 0;\n      for (; --g >= 0; ) {\n        var b = r[--d] == y ? this.DM : Math.floor(r[d] * o + (r[d - 1] + f) * l);\n        if ((r[d] += n.am(0, b, r, g, 0, c)) < b)\n          for (n.dlShiftTo(g, S), r.subTo(S, r); r[d] < --b; )\n            r.subTo(S, r);\n      }\n      t != null && (r.drShiftTo(c, t), h != u && R.ZERO.subTo(t, t)), r.t = c, r.clamp(), p > 0 && r.rShiftTo(p, r), h < 0 && R.ZERO.subTo(r, r);\n    }\n  }\n}\nfunction or(e) {\n  var t = _();\n  return this.abs().divRemTo(e, null, t), this.s < 0 && t.compareTo(R.ZERO) > 0 && e.subTo(t, t), t;\n}\nfunction Oe(e) {\n  this.m = e;\n}\nfunction ur(e) {\n  return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e;\n}\nfunction hr(e) {\n  return e;\n}\nfunction fr(e) {\n  e.divRemTo(this.m, null, e);\n}\nfunction cr(e, t, r) {\n  e.multiplyTo(t, r), this.reduce(r);\n}\nfunction lr(e, t) {\n  e.squareTo(t), this.reduce(t);\n}\nOe.prototype.convert = ur;\nOe.prototype.revert = hr;\nOe.prototype.reduce = fr;\nOe.prototype.mulTo = cr;\nOe.prototype.sqrTo = lr;\nfunction dr() {\n  if (this.t < 1)\n    return 0;\n  var e = this[0];\n  if (!(e & 1))\n    return 0;\n  var t = e & 3;\n  return t = t * (2 - (e & 15) * t) & 15, t = t * (2 - (e & 255) * t) & 255, t = t * (2 - ((e & 65535) * t & 65535)) & 65535, t = t * (2 - e * t % this.DV) % this.DV, t > 0 ? this.DV - t : -t;\n}\nfunction je(e) {\n  this.m = e, this.mp = e.invDigit(), this.mpl = this.mp & 32767, this.mph = this.mp >> 15, this.um = (1 << e.DB - 15) - 1, this.mt2 = 2 * e.t;\n}\nfunction pr(e) {\n  var t = _();\n  return e.abs().dlShiftTo(this.m.t, t), t.divRemTo(this.m, null, t), e.s < 0 && t.compareTo(R.ZERO) > 0 && this.m.subTo(t, t), t;\n}\nfunction vr(e) {\n  var t = _();\n  return e.copyTo(t), this.reduce(t), t;\n}\nfunction gr(e) {\n  for (; e.t <= this.mt2; )\n    e[e.t++] = 0;\n  for (var t = 0; t < this.m.t; ++t) {\n    var r = e[t] & 32767, i = r * this.mpl + ((r * this.mph + (e[t] >> 15) * this.mpl & this.um) << 15) & e.DM;\n    for (r = t + this.m.t, e[r] += this.m.am(0, i, e, t, 0, this.m.t); e[r] >= e.DV; )\n      e[r] -= e.DV, e[++r]++;\n  }\n  e.clamp(), e.drShiftTo(this.m.t, e), e.compareTo(this.m) >= 0 && e.subTo(this.m, e);\n}\nfunction yr(e, t) {\n  e.squareTo(t), this.reduce(t);\n}\nfunction mr(e, t, r) {\n  e.multiplyTo(t, r), this.reduce(r);\n}\nje.prototype.convert = pr;\nje.prototype.revert = vr;\nje.prototype.reduce = gr;\nje.prototype.mulTo = mr;\nje.prototype.sqrTo = yr;\nfunction xr() {\n  return (this.t > 0 ? this[0] & 1 : this.s) == 0;\n}\nfunction Sr(e, t) {\n  if (e > 4294967295 || e < 1)\n    return R.ONE;\n  var r = _(), i = _(), s = t.convert(this), n = Ye(e) - 1;\n  for (s.copyTo(r); --n >= 0; )\n    if (t.sqrTo(r, i), (e & 1 << n) > 0)\n      t.mulTo(i, s, r);\n    else {\n      var h = r;\n      r = i, i = h;\n    }\n  return t.revert(r);\n}\nfunction Er(e, t) {\n  var r;\n  return e < 256 || t.isEven() ? r = new Oe(t) : r = new je(t), this.exp(e, r);\n}\nR.prototype.copyTo = Ut;\nR.prototype.fromInt = zt;\nR.prototype.fromString = Gt;\nR.prototype.clamp = Wt;\nR.prototype.dlShiftTo = Qt;\nR.prototype.drShiftTo = er;\nR.prototype.lShiftTo = tr;\nR.prototype.rShiftTo = rr;\nR.prototype.subTo = ir;\nR.prototype.multiplyTo = nr;\nR.prototype.squareTo = sr;\nR.prototype.divRemTo = ar;\nR.prototype.invDigit = dr;\nR.prototype.isEven = xr;\nR.prototype.exp = Sr;\nR.prototype.toString = Xt;\nR.prototype.negate = Jt;\nR.prototype.abs = $t;\nR.prototype.compareTo = Yt;\nR.prototype.bitLength = Zt;\nR.prototype.mod = or;\nR.prototype.modPowInt = Er;\nR.ZERO = Re(0);\nR.ONE = Re(1);\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nfunction wr() {\n  var e = _();\n  return this.copyTo(e), e;\n}\nfunction Fr() {\n  if (this.s < 0) {\n    if (this.t == 1)\n      return this[0] - this.DV;\n    if (this.t == 0)\n      return -1;\n  } else {\n    if (this.t == 1)\n      return this[0];\n    if (this.t == 0)\n      return 0;\n  }\n  return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];\n}\nfunction br() {\n  return this.t == 0 ? this.s : this[0] << 24 >> 24;\n}\nfunction Ar() {\n  return this.t == 0 ? this.s : this[0] << 16 >> 16;\n}\nfunction Dr(e) {\n  return Math.floor(Math.LN2 * this.DB / Math.log(e));\n}\nfunction Pr() {\n  return this.s < 0 ? -1 : this.t <= 0 || this.t == 1 && this[0] <= 0 ? 0 : 1;\n}\nfunction Ir(e) {\n  if (e == null && (e = 10), this.signum() == 0 || e < 2 || e > 36)\n    return \"0\";\n  var t = this.chunkSize(e), r = Math.pow(e, t), i = Re(r), s = _(), n = _(), h = \"\";\n  for (this.divRemTo(i, s, n); s.signum() > 0; )\n    h = (r + n.intValue()).toString(e).substr(1) + h, s.divRemTo(i, s, n);\n  return n.intValue().toString(e) + h;\n}\nfunction Cr(e, t) {\n  this.fromInt(0), t == null && (t = 10);\n  for (var r = this.chunkSize(t), i = Math.pow(t, r), s = !1, n = 0, h = 0, u = 0; u < e.length; ++u) {\n    var p = wt(e, u);\n    if (p < 0) {\n      e.charAt(u) == \"-\" && this.signum() == 0 && (s = !0);\n      continue;\n    }\n    h = t * h + p, ++n >= r && (this.dMultiply(i), this.dAddOffset(h, 0), n = 0, h = 0);\n  }\n  n > 0 && (this.dMultiply(Math.pow(t, n)), this.dAddOffset(h, 0)), s && R.ZERO.subTo(this, this);\n}\nfunction Rr(e, t, r) {\n  if (typeof t == \"number\")\n    if (e < 2)\n      this.fromInt(1);\n    else\n      for (this.fromNumber(e, r), this.testBit(e - 1) || this.bitwiseTo(R.ONE.shiftLeft(e - 1), st, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(t); )\n        this.dAddOffset(2, 0), this.bitLength() > e && this.subTo(R.ONE.shiftLeft(e - 1), this);\n  else {\n    var i = new Array(), s = e & 7;\n    i.length = (e >> 3) + 1, t.nextBytes(i), s > 0 ? i[0] &= (1 << s) - 1 : i[0] = 0, this.fromString(i, 256);\n  }\n}\nfunction Tr() {\n  var e = this.t, t = new Array();\n  t[0] = this.s;\n  var r = this.DB - e * this.DB % 8, i, s = 0;\n  if (e-- > 0)\n    for (r < this.DB && (i = this[e] >> r) != (this.s & this.DM) >> r && (t[s++] = i | this.s << this.DB - r); e >= 0; )\n      r < 8 ? (i = (this[e] & (1 << r) - 1) << 8 - r, i |= this[--e] >> (r += this.DB - 8)) : (i = this[e] >> (r -= 8) & 255, r <= 0 && (r += this.DB, --e)), i & 128 && (i |= -256), s == 0 && (this.s & 128) != (i & 128) && ++s, (s > 0 || i != this.s) && (t[s++] = i);\n  return t;\n}\nfunction Br(e) {\n  return this.compareTo(e) == 0;\n}\nfunction Nr(e) {\n  return this.compareTo(e) < 0 ? this : e;\n}\nfunction Hr(e) {\n  return this.compareTo(e) > 0 ? this : e;\n}\nfunction Or(e, t, r) {\n  var i, s, n = Math.min(e.t, this.t);\n  for (i = 0; i < n; ++i)\n    r[i] = t(this[i], e[i]);\n  if (e.t < this.t) {\n    for (s = e.s & this.DM, i = n; i < this.t; ++i)\n      r[i] = t(this[i], s);\n    r.t = this.t;\n  } else {\n    for (s = this.s & this.DM, i = n; i < e.t; ++i)\n      r[i] = t(s, e[i]);\n    r.t = e.t;\n  }\n  r.s = t(this.s, e.s), r.clamp();\n}\nfunction jr(e, t) {\n  return e & t;\n}\nfunction Vr(e) {\n  var t = _();\n  return this.bitwiseTo(e, jr, t), t;\n}\nfunction st(e, t) {\n  return e | t;\n}\nfunction Kr(e) {\n  var t = _();\n  return this.bitwiseTo(e, st, t), t;\n}\nfunction Ft(e, t) {\n  return e ^ t;\n}\nfunction Lr(e) {\n  var t = _();\n  return this.bitwiseTo(e, Ft, t), t;\n}\nfunction bt(e, t) {\n  return e & ~t;\n}\nfunction qr(e) {\n  var t = _();\n  return this.bitwiseTo(e, bt, t), t;\n}\nfunction kr() {\n  for (var e = _(), t = 0; t < this.t; ++t)\n    e[t] = this.DM & ~this[t];\n  return e.t = this.t, e.s = ~this.s, e;\n}\nfunction Mr(e) {\n  var t = _();\n  return e < 0 ? this.rShiftTo(-e, t) : this.lShiftTo(e, t), t;\n}\nfunction _r(e) {\n  var t = _();\n  return e < 0 ? this.lShiftTo(-e, t) : this.rShiftTo(e, t), t;\n}\nfunction Ur(e) {\n  if (e == 0)\n    return -1;\n  var t = 0;\n  return e & 65535 || (e >>= 16, t += 16), e & 255 || (e >>= 8, t += 8), e & 15 || (e >>= 4, t += 4), e & 3 || (e >>= 2, t += 2), e & 1 || ++t, t;\n}\nfunction zr() {\n  for (var e = 0; e < this.t; ++e)\n    if (this[e] != 0)\n      return e * this.DB + Ur(this[e]);\n  return this.s < 0 ? this.t * this.DB : -1;\n}\nfunction Gr(e) {\n  for (var t = 0; e != 0; )\n    e &= e - 1, ++t;\n  return t;\n}\nfunction Wr() {\n  for (var e = 0, t = this.s & this.DM, r = 0; r < this.t; ++r)\n    e += Gr(this[r] ^ t);\n  return e;\n}\nfunction Xr(e) {\n  var t = Math.floor(e / this.DB);\n  return t >= this.t ? this.s != 0 : (this[t] & 1 << e % this.DB) != 0;\n}\nfunction Jr(e, t) {\n  var r = R.ONE.shiftLeft(e);\n  return this.bitwiseTo(r, t, r), r;\n}\nfunction $r(e) {\n  return this.changeBit(e, st);\n}\nfunction Yr(e) {\n  return this.changeBit(e, bt);\n}\nfunction Zr(e) {\n  return this.changeBit(e, Ft);\n}\nfunction Qr(e, t) {\n  for (var r = 0, i = 0, s = Math.min(e.t, this.t); r < s; )\n    i += this[r] + e[r], t[r++] = i & this.DM, i >>= this.DB;\n  if (e.t < this.t) {\n    for (i += e.s; r < this.t; )\n      i += this[r], t[r++] = i & this.DM, i >>= this.DB;\n    i += this.s;\n  } else {\n    for (i += this.s; r < e.t; )\n      i += e[r], t[r++] = i & this.DM, i >>= this.DB;\n    i += e.s;\n  }\n  t.s = i < 0 ? -1 : 0, i > 0 ? t[r++] = i : i < -1 && (t[r++] = this.DV + i), t.t = r, t.clamp();\n}\nfunction ei(e) {\n  var t = _();\n  return this.addTo(e, t), t;\n}\nfunction ti(e) {\n  var t = _();\n  return this.subTo(e, t), t;\n}\nfunction ri(e) {\n  var t = _();\n  return this.multiplyTo(e, t), t;\n}\nfunction ii() {\n  var e = _();\n  return this.squareTo(e), e;\n}\nfunction ni(e) {\n  var t = _();\n  return this.divRemTo(e, t, null), t;\n}\nfunction si(e) {\n  var t = _();\n  return this.divRemTo(e, null, t), t;\n}\nfunction ai(e) {\n  var t = _(), r = _();\n  return this.divRemTo(e, t, r), new Array(t, r);\n}\nfunction oi(e) {\n  this[this.t] = this.am(0, e - 1, this, 0, 0, this.t), ++this.t, this.clamp();\n}\nfunction ui(e, t) {\n  if (e != 0) {\n    for (; this.t <= t; )\n      this[this.t++] = 0;\n    for (this[t] += e; this[t] >= this.DV; )\n      this[t] -= this.DV, ++t >= this.t && (this[this.t++] = 0), ++this[t];\n  }\n}\nfunction ze() {\n}\nfunction At(e) {\n  return e;\n}\nfunction hi(e, t, r) {\n  e.multiplyTo(t, r);\n}\nfunction fi(e, t) {\n  e.squareTo(t);\n}\nze.prototype.convert = At;\nze.prototype.revert = At;\nze.prototype.mulTo = hi;\nze.prototype.sqrTo = fi;\nfunction ci(e) {\n  return this.exp(e, new ze());\n}\nfunction li(e, t, r) {\n  var i = Math.min(this.t + e.t, t);\n  for (r.s = 0, r.t = i; i > 0; )\n    r[--i] = 0;\n  var s;\n  for (s = r.t - this.t; i < s; ++i)\n    r[i + this.t] = this.am(0, e[i], r, i, 0, this.t);\n  for (s = Math.min(e.t, t); i < s; ++i)\n    this.am(0, e[i], r, i, 0, t - i);\n  r.clamp();\n}\nfunction di(e, t, r) {\n  --t;\n  var i = r.t = this.t + e.t - t;\n  for (r.s = 0; --i >= 0; )\n    r[i] = 0;\n  for (i = Math.max(t - this.t, 0); i < e.t; ++i)\n    r[this.t + i - t] = this.am(t - i, e[i], r, 0, 0, this.t + i - t);\n  r.clamp(), r.drShiftTo(1, r);\n}\nfunction qe(e) {\n  this.r2 = _(), this.q3 = _(), R.ONE.dlShiftTo(2 * e.t, this.r2), this.mu = this.r2.divide(e), this.m = e;\n}\nfunction pi(e) {\n  if (e.s < 0 || e.t > 2 * this.m.t)\n    return e.mod(this.m);\n  if (e.compareTo(this.m) < 0)\n    return e;\n  var t = _();\n  return e.copyTo(t), this.reduce(t), t;\n}\nfunction vi(e) {\n  return e;\n}\nfunction gi(e) {\n  for (e.drShiftTo(this.m.t - 1, this.r2), e.t > this.m.t + 1 && (e.t = this.m.t + 1, e.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); e.compareTo(this.r2) < 0; )\n    e.dAddOffset(1, this.m.t + 1);\n  for (e.subTo(this.r2, e); e.compareTo(this.m) >= 0; )\n    e.subTo(this.m, e);\n}\nfunction yi(e, t) {\n  e.squareTo(t), this.reduce(t);\n}\nfunction mi(e, t, r) {\n  e.multiplyTo(t, r), this.reduce(r);\n}\nqe.prototype.convert = pi;\nqe.prototype.revert = vi;\nqe.prototype.reduce = gi;\nqe.prototype.mulTo = mi;\nqe.prototype.sqrTo = yi;\nfunction xi(e, t) {\n  var r = e.bitLength(), i, s = Re(1), n;\n  if (r <= 0)\n    return s;\n  r < 18 ? i = 1 : r < 48 ? i = 3 : r < 144 ? i = 4 : r < 768 ? i = 5 : i = 6, r < 8 ? n = new Oe(t) : t.isEven() ? n = new qe(t) : n = new je(t);\n  var h = new Array(), u = 3, p = i - 1, c = (1 << i) - 1;\n  if (h[1] = n.convert(this), i > 1) {\n    var y = _();\n    for (n.sqrTo(h[1], y); u <= c; )\n      h[u] = _(), n.mulTo(y, h[u - 2], h[u]), u += 2;\n  }\n  var v = e.t - 1, o, l = !0, f = _(), d;\n  for (r = Ye(e[v]) - 1; v >= 0; ) {\n    for (r >= p ? o = e[v] >> r - p & c : (o = (e[v] & (1 << r + 1) - 1) << p - r, v > 0 && (o |= e[v - 1] >> this.DB + r - p)), u = i; !(o & 1); )\n      o >>= 1, --u;\n    if ((r -= u) < 0 && (r += this.DB, --v), l)\n      h[o].copyTo(s), l = !1;\n    else {\n      for (; u > 1; )\n        n.sqrTo(s, f), n.sqrTo(f, s), u -= 2;\n      u > 0 ? n.sqrTo(s, f) : (d = s, s = f, f = d), n.mulTo(f, h[o], s);\n    }\n    for (; v >= 0 && !(e[v] & 1 << r); )\n      n.sqrTo(s, f), d = s, s = f, f = d, --r < 0 && (r = this.DB - 1, --v);\n  }\n  return n.revert(s);\n}\nfunction Si(e) {\n  var t = this.s < 0 ? this.negate() : this.clone(), r = e.s < 0 ? e.negate() : e.clone();\n  if (t.compareTo(r) < 0) {\n    var i = t;\n    t = r, r = i;\n  }\n  var s = t.getLowestSetBit(), n = r.getLowestSetBit();\n  if (n < 0)\n    return t;\n  for (s < n && (n = s), n > 0 && (t.rShiftTo(n, t), r.rShiftTo(n, r)); t.signum() > 0; )\n    (s = t.getLowestSetBit()) > 0 && t.rShiftTo(s, t), (s = r.getLowestSetBit()) > 0 && r.rShiftTo(s, r), t.compareTo(r) >= 0 ? (t.subTo(r, t), t.rShiftTo(1, t)) : (r.subTo(t, r), r.rShiftTo(1, r));\n  return n > 0 && r.lShiftTo(n, r), r;\n}\nfunction Ei(e) {\n  if (e <= 0)\n    return 0;\n  var t = this.DV % e, r = this.s < 0 ? e - 1 : 0;\n  if (this.t > 0)\n    if (t == 0)\n      r = this[0] % e;\n    else\n      for (var i = this.t - 1; i >= 0; --i)\n        r = (t * r + this[i]) % e;\n  return r;\n}\nfunction wi(e) {\n  var t = e.isEven();\n  if (this.isEven() && t || e.signum() == 0)\n    return R.ZERO;\n  for (var r = e.clone(), i = this.clone(), s = Re(1), n = Re(0), h = Re(0), u = Re(1); r.signum() != 0; ) {\n    for (; r.isEven(); )\n      r.rShiftTo(1, r), t ? ((!s.isEven() || !n.isEven()) && (s.addTo(this, s), n.subTo(e, n)), s.rShiftTo(1, s)) : n.isEven() || n.subTo(e, n), n.rShiftTo(1, n);\n    for (; i.isEven(); )\n      i.rShiftTo(1, i), t ? ((!h.isEven() || !u.isEven()) && (h.addTo(this, h), u.subTo(e, u)), h.rShiftTo(1, h)) : u.isEven() || u.subTo(e, u), u.rShiftTo(1, u);\n    r.compareTo(i) >= 0 ? (r.subTo(i, r), t && s.subTo(h, s), n.subTo(u, n)) : (i.subTo(r, i), t && h.subTo(s, h), u.subTo(n, u));\n  }\n  if (i.compareTo(R.ONE) != 0)\n    return R.ZERO;\n  if (u.compareTo(e) >= 0)\n    return u.subtract(e);\n  if (u.signum() < 0)\n    u.addTo(e, u);\n  else\n    return u;\n  return u.signum() < 0 ? u.add(e) : u;\n}\nvar le = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997], Fi = (1 << 26) / le[le.length - 1];\nfunction bi(e) {\n  var t, r = this.abs();\n  if (r.t == 1 && r[0] <= le[le.length - 1]) {\n    for (t = 0; t < le.length; ++t)\n      if (r[0] == le[t])\n        return !0;\n    return !1;\n  }\n  if (r.isEven())\n    return !1;\n  for (t = 1; t < le.length; ) {\n    for (var i = le[t], s = t + 1; s < le.length && i < Fi; )\n      i *= le[s++];\n    for (i = r.modInt(i); t < s; )\n      if (i % le[t++] == 0)\n        return !1;\n  }\n  return r.millerRabin(e);\n}\nfunction Ai(e) {\n  var t = this.subtract(R.ONE), r = t.getLowestSetBit();\n  if (r <= 0)\n    return !1;\n  var i = t.shiftRight(r);\n  e = e + 1 >> 1, e > le.length && (e = le.length);\n  for (var s = _(), n = 0; n < e; ++n) {\n    s.fromInt(le[Math.floor(Math.random() * le.length)]);\n    var h = s.modPow(i, this);\n    if (h.compareTo(R.ONE) != 0 && h.compareTo(t) != 0) {\n      for (var u = 1; u++ < r && h.compareTo(t) != 0; )\n        if (h = h.modPowInt(2, this), h.compareTo(R.ONE) == 0)\n          return !1;\n      if (h.compareTo(t) != 0)\n        return !1;\n    }\n  }\n  return !0;\n}\nR.prototype.chunkSize = Dr;\nR.prototype.toRadix = Ir;\nR.prototype.fromRadix = Cr;\nR.prototype.fromNumber = Rr;\nR.prototype.bitwiseTo = Or;\nR.prototype.changeBit = Jr;\nR.prototype.addTo = Qr;\nR.prototype.dMultiply = oi;\nR.prototype.dAddOffset = ui;\nR.prototype.multiplyLowerTo = li;\nR.prototype.multiplyUpperTo = di;\nR.prototype.modInt = Ei;\nR.prototype.millerRabin = Ai;\nR.prototype.clone = wr;\nR.prototype.intValue = Fr;\nR.prototype.byteValue = br;\nR.prototype.shortValue = Ar;\nR.prototype.signum = Pr;\nR.prototype.toByteArray = Tr;\nR.prototype.equals = Br;\nR.prototype.min = Nr;\nR.prototype.max = Hr;\nR.prototype.and = Vr;\nR.prototype.or = Kr;\nR.prototype.xor = Lr;\nR.prototype.andNot = qr;\nR.prototype.not = kr;\nR.prototype.shiftLeft = Mr;\nR.prototype.shiftRight = _r;\nR.prototype.getLowestSetBit = zr;\nR.prototype.bitCount = Wr;\nR.prototype.testBit = Xr;\nR.prototype.setBit = $r;\nR.prototype.clearBit = Yr;\nR.prototype.flipBit = Zr;\nR.prototype.add = ei;\nR.prototype.subtract = ti;\nR.prototype.multiply = ri;\nR.prototype.divide = ni;\nR.prototype.remainder = si;\nR.prototype.divideAndRemainder = ai;\nR.prototype.modPow = xi;\nR.prototype.modInverse = wi;\nR.prototype.pow = ci;\nR.prototype.gcd = Si;\nR.prototype.isProbablePrime = bi;\nR.prototype.square = ii;\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nfunction at() {\n  this.i = 0, this.j = 0, this.S = new Array();\n}\nfunction Di(e) {\n  var t, r, i;\n  for (t = 0; t < 256; ++t)\n    this.S[t] = t;\n  for (r = 0, t = 0; t < 256; ++t)\n    r = r + this.S[t] + e[t % e.length] & 255, i = this.S[t], this.S[t] = this.S[r], this.S[r] = i;\n  this.i = 0, this.j = 0;\n}\nfunction Pi() {\n  var e;\n  return this.i = this.i + 1 & 255, this.j = this.j + this.S[this.i] & 255, e = this.S[this.i], this.S[this.i] = this.S[this.j], this.S[this.j] = e, this.S[e + this.S[this.i] & 255];\n}\nat.prototype.init = Di;\nat.prototype.next = Pi;\nfunction Ii() {\n  return new at();\n}\nvar et = 256;\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nvar We, ge, oe;\nfunction Ci(e) {\n  ge[oe++] ^= e & 255, ge[oe++] ^= e >> 8 & 255, ge[oe++] ^= e >> 16 & 255, ge[oe++] ^= e >> 24 & 255, oe >= et && (oe -= et);\n}\nfunction Dt() {\n  Ci((/* @__PURE__ */ new Date()).getTime());\n}\nif (ge == null) {\n  ge = new Array(), oe = 0;\n  var Se;\n  if (Ve !== void 0 && (Ve.crypto !== void 0 || Ve.msCrypto !== void 0)) {\n    var lt = Ve.crypto || Ve.msCrypto;\n    if (lt.getRandomValues) {\n      var dt = new Uint8Array(32);\n      for (lt.getRandomValues(dt), Se = 0; Se < 32; ++Se)\n        ge[oe++] = dt[Se];\n    } else if (Ue.appName == \"Netscape\" && Ue.appVersion < \"5\") {\n      var pt = Ve.crypto.random(32);\n      for (Se = 0; Se < pt.length; ++Se)\n        ge[oe++] = pt.charCodeAt(Se) & 255;\n    }\n  }\n  for (; oe < et; )\n    Se = Math.floor(65536 * Math.random()), ge[oe++] = Se >>> 8, ge[oe++] = Se & 255;\n  oe = 0, Dt();\n}\nfunction Ri() {\n  if (We == null) {\n    for (Dt(), We = Ii(), We.init(ge), oe = 0; oe < ge.length; ++oe)\n      ge[oe] = 0;\n    oe = 0;\n  }\n  return We.next();\n}\nfunction Ti(e) {\n  var t;\n  for (t = 0; t < e.length; ++t)\n    e[t] = Ri();\n}\nfunction Ge() {\n}\nGe.prototype.nextBytes = Ti;\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nfunction ve(e, t) {\n  return new R(e, t);\n}\nfunction q() {\n  this.n = null, this.e = 0, this.d = null, this.p = null, this.q = null, this.dmp1 = null, this.dmq1 = null, this.coeff = null;\n}\nfunction Bi(e, t) {\n  if (this.isPublic = !0, this.isPrivate = !1, typeof e != \"string\")\n    this.n = e, this.e = t;\n  else if (e != null && t != null && e.length > 0 && t.length > 0)\n    this.n = ve(e, 16), this.e = parseInt(t, 16);\n  else\n    throw \"Invalid RSA public key\";\n}\nfunction Ni(e) {\n  return e.modPowInt(this.e, this.n);\n}\nq.prototype.doPublic = Ni;\nq.prototype.setPublic = Bi;\nq.prototype.type = \"RSA\";\nfunction Hi(e, t, r) {\n  if (this.isPrivate = !0, typeof e != \"string\")\n    this.n = e, this.e = t, this.d = r;\n  else if (e != null && t != null && e.length > 0 && t.length > 0)\n    this.n = ve(e, 16), this.e = parseInt(t, 16), this.d = ve(r, 16);\n  else\n    throw \"Invalid RSA private key\";\n}\nfunction Oi(e, t, r, i, s, n, h, u) {\n  if (this.isPrivate = !0, this.isPublic = !1, e == null)\n    throw \"RSASetPrivateEx N == null\";\n  if (t == null)\n    throw \"RSASetPrivateEx E == null\";\n  if (e.length == 0)\n    throw \"RSASetPrivateEx N.length == 0\";\n  if (t.length == 0)\n    throw \"RSASetPrivateEx E.length == 0\";\n  if (e != null && t != null && e.length > 0 && t.length > 0)\n    this.n = ve(e, 16), this.e = parseInt(t, 16), this.d = ve(r, 16), this.p = ve(i, 16), this.q = ve(s, 16), this.dmp1 = ve(n, 16), this.dmq1 = ve(h, 16), this.coeff = ve(u, 16);\n  else\n    throw \"Invalid RSA private key in RSASetPrivateEx\";\n}\nfunction ji(e, t) {\n  var r = new Ge(), i = e >> 1;\n  this.e = parseInt(t, 16);\n  for (var s = new R(t, 16), n = e / 2 - 100, h = R.ONE.shiftLeft(n); ; ) {\n    for (; this.p = new R(e - i, 1, r), !(this.p.subtract(R.ONE).gcd(s).compareTo(R.ONE) == 0 && this.p.isProbablePrime(10)); )\n      ;\n    for (; this.q = new R(i, 1, r), !(this.q.subtract(R.ONE).gcd(s).compareTo(R.ONE) == 0 && this.q.isProbablePrime(10)); )\n      ;\n    if (this.p.compareTo(this.q) <= 0) {\n      var u = this.p;\n      this.p = this.q, this.q = u;\n    }\n    var p = this.q.subtract(this.p).abs();\n    if (!(p.bitLength() < n || p.compareTo(h) <= 0)) {\n      var c = this.p.subtract(R.ONE), y = this.q.subtract(R.ONE), v = c.multiply(y);\n      if (v.gcd(s).compareTo(R.ONE) == 0 && (this.n = this.p.multiply(this.q), this.n.bitLength() == e)) {\n        this.d = s.modInverse(v), this.dmp1 = this.d.mod(c), this.dmq1 = this.d.mod(y), this.coeff = this.q.modInverse(this.p);\n        break;\n      }\n    }\n  }\n  this.isPrivate = !0;\n}\nfunction Vi(e) {\n  if (this.p == null || this.q == null)\n    return e.modPow(this.d, this.n);\n  for (var t = e.mod(this.p).modPow(this.dmp1, this.p), r = e.mod(this.q).modPow(this.dmq1, this.q); t.compareTo(r) < 0; )\n    t = t.add(this.p);\n  return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r);\n}\nq.prototype.doPrivate = Vi;\nq.prototype.setPrivate = Hi;\nq.prototype.setPrivateEx = Oi;\nq.prototype.generate = ji;\n/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/\n */\nfunction ue(e, t) {\n  this.x = t, this.q = e;\n}\nfunction Ki(e) {\n  return e == this ? !0 : this.q.equals(e.q) && this.x.equals(e.x);\n}\nfunction Li() {\n  return this.x;\n}\nfunction qi() {\n  return new ue(this.q, this.x.negate().mod(this.q));\n}\nfunction ki(e) {\n  return new ue(this.q, this.x.add(e.toBigInteger()).mod(this.q));\n}\nfunction Mi(e) {\n  return new ue(this.q, this.x.subtract(e.toBigInteger()).mod(this.q));\n}\nfunction _i(e) {\n  return new ue(this.q, this.x.multiply(e.toBigInteger()).mod(this.q));\n}\nfunction Ui() {\n  return new ue(this.q, this.x.square().mod(this.q));\n}\nfunction zi(e) {\n  return new ue(this.q, this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q));\n}\nue.prototype.equals = Ki;\nue.prototype.toBigInteger = Li;\nue.prototype.negate = qi;\nue.prototype.add = ki;\nue.prototype.subtract = Mi;\nue.prototype.multiply = _i;\nue.prototype.square = Ui;\nue.prototype.divide = zi;\nue.prototype.sqrt = function() {\n  return new ue(this.q, this.x.sqrt().mod(this.q));\n};\nfunction z(e, t, r, i) {\n  this.curve = e, this.x = t, this.y = r, i == null ? this.z = R.ONE : this.z = i, this.zinv = null;\n}\nfunction Gi() {\n  return this.zinv == null && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q));\n}\nfunction Wi() {\n  return this.zinv == null && (this.zinv = this.z.modInverse(this.curve.q)), this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q));\n}\nfunction Xi(e) {\n  if (e == this)\n    return !0;\n  if (this.isInfinity())\n    return e.isInfinity();\n  if (e.isInfinity())\n    return this.isInfinity();\n  var t, r;\n  return t = e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q), t.equals(R.ZERO) ? (r = e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q), r.equals(R.ZERO)) : !1;\n}\nfunction Ji() {\n  return this.x == null && this.y == null ? !0 : this.z.equals(R.ZERO) && !this.y.toBigInteger().equals(R.ZERO);\n}\nfunction $i() {\n  return new z(this.curve, this.x, this.y.negate(), this.z);\n}\nfunction Yi(e) {\n  if (this.isInfinity())\n    return e;\n  if (e.isInfinity())\n    return this;\n  var t = e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q), r = e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);\n  if (R.ZERO.equals(r))\n    return R.ZERO.equals(t) ? this.twice() : this.curve.getInfinity();\n  var i = new R(\"3\"), s = this.x.toBigInteger(), n = this.y.toBigInteger();\n  e.x.toBigInteger(), e.y.toBigInteger();\n  var h = r.square(), u = h.multiply(r), p = s.multiply(h), c = t.square().multiply(this.z), y = c.subtract(p.shiftLeft(1)).multiply(e.z).subtract(u).multiply(r).mod(this.curve.q), v = p.multiply(i).multiply(t).subtract(n.multiply(u)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(u)).mod(this.curve.q), o = u.multiply(this.z).multiply(e.z).mod(this.curve.q);\n  return new z(this.curve, this.curve.fromBigInteger(y), this.curve.fromBigInteger(v), o);\n}\nfunction Zi() {\n  if (this.isInfinity())\n    return this;\n  if (this.y.toBigInteger().signum() == 0)\n    return this.curve.getInfinity();\n  var e = new R(\"3\"), t = this.x.toBigInteger(), r = this.y.toBigInteger(), i = r.multiply(this.z), s = i.multiply(r).mod(this.curve.q), n = this.curve.a.toBigInteger(), h = t.square().multiply(e);\n  R.ZERO.equals(n) || (h = h.add(this.z.square().multiply(n))), h = h.mod(this.curve.q);\n  var u = h.square().subtract(t.shiftLeft(3).multiply(s)).shiftLeft(1).multiply(i).mod(this.curve.q), p = h.multiply(e).multiply(t).subtract(s.shiftLeft(1)).shiftLeft(2).multiply(s).subtract(h.square().multiply(h)).mod(this.curve.q), c = i.square().multiply(i).shiftLeft(3).mod(this.curve.q);\n  return new z(this.curve, this.curve.fromBigInteger(u), this.curve.fromBigInteger(p), c);\n}\nfunction Qi(e) {\n  if (this.isInfinity())\n    return this;\n  if (e.signum() == 0)\n    return this.curve.getInfinity();\n  var t = e, r = t.multiply(new R(\"3\")), i = this.negate(), s = this, n = this.curve.q.subtract(e), h = n.multiply(new R(\"3\")), u = new z(this.curve, this.x, this.y), p = u.negate(), c;\n  for (c = r.bitLength() - 2; c > 0; --c) {\n    s = s.twice();\n    var y = r.testBit(c), v = t.testBit(c);\n    y != v && (s = s.add(y ? this : i));\n  }\n  for (c = h.bitLength() - 2; c > 0; --c) {\n    u = u.twice();\n    var o = h.testBit(c), l = n.testBit(c);\n    o != l && (u = u.add(o ? u : p));\n  }\n  return s;\n}\nfunction en(e, t, r) {\n  var i;\n  e.bitLength() > r.bitLength() ? i = e.bitLength() - 1 : i = r.bitLength() - 1;\n  for (var s = this.curve.getInfinity(), n = this.add(t); i >= 0; )\n    s = s.twice(), e.testBit(i) ? r.testBit(i) ? s = s.add(n) : s = s.add(this) : r.testBit(i) && (s = s.add(t)), --i;\n  return s;\n}\nz.prototype.getX = Gi;\nz.prototype.getY = Wi;\nz.prototype.equals = Xi;\nz.prototype.isInfinity = Ji;\nz.prototype.negate = $i;\nz.prototype.add = Yi;\nz.prototype.twice = Zi;\nz.prototype.multiply = Qi;\nz.prototype.multiplyTwo = en;\nfunction Be(e, t, r) {\n  this.q = e, this.a = this.fromBigInteger(t), this.b = this.fromBigInteger(r), this.infinity = new z(this, null, null);\n}\nfunction tn() {\n  return this.q;\n}\nfunction rn() {\n  return this.a;\n}\nfunction nn() {\n  return this.b;\n}\nfunction sn(e) {\n  return e == this ? !0 : this.q.equals(e.q) && this.a.equals(e.a) && this.b.equals(e.b);\n}\nfunction an() {\n  return this.infinity;\n}\nfunction on(e) {\n  return new ue(this.q, e);\n}\nfunction un(e) {\n  switch (parseInt(e.substr(0, 2), 16)) {\n    case 0:\n      return this.infinity;\n    case 2:\n    case 3:\n      var t = e.substr(0, 2);\n      e.substr(2);\n      var r = this.fromBigInteger(new R(p, 16)), i = this.getA(), s = this.getB(), n = r.square().add(i).multiply(r).add(s), h = n.sqrt();\n      return t == \"03\" && (h = h.negate()), new z(this, r, h);\n    case 4:\n    case 6:\n    case 7:\n      var u = (e.length - 2) / 2, p = e.substr(2, u), c = e.substr(u + 2, u);\n      return new z(this, this.fromBigInteger(new R(p, 16)), this.fromBigInteger(new R(c, 16)));\n    default:\n      return null;\n  }\n}\nBe.prototype.getQ = tn;\nBe.prototype.getA = rn;\nBe.prototype.getB = nn;\nBe.prototype.equals = sn;\nBe.prototype.getInfinity = an;\nBe.prototype.fromBigInteger = on;\nBe.prototype.decodePointHex = un;\n/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib\n */\nue.prototype.getByteLength = function() {\n  return Math.floor((this.toBigInteger().bitLength() + 7) / 8);\n};\nz.prototype.getEncoded = function(e) {\n  var t = function(n, h) {\n    var u = n.toByteArrayUnsigned();\n    if (h < u.length)\n      u = u.slice(u.length - h);\n    else\n      for (; h > u.length; )\n        u.unshift(0);\n    return u;\n  }, r = this.getX().toBigInteger(), i = this.getY().toBigInteger(), s = t(r, 32);\n  return e ? i.isEven() ? s.unshift(2) : s.unshift(3) : (s.unshift(4), s = s.concat(t(i, 32))), s;\n};\nz.decodeFrom = function(e, t) {\n  t[0];\n  var r = t.length - 1, i = t.slice(1, 1 + r / 2), s = t.slice(1 + r / 2, 1 + r);\n  i.unshift(0), s.unshift(0);\n  var n = new R(i), h = new R(s);\n  return new z(e, e.fromBigInteger(n), e.fromBigInteger(h));\n};\nz.decodeFromHex = function(e, t) {\n  t.substr(0, 2);\n  var r = t.length - 2, i = t.substr(2, r / 2), s = t.substr(2 + r / 2, r / 2), n = new R(i, 16), h = new R(s, 16);\n  return new z(e, e.fromBigInteger(n), e.fromBigInteger(h));\n};\nz.prototype.add2D = function(e) {\n  if (this.isInfinity())\n    return e;\n  if (e.isInfinity())\n    return this;\n  if (this.x.equals(e.x))\n    return this.y.equals(e.y) ? this.twice() : this.curve.getInfinity();\n  var t = e.x.subtract(this.x), r = e.y.subtract(this.y), i = r.divide(t), s = i.square().subtract(this.x).subtract(e.x), n = i.multiply(this.x.subtract(s)).subtract(this.y);\n  return new z(this.curve, s, n);\n};\nz.prototype.twice2D = function() {\n  if (this.isInfinity())\n    return this;\n  if (this.y.toBigInteger().signum() == 0)\n    return this.curve.getInfinity();\n  var e = this.curve.fromBigInteger(R.valueOf(2)), t = this.curve.fromBigInteger(R.valueOf(3)), r = this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)), i = r.square().subtract(this.x.multiply(e)), s = r.multiply(this.x.subtract(i)).subtract(this.y);\n  return new z(this.curve, i, s);\n};\nz.prototype.multiply2D = function(e) {\n  if (this.isInfinity())\n    return this;\n  if (e.signum() == 0)\n    return this.curve.getInfinity();\n  var t = e, r = t.multiply(new R(\"3\")), i = this.negate(), s = this, n;\n  for (n = r.bitLength() - 2; n > 0; --n) {\n    s = s.twice();\n    var h = r.testBit(n), u = t.testBit(n);\n    h != u && (s = s.add2D(h ? this : i));\n  }\n  return s;\n};\nz.prototype.isOnCurve = function() {\n  var e = this.getX().toBigInteger(), t = this.getY().toBigInteger(), r = this.curve.getA().toBigInteger(), i = this.curve.getB().toBigInteger(), s = this.curve.getQ(), n = t.multiply(t).mod(s), h = e.multiply(e).multiply(e).add(r.multiply(e)).add(i).mod(s);\n  return n.equals(h);\n};\nz.prototype.toString = function() {\n  return \"(\" + this.getX().toBigInteger().toString() + \",\" + this.getY().toBigInteger().toString() + \")\";\n};\nz.prototype.validate = function() {\n  var e = this.curve.getQ();\n  if (this.isInfinity())\n    throw new Error(\"Point is at infinity.\");\n  var t = this.getX().toBigInteger(), r = this.getY().toBigInteger();\n  if (t.compareTo(R.ONE) < 0 || t.compareTo(e.subtract(R.ONE)) > 0)\n    throw new Error(\"x coordinate out of bounds\");\n  if (r.compareTo(R.ONE) < 0 || r.compareTo(e.subtract(R.ONE)) > 0)\n    throw new Error(\"y coordinate out of bounds\");\n  if (!this.isOnCurve())\n    throw new Error(\"Point is not on the curve.\");\n  if (this.multiply(e).isInfinity())\n    throw new Error(\"Point is not a scalar multiple of G.\");\n  return !0;\n};\n/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval\n */\nvar Pt = function() {\n  var e = \"(?:-?\\\\b(?:0|[1-9][0-9]*)(?:\\\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\\\b)\", t = '(?:[^\\\\0-\\\\x08\\\\x0a-\\\\x1f\"\\\\\\\\]|\\\\\\\\(?:[\"/\\\\\\\\bfnrt]|u[0-9A-Fa-f]{4}))', r = '(?:\"' + t + '*\")', i = new RegExp(\"(?:false|true|null|[\\\\{\\\\}\\\\[\\\\]]|\" + e + \"|\" + r + \")\", \"g\"), s = new RegExp(\"\\\\\\\\(?:([^u])|u(.{4}))\", \"g\"), n = { '\"': '\"', \"/\": \"/\", \"\\\\\": \"\\\\\", b: \"\\b\", f: \"\\f\", n: `\n`, r: \"\\r\", t: \"\t\" };\n  function h(y, v, o) {\n    return v ? n[v] : String.fromCharCode(parseInt(o, 16));\n  }\n  var u = new String(\"\"), p = \"\\\\\", c = Object.hasOwnProperty;\n  return function(y, v) {\n    var o = y.match(i), l, f = o[0], d = !1;\n    f === \"{\" ? l = {} : f === \"[\" ? l = [] : (l = [], d = !0);\n    for (var g, S = [l], b = 1 - d, D = o.length; b < D; ++b) {\n      f = o[b];\n      var A;\n      switch (f.charCodeAt(0)) {\n        default:\n          A = S[0], A[g || A.length] = +f, g = void 0;\n          break;\n        case 34:\n          if (f = f.substring(1, f.length - 1), f.indexOf(p) !== -1 && (f = f.replace(s, h)), A = S[0], !g)\n            if (A instanceof Array)\n              g = A.length;\n            else {\n              g = f || u;\n              break;\n            }\n          A[g] = f, g = void 0;\n          break;\n        case 91:\n          A = S[0], S.unshift(A[g || A.length] = []), g = void 0;\n          break;\n        case 93:\n          S.shift();\n          break;\n        case 102:\n          A = S[0], A[g || A.length] = !1, g = void 0;\n          break;\n        case 110:\n          A = S[0], A[g || A.length] = null, g = void 0;\n          break;\n        case 116:\n          A = S[0], A[g || A.length] = !0, g = void 0;\n          break;\n        case 123:\n          A = S[0], S.unshift(A[g || A.length] = {}), g = void 0;\n          break;\n        case 125:\n          S.shift();\n          break;\n      }\n    }\n    if (d) {\n      if (S.length !== 1)\n        throw new Error();\n      l = l[0];\n    } else if (S.length)\n      throw new Error();\n    if (v) {\n      var I = function(m, E) {\n        var w = m[E];\n        if (w && typeof w == \"object\") {\n          var x = null;\n          for (var F in w)\n            if (c.call(w, F) && w !== m) {\n              var P = I(w, F);\n              P !== void 0 ? w[F] = P : (x || (x = []), x.push(F));\n            }\n          if (x)\n            for (var T = x.length; --T >= 0; )\n              delete w[x[T]];\n        }\n        return v.call(m, E, w);\n      };\n      l = I({ \"\": l }, \"\");\n    }\n    return l;\n  };\n}();\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\na.asn1.ASN1Util = new function() {\n  this.integerToByteHex = function(e) {\n    var t = e.toString(16);\n    return t.length % 2 == 1 && (t = \"0\" + t), t;\n  }, this.bigIntToMinTwosComplementsHex = function(e) {\n    return Ze(e);\n  }, this.getPEMStringFromHex = function(e, t) {\n    return de(e, t);\n  }, this.newObject = function(e) {\n    var t = a, r = t.asn1, i = r.ASN1Object, s = r.DERBoolean, n = r.DERInteger, h = r.DERBitString, u = r.DEROctetString, p = r.DERNull, c = r.DERObjectIdentifier, y = r.DEREnumerated, v = r.DERUTF8String, o = r.DERNumericString, l = r.DERPrintableString, f = r.DERTeletexString, d = r.DERIA5String, g = r.DERUTCTime, S = r.DERGeneralizedTime, b = r.DERVisibleString, D = r.DERBMPString, A = r.DERSequence, I = r.DERSet, m = r.DERTaggedObject, E = r.ASN1Util.newObject;\n    if (e instanceof r.ASN1Object)\n      return e;\n    var w = Object.keys(e);\n    if (w.length != 1)\n      throw new Error(\"key of param shall be only one.\");\n    var x = w[0];\n    if (\":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:\".indexOf(\":\" + x + \":\") == -1)\n      throw new Error(\"undefined key: \" + x);\n    if (x == \"bool\")\n      return new s(e[x]);\n    if (x == \"int\")\n      return new n(e[x]);\n    if (x == \"bitstr\")\n      return new h(e[x]);\n    if (x == \"octstr\")\n      return new u(e[x]);\n    if (x == \"null\")\n      return new p(e[x]);\n    if (x == \"oid\")\n      return new c(e[x]);\n    if (x == \"enum\")\n      return new y(e[x]);\n    if (x == \"utf8str\")\n      return new v(e[x]);\n    if (x == \"numstr\")\n      return new o(e[x]);\n    if (x == \"prnstr\")\n      return new l(e[x]);\n    if (x == \"telstr\")\n      return new f(e[x]);\n    if (x == \"ia5str\")\n      return new d(e[x]);\n    if (x == \"utctime\")\n      return new g(e[x]);\n    if (x == \"gentime\")\n      return new S(e[x]);\n    if (x == \"visstr\")\n      return new b(e[x]);\n    if (x == \"bmpstr\")\n      return new D(e[x]);\n    if (x == \"asn1\")\n      return new i(e[x]);\n    if (x == \"seq\") {\n      for (var F = e[x], P = [], T = 0; T < F.length; T++) {\n        var H = E(F[T]);\n        P.push(H);\n      }\n      return new A({ array: P });\n    }\n    if (x == \"set\") {\n      for (var F = e[x], P = [], T = 0; T < F.length; T++) {\n        var H = E(F[T]);\n        P.push(H);\n      }\n      return new I({ array: P });\n    }\n    if (x == \"tag\") {\n      var C = e[x];\n      if (Object.prototype.toString.call(C) === \"[object Array]\" && C.length == 3) {\n        var B = E(C[2]);\n        return new m({ tag: C[0], explicit: C[1], obj: B });\n      } else\n        return new m(C);\n    }\n  }, this.jsonToASN1HEX = function(e) {\n    var t = this.newObject(e);\n    return t.tohex();\n  };\n}();\na.asn1.ASN1Util.oidHexToInt = function(e) {\n  for (var s = \"\", t = parseInt(e.substr(0, 2), 16), r = Math.floor(t / 40), i = t % 40, s = r + \".\" + i, n = \"\", h = 2; h < e.length; h += 2) {\n    var u = parseInt(e.substr(h, 2), 16), p = (\"00000000\" + u.toString(2)).slice(-8);\n    if (n = n + p.substr(1, 7), p.substr(0, 1) == \"0\") {\n      var c = new R(n, 2);\n      s = s + \".\" + c.toString(10), n = \"\";\n    }\n  }\n  return s;\n};\na.asn1.ASN1Util.oidIntToHex = function(e) {\n  var t = function(u) {\n    var p = u.toString(16);\n    return p.length == 1 && (p = \"0\" + p), p;\n  }, r = function(u) {\n    var p = \"\", c = new R(u, 10), y = c.toString(2), v = 7 - y.length % 7;\n    v == 7 && (v = 0);\n    for (var o = \"\", l = 0; l < v; l++)\n      o += \"0\";\n    y = o + y;\n    for (var l = 0; l < y.length - 1; l += 7) {\n      var f = y.substr(l, 7);\n      l != y.length - 7 && (f = \"1\" + f), p += t(parseInt(f, 2));\n    }\n    return p;\n  };\n  if (!e.match(/^[0-9.]+$/))\n    throw \"malformed oid string: \" + e;\n  var i = \"\", s = e.split(\".\"), n = parseInt(s[0]) * 40 + parseInt(s[1]);\n  i += t(n), s.splice(0, 2);\n  for (var h = 0; h < s.length; h++)\n    i += r(s[h]);\n  return i;\n};\na.asn1.ASN1Object = function(e) {\n  var t = \"\";\n  this.params = null, this.getLengthHexFromValue = function() {\n    if (typeof this.hV > \"u\" || this.hV == null)\n      throw new Error(\"this.hV is null or undefined\");\n    if (this.hV.length % 2 == 1)\n      throw new Error(\"value hex must be even length: n=\" + t.length + \",v=\" + this.hV);\n    var r = this.hV.length / 2, i = r.toString(16);\n    if (i.length % 2 == 1 && (i = \"0\" + i), r < 128)\n      return i;\n    var s = i.length / 2;\n    if (s > 15)\n      throw new Error(\"ASN.1 length too long to represent by 8x: n = \" + r.toString(16));\n    var n = 128 + s;\n    return n.toString(16) + i;\n  }, this.tohex = function() {\n    return (this.hTLV == null || this.isModified) && (this.hV = this.getFreshValueHex(), this.hL = this.getLengthHexFromValue(), this.hTLV = this.hT + this.hL + this.hV, this.isModified = !1), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.getValueHex = function() {\n    return this.tohex(), this.hV;\n  }, this.getFreshValueHex = function() {\n    return \"\";\n  }, this.setByParam = function(r) {\n    this.params = r;\n  }, e != null && e.tlv != null && (this.hTLV = e.tlv, this.isModified = !1);\n};\na.asn1.DERAbstractString = function(e) {\n  a.asn1.DERAbstractString.superclass.constructor.call(this), this.getString = function() {\n    return this.s;\n  }, this.setString = function(t) {\n    this.hTLV = null, this.isModified = !0, this.s = t, this.hV = ht(this.s).toLowerCase();\n  }, this.setStringHex = function(t) {\n    this.hTLV = null, this.isModified = !0, this.s = null, this.hV = t;\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  }, typeof e < \"u\" && (typeof e == \"string\" ? this.setString(e) : typeof e.str < \"u\" ? this.setString(e.str) : typeof e.hex < \"u\" && this.setStringHex(e.hex));\n};\nN(a.asn1.DERAbstractString, a.asn1.ASN1Object);\na.asn1.DERAbstractTime = function(e) {\n  a.asn1.DERAbstractTime.superclass.constructor.call(this), this.localDateToUTC = function(t) {\n    var r = t.getTime() + t.getTimezoneOffset() * 6e4, i = new Date(r);\n    return i;\n  }, this.formatDate = function(t, r, i) {\n    var s = this.zeroPadding, n = this.localDateToUTC(t), h = String(n.getFullYear());\n    r == \"utc\" && (h = h.substr(2, 2));\n    var u = s(String(n.getMonth() + 1), 2), p = s(String(n.getDate()), 2), c = s(String(n.getHours()), 2), y = s(String(n.getMinutes()), 2), v = s(String(n.getSeconds()), 2), o = h + u + p + c + y + v;\n    if (i === !0) {\n      var l = n.getMilliseconds();\n      if (l != 0) {\n        var f = s(String(l), 3);\n        f = f.replace(/[0]+$/, \"\"), o = o + \".\" + f;\n      }\n    }\n    return o + \"Z\";\n  }, this.zeroPadding = function(t, r) {\n    return t.length >= r ? t : new Array(r - t.length + 1).join(\"0\") + t;\n  }, this.setByParam = function(t) {\n    this.hV = null, this.hTLV = null, this.params = t;\n  }, this.getString = function() {\n  }, this.setString = function(t) {\n    this.hTLV = null, this.isModified = !0, this.params == null && (this.params = {}), this.params.str = t;\n  }, this.setByDate = function(t) {\n    this.hTLV = null, this.isModified = !0, this.params == null && (this.params = {}), this.params.date = t;\n  }, this.setByDateValue = function(t, r, i, s, n, h) {\n    var u = new Date(Date.UTC(t, r - 1, i, s, n, h, 0));\n    this.setByDate(u);\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  };\n};\nN(a.asn1.DERAbstractTime, a.asn1.ASN1Object);\na.asn1.DERAbstractStructured = function(e) {\n  a.asn1.DERAbstractString.superclass.constructor.call(this), this.setByASN1ObjectArray = function(t) {\n    this.hTLV = null, this.isModified = !0, this.asn1Array = t;\n  }, this.appendASN1Object = function(t) {\n    this.hTLV = null, this.isModified = !0, this.asn1Array.push(t);\n  }, this.asn1Array = new Array(), typeof e < \"u\" && typeof e.array < \"u\" && (this.asn1Array = e.array);\n};\nN(a.asn1.DERAbstractStructured, a.asn1.ASN1Object);\na.asn1.DERBoolean = function(e) {\n  a.asn1.DERBoolean.superclass.constructor.call(this), this.hT = \"01\", e == !1 ? this.hTLV = \"010100\" : this.hTLV = \"0101ff\";\n};\nN(a.asn1.DERBoolean, a.asn1.ASN1Object);\na.asn1.DERInteger = function(e) {\n  a.asn1.DERInteger.superclass.constructor.call(this), this.hT = \"02\", this.params = null;\n  var t = Ze;\n  this.setByBigInteger = function(r) {\n    this.isModified = !0, this.params = { bigint: r };\n  }, this.setByInteger = function(r) {\n    this.isModified = !0, this.params = r;\n  }, this.setValueHex = function(r) {\n    this.isModified = !0, this.params = { hex: r };\n  }, this.getFreshValueHex = function() {\n    var r = this.params, i = null;\n    if (r == null)\n      throw new Error(\"value not set\");\n    if (typeof r == \"object\" && r.hex != null)\n      return this.hV = r.hex, this.hV;\n    if (typeof r == \"number\")\n      i = new R(String(r), 10);\n    else if (r.int != null)\n      i = new R(String(r.int), 10);\n    else if (r.bigint != null)\n      i = r.bigint;\n    else\n      throw new Error(\"wrong parameter\");\n    return this.hV = t(i), this.hV;\n  }, e != null && (this.params = e);\n};\nN(a.asn1.DERInteger, a.asn1.ASN1Object);\na.asn1.DERBitString = function(e) {\n  if (e !== void 0 && typeof e.obj < \"u\") {\n    var t = a.asn1.ASN1Util.newObject(e.obj);\n    e.hex = \"00\" + t.tohex();\n  }\n  a.asn1.DERBitString.superclass.constructor.call(this), this.hT = \"03\", this.setHexValueIncludingUnusedBits = function(r) {\n    this.hTLV = null, this.isModified = !0, this.hV = r;\n  }, this.setUnusedBitsAndHexValue = function(r, i) {\n    if (r < 0 || 7 < r)\n      throw \"unused bits shall be from 0 to 7: u = \" + r;\n    var s = \"0\" + r;\n    this.hTLV = null, this.isModified = !0, this.hV = s + i;\n  }, this.setByBinaryString = function(r) {\n    r = r.replace(/0+$/, \"\");\n    var i = 8 - r.length % 8;\n    i == 8 && (i = 0), r += \"0000000\".substr(0, i);\n    for (var s = \"\", n = 0; n < r.length - 1; n += 8) {\n      var h = r.substr(n, 8), u = parseInt(h, 2).toString(16);\n      u.length == 1 && (u = \"0\" + u), s += u;\n    }\n    this.hTLV = null, this.isModified = !0, this.hV = \"0\" + i + s;\n  }, this.setByBooleanArray = function(r) {\n    for (var i = \"\", s = 0; s < r.length; s++)\n      r[s] == !0 ? i += \"1\" : i += \"0\";\n    this.setByBinaryString(i);\n  }, this.newFalseArray = function(r) {\n    for (var i = new Array(r), s = 0; s < r; s++)\n      i[s] = !1;\n    return i;\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  }, typeof e < \"u\" && (typeof e == \"string\" && e.toLowerCase().match(/^[0-9a-f]+$/) ? this.setHexValueIncludingUnusedBits(e) : typeof e.hex < \"u\" ? this.setHexValueIncludingUnusedBits(e.hex) : typeof e.bin < \"u\" ? this.setByBinaryString(e.bin) : typeof e.array < \"u\" && this.setByBooleanArray(e.array));\n};\nN(a.asn1.DERBitString, a.asn1.ASN1Object);\na.asn1.DEROctetString = function(e) {\n  if (e !== void 0 && typeof e.obj < \"u\") {\n    var t = a.asn1.ASN1Util.newObject(e.obj);\n    e.hex = t.tohex();\n  }\n  a.asn1.DEROctetString.superclass.constructor.call(this, e), this.hT = \"04\";\n};\nN(a.asn1.DEROctetString, a.asn1.DERAbstractString);\na.asn1.DERNull = function() {\n  a.asn1.DERNull.superclass.constructor.call(this), this.hT = \"05\", this.hTLV = \"0500\";\n};\nN(a.asn1.DERNull, a.asn1.ASN1Object);\na.asn1.DERObjectIdentifier = function(e) {\n  a.asn1.DERObjectIdentifier.superclass.constructor.call(this), this.hT = \"06\", this.setValueHex = function(t) {\n    this.hTLV = null, this.isModified = !0, this.s = null, this.hV = t;\n  }, this.setValueOidString = function(t) {\n    var r = mn(t);\n    if (r == null)\n      throw new Error(\"malformed oid string: \" + t);\n    this.hTLV = null, this.isModified = !0, this.s = null, this.hV = r;\n  }, this.setValueName = function(t) {\n    var r = a.asn1.x509.OID.name2oid(t);\n    if (r !== \"\")\n      this.setValueOidString(r);\n    else\n      throw new Error(\"DERObjectIdentifier oidName undefined: \" + t);\n  }, this.setValueNameOrOid = function(t) {\n    t.match(/^[0-2].[0-9.]+$/) ? this.setValueOidString(t) : this.setValueName(t);\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  }, this.setByParam = function(t) {\n    typeof t == \"string\" ? this.setValueNameOrOid(t) : t.oid !== void 0 ? this.setValueNameOrOid(t.oid) : t.name !== void 0 ? this.setValueNameOrOid(t.name) : t.hex !== void 0 && this.setValueHex(t.hex);\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.DERObjectIdentifier, a.asn1.ASN1Object);\na.asn1.DEREnumerated = function(e) {\n  a.asn1.DEREnumerated.superclass.constructor.call(this), this.hT = \"0a\", this.setByBigInteger = function(t) {\n    this.hTLV = null, this.isModified = !0, this.hV = Ze(t);\n  }, this.setByInteger = function(t) {\n    var r = new R(String(t), 10);\n    this.setByBigInteger(r);\n  }, this.setValueHex = function(t) {\n    this.hV = t;\n  }, this.getFreshValueHex = function() {\n    return this.hV;\n  }, typeof e < \"u\" && (typeof e.int < \"u\" ? this.setByInteger(e.int) : typeof e == \"number\" ? this.setByInteger(e) : typeof e.hex < \"u\" && this.setValueHex(e.hex));\n};\nN(a.asn1.DEREnumerated, a.asn1.ASN1Object);\na.asn1.DERUTF8String = function(e) {\n  a.asn1.DERUTF8String.superclass.constructor.call(this, e), this.hT = \"0c\";\n};\nN(a.asn1.DERUTF8String, a.asn1.DERAbstractString);\na.asn1.DERNumericString = function(e) {\n  a.asn1.DERNumericString.superclass.constructor.call(this, e), this.hT = \"12\";\n};\nN(a.asn1.DERNumericString, a.asn1.DERAbstractString);\na.asn1.DERPrintableString = function(e) {\n  a.asn1.DERPrintableString.superclass.constructor.call(this, e), this.hT = \"13\";\n};\nN(a.asn1.DERPrintableString, a.asn1.DERAbstractString);\na.asn1.DERTeletexString = function(e) {\n  a.asn1.DERTeletexString.superclass.constructor.call(this, e), this.hT = \"14\";\n};\nN(a.asn1.DERTeletexString, a.asn1.DERAbstractString);\na.asn1.DERIA5String = function(e) {\n  a.asn1.DERIA5String.superclass.constructor.call(this, e), this.hT = \"16\";\n};\nN(a.asn1.DERIA5String, a.asn1.DERAbstractString);\na.asn1.DERVisibleString = function(e) {\n  a.asn1.DERIA5String.superclass.constructor.call(this, e), this.hT = \"1a\";\n};\nN(a.asn1.DERVisibleString, a.asn1.DERAbstractString);\na.asn1.DERBMPString = function(e) {\n  a.asn1.DERBMPString.superclass.constructor.call(this, e), this.hT = \"1e\";\n};\nN(a.asn1.DERBMPString, a.asn1.DERAbstractString);\na.asn1.DERUTCTime = function(e) {\n  a.asn1.DERUTCTime.superclass.constructor.call(this, e), this.hT = \"17\", this.params = void 0, this.getFreshValueHex = function() {\n    var t = this.params;\n    if (this.params == null && (t = { date: /* @__PURE__ */ new Date() }), typeof t == \"string\")\n      if (t.match(/^[0-9]{12}Z$/) || t.match(/^[0-9]{12}\\.[0-9]+Z$/))\n        this.hV = Ee(t);\n      else\n        throw new Error(\"malformed string for UTCTime: \" + t);\n    else if (t.str != null)\n      this.hV = Ee(t.str);\n    else if (t.date == null && t.millis == !0) {\n      var r = /* @__PURE__ */ new Date();\n      this.hV = Ee(this.formatDate(r, \"utc\", !0));\n    } else if (t.date != null && t.date instanceof Date) {\n      var i = t.millis === !0;\n      this.hV = Ee(this.formatDate(t.date, \"utc\", i));\n    } else\n      t instanceof Date && (this.hV = Ee(this.formatDate(t, \"utc\")));\n    if (this.hV == null)\n      throw new Error(\"parameter not specified properly for UTCTime\");\n    return this.hV;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.DERUTCTime, a.asn1.DERAbstractTime);\na.asn1.DERGeneralizedTime = function(e) {\n  a.asn1.DERGeneralizedTime.superclass.constructor.call(this, e), this.hT = \"18\", this.params = e, this.getFreshValueHex = function() {\n    var t = this.params;\n    if (this.params == null && (t = { date: /* @__PURE__ */ new Date() }), typeof t == \"string\")\n      if (t.match(/^[0-9]{14}Z$/) || t.match(/^[0-9]{14}\\.[0-9]+Z$/))\n        this.hV = Ee(t);\n      else\n        throw new Error(\"malformed string for GeneralizedTime: \" + t);\n    else if (t.str != null)\n      this.hV = Ee(t.str);\n    else if (t.date == null && t.millis == !0) {\n      var r = /* @__PURE__ */ new Date();\n      this.hV = Ee(this.formatDate(r, \"gen\", !0));\n    } else if (t.date != null && t.date instanceof Date) {\n      var i = t.millis === !0;\n      this.hV = Ee(this.formatDate(t.date, \"gen\", i));\n    } else\n      t instanceof Date && (this.hV = Ee(this.formatDate(t, \"gen\")));\n    if (this.hV == null)\n      throw new Error(\"parameter not specified properly for GeneralizedTime\");\n    return this.hV;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.DERGeneralizedTime, a.asn1.DERAbstractTime);\na.asn1.DERSequence = function(e) {\n  a.asn1.DERSequence.superclass.constructor.call(this, e), this.hT = \"30\", this.getFreshValueHex = function() {\n    for (var t = \"\", r = 0; r < this.asn1Array.length; r++) {\n      var i = this.asn1Array[r];\n      t += i.tohex();\n    }\n    return this.hV = t, this.hV;\n  };\n};\nN(a.asn1.DERSequence, a.asn1.DERAbstractStructured);\na.asn1.DERSet = function(e) {\n  a.asn1.DERSet.superclass.constructor.call(this, e), this.hT = \"31\", this.sortFlag = !0, this.getFreshValueHex = function() {\n    for (var t = new Array(), r = 0; r < this.asn1Array.length; r++) {\n      var i = this.asn1Array[r];\n      t.push(i.tohex());\n    }\n    return this.sortFlag == !0 && t.sort(), this.hV = t.join(\"\"), this.hV;\n  }, typeof e < \"u\" && typeof e.sortflag < \"u\" && e.sortflag == !1 && (this.sortFlag = !1);\n};\nN(a.asn1.DERSet, a.asn1.DERAbstractStructured);\na.asn1.DERTaggedObject = function(e) {\n  a.asn1.DERTaggedObject.superclass.constructor.call(this);\n  var t = a.asn1, r = V, i = r.getV;\n  r.isASN1HEX;\n  var s = t.ASN1Util.newObject;\n  this.hT = \"a0\", this.hV = \"\", this.isExplicit = !0, this.asn1Object = null, this.params = { tag: \"a0\", explicit: !0 }, this.setASN1Object = function(n, h, u) {\n    this.params = { tag: h, explicit: n, obj: u };\n  }, this.getFreshValueHex = function() {\n    var n = this.params;\n    if (n.explicit == null && (n.explicit = !0), n.tage != null && (n.tag = n.tage, n.explicit = !0), n.tagi != null && (n.tag = n.tagi, n.explicit = !1), n.str != null)\n      this.hV = ht(n.str);\n    else if (n.hex != null)\n      this.hV = n.hex;\n    else if (n.obj != null) {\n      var h;\n      n.obj instanceof t.ASN1Object ? h = n.obj.tohex() : typeof n.obj == \"object\" && (h = s(n.obj).tohex()), n.explicit ? this.hV = h : this.hV = i(h, 0);\n    } else\n      throw new Error(\"str, hex nor obj not specified\");\n    return n.tag == null && (n.tag = \"a0\"), this.hT = n.tag, this.hTLV = null, this.isModified = !0, this.hV;\n  }, this.setByParam = function(n) {\n    this.params = n;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.DERTaggedObject, a.asn1.ASN1Object);\nvar V = new function() {\n}();\nV.getLblen = function(e, t) {\n  if (e.substr(t + 2, 1) != \"8\")\n    return 1;\n  var r = parseInt(e.substr(t + 3, 1));\n  return r == 0 ? -1 : 0 < r && r < 10 ? r + 1 : -2;\n};\nV.getL = function(e, t) {\n  var r = V.getLblen(e, t);\n  return r < 1 ? \"\" : e.substr(t + 2, r * 2);\n};\nV.getVblen = function(e, t) {\n  var r, i;\n  return r = V.getL(e, t), r == \"\" ? -1 : (r.substr(0, 1) === \"8\" ? i = new R(r.substr(2), 16) : i = new R(r, 16), i.intValue());\n};\nV.getVidx = function(e, t) {\n  var r = V.getLblen(e, t);\n  return r < 0 ? r : t + (r + 1) * 2;\n};\nV.getV = function(e, t) {\n  var r = V.getVidx(e, t), i = V.getVblen(e, t);\n  return e.substr(r, i * 2);\n};\nV.getTLV = function(e, t) {\n  return e.substr(t, 2) + V.getL(e, t) + V.getV(e, t);\n};\nV.getTLVblen = function(e, t) {\n  return 2 + V.getLblen(e, t) * 2 + V.getVblen(e, t) * 2;\n};\nV.getNextSiblingIdx = function(e, t) {\n  var r = V.getVidx(e, t), i = V.getVblen(e, t);\n  return r + i * 2;\n};\nV.getChildIdx = function(e, t) {\n  var r = V, i = [], s, n, h;\n  s = r.getVidx(e, t), n = r.getVblen(e, t) * 2, e.substr(t, 2) == \"03\" && (s += 2, n -= 2), h = 0;\n  for (var u = s; h <= n; ) {\n    var p = r.getTLVblen(e, u);\n    if (h += p, h <= n && i.push(u), u += p, h >= n)\n      break;\n  }\n  return i;\n};\nV.getNthChildIdx = function(e, t, r) {\n  var i = V.getChildIdx(e, t);\n  return i[r];\n};\nV.getIdxbyList = function(e, t, r, i) {\n  var s = V, n, h;\n  return r.length == 0 ? i !== void 0 && e.substr(t, 2) !== i ? -1 : t : (n = r.shift(), h = s.getChildIdx(e, t), n >= h.length ? -1 : s.getIdxbyList(e, h[n], r, i));\n};\nV.getIdxbyListEx = function(e, t, r, i) {\n  var s = V, n, h;\n  if (r.length == 0)\n    return i !== void 0 && e.substr(t, 2) !== i ? -1 : t;\n  n = r.shift(), h = s.getChildIdx(e, t);\n  for (var u = 0, p = 0; p < h.length; p++) {\n    var c = e.substr(h[p], 2);\n    if (typeof n == \"number\" && !s.isContextTag(c) && u == n || typeof n == \"string\" && s.isContextTag(c, n))\n      return s.getIdxbyListEx(e, h[p], r, i);\n    s.isContextTag(c) || u++;\n  }\n  return -1;\n};\nV.getTLVbyList = function(e, t, r, i) {\n  var s = V, n = s.getIdxbyList(e, t, r, i);\n  return n == -1 || n >= e.length ? null : s.getTLV(e, n);\n};\nV.getTLVbyListEx = function(e, t, r, i) {\n  var s = V, n = s.getIdxbyListEx(e, t, r, i);\n  return n == -1 ? null : s.getTLV(e, n);\n};\nV.getVbyList = function(e, t, r, i, s) {\n  var n = V, h, u;\n  return h = n.getIdxbyList(e, t, r, i), h == -1 || h >= e.length ? null : (u = n.getV(e, h), s === !0 && (u = u.substr(2)), u);\n};\nV.getVbyListEx = function(e, t, r, i, s) {\n  var n = V, h, u;\n  return h = n.getIdxbyListEx(e, t, r, i), h == -1 ? null : (u = n.getV(e, h), e.substr(h, 2) == \"03\" && s !== !1 && (u = u.substr(2)), u);\n};\nV.getInt = function(e, t, r) {\n  r == null && (r = -1);\n  try {\n    var i = e.substr(t, 2);\n    if (i != \"02\" && i != \"03\")\n      return r;\n    var s = V.getV(e, t);\n    return i == \"02\" ? parseInt(s, 16) : Sn(s);\n  } catch {\n    return r;\n  }\n};\nV.getOID = function(e, t, r) {\n  r == null && (r = null);\n  try {\n    if (e.substr(t, 2) != \"06\")\n      return r;\n    var i = V.getV(e, t);\n    return ft(i);\n  } catch {\n    return r;\n  }\n};\nV.getOIDName = function(e, t, r) {\n  r == null && (r = null);\n  try {\n    var i = V.getOID(e, t, r);\n    if (i == r)\n      return r;\n    var s = a.asn1.x509.OID.oid2name(i);\n    return s == \"\" ? i : s;\n  } catch {\n    return r;\n  }\n};\nV.getString = function(e, t, r) {\n  r == null && (r = null);\n  try {\n    var i = V.getV(e, t);\n    return Ae(i);\n  } catch {\n    return r;\n  }\n};\nV.hextooidstr = function(e) {\n  var t = function(v, o) {\n    return v.length >= o ? v : new Array(o - v.length + 1).join(\"0\") + v;\n  }, r = [], i = e.substr(0, 2), s = parseInt(i, 16);\n  r[0] = new String(Math.floor(s / 40)), r[1] = new String(s % 40);\n  for (var n = e.substr(2), h = [], u = 0; u < n.length / 2; u++)\n    h.push(parseInt(n.substr(u * 2, 2), 16));\n  for (var p = [], c = \"\", u = 0; u < h.length; u++)\n    h[u] & 128 ? c = c + t((h[u] & 127).toString(2), 7) : (c = c + t((h[u] & 127).toString(2), 7), p.push(new String(parseInt(c, 2))), c = \"\");\n  var y = r.join(\".\");\n  return p.length > 0 && (y = y + \".\" + p.join(\".\")), y;\n};\nV.dump = function(e, t, r, i) {\n  var s = V, n = s.getV, h = s.dump, u = s.getChildIdx, p = e;\n  e instanceof a.asn1.ASN1Object && (p = e.tohex());\n  var c = function(E, w) {\n    if (E.length <= w * 2)\n      return E;\n    var x = E.substr(0, w) + \"..(total \" + E.length / 2 + \"bytes)..\" + E.substr(E.length - w, w);\n    return x;\n  };\n  t === void 0 && (t = { ommit_long_octet: 32 }), r === void 0 && (r = 0), i === void 0 && (i = \"\");\n  var y = t.ommit_long_octet, I = p.substr(r, 2);\n  if (I == \"01\") {\n    var v = n(p, r);\n    return v == \"00\" ? i + `BOOLEAN FALSE\n` : i + `BOOLEAN TRUE\n`;\n  }\n  if (I == \"02\") {\n    var v = n(p, r);\n    return i + \"INTEGER \" + c(v, y) + `\n`;\n  }\n  if (I == \"03\") {\n    var v = n(p, r);\n    if (s.isASN1HEX(v.substr(2))) {\n      var o = i + `BITSTRING, encapsulates\n`;\n      return o = o + h(v.substr(2), t, 0, i + \"  \"), o;\n    } else\n      return i + \"BITSTRING \" + c(v, y) + `\n`;\n  }\n  if (I == \"04\") {\n    var v = n(p, r);\n    if (s.isASN1HEX(v)) {\n      var o = i + `OCTETSTRING, encapsulates\n`;\n      return o = o + h(v, t, 0, i + \"  \"), o;\n    } else\n      return i + \"OCTETSTRING \" + c(v, y) + `\n`;\n  }\n  if (I == \"05\")\n    return i + `NULL\n`;\n  if (I == \"06\") {\n    var l = n(p, r), f = a.asn1.ASN1Util.oidHexToInt(l), d = a.asn1.x509.OID.oid2name(f), g = f.replace(/\\./g, \" \");\n    return d != \"\" ? i + \"ObjectIdentifier \" + d + \" (\" + g + `)\n` : i + \"ObjectIdentifier (\" + g + `)\n`;\n  }\n  if (I == \"0a\")\n    return i + \"ENUMERATED \" + parseInt(n(p, r)) + `\n`;\n  if (I == \"0c\")\n    return i + \"UTF8String '\" + W(n(p, r)) + `'\n`;\n  if (I == \"13\")\n    return i + \"PrintableString '\" + W(n(p, r)) + `'\n`;\n  if (I == \"14\")\n    return i + \"TeletexString '\" + W(n(p, r)) + `'\n`;\n  if (I == \"16\")\n    return i + \"IA5String '\" + W(n(p, r)) + `'\n`;\n  if (I == \"17\")\n    return i + \"UTCTime \" + W(n(p, r)) + `\n`;\n  if (I == \"18\")\n    return i + \"GeneralizedTime \" + W(n(p, r)) + `\n`;\n  if (I == \"1a\")\n    return i + \"VisualString '\" + W(n(p, r)) + `'\n`;\n  if (I == \"1e\")\n    return i + \"BMPString '\" + Tt(n(p, r)) + `'\n`;\n  if (I == \"30\") {\n    if (p.substr(r, 4) == \"3000\")\n      return i + `SEQUENCE {}\n`;\n    var o = i + `SEQUENCE\n`, S = u(p, r), b = t;\n    if ((S.length == 2 || S.length == 3) && p.substr(S[0], 2) == \"06\" && p.substr(S[S.length - 1], 2) == \"04\") {\n      var d = s.oidname(n(p, S[0])), D = JSON.parse(JSON.stringify(t));\n      D.x509ExtName = d, b = D;\n    }\n    for (var A = 0; A < S.length; A++)\n      o = o + h(p, b, S[A], i + \"  \");\n    return o;\n  }\n  if (I == \"31\") {\n    for (var o = i + `SET\n`, S = u(p, r), A = 0; A < S.length; A++)\n      o = o + h(p, t, S[A], i + \"  \");\n    return o;\n  }\n  var I = parseInt(I, 16);\n  if (I & 128) {\n    var m = I & 31;\n    if (I & 32) {\n      for (var o = i + \"[\" + m + `]\n`, S = u(p, r), A = 0; A < S.length; A++)\n        o = o + h(p, t, S[A], i + \"  \");\n      return o;\n    } else {\n      var v = n(p, r);\n      if (V.isASN1HEX(v)) {\n        var o = i + \"[\" + m + `]\n`;\n        return o = o + h(v, t, 0, i + \"  \"), o;\n      } else\n        (v.substr(0, 8) == \"68747470\" || t.x509ExtName === \"subjectAltName\" && m == 2) && (v = W(v));\n      var o = i + \"[\" + m + \"] \" + v + `\n`;\n      return o;\n    }\n  }\n  return i + \"UNKNOWN(\" + I + \") \" + n(p, r) + `\n`;\n};\nV.parse = function(e) {\n  var t = V, r = t.parse, i = t.isASN1HEX, s = t.getV, n = t.getTLV, h = t.getChildIdx, u = a.asn1, p = u.ASN1Util.oidHexToInt, c = u.x509.OID.oid2name, y = W, v = Tt, o = fn, l = { \"0c\": \"utf8str\", 12: \"numstr\", 13: \"prnstr\", 14: \"telstr\", 16: \"ia5str\", 17: \"utctime\", 18: \"gentime\", \"1a\": \"visstr\", \"1e\": \"bmpstr\", 30: \"seq\", 31: \"set\" }, f = function(x) {\n    for (var F = [], P = h(x, 0), T = 0; T < P.length; T++) {\n      var H = P[T], C = n(x, H), B = r(C);\n      F.push(B);\n    }\n    return F;\n  }, d = e.substr(0, 2), g = {}, S = s(e, 0);\n  if (d == \"01\")\n    return e == \"0101ff\" ? { bool: !0 } : { bool: !1 };\n  if (d == \"02\")\n    return { int: { hex: S } };\n  if (d == \"03\")\n    try {\n      if (S.substr(0, 2) != \"00\")\n        throw \"not encap\";\n      var b = S.substr(2);\n      if (!i(b))\n        throw \"not encap\";\n      return { bitstr: { obj: r(b) } };\n    } catch {\n      var D = null;\n      return S.length <= 10 && (D = En(S)), D == null ? { bitstr: { hex: S } } : { bitstr: { bin: D } };\n    }\n  else if (d == \"04\")\n    try {\n      if (!i(S))\n        throw \"not encap\";\n      return { octstr: { obj: r(S) } };\n    } catch {\n      return { octstr: { hex: S } };\n    }\n  else {\n    if (d == \"05\")\n      return { null: \"\" };\n    if (d == \"06\") {\n      var A = p(S), I = c(A);\n      return I == \"\" ? { oid: A } : { oid: I };\n    } else {\n      if (d == \"0a\")\n        return S.length > 4 ? { enum: { hex: S } } : { enum: parseInt(S, 16) };\n      if (d == \"30\" || d == \"31\")\n        return g[l[d]] = f(e), g;\n      if (d == \"14\") {\n        var m = o(S);\n        return g[l[d]] = { str: m }, g;\n      } else if (d == \"1e\") {\n        var m = v(S);\n        return g[l[d]] = { str: m }, g;\n      } else if (\":0c:12:13:16:17:18:1a:\".indexOf(d) != -1) {\n        var m = y(S);\n        return g[l[d]] = { str: m }, g;\n      } else if (d.match(/^8[0-9]$/)) {\n        var m = y(S);\n        return m == null | m == \"\" ? { tag: { tag: d, explicit: !1, hex: S } } : m.match(/[\\x00-\\x1F\\x7F-\\x9F]/) != null || m.match(/[\\u0000-\\u001F\\u0080\\u009F]/) != null ? { tag: { tag: d, explicit: !1, hex: S } } : { tag: { tag: d, explicit: !1, str: m } };\n      } else if (d.match(/^a[0-9]$/))\n        try {\n          if (!i(S))\n            throw new Error(\"not encap\");\n          return { tag: { tag: d, explicit: !0, obj: r(S) } };\n        } catch {\n          return { tag: { tag: d, explicit: !0, hex: S } };\n        }\n      else {\n        var E = new a.asn1.ASN1Object();\n        E.hV = S;\n        var w = E.getLengthHexFromValue();\n        return { asn1: { tlv: d + w + S } };\n      }\n    }\n  }\n};\nV.isContextTag = function(e, t) {\n  e = e.toLowerCase();\n  var r, i;\n  try {\n    r = parseInt(e, 16);\n  } catch {\n    return -1;\n  }\n  if (t === void 0)\n    return (r & 192) == 128;\n  try {\n    var s = t.match(/^\\[[0-9]+\\]$/);\n    return s == null || (i = parseInt(t.substr(1, t.length - 1), 10), i > 31) ? !1 : (r & 192) == 128 && (r & 31) == i;\n  } catch {\n    return !1;\n  }\n};\nV.isASN1HEX = function(e) {\n  var t = V;\n  if (e.length % 2 == 1)\n    return !1;\n  var r = t.getVblen(e, 0), i = e.substr(0, 2), s = t.getL(e, 0), n = e.length - i.length - s.length;\n  return n == r * 2;\n};\nV.checkStrictDER = function(e, t, r, i, s) {\n  var n = V;\n  if (r === void 0) {\n    if (typeof e != \"string\")\n      throw new Error(\"not hex string\");\n    if (e = e.toLowerCase(), !a.lang.String.isHex(e))\n      throw new Error(\"not hex string\");\n    r = e.length, i = e.length / 2, i < 128 ? s = 1 : s = Math.ceil(i.toString(16)) + 1;\n  }\n  var h = n.getL(e, t);\n  if (h.length > s * 2)\n    throw new Error(\"L of TLV too long: idx=\" + t);\n  var u = n.getVblen(e, t);\n  if (u > i)\n    throw new Error(\"value of L too long than hex: idx=\" + t);\n  var p = n.getTLV(e, t), c = p.length - 2 - n.getL(e, t).length;\n  if (c !== u * 2)\n    throw new Error(\"V string length and L's value not the same:\" + c + \"/\" + u * 2);\n  if (t === 0 && e.length != p.length)\n    throw new Error(\"total length and TLV length unmatch:\" + e.length + \"!=\" + p.length);\n  var y = e.substr(t, 2);\n  if (y === \"02\") {\n    var v = n.getVidx(e, t);\n    if (e.substr(v, 2) == \"00\" && e.charCodeAt(v + 2) < 56)\n      throw new Error(\"not least zeros for DER INTEGER\");\n  }\n  if (parseInt(y, 16) & 32) {\n    for (var o = n.getVblen(e, t), l = 0, f = n.getChildIdx(e, t), d = 0; d < f.length; d++) {\n      var g = n.getTLV(e, f[d]);\n      l += g.length, n.checkStrictDER(e, f[d], r, i, s);\n    }\n    if (o * 2 != l)\n      throw new Error(\"sum of children's TLV length and L unmatch: \" + o * 2 + \"!=\" + l);\n  }\n};\nV.oidname = function(e) {\n  var t = a.asn1;\n  a.lang.String.isHex(e) && (e = t.ASN1Util.oidHexToInt(e));\n  var r = t.x509.OID.oid2name(e);\n  return r === \"\" && (r = e), r;\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.x509 > \"u\" || !a.asn1.x509) && (a.asn1.x509 = {});\na.asn1.x509.Certificate = function(e) {\n  a.asn1.x509.Certificate.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERBitString, s = r.DERSequence, n = r.x509, h = n.TBSCertificate, u = n.AlgorithmIdentifier;\n  this.params = void 0, this.setByParam = function(p) {\n    this.params = p;\n  }, this.sign = function() {\n    var p = this.params, c = p.sigalg;\n    p.sigalg.name != null && (c = p.sigalg.name);\n    var y = p.tbsobj.tohex(), v = new a.crypto.Signature({ alg: c });\n    v.init(p.cakey), v.updateHex(y), p.sighex = v.sign();\n  }, this.getPEM = function() {\n    return de(this.tohex(), \"CERTIFICATE\");\n  }, this.tohex = function() {\n    var p = this.params;\n    if ((p.tbsobj == null || p.tbsobj == null) && (p.tbsobj = new h(p)), p.sighex == null && p.cakey != null && this.sign(), p.sighex == null)\n      throw new Error(\"sighex or cakey parameter not defined\");\n    var c = [];\n    c.push(p.tbsobj), c.push(new u({ name: p.sigalg })), c.push(new i({ hex: \"00\" + p.sighex }));\n    var y = new s({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && (this.params = e);\n};\nN(a.asn1.x509.Certificate, a.asn1.ASN1Object);\na.asn1.x509.TBSCertificate = function(e) {\n  a.asn1.x509.TBSCertificate.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.x509, s = r.DERTaggedObject, n = r.DERInteger, h = r.DERSequence, u = i.AlgorithmIdentifier, p = i.Time, c = i.X500Name, y = i.Extensions, v = i.SubjectPublicKeyInfo;\n  this.params = null, this.setByParam = function(o) {\n    this.params = o;\n  }, this.tohex = function() {\n    var o = [], l = this.params;\n    if (l.version != null || l.version != 1) {\n      var f = 2;\n      l.version != null && (f = l.version - 1);\n      var d = new s({ obj: new n({ int: f }) });\n      o.push(d);\n    }\n    o.push(new n(l.serial)), o.push(new u({ name: l.sigalg })), o.push(new c(l.issuer)), o.push(new h({ array: [new p(l.notbefore), new p(l.notafter)] })), o.push(new c(l.subject)), o.push(new v(k.getKey(l.sbjpubkey))), l.ext !== void 0 && l.ext.length > 0 && o.push(new s({ tag: \"a3\", obj: new y(l.ext) }));\n    var g = new a.asn1.DERSequence({ array: o });\n    return g.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.TBSCertificate, a.asn1.ASN1Object);\na.asn1.x509.Extensions = function(e) {\n  a.asn1.x509.Extensions.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.x509;\n  this.aParam = [], this.setByParam = function(n) {\n    this.aParam = n;\n  }, this.tohex = function() {\n    for (var n = [], h = 0; h < this.aParam.length; h++) {\n      var u = this.aParam[h], p = u.extname, c = null;\n      if (u.extn != null)\n        c = new s.PrivateExtension(u);\n      else if (p == \"subjectKeyIdentifier\")\n        c = new s.SubjectKeyIdentifier(u);\n      else if (p == \"keyUsage\")\n        c = new s.KeyUsage(u);\n      else if (p == \"subjectAltName\")\n        c = new s.SubjectAltName(u);\n      else if (p == \"issuerAltName\")\n        c = new s.IssuerAltName(u);\n      else if (p == \"basicConstraints\")\n        c = new s.BasicConstraints(u);\n      else if (p == \"nameConstraints\")\n        c = new s.NameConstraints(u);\n      else if (p == \"cRLDistributionPoints\")\n        c = new s.CRLDistributionPoints(u);\n      else if (p == \"certificatePolicies\")\n        c = new s.CertificatePolicies(u);\n      else if (p == \"policyMappings\")\n        c = new s.PolicyMappings(u);\n      else if (p == \"policyConstraints\")\n        c = new s.PolicyConstraints(u);\n      else if (p == \"inhibitAnyPolicy\")\n        c = new s.InhibitAnyPolicy(u);\n      else if (p == \"authorityKeyIdentifier\")\n        c = new s.AuthorityKeyIdentifier(u);\n      else if (p == \"extKeyUsage\")\n        c = new s.ExtKeyUsage(u);\n      else if (p == \"authorityInfoAccess\")\n        c = new s.AuthorityInfoAccess(u);\n      else if (p == \"cRLNumber\")\n        c = new s.CRLNumber(u);\n      else if (p == \"cRLReason\")\n        c = new s.CRLReason(u);\n      else if (p == \"ocspNonce\")\n        c = new s.OCSPNonce(u);\n      else if (p == \"ocspNoCheck\")\n        c = new s.OCSPNoCheck(u);\n      else if (p == \"adobeTimeStamp\")\n        c = new s.AdobeTimeStamp(u);\n      else if (p == \"subjectDirectoryAttributes\")\n        c = new s.SubjectDirectoryAttributes(u);\n      else\n        throw new Error(\"extension not supported:\" + JSON.stringify(u));\n      c != null && n.push(c);\n    }\n    var y = new i({ array: n });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.x509.Extensions, a.asn1.ASN1Object);\na.asn1.x509.Extension = function(e) {\n  a.asn1.x509.Extension.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERObjectIdentifier, s = r.DEROctetString;\n  r.DERBitString;\n  var n = r.DERBoolean, h = r.DERSequence;\n  this.tohex = function() {\n    var u = new i({ oid: this.oid }), p = new s({ hex: this.getExtnValueHex() }), c = new Array();\n    c.push(u), this.critical && c.push(new n()), c.push(p);\n    var y = new h({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.critical = !1, e !== void 0 && e.critical !== void 0 && (this.critical = e.critical);\n};\nN(a.asn1.x509.Extension, a.asn1.ASN1Object);\na.asn1.x509.KeyUsage = function(e) {\n  a.asn1.x509.KeyUsage.superclass.constructor.call(this, e);\n  var t = Error, r = { digitalSignature: 0, nonRepudiation: 1, keyEncipherment: 2, dataEncipherment: 3, keyAgreement: 4, keyCertSign: 5, cRLSign: 6, encipherOnly: 7, decipherOnly: 8 };\n  this.getExtnValueHex = function() {\n    var i = this.getBinValue();\n    return this.asn1ExtnValue = new a.asn1.DERBitString({ bin: i }), this.asn1ExtnValue.tohex();\n  }, this.getBinValue = function() {\n    var i = this.params;\n    if (typeof i != \"object\" || typeof i.names != \"object\" && typeof i.bin != \"string\")\n      throw new t(\"parameter not yet set\");\n    if (i.names != null)\n      return rt(i.names, r);\n    if (i.bin != null)\n      return i.bin;\n    throw new t(\"parameter not set properly\");\n  }, this.oid = \"2.5.29.15\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.KeyUsage, a.asn1.x509.Extension);\na.asn1.x509.BasicConstraints = function(e) {\n  a.asn1.x509.BasicConstraints.superclass.constructor.call(this, e);\n  var t = a.asn1, r = t.DERBoolean, i = t.DERInteger, s = t.DERSequence;\n  this.getExtnValueHex = function() {\n    var n = new Array();\n    this.cA && n.push(new r()), this.pathLen > -1 && n.push(new i({ int: this.pathLen }));\n    var h = new s({ array: n });\n    return this.asn1ExtnValue = h, this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.19\", this.cA = !1, this.pathLen = -1, e !== void 0 && (e.cA !== void 0 && (this.cA = e.cA), e.pathLen !== void 0 && (this.pathLen = e.pathLen));\n};\nN(a.asn1.x509.BasicConstraints, a.asn1.x509.Extension);\na.asn1.x509.CRLDistributionPoints = function(e) {\n  a.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.x509;\n  this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.setByDPArray = function(s) {\n    for (var n = [], h = 0; h < s.length; h++)\n      if (s[h] instanceof a.asn1.ASN1Object)\n        n.push(s[h]);\n      else {\n        var u = new i.DistributionPoint(s[h]);\n        n.push(u);\n      }\n    this.asn1ExtnValue = new r.DERSequence({ array: n });\n  }, this.setByOneURI = function(s) {\n    var n = new i.DistributionPoint({ fulluri: s });\n    this.setByDPArray([n]);\n  }, this.oid = \"2.5.29.31\", e !== void 0 && (e.array !== void 0 ? this.setByDPArray(e.array) : e.uri !== void 0 && this.setByOneURI(e.uri));\n};\nN(a.asn1.x509.CRLDistributionPoints, a.asn1.x509.Extension);\na.asn1.x509.DistributionPoint = function(e) {\n  a.asn1.x509.DistributionPoint.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.x509.DistributionPointName;\n  this.tohex = function() {\n    var s = new r.DERSequence();\n    if (this.asn1DP != null) {\n      var n = new r.DERTaggedObject({ explicit: !0, tag: \"a0\", obj: this.asn1DP });\n      s.appendASN1Object(n);\n    }\n    return this.hTLV = s.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (e.dpobj !== void 0 ? this.asn1DP = e.dpobj : e.dpname !== void 0 ? this.asn1DP = new i(e.dpname) : e.fulluri !== void 0 && (this.asn1DP = new i({ full: [{ uri: e.fulluri }] })));\n};\nN(a.asn1.x509.DistributionPoint, a.asn1.ASN1Object);\na.asn1.x509.DistributionPointName = function(e) {\n  a.asn1.x509.DistributionPointName.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERTaggedObject;\n  if (this.tohex = function() {\n    if (this.type != \"full\")\n      throw new Error(\"currently type shall be 'full': \" + this.type);\n    return this.asn1Obj = new i({ explicit: !1, tag: this.tag, obj: this.asn1V }), this.hTLV = this.asn1Obj.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0)\n    if (r.x509.GeneralNames.prototype.isPrototypeOf(e))\n      this.type = \"full\", this.tag = \"a0\", this.asn1V = e;\n    else if (e.full !== void 0)\n      this.type = \"full\", this.tag = \"a0\", this.asn1V = new r.x509.GeneralNames(e.full);\n    else\n      throw new Error(\"This class supports GeneralNames only as argument\");\n};\nN(a.asn1.x509.DistributionPointName, a.asn1.ASN1Object);\na.asn1.x509.CertificatePolicies = function(e) {\n  a.asn1.x509.CertificatePolicies.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.x509, s = r.DERSequence, n = i.PolicyInformation;\n  this.params = null, this.getExtnValueHex = function() {\n    for (var h = [], u = 0; u < this.params.array.length; u++)\n      h.push(new n(this.params.array[u]));\n    var p = new s({ array: h });\n    return this.asn1ExtnValue = p, this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.32\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.CertificatePolicies, a.asn1.x509.Extension);\na.asn1.x509.PolicyInformation = function(e) {\n  a.asn1.x509.PolicyInformation.superclass.constructor.call(this, e);\n  var t = a.asn1, r = t.DERSequence, i = t.DERObjectIdentifier, s = t.x509.PolicyQualifierInfo;\n  this.params = null, this.tohex = function() {\n    if (this.params.policyoid === void 0 && this.params.array === void 0)\n      throw new Error(\"parameter oid and array missing\");\n    var n = [new i(this.params.policyoid)];\n    if (this.params.array !== void 0) {\n      for (var h = [], u = 0; u < this.params.array.length; u++)\n        h.push(new s(this.params.array[u]));\n      h.length > 0 && n.push(new r({ array: h }));\n    }\n    var p = new r({ array: n });\n    return p.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.PolicyInformation, a.asn1.ASN1Object);\na.asn1.x509.PolicyQualifierInfo = function(e) {\n  a.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this, e);\n  var t = a.asn1, r = t.DERSequence, i = t.DERIA5String, s = t.DERObjectIdentifier, n = t.x509.UserNotice;\n  this.params = null, this.tohex = function() {\n    if (this.params.cps !== void 0) {\n      var h = new r({ array: [new s({ oid: \"1.3.6.1.5.5.7.2.1\" }), new i({ str: this.params.cps })] });\n      return h.tohex();\n    }\n    if (this.params.unotice != null) {\n      var h = new r({ array: [new s({ oid: \"1.3.6.1.5.5.7.2.2\" }), new n(this.params.unotice)] });\n      return h.tohex();\n    }\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.PolicyQualifierInfo, a.asn1.ASN1Object);\na.asn1.x509.UserNotice = function(e) {\n  a.asn1.x509.UserNotice.superclass.constructor.call(this, e);\n  var t = a.asn1.DERSequence;\n  a.asn1.DERInteger;\n  var r = a.asn1.x509.DisplayText, i = a.asn1.x509.NoticeReference;\n  this.params = null, this.tohex = function() {\n    var s = [];\n    this.params.noticeref !== void 0 && s.push(new i(this.params.noticeref)), this.params.exptext !== void 0 && s.push(new r(this.params.exptext));\n    var n = new t({ array: s });\n    return n.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.UserNotice, a.asn1.ASN1Object);\na.asn1.x509.NoticeReference = function(e) {\n  a.asn1.x509.NoticeReference.superclass.constructor.call(this, e);\n  var t = a.asn1.DERSequence, r = a.asn1.DERInteger, i = a.asn1.x509.DisplayText;\n  this.params = null, this.tohex = function() {\n    var s = [];\n    if (this.params.org !== void 0 && s.push(new i(this.params.org)), this.params.noticenum !== void 0) {\n      for (var n = [], h = this.params.noticenum, u = 0; u < h.length; u++)\n        n.push(new r(h[u]));\n      s.push(new t({ array: n }));\n    }\n    if (s.length == 0)\n      throw new Error(\"parameter is empty\");\n    var p = new t({ array: s });\n    return p.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.NoticeReference, a.asn1.ASN1Object);\na.asn1.x509.DisplayText = function(e) {\n  a.asn1.x509.DisplayText.superclass.constructor.call(this, e), this.hT = \"0c\", e !== void 0 && (e.type === \"ia5\" ? this.hT = \"16\" : e.type === \"vis\" ? this.hT = \"1a\" : e.type === \"bmp\" && (this.hT = \"1e\"));\n};\nN(a.asn1.x509.DisplayText, a.asn1.DERAbstractString);\na.asn1.x509.PolicyMappings = function(e) {\n  a.asn1.x509.PolicyMappings.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1;\n  r.x509;\n  var i = r.ASN1Util.newObject;\n  this.params = null, this.getExtnValueHex = function() {\n    for (var s = this.params, n = [], h = 0; h < s.array.length; h++) {\n      var u = s.array[h];\n      n.push({ seq: [{ oid: u[0] }, { oid: u[1] }] });\n    }\n    return this.asn1ExtnValue = i({ seq: n }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.33\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.PolicyMappings, a.asn1.x509.Extension);\na.asn1.x509.PolicyConstraints = function(e) {\n  a.asn1.x509.PolicyConstraints.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1;\n  r.x509;\n  var i = r.ASN1Util.newObject;\n  this.params = null, this.getExtnValueHex = function() {\n    var s = this.params, n = [];\n    return s.reqexp != null && n.push({ tag: { tagi: \"80\", obj: { int: s.reqexp } } }), s.inhibit != null && n.push({ tag: { tagi: \"81\", obj: { int: s.inhibit } } }), this.asn1ExtnValue = i({ seq: n }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.36\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.PolicyConstraints, a.asn1.x509.Extension);\na.asn1.x509.InhibitAnyPolicy = function(e) {\n  a.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1;\n  r.x509;\n  var i = r.ASN1Util.newObject;\n  this.params = null, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = i({ int: this.params.skip }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.54\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.InhibitAnyPolicy, a.asn1.x509.Extension);\na.asn1.x509.NameConstraints = function(e) {\n  a.asn1.x509.NameConstraints.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.x509, s = r.ASN1Util.newObject, n = i.GeneralSubtree;\n  this.params = null, this.getExtnValueHex = function() {\n    var h = this.params, u = [];\n    if (h.permit != null && h.permit.length != null) {\n      for (var p = [], c = 0; c < h.permit.length; c++)\n        p.push(new n(h.permit[c]));\n      u.push({ tag: { tagi: \"a0\", obj: { seq: p } } });\n    }\n    if (h.exclude != null && h.exclude.length != null) {\n      for (var y = [], c = 0; c < h.exclude.length; c++)\n        y.push(new n(h.exclude[c]));\n      u.push({ tag: { tagi: \"a1\", obj: { seq: y } } });\n    }\n    return this.asn1ExtnValue = s({ seq: u }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.30\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.NameConstraints, a.asn1.x509.Extension);\na.asn1.x509.GeneralSubtree = function(e) {\n  a.asn1.x509.GeneralSubtree.superclass.constructor.call(this);\n  var t = a.asn1, r = t.x509, i = r.GeneralName, s = t.ASN1Util.newObject;\n  this.params = null, this.setByParam = function(n) {\n    this.params = n;\n  }, this.tohex = function() {\n    var n = this.params, h = [new i(n)];\n    n.min != null && h.push({ tag: { tagi: \"80\", obj: { int: n.min } } }), n.max != null && h.push({ tag: { tagi: \"81\", obj: { int: n.max } } });\n    var u = s({ seq: h });\n    return u.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.GeneralSubtree, a.asn1.ASN1Object);\na.asn1.x509.ExtKeyUsage = function(e) {\n  a.asn1.x509.ExtKeyUsage.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1;\n  this.setPurposeArray = function(i) {\n    this.asn1ExtnValue = new r.DERSequence();\n    for (var s = 0; s < i.length; s++) {\n      var n = new r.DERObjectIdentifier(i[s]);\n      this.asn1ExtnValue.appendASN1Object(n);\n    }\n  }, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.37\", e !== void 0 && e.array !== void 0 && this.setPurposeArray(e.array);\n};\nN(a.asn1.x509.ExtKeyUsage, a.asn1.x509.Extension);\na.asn1.x509.AuthorityKeyIdentifier = function(e) {\n  a.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.DERTaggedObject, s = r.x509.GeneralNames;\n  t.crypto.Util.isKey, this.asn1KID = null, this.asn1CertIssuer = null, this.asn1CertSN = null, this.getExtnValueHex = function() {\n    var n = new Array();\n    this.asn1KID && n.push(new i({ explicit: !1, tag: \"80\", obj: this.asn1KID })), this.asn1CertIssuer && n.push(new i({ explicit: !1, tag: \"a1\", obj: new s([{ dn: this.asn1CertIssuer }]) })), this.asn1CertSN && n.push(new i({ explicit: !1, tag: \"82\", obj: this.asn1CertSN }));\n    var h = new r.DERSequence({ array: n });\n    return this.asn1ExtnValue = h, this.asn1ExtnValue.tohex();\n  }, this.setKIDByParam = function(n) {\n    if (n.str !== void 0 || n.hex !== void 0)\n      this.asn1KID = new a.asn1.DEROctetString(n);\n    else if (typeof n == \"object\" && a.crypto.Util.isKey(n) || typeof n == \"string\" && n.indexOf(\"BEGIN \") != -1) {\n      var h = n;\n      typeof n == \"string\" && (h = k.getKey(n));\n      var u = k.getKeyID(h);\n      this.asn1KID = new a.asn1.DEROctetString({ hex: u });\n    }\n  }, this.setCertIssuerByParam = function(n) {\n    n.str !== void 0 || n.ldapstr !== void 0 || n.hex !== void 0 || n.certsubject !== void 0 || n.certissuer !== void 0 ? this.asn1CertIssuer = new a.asn1.x509.X500Name(n) : typeof n == \"string\" && n.indexOf(\"BEGIN \") != -1 && n.indexOf(\"CERTIFICATE\") != -1 && (this.asn1CertIssuer = new a.asn1.x509.X500Name({ certissuer: n }));\n  }, this.setCertSNByParam = function(n) {\n    if (n.str !== void 0 || n.bigint !== void 0 || n.hex !== void 0)\n      this.asn1CertSN = new a.asn1.DERInteger(n);\n    else if (typeof n == \"string\" && n.indexOf(\"BEGIN \") != -1 && n.indexOf(\"CERTIFICATE\")) {\n      var h = new L();\n      h.readCertPEM(n);\n      var u = h.getSerialNumberHex();\n      this.asn1CertSN = new a.asn1.DERInteger({ hex: u });\n    }\n  }, this.oid = \"2.5.29.35\", e !== void 0 && (e.kid !== void 0 && this.setKIDByParam(e.kid), e.issuer !== void 0 && this.setCertIssuerByParam(e.issuer), e.sn !== void 0 && this.setCertSNByParam(e.sn), e.issuersn !== void 0 && typeof e.issuersn == \"string\" && e.issuersn.indexOf(\"BEGIN \") != -1 && e.issuersn.indexOf(\"CERTIFICATE\") && (this.setCertSNByParam(e.issuersn), this.setCertIssuerByParam(e.issuersn)));\n};\nN(a.asn1.x509.AuthorityKeyIdentifier, a.asn1.x509.Extension);\na.asn1.x509.SubjectKeyIdentifier = function(e) {\n  a.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.DEROctetString;\n  this.asn1KID = null, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = this.asn1KID, this.asn1ExtnValue.tohex();\n  }, this.setKIDByParam = function(s) {\n    if (s.str !== void 0 || s.hex !== void 0)\n      this.asn1KID = new i(s);\n    else if (typeof s == \"object\" && a.crypto.Util.isKey(s) || typeof s == \"string\" && s.indexOf(\"BEGIN\") != -1) {\n      var n = s;\n      typeof s == \"string\" && (n = k.getKey(s));\n      var h = k.getKeyID(n);\n      this.asn1KID = new a.asn1.DEROctetString({ hex: h });\n    }\n  }, this.oid = \"2.5.29.14\", e !== void 0 && e.kid !== void 0 && this.setKIDByParam(e.kid);\n};\nN(a.asn1.x509.SubjectKeyIdentifier, a.asn1.x509.Extension);\na.asn1.x509.AuthorityInfoAccess = function(e) {\n  a.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this, e), this.setAccessDescriptionArray = function(t) {\n    for (var r = new Array(), i = a, s = i.asn1, n = s.DERSequence, h = s.DERObjectIdentifier, u = s.x509.GeneralName, p = 0; p < t.length; p++) {\n      var c, y = t[p];\n      if (y.ocsp !== void 0)\n        c = new n({ array: [new h({ oid: \"1.3.6.1.5.5.7.48.1\" }), new u({ uri: y.ocsp })] });\n      else if (y.caissuer !== void 0)\n        c = new n({ array: [new h({ oid: \"1.3.6.1.5.5.7.48.2\" }), new u({ uri: y.caissuer })] });\n      else\n        throw new Error(\"unknown AccessMethod parameter: \" + JSON.stringify(y));\n      r.push(c);\n    }\n    this.asn1ExtnValue = new n({ array: r });\n  }, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.oid = \"1.3.6.1.5.5.7.1.1\", e !== void 0 && e.array !== void 0 && this.setAccessDescriptionArray(e.array);\n};\nN(a.asn1.x509.AuthorityInfoAccess, a.asn1.x509.Extension);\na.asn1.x509.SubjectAltName = function(e) {\n  a.asn1.x509.SubjectAltName.superclass.constructor.call(this, e), this.setNameArray = function(t) {\n    this.asn1ExtnValue = new a.asn1.x509.GeneralNames(t);\n  }, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.17\", e !== void 0 && e.array !== void 0 && this.setNameArray(e.array);\n};\nN(a.asn1.x509.SubjectAltName, a.asn1.x509.Extension);\na.asn1.x509.IssuerAltName = function(e) {\n  a.asn1.x509.IssuerAltName.superclass.constructor.call(this, e), this.setNameArray = function(t) {\n    this.asn1ExtnValue = new a.asn1.x509.GeneralNames(t);\n  }, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.18\", e !== void 0 && e.array !== void 0 && this.setNameArray(e.array);\n};\nN(a.asn1.x509.IssuerAltName, a.asn1.x509.Extension);\na.asn1.x509.SubjectDirectoryAttributes = function(e) {\n  a.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this, e);\n  var t = a.asn1, r = t.DERSequence, i = t.ASN1Util.newObject, s = t.x509.OID.name2oid;\n  this.params = null, this.getExtnValueHex = function() {\n    for (var n = [], h = 0; h < this.params.array.length; h++) {\n      var u = this.params.array[h];\n      if (u.attr != null && u.array != null) {\n        var p = { seq: [{ oid: u.attr }, { set: u.array }] };\n        n.push(i(p));\n        continue;\n      }\n      var c = { seq: [{ oid: \"1.2.3.4\" }, { set: [{ utf8str: \"DE\" }] }] };\n      if (u.attr == \"dateOfBirth\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { gentime: u.str };\n      else if (u.attr == \"placeOfBirth\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { utf8str: u.str };\n      else if (u.attr == \"gender\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { prnstr: u.str };\n      else if (u.attr == \"countryOfCitizenship\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { prnstr: u.str };\n      else if (u.attr == \"countryOfResidence\")\n        c.seq[0].oid = s(u.attr), c.seq[1].set[0] = { prnstr: u.str };\n      else\n        throw new Error(\"unsupported attribute: \" + u.attr);\n      n.push(new i(c));\n    }\n    var y = new r({ array: n });\n    return this.asn1ExtnValue = y, this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.9\", e !== void 0 && (this.params = e);\n};\nN(a.asn1.x509.SubjectDirectoryAttributes, a.asn1.x509.Extension);\na.asn1.x509.PrivateExtension = function(e) {\n  a.asn1.x509.PrivateExtension.superclass.constructor.call(this, e);\n  var t = a, r = t.lang.String.isHex, i = t.asn1, s = i.x509.OID.name2oid, n = i.ASN1Util.newObject;\n  this.params = null, this.setByParam = function(h) {\n    this.oid = s(h.extname), this.params = h;\n  }, this.getExtnValueHex = function() {\n    if (this.params.extname == null || this.params.extn == null)\n      throw new Error(\"extname or extnhex not specified\");\n    var h = this.params.extn;\n    if (typeof h == \"string\" && r(h))\n      return h;\n    if (typeof h == \"object\")\n      try {\n        return n(h).tohex();\n      } catch {\n      }\n    throw new Error(\"unsupported extn value\");\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.x509.PrivateExtension, a.asn1.x509.Extension);\na.asn1.x509.CRL = function(e) {\n  a.asn1.x509.CRL.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERBitString, n = r.x509, h = n.AlgorithmIdentifier, u = n.TBSCertList;\n  this.params = void 0, this.setByParam = function(p) {\n    this.params = p;\n  }, this.sign = function() {\n    var p = new u(this.params).tohex(), c = new a.crypto.Signature({ alg: this.params.sigalg });\n    c.init(this.params.cakey), c.updateHex(p);\n    var y = c.sign();\n    this.params.sighex = y;\n  }, this.getPEM = function() {\n    return de(this.tohex(), \"X509 CRL\");\n  }, this.tohex = function() {\n    var p = this.params;\n    if (p.tbsobj == null && (p.tbsobj = new u(p)), p.sighex == null && p.cakey != null && this.sign(), p.sighex == null)\n      throw new Error(\"sighex or cakey parameter not defined\");\n    var c = [];\n    c.push(p.tbsobj), c.push(new h({ name: p.sigalg })), c.push(new s({ hex: \"00\" + p.sighex }));\n    var y = new i({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && (this.params = e);\n};\nN(a.asn1.x509.CRL, a.asn1.ASN1Object);\na.asn1.x509.TBSCertList = function(e) {\n  a.asn1.x509.TBSCertList.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERInteger, s = r.DERSequence, n = r.DERTaggedObject;\n  r.DERObjectIdentifier;\n  var h = r.x509, u = h.AlgorithmIdentifier, p = h.Time, c = h.Extensions, y = h.X500Name;\n  this.params = null, this.setByParam = function(v) {\n    this.params = v;\n  }, this.getRevCertSequence = function() {\n    for (var v = [], o = this.params.revcert, l = 0; l < o.length; l++) {\n      var f = [new i(o[l].sn), new p(o[l].date)];\n      o[l].ext != null && f.push(new c(o[l].ext)), v.push(new s({ array: f }));\n    }\n    return new s({ array: v });\n  }, this.tohex = function() {\n    var v = [], o = this.params;\n    if (o.version != null) {\n      var l = o.version - 1, f = new i({ int: l });\n      v.push(f);\n    }\n    if (v.push(new u({ name: o.sigalg })), v.push(new y(o.issuer)), v.push(new p(o.thisupdate)), o.nextupdate != null && v.push(new p(o.nextupdate)), o.revcert != null && v.push(this.getRevCertSequence()), o.ext != null) {\n      var d = new c(o.ext);\n      v.push(new n({ tag: \"a0\", explicit: !0, obj: d }));\n    }\n    var g = new s({ array: v });\n    return g.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.TBSCertList, a.asn1.ASN1Object);\na.asn1.x509.CRLEntry = function(e) {\n  a.asn1.x509.CRLEntry.superclass.constructor.call(this);\n  var t = a, r = t.asn1;\n  this.setCertSerial = function(i) {\n    this.sn = new r.DERInteger(i);\n  }, this.setRevocationDate = function(i) {\n    this.time = new r.x509.Time(i);\n  }, this.tohex = function() {\n    var i = new r.DERSequence({ array: [this.sn, this.time] });\n    return this.TLV = i.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (e.time !== void 0 && this.setRevocationDate(e.time), e.sn !== void 0 && this.setCertSerial(e.sn));\n};\nN(a.asn1.x509.CRLEntry, a.asn1.ASN1Object);\na.asn1.x509.CRLNumber = function(e) {\n  a.asn1.x509.CRLNumber.superclass.constructor.call(this, e), this.params = void 0, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = new a.asn1.DERInteger(this.params.num), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.20\", e != null && (this.params = e);\n};\nN(a.asn1.x509.CRLNumber, a.asn1.x509.Extension);\na.asn1.x509.CRLReason = function(e) {\n  a.asn1.x509.CRLReason.superclass.constructor.call(this, e), this.params = void 0, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = new a.asn1.DEREnumerated(this.params.code), this.asn1ExtnValue.tohex();\n  }, this.oid = \"2.5.29.21\", e != null && (this.params = e);\n};\nN(a.asn1.x509.CRLReason, a.asn1.x509.Extension);\na.asn1.x509.OCSPNonce = function(e) {\n  a.asn1.x509.OCSPNonce.superclass.constructor.call(this, e), this.params = void 0, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = new a.asn1.DEROctetString(this.params), this.asn1ExtnValue.tohex();\n  }, this.oid = \"1.3.6.1.5.5.7.48.1.2\", e != null && (this.params = e);\n};\nN(a.asn1.x509.OCSPNonce, a.asn1.x509.Extension);\na.asn1.x509.OCSPNoCheck = function(e) {\n  a.asn1.x509.OCSPNoCheck.superclass.constructor.call(this, e), this.params = void 0, this.getExtnValueHex = function() {\n    return this.asn1ExtnValue = new a.asn1.DERNull(), this.asn1ExtnValue.tohex();\n  }, this.oid = \"1.3.6.1.5.5.7.48.1.5\", e != null && (this.params = e);\n};\nN(a.asn1.x509.OCSPNoCheck, a.asn1.x509.Extension);\na.asn1.x509.AdobeTimeStamp = function(e) {\n  a.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this, e);\n  var t = a, r = t.asn1, i = r.DERInteger, s = r.DERBoolean, n = r.DERSequence, h = r.x509.GeneralName;\n  this.params = null, this.getExtnValueHex = function() {\n    var u = this.params, p = [new i(1)];\n    return p.push(new h({ uri: u.uri })), u.reqauth != null && p.push(new s(u.reqauth)), this.asn1ExtnValue = new n({ array: p }), this.asn1ExtnValue.tohex();\n  }, this.oid = \"1.2.840.113583.1.1.9.1\", e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.AdobeTimeStamp, a.asn1.x509.Extension);\na.asn1.x509.X500Name = function(e) {\n  a.asn1.x509.X500Name.superclass.constructor.call(this), this.asn1Array = [], this.paramArray = [], this.sRule = \"utf8\";\n  var t = a, r = t.asn1, i = r.x509, s = i.RDN;\n  this.setByString = function(n, h) {\n    h !== void 0 && (this.sRule = h);\n    var u = n.split(\"/\");\n    u.shift();\n    for (var p = [], c = 0; c < u.length; c++)\n      if (u[c].match(/^[^=]+=.+$/))\n        p.push(u[c]);\n      else {\n        var y = p.length - 1;\n        p[y] = p[y] + \"/\" + u[c];\n      }\n    for (var c = 0; c < p.length; c++)\n      this.asn1Array.push(new s({ str: p[c], rule: this.sRule }));\n  }, this.setByLdapString = function(n, h) {\n    h !== void 0 && (this.sRule = h);\n    var u = i.X500Name.ldapToCompat(n);\n    this.setByString(u, h);\n  }, this.setByObject = function(n, h) {\n    h !== void 0 && (this.sRule = h);\n    for (var u in n)\n      if (n.hasOwnProperty(u)) {\n        var p = new s({ str: u + \"=\" + n[u], rule: this.sRule });\n        this.asn1Array ? this.asn1Array.push(p) : this.asn1Array = [p];\n      }\n  }, this.setByParam = function(n) {\n    if (n.rule !== void 0 && (this.sRule = n.rule), n.array !== void 0)\n      this.paramArray = n.array;\n    else if (n.str !== void 0)\n      this.setByString(n.str);\n    else if (n.ldapstr !== void 0)\n      this.setByLdapString(n.ldapstr);\n    else if (n.hex !== void 0)\n      this.hTLV = n.hex;\n    else if (n.certissuer !== void 0) {\n      var h = new L();\n      h.readCertPEM(n.certissuer), this.hTLV = h.getIssuerHex();\n    } else if (n.certsubject !== void 0) {\n      var h = new L();\n      h.readCertPEM(n.certsubject), this.hTLV = h.getSubjectHex();\n    } else\n      typeof n == \"object\" && n.certsubject === void 0 && n.certissuer === void 0 && this.setByObject(n);\n  }, this.tohex = function() {\n    if (typeof this.hTLV == \"string\")\n      return this.hTLV;\n    if (this.asn1Array.length == 0 && this.paramArray.length > 0)\n      for (var n = 0; n < this.paramArray.length; n++) {\n        var h = { array: this.paramArray[n] };\n        this.sRule != \"utf8\" && (h.rule = this.sRule);\n        var u = new s(h);\n        this.asn1Array.push(u);\n      }\n    var p = new r.DERSequence({ array: this.asn1Array });\n    return this.hTLV = p.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.X500Name, a.asn1.ASN1Object);\na.asn1.x509.X500Name.compatToLDAP = function(e) {\n  if (e.substr(0, 1) !== \"/\")\n    throw \"malformed input\";\n  e = e.substr(1);\n  var t = e.split(\"/\");\n  return t.reverse(), t = t.map(function(r) {\n    return r.replace(/,/, \"\\\\,\");\n  }), t.join(\",\");\n};\na.asn1.x509.X500Name.onelineToLDAP = function(e) {\n  return a.asn1.x509.X500Name.compatToLDAP(e);\n};\na.asn1.x509.X500Name.ldapToCompat = function(e) {\n  for (var t = e.split(\",\"), r = !1, i = [], s = 0; t.length > 0; s++) {\n    var n = t.shift();\n    if (r === !0) {\n      var h = i.pop(), u = (h + \",\" + n).replace(/\\\\,/g, \",\");\n      i.push(u), r = !1;\n    } else\n      i.push(n);\n    n.substr(-1, 1) === \"\\\\\" && (r = !0);\n  }\n  return i = i.map(function(p) {\n    return p.replace(\"/\", \"\\\\/\");\n  }), i.reverse(), \"/\" + i.join(\"/\");\n};\na.asn1.x509.X500Name.ldapToOneline = function(e) {\n  return a.asn1.x509.X500Name.ldapToCompat(e);\n};\na.asn1.x509.RDN = function(e) {\n  a.asn1.x509.RDN.superclass.constructor.call(this), this.asn1Array = [], this.paramArray = [], this.sRule = \"utf8\";\n  var t = a.asn1.x509.AttributeTypeAndValue;\n  this.setByParam = function(r) {\n    r.rule !== void 0 && (this.sRule = r.rule), r.str !== void 0 && this.addByMultiValuedString(r.str), r.array !== void 0 && (this.paramArray = r.array);\n  }, this.addByString = function(r) {\n    this.asn1Array.push(new a.asn1.x509.AttributeTypeAndValue({ str: r, rule: this.sRule }));\n  }, this.addByMultiValuedString = function(r) {\n    for (var i = a.asn1.x509.RDN.parseString(r), s = 0; s < i.length; s++)\n      this.addByString(i[s]);\n  }, this.tohex = function() {\n    if (this.asn1Array.length == 0 && this.paramArray.length > 0)\n      for (var r = 0; r < this.paramArray.length; r++) {\n        var i = this.paramArray[r];\n        i.rule !== void 0 && this.sRule != \"utf8\" && (i.rule = this.sRule);\n        var s = new t(i);\n        this.asn1Array.push(s);\n      }\n    var n = new a.asn1.DERSet({ array: this.asn1Array });\n    return this.TLV = n.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.RDN, a.asn1.ASN1Object);\na.asn1.x509.RDN.parseString = function(e) {\n  for (var t = e.split(/\\+/), r = !1, i = [], s = 0; t.length > 0; s++) {\n    var n = t.shift();\n    if (r === !0) {\n      var h = i.pop(), u = (h + \"+\" + n).replace(/\\\\\\+/g, \"+\");\n      i.push(u), r = !1;\n    } else\n      i.push(n);\n    n.substr(-1, 1) === \"\\\\\" && (r = !0);\n  }\n  for (var p = !1, c = [], s = 0; i.length > 0; s++) {\n    var n = i.shift();\n    if (p === !0) {\n      var y = c.pop();\n      if (n.match(/\"$/)) {\n        var u = (y + \"+\" + n).replace(/^([^=]+)=\"(.*)\"$/, \"$1=$2\");\n        c.push(u), p = !1;\n      } else\n        c.push(y + \"+\" + n);\n    } else\n      c.push(n);\n    n.match(/^[^=]+=\"/) && (p = !0);\n  }\n  return c;\n};\na.asn1.x509.AttributeTypeAndValue = function(e) {\n  a.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this), this.sRule = \"utf8\", this.sType = null, this.sValue = null, this.dsType = null;\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERUTF8String, n = r.DERPrintableString, h = r.DERTeletexString, u = r.DERIA5String, p = r.DERVisibleString, c = r.DERBMPString, y = t.lang.String.isMail, v = t.lang.String.isPrintable;\n  this.setByParam = function(o) {\n    if (o.rule !== void 0 && (this.sRule = o.rule), o.ds !== void 0 && (this.dsType = o.ds), o.value === void 0 && o.str !== void 0) {\n      var l = o.str, f = l.match(/^([^=]+)=(.+)$/);\n      if (f)\n        this.sType = f[1], this.sValue = f[2];\n      else\n        throw new Error(\"malformed attrTypeAndValueStr: \" + attrTypeAndValueStr);\n    } else\n      this.sType = o.type, this.sValue = o.value;\n  }, this.setByString = function(o, l) {\n    l !== void 0 && (this.sRule = l);\n    var f = o.match(/^([^=]+)=(.+)$/);\n    if (f)\n      this.setByAttrTypeAndValueStr(f[1], f[2]);\n    else\n      throw new Error(\"malformed attrTypeAndValueStr: \" + attrTypeAndValueStr);\n  }, this._getDsType = function() {\n    var o = this.sType, l = this.sValue, f = this.sRule;\n    return f === \"prn\" ? o == \"CN\" && y(l) ? \"ia5\" : v(l) ? \"prn\" : \"utf8\" : f === \"utf8\" ? o == \"CN\" && y(l) ? \"ia5\" : o == \"C\" ? \"prn\" : \"utf8\" : \"utf8\";\n  }, this.setByAttrTypeAndValueStr = function(o, l, f) {\n    f !== void 0 && (this.sRule = f), this.sType = o, this.sValue = l;\n  }, this.getValueObj = function(o, l) {\n    if (o == \"utf8\")\n      return new s({ str: l });\n    if (o == \"prn\")\n      return new n({ str: l });\n    if (o == \"tel\")\n      return new h({ str: l });\n    if (o == \"ia5\")\n      return new u({ str: l });\n    if (o == \"vis\")\n      return new p({ str: l });\n    if (o == \"bmp\")\n      return new c({ str: l });\n    throw new Error(\"unsupported directory string type: type=\" + o + \" value=\" + l);\n  }, this.tohex = function() {\n    this.dsType == null && (this.dsType = this._getDsType());\n    var o = a.asn1.x509.OID.atype2obj(this.sType), l = this.getValueObj(this.dsType, this.sValue), f = new i({ array: [o, l] });\n    return this.TLV = f.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.AttributeTypeAndValue, a.asn1.ASN1Object);\na.asn1.x509.SubjectPublicKeyInfo = function(e) {\n  a.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERInteger, s = r.DERBitString, n = r.DERObjectIdentifier, h = r.DERSequence, u = r.ASN1Util.newObject, p = r.x509, c = p.AlgorithmIdentifier, y = t.crypto;\n  y.ECDSA, y.DSA, this.getASN1Object = function() {\n    if (this.asn1AlgId == null || this.asn1SubjPKey == null)\n      throw \"algId and/or subjPubKey not set\";\n    var v = new h({ array: [this.asn1AlgId, this.asn1SubjPKey] });\n    return v;\n  }, this.tohex = function() {\n    var v = this.getASN1Object();\n    return this.hTLV = v.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setPubKey = function(v) {\n    try {\n      if (v instanceof q) {\n        var o = u({ seq: [{ int: { bigint: v.n } }, { int: { int: v.e } }] }), l = o.tohex();\n        this.asn1AlgId = new c({ name: \"rsaEncryption\" }), this.asn1SubjPKey = new s({ hex: \"00\" + l });\n      }\n    } catch {\n    }\n    try {\n      if (v instanceof a.crypto.ECDSA) {\n        var f = new n({ name: v.curveName });\n        this.asn1AlgId = new c({ name: \"ecPublicKey\", asn1params: f }), this.asn1SubjPKey = new s({ hex: \"00\" + v.pubKeyHex });\n      }\n    } catch {\n    }\n    try {\n      if (v instanceof a.crypto.DSA) {\n        var f = new u({ seq: [{ int: { bigint: v.p } }, { int: { bigint: v.q } }, { int: { bigint: v.g } }] });\n        this.asn1AlgId = new c({ name: \"dsa\", asn1params: f });\n        var d = new i({ bigint: v.y });\n        this.asn1SubjPKey = new s({ hex: \"00\" + d.tohex() });\n      }\n    } catch {\n    }\n  }, e !== void 0 && this.setPubKey(e);\n};\nN(a.asn1.x509.SubjectPublicKeyInfo, a.asn1.ASN1Object);\na.asn1.x509.Time = function(e) {\n  a.asn1.x509.Time.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERUTCTime, s = r.DERGeneralizedTime;\n  this.params = null, this.type = null, this.setTimeParams = function(n) {\n    this.timeParams = n;\n  }, this.setByParam = function(n) {\n    this.params = n;\n  }, this.getType = function(n) {\n    return n.match(/^[0-9]{12}Z$/) ? \"utc\" : n.match(/^[0-9]{14}Z$/) ? \"gen\" : n.match(/^[0-9]{12}\\.[0-9]+Z$/) ? \"utc\" : n.match(/^[0-9]{14}\\.[0-9]+Z$/) ? \"gen\" : null;\n  }, this.tohex = function() {\n    var n = this.params, h = null;\n    if (typeof n == \"string\" && (n = { str: n }), n != null && n.str && (n.type == null || n.type == null) && (n.type = this.getType(n.str)), n != null && n.str ? (n.type == \"utc\" && (h = new i(n.str)), n.type == \"gen\" && (h = new s(n.str))) : this.type == \"gen\" ? h = new s() : h = new i(), h == null)\n      throw new Error(\"wrong setting for Time\");\n    return this.TLV = h.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\na.asn1.x509.Time_bak = function(e) {\n  a.asn1.x509.Time_bak.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERUTCTime, s = r.DERGeneralizedTime;\n  this.setTimeParams = function(n) {\n    this.timeParams = n;\n  }, this.tohex = function() {\n    var n = null;\n    return this.timeParams != null ? this.type == \"utc\" ? n = new i(this.timeParams) : n = new s(this.timeParams) : this.type == \"utc\" ? n = new i() : n = new s(), this.TLV = n.tohex(), this.TLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.type = \"utc\", e !== void 0 && (e.type !== void 0 ? this.type = e.type : e.str !== void 0 && (e.str.match(/^[0-9]{12}Z$/) && (this.type = \"utc\"), e.str.match(/^[0-9]{14}Z$/) && (this.type = \"gen\")), this.timeParams = e);\n};\nN(a.asn1.x509.Time, a.asn1.ASN1Object);\na.asn1.x509.AlgorithmIdentifier = function(e) {\n  a.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this), this.nameAlg = null, this.asn1Alg = null, this.asn1Params = null, this.paramEmpty = !1;\n  var t = a, r = t.asn1, i = r.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;\n  if (this.tohex = function() {\n    if (this.nameAlg === null && this.asn1Alg === null)\n      throw new Error(\"algorithm not specified\");\n    if (this.nameAlg !== null) {\n      var n = null;\n      for (var h in i)\n        h === this.nameAlg && (n = i[h]);\n      if (n !== null)\n        return this.hTLV = n, this.hTLV;\n    }\n    this.nameAlg !== null && this.asn1Alg === null && (this.asn1Alg = r.x509.OID.name2obj(this.nameAlg));\n    var u = [this.asn1Alg];\n    this.asn1Params !== null && u.push(this.asn1Params);\n    var p = new r.DERSequence({ array: u });\n    return this.hTLV = p.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && (e.name !== void 0 && (this.nameAlg = e.name), e.asn1params !== void 0 && (this.asn1Params = e.asn1params), e.paramempty !== void 0 && (this.paramEmpty = e.paramempty)), this.asn1Params === null && this.paramEmpty === !1 && this.nameAlg !== null) {\n    this.nameAlg.name !== void 0 && (this.nameAlg = this.nameAlg.name);\n    var s = this.nameAlg.toLowerCase();\n    s.substr(-7, 7) !== \"withdsa\" && s.substr(-9, 9) !== \"withecdsa\" && (this.asn1Params = new r.DERNull());\n  }\n};\nN(a.asn1.x509.AlgorithmIdentifier, a.asn1.ASN1Object);\na.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV = { SHAwithRSAandMGF1: \"300d06092a864886f70d01010a3000\", SHA256withRSAandMGF1: \"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120\", SHA384withRSAandMGF1: \"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130\", SHA512withRSAandMGF1: \"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140\" };\na.asn1.x509.GeneralName = function(e) {\n  a.asn1.x509.GeneralName.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.x509, s = i.X500Name, n = i.OtherName, h = r.DERIA5String;\n  r.DERPrintableString;\n  var u = r.DEROctetString, p = r.DERTaggedObject, c = r.ASN1Object, y = Error;\n  this.params = null, this.setByParam = function(v) {\n    this.params = v;\n  }, this.tohex = function() {\n    var v = this.params, o, f, l, f = !1;\n    if (v.other !== void 0)\n      o = \"a0\", l = new n(v.other);\n    else if (v.rfc822 !== void 0)\n      o = \"81\", l = new h({ str: v.rfc822 });\n    else if (v.dns !== void 0)\n      o = \"82\", l = new h({ str: v.dns });\n    else if (v.dn !== void 0)\n      o = \"a4\", f = !0, typeof v.dn == \"string\" ? l = new s({ str: v.dn }) : v.dn instanceof a.asn1.x509.X500Name ? l = v.dn : l = new s(v.dn);\n    else if (v.ldapdn !== void 0)\n      o = \"a4\", f = !0, l = new s({ ldapstr: v.ldapdn });\n    else if (v.certissuer !== void 0 || v.certsubj !== void 0) {\n      o = \"a4\", f = !0;\n      var d, g, S = null;\n      if (v.certsubj !== void 0 ? (d = !1, g = v.certsubj) : (d = !0, g = v.certissuer), g.match(/^[0-9A-Fa-f]+$/), g.indexOf(\"-----BEGIN \") != -1 && (S = ie(g)), S == null)\n        throw new Error(\"certsubj/certissuer not cert\");\n      var b = new L();\n      b.hex = S;\n      var D;\n      d ? D = b.getIssuerHex() : D = b.getSubjectHex(), l = new c(), l.hTLV = D;\n    } else if (v.uri !== void 0)\n      o = \"86\", l = new h({ str: v.uri });\n    else if (v.ip !== void 0) {\n      o = \"87\";\n      var A, I = v.ip;\n      try {\n        if (I.match(/^[0-9a-f]+$/)) {\n          var m = I.length;\n          if (m == 8 || m == 16 || m == 32 || m == 64)\n            A = I;\n          else\n            throw \"err\";\n        } else\n          A = Rt(I);\n      } catch (w) {\n        throw new y(\"malformed IP address: \" + v.ip + \":\" + w.message);\n      }\n      l = new u({ hex: A });\n    } else\n      throw new y(\"improper params\");\n    var E = new p({ tag: o, explicit: f, obj: l });\n    return E.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.GeneralName, a.asn1.ASN1Object);\na.asn1.x509.GeneralNames = function(e) {\n  a.asn1.x509.GeneralNames.superclass.constructor.call(this);\n  var t = a, r = t.asn1;\n  this.setByParamArray = function(i) {\n    for (var s = 0; s < i.length; s++) {\n      var n = new r.x509.GeneralName(i[s]);\n      this.asn1Array.push(n);\n    }\n  }, this.tohex = function() {\n    var i = new r.DERSequence({ array: this.asn1Array });\n    return i.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.asn1Array = new Array(), typeof e < \"u\" && this.setByParamArray(e);\n};\nN(a.asn1.x509.GeneralNames, a.asn1.ASN1Object);\na.asn1.x509.OtherName = function(e) {\n  a.asn1.x509.OtherName.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DERObjectIdentifier, s = r.DERSequence, n = r.ASN1Util.newObject;\n  this.params = null, this.setByParam = function(h) {\n    this.params = h;\n  }, this.tohex = function() {\n    var h = this.params;\n    if (h.oid == null || h.value == null)\n      throw new Error(\"oid or value not specified\");\n    var u = new i({ oid: h.oid }), p = n({ tag: { tag: \"a0\", explicit: !0, obj: h.value } }), c = new s({ array: [u, p] });\n    return c.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.x509.OtherName, a.asn1.ASN1Object);\na.asn1.x509.OID = new function() {\n  var e = a.asn1.DERObjectIdentifier;\n  this.name2oidList = { \"aes128-CBC\": \"2.16.840.1.101.3.4.1.2\", \"aes256-CBC\": \"2.16.840.1.101.3.4.1.42\", sha1: \"1.3.14.3.2.26\", sha256: \"2.16.840.1.101.3.4.2.1\", sha384: \"2.16.840.1.101.3.4.2.2\", sha512: \"2.16.840.1.101.3.4.2.3\", sha224: \"2.16.840.1.101.3.4.2.4\", md5: \"1.2.840.113549.2.5\", md2: \"1.3.14.7.2.2.1\", ripemd160: \"1.3.36.3.2.1\", hmacWithSHA1: \"1.2.840.113549.2.7\", hmacWithSHA224: \"1.2.840.113549.2.8\", hmacWithSHA256: \"1.2.840.113549.2.9\", hmacWithSHA384: \"1.2.840.113549.2.10\", hmacWithSHA512: \"1.2.840.113549.2.11\", MD2withRSA: \"1.2.840.113549.1.1.2\", MD4withRSA: \"1.2.840.113549.1.1.3\", MD5withRSA: \"1.2.840.113549.1.1.4\", SHA1withRSA: \"1.2.840.113549.1.1.5\", \"pkcs1-MGF\": \"1.2.840.113549.1.1.8\", rsaPSS: \"1.2.840.113549.1.1.10\", SHA224withRSA: \"1.2.840.113549.1.1.14\", SHA256withRSA: \"1.2.840.113549.1.1.11\", SHA384withRSA: \"1.2.840.113549.1.1.12\", SHA512withRSA: \"1.2.840.113549.1.1.13\", SHA1withECDSA: \"1.2.840.10045.4.1\", SHA224withECDSA: \"1.2.840.10045.4.3.1\", SHA256withECDSA: \"1.2.840.10045.4.3.2\", SHA384withECDSA: \"1.2.840.10045.4.3.3\", SHA512withECDSA: \"1.2.840.10045.4.3.4\", dsa: \"1.2.840.10040.4.1\", SHA1withDSA: \"1.2.840.10040.4.3\", SHA224withDSA: \"2.16.840.1.101.3.4.3.1\", SHA256withDSA: \"2.16.840.1.101.3.4.3.2\", rsaEncryption: \"1.2.840.113549.1.1.1\", commonName: \"2.5.4.3\", countryName: \"2.5.4.6\", localityName: \"2.5.4.7\", stateOrProvinceName: \"2.5.4.8\", streetAddress: \"2.5.4.9\", organizationName: \"2.5.4.10\", organizationalUnitName: \"2.5.4.11\", domainComponent: \"0.9.2342.19200300.100.1.25\", userId: \"0.9.2342.19200300.100.1.1\", surname: \"2.5.4.4\", givenName: \"2.5.4.42\", title: \"2.5.4.12\", distinguishedName: \"2.5.4.49\", emailAddress: \"1.2.840.113549.1.9.1\", description: \"2.5.4.13\", businessCategory: \"2.5.4.15\", postalCode: \"2.5.4.17\", uniqueIdentifier: \"2.5.4.45\", organizationIdentifier: \"2.5.4.97\", jurisdictionOfIncorporationL: \"1.3.6.1.4.1.311.60.2.1.1\", jurisdictionOfIncorporationSP: \"1.3.6.1.4.1.311.60.2.1.2\", jurisdictionOfIncorporationC: \"1.3.6.1.4.1.311.60.2.1.3\", subjectDirectoryAttributes: \"2.5.29.9\", subjectKeyIdentifier: \"2.5.29.14\", keyUsage: \"2.5.29.15\", subjectAltName: \"2.5.29.17\", issuerAltName: \"2.5.29.18\", basicConstraints: \"2.5.29.19\", cRLNumber: \"2.5.29.20\", cRLReason: \"2.5.29.21\", nameConstraints: \"2.5.29.30\", cRLDistributionPoints: \"2.5.29.31\", certificatePolicies: \"2.5.29.32\", anyPolicy: \"2.5.29.32.0\", policyMappings: \"2.5.29.33\", authorityKeyIdentifier: \"2.5.29.35\", policyConstraints: \"2.5.29.36\", extKeyUsage: \"2.5.29.37\", inhibitAnyPolicy: \"2.5.29.54\", authorityInfoAccess: \"1.3.6.1.5.5.7.1.1\", ocsp: \"1.3.6.1.5.5.7.48.1\", ocspBasic: \"1.3.6.1.5.5.7.48.1.1\", ocspNonce: \"1.3.6.1.5.5.7.48.1.2\", ocspNoCheck: \"1.3.6.1.5.5.7.48.1.5\", caIssuers: \"1.3.6.1.5.5.7.48.2\", anyExtendedKeyUsage: \"2.5.29.37.0\", serverAuth: \"1.3.6.1.5.5.7.3.1\", clientAuth: \"1.3.6.1.5.5.7.3.2\", codeSigning: \"1.3.6.1.5.5.7.3.3\", emailProtection: \"1.3.6.1.5.5.7.3.4\", timeStamping: \"1.3.6.1.5.5.7.3.8\", ocspSigning: \"1.3.6.1.5.5.7.3.9\", smtpUTF8Mailbox: \"1.3.6.1.5.5.7.8.9\", dateOfBirth: \"1.3.6.1.5.5.7.9.1\", placeOfBirth: \"1.3.6.1.5.5.7.9.2\", gender: \"1.3.6.1.5.5.7.9.3\", countryOfCitizenship: \"1.3.6.1.5.5.7.9.4\", countryOfResidence: \"1.3.6.1.5.5.7.9.5\", ecPublicKey: \"1.2.840.10045.2.1\", \"P-256\": \"1.2.840.10045.3.1.7\", secp256r1: \"1.2.840.10045.3.1.7\", secp256k1: \"1.3.132.0.10\", secp384r1: \"1.3.132.0.34\", secp521r1: \"1.3.132.0.35\", pkcs5PBES2: \"1.2.840.113549.1.5.13\", pkcs5PBKDF2: \"1.2.840.113549.1.5.12\", \"des-EDE3-CBC\": \"1.2.840.113549.3.7\", data: \"1.2.840.113549.1.7.1\", \"signed-data\": \"1.2.840.113549.1.7.2\", \"enveloped-data\": \"1.2.840.113549.1.7.3\", \"digested-data\": \"1.2.840.113549.1.7.5\", \"encrypted-data\": \"1.2.840.113549.1.7.6\", \"authenticated-data\": \"1.2.840.113549.1.9.16.1.2\", tstinfo: \"1.2.840.113549.1.9.16.1.4\", signingCertificate: \"1.2.840.113549.1.9.16.2.12\", timeStampToken: \"1.2.840.113549.1.9.16.2.14\", signaturePolicyIdentifier: \"1.2.840.113549.1.9.16.2.15\", etsArchiveTimeStamp: \"1.2.840.113549.1.9.16.2.27\", signingCertificateV2: \"1.2.840.113549.1.9.16.2.47\", etsArchiveTimeStampV2: \"1.2.840.113549.1.9.16.2.48\", extensionRequest: \"1.2.840.113549.1.9.14\", contentType: \"1.2.840.113549.1.9.3\", messageDigest: \"1.2.840.113549.1.9.4\", signingTime: \"1.2.840.113549.1.9.5\", counterSignature: \"1.2.840.113549.1.9.6\", archiveTimeStampV3: \"0.4.0.1733.2.4\", pdfRevocationInfoArchival: \"1.2.840.113583.1.1.8\", adobeTimeStamp: \"1.2.840.113583.1.1.9.1\", smimeMailboxLegacy: \"2.23.140.1.5.1.1\", smimeMailboxMulti: \"2.23.140.1.5.1.2\", smimeMailboxStrict: \"2.23.140.1.5.1.3\", smimeOrganizationLegacy: \"2.23.140.1.5.2.1\", smimeOrganizationMulti: \"2.23.140.1.5.2.2\", smimeOrganizationStrict: \"2.23.140.1.5.2.3\", smimeSponsorLegacy: \"2.23.140.1.5.3.1\", smimeSponsorMulti: \"2.23.140.1.5.3.2\", smimeSponsorStrict: \"2.23.140.1.5.3.3\", smimeIndividualLegacy: \"2.23.140.1.5.4.1\", smimeIndividualMulti: \"2.23.140.1.5.4.2\", smimeIndividualStrict: \"2.23.140.1.5.4.3\" }, this.atype2oidList = { CN: \"2.5.4.3\", L: \"2.5.4.7\", ST: \"2.5.4.8\", O: \"2.5.4.10\", OU: \"2.5.4.11\", C: \"2.5.4.6\", STREET: \"2.5.4.9\", DC: \"0.9.2342.19200300.100.1.25\", UID: \"0.9.2342.19200300.100.1.1\", SN: \"2.5.4.4\", T: \"2.5.4.12\", GN: \"2.5.4.42\", DN: \"2.5.4.49\", E: \"1.2.840.113549.1.9.1\", description: \"2.5.4.13\", businessCategory: \"2.5.4.15\", postalCode: \"2.5.4.17\", serialNumber: \"2.5.4.5\", uniqueIdentifier: \"2.5.4.45\", organizationIdentifier: \"2.5.4.97\", jurisdictionOfIncorporationL: \"1.3.6.1.4.1.311.60.2.1.1\", jurisdictionOfIncorporationSP: \"1.3.6.1.4.1.311.60.2.1.2\", jurisdictionOfIncorporationC: \"1.3.6.1.4.1.311.60.2.1.3\" }, this.objCache = {}, this.name2obj = function(t) {\n    if (typeof this.objCache[t] < \"u\")\n      return this.objCache[t];\n    if (typeof this.name2oidList[t] > \"u\")\n      throw \"Name of ObjectIdentifier not defined: \" + t;\n    var r = this.name2oidList[t], i = new e({ oid: r });\n    return this.objCache[t] = i, i;\n  }, this.atype2obj = function(t) {\n    if (this.objCache[t] !== void 0)\n      return this.objCache[t];\n    var r;\n    if (t.match(/^\\d+\\.\\d+\\.[0-9.]+$/))\n      r = t;\n    else if (this.atype2oidList[t] !== void 0)\n      r = this.atype2oidList[t];\n    else if (this.name2oidList[t] !== void 0)\n      r = this.name2oidList[t];\n    else\n      throw new Error(\"AttributeType name undefined: \" + t);\n    var i = new e({ oid: r });\n    return this.objCache[t] = i, i;\n  }, this.registerOIDs = function(t) {\n    if (this.checkOIDs(t))\n      for (var r in t)\n        this.name2oidList[r] = t[r];\n  }, this.checkOIDs = function(t) {\n    try {\n      var r = Object.keys(t);\n      return r.length == 0 ? !1 : (r.map(function(i, s, n) {\n        var h = this[i];\n        if (!h.match(/^[0-2]\\.[0-9.]+$/))\n          throw new Error(\"value is not OID\");\n      }, t), !0);\n    } catch {\n      return !1;\n    }\n  };\n}();\na.asn1.x509.OID.oid2name = function(e) {\n  var t = a.asn1.x509.OID.name2oidList;\n  for (var r in t)\n    if (t[r] == e)\n      return r;\n  return \"\";\n};\na.asn1.x509.OID.oid2atype = function(e) {\n  var t = a.asn1.x509.OID.atype2oidList;\n  for (var r in t)\n    if (t[r] == e)\n      return r;\n  return e;\n};\na.asn1.x509.OID.name2oid = function(e) {\n  if (e.match(/^[0-9.]+$/))\n    return e;\n  var t = a.asn1.x509.OID.name2oidList;\n  return t[e] === void 0 ? \"\" : t[e];\n};\na.asn1.x509.X509Util = {};\na.asn1.x509.X509Util.newCertPEM = function(e) {\n  var t = a.asn1.x509;\n  t.TBSCertificate;\n  var r = t.Certificate, i = new r(e);\n  return i.getPEM();\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.cms > \"u\" || !a.asn1.cms) && (a.asn1.cms = {});\na.asn1.cms.Attribute = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.DERSet, h = i.DERObjectIdentifier;\n  this.params = null, this.typeOid = null, this.setByParam = function(u) {\n    this.params = u;\n  }, this.getValueArray = function() {\n    throw new t(\"not yet implemented abstract\");\n  }, this.tohex = function() {\n    var u = new h({ oid: this.typeOid }), p = new n({ array: this.getValueArray() }), c = new s({ array: [u, p] });\n    return c.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  };\n};\nN(a.asn1.cms.Attribute, a.asn1.ASN1Object);\na.asn1.cms.ContentType = function(e) {\n  var t = a, r = t.asn1;\n  r.cms.ContentType.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.3\", this.getValueArray = function() {\n    var i = new r.DERObjectIdentifier(this.params.type);\n    return [i];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.ContentType, a.asn1.cms.Attribute);\na.asn1.cms.MessageDigest = function(e) {\n  var t = a, r = t.asn1, i = r.DEROctetString, s = r.cms;\n  s.MessageDigest.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.4\", this.getValueArray = function() {\n    var n = new i(this.params);\n    return [n];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.MessageDigest, a.asn1.cms.Attribute);\na.asn1.cms.SigningTime = function(e) {\n  var t = a, r = t.asn1;\n  r.cms.SigningTime.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.5\", this.getValueArray = function() {\n    var i = new r.x509.Time(this.params);\n    return [i];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SigningTime, a.asn1.cms.Attribute);\na.asn1.cms.SigningCertificate = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.cms, h = n.ESSCertID;\n  r.crypto, n.SigningCertificate.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.12\", this.getValueArray = function() {\n    if (this.params == null || this.params == null || this.params.array == null)\n      throw new t(\"parameter 'array' not specified\");\n    for (var u = this.params.array, p = [], c = 0; c < u.length; c++) {\n      var y = u[c];\n      e.hasis == !1 && typeof y == \"string\" && (y.indexOf(\"-----BEGIN\") != -1 || V.isASN1HEX(y)) && (y = { cert: y }), y.hasis != !1 && e.hasis == !1 && (y.hasis = !1), p.push(new h(y));\n    }\n    var v = new s({ array: p }), o = new s({ array: [v] });\n    return [o];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SigningCertificate, a.asn1.cms.Attribute);\na.asn1.cms.ESSCertID = function(e) {\n  a.asn1.cms.ESSCertID.superclass.constructor.call(this);\n  var t = Error, r = a, i = r.asn1, s = i.DEROctetString, n = i.DERSequence, h = i.cms.IssuerSerial;\n  this.params = null, this.getCertHash = function(u, p) {\n    if (u.hash != null)\n      return u.hash;\n    if (typeof u == \"string\" && u.indexOf(\"-----BEGIN\") == -1 && !V.isASN1HEX(u))\n      return u;\n    var c;\n    if (typeof u == \"string\")\n      c = u;\n    else if (u.cert != null)\n      c = u.cert;\n    else\n      throw new t(\"hash nor cert unspecified\");\n    var y;\n    c.indexOf(\"-----BEGIN\") != -1 ? y = ie(c) : y = c, typeof u == \"string\" && (u.indexOf(\"-----BEGIN\") != -1 ? y = ie(u) : V.isASN1HEX(u) && (y = u));\n    var v;\n    if (u.alg != null)\n      v = u.alg;\n    else if (p != null)\n      v = p;\n    else\n      throw new t(\"hash alg unspecified\");\n    return r.crypto.Util.hashHex(y, v);\n  }, this.tohex = function() {\n    var u = this.params, p = this.getCertHash(u, \"sha1\"), c = [];\n    c.push(new s({ hex: p })), (typeof u == \"string\" && u.indexOf(\"-----BEGIN\") != -1 || u.cert != null && u.hasis != !1 || u.issuer != null && u.serial != null) && c.push(new h(u));\n    var y = new n({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.ESSCertID, a.asn1.ASN1Object);\na.asn1.cms.SigningCertificateV2 = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence;\n  i.x509;\n  var n = i.cms, h = n.ESSCertIDv2;\n  r.crypto, n.SigningCertificateV2.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.47\", this.getValueArray = function() {\n    if (this.params == null || this.params == null || this.params.array == null)\n      throw new t(\"parameter 'array' not specified\");\n    for (var u = this.params.array, p = [], c = 0; c < u.length; c++) {\n      var y = u[c];\n      (e.alg != null || e.hasis == !1) && typeof y == \"string\" && (y.indexOf(\"-----BEGIN\") != -1 || V.isASN1HEX(y)) && (y = { cert: y }), y.alg == null && e.alg != null && (y.alg = e.alg), y.hasis != !1 && e.hasis == !1 && (y.hasis = !1), p.push(new h(y));\n    }\n    var v = new s({ array: p }), o = new s({ array: [v] });\n    return [o];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SigningCertificateV2, a.asn1.cms.Attribute);\na.asn1.cms.ESSCertIDv2 = function(e) {\n  a.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.DEROctetString, s = r.DERSequence, n = r.cms.IssuerSerial, h = r.x509.AlgorithmIdentifier;\n  this.params = null, this.tohex = function() {\n    var u = this.params, p = this.getCertHash(u, \"sha256\"), c = [];\n    u.alg != null && u.alg != \"sha256\" && c.push(new h({ name: u.alg })), c.push(new i({ hex: p })), (typeof u == \"string\" && u.indexOf(\"-----BEGIN\") != -1 || u.cert != null && u.hasis != !1 || u.issuer != null && u.serial != null) && c.push(new n(u));\n    var y = new s({ array: c });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.ESSCertIDv2, a.asn1.cms.ESSCertID);\na.asn1.cms.IssuerSerial = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERInteger, n = i.DERSequence, h = i.cms, u = i.x509, p = u.GeneralNames, c = L;\n  h.IssuerSerial.superclass.constructor.call(this), this.setByParam = function(y) {\n    this.params = y;\n  }, this.tohex = function() {\n    var y = this.params, v, o;\n    if (typeof y == \"string\" && y.indexOf(\"-----BEGIN\") != -1 || y.cert != null) {\n      var l;\n      y.cert != null ? l = y.cert : l = y;\n      var f = new c();\n      f.readCertPEM(l), v = f.getIssuer(), o = { hex: f.getSerialNumberHex() };\n    } else if (y.issuer != null && y.serial)\n      v = y.issuer, o = y.serial;\n    else\n      throw new t(\"cert or issuer and serial parameter not specified\");\n    var d = new p([{ dn: v }]), g = new s(o), S = new n({ array: [d, g] });\n    return S.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.IssuerSerial, a.asn1.ASN1Object);\na.asn1.cms.SignerIdentifier = function(e) {\n  var t = a, r = t.asn1;\n  r.DERInteger, r.DERSequence;\n  var i = r.cms, s = i.IssuerAndSerialNumber, n = i.SubjectKeyIdentifier, h = r.x509;\n  h.X500Name, i.SignerIdentifier.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params;\n    if (u.type == \"isssn\") {\n      var p = new s(u);\n      return p.tohex();\n    } else if (u.type == \"skid\") {\n      var c = new n(u);\n      return c.tohex();\n    } else\n      throw new Error(\"wrong property for isssn or skid\");\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SignerIdentifier, a.asn1.ASN1Object);\na.asn1.cms.IssuerAndSerialNumber = function(e) {\n  var t = a, r = t.asn1, i = r.DERInteger, s = r.DERSequence, n = r.cms, h = r.x509, u = h.X500Name, p = L, c = Error;\n  n.IssuerAndSerialNumber.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var y = this.params, v, o;\n    if (typeof y == \"string\" && y.indexOf(\"-----BEGIN\") != -1 || y.cert != null) {\n      var l;\n      y.cert != null ? l = y.cert : l = y;\n      var f = new p();\n      f.readCertPEM(l), v = f.getIssuer(), o = { hex: f.getSerialNumberHex() };\n    } else if (y.issuer != null && y.serial)\n      v = y.issuer, o = y.serial;\n    else\n      throw new c(\"cert or issuer and serial parameter not specified\");\n    var d = new u(v), g = new i(o), S = new s({ array: [d, g] });\n    return S.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(y) {\n    this.params = y;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.IssuerAndSerialNumber, a.asn1.ASN1Object);\na.asn1.cms.SubjectKeyIdentifier = function(e) {\n  var t = a, r = t.asn1;\n  r.DERInteger, r.DERSequence;\n  var i = r.ASN1Util.newObject, s = r.cms;\n  s.IssuerAndSerialName, s.SubjectKeyIdentifier;\n  var n = r.x509;\n  n.X500Name;\n  var h = L, u = Error;\n  s.SubjectKeyIdentifier.superclass.constructor.call(this), this.tohex = function() {\n    var p = this.params;\n    if (p.cert == null && p.skid == null)\n      throw new u(\"property cert nor skid undefined\");\n    var c;\n    if (p.cert != null) {\n      var y = new h(p.cert), v = y.getExtSubjectKeyIdentifier();\n      c = v.kid.hex;\n    } else\n      p.skid != null && (c = p.skid);\n    var o = i({ tag: { tage: \"a0\", obj: { octstr: { hex: c } } } });\n    return o.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SubjectKeyIdentifier, a.asn1.ASN1Object);\na.asn1.cms.AttributeList = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSet, n = i.cms;\n  n.AttributeList.superclass.constructor.call(this), this.params = null, this.hTLV = null, this.setByParam = function(h) {\n    this.params = h;\n  }, this.tohex = function() {\n    var h = this.params;\n    if (this.hTLV != null)\n      return this.hTLV;\n    var u = !0;\n    h.sortflag != null && (u = h.sortflag);\n    for (var p = h.array, c = [], y = 0; y < p.length; y++) {\n      var v = p[y], o = v.attr;\n      if (o == \"contentType\")\n        c.push(new n.ContentType(v));\n      else if (o == \"messageDigest\")\n        c.push(new n.MessageDigest(v));\n      else if (o == \"signingTime\")\n        c.push(new n.SigningTime(v));\n      else if (o == \"signingCertificate\")\n        c.push(new n.SigningCertificate(v));\n      else if (o == \"signingCertificateV2\")\n        c.push(new n.SigningCertificateV2(v));\n      else if (o == \"signaturePolicyIdentifier\")\n        c.push(new a.asn1.cades.SignaturePolicyIdentifier(v));\n      else if (o == \"signatureTimeStamp\" || o == \"timeStampToken\")\n        c.push(new a.asn1.cades.SignatureTimeStamp(v));\n      else\n        throw new t(\"unknown attr: \" + o);\n    }\n    var l = new s({ array: c, sortflag: u });\n    return this.hTLV = l.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.AttributeList, a.asn1.ASN1Object);\na.asn1.cms.SignerInfo = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERInteger, n = i.DEROctetString, h = i.DERSequence, u = i.DERTaggedObject, p = i.cms, c = p.SignerIdentifier, y = p.AttributeList;\n  p.ContentType, p.EncapsulatedContentInfo, p.MessageDigest, p.SignedData;\n  var v = i.x509, o = v.AlgorithmIdentifier, l = r.crypto, f = k;\n  p.SignerInfo.superclass.constructor.call(this), this.params = null, this.sign = function() {\n    var d = this.params, g = d.sigalg, S = new y(d.sattrs).tohex(), b = f.getKey(d.signkey), D = new l.Signature({ alg: g });\n    D.init(b), D.updateHex(S);\n    var A = D.sign();\n    d.sighex = A;\n  }, this.tohex = function() {\n    var d = this.params, g = [];\n    if (g.push(new s({ int: d.version })), g.push(new c(d.id)), g.push(new o({ name: d.hashalg })), d.sattrs != null) {\n      var S = new y(d.sattrs);\n      try {\n        g.push(new u({ tag: \"a0\", explicit: !1, obj: S }));\n      } catch (D) {\n        throw new t(\"si sattr error: \" + D);\n      }\n    }\n    if (d.sigalgfield != null ? g.push(new o({ name: d.sigalgfield })) : g.push(new o({ name: d.sigalg })), d.sighex == null && d.signkey != null && this.sign(), g.push(new n({ hex: d.sighex })), d.uattrs != null) {\n      var S = new y(d.uattrs);\n      try {\n        g.push(new u({ tag: \"a1\", explicit: !1, obj: S }));\n      } catch (A) {\n        throw new t(\"si uattr error: \" + A);\n      }\n    }\n    var b = new h({ array: g });\n    return b.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SignerInfo, a.asn1.ASN1Object);\na.asn1.cms.EncapsulatedContentInfo = function(e) {\n  var t = a, r = t.asn1, i = r.DERTaggedObject, s = r.DERSequence, n = r.DERObjectIdentifier, h = r.DEROctetString, u = r.cms;\n  u.EncapsulatedContentInfo.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var p = this.params, c = [];\n    if (c.push(new n(p.type)), p.content != null && (p.content.hex != null || p.content.str != null) && p.isDetached != !0) {\n      var y = new h(p.content), v = new i({ tag: \"a0\", explicit: !0, obj: y });\n      c.push(v);\n    }\n    var o = new s({ array: c });\n    return o.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(p) {\n    this.params = p;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.EncapsulatedContentInfo, a.asn1.ASN1Object);\na.asn1.cms.ContentInfo = function(e) {\n  var t = a, r = t.asn1, i = r.DERTaggedObject, s = r.DERSequence, n = r.DERObjectIdentifier, h = r.x509;\n  h.OID.name2obj, a.asn1.cms.ContentInfo.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params, p = [];\n    p.push(new n(u.type));\n    var c = new i({ tag: \"a0\", explicit: !0, obj: u.obj });\n    p.push(c);\n    var y = new s({ array: p });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(u) {\n    this.params = u;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.ContentInfo, a.asn1.ASN1Object);\na.asn1.cms.SignedData = function(e) {\n  var t = a, r = t.asn1;\n  r.ASN1Object;\n  var i = r.DERInteger, s = r.DERSet, n = r.DERSequence;\n  r.DERTaggedObject;\n  var h = r.cms, u = h.EncapsulatedContentInfo, p = h.SignerInfo, c = h.ContentInfo, y = h.CertificateSet, v = h.RevocationInfoChoices, o = r.x509, l = o.AlgorithmIdentifier;\n  a.asn1.cms.SignedData.superclass.constructor.call(this), this.params = null, this.checkAndFixParam = function() {\n    var f = this.params;\n    this._setDigestAlgs(f), this._setContentTypeByEContent(f), this._setMessageDigestByEContent(f), this._setSignerInfoVersion(f), this._setSignedDataVersion(f);\n  }, this._setDigestAlgs = function(f) {\n    for (var d = {}, g = f.sinfos, S = 0; S < g.length; S++) {\n      var b = g[S];\n      d[b.hashalg] = 1;\n    }\n    f.hashalgs = Object.keys(d).sort();\n  }, this._setContentTypeByEContent = function(f) {\n    for (var d = f.econtent.type, g = f.sinfos, S = 0; S < g.length; S++) {\n      var b = g[S], D = this._getAttrParamByName(b, \"contentType\");\n      D.type = d;\n    }\n  }, this._setMessageDigestByEContent = function(f) {\n    var d = f.econtent;\n    f.econtent.type;\n    var g = d.content.hex;\n    g == null && d.type == \"data\" && d.content.str != null && (g = Pe(d.content.str));\n    for (var S = f.sinfos, b = 0; b < S.length; b++) {\n      var D = S[b], A = D.hashalg, I = this._getAttrParamByName(D, \"messageDigest\"), m = a.crypto.Util.hashHex(g, A);\n      I.hex = m;\n    }\n  }, this._getAttrParamByName = function(f, d) {\n    for (var g = f.sattrs.array, S = 0; S < g.length; S++)\n      if (g[S].attr == d)\n        return g[S];\n  }, this._setSignerInfoVersion = function(f) {\n    for (var d = f.sinfos, g = 0; g < d.length; g++) {\n      var S = d[g], b = 1;\n      S.id.type == \"skid\" && (b = 3), S.version = b;\n    }\n  }, this._setSignedDataVersion = function(f) {\n    var d = this._getSignedDataVersion(f);\n    f.version = d;\n  }, this._getSignedDataVersion = function(f) {\n    if (f.revinfos != null)\n      for (var d = f.revinfos, g = 0; g < d.length; g++) {\n        var S = d[g];\n        if (S.ocsp != null)\n          return 5;\n      }\n    for (var b = f.sinfos, g = 0; g < b.length; g++) {\n      var D = f.sinfos[g];\n      if (D.version == 3)\n        return 3;\n    }\n    return f.econtent.type != \"data\" ? 3 : 1;\n  }, this.tohex = function() {\n    var f = this.params;\n    this.getEncodedHexPrepare != null && this.getEncodedHexPrepare(), f.fixed != !0 && this.checkAndFixParam();\n    var d = [];\n    d.push(new i({ int: f.version }));\n    for (var g = [], S = 0; S < f.hashalgs.length; S++) {\n      var b = f.hashalgs[S];\n      g.push(new l({ name: b }));\n    }\n    d.push(new s({ array: g })), d.push(new u(f.econtent)), f.certs != null && d.push(new y(f.certs)), f.revinfos != null && d.push(new v(f.revinfos));\n    for (var D = [], S = 0; S < f.sinfos.length; S++) {\n      var A = f.sinfos[S];\n      D.push(new p(A));\n    }\n    d.push(new s({ array: D }));\n    var I = new n({ array: d });\n    return I.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.getContentInfo = function() {\n    var f = new c({ type: \"signed-data\", obj: this });\n    return f;\n  }, this.getContentInfoEncodedHex = function() {\n    return this.getContentInfo().tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.SignedData, a.asn1.ASN1Object);\na.asn1.cms.CertificateSet = function(e) {\n  a.asn1.cms.CertificateSet.superclass.constructor.call(this);\n  var t = Error, r = a.asn1, i = r.DERTaggedObject, s = r.DERSet, n = r.ASN1Object;\n  this.params = null, this.tohex = function() {\n    var h = this.params, u = [], p;\n    if (h instanceof Array)\n      p = h;\n    else if (h.array != null)\n      p = h.array;\n    else\n      throw new t(\"cert array not specified\");\n    for (var c = 0; c < p.length; c++) {\n      var y = p[c], v = ie(y), o = new n();\n      o.hTLV = v, u.push(o);\n    }\n    var l = { array: u };\n    h.sortflag == !1 && (l.sortflag = !1);\n    var f = new s(l), d = new i({ tag: \"a0\", explicit: !1, obj: f });\n    return d.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.CertificateSet, a.asn1.ASN1Object);\na.asn1.cms.RevocationInfoChoices = function(e) {\n  a.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var t = this.params;\n    if (!t instanceof Array)\n      throw new Error(\"params is not array\");\n    for (var r = [], i = 0; i < t.length; i++)\n      r.push(new a.asn1.cms.RevocationInfoChoice(t[i]));\n    var s = a.asn1.ASN1Util.newObject({ tag: { tagi: \"a1\", obj: { set: r } } });\n    return s.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.RevocationInfoChoices, a.asn1.ASN1Object);\na.asn1.cms.RevocationInfoChoice = function(e) {\n  a.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var t = this.params;\n    if (t.crl != null && typeof t.crl == \"string\") {\n      var r = t.crl;\n      return t.crl.indexOf(\"-----BEGIN\") != -1 && (r = ie(t.crl)), r;\n    } else if (t.ocsp != null) {\n      var i = a.asn1.ASN1Util.newObject({ tag: { tagi: \"a1\", obj: new a.asn1.cms.OtherRevocationFormat(t) } });\n      return i.tohex();\n    } else\n      throw new Error(\"property crl or ocsp undefined\");\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.RevocationInfoChoice, a.asn1.ASN1Object);\na.asn1.cms.OtherRevocationFormat = function(e) {\n  a.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);\n  var t = Error, r = a, i = r.asn1, s = i.ASN1Util.newObject, n = r.lang.String.isHex;\n  this.params = null, this.tohex = function() {\n    var h = this.params;\n    if (h.ocsp == null)\n      throw new t(\"property ocsp not specified\");\n    if (!n(h.ocsp) || !V.isASN1HEX(h.ocsp))\n      throw new t(\"ocsp value not ASN.1 hex string\");\n    var u = s({ seq: [{ oid: \"1.3.6.1.5.5.7.16.2\" }, { asn1: { tlv: h.ocsp } }] });\n    return u.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cms.OtherRevocationFormat, a.asn1.ASN1Object);\na.asn1.cms.CMSUtil = new function() {\n}();\na.asn1.cms.CMSUtil.newSignedData = function(e) {\n  return new a.asn1.cms.SignedData(e);\n};\na.asn1.cms.CMSUtil.verifySignedData = function(e) {\n  var t = a, r = t.asn1, i = r.cms;\n  i.SignerInfo, i.SignedData, i.SigningTime, i.SigningCertificate, i.SigningCertificateV2;\n  var s = r.cades;\n  s.SignaturePolicyIdentifier;\n  var n = t.lang.String.isHex, h = V, u = h.getVbyList, p = h.getTLVbyList, c = h.getIdxbyList, y = h.getChildIdx, v = h.getTLV, o = h.oidname, l = t.crypto.Util.hashHex;\n  e.cms === void 0 && n(e.cms);\n  var f = e.cms, d = function(w, x) {\n    for (var F, P = 3; P < 6; P++)\n      if (F = c(w, 0, [1, 0, P]), F !== void 0) {\n        var T = w.substr(F, 2);\n        T === \"a0\" && (x.certsIdx = F), T === \"a1\" && (x.revinfosIdx = F), T === \"31\" && (x.signerinfosIdx = F);\n      }\n  }, g = function(w, x) {\n    var F = x.signerinfosIdx;\n    if (F !== void 0) {\n      var P = y(w, F);\n      x.signerInfoIdxList = P;\n      for (var T = 0; T < P.length; T++) {\n        var H = P[T], C = { idx: H };\n        S(w, C), x.signerInfos.push(C);\n      }\n    }\n  }, S = function(w, x) {\n    var F = x.idx;\n    x.signerid_issuer1 = p(w, F, [1, 0], \"30\"), x.signerid_serial1 = u(w, F, [1, 1], \"02\"), x.hashalg = o(u(w, F, [2, 0], \"06\"));\n    var P = c(w, F, [3], \"a0\");\n    x.idxSignedAttrs = P, b(w, x, P);\n    var T = y(w, F), H = T.length;\n    if (H < 6)\n      throw \"malformed SignerInfo\";\n    x.sigalg = o(u(w, F, [H - 2, 0], \"06\")), x.sigval = u(w, F, [H - 1], \"04\");\n  }, b = function(w, x, F) {\n    var P = y(w, F);\n    x.signedAttrIdxList = P;\n    for (var T = 0; T < P.length; T++) {\n      var H = P[T], C = u(w, H, [0], \"06\"), B;\n      C === \"2a864886f70d010905\" ? (B = W(u(w, H, [1, 0])), x.saSigningTime = B) : C === \"2a864886f70d010904\" && (B = u(w, H, [1, 0], \"04\"), x.saMessageDigest = B);\n    }\n  }, D = function(w, x) {\n    if (u(w, 0, [0], \"06\") !== \"2a864886f70d010702\")\n      return x;\n    x.cmsType = \"signedData\", x.econtent = u(w, 0, [1, 0, 2, 1, 0]), d(w, x), x.signerInfos = [], g(w, x);\n  }, A = function(w, x) {\n    for (var F = x.parse.signerInfos, P = F.length, T = !0, H = 0; H < P; H++) {\n      var C = F[H];\n      m(w, x, C), C.isValid || (T = !1);\n    }\n    x.isValid = T;\n  }, I = function(w, x, F, P) {\n    var T = x.parse.certsIdx, H;\n    if (x.certs === void 0) {\n      H = [], x.certkeys = [];\n      for (var C = y(w, T), B = 0; B < C.length; B++) {\n        var O = v(w, C[B]), j = new L();\n        j.readCertHex(O), H[B] = j, x.certkeys[B] = j.getPublicKey();\n      }\n      x.certs = H;\n    } else\n      H = x.certs;\n    x.cccc = H.length, x.cccci = C.length;\n    for (var B = 0; B < H.length; B++) {\n      var fe = j.getIssuerHex(), Z = j.getSerialNumberHex();\n      F.signerid_issuer1 === fe && F.signerid_serial1 === Z && (F.certkey_idx = B);\n    }\n  }, m = function(w, x, F, P) {\n    F.verifyDetail = {};\n    var T = F.verifyDetail, H = x.parse.econtent, C = F.hashalg, B = F.saMessageDigest;\n    T.validMessageDigest = !1, l(H, C) === B && (T.validMessageDigest = !0), I(w, x, F), T.validSignatureValue = !1;\n    var O = F.sigalg, j = \"31\" + v(w, F.idxSignedAttrs).substr(2);\n    F.signedattrshex = j;\n    var fe = x.certs[F.certkey_idx].getPublicKey(), Z = new a.crypto.Signature({ alg: O });\n    Z.init(fe), Z.updateHex(j);\n    var X = Z.verify(F.sigval);\n    T.validSignatureValue_isValid = X, X === !0 && (T.validSignatureValue = !0), F.isValid = !1, T.validMessageDigest && T.validSignatureValue && (F.isValid = !0);\n  }, E = { isValid: !1, parse: {} };\n  return D(f, E.parse), A(f, E), E;\n};\na.asn1.cms.CMSParser = function() {\n  var e = Error, t = L, r = new t(), i = V, s = i.getV, n = i.getTLV;\n  i.getIdxbyList;\n  var h = i.getTLVbyList, u = i.getTLVbyListEx, p = i.getVbyList, c = i.getVbyListEx, y = i.getChildIdx;\n  this.getCMSSignedData = function(v) {\n    var o = h(v, 0, [1, 0]), l = this.getSignedData(o);\n    return l;\n  }, this.getSignedData = function(v) {\n    var o = y(v, 0), l = {}, f = s(v, o[0]), d = parseInt(f, 16);\n    l.version = d;\n    var g = n(v, o[1]);\n    l.hashalgs = this.getHashAlgArray(g);\n    var S = n(v, o[2]);\n    l.econtent = this.getEContent(S);\n    var b = u(v, 0, [\"[0]\"]);\n    b != null && (l.certs = this.getCertificateSet(b)), u(v, 0, [\"[1]\"]);\n    var D = u(v, 0, [3]);\n    return l.sinfos = this.getSignerInfos(D), l;\n  }, this.getHashAlgArray = function(v) {\n    for (var o = y(v, 0), l = new t(), f = [], d = 0; d < o.length; d++) {\n      var g = n(v, o[d]), S = l.getAlgorithmIdentifierName(g);\n      f.push(S);\n    }\n    return f;\n  }, this.getEContent = function(v) {\n    var o = {}, l = p(v, 0, [0]), f = p(v, 0, [1, 0]);\n    return o.type = a.asn1.x509.OID.oid2name(V.hextooidstr(l)), o.content = { hex: f }, o;\n  }, this.getSignerInfos = function(v) {\n    for (var o = [], l = y(v, 0), f = 0; f < l.length; f++) {\n      var d = n(v, l[f]), g = this.getSignerInfo(d);\n      o.push(g);\n    }\n    return o;\n  }, this.getSignerInfo = function(v) {\n    var o = {}, l = y(v, 0), f = i.getInt(v, l[0], -1);\n    f != -1 && (o.version = f);\n    var d = n(v, l[1]), g = this.getIssuerAndSerialNumber(d);\n    o.id = g;\n    var S = n(v, l[2]), b = r.getAlgorithmIdentifierName(S);\n    o.hashalg = b;\n    var D = u(v, 0, [\"[0]\"]);\n    if (D != null) {\n      var A = this.getAttributeList(D);\n      o.sattrs = A;\n    }\n    var I = u(v, 0, [3]), m = r.getAlgorithmIdentifierName(I);\n    o.sigalg = m;\n    var E = c(v, 0, [4]);\n    o.sighex = E;\n    var w = u(v, 0, [\"[1]\"]);\n    if (w != null) {\n      var x = this.getAttributeList(w);\n      o.uattrs = x;\n    }\n    return o;\n  }, this.getSignerIdentifier = function(v) {\n    if (v.substr(0, 2) == \"30\")\n      return this.getIssuerAndSerialNumber(v);\n    throw new Error(\"SKID of signerIdentifier not supported\");\n  }, this.getIssuerAndSerialNumber = function(v) {\n    var o = { type: \"isssn\" }, l = y(v, 0), f = n(v, l[0]);\n    o.issuer = r.getX500Name(f);\n    var d = s(v, l[1]);\n    return o.serial = { hex: d }, o;\n  }, this.getAttributeList = function(v) {\n    for (var o = [], l = y(v, 0), f = 0; f < l.length; f++) {\n      var d = n(v, l[f]), g = this.getAttribute(d);\n      o.push(g);\n    }\n    return { array: o };\n  }, this.getAttribute = function(v) {\n    var o = {}, l = y(v, 0), f = i.getOID(v, l[0]), d = a.asn1.x509.OID.oid2name(f);\n    o.attr = d;\n    var g = n(v, l[1]), S = y(g, 0);\n    if (S.length == 1)\n      o.valhex = n(g, S[0]);\n    else {\n      for (var b = [], D = 0; D < S.length; D++)\n        b.push(n(g, S[D]));\n      o.valhex = b;\n    }\n    return d == \"contentType\" ? this.setContentType(o) : d == \"messageDigest\" ? this.setMessageDigest(o) : d == \"signingTime\" ? this.setSigningTime(o) : d == \"signingCertificate\" ? this.setSigningCertificate(o) : d == \"signingCertificateV2\" ? this.setSigningCertificateV2(o) : d == \"signaturePolicyIdentifier\" && this.setSignaturePolicyIdentifier(o), o;\n  }, this.setContentType = function(v) {\n    var o = i.getOIDName(v.valhex, 0, null);\n    o != null && (v.type = o, delete v.valhex);\n  }, this.setSigningTime = function(v) {\n    var o = s(v.valhex, 0), l = W(o);\n    v.str = l, delete v.valhex;\n  }, this.setMessageDigest = function(v) {\n    var o = s(v.valhex, 0);\n    v.hex = o, delete v.valhex;\n  }, this.setSigningCertificate = function(v) {\n    var o = y(v.valhex, 0);\n    if (o.length > 0) {\n      for (var l = n(v.valhex, o[0]), f = y(l, 0), d = [], g = 0; g < f.length; g++) {\n        var S = n(l, f[g]), b = this.getESSCertID(S);\n        d.push(b);\n      }\n      v.array = d;\n    }\n    if (o.length > 1) {\n      var D = n(v.valhex, o[1]);\n      v.polhex = D;\n    }\n    delete v.valhex;\n  }, this.setSignaturePolicyIdentifier = function(v) {\n    var o = y(v.valhex, 0);\n    if (o.length > 0) {\n      var l = i.getOID(v.valhex, o[0]);\n      v.oid = l;\n    }\n    if (o.length > 1) {\n      var f = new t(), d = y(v.valhex, o[1]), g = n(v.valhex, d[0]), S = f.getAlgorithmIdentifierName(g);\n      v.alg = S;\n      var b = s(v.valhex, d[1]);\n      v.hash = b;\n    }\n    delete v.valhex;\n  }, this.setSigningCertificateV2 = function(v) {\n    var o = y(v.valhex, 0);\n    if (o.length > 0) {\n      for (var l = n(v.valhex, o[0]), f = y(l, 0), d = [], g = 0; g < f.length; g++) {\n        var S = n(l, f[g]), b = this.getESSCertIDv2(S);\n        d.push(b);\n      }\n      v.array = d;\n    }\n    if (o.length > 1) {\n      var D = n(v.valhex, o[1]);\n      v.polhex = D;\n    }\n    delete v.valhex;\n  }, this.getESSCertID = function(v) {\n    var o = {}, l = y(v, 0);\n    if (l.length > 0) {\n      var f = s(v, l[0]);\n      o.hash = f;\n    }\n    if (l.length > 1) {\n      var d = n(v, l[1]), g = this.getIssuerSerial(d);\n      g.serial != null && (o.serial = g.serial), g.issuer != null && (o.issuer = g.issuer);\n    }\n    return o;\n  }, this.getESSCertIDv2 = function(v) {\n    var o = {}, l = y(v, 0);\n    if (l.length < 1 || 3 < l.length)\n      throw new e(\"wrong number of elements\");\n    var f = 0;\n    if (v.substr(l[0], 2) == \"30\") {\n      var d = n(v, l[0]);\n      o.alg = r.getAlgorithmIdentifierName(d), f++;\n    } else\n      o.alg = \"sha256\";\n    var g = s(v, l[f]);\n    if (o.hash = g, l.length > f + 1) {\n      var S = n(v, l[f + 1]), b = this.getIssuerSerial(S);\n      o.issuer = b.issuer, o.serial = b.serial;\n    }\n    return o;\n  }, this.getIssuerSerial = function(v) {\n    var o = {}, l = y(v, 0), f = n(v, l[0]), d = r.getGeneralNames(f), g = d[0].dn;\n    o.issuer = g;\n    var S = s(v, l[1]);\n    return o.serial = { hex: S }, o;\n  }, this.getCertificateSet = function(v) {\n    for (var o = y(v, 0), l = [], f = 0; f < o.length; f++) {\n      var d = n(v, o[f]);\n      if (d.substr(0, 2) == \"30\") {\n        var g = de(d, \"CERTIFICATE\");\n        l.push(g);\n      }\n    }\n    return { array: l, sortflag: !1 };\n  };\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.tsp > \"u\" || !a.asn1.tsp) && (a.asn1.tsp = {});\na.asn1.tsp.TimeStampToken = function(e) {\n  var t = a, r = t.asn1, i = r.tsp;\n  i.TimeStampToken.superclass.constructor.call(this), this.params = null, this.getEncodedHexPrepare = function() {\n    var s = new i.TSTInfo(this.params.econtent.content);\n    this.params.econtent.content.hex = s.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.TimeStampToken, a.asn1.cms.SignedData);\na.asn1.tsp.TSTInfo = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERInteger, n = r.DERBoolean, h = r.DERGeneralizedTime, u = r.DERObjectIdentifier, p = r.DERTaggedObject, c = r.tsp, y = c.MessageImprint, v = c.Accuracy;\n  r.x509.X500Name;\n  var o = r.x509.GeneralName;\n  if (c.TSTInfo.superclass.constructor.call(this), this.dVersion = new s({ int: 1 }), this.dPolicy = null, this.dMessageImprint = null, this.dSerial = null, this.dGenTime = null, this.dAccuracy = null, this.dOrdering = null, this.dNonce = null, this.dTsa = null, this.tohex = function() {\n    var l = [this.dVersion];\n    if (this.dPolicy == null)\n      throw new Error(\"policy shall be specified.\");\n    if (l.push(this.dPolicy), this.dMessageImprint == null)\n      throw new Error(\"messageImprint shall be specified.\");\n    if (l.push(this.dMessageImprint), this.dSerial == null)\n      throw new Error(\"serialNumber shall be specified.\");\n    if (l.push(this.dSerial), this.dGenTime == null)\n      throw new Error(\"genTime shall be specified.\");\n    l.push(this.dGenTime), this.dAccuracy != null && l.push(this.dAccuracy), this.dOrdering != null && l.push(this.dOrdering), this.dNonce != null && l.push(this.dNonce), this.dTsa != null && l.push(this.dTsa);\n    var f = new i({ array: l });\n    return this.hTLV = f.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0) {\n    if (typeof e.policy == \"string\") {\n      if (!e.policy.match(/^[0-9.]+$/))\n        throw \"policy shall be oid like 0.1.4.134\";\n      this.dPolicy = new u({ oid: e.policy });\n    }\n    e.messageImprint !== void 0 && (this.dMessageImprint = new y(e.messageImprint)), e.serial !== void 0 && (this.dSerial = new s(e.serial)), e.genTime !== void 0 && (this.dGenTime = new h(e.genTime)), e.accuracy !== void 0 && (this.dAccuracy = new v(e.accuracy)), e.ordering !== void 0 && e.ordering == !0 && (this.dOrdering = new n()), e.nonce !== void 0 && (this.dNonce = new s(e.nonce)), e.tsa !== void 0 && (this.dTsa = new p({ tag: \"a0\", explicit: !0, obj: new o({ dn: e.tsa }) }));\n  }\n};\nN(a.asn1.tsp.TSTInfo, a.asn1.ASN1Object);\na.asn1.tsp.Accuracy = function(e) {\n  var t = a, r = t.asn1, i = r.ASN1Util.newObject;\n  r.tsp.Accuracy.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var s = this.params, n = [];\n    return s.seconds != null && typeof s.seconds == \"number\" && n.push({ int: s.seconds }), s.millis != null && typeof s.millis == \"number\" && n.push({ tag: { tagi: \"80\", obj: { int: s.millis } } }), s.micros != null && typeof s.micros == \"number\" && n.push({ tag: { tagi: \"81\", obj: { int: s.micros } } }), i({ seq: n }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.Accuracy, a.asn1.ASN1Object);\na.asn1.tsp.MessageImprint = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DEROctetString, n = r.x509, h = n.AlgorithmIdentifier;\n  r.tsp.MessageImprint.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params, p = new h({ name: u.alg }), c = new s({ hex: u.hash }), y = new i({ array: [p, c] });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.tsp.MessageImprint, a.asn1.ASN1Object);\na.asn1.tsp.TimeStampReq = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERInteger, n = r.DERBoolean;\n  r.ASN1Object;\n  var h = r.DERObjectIdentifier, u = r.tsp, p = u.MessageImprint;\n  u.TimeStampReq.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var c = this.params, y = [];\n    y.push(new s({ int: 1 })), c.messageImprint instanceof a.asn1.ASN1Object ? y.push(c.messageImprint) : y.push(new p(c.messageImprint)), c.policy != null && y.push(new h(c.policy)), c.nonce != null && y.push(new s(c.nonce)), c.certreq == !0 && y.push(new n());\n    var v = new i({ array: y });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.TimeStampReq, a.asn1.ASN1Object);\na.asn1.tsp.TimeStampResp = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence;\n  r.ASN1Object;\n  var s = r.tsp, n = s.PKIStatusInfo;\n  s.TimeStampResp.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var h = this.params, u = [];\n    if (h.econtent != null || h.tst != null)\n      if (h.statusinfo != null ? u.push(new n(h.statusinfo)) : u.push(new n(\"granted\")), h.econtent != null)\n        u.push(new s.TimeStampToken(h).getContentInfo());\n      else if (h.tst instanceof r.ASN1Object)\n        u.push(h.tst);\n      else\n        throw new Error(\"improper member tst value\");\n    else if (h.statusinfo != null)\n      u.push(new n(h.statusinfo));\n    else\n      throw new Error(\"parameter for token nor statusinfo not specified\");\n    var p = new i({ array: u });\n    return p.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.TimeStampResp, a.asn1.ASN1Object);\na.asn1.tsp.PKIStatusInfo = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.tsp, h = n.PKIStatus, u = n.PKIFreeText, p = n.PKIFailureInfo;\n  n.PKIStatusInfo.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var c = this.params, y = [];\n    if (typeof c == \"string\")\n      y.push(new h(c));\n    else {\n      if (c.status == null)\n        throw new t(\"property 'status' unspecified\");\n      y.push(new h(c.status)), c.statusstr != null && y.push(new u(c.statusstr)), c.failinfo != null && y.push(new p(c.failinfo));\n    }\n    var v = new s({ array: y });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.PKIStatusInfo, a.asn1.ASN1Object);\na.asn1.tsp.PKIStatus = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERInteger, n = i.tsp;\n  n.PKIStatus.superclass.constructor.call(this);\n  var h = { granted: 0, grantedWithMods: 1, rejection: 2, waiting: 3, revocationWarning: 4, revocationNotification: 5 };\n  this.params = null, this.tohex = function() {\n    var u = this.params, p;\n    if (typeof u == \"string\")\n      try {\n        p = h[u];\n      } catch {\n        throw new t(\"undefined name: \" + u);\n      }\n    else if (typeof u == \"number\")\n      p = u;\n    else\n      throw new t(\"unsupported params\");\n    return new s({ int: p }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.PKIStatus, a.asn1.ASN1Object);\na.asn1.tsp.PKIFreeText = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.DERUTF8String, h = i.tsp;\n  h.PKIFreeText.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params;\n    if (!u instanceof Array)\n      throw new t(\"wrong params: not array\");\n    for (var p = [], c = 0; c < u.length; c++)\n      p.push(new n({ str: u[c] }));\n    var y = new s({ array: p });\n    return y.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.PKIFreeText, a.asn1.ASN1Object);\na.asn1.tsp.PKIFailureInfo = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERBitString, n = i.tsp, h = n.PKIFailureInfo, u = { badAlg: 0, badRequest: 2, badDataFormat: 5, timeNotAvailable: 14, unacceptedPolicy: 15, unacceptedExtension: 16, addInfoNotAvailable: 17, systemFailure: 25 };\n  h.superclass.constructor.call(this), this.params = null, this.getBinValue = function() {\n    var p = this.params, c = 0;\n    if (typeof p == \"number\" && 0 <= p && p <= 25) {\n      c |= 1 << p;\n      for (var y = c.toString(2), v = \"\", o = y.length - 1; o >= 0; o--)\n        v += y[o];\n      return v;\n    } else {\n      if (typeof p == \"string\" && u[p] != null)\n        return rt([p], u);\n      if (typeof p == \"object\" && p.length != null)\n        return rt(p, u);\n      throw new t(\"wrong params\");\n    }\n  }, this.tohex = function() {\n    this.params;\n    var p = this.getBinValue();\n    return new s({ bin: p }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.tsp.PKIFailureInfo, a.asn1.ASN1Object);\na.asn1.tsp.AbstractTSAAdapter = function(e) {\n  this.getTSTHex = function(t, r) {\n    throw \"not implemented yet\";\n  };\n};\na.asn1.tsp.SimpleTSAAdapter = function(e) {\n  var t = a, r = t.asn1, i = r.tsp, s = t.crypto.Util.hashHex;\n  i.SimpleTSAAdapter.superclass.constructor.call(this), this.params = null, this.serial = 0, this.getTSTHex = function(n, h) {\n    var u = s(n, h);\n    this.params.econtent.content.messageImprint = { alg: h, hash: u }, this.params.econtent.content.serial = { int: this.serial++ };\n    var p = Math.floor(Math.random() * 1e9);\n    this.params.econtent.content.nonce = { int: p };\n    var c = new i.TimeStampToken(this.params);\n    return c.getContentInfoEncodedHex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.tsp.SimpleTSAAdapter, a.asn1.tsp.AbstractTSAAdapter);\na.asn1.tsp.FixedTSAAdapter = function(e) {\n  var t = a, r = t.asn1, i = r.tsp, s = t.crypto.Util.hashHex;\n  i.FixedTSAAdapter.superclass.constructor.call(this), this.params = null, this.getTSTHex = function(n, h) {\n    var u = s(n, h);\n    this.params.econtent.content.messageImprint = { alg: h, hash: u };\n    var p = new i.TimeStampToken(this.params);\n    return p.getContentInfoEncodedHex();\n  }, e !== void 0 && (this.params = e);\n};\nN(a.asn1.tsp.FixedTSAAdapter, a.asn1.tsp.AbstractTSAAdapter);\na.asn1.tsp.TSPUtil = new function() {\n}();\na.asn1.tsp.TSPUtil.newTimeStampToken = function(e) {\n  return new a.asn1.tsp.TimeStampToken(e);\n};\na.asn1.tsp.TSPUtil.parseTimeStampReq = function(e) {\n  var t = new a.asn1.tsp.TSPParser();\n  return t.getTimeStampReq(e);\n};\na.asn1.tsp.TSPUtil.parseMessageImprint = function(e) {\n  var t = new a.asn1.tsp.TSPParser();\n  return t.getMessageImprint(e);\n};\na.asn1.tsp.TSPParser = function() {\n  var e = L, t = new e(), r = V, i = r.getV, s = r.getTLV, n = r.getIdxbyList;\n  r.getTLVbyListEx;\n  var h = r.getChildIdx, u = [\"granted\", \"grantedWithMods\", \"rejection\", \"waiting\", \"revocationWarning\", \"revocationNotification\"], p = { 0: \"badAlg\", 2: \"badRequest\", 5: \"badDataFormat\", 14: \"timeNotAvailable\", 15: \"unacceptedPolicy\", 16: \"unacceptedExtension\", 17: \"addInfoNotAvailable\", 25: \"systemFailure\" };\n  this.getResponse = function(c) {\n    var y = h(c, 0);\n    if (y.length == 1)\n      return this.getPKIStatusInfo(s(c, y[0]));\n    if (y.length > 1) {\n      var v = this.getPKIStatusInfo(s(c, y[0])), o = s(c, y[1]), l = this.getToken(o);\n      return l.statusinfo = v, l;\n    }\n  }, this.getToken = function(c) {\n    var y = new a.asn1.cms.CMSParser(), v = y.getCMSSignedData(c);\n    return this.setTSTInfo(v), v;\n  }, this.setTSTInfo = function(c) {\n    var y = c.econtent;\n    if (y.type == \"tstinfo\") {\n      var v = y.content.hex, o = this.getTSTInfo(v);\n      y.content = o;\n    }\n  }, this.getTSTInfo = function(c) {\n    var y = {}, v = h(c, 0), o = i(c, v[1]);\n    y.policy = ft(o);\n    var l = s(c, v[2]);\n    y.messageImprint = this.getMessageImprint(l);\n    var f = i(c, v[3]);\n    y.serial = { hex: f };\n    var d = i(c, v[4]);\n    y.genTime = { str: W(d) };\n    var g = 0;\n    if (v.length > 5 && c.substr(v[5], 2) == \"30\") {\n      var S = s(c, v[5]);\n      y.accuracy = this.getAccuracy(S), g++;\n    }\n    if (v.length > 5 + g && c.substr(v[5 + g], 2) == \"01\") {\n      var b = i(c, v[5 + g]);\n      b == \"ff\" && (y.ordering = !0), g++;\n    }\n    if (v.length > 5 + g && c.substr(v[5 + g], 2) == \"02\") {\n      var D = i(c, v[5 + g]);\n      y.nonce = { hex: D }, g++;\n    }\n    if (v.length > 5 + g && c.substr(v[5 + g], 2) == \"a0\") {\n      var A = s(c, v[5 + g]);\n      A = \"30\" + A.substr(2), pGeneralNames = t.getGeneralNames(A);\n      var I = pGeneralNames[0].dn;\n      y.tsa = I, g++;\n    }\n    if (v.length > 5 + g && c.substr(v[5 + g], 2) == \"a1\") {\n      var m = s(c, v[5 + g]);\n      m = \"30\" + m.substr(2);\n      var E = t.getExtParamArray(m);\n      y.ext = E, g++;\n    }\n    return y;\n  }, this.getAccuracy = function(c) {\n    for (var y = {}, v = h(c, 0), o = 0; o < v.length; o++) {\n      var l = c.substr(v[o], 2), f = i(c, v[o]), d = parseInt(f, 16);\n      l == \"02\" ? y.seconds = d : l == \"80\" ? y.millis = d : l == \"81\" && (y.micros = d);\n    }\n    return y;\n  }, this.getMessageImprint = function(c) {\n    if (c.substr(0, 2) != \"30\")\n      throw new Error(\"head of messageImprint hex shall be x30\");\n    var y = {};\n    h(c, 0);\n    var v = n(c, 0, [0, 0]), o = i(c, v), l = r.hextooidstr(o), f = a.asn1.x509.OID.oid2name(l);\n    if (f == \"\")\n      throw new Error(\"hashAlg name undefined: \" + l);\n    var d = f, g = n(c, 0, [1]);\n    return y.alg = d, y.hash = i(c, g), y;\n  }, this.getPKIStatusInfo = function(c) {\n    var y = {}, v = h(c, 0), o = 0;\n    try {\n      var l = i(c, v[0]), f = parseInt(l, 16);\n      y.status = u[f];\n    } catch {\n    }\n    if (v.length > 1 && c.substr(v[1], 2) == \"30\") {\n      var d = s(c, v[1]);\n      y.statusstr = this.getPKIFreeText(d), o++;\n    }\n    if (v.length > o && c.substr(v[1 + o], 2) == \"03\") {\n      var g = s(c, v[1 + o]);\n      y.failinfo = this.getPKIFailureInfo(g);\n    }\n    return y;\n  }, this.getPKIFreeText = function(c) {\n    for (var y = [], v = h(c, 0), o = 0; o < v.length; o++)\n      y.push(r.getString(c, v[o]));\n    return y;\n  }, this.getPKIFailureInfo = function(c) {\n    var y = r.getInt(c, 0);\n    return p[y] != null ? p[y] : y;\n  }, this.getTimeStampReq = function(c) {\n    var y = {};\n    y.certreq = !1;\n    var v = h(c, 0);\n    if (v.length < 2)\n      throw new Error(\"TimeStampReq must have at least 2 items\");\n    var o = s(c, v[1]);\n    y.messageImprint = a.asn1.tsp.TSPUtil.parseMessageImprint(o);\n    for (var l = 2; l < v.length; l++) {\n      var f = v[l], d = c.substr(f, 2);\n      if (d == \"06\") {\n        var g = i(c, f);\n        y.policy = r.hextooidstr(g);\n      }\n      d == \"02\" && (y.nonce = i(c, f)), d == \"01\" && (y.certreq = !0);\n    }\n    return y;\n  };\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.cades > \"u\" || !a.asn1.cades) && (a.asn1.cades = {});\na.asn1.cades.SignaturePolicyIdentifier = function(e) {\n  var t = a, r = t.asn1, i = r.cades, s = i.SignaturePolicyId;\n  i.SignaturePolicyIdentifier.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.15\", this.params = null, this.getValueArray = function() {\n    return [new s(this.params)];\n  }, this.setByParam = function(n) {\n    this.params = n;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.SignaturePolicyIdentifier, a.asn1.cms.Attribute);\na.asn1.cades.SignaturePolicyId = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.DERObjectIdentifier, n = r.x509;\n  n.AlgorithmIdentifier;\n  var h = r.cades, u = h.SignaturePolicyId, p = h.OtherHashAlgAndValue;\n  u.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var c = this.params, y = [];\n    y.push(new s(c.oid)), y.push(new p(c));\n    var v = new i({ array: y });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(c) {\n    this.params = c;\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.SignaturePolicyId, a.asn1.ASN1Object);\na.asn1.cades.OtherHashAlgAndValue = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.DEROctetString, h = i.x509, u = h.AlgorithmIdentifier, p = i.cades, c = p.OtherHashAlgAndValue;\n  c.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var y = this.params;\n    if (y.alg == null)\n      throw new t(\"property 'alg' not specified\");\n    if (y.hash == null && y.cert == null)\n      throw new t(\"property 'hash' nor 'cert' not specified\");\n    var v = null;\n    if (y.hash != null)\n      v = y.hash;\n    else if (y.cert != null) {\n      if (typeof y.cert != \"string\")\n        throw new t(\"cert not string\");\n      var o = y.cert;\n      y.cert.indexOf(\"-----BEGIN\") != -1 && (o = ie(y.cert)), v = a.crypto.Util.hashHex(o, y.alg);\n    }\n    var l = [];\n    l.push(new u({ name: y.alg })), l.push(new n({ hex: v }));\n    var f = new s({ array: l });\n    return f.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.OtherHashAlgAndValue, a.asn1.ASN1Object);\na.asn1.cades.OtherHashValue = function(e) {\n  a.asn1.cades.OtherHashValue.superclass.constructor.call(this);\n  var t = Error, r = a;\n  r.lang.String.isHex;\n  var i = r.asn1, s = i.DEROctetString;\n  r.crypto.Util.hashHex, this.params = null, this.tohex = function() {\n    var n = this.params;\n    if (n.hash == null && n.cert == null)\n      throw new t(\"hash or cert not specified\");\n    var h = null;\n    if (n.hash != null)\n      h = n.hash;\n    else if (n.cert != null) {\n      if (typeof n.cert != \"string\")\n        throw new t(\"cert not string\");\n      var u = n.cert;\n      n.cert.indexOf(\"-----BEGIN\") != -1 && (u = ie(n.cert)), h = a.crypto.Util.hashHex(u, \"sha1\");\n    }\n    return new s({ hex: h }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.OtherHashValue, a.asn1.ASN1Object);\na.asn1.cades.SignatureTimeStamp = function(e) {\n  var t = Error, r = a, i = r.lang.String.isHex, s = r.asn1, n = s.ASN1Object;\n  s.x509;\n  var h = s.cades;\n  h.SignatureTimeStamp.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.14\", this.params = null, this.getValueArray = function() {\n    var u = this.params;\n    if (u.tst != null)\n      if (i(u.tst)) {\n        var p = new n();\n        return p.hTLV = u.tst, [p];\n      } else {\n        if (u.tst instanceof n)\n          return [u.tst];\n        throw new t(\"params.tst has wrong value\");\n      }\n    else if (u.res != null) {\n      var c = u.res;\n      if (c instanceof n && (c = c.tohex()), typeof c != \"string\" || !i(c))\n        throw new t(\"params.res has wrong value\");\n      V.getTLVbyList(c, 0, [1]);\n      var p = new n();\n      return p.hTLV = u.tst, [p];\n    }\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.SignatureTimeStamp, a.asn1.cms.Attribute);\na.asn1.cades.CompleteCertificateRefs = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.cades, h = n.OtherCertID, u = r.lang.String.isHex;\n  n.CompleteCertificateRefs.superclass.constructor.call(this), this.typeOid = \"1.2.840.113549.1.9.16.2.21\", this.params = null, this.getValueArray = function() {\n    for (var p = this.params, c = [], y = 0; y < p.array.length; y++) {\n      var v = p.array[y];\n      if (typeof v == \"string\")\n        if (v.indexOf(\"-----BEGIN\") != -1)\n          v = { cert: v };\n        else if (u(v))\n          v = { hash: v };\n        else\n          throw new t(\"unsupported value: \" + v);\n      p.alg != null && v.alg == null && (v.alg = p.alg), p.hasis != null && v.hasis == null && (v.hasis = p.hasis);\n      var o = new h(v);\n      c.push(o);\n    }\n    var l = new s({ array: c });\n    return [l];\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.CompleteCertificateRefs, a.asn1.cms.Attribute);\na.asn1.cades.OtherCertID = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.cms, n = s.IssuerSerial, h = r.cades, u = h.OtherHashValue, p = h.OtherHashAlgAndValue;\n  h.OtherCertID.superclass.constructor.call(this), this.params = e, this.tohex = function() {\n    var c = this.params;\n    typeof c == \"string\" && (c.indexOf(\"-----BEGIN\") != -1 ? c = { cert: c } : _isHex(c) && (c = { hash: c }));\n    var y = [], v = null;\n    if (c.alg != null ? v = new p(c) : v = new u(c), y.push(v), c.cert != null && c.hasis == !0 || c.issuer != null && c.serial != null) {\n      var o = new n(c);\n      y.push(o);\n    }\n    var l = new i({ array: y });\n    return l.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.OtherCertID, a.asn1.ASN1Object);\na.asn1.cades.OtherHash = function(e) {\n  var t = a, r = t.asn1;\n  r.cms;\n  var i = r.cades, s = i.OtherHashAlgAndValue, n = i.OtherHashValue;\n  t.crypto.Util.hashHex;\n  var h = t.lang.String.isHex;\n  i.OtherHash.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var u = this.params;\n    typeof u == \"string\" && (u.indexOf(\"-----BEGIN\") != -1 ? u = { cert: u } : h(u) && (u = { hash: u }));\n    var p = null;\n    return u.alg != null ? p = new s(u) : p = new n(u), p.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e != null && this.setByParam(e);\n};\nN(a.asn1.cades.OtherHash, a.asn1.ASN1Object);\na.asn1.cades.CAdESUtil = new function() {\n}();\na.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned = function(e) {\n  var t = new a.asn1.cms.CMSParser(), r = t.getCMSSignedData(e);\n  return r;\n};\na.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned = function(e, t, r) {\n  var i = V, s = i.getChildIdx, n = i.getTLV, h = i.getV, u = a, p = u.asn1, c = p.ASN1Object, y = p.cms, v = y.AttributeList, o = y.SignerInfo, l = {}, f = s(e, t);\n  if (f.length != 6)\n    throw \"not supported items for SignerInfo (!=6)\";\n  var d = f.shift();\n  l.version = n(e, d);\n  var g = f.shift();\n  l.si = n(e, g);\n  var S = f.shift();\n  l.digalg = n(e, S);\n  var b = f.shift();\n  l.sattrs = n(e, b);\n  var D = f.shift();\n  l.sigalg = n(e, D);\n  var A = f.shift();\n  l.sig = n(e, A), l.sigval = h(e, A);\n  var I = null;\n  return l.obj = new o(), I = new c(), I.hTLV = l.version, l.obj.dCMSVersion = I, I = new c(), I.hTLV = l.si, l.obj.dSignerIdentifier = I, I = new c(), I.hTLV = l.digalg, l.obj.dDigestAlgorithm = I, I = new c(), I.hTLV = l.sattrs, l.obj.dSignedAttrs = I, I = new c(), I.hTLV = l.sigalg, l.obj.dSigAlg = I, I = new c(), I.hTLV = l.sig, l.obj.dSig = I, l.obj.dUnsignedAttrs = new v(), l;\n};\n(typeof a.asn1.csr > \"u\" || !a.asn1.csr) && (a.asn1.csr = {});\na.asn1.csr.CertificationRequest = function(e) {\n  var t = a, r = t.asn1, i = r.DERBitString, s = r.DERSequence, n = r.csr;\n  r.x509;\n  var h = n.CertificationRequestInfo;\n  n.CertificationRequest.superclass.constructor.call(this), this.setByParam = function(u) {\n    this.params = u;\n  }, this.sign = function() {\n    var u = new h(this.params).tohex(), p = new a.crypto.Signature({ alg: this.params.sigalg });\n    p.init(this.params.sbjprvkey), p.updateHex(u);\n    var c = p.sign();\n    this.params.sighex = c;\n  }, this.getPEM = function() {\n    return de(this.tohex(), \"CERTIFICATE REQUEST\");\n  }, this.tohex = function() {\n    var u = this.params, p = new a.asn1.csr.CertificationRequestInfo(this.params), c = new a.asn1.x509.AlgorithmIdentifier({ name: u.sigalg });\n    if (u.sighex == null && u.sbjprvkey != null && this.sign(), u.sighex == null)\n      throw new Error(\"sighex or sbjprvkey parameter not defined\");\n    var y = new i({ hex: \"00\" + u.sighex }), v = new s({ array: [p, c, y] });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.csr.CertificationRequest, a.asn1.ASN1Object);\na.asn1.csr.CertificationRequestInfo = function(e) {\n  var t = a, r = t.asn1;\n  r.DERBitString;\n  var i = r.DERSequence, s = r.DERInteger, n = r.DERUTF8String, h = r.DERTaggedObject, u = r.ASN1Util.newObject, p = r.csr, c = r.x509, y = c.X500Name, v = c.Extensions, o = c.SubjectPublicKeyInfo;\n  p.AttributeList, p.CertificationRequestInfo.superclass.constructor.call(this), this.params = null, this.setByParam = function(f) {\n    f != null && (this.params = f);\n  }, this.tohex = function() {\n    var f = this.params, d = [];\n    if (d.push(new s({ int: 0 })), d.push(new y(f.subject)), d.push(new o(k.getKey(f.sbjpubkey))), f.attrs != null) {\n      var g = l(f.attrs), S = u({ tag: { tage: \"a0\", obj: g } });\n      d.push(S);\n    } else if (f.extreq != null) {\n      var b = new v(f.extreq), S = u({ tag: { tage: \"a0\", obj: { seq: [{ oid: \"1.2.840.113549.1.9.14\" }, { set: [b] }] } } });\n      d.push(S);\n    } else\n      d.push(new h({ tag: \"a0\", explicit: !1, obj: new n({ str: \"\" }) }));\n    var D = new i({ array: d });\n    return D.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  };\n  function l(f) {\n    for (var d = Error, g = a.asn1.x509.Extensions, S = [], b = 0; b < f.length; b++) {\n      var D = f[b], A = D.attr;\n      if (A == \"extensionRequest\") {\n        var I = new g(D.ext), m = { seq: [{ oid: \"1.2.840.113549.1.9.14\" }, { set: [I] }] };\n        S.push(m);\n      } else if (A == \"unstructuredName\") {\n        var m = { seq: [{ oid: \"1.2.840.113549.1.9.2\" }, { set: D.names }] };\n        S.push(m);\n      } else if (A == \"challengePassword\") {\n        var m = { seq: [{ oid: \"1.2.840.113549.1.9.7\" }, { set: [{ utf8str: D.password }] }] };\n        S.push(m);\n      } else\n        throw new d(\"unknown CSR attribute\");\n    }\n    return { set: S };\n  }\n  e != null && this.setByParam(e);\n};\nN(a.asn1.csr.CertificationRequestInfo, a.asn1.ASN1Object);\na.asn1.csr.AttributeList = function(e) {\n};\nN(a.asn1.csr.AttributeList, a.asn1.ASN1Object);\na.asn1.csr.CSRUtil = new function() {\n}();\na.asn1.csr.CSRUtil.newCSRPEM = function(e) {\n  var t = a.asn1.csr, r = new t.CertificationRequest(e), i = r.getPEM();\n  return i;\n};\na.asn1.csr.CSRUtil.getParam = function(e, t) {\n  var r = V, i = r.getV, s = r.getIdxbyList, n = r.getTLVbyList, h = r.getTLVbyListEx, u = r.getVbyListEx, p = function(b) {\n    var D = s(b, 0, [0, 3, 0, 0], \"06\");\n    return i(b, D) != \"2a864886f70d01090e\" ? null : n(b, 0, [0, 3, 0, 1, 0], \"30\");\n  }, c = {};\n  if (e.indexOf(\"-----BEGIN CERTIFICATE REQUEST\") == -1)\n    throw new Error(\"argument is not PEM file\");\n  var y = ie(e, \"CERTIFICATE REQUEST\");\n  t && (c.tbs = n(y, 0, [0]));\n  try {\n    var v = h(y, 0, [0, 1]);\n    if (v == \"3000\")\n      c.subject = {};\n    else {\n      var d = new L();\n      c.subject = d.getX500Name(v);\n    }\n  } catch {\n  }\n  var o = h(y, 0, [0, 2]), l = k.getKey(o, null, \"pkcs8pub\");\n  c.sbjpubkey = k.getPEM(l, \"PKCS8PUB\");\n  var f = p(y), d = new L();\n  f != null && (c.extreq = d.getExtParamArray(f));\n  try {\n    var g = h(y, 0, [1], \"30\"), d = new L();\n    c.sigalg = d.getAlgorithmIdentifierName(g);\n  } catch {\n  }\n  try {\n    var S = u(y, 0, [2]);\n    c.sighex = S;\n  } catch {\n  }\n  return c;\n};\na.asn1.csr.CSRUtil.verifySignature = function(e) {\n  try {\n    var t = null;\n    if (typeof e == \"string\" && e.indexOf(\"-----BEGIN CERTIFICATE REQUEST\") != -1 ? t = a.asn1.csr.CSRUtil.getParam(e, !0) : typeof e == \"object\" && e.sbjpubkey != null && e.sigalg != null && e.sighex != null && e.tbs != null && (t = e), t == null)\n      return !1;\n    var r = new a.crypto.Signature({ alg: t.sigalg });\n    return r.init(t.sbjpubkey), r.updateHex(t.tbs), r.verify(t.sighex);\n  } catch (i) {\n    return alert(i), !1;\n  }\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.asn1 > \"u\" || !a.asn1) && (a.asn1 = {});\n(typeof a.asn1.ocsp > \"u\" || !a.asn1.ocsp) && (a.asn1.ocsp = {});\na.asn1.ocsp.DEFAULT_HASH = \"sha1\";\na.asn1.ocsp.OCSPResponse = function(e) {\n  a.asn1.ocsp.OCSPResponse.superclass.constructor.call(this), a.asn1.DEREnumerated;\n  var t = a.asn1.ASN1Util.newObject, r = a.asn1.ocsp.ResponseBytes, i = [\"successful\", \"malformedRequest\", \"internalError\", \"tryLater\", \"_not_used_\", \"sigRequired\", \"unauthorized\"];\n  this.params = null, this._getStatusCode = function() {\n    var s = this.params.resstatus;\n    return typeof s == \"number\" ? s : typeof s != \"string\" ? -1 : i.indexOf(s);\n  }, this.setByParam = function(s) {\n    this.params = s;\n  }, this.tohex = function() {\n    var s = this.params, n = this._getStatusCode();\n    if (n == -1)\n      throw new Error(\"responseStatus not supported: \" + s.resstatus);\n    if (n != 0)\n      return t({ seq: [{ enum: { int: n } }] }).tohex();\n    var h = new r(s);\n    return t({ seq: [{ enum: { int: 0 } }, { tag: { tag: \"a0\", explicit: !0, obj: h } }] }).tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.OCSPResponse, a.asn1.ASN1Object);\na.asn1.ocsp.ResponseBytes = function(e) {\n  a.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);\n  var t = a.asn1, r = t.DERSequence, i = t.DERObjectIdentifier, s = t.DEROctetString, n = t.ocsp.BasicOCSPResponse;\n  this.params = null, this.setByParam = function(h) {\n    this.params = h;\n  }, this.tohex = function() {\n    var h = this.params;\n    if (h.restype != \"ocspBasic\")\n      throw new Error(\"not supported responseType: \" + h.restype);\n    var u = new n(h), p = [];\n    p.push(new i({ name: \"ocspBasic\" })), p.push(new s({ hex: u.tohex() }));\n    var c = new r({ array: p });\n    return c.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.ResponseBytes, a.asn1.ASN1Object);\na.asn1.ocsp.BasicOCSPResponse = function(e) {\n  a.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);\n  var t = Error, r = a.asn1, i = r.ASN1Object, s = r.DERSequence;\n  r.DERGeneralizedTime;\n  var n = r.DERTaggedObject, h = r.DERBitString;\n  r.x509.Extensions;\n  var u = r.x509.AlgorithmIdentifier, p = r.ocsp;\n  p.ResponderID, _SingleResponseList = p.SingleResponseList, _ResponseData = p.ResponseData, this.params = null, this.setByParam = function(c) {\n    this.params = c;\n  }, this.sign = function() {\n    var c = this.params, y = c.tbsresp.tohex(), v = new a.crypto.Signature({ alg: c.sigalg });\n    v.init(c.reskey), v.updateHex(y), c.sighex = v.sign();\n  }, this.tohex = function() {\n    var c = this.params;\n    c.tbsresp == null && (c.tbsresp = new _ResponseData(c)), c.sighex == null && c.reskey != null && this.sign();\n    var y = [];\n    if (y.push(c.tbsresp), y.push(new u({ name: c.sigalg })), y.push(new h({ hex: \"00\" + c.sighex })), c.certs != null && c.certs.length != null) {\n      for (var v = [], o = 0; o < c.certs.length; o++) {\n        var l = c.certs[o], f = null;\n        if (V.isASN1HEX(l))\n          f = l;\n        else if (l.match(/-----BEGIN/))\n          f = ie(l);\n        else\n          throw new t(\"certs[\" + o + \"] not hex or PEM\");\n        v.push(new i({ tlv: f }));\n      }\n      var d = new s({ array: v });\n      y.push(new n({ tag: \"a0\", explicit: !0, obj: d }));\n    }\n    var g = new s({ array: y });\n    return g.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.BasicOCSPResponse, a.asn1.ASN1Object);\na.asn1.ocsp.ResponseData = function(e) {\n  a.asn1.ocsp.ResponseData.superclass.constructor.call(this);\n  var t = a.asn1, r = t.DERSequence, i = t.DERGeneralizedTime, s = t.DERTaggedObject, n = t.x509.Extensions, h = t.ocsp, u = h.ResponderID;\n  _SingleResponseList = h.SingleResponseList, this.params = null, this.tohex = function() {\n    var p = this.params;\n    p.respid != null, p.prodat != null, p.array != null;\n    var c = [];\n    if (c.push(new u(p.respid)), c.push(new i(p.prodat)), c.push(new _SingleResponseList(p.array)), p.ext != null) {\n      var y = new n(p.ext);\n      c.push(new s({ tag: \"a1\", explicit: !0, obj: y }));\n    }\n    var v = new r({ array: c });\n    return v.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(p) {\n    this.params = p;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.ResponseData, a.asn1.ASN1Object);\na.asn1.ocsp.ResponderID = function(e) {\n  a.asn1.ocsp.ResponderID.superclass.constructor.call(this);\n  var t = a, r = t.asn1, i = r.ASN1Util.newObject, s = r.x509.X500Name, n = t.lang.String.isHex, h = Error;\n  this.params = null, this.tohex = function() {\n    var u = this.params;\n    if (u.key != null) {\n      var p = null;\n      if (typeof u.key == \"string\") {\n        if (n(u.key) && (p = u.key), u.key.match(/-----BEGIN CERTIFICATE/)) {\n          var c = new L(u.key), y = c.getExtSubjectKeyIdentifier();\n          y != null && (p = y.kid.hex);\n        }\n      } else if (u.key instanceof L) {\n        var y = u.key.getExtSubjectKeyIdentifier();\n        y != null && (p = y.kid.hex);\n      }\n      if (p == null)\n        throw new h(\"wrong key member value\");\n      var v = i({ tag: { tag: \"a2\", explicit: !0, obj: { octstr: { hex: p } } } });\n      return v.tohex();\n    } else if (u.name != null) {\n      var o = null;\n      if (typeof u.name == \"string\" && u.name.match(/-----BEGIN CERTIFICATE/)) {\n        var c = new L(u.name);\n        o = c.getSubject();\n      } else\n        u.name instanceof L ? o = u.name.getSubject() : typeof u.name == \"object\" && (u.name.array != null || u.name.str != null) && (o = u.name);\n      if (o == null)\n        throw new h(\"wrong name member value\");\n      var v = i({ tag: { tag: \"a1\", explicit: !0, obj: new s(o) } });\n      return v.tohex();\n    }\n    throw new h(\"key or name not specified\");\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(u) {\n    this.params = u;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.ResponderID, a.asn1.ASN1Object);\na.asn1.ocsp.SingleResponseList = function(e) {\n  a.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);\n  var t = a.asn1, r = t.DERSequence, i = t.ocsp.SingleResponse;\n  this.params = null, this.tohex = function() {\n    var s = this.params;\n    if (typeof s != \"object\" || s.length == null)\n      throw new Error(\"params not specified properly\");\n    for (var n = [], h = 0; h < s.length; h++)\n      n.push(new i(s[h]));\n    var u = new r({ array: n });\n    return u.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(s) {\n    this.params = s;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.SingleResponseList, a.asn1.ASN1Object);\na.asn1.ocsp.SingleResponse = function(e) {\n  var t = Error, r = a, i = r.asn1, s = i.DERSequence, n = i.DERGeneralizedTime, h = i.DERTaggedObject, u = i.ocsp, p = u.CertID, c = u.CertStatus, y = i.x509, v = y.Extensions;\n  u.SingleResponse.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var o = this.params, l = [];\n    if (o.certid == null)\n      throw new t(\"certid unspecified\");\n    if (o.status == null)\n      throw new t(\"status unspecified\");\n    if (o.thisupdate == null)\n      throw new t(\"thisupdate unspecified\");\n    if (l.push(new p(o.certid)), l.push(new c(o.status)), l.push(new n(o.thisupdate)), o.nextupdate != null) {\n      var f = new n(o.nextupdate);\n      l.push(new h({ tag: \"a0\", explicit: !0, obj: f }));\n    }\n    if (o.ext != null) {\n      var d = new v(o.ext);\n      l.push(new h({ tag: \"a1\", explicit: !0, obj: d }));\n    }\n    var g = new s({ array: l });\n    return g.tohex();\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(o) {\n    this.params = o;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.SingleResponse, a.asn1.ASN1Object);\na.asn1.ocsp.CertID = function(e) {\n  var t = a, r = t.asn1, i = r.DEROctetString, s = r.DERInteger, n = r.DERSequence, h = r.x509, u = h.AlgorithmIdentifier, p = r.ocsp;\n  p.DEFAULT_HASH;\n  var c = t.crypto, y = c.Util.hashHex, v = L, o = V, l = o.getVbyList;\n  p.CertID.superclass.constructor.call(this), this.DEFAULT_HASH = \"sha1\", this.params = null, this.setByValue = function(f, d, g, S) {\n    S == null && (S = this.DEFAULT_HASH), this.params = { alg: S, issname: f, isskey: d, sbjsn: g };\n  }, this.setByCert = function(f, d, g) {\n    g == null && (g = this.DEFAULT_HASH), this.params = { alg: g, issuerCert: f, subjectCert: d };\n  }, this.getParamByCerts = function(f, d, g) {\n    g == null && (g = this.DEFAULT_HASH);\n    var S = new v(f), b = new v(d), D = y(S.getSubjectHex(), g), A = S.getPublicKeyHex(), I = y(l(A, 0, [1], \"03\", !0), g), m = b.getSerialNumberHex(), E = { alg: g, issname: D, isskey: I, sbjsn: m };\n    return E;\n  }, this.tohex = function() {\n    if (typeof this.params != \"object\")\n      throw new Error(\"params not set\");\n    var f = this.params, d, g, S, b;\n    if (f.alg == null ? b = this.DEFAULT_HASH : b = f.alg, f.issuerCert != null && f.subjectCert != null) {\n      var D = this.getParamByCerts(f.issuerCert, f.subjectCert, b);\n      d = D.issname, g = D.isskey, S = D.sbjsn;\n    } else if (f.issname != null && f.isskey != null && f.sbjsn != null)\n      d = f.issname, g = f.isskey, S = f.sbjsn;\n    else\n      throw new Error(\"required param members not defined\");\n    var A = new u({ name: b }), I = new i({ hex: d }), m = new i({ hex: g }), E = new s({ hex: S }), w = new n({ array: [A, I, m, E] });\n    return this.hTLV = w.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.CertID, a.asn1.ASN1Object);\na.asn1.ocsp.CertStatus = function(e) {\n  a.asn1.ocsp.CertStatus.superclass.constructor.call(this), this.params = null, this.tohex = function() {\n    var t = this.params;\n    if (t.status == \"good\")\n      return \"8000\";\n    if (t.status == \"unknown\")\n      return \"8200\";\n    if (t.status == \"revoked\") {\n      var r = [{ gentime: { str: t.time } }];\n      t.reason != null && r.push({ tag: { tag: \"a0\", explicit: !0, obj: { enum: { int: t.reason } } } });\n      var i = { tag: \"a1\", explicit: !1, obj: { seq: r } };\n      return a.asn1.ASN1Util.newObject({ tag: i }).tohex();\n    }\n    throw new Error(\"bad status\");\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, this.setByParam = function(t) {\n    this.params = t;\n  }, e !== void 0 && this.setByParam(e);\n};\nN(a.asn1.ocsp.CertStatus, a.asn1.ASN1Object);\na.asn1.ocsp.Request = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.ocsp;\n  if (s.Request.superclass.constructor.call(this), this.dReqCert = null, this.dExt = null, this.tohex = function() {\n    var h = [];\n    if (this.dReqCert === null)\n      throw \"reqCert not set\";\n    h.push(this.dReqCert);\n    var u = new i({ array: h });\n    return this.hTLV = u.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, typeof e < \"u\") {\n    var n = new s.CertID(e);\n    this.dReqCert = n;\n  }\n};\nN(a.asn1.ocsp.Request, a.asn1.ASN1Object);\na.asn1.ocsp.TBSRequest = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.ocsp;\n  s.TBSRequest.superclass.constructor.call(this), this.version = 0, this.dRequestorName = null, this.dRequestList = [], this.dRequestExt = null, this.setRequestListByParam = function(n) {\n    for (var h = [], u = 0; u < n.length; u++) {\n      var p = new s.Request(n[0]);\n      h.push(p);\n    }\n    this.dRequestList = h;\n  }, this.tohex = function() {\n    var n = [];\n    if (this.version !== 0)\n      throw \"not supported version: \" + this.version;\n    if (this.dRequestorName !== null)\n      throw \"requestorName not supported\";\n    var h = new i({ array: this.dRequestList });\n    if (n.push(h), this.dRequestExt !== null)\n      throw \"requestExtensions not supported\";\n    var u = new i({ array: n });\n    return this.hTLV = u.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && e.reqList !== void 0 && this.setRequestListByParam(e.reqList);\n};\nN(a.asn1.ocsp.TBSRequest, a.asn1.ASN1Object);\na.asn1.ocsp.OCSPRequest = function(e) {\n  var t = a, r = t.asn1, i = r.DERSequence, s = r.ocsp;\n  if (s.OCSPRequest.superclass.constructor.call(this), this.dTbsRequest = null, this.dOptionalSignature = null, this.tohex = function() {\n    var h = [];\n    if (this.dTbsRequest !== null)\n      h.push(this.dTbsRequest);\n    else\n      throw \"tbsRequest not set\";\n    if (this.dOptionalSignature !== null)\n      throw \"optionalSignature not supported\";\n    var u = new i({ array: h });\n    return this.hTLV = u.tohex(), this.hTLV;\n  }, this.getEncodedHex = function() {\n    return this.tohex();\n  }, e !== void 0 && e.reqList !== void 0) {\n    var n = new s.TBSRequest(e);\n    this.dTbsRequest = n;\n  }\n};\nN(a.asn1.ocsp.OCSPRequest, a.asn1.ASN1Object);\na.asn1.ocsp.OCSPUtil = {};\na.asn1.ocsp.OCSPUtil.getRequestHex = function(e, t, r) {\n  var i = a, s = i.asn1, n = s.ocsp;\n  r === void 0 && (r = n.DEFAULT_HASH);\n  var h = { alg: r, issuerCert: e, subjectCert: t }, u = new n.OCSPRequest({ reqList: [h] });\n  return u.tohex();\n};\na.asn1.ocsp.OCSPUtil.getOCSPResponseInfo = function(e) {\n  var t = V, r = t.getVbyList, i = t.getVbyListEx, s = t.getIdxbyList;\n  t.getIdxbyListEx;\n  var n = t.getV, h = {};\n  try {\n    var u = i(e, 0, [0], \"0a\");\n    h.responseStatus = parseInt(u, 16);\n  } catch {\n  }\n  if (h.responseStatus !== 0)\n    return h;\n  try {\n    var p = s(e, 0, [1, 0, 1, 0, 0, 2, 0, 1]);\n    e.substr(p, 2) === \"80\" ? h.certStatus = \"good\" : e.substr(p, 2) === \"a1\" ? (h.certStatus = \"revoked\", h.revocationTime = W(r(e, p, [0]))) : e.substr(p, 2) === \"82\" && (h.certStatus = \"unknown\");\n  } catch {\n  }\n  try {\n    var c = s(e, 0, [1, 0, 1, 0, 0, 2, 0, 2]);\n    h.thisUpdate = W(n(e, c));\n  } catch {\n  }\n  try {\n    var y = s(e, 0, [1, 0, 1, 0, 0, 2, 0, 3]);\n    e.substr(y, 2) === \"a0\" && (h.nextUpdate = W(r(e, y, [0])));\n  } catch {\n  }\n  return h;\n};\na.asn1.ocsp.OCSPParser = function() {\n  var e = Error, t = L, r = new t(), i = V, s = i.getV, n = i.getTLV, h = i.getIdxbyList, u = i.getVbyList, p = i.getTLVbyList, c = i.getVbyListEx, y = i.getTLVbyListEx, v = i.getChildIdx;\n  this.getOCSPRequest = function(o) {\n    var l = v(o, 0);\n    if (l.length != 1 && l.length != 2)\n      throw new e(\"wrong number elements: \" + l.length);\n    var f = this.getTBSRequest(n(o, l[0]));\n    return f;\n  }, this.getTBSRequest = function(o) {\n    var l = {}, f = y(o, 0, [0], \"30\");\n    l.array = this.getRequestList(f);\n    var d = y(o, 0, [\"[2]\", 0], \"30\");\n    return d != null && (l.ext = r.getExtParamArray(d)), l;\n  }, this.getRequestList = function(o) {\n    for (var l = [], f = v(o, 0), d = 0; d < f.length; d++) {\n      var o = n(o, f[d]);\n      l.push(this.getRequest(o));\n    }\n    return l;\n  }, this.getRequest = function(o) {\n    var l = v(o, 0);\n    if (l.length != 1 && l.length != 2)\n      throw new e(\"wrong number elements: \" + l.length);\n    var f = this.getCertID(n(o, l[0]));\n    if (l.length == 2) {\n      var d = h(o, 0, [1, 0]);\n      f.ext = r.getExtParamArray(n(o, d));\n    }\n    return f;\n  }, this.getCertID = function(o) {\n    var l = v(o, 0);\n    if (l.length != 4)\n      throw new e(\"wrong number elements: \" + l.length);\n    var f = new t(), d = {};\n    return d.alg = f.getAlgorithmIdentifierName(n(o, l[0])), d.issname = s(o, l[1]), d.isskey = s(o, l[2]), d.sbjsn = s(o, l[3]), d;\n  }, this.getOCSPResponse = function(o) {\n    var l = v(o, 0), f, d = s(o, l[0]), g = parseInt(d);\n    if (l.length == 1)\n      return { resstatus: g };\n    var S = p(o, 0, [1, 0]);\n    return f = this.getResponseBytes(S), f.resstatus = g, f;\n  }, this.getResponseBytes = function(o) {\n    var l = v(o, 0), f, d = p(o, 0, [1, 0]);\n    f = this.getBasicOCSPResponse(d);\n    var g = s(o, l[0]);\n    return f.restype = a.asn1.x509.OID.oid2name(ft(g)), f;\n  }, this.getBasicOCSPResponse = function(o) {\n    var l = v(o, 0), f;\n    f = this.getResponseData(n(o, l[0]));\n    var d = new L();\n    f.alg = d.getAlgorithmIdentifierName(n(o, l[1]));\n    var g = s(o, l[2]);\n    f.sighex = g.substr(2);\n    var S = c(o, 0, [\"[0]\"]);\n    if (S != null) {\n      for (var b = v(S, 0), D = [], A = 0; A < b.length; A++) {\n        var I = n(S, b[A]);\n        D.push(I);\n      }\n      f.certs = D;\n    }\n    return f;\n  }, this.getResponseData = function(o) {\n    var l = v(o, 0), f = l.length, d = {}, g = 0;\n    o.substr(l[0], 2) == \"a0\" && g++, d.respid = this.getResponderID(n(o, l[g++]));\n    var S = s(o, l[g++]);\n    if (d.prodat = W(S), d.array = this.getSingleResponseList(n(o, l[g++])), o.substr(l[f - 1], 2) == \"a1\") {\n      var b = p(o, l[f - 1], [0]), D = new L();\n      d.ext = D.getExtParamArray(b);\n    }\n    return d;\n  }, this.getResponderID = function(o) {\n    var l = {};\n    if (o.substr(0, 2) == \"a2\") {\n      var f = u(o, 0, [0]);\n      l.key = f;\n    }\n    if (o.substr(0, 2) == \"a1\") {\n      var d = p(o, 0, [0]), g = new L();\n      l.name = g.getX500Name(d);\n    }\n    return l;\n  }, this.getSingleResponseList = function(o) {\n    for (var l = v(o, 0), f = [], d = 0; d < l.length; d++) {\n      var g = this.getSingleResponse(n(o, l[d]));\n      f.push(g);\n    }\n    return f;\n  }, this.getSingleResponse = function(o) {\n    var l = v(o, 0), f = {}, d = this.getCertID(n(o, l[0]));\n    f.certid = d;\n    var g = this.getCertStatus(n(o, l[1]));\n    if (f.status = g, o.substr(l[2], 2) == \"18\") {\n      var S = s(o, l[2]);\n      f.thisupdate = W(S);\n    }\n    for (var b = 3; b < l.length; b++) {\n      if (o.substr(l[b], 2) == \"a0\") {\n        var D = u(o, l[b], [0], \"18\");\n        f.nextupdate = W(D);\n      }\n      if (o.substr(l[b], 2) == \"a1\") {\n        var A = new L(), I = p(o, 0, [b, 0]);\n        f.ext = A.getExtParamArray(I);\n      }\n    }\n    return f;\n  }, this.getCertStatus = function(o) {\n    var l = {};\n    if (o == \"8000\")\n      return { status: \"good\" };\n    if (o == \"8200\")\n      return { status: \"unknown\" };\n    if (o.substr(0, 2) == \"a1\") {\n      l.status = \"revoked\";\n      var f = u(o, 0, [0]), d = W(f);\n      l.time = d;\n    }\n    return l;\n  };\n};\nvar a;\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.lang > \"u\" || !a.lang) && (a.lang = {});\na.lang.String = function() {\n};\nfunction hn(e) {\n  for (var t = new Array(), r = 0; r < e.length; r++)\n    t[r] = e.charCodeAt(r);\n  return t;\n}\nfunction ot(e) {\n  for (var t = \"\", r = 0; r < e.length; r++) {\n    var i = e[r].toString(16);\n    i.length == 1 && (i = \"0\" + i), t = t + i;\n  }\n  return t;\n}\nfunction Ee(e) {\n  return ot(hn(e));\n}\nfunction Xe(e) {\n  return e = e.replace(/\\=/g, \"\"), e = e.replace(/\\+/g, \"-\"), e = e.replace(/\\//g, \"_\"), e;\n}\nfunction ut(e) {\n  return e.length % 4 == 2 ? e = e + \"==\" : e.length % 4 == 3 && (e = e + \"=\"), e = e.replace(/-/g, \"+\"), e = e.replace(/_/g, \"/\"), e;\n}\nfunction ae(e) {\n  return e.length % 2 == 1 && (e = \"0\" + e), Xe(_e(e));\n}\nfunction Y(e) {\n  return it(ut(e));\n}\nvar Je, we;\ntypeof Buffer == \"function\" ? (Je = function(e) {\n  return Xe(Buffer.from(e, \"utf8\").toString(\"base64\"));\n}, we = function(e) {\n  return Buffer.from(ut(e), \"base64\").toString(\"utf8\");\n}) : (Je = function(e) {\n  return ae(It(Bt(e)));\n}, we = function(e) {\n  return decodeURIComponent(Ct(Y(e)));\n});\nfunction ht(e) {\n  return It(Bt(e)).toLowerCase();\n}\nfunction W(e) {\n  try {\n    return decodeURIComponent(Ct(e));\n  } catch {\n    return null;\n  }\n}\nfunction fn(e) {\n  return W(cn(e));\n}\nfunction cn(e) {\n  for (var t = e.match(/.{1,2}/g), r = [], i = 0; i < t.length; i++) {\n    var s = parseInt(t[i], 16);\n    161 <= s && s <= 191 ? (r.push(\"c2\"), r.push(t[i])) : 192 <= s && s <= 255 ? (r.push(\"c3\"), r.push((s - 64).toString(16))) : r.push(t[i]);\n  }\n  return r.join(\"\");\n}\nfunction Ae(e) {\n  for (var t = \"\", r = 0; r < e.length - 1; r += 2)\n    t += String.fromCharCode(parseInt(e.substr(r, 2), 16));\n  return t;\n}\nfunction Pe(e) {\n  for (var t = \"\", r = 0; r < e.length; r++)\n    t += (\"0\" + e.charCodeAt(r).toString(16)).slice(-2);\n  return t;\n}\nfunction ln(e) {\n  return _e(e);\n}\nfunction dn(e, t) {\n  return e = e.replace(new RegExp(\"(.{\" + t + \"})\", \"g\"), `$1\\r\n`), e = e.replace(/\\s+$/, \"\"), e;\n}\nfunction pn(e) {\n  var t = e.replace(/[^0-9A-Za-z\\/+=]*/g, \"\"), r = it(t);\n  return r;\n}\nfunction de(e, t) {\n  return \"-----BEGIN \" + t + `-----\\r\n` + dn(ln(e), 64) + `\\r\n-----END ` + t + `-----\\r\n`;\n}\nfunction ie(e, t) {\n  if (e.indexOf(\"-----BEGIN \") == -1)\n    throw new Error(\"can't find PEM header\");\n  return t !== void 0 ? (e = e.replace(new RegExp(\"^[^]*-----BEGIN \" + t + \"-----\"), \"\"), e = e.replace(new RegExp(\"-----END \" + t + \"-----[^]*$\"), \"\")) : (e = e.replace(/^[^]*-----BEGIN [^-]+-----/, \"\"), e = e.replace(/-----END [^-]+-----[^]*$/, \"\")), pn(e);\n}\nfunction vn(e) {\n  var t, r, i, s, n, h, u, p, c, y;\n  if (e = yn(e), y = e.match(/^(\\d{4})(\\d\\d)(\\d\\d)(\\d\\d)(\\d\\d)(\\d\\d)(|\\.\\d+)Z$/), y)\n    return t = parseInt(y[1]), r = parseInt(y[2]) - 1, i = parseInt(y[3]), s = parseInt(y[4]), n = parseInt(y[5]), h = parseInt(y[6]), u = 0, p = y[7], p !== \"\" && (c = (p.substr(1) + \"00\").substr(0, 3), u = parseInt(c)), Date.UTC(t, r, i, s, n, h, u);\n  throw new Error(\"unsupported zulu format: \" + e);\n}\nfunction gn(e) {\n  return Math.round(vn(e) / 1e3);\n}\nfunction yn(e) {\n  return e.match(/^[0-9]{12}Z$/) || e.match(/^[0-9]{12}[.][0-9]*Z$/) ? e.match(/^[0-4]/) ? \"20\" + e : \"19\" + e : e;\n}\nfunction It(e) {\n  return e.replace(/%/g, \"\");\n}\nfunction Ct(e) {\n  return e.replace(/(..)/g, \"%$1\");\n}\nfunction vt(e) {\n  var t = \"malformed IPv6 address\";\n  if (!e.match(/^[0-9A-Fa-f:]+$/))\n    throw t;\n  e = e.toLowerCase();\n  var r = e.split(\":\").length - 1;\n  if (r < 2)\n    throw t;\n  var i = \":\".repeat(7 - r + 2);\n  e = e.replace(\"::\", i);\n  var s = e.split(\":\");\n  if (s.length != 8)\n    throw t;\n  for (var n = 0; n < 8; n++)\n    s[n] = (\"0000\" + s[n]).slice(-4);\n  return s.join(\"\");\n}\nfunction gt(e) {\n  if (!e.match(/^[0-9A-Fa-f]{32}$/))\n    throw new Error(\"malformed IPv6 address: \" + e);\n  e = e.toLowerCase();\n  var t = e.match(/.{1,4}/g);\n  t = t.map(function(s) {\n    return s.replace(/^0+/, \"\");\n  }), t = t.map(function(s) {\n    return s == \"\" ? \"0\" : s;\n  }), e = \":\" + t.join(\":\") + \":\";\n  var r = e.match(/:(0:){2,}/g);\n  if (r == null)\n    return e.slice(1, -1);\n  var i = r.sort().slice(-1)[0];\n  return e = e.replace(i.substr(0, i.length - 1), \":\"), e.substr(0, 2) != \"::\" && (e = e.substr(1)), e.substr(-2, 2) != \"::\" && (e = e.substr(0, e.length - 1)), e;\n}\nfunction tt(e) {\n  var t = new Error(\"malformed hex value\");\n  if (!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))\n    throw t;\n  if (e.length == 8) {\n    var r;\n    try {\n      return r = parseInt(e.substr(0, 2), 16) + \".\" + parseInt(e.substr(2, 2), 16) + \".\" + parseInt(e.substr(4, 2), 16) + \".\" + parseInt(e.substr(6, 2), 16), r;\n    } catch {\n      throw t;\n    }\n  } else if (e.length == 16)\n    try {\n      return tt(e.substr(0, 8)) + \"/\" + yt(e.substr(8));\n    } catch {\n      throw t;\n    }\n  else {\n    if (e.length == 32)\n      return gt(e);\n    if (e.length == 64) {\n      try {\n        return gt(e.substr(0, 32)) + \"/\" + yt(e.substr(32));\n      } catch {\n        throw t;\n      }\n      return;\n    } else\n      return e;\n  }\n}\nfunction yt(e) {\n  var t = new Error(\"malformed mask\"), r;\n  try {\n    r = new R(e, 16).toString(2);\n  } catch {\n    throw t;\n  }\n  if (!r.match(/^1*0*$/))\n    throw t;\n  return r.replace(/0+$/, \"\").length;\n}\nfunction Rt(e) {\n  var t = new Error(\"malformed IP address\");\n  if (e = e.toLowerCase(e), !e.match(/^[0-9a-f.:/]+$/))\n    throw t;\n  if (e.match(/^[0-9.]+$/)) {\n    var r = e.split(\".\");\n    if (r.length !== 4)\n      throw t;\n    var i = \"\";\n    try {\n      for (var s = 0; s < 4; s++) {\n        var n = parseInt(r[s]);\n        i += (\"0\" + n.toString(16)).slice(-2);\n      }\n      return i;\n    } catch {\n      throw t;\n    }\n  } else if (e.match(/^[0-9.]+\\/[0-9]+$/)) {\n    var h = e.split(\"/\");\n    return Rt(h[0]) + mt(parseInt(h[1]), 32);\n  } else {\n    if (e.match(/^[0-9a-f:]+$/) && e.indexOf(\":\") !== -1)\n      return vt(e);\n    if (e.match(/^[0-9a-f:]+\\/[0-9]+$/) && e.indexOf(\":\") !== -1) {\n      var h = e.split(\"/\");\n      return vt(h[0]) + mt(parseInt(h[1]), 128);\n    } else\n      throw t;\n  }\n}\nfunction mt(e, t) {\n  if (t == 32 && e == 0)\n    return \"00000000\";\n  if (t == 128 && e == 0)\n    return \"00000000000000000000000000000000\";\n  var r = Array(e + 1).join(\"1\") + Array(t - e + 1).join(\"0\");\n  return new R(r, 2).toString(16);\n}\nfunction Tt(e) {\n  function t(s) {\n    var n = parseInt(s.substr(0, 2), 16), h = parseInt(s.substr(2), 16);\n    if (n == 0 & h < 128)\n      return String.fromCharCode(h);\n    if (n < 8) {\n      var u = 192 | (n & 7) << 3 | (h & 192) >> 6, p = 128 | h & 63;\n      return W(u.toString(16) + p.toString(16));\n    }\n    var u = 224 | (n & 240) >> 4, p = 128 | (n & 15) << 2 | (h & 192) >> 6, c = 128 | h & 63;\n    return W(u.toString(16) + p.toString(16) + c.toString(16));\n  }\n  var r = e.match(/.{4}/g), i = r.map(t);\n  return i.join(\"\");\n}\nfunction Bt(e) {\n  for (var t = encodeURIComponent(e), r = \"\", i = 0; i < t.length; i++)\n    t[i] == \"%\" ? (r = r + t.substr(i, 3), i = i + 2) : r = r + \"%\" + Ee(t[i]);\n  return r;\n}\na.lang.String.isInteger = function(e) {\n  return e.match(/^[0-9]+$/) ? !0 : !!e.match(/^-[0-9]+$/);\n};\na.lang.String.isHex = function(e) {\n  return Nt(e);\n};\nfunction Nt(e) {\n  return !!(e.length % 2 == 0 && (e.match(/^[0-9a-f]+$/) || e.match(/^[0-9A-F]+$/)));\n}\na.lang.String.isBase64 = function(e) {\n  return e = e.replace(/\\s+/g, \"\"), !!(e.match(/^[0-9A-Za-z+\\/]+={0,3}$/) && e.length % 4 == 0);\n};\na.lang.String.isBase64URL = function(e) {\n  return e.match(/[+/=]/) ? !1 : (e = ut(e), a.lang.String.isBase64(e));\n};\nfunction Ht(e) {\n  return !!e.match(/^[0-9A-Za-z-_.]+$/);\n}\na.lang.String.isIntegerArray = function(e) {\n  return e = e.replace(/\\s+/g, \"\"), !!e.match(/^\\[[0-9,]+\\]$/);\n};\na.lang.String.isPrintable = function(e) {\n  return e.match(/^[0-9A-Za-z '()+,-./:=?]*$/) !== null;\n};\na.lang.String.isIA5 = function(e) {\n  return e.match(/^[\\x20-\\x21\\x23-\\x7f]*$/) !== null;\n};\na.lang.String.isMail = function(e) {\n  return e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\\.[A-Za-z0-9]{1,}$/) !== null;\n};\nfunction xt(e) {\n  return e.length % 2 == 1 ? \"0\" + e : e.substr(0, 1) > \"7\" ? \"00\" + e : e;\n}\nfunction mn(e) {\n  var t = function(u) {\n    var p = u.toString(16);\n    return p.length == 1 && (p = \"0\" + p), p;\n  }, r = function(u) {\n    var p = \"\", c = parseInt(u, 10), y = c.toString(2), v = 7 - y.length % 7;\n    v == 7 && (v = 0);\n    for (var o = \"\", l = 0; l < v; l++)\n      o += \"0\";\n    y = o + y;\n    for (var l = 0; l < y.length - 1; l += 7) {\n      var f = y.substr(l, 7);\n      l != y.length - 7 && (f = \"1\" + f), p += t(parseInt(f, 2));\n    }\n    return p;\n  };\n  try {\n    if (!e.match(/^[0-9.]+$/))\n      return null;\n    var i = \"\", s = e.split(\".\"), n = parseInt(s[0], 10) * 40 + parseInt(s[1], 10);\n    i += t(n), s.splice(0, 2);\n    for (var h = 0; h < s.length; h++)\n      i += r(s[h]);\n    return i;\n  } catch {\n    return null;\n  }\n}\nfunction ft(e) {\n  if (!Nt(e))\n    return null;\n  try {\n    var t = [], r = e.substr(0, 2), i = parseInt(r, 16);\n    t[0] = new String(Math.floor(i / 40)), t[1] = new String(i % 40);\n    for (var s = e.substr(2), n = [], h = 0; h < s.length / 2; h++)\n      n.push(parseInt(s.substr(h * 2, 2), 16));\n    for (var u = [], p = \"\", h = 0; h < n.length; h++)\n      n[h] & 128 ? p = p + St((n[h] & 127).toString(2), 7) : (p = p + St((n[h] & 127).toString(2), 7), u.push(new String(parseInt(p, 2))), p = \"\");\n    var c = t.join(\".\");\n    return u.length > 0 && (c = c + \".\" + u.join(\".\")), c;\n  } catch {\n    return null;\n  }\n}\nfunction xn(e) {\n  var t = new R(String(e), 10);\n  return Ze(t);\n}\nfunction Ze(e) {\n  var t = e.toString(16);\n  if (t.substr(0, 1) != \"-\")\n    return t.length % 2 == 1 ? t = \"0\" + t : t.match(/^[0-7]/) || (t = \"00\" + t), t;\n  var r = t.substr(1), i = r.length;\n  i % 2 == 1 ? i += 1 : t.match(/^[0-7]/) || (i += 2);\n  for (var s = \"\", n = 0; n < i; n++)\n    s += \"f\";\n  var h = new R(s, 16), u = h.xor(e).add(R.ONE);\n  return t = u.toString(16).replace(/^-/, \"\"), t;\n}\nvar St = function(e, t, r) {\n  return r == null && (r = \"0\"), e.length >= t ? e : new Array(t - e.length + 1).join(r) + e;\n};\nfunction Sn(e) {\n  if (e.length % 2 != 0 || (e = e.toLowerCase(), e.match(/^[0-9a-f]+$/) == null))\n    return -1;\n  try {\n    var t = e.substr(0, 2);\n    if (t == \"00\")\n      return parseInt(e.substr(2), 16);\n    var r = parseInt(t, 16);\n    if (r > 7)\n      return -1;\n    var i = e.substr(2), s = parseInt(i, 16).toString(2);\n    s == \"0\" && (s = \"00000000\"), s = s.slice(0, 0 - r);\n    var n = parseInt(s, 2);\n    return n == NaN ? -1 : n;\n  } catch {\n    return -1;\n  }\n}\nfunction En(e) {\n  if (typeof e != \"string\" || e.length % 2 != 0 || !e.match(/^[0-9a-f]+$/))\n    return null;\n  try {\n    var t = parseInt(e.substr(0, 2), 16);\n    if (t < 0 || 7 < t)\n      return null;\n    for (var r = e.substr(2), i = \"\", s = 0; s < r.length; s += 2) {\n      var n = r.substr(s, 2), h = parseInt(n, 16).toString(2);\n      h = (\"0000000\" + h).slice(-8), i += h;\n    }\n    return i.substr(0, i.length - t);\n  } catch {\n    return null;\n  }\n}\nfunction rt(e, t) {\n  for (var r = 0, i = 0; i < e.length; i++)\n    r |= 1 << t[e[i]];\n  for (var s = r.toString(2), n = \"\", i = s.length - 1; i >= 0; i--)\n    n += s[i];\n  return n;\n}\nfunction J(e, i, r) {\n  if (typeof e == \"object\") {\n    for (var i = String(i).split(\".\"), s = 0; s < i.length && e; s++) {\n      var n = i[s];\n      n.match(/^[0-9]+$/) && (n = parseInt(n)), e = e[n];\n    }\n    return e || e === !1 ? e : r;\n  }\n}\nfunction N(e, t) {\n  var r = function() {\n  };\n  r.prototype = t.prototype, e.prototype = new r(), e.prototype.constructor = e, e.superclass = t.prototype, t.prototype.constructor == Object.prototype.constructor && (t.prototype.constructor = t);\n}\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.crypto > \"u\" || !a.crypto) && (a.crypto = {});\na.crypto.Util = new function() {\n  this.DIGESTINFOHEAD = { sha1: \"3021300906052b0e03021a05000414\", sha224: \"302d300d06096086480165030402040500041c\", sha256: \"3031300d060960864801650304020105000420\", sha384: \"3041300d060960864801650304020205000430\", sha512: \"3051300d060960864801650304020305000440\", md2: \"3020300c06082a864886f70d020205000410\", md5: \"3020300c06082a864886f70d020505000410\", ripemd160: \"3021300906052b2403020105000414\" }, this.DEFAULTPROVIDER = { md5: \"cryptojs\", sha1: \"cryptojs\", sha224: \"cryptojs\", sha256: \"cryptojs\", sha384: \"cryptojs\", sha512: \"cryptojs\", ripemd160: \"cryptojs\", hmacmd5: \"cryptojs\", hmacsha1: \"cryptojs\", hmacsha224: \"cryptojs\", hmacsha256: \"cryptojs\", hmacsha384: \"cryptojs\", hmacsha512: \"cryptojs\", hmacripemd160: \"cryptojs\", MD5withRSA: \"cryptojs/jsrsa\", SHA1withRSA: \"cryptojs/jsrsa\", SHA224withRSA: \"cryptojs/jsrsa\", SHA256withRSA: \"cryptojs/jsrsa\", SHA384withRSA: \"cryptojs/jsrsa\", SHA512withRSA: \"cryptojs/jsrsa\", RIPEMD160withRSA: \"cryptojs/jsrsa\", MD5withECDSA: \"cryptojs/jsrsa\", SHA1withECDSA: \"cryptojs/jsrsa\", SHA224withECDSA: \"cryptojs/jsrsa\", SHA256withECDSA: \"cryptojs/jsrsa\", SHA384withECDSA: \"cryptojs/jsrsa\", SHA512withECDSA: \"cryptojs/jsrsa\", RIPEMD160withECDSA: \"cryptojs/jsrsa\", SHA1withDSA: \"cryptojs/jsrsa\", SHA224withDSA: \"cryptojs/jsrsa\", SHA256withDSA: \"cryptojs/jsrsa\", MD5withRSAandMGF1: \"cryptojs/jsrsa\", SHAwithRSAandMGF1: \"cryptojs/jsrsa\", SHA1withRSAandMGF1: \"cryptojs/jsrsa\", SHA224withRSAandMGF1: \"cryptojs/jsrsa\", SHA256withRSAandMGF1: \"cryptojs/jsrsa\", SHA384withRSAandMGF1: \"cryptojs/jsrsa\", SHA512withRSAandMGF1: \"cryptojs/jsrsa\", RIPEMD160withRSAandMGF1: \"cryptojs/jsrsa\" }, this.CRYPTOJSMESSAGEDIGESTNAME = { md5: K.algo.MD5, sha1: K.algo.SHA1, sha224: K.algo.SHA224, sha256: K.algo.SHA256, sha384: K.algo.SHA384, sha512: K.algo.SHA512, ripemd160: K.algo.RIPEMD160 }, this.getDigestInfoHex = function(e, t) {\n    if (typeof this.DIGESTINFOHEAD[t] > \"u\")\n      throw \"alg not supported in Util.DIGESTINFOHEAD: \" + t;\n    return this.DIGESTINFOHEAD[t] + e;\n  }, this.getPaddedDigestInfoHex = function(e, t, r) {\n    var i = this.getDigestInfoHex(e, t), s = r / 4;\n    if (i.length + 22 > s)\n      throw \"key is too short for SigAlg: keylen=\" + r + \",\" + t;\n    for (var n = \"0001\", h = \"00\" + i, u = \"\", p = s - n.length - h.length, c = 0; c < p; c += 2)\n      u += \"ff\";\n    var y = n + u + h;\n    return y;\n  }, this.hashString = function(e, t) {\n    var r = new a.crypto.MessageDigest({ alg: t });\n    return r.digestString(e);\n  }, this.hashHex = function(e, t) {\n    var r = new a.crypto.MessageDigest({ alg: t });\n    return r.digestHex(e);\n  }, this.sha1 = function(e) {\n    return this.hashString(e, \"sha1\");\n  }, this.sha256 = function(e) {\n    return this.hashString(e, \"sha256\");\n  }, this.sha256Hex = function(e) {\n    return this.hashHex(e, \"sha256\");\n  }, this.sha512 = function(e) {\n    return this.hashString(e, \"sha512\");\n  }, this.sha512Hex = function(e) {\n    return this.hashHex(e, \"sha512\");\n  }, this.isKey = function(e) {\n    return e instanceof q || e instanceof a.crypto.DSA || e instanceof a.crypto.ECDSA;\n  };\n}();\na.crypto.Util.md5 = function(e) {\n  var t = new a.crypto.MessageDigest({ alg: \"md5\", prov: \"cryptojs\" });\n  return t.digestString(e);\n};\na.crypto.Util.ripemd160 = function(e) {\n  var t = new a.crypto.MessageDigest({ alg: \"ripemd160\", prov: \"cryptojs\" });\n  return t.digestString(e);\n};\na.crypto.Util.SECURERANDOMGEN = new Ge();\na.crypto.Util.getRandomHexOfNbytes = function(e) {\n  var t = new Array(e);\n  return a.crypto.Util.SECURERANDOMGEN.nextBytes(t), ot(t);\n};\na.crypto.Util.getRandomBigIntegerOfNbytes = function(e) {\n  return new R(a.crypto.Util.getRandomHexOfNbytes(e), 16);\n};\na.crypto.Util.getRandomHexOfNbits = function(e) {\n  var t = e % 8, r = (e - t) / 8, i = new Array(r + 1);\n  return a.crypto.Util.SECURERANDOMGEN.nextBytes(i), i[0] = (255 << t & 255 ^ 255) & i[0], ot(i);\n};\na.crypto.Util.getRandomBigIntegerOfNbits = function(e) {\n  return new R(a.crypto.Util.getRandomHexOfNbits(e), 16);\n};\na.crypto.Util.getRandomBigIntegerZeroToMax = function(e) {\n  for (var t = e.bitLength(); ; ) {\n    var r = a.crypto.Util.getRandomBigIntegerOfNbits(t);\n    if (e.compareTo(r) != -1)\n      return r;\n  }\n};\na.crypto.Util.getRandomBigIntegerMinToMax = function(e, t) {\n  var r = e.compareTo(t);\n  if (r == 1)\n    throw \"biMin is greater than biMax\";\n  if (r == 0)\n    return e;\n  var i = t.subtract(e), s = a.crypto.Util.getRandomBigIntegerZeroToMax(i);\n  return s.add(e);\n};\na.crypto.MessageDigest = function(e) {\n  this.setAlgAndProvider = function(t, r) {\n    if (t = a.crypto.MessageDigest.getCanonicalAlgName(t), t !== null && r === void 0 && (r = a.crypto.Util.DEFAULTPROVIDER[t]), \":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(t) != -1 && r == \"cryptojs\") {\n      try {\n        this.md = a.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create();\n      } catch (i) {\n        throw \"setAlgAndProvider hash alg set fail alg=\" + t + \"/\" + i;\n      }\n      this.updateString = function(i) {\n        this.md.update(i);\n      }, this.updateHex = function(i) {\n        var s = K.enc.Hex.parse(i);\n        this.md.update(s);\n      }, this.digest = function() {\n        var i = this.md.finalize();\n        return i.toString(K.enc.Hex);\n      }, this.digestString = function(i) {\n        return this.updateString(i), this.digest();\n      }, this.digestHex = function(i) {\n        return this.updateHex(i), this.digest();\n      };\n    }\n    if (\":sha256:\".indexOf(t) != -1 && r == \"sjcl\") {\n      try {\n        this.md = new sjcl.hash.sha256();\n      } catch (i) {\n        throw \"setAlgAndProvider hash alg set fail alg=\" + t + \"/\" + i;\n      }\n      this.updateString = function(i) {\n        this.md.update(i);\n      }, this.updateHex = function(i) {\n        var s = sjcl.codec.hex.toBits(i);\n        this.md.update(s);\n      }, this.digest = function() {\n        var i = this.md.finalize();\n        return sjcl.codec.hex.fromBits(i);\n      }, this.digestString = function(i) {\n        return this.updateString(i), this.digest();\n      }, this.digestHex = function(i) {\n        return this.updateHex(i), this.digest();\n      };\n    }\n  }, this.updateString = function(t) {\n    throw \"updateString(str) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, this.updateHex = function(t) {\n    throw \"updateHex(hex) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, this.digest = function() {\n    throw \"digest() not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, this.digestString = function(t) {\n    throw \"digestString(str) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, this.digestHex = function(t) {\n    throw \"digestHex(hex) not supported for this alg/prov: \" + this.algName + \"/\" + this.provName;\n  }, e !== void 0 && e.alg !== void 0 && (this.algName = e.alg, e.prov === void 0 && (this.provName = a.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName));\n};\na.crypto.MessageDigest.getCanonicalAlgName = function(e) {\n  return typeof e == \"string\" && (e = e.toLowerCase(), e = e.replace(/-/, \"\")), e;\n};\na.crypto.MessageDigest.getHashLength = function(e) {\n  var t = a.crypto.MessageDigest, r = t.getCanonicalAlgName(e);\n  if (t.HASHLENGTH[r] === void 0)\n    throw \"not supported algorithm: \" + e;\n  return t.HASHLENGTH[r];\n};\na.crypto.MessageDigest.HASHLENGTH = { md5: 16, sha1: 20, sha224: 28, sha256: 32, sha384: 48, sha512: 64, ripemd160: 20 };\na.crypto.Mac = function(e) {\n  this.setAlgAndProvider = function(t, r) {\n    if (t = t.toLowerCase(), t == null && (t = \"hmacsha1\"), t = t.toLowerCase(), t.substr(0, 4) != \"hmac\")\n      throw \"setAlgAndProvider unsupported HMAC alg: \" + t;\n    r === void 0 && (r = a.crypto.Util.DEFAULTPROVIDER[t]), this.algProv = t + \"/\" + r;\n    var i = t.substr(4);\n    if (\":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(i) != -1 && r == \"cryptojs\") {\n      try {\n        var s = a.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[i];\n        this.mac = K.algo.HMAC.create(s, this.pass);\n      } catch (n) {\n        throw \"setAlgAndProvider hash alg set fail hashAlg=\" + i + \"/\" + n;\n      }\n      this.updateString = function(n) {\n        this.mac.update(n);\n      }, this.updateHex = function(n) {\n        var h = K.enc.Hex.parse(n);\n        this.mac.update(h);\n      }, this.doFinal = function() {\n        var n = this.mac.finalize();\n        return n.toString(K.enc.Hex);\n      }, this.doFinalString = function(n) {\n        return this.updateString(n), this.doFinal();\n      }, this.doFinalHex = function(n) {\n        return this.updateHex(n), this.doFinal();\n      };\n    }\n  }, this.updateString = function(t) {\n    throw \"updateString(str) not supported for this alg/prov: \" + this.algProv;\n  }, this.updateHex = function(t) {\n    throw \"updateHex(hex) not supported for this alg/prov: \" + this.algProv;\n  }, this.doFinal = function() {\n    throw \"digest() not supported for this alg/prov: \" + this.algProv;\n  }, this.doFinalString = function(t) {\n    throw \"digestString(str) not supported for this alg/prov: \" + this.algProv;\n  }, this.doFinalHex = function(t) {\n    throw \"digestHex(hex) not supported for this alg/prov: \" + this.algProv;\n  }, this.setPassword = function(t) {\n    if (typeof t == \"string\") {\n      var r = t;\n      (t.length % 2 == 1 || !t.match(/^[0-9A-Fa-f]+$/)) && (r = Pe(t)), this.pass = K.enc.Hex.parse(r);\n      return;\n    }\n    if (typeof t != \"object\")\n      throw \"KJUR.crypto.Mac unsupported password type: \" + t;\n    var r = null;\n    if (t.hex !== void 0) {\n      if (t.hex.length % 2 != 0 || !t.hex.match(/^[0-9A-Fa-f]+$/))\n        throw \"Mac: wrong hex password: \" + t.hex;\n      r = t.hex;\n    }\n    if (t.utf8 !== void 0 && (r = ht(t.utf8)), t.rstr !== void 0 && (r = Pe(t.rstr)), t.b64 !== void 0 && (r = it(t.b64)), t.b64u !== void 0 && (r = Y(t.b64u)), r == null)\n      throw \"KJUR.crypto.Mac unsupported password type: \" + t;\n    this.pass = K.enc.Hex.parse(r);\n  }, e !== void 0 && (e.pass !== void 0 && this.setPassword(e.pass), e.alg !== void 0 && (this.algName = e.alg, e.prov === void 0 && (this.provName = a.crypto.Util.DEFAULTPROVIDER[this.algName]), this.setAlgAndProvider(this.algName, this.provName)));\n};\na.crypto.Signature = function(e) {\n  var t = null;\n  if (this._setAlgNames = function() {\n    var r = this.algName.match(/^(.+)with(.+)$/);\n    r && (this.mdAlgName = r[1].toLowerCase(), this.pubkeyAlgName = r[2].toLowerCase(), this.pubkeyAlgName == \"rsaandmgf1\" && this.mdAlgName == \"sha\" && (this.mdAlgName = \"sha1\"));\n  }, this._zeroPaddingOfSignature = function(r, i) {\n    for (var s = \"\", n = i / 4 - r.length, h = 0; h < n; h++)\n      s = s + \"0\";\n    return s + r;\n  }, this.setAlgAndProvider = function(r, i) {\n    if (this._setAlgNames(), i != \"cryptojs/jsrsa\")\n      throw new Error(\"provider not supported: \" + i);\n    if (\":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:\".indexOf(this.mdAlgName) != -1) {\n      try {\n        this.md = new a.crypto.MessageDigest({ alg: this.mdAlgName });\n      } catch (s) {\n        throw new Error(\"setAlgAndProvider hash alg set fail alg=\" + this.mdAlgName + \"/\" + s);\n      }\n      this.init = function(s, n) {\n        var h = null;\n        try {\n          n === void 0 ? h = k.getKey(s) : h = k.getKey(s, n);\n        } catch (u) {\n          throw \"init failed:\" + u;\n        }\n        if (h.isPrivate === !0)\n          this.prvKey = h, this.state = \"SIGN\";\n        else if (h.isPublic === !0)\n          this.pubKey = h, this.state = \"VERIFY\";\n        else\n          throw \"init failed.:\" + h;\n      }, this.updateString = function(s) {\n        this.md.updateString(s);\n      }, this.updateHex = function(s) {\n        this.md.updateHex(s);\n      }, this.sign = function() {\n        if (this.sHashHex = this.md.digest(), this.prvKey === void 0 && this.ecprvhex !== void 0 && this.eccurvename !== void 0 && a.crypto.ECDSA !== void 0 && (this.prvKey = new a.crypto.ECDSA({ curve: this.eccurvename, prv: this.ecprvhex })), this.prvKey instanceof q && this.pubkeyAlgName === \"rsaandmgf1\")\n          this.hSign = this.prvKey.signWithMessageHashPSS(this.sHashHex, this.mdAlgName, this.pssSaltLen);\n        else if (this.prvKey instanceof q && this.pubkeyAlgName === \"rsa\")\n          this.hSign = this.prvKey.signWithMessageHash(this.sHashHex, this.mdAlgName);\n        else if (this.prvKey instanceof a.crypto.ECDSA)\n          this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);\n        else if (this.prvKey instanceof a.crypto.DSA)\n          this.hSign = this.prvKey.signWithMessageHash(this.sHashHex);\n        else\n          throw \"Signature: unsupported private key alg: \" + this.pubkeyAlgName;\n        return this.hSign;\n      }, this.signString = function(s) {\n        return this.updateString(s), this.sign();\n      }, this.signHex = function(s) {\n        return this.updateHex(s), this.sign();\n      }, this.verify = function(s) {\n        if (this.sHashHex = this.md.digest(), this.pubKey === void 0 && this.ecpubhex !== void 0 && this.eccurvename !== void 0 && a.crypto.ECDSA !== void 0 && (this.pubKey = new a.crypto.ECDSA({ curve: this.eccurvename, pub: this.ecpubhex })), this.pubKey instanceof q && this.pubkeyAlgName === \"rsaandmgf1\")\n          return this.pubKey.verifyWithMessageHashPSS(this.sHashHex, s, this.mdAlgName, this.pssSaltLen);\n        if (this.pubKey instanceof q && this.pubkeyAlgName === \"rsa\")\n          return this.pubKey.verifyWithMessageHash(this.sHashHex, s);\n        if (a.crypto.ECDSA !== void 0 && this.pubKey instanceof a.crypto.ECDSA)\n          return this.pubKey.verifyWithMessageHash(this.sHashHex, s);\n        if (a.crypto.DSA !== void 0 && this.pubKey instanceof a.crypto.DSA)\n          return this.pubKey.verifyWithMessageHash(this.sHashHex, s);\n        throw \"Signature: unsupported public key alg: \" + this.pubkeyAlgName;\n      };\n    }\n  }, this.init = function(r, i) {\n    throw \"init(key, pass) not supported for this alg:prov=\" + this.algProvName;\n  }, this.updateString = function(r) {\n    throw \"updateString(str) not supported for this alg:prov=\" + this.algProvName;\n  }, this.updateHex = function(r) {\n    throw \"updateHex(hex) not supported for this alg:prov=\" + this.algProvName;\n  }, this.sign = function() {\n    throw \"sign() not supported for this alg:prov=\" + this.algProvName;\n  }, this.signString = function(r) {\n    throw \"digestString(str) not supported for this alg:prov=\" + this.algProvName;\n  }, this.signHex = function(r) {\n    throw \"digestHex(hex) not supported for this alg:prov=\" + this.algProvName;\n  }, this.verify = function(r) {\n    throw \"verify(hSigVal) not supported for this alg:prov=\" + this.algProvName;\n  }, this.initParams = e, e !== void 0 && (e.alg !== void 0 && (this.algName = e.alg, e.prov === void 0 ? this.provName = a.crypto.Util.DEFAULTPROVIDER[this.algName] : this.provName = e.prov, this.algProvName = this.algName + \":\" + this.provName, this.setAlgAndProvider(this.algName, this.provName), this._setAlgNames()), e.psssaltlen !== void 0 && (this.pssSaltLen = e.psssaltlen), e.prvkeypem !== void 0)) {\n    if (e.prvkeypas !== void 0)\n      throw \"both prvkeypem and prvkeypas parameters not supported\";\n    try {\n      var t = k.getKey(e.prvkeypem);\n      this.init(t);\n    } catch (r) {\n      throw \"fatal error to load pem private key: \" + r;\n    }\n  }\n};\na.crypto.Cipher = function(e) {\n};\na.crypto.Cipher.encrypt = function(e, t, r, i) {\n  if (J(i, \"enclag\") != null && (r = i.encalg), typeof r == \"string\" && r.substr(-4) == \"-CBC\") {\n    var s = t, n = e;\n    J(i, \"key\") != null && (s = i.key), J(i, \"enc\") != null && (hEnc = i.enc);\n    var h = K.enc.Hex.parse(s), u = K.enc.Hex.parse(n), p = K.enc.Hex.parse(i.iv), c;\n    if (r == \"des-EDE3-CBC\")\n      c = K.TripleDES.encrypt(u, h, { iv: p });\n    else if (r == \"aes128-CBC\" || r == \"aes256-CBC\")\n      c = K.AES.encrypt(u, h, { iv: p });\n    else\n      throw new Error(\"unsupported algorithm: \" + r);\n    return c + \"\";\n  } else\n    throw new Error(\"Cipher.encrypt: unsupported key or algorithm\");\n};\na.crypto.Cipher.decrypt = function(e, t, r, i) {\n  if (J(i, \"enclag\") != null && (r = i.encalg), typeof r == \"string\" && r.substr(-4) == \"-CBC\") {\n    var s = t, n = e;\n    J(i, \"key\") != null && (s = i.key), J(i, \"enc\") != null && (n = i.enc);\n    var h = K.enc.Hex.parse(s), u = K.enc.Hex.parse(n), p = K.enc.Hex.parse(i.iv), c;\n    if (r == \"des-EDE3-CBC\")\n      c = K.TripleDES.decrypt({ ciphertext: u }, h, { iv: p });\n    else if (r == \"aes128-CBC\" || r == \"aes256-CBC\")\n      c = K.AES.decrypt({ ciphertext: u }, h, { iv: p });\n    else\n      throw new Error(\"unsupported algorithm: \" + r);\n    return K.enc.Hex.stringify(c);\n  } else\n    throw new Error(\"Cipher.decrypt: unsupported key or algorithm\");\n};\na.crypto.OID = new function() {\n  this.oidhex2name = { \"2a864886f70d010101\": \"rsaEncryption\", \"2a8648ce3d0201\": \"ecPublicKey\", \"2a8648ce380401\": \"dsa\", \"2a8648ce3d030107\": \"secp256r1\", \"2b8104001f\": \"secp192k1\", \"2b81040021\": \"secp224r1\", \"2b8104000a\": \"secp256k1\", \"2b81040022\": \"secp384r1\", \"2b81040023\": \"secp521r1\", \"2a8648ce380403\": \"SHA1withDSA\", \"608648016503040301\": \"SHA224withDSA\", \"608648016503040302\": \"SHA256withDSA\" };\n}();\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.crypto > \"u\" || !a.crypto) && (a.crypto = {});\na.crypto.ECDSA = function(e) {\n  var t = \"secp256r1\", r = Error, i = R, s = z, n = a.crypto.ECDSA, h = a.crypto.ECParameterDB, u = n.getName, p = V, c = p.getVbyListEx, y = p.isASN1HEX, v = new Ge();\n  this.type = \"EC\", this.isPrivate = !1, this.isPublic = !1, this.getBigRandom = function(o) {\n    return new i(o.bitLength(), v).mod(o.subtract(i.ONE)).add(i.ONE);\n  }, this.setNamedCurve = function(o) {\n    this.ecparams = h.getByName(o), this.prvKeyHex = null, this.pubKeyHex = null, this.curveName = o;\n  }, this.setPrivateKeyHex = function(o) {\n    this.isPrivate = !0, this.prvKeyHex = o;\n  }, this.setPublicKeyHex = function(o) {\n    this.isPublic = !0, this.pubKeyHex = o;\n  }, this.getPublicKeyXYHex = function() {\n    var o = this.pubKeyHex;\n    if (o.substr(0, 2) !== \"04\")\n      throw \"this method supports uncompressed format(04) only\";\n    var l = this.ecparams.keycharlen;\n    if (o.length !== 2 + l * 2)\n      throw \"malformed public key hex length\";\n    var f = {};\n    return f.x = o.substr(2, l), f.y = o.substr(2 + l), f;\n  }, this.getShortNISTPCurveName = function() {\n    var o = this.curveName;\n    return o === \"secp256r1\" || o === \"NIST P-256\" || o === \"P-256\" || o === \"prime256v1\" ? \"P-256\" : o === \"secp384r1\" || o === \"NIST P-384\" || o === \"P-384\" ? \"P-384\" : o === \"secp521r1\" || o === \"NIST P-521\" || o === \"P-521\" ? \"P-521\" : null;\n  }, this.generateKeyPairHex = function() {\n    var o = this.ecparams.n, l = this.getBigRandom(o), f = this.ecparams.keycharlen, d = (\"0000000000\" + l.toString(16)).slice(-f);\n    this.setPrivateKeyHex(d);\n    var g = this.generatePublicKeyHex();\n    return { ecprvhex: d, ecpubhex: g };\n  }, this.generatePublicKeyHex = function() {\n    var o = new i(this.prvKeyHex, 16), l = this.ecparams.G.multiply(o), f = l.getX().toBigInteger(), d = l.getY().toBigInteger(), g = this.ecparams.keycharlen, S = (\"0000000000\" + f.toString(16)).slice(-g), b = (\"0000000000\" + d.toString(16)).slice(-g), D = \"04\" + S + b;\n    return this.setPublicKeyHex(D), D;\n  }, this.signWithMessageHash = function(o) {\n    return this.signHex(o, this.prvKeyHex);\n  }, this.signHex = function(o, l) {\n    var f = new i(l, 16), d = this.ecparams.n, g = new i(o.substring(0, this.ecparams.keycharlen), 16);\n    do\n      var S = this.getBigRandom(d), b = this.ecparams.G, D = b.multiply(S), A = D.getX().toBigInteger().mod(d);\n    while (A.compareTo(i.ZERO) <= 0);\n    var I = S.modInverse(d).multiply(g.add(f.multiply(A))).mod(d);\n    return n.biRSSigToASN1Sig(A, I);\n  }, this.sign = function(o, l) {\n    var f = l, d = this.ecparams.n, g = i.fromByteArrayUnsigned(o);\n    do\n      var S = this.getBigRandom(d), b = this.ecparams.G, D = b.multiply(S), A = D.getX().toBigInteger().mod(d);\n    while (A.compareTo(R.ZERO) <= 0);\n    var I = S.modInverse(d).multiply(g.add(f.multiply(A))).mod(d);\n    return this.serializeSig(A, I);\n  }, this.verifyWithMessageHash = function(o, l) {\n    return this.verifyHex(o, l, this.pubKeyHex);\n  }, this.verifyHex = function(o, l, f) {\n    try {\n      var d, g, S = n.parseSigHex(l);\n      d = S.r, g = S.s;\n      var b = s.decodeFromHex(this.ecparams.curve, f), D = new i(o.substring(0, this.ecparams.keycharlen), 16);\n      return this.verifyRaw(D, d, g, b);\n    } catch {\n      return !1;\n    }\n  }, this.verify = function(o, l, f) {\n    var d, g;\n    if (Bitcoin.Util.isArray(l)) {\n      var S = this.parseSig(l);\n      d = S.r, g = S.s;\n    } else if (typeof l == \"object\" && l.r && l.s)\n      d = l.r, g = l.s;\n    else\n      throw \"Invalid value for signature\";\n    var b;\n    if (f instanceof z)\n      b = f;\n    else if (Bitcoin.Util.isArray(f))\n      b = s.decodeFrom(this.ecparams.curve, f);\n    else\n      throw \"Invalid format for pubkey value, must be byte array or ECPointFp\";\n    var D = i.fromByteArrayUnsigned(o);\n    return this.verifyRaw(D, d, g, b);\n  }, this.verifyRaw = function(o, l, f, d) {\n    var g = this.ecparams.n, S = this.ecparams.G;\n    if (l.compareTo(i.ONE) < 0 || l.compareTo(g) >= 0 || f.compareTo(i.ONE) < 0 || f.compareTo(g) >= 0)\n      return !1;\n    var b = f.modInverse(g), D = o.multiply(b).mod(g), A = l.multiply(b).mod(g), I = S.multiply(D).add(d.multiply(A)), m = I.getX().toBigInteger().mod(g);\n    return m.equals(l);\n  }, this.serializeSig = function(o, l) {\n    var f = o.toByteArraySigned(), d = l.toByteArraySigned(), g = [];\n    return g.push(2), g.push(f.length), g = g.concat(f), g.push(2), g.push(d.length), g = g.concat(d), g.unshift(g.length), g.unshift(48), g;\n  }, this.parseSig = function(o) {\n    var l;\n    if (o[0] != 48)\n      throw new Error(\"Signature not a valid DERSequence\");\n    if (l = 2, o[l] != 2)\n      throw new Error(\"First element in signature must be a DERInteger\");\n    var f = o.slice(l + 2, l + 2 + o[l + 1]);\n    if (l += 2 + o[l + 1], o[l] != 2)\n      throw new Error(\"Second element in signature must be a DERInteger\");\n    var d = o.slice(l + 2, l + 2 + o[l + 1]);\n    l += 2 + o[l + 1];\n    var g = i.fromByteArrayUnsigned(f), S = i.fromByteArrayUnsigned(d);\n    return { r: g, s: S };\n  }, this.parseSigCompact = function(o) {\n    if (o.length !== 65)\n      throw \"Signature has the wrong length\";\n    var l = o[0] - 27;\n    if (l < 0 || l > 7)\n      throw \"Invalid signature type\";\n    var f = this.ecparams.n, d = i.fromByteArrayUnsigned(o.slice(1, 33)).mod(f), g = i.fromByteArrayUnsigned(o.slice(33, 65)).mod(f);\n    return { r: d, s: g, i: l };\n  }, this.readPKCS5PrvKeyHex = function(o) {\n    if (y(o) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    var l, f, d;\n    try {\n      l = c(o, 0, [\"[0]\", 0], \"06\"), f = c(o, 0, [1], \"04\");\n      try {\n        d = c(o, 0, [\"[1]\", 0], \"03\");\n      } catch {\n      }\n    } catch {\n      throw new Error(\"malformed PKCS#1/5 plain ECC private key\");\n    }\n    if (this.curveName = u(l), this.curveName === void 0)\n      throw \"unsupported curve name\";\n    this.setNamedCurve(this.curveName), this.setPublicKeyHex(d), this.setPrivateKeyHex(f), this.isPublic = !1;\n  }, this.readPKCS8PrvKeyHex = function(o) {\n    if (y(o) === !1)\n      throw new r(\"not ASN.1 hex string\");\n    var l, f, d, g;\n    try {\n      l = c(o, 0, [1, 0], \"06\"), f = c(o, 0, [1, 1], \"06\"), d = c(o, 0, [2, 0, 1], \"04\");\n      try {\n        g = c(o, 0, [2, 0, \"[1]\", 0], \"03\");\n      } catch {\n      }\n    } catch {\n      throw new r(\"malformed PKCS#8 plain ECC private key\");\n    }\n    if (this.curveName = u(f), this.curveName === void 0)\n      throw new r(\"unsupported curve name\");\n    this.setNamedCurve(this.curveName), this.setPublicKeyHex(g), this.setPrivateKeyHex(d), this.isPublic = !1;\n  }, this.readPKCS8PubKeyHex = function(o) {\n    if (y(o) === !1)\n      throw new r(\"not ASN.1 hex string\");\n    var l, f, d;\n    try {\n      l = c(o, 0, [0, 0], \"06\"), f = c(o, 0, [0, 1], \"06\"), d = c(o, 0, [1], \"03\");\n    } catch {\n      throw new r(\"malformed PKCS#8 ECC public key\");\n    }\n    if (this.curveName = u(f), this.curveName === null)\n      throw new r(\"unsupported curve name\");\n    this.setNamedCurve(this.curveName), this.setPublicKeyHex(d);\n  }, this.readCertPubKeyHex = function(o, l) {\n    if (y(o) === !1)\n      throw new r(\"not ASN.1 hex string\");\n    var f, d;\n    try {\n      f = c(o, 0, [0, 5, 0, 1], \"06\"), d = c(o, 0, [0, 5, 1], \"03\");\n    } catch {\n      throw new r(\"malformed X.509 certificate ECC public key\");\n    }\n    if (this.curveName = u(f), this.curveName === null)\n      throw new r(\"unsupported curve name\");\n    this.setNamedCurve(this.curveName), this.setPublicKeyHex(d);\n  }, e !== void 0 && e.curve !== void 0 && (this.curveName = e.curve), this.curveName === void 0 && (this.curveName = t), this.setNamedCurve(this.curveName), e !== void 0 && (e.prv !== void 0 && this.setPrivateKeyHex(e.prv), e.pub !== void 0 && this.setPublicKeyHex(e.pub));\n};\na.crypto.ECDSA.parseSigHex = function(e) {\n  var t = a.crypto.ECDSA.parseSigHexInHexRS(e), r = new R(t.r, 16), i = new R(t.s, 16);\n  return { r, s: i };\n};\na.crypto.ECDSA.parseSigHexInHexRS = function(e) {\n  var t = V, r = t.getChildIdx, i = t.getV;\n  if (t.checkStrictDER(e, 0), e.substr(0, 2) != \"30\")\n    throw new Error(\"signature is not a ASN.1 sequence\");\n  var s = r(e, 0);\n  if (s.length != 2)\n    throw new Error(\"signature shall have two elements\");\n  var n = s[0], h = s[1];\n  if (e.substr(n, 2) != \"02\")\n    throw new Error(\"1st item not ASN.1 integer\");\n  if (e.substr(h, 2) != \"02\")\n    throw new Error(\"2nd item not ASN.1 integer\");\n  var u = i(e, n), p = i(e, h);\n  return { r: u, s: p };\n};\na.crypto.ECDSA.asn1SigToConcatSig = function(e) {\n  var t = a.crypto.ECDSA.parseSigHexInHexRS(e), r = t.r, i = t.s;\n  if (r.length >= 130 && r.length <= 134) {\n    if (r.length % 2 != 0)\n      throw Error(\"unknown ECDSA sig r length error\");\n    if (i.length % 2 != 0)\n      throw Error(\"unknown ECDSA sig s length error\");\n    r.substr(0, 2) == \"00\" && (r = r.substr(2)), i.substr(0, 2) == \"00\" && (i = i.substr(2));\n    var s = Math.max(r.length, i.length);\n    return r = (\"000000\" + r).slice(-s), i = (\"000000\" + i).slice(-s), r + i;\n  }\n  if (r.substr(0, 2) == \"00\" && r.length % 32 == 2 && (r = r.substr(2)), i.substr(0, 2) == \"00\" && i.length % 32 == 2 && (i = i.substr(2)), r.length % 32 == 30 && (r = \"00\" + r), i.length % 32 == 30 && (i = \"00\" + i), r.length % 32 != 0)\n    throw Error(\"unknown ECDSA sig r length error\");\n  if (i.length % 32 != 0)\n    throw Error(\"unknown ECDSA sig s length error\");\n  return r + i;\n};\na.crypto.ECDSA.concatSigToASN1Sig = function(e) {\n  if (e.length % 4 != 0)\n    throw Error(\"unknown ECDSA concatinated r-s sig length error\");\n  var t = e.substr(0, e.length / 2), r = e.substr(e.length / 2);\n  return a.crypto.ECDSA.hexRSSigToASN1Sig(t, r);\n};\na.crypto.ECDSA.hexRSSigToASN1Sig = function(e, t) {\n  var r = new R(e, 16), i = new R(t, 16);\n  return a.crypto.ECDSA.biRSSigToASN1Sig(r, i);\n};\na.crypto.ECDSA.biRSSigToASN1Sig = function(e, t) {\n  var r = a.asn1, i = new r.DERInteger({ bigint: e }), s = new r.DERInteger({ bigint: t }), n = new r.DERSequence({ array: [i, s] });\n  return n.tohex();\n};\na.crypto.ECDSA.getName = function(e) {\n  return e === \"2b8104001f\" ? \"secp192k1\" : e === \"2a8648ce3d030107\" ? \"secp256r1\" : e === \"2b8104000a\" ? \"secp256k1\" : e === \"2b81040021\" ? \"secp224r1\" : e === \"2b81040022\" ? \"secp384r1\" : e === \"2b81040023\" ? \"secp521r1\" : \"|secp256r1|NIST P-256|P-256|prime256v1|\".indexOf(e) !== -1 ? \"secp256r1\" : \"|secp256k1|\".indexOf(e) !== -1 ? \"secp256k1\" : \"|secp224r1|NIST P-224|P-224|\".indexOf(e) !== -1 ? \"secp224r1\" : \"|secp384r1|NIST P-384|P-384|\".indexOf(e) !== -1 ? \"secp384r1\" : \"|secp521r1|NIST P-521|P-521|\".indexOf(e) !== -1 ? \"secp521r1\" : null;\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.crypto > \"u\" || !a.crypto) && (a.crypto = {});\na.crypto.ECParameterDB = new function() {\n  var e = {}, t = {};\n  function r(i) {\n    return new R(i, 16);\n  }\n  this.getByName = function(i) {\n    var s = i;\n    if (typeof t[s] < \"u\" && (s = t[i]), typeof e[s] < \"u\")\n      return e[s];\n    throw \"unregistered EC curve name: \" + s;\n  }, this.regist = function(i, s, n, h, u, p, c, y, v, o, l, f) {\n    e[i] = {};\n    var d = r(n), g = r(h), S = r(u), b = r(p), D = r(c), A = new Be(d, g, S), I = A.decodePointHex(\"04\" + y + v);\n    e[i].name = i, e[i].keylen = s, e[i].keycharlen = Math.ceil(s / 8) * 2, e[i].curve = A, e[i].G = I, e[i].n = b, e[i].h = D, e[i].oid = l, e[i].info = f;\n    for (var m = 0; m < o.length; m++)\n      t[o[m]] = i;\n  };\n}();\na.crypto.ECParameterDB.regist(\"secp128r1\", 128, \"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF\", \"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC\", \"E87579C11079F43DD824993C2CEE5ED3\", \"FFFFFFFE0000000075A30D1B9038A115\", \"1\", \"161FF7528B899B2D0C28607CA52C5B86\", \"CF5AC8395BAFEB13C02DA292DDED7A83\", [], \"\", \"secp128r1 : SECG curve over a 128 bit prime field\");\na.crypto.ECParameterDB.regist(\"secp160k1\", 160, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73\", \"0\", \"7\", \"0100000000000000000001B8FA16DFAB9ACA16B6B3\", \"1\", \"3B4C382CE37AA192A4019E763036F4F5DD4D7EBB\", \"938CF935318FDCED6BC28286531733C3F03C4FEE\", [], \"\", \"secp160k1 : SECG curve over a 160 bit prime field\");\na.crypto.ECParameterDB.regist(\"secp160r1\", 160, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC\", \"1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45\", \"0100000000000000000001F4C8F927AED3CA752257\", \"1\", \"4A96B5688EF573284664698968C38BB913CBFC82\", \"23A628553168947D59DCC912042351377AC5FB32\", [], \"\", \"secp160r1 : SECG curve over a 160 bit prime field\");\na.crypto.ECParameterDB.regist(\"secp192k1\", 192, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37\", \"0\", \"3\", \"FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D\", \"1\", \"DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D\", \"9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D\", []);\na.crypto.ECParameterDB.regist(\"secp192r1\", 192, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC\", \"64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1\", \"FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831\", \"1\", \"188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012\", \"07192B95FFC8DA78631011ED6B24CDD573F977A11E794811\", []);\na.crypto.ECParameterDB.regist(\"secp224r1\", 224, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE\", \"B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D\", \"1\", \"B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21\", \"BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34\", []);\na.crypto.ECParameterDB.regist(\"secp256k1\", 256, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F\", \"0\", \"7\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141\", \"1\", \"79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798\", \"483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8\", []);\na.crypto.ECParameterDB.regist(\"secp256r1\", 256, \"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF\", \"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC\", \"5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B\", \"FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551\", \"1\", \"6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296\", \"4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5\", [\"NIST P-256\", \"P-256\", \"prime256v1\"]);\na.crypto.ECParameterDB.regist(\"secp384r1\", 384, \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC\", \"B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF\", \"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973\", \"1\", \"AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7\", \"3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f\", [\"NIST P-384\", \"P-384\"]);\na.crypto.ECParameterDB.regist(\"secp521r1\", 521, \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\", \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC\", \"051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00\", \"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409\", \"1\", \"00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66\", \"011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650\", [\"NIST P-521\", \"P-521\"]);\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.crypto > \"u\" || !a.crypto) && (a.crypto = {});\na.crypto.DSA = function() {\n  var e = V;\n  e.getVbyList;\n  var t = e.getVbyListEx, r = e.isASN1HEX, i = R;\n  this.p = null, this.q = null, this.g = null, this.y = null, this.x = null, this.type = \"DSA\", this.isPrivate = !1, this.isPublic = !1, this.setPrivate = function(s, n, h, u, p) {\n    this.isPrivate = !0, this.p = s, this.q = n, this.g = h, this.y = u, this.x = p;\n  }, this.setPrivateHex = function(s, n, h, u, p) {\n    var c, y, v, o, l;\n    c = new R(s, 16), y = new R(n, 16), v = new R(h, 16), typeof u == \"string\" && u.length > 1 ? o = new R(u, 16) : o = null, l = new R(p, 16), this.setPrivate(c, y, v, o, l);\n  }, this.setPublic = function(s, n, h, u) {\n    this.isPublic = !0, this.p = s, this.q = n, this.g = h, this.y = u, this.x = null;\n  }, this.setPublicHex = function(s, n, h, u) {\n    var p, c, y, v;\n    p = new R(s, 16), c = new R(n, 16), y = new R(h, 16), v = new R(u, 16), this.setPublic(p, c, y, v);\n  }, this.signWithMessageHash = function(s) {\n    var n = this.p, h = this.q, u = this.g;\n    this.y;\n    var p = this.x, c = a.crypto.Util.getRandomBigIntegerMinToMax(R.ONE.add(R.ONE), h.subtract(R.ONE)), y = s.substr(0, h.bitLength() / 4), v = new R(y, 16), o = u.modPow(c, n).mod(h), l = c.modInverse(h).multiply(v.add(p.multiply(o))).mod(h), f = a.asn1.ASN1Util.jsonToASN1HEX({ seq: [{ int: { bigint: o } }, { int: { bigint: l } }] });\n    return f;\n  }, this.verifyWithMessageHash = function(s, n) {\n    var h = this.p, u = this.q, p = this.g, c = this.y, y = this.parseASN1Signature(n), v = y[0], o = y[1], l = s.substr(0, u.bitLength() / 4), f = new R(l, 16);\n    if (R.ZERO.compareTo(v) > 0 || v.compareTo(u) > 0 || R.ZERO.compareTo(o) >= 0 || o.compareTo(u) > 0)\n      throw \"invalid DSA signature\";\n    var d = o.modInverse(u), g = f.multiply(d).mod(u), S = v.multiply(d).mod(u), b = p.modPow(g, h).multiply(c.modPow(S, h)).mod(h).mod(u);\n    return b.compareTo(v) == 0;\n  }, this.parseASN1Signature = function(s) {\n    try {\n      var n = new i(t(s, 0, [0], \"02\"), 16), h = new i(t(s, 0, [1], \"02\"), 16);\n      return [n, h];\n    } catch {\n      throw new Error(\"malformed ASN.1 DSA signature\");\n    }\n  }, this.readPKCS5PrvKeyHex = function(s) {\n    var n, h, u, p, c;\n    if (r(s) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    try {\n      n = t(s, 0, [1], \"02\"), h = t(s, 0, [2], \"02\"), u = t(s, 0, [3], \"02\"), p = t(s, 0, [4], \"02\"), c = t(s, 0, [5], \"02\");\n    } catch {\n      throw new Error(\"malformed PKCS#1/5 plain DSA private key\");\n    }\n    this.setPrivateHex(n, h, u, p, c);\n  }, this.readPKCS8PrvKeyHex = function(s) {\n    var n, h, u, p;\n    if (r(s) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    try {\n      n = t(s, 0, [1, 1, 0], \"02\"), h = t(s, 0, [1, 1, 1], \"02\"), u = t(s, 0, [1, 1, 2], \"02\"), p = t(s, 0, [2, 0], \"02\");\n    } catch {\n      throw new Error(\"malformed PKCS#8 plain DSA private key\");\n    }\n    this.setPrivateHex(n, h, u, null, p);\n  }, this.readPKCS8PubKeyHex = function(s) {\n    var n, h, u, p;\n    if (r(s) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    try {\n      n = t(s, 0, [0, 1, 0], \"02\"), h = t(s, 0, [0, 1, 1], \"02\"), u = t(s, 0, [0, 1, 2], \"02\"), p = t(s, 0, [1, 0], \"02\");\n    } catch {\n      throw new Error(\"malformed PKCS#8 DSA public key\");\n    }\n    this.setPublicHex(n, h, u, p);\n  }, this.readCertPubKeyHex = function(s, n) {\n    var h, u, p, c;\n    if (r(s) === !1)\n      throw new Error(\"not ASN.1 hex string\");\n    try {\n      h = t(s, 0, [0, 5, 0, 1, 0], \"02\"), u = t(s, 0, [0, 5, 0, 1, 1], \"02\"), p = t(s, 0, [0, 5, 0, 1, 2], \"02\"), c = t(s, 0, [0, 5, 1, 0], \"02\");\n    } catch {\n      throw new Error(\"malformed X.509 certificate DSA public key\");\n    }\n    this.setPublicHex(h, u, p, c);\n  };\n};\nvar k = /* @__PURE__ */ function() {\n  var e = function(f, d, g) {\n    return i(K.AES, f, d, g);\n  }, t = function(f, d, g) {\n    return i(K.TripleDES, f, d, g);\n  }, r = function(f, d, g) {\n    return i(K.DES, f, d, g);\n  }, i = function(f, d, g, S) {\n    var b = K.enc.Hex.parse(d), D = K.enc.Hex.parse(g), A = K.enc.Hex.parse(S), I = {};\n    I.key = D, I.iv = A, I.ciphertext = b;\n    var m = f.decrypt(I, D, { iv: A });\n    return K.enc.Hex.stringify(m);\n  }, s = function(f, d, g) {\n    return u(K.AES, f, d, g);\n  }, n = function(f, d, g) {\n    return u(K.TripleDES, f, d, g);\n  }, h = function(f, d, g) {\n    return u(K.DES, f, d, g);\n  }, u = function(f, d, g, S) {\n    var b = K.enc.Hex.parse(d), D = K.enc.Hex.parse(g), A = K.enc.Hex.parse(S), I = f.encrypt(b, D, { iv: A }), m = K.enc.Hex.parse(I.toString()), E = K.enc.Base64.stringify(m);\n    return E;\n  }, p = { \"AES-256-CBC\": { proc: e, eproc: s, keylen: 32, ivlen: 16 }, \"AES-192-CBC\": { proc: e, eproc: s, keylen: 24, ivlen: 16 }, \"AES-128-CBC\": { proc: e, eproc: s, keylen: 16, ivlen: 16 }, \"DES-EDE3-CBC\": { proc: t, eproc: n, keylen: 24, ivlen: 8 }, \"DES-CBC\": { proc: r, eproc: h, keylen: 8, ivlen: 8 } }, c = function(f) {\n    var d = K.lib.WordArray.random(f), g = K.enc.Hex.stringify(d);\n    return g;\n  }, y = function(f) {\n    var d = {}, g = f.match(new RegExp(\"DEK-Info: ([^,]+),([0-9A-Fa-f]+)\", \"m\"));\n    g && (d.cipher = g[1], d.ivsalt = g[2]);\n    var S = f.match(new RegExp(\"-----BEGIN ([A-Z]+) PRIVATE KEY-----\"));\n    S && (d.type = S[1]);\n    var b = -1, D = 0;\n    f.indexOf(`\\r\n\\r\n`) != -1 && (b = f.indexOf(`\\r\n\\r\n`), D = 2), f.indexOf(`\n\n`) != -1 && (b = f.indexOf(`\n\n`), D = 1);\n    var A = f.indexOf(\"-----END\");\n    if (b != -1 && A != -1) {\n      var I = f.substring(b + D * 2, A - D);\n      I = I.replace(/\\s+/g, \"\"), d.data = I;\n    }\n    return d;\n  }, v = function(f, d, g) {\n    for (var S = g.substring(0, 16), b = K.enc.Hex.parse(S), D = K.enc.Utf8.parse(d), A = p[f].keylen + p[f].ivlen, I = \"\", m = null; ; ) {\n      var E = K.algo.MD5.create();\n      if (m != null && E.update(m), E.update(D), E.update(b), m = E.finalize(), I = I + K.enc.Hex.stringify(m), I.length >= A * 2)\n        break;\n    }\n    var w = {};\n    return w.keyhex = I.substr(0, p[f].keylen * 2), w.ivhex = I.substr(p[f].keylen * 2, p[f].ivlen * 2), w;\n  }, o = function(f, d, g, S) {\n    var b = K.enc.Base64.parse(f), D = K.enc.Hex.stringify(b), A = p[d].proc, I = A(D, g, S);\n    return I;\n  }, l = function(f, d, g, S) {\n    var b = p[d].eproc, D = b(f, g, S);\n    return D;\n  };\n  return { version: \"1.0.0\", parsePKCS5PEM: function(f) {\n    return y(f);\n  }, getKeyAndUnusedIvByPasscodeAndIvsalt: function(f, d, g) {\n    return v(f, d, g);\n  }, decryptKeyB64: function(f, d, g, S) {\n    return o(f, d, g, S);\n  }, getDecryptedKeyHex: function(f, d) {\n    var g = y(f), S = g.cipher, b = g.ivsalt, D = g.data, A = v(S, d, b), I = A.keyhex, m = o(D, S, I, b);\n    return m;\n  }, getEncryptedPKCS5PEMFromPrvKeyHex: function(f, d, g, S, b) {\n    var x = \"\";\n    if ((typeof S > \"u\" || S == null) && (S = \"AES-256-CBC\"), typeof p[S] > \"u\")\n      throw new Error(\"KEYUTIL unsupported algorithm: \" + S);\n    if (typeof b > \"u\" || b == null) {\n      var D = p[S].ivlen, A = c(D);\n      b = A.toUpperCase();\n    }\n    var I = v(S, g, b), m = I.keyhex, E = l(d, S, m, b), w = E.replace(/(.{64})/g, `$1\\r\n`), x = \"-----BEGIN \" + f + ` PRIVATE KEY-----\\r\n`;\n    return x += `Proc-Type: 4,ENCRYPTED\\r\n`, x += \"DEK-Info: \" + S + \",\" + b + `\\r\n`, x += `\\r\n`, x += w, x += `\\r\n-----END ` + f + ` PRIVATE KEY-----\\r\n`, x;\n  }, getEncryptedPKCS8PEM: function(f, d, g) {\n    var S = this.getEncryptedPKCS8Hex(f, d, g);\n    return de(S, \"ENCRYPTED PRIVATE KEY\");\n  }, getEncryptedPKCS8Hex: function(f, d, g) {\n    var S;\n    g == null || g == null ? S = {} : S = JSON.parse(JSON.stringify(g)), S.plain = f, this.initPBES2Param(S), this.encryptPBES2Param(S, d);\n    var b = this.generatePBES2ASN1Param(S);\n    return a.asn1.ASN1Util.newObject(b).tohex();\n  }, initPBES2Param: function(f) {\n    if (J(f, \"encalg\") == null && (f.encalg = \"aes256-CBC\"), J(f, \"iter\") == null && (f.iter = 2048), J(f, \"prf\") == null && (f.prf = \"hmacWithSHA256\"), J(f, \"salt\") == null && (f.salt = K.enc.Hex.stringify(K.lib.WordArray.random(8))), J(f, \"enciv\") == null) {\n      var d;\n      f.encalg == \"des-EDE3-CBC\" && (d = 8), f.encalg == \"aes128-CBC\" && (d = 16), f.encalg == \"aes256-CBC\" && (d = 16), f.enciv = K.enc.Hex.stringify(K.lib.WordArray.random(d));\n    }\n  }, encryptPBES2Param: function(f, d) {\n    var g = k.getDKFromPBES2Param(f, d);\n    try {\n      var S = a.crypto.Cipher.encrypt(f.plain, g, f.encalg, { iv: f.enciv });\n    } catch {\n      throw new Error(\"encrypt error: \" + f.plain + \" \" + g + \" \" + f.encalg + \" \" + f.enciv);\n    }\n    f.enc = S;\n  }, generatePBES2ASN1Param: function(f) {\n    var d = { seq: [{ seq: [{ oid: \"pkcs5PBES2\" }, { seq: [{ seq: [{ oid: \"pkcs5PBKDF2\" }, { seq: [{ octstr: { hex: f.salt } }, { int: { hex: xn(f.iter) } }] }] }, { seq: [{ oid: f.encalg }, { octstr: { hex: f.enciv } }] }] }] }, { octstr: { hex: f.enc } }] };\n    return f.prf != \"hmacWithSHA1\" && d.seq[0].seq[1].seq[0].seq[1].seq.push({ seq: [{ oid: f.prf }, { null: \"\" }] }), d;\n  }, parseHexOfEncryptedPKCS8: function(f) {\n    var d = V, g = d.getChildIdx, S = d.getV, b = {}, D = g(f, 0);\n    if (D.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0).items != 2: \" + D.length);\n    b.ciphertext = S(f, D[1]);\n    var A = g(f, D[0]);\n    if (A.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0).items != 2: \" + A.length);\n    if (S(f, A[0]) != \"2a864886f70d01050d\")\n      throw new Error(\"this only supports pkcs5PBES2\");\n    var I = g(f, A[1]);\n    if (A.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0.1).items != 2: \" + I.length);\n    var m = g(f, I[1]);\n    if (m.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0.1.1).items != 2: \" + m.length);\n    if (S(f, m[0]) != \"2a864886f70d0307\")\n      throw \"this only supports TripleDES\";\n    b.encryptionSchemeAlg = \"TripleDES\", b.encryptionSchemeIV = S(f, m[1]);\n    var E = g(f, I[0]);\n    if (E.length != 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0.1.0).items != 2: \" + E.length);\n    if (S(f, E[0]) != \"2a864886f70d01050c\")\n      throw new Error(\"this only supports pkcs5PBKDF2\");\n    var w = g(f, E[1]);\n    if (w.length < 2)\n      throw new Error(\"malformed format: SEQUENCE(0.0.1.0.1).items < 2: \" + w.length);\n    b.pbkdf2Salt = S(f, w[0]);\n    var x = S(f, w[1]);\n    try {\n      b.pbkdf2Iter = parseInt(x, 16);\n    } catch {\n      throw new Error(\"malformed format pbkdf2Iter: \" + x);\n    }\n    return b;\n  }, getPBKDF2KeyHexFromParam: function(f, d) {\n    var g = K.enc.Hex.parse(f.pbkdf2Salt), S = f.pbkdf2Iter, b = K.PBKDF2(d, g, { keySize: 192 / 32, iterations: S }), D = K.enc.Hex.stringify(b);\n    return D;\n  }, _getPlainPKCS8HexFromEncryptedPKCS8PEM: function(f, d) {\n    var g = ie(f, \"ENCRYPTED PRIVATE KEY\"), S = this.parseHexOfEncryptedPKCS8(g), b = k.getPBKDF2KeyHexFromParam(S, d), D = {};\n    D.ciphertext = K.enc.Hex.parse(S.ciphertext);\n    var A = K.enc.Hex.parse(b), I = K.enc.Hex.parse(S.encryptionSchemeIV), m = K.TripleDES.decrypt(D, A, { iv: I }), E = K.enc.Hex.stringify(m);\n    return E;\n  }, parsePBES2: function(f) {\n    var d = V.parse(f);\n    if (J(d, \"seq.0.seq.0.oid\") != \"pkcs5PBES2\" || J(d, \"seq.0.seq.1.seq.0.seq.0.oid\") != \"pkcs5PBKDF2\")\n      throw new Error(\"not pkcs5PBES2 and pkcs5PBKDF2 used\");\n    var g = J(d, \"seq.0.seq.1.seq.0.seq.1.seq\");\n    if (g == null)\n      throw new Error(\"PBKDF2 parameter not found\");\n    var S = J(g, \"0.octstr.hex\"), b = J(g, \"1.int.hex\"), D = J(g, \"2.seq.0.oid\", \"hmacWithSHA1\"), A = -1;\n    try {\n      A = parseInt(b, 16);\n    } catch {\n      throw new Error(\"iter not proper value\");\n    }\n    var I = J(d, \"seq.0.seq.1.seq.1.seq.0.oid\"), m = J(d, \"seq.0.seq.1.seq.1.seq.1.octstr.hex\"), E = J(d, \"seq.1.octstr.hex\");\n    if (I == null || m == null || E == null)\n      throw new Error(\"encalg, enciv or enc is undefined\");\n    var w = { salt: S, iter: A, prf: D, encalg: I, enciv: m, enc: E };\n    return w;\n  }, getDKFromPBES2Param: function(f, d) {\n    var g = { hmacWithSHA1: K.algo.SHA1, hmacWithSHA224: K.algo.SHA224, hmacWithSHA256: K.algo.SHA256, hmacWithSHA384: K.algo.SHA384, hmacWithSHA512: K.algo.SHA512 }, S = { \"des-EDE3-CBC\": 192 / 32, \"aes128-CBC\": 128 / 32, \"aes256-CBC\": 256 / 32 }, b = g[f.prf];\n    if (b == null)\n      throw new Error(\"unsupported prf\");\n    var D = S[f.encalg];\n    if (D == null)\n      throw new Error(\"unsupported encalg\");\n    var A = K.enc.Hex.parse(f.salt), I = f.iter;\n    try {\n      var m = K.PBKDF2(d, A, { keySize: D, iterations: I, hasher: b });\n      return K.enc.Hex.stringify(m);\n    } catch (E) {\n      throw new Error(\"PBKDF2 error: \" + E + \" \" + JSON.stringify(f) + \" \" + d);\n    }\n  }, getPlainHexFromEncryptedPKCS8PEM: function(f, d) {\n    if (f.indexOf(\"BEGIN ENCRYPTED PRIVATE KEY\") == -1)\n      throw new Error(\"not Encrypted PKCS#8 PEM string\");\n    var g = ie(f), S;\n    try {\n      S = k.parsePBES2(g);\n    } catch (D) {\n      throw new Error(\"malformed PBES2 format: \" + D.message);\n    }\n    var b = k.getDKFromPBES2Param(S, d);\n    return a.crypto.Cipher.decrypt(S.enc, b, S.encalg, { iv: S.enciv });\n  }, getKeyFromEncryptedPKCS8PEM: function(f, d) {\n    var g = this.getPlainHexFromEncryptedPKCS8PEM(f, d), S = this.getKeyFromPlainPrivatePKCS8Hex(g);\n    return S;\n  }, parsePlainPrivatePKCS8Hex: function(f) {\n    var d = V, g = d.getChildIdx, S = d.getV, b = {};\n    if (b.algparam = null, f.substr(0, 2) != \"30\")\n      throw new Error(\"malformed plain PKCS8 private key(code:001)\");\n    var D = g(f, 0);\n    if (D.length < 3)\n      throw new Error(\"malformed plain PKCS8 private key(code:002)\");\n    if (f.substr(D[1], 2) != \"30\")\n      throw new Error(\"malformed PKCS8 private key(code:003)\");\n    var A = g(f, D[1]);\n    if (A.length != 2)\n      throw new Error(\"malformed PKCS8 private key(code:004)\");\n    if (f.substr(A[0], 2) != \"06\")\n      throw new Error(\"malformed PKCS8 private key(code:005)\");\n    if (b.algoid = S(f, A[0]), f.substr(A[1], 2) == \"06\" && (b.algparam = S(f, A[1])), f.substr(D[2], 2) != \"04\")\n      throw new Error(\"malformed PKCS8 private key(code:006)\");\n    return b.keyidx = d.getVidx(f, D[2]), b;\n  }, getKeyFromPlainPrivatePKCS8PEM: function(f) {\n    var d = ie(f, \"PRIVATE KEY\"), g = this.getKeyFromPlainPrivatePKCS8Hex(d);\n    return g;\n  }, getKeyFromPlainPrivatePKCS8Hex: function(f) {\n    var d = this.parsePlainPrivatePKCS8Hex(f), g;\n    if (d.algoid == \"2a864886f70d010101\")\n      g = new q();\n    else if (d.algoid == \"2a8648ce380401\")\n      g = new a.crypto.DSA();\n    else if (d.algoid == \"2a8648ce3d0201\")\n      g = new a.crypto.ECDSA();\n    else\n      throw new Error(\"unsupported private key algorithm\");\n    return g.readPKCS8PrvKeyHex(f), g;\n  }, _getKeyFromPublicPKCS8Hex: function(f) {\n    var d, g = V.getVbyList(f, 0, [0, 0], \"06\");\n    if (g === \"2a864886f70d010101\")\n      d = new q();\n    else if (g === \"2a8648ce380401\")\n      d = new a.crypto.DSA();\n    else if (g === \"2a8648ce3d0201\")\n      d = new a.crypto.ECDSA();\n    else\n      throw new Error(\"unsupported PKCS#8 public key hex\");\n    return d.readPKCS8PubKeyHex(f), d;\n  }, parsePublicRawRSAKeyHex: function(f) {\n    var d = V, g = d.getChildIdx, S = d.getV, b = {};\n    if (f.substr(0, 2) != \"30\")\n      throw new Error(\"malformed RSA key(code:001)\");\n    var D = g(f, 0);\n    if (D.length != 2)\n      throw new Error(\"malformed RSA key(code:002)\");\n    if (f.substr(D[0], 2) != \"02\")\n      throw new Error(\"malformed RSA key(code:003)\");\n    if (b.n = S(f, D[0]), f.substr(D[1], 2) != \"02\")\n      throw new Error(\"malformed RSA key(code:004)\");\n    return b.e = S(f, D[1]), b;\n  }, parsePublicPKCS8Hex: function(f) {\n    var d = V, g = d.getChildIdx, S = d.getV, b = {};\n    b.algparam = null;\n    var D = g(f, 0);\n    if (D.length != 2)\n      throw new Error(\"outer DERSequence shall have 2 elements: \" + D.length);\n    var A = D[0];\n    if (f.substr(A, 2) != \"30\")\n      throw new Error(\"malformed PKCS8 public key(code:001)\");\n    var I = g(f, A);\n    if (I.length != 2)\n      throw new Error(\"malformed PKCS8 public key(code:002)\");\n    if (f.substr(I[0], 2) != \"06\")\n      throw new Error(\"malformed PKCS8 public key(code:003)\");\n    if (b.algoid = S(f, I[0]), f.substr(I[1], 2) == \"06\" ? b.algparam = S(f, I[1]) : f.substr(I[1], 2) == \"30\" && (b.algparam = {}, b.algparam.p = d.getVbyList(f, I[1], [0], \"02\"), b.algparam.q = d.getVbyList(f, I[1], [1], \"02\"), b.algparam.g = d.getVbyList(f, I[1], [2], \"02\")), f.substr(D[1], 2) != \"03\")\n      throw new Error(\"malformed PKCS8 public key(code:004)\");\n    return b.key = S(f, D[1]).substr(2), b;\n  } };\n}();\nk.getKey = function(e, t, r) {\n  var i = V, s = i.getChildIdx;\n  i.getV;\n  var n = i.getVbyList, h = a.crypto, u = h.ECDSA, p = h.DSA, c = q, y = ie, v = k;\n  if (typeof c < \"u\" && e instanceof c || typeof u < \"u\" && e instanceof u || typeof p < \"u\" && e instanceof p)\n    return e;\n  if (e.curve !== void 0 && e.xy !== void 0 && e.d === void 0)\n    return new u({ pub: e.xy, curve: e.curve });\n  if (e.curve !== void 0 && e.d !== void 0)\n    return new u({ prv: e.d, curve: e.curve });\n  if (e.kty === void 0 && e.n !== void 0 && e.e !== void 0 && e.d === void 0) {\n    var o = new c();\n    return o.setPublic(e.n, e.e), o;\n  }\n  if (e.kty === void 0 && e.n !== void 0 && e.e !== void 0 && e.d !== void 0 && e.p !== void 0 && e.q !== void 0 && e.dp !== void 0 && e.dq !== void 0 && e.co !== void 0 && e.qi === void 0) {\n    var o = new c();\n    return o.setPrivateEx(e.n, e.e, e.d, e.p, e.q, e.dp, e.dq, e.co), o;\n  }\n  if (e.kty === void 0 && e.n !== void 0 && e.e !== void 0 && e.d !== void 0 && e.p === void 0) {\n    var o = new c();\n    return o.setPrivate(e.n, e.e, e.d), o;\n  }\n  if (e.p !== void 0 && e.q !== void 0 && e.g !== void 0 && e.y !== void 0 && e.x === void 0) {\n    var o = new p();\n    return o.setPublic(e.p, e.q, e.g, e.y), o;\n  }\n  if (e.p !== void 0 && e.q !== void 0 && e.g !== void 0 && e.y !== void 0 && e.x !== void 0) {\n    var o = new p();\n    return o.setPrivate(e.p, e.q, e.g, e.y, e.x), o;\n  }\n  if (e.kty === \"RSA\" && e.n !== void 0 && e.e !== void 0 && e.d === void 0) {\n    var o = new c();\n    return o.setPublic(Y(e.n), Y(e.e)), o;\n  }\n  if (e.kty === \"RSA\" && e.n !== void 0 && e.e !== void 0 && e.d !== void 0 && e.p !== void 0 && e.q !== void 0 && e.dp !== void 0 && e.dq !== void 0 && e.qi !== void 0) {\n    var o = new c();\n    return o.setPrivateEx(Y(e.n), Y(e.e), Y(e.d), Y(e.p), Y(e.q), Y(e.dp), Y(e.dq), Y(e.qi)), o;\n  }\n  if (e.kty === \"RSA\" && e.n !== void 0 && e.e !== void 0 && e.d !== void 0) {\n    var o = new c();\n    return o.setPrivate(Y(e.n), Y(e.e), Y(e.d)), o;\n  }\n  if (e.kty === \"EC\" && e.crv !== void 0 && e.x !== void 0 && e.y !== void 0 && e.d === void 0) {\n    var l = new u({ curve: e.crv }), f = l.ecparams.keycharlen, d = (\"0000000000\" + Y(e.x)).slice(-f), g = (\"0000000000\" + Y(e.y)).slice(-f), S = \"04\" + d + g;\n    return l.setPublicKeyHex(S), l;\n  }\n  if (e.kty === \"EC\" && e.crv !== void 0 && e.x !== void 0 && e.y !== void 0 && e.d !== void 0) {\n    var l = new u({ curve: e.crv }), f = l.ecparams.keycharlen, d = (\"0000000000\" + Y(e.x)).slice(-f), g = (\"0000000000\" + Y(e.y)).slice(-f), S = \"04\" + d + g, b = (\"0000000000\" + Y(e.d)).slice(-f);\n    return l.setPublicKeyHex(S), l.setPrivateKeyHex(b), l;\n  }\n  if (r === \"pkcs5prv\") {\n    var D = e, i = V, A, o;\n    if (A = s(D, 0), A.length === 9)\n      o = new c(), o.readPKCS5PrvKeyHex(D);\n    else if (A.length === 6)\n      o = new p(), o.readPKCS5PrvKeyHex(D);\n    else if (A.length > 2 && D.substr(A[1], 2) === \"04\")\n      o = new u(), o.readPKCS5PrvKeyHex(D);\n    else\n      throw new Error(\"unsupported PKCS#1/5 hexadecimal key\");\n    return o;\n  }\n  if (r === \"pkcs8prv\") {\n    var o = v.getKeyFromPlainPrivatePKCS8Hex(e);\n    return o;\n  }\n  if (r === \"pkcs8pub\")\n    return v._getKeyFromPublicPKCS8Hex(e);\n  if (r === \"x509pub\")\n    return L.getPublicKeyFromCertHex(e);\n  if (e.indexOf(\"-END CERTIFICATE-\", 0) != -1 || e.indexOf(\"-END X509 CERTIFICATE-\", 0) != -1 || e.indexOf(\"-END TRUSTED CERTIFICATE-\", 0) != -1)\n    return L.getPublicKeyFromCertPEM(e);\n  if (e.indexOf(\"-END PUBLIC KEY-\") != -1) {\n    var I = ie(e, \"PUBLIC KEY\");\n    return v._getKeyFromPublicPKCS8Hex(I);\n  }\n  if (e.indexOf(\"-END RSA PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") == -1) {\n    var m = y(e, \"RSA PRIVATE KEY\");\n    return v.getKey(m, null, \"pkcs5prv\");\n  }\n  if (e.indexOf(\"-END DSA PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") == -1) {\n    var E = y(e, \"DSA PRIVATE KEY\"), w = n(E, 0, [1], \"02\"), x = n(E, 0, [2], \"02\"), F = n(E, 0, [3], \"02\"), P = n(E, 0, [4], \"02\"), T = n(E, 0, [5], \"02\"), o = new p();\n    return o.setPrivate(new R(w, 16), new R(x, 16), new R(F, 16), new R(P, 16), new R(T, 16)), o;\n  }\n  if (e.indexOf(\"-END EC PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") == -1) {\n    var m = y(e, \"EC PRIVATE KEY\");\n    return v.getKey(m, null, \"pkcs5prv\");\n  }\n  if (e.indexOf(\"-END PRIVATE KEY-\") != -1)\n    return v.getKeyFromPlainPrivatePKCS8PEM(e);\n  if (e.indexOf(\"-END RSA PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") != -1) {\n    var H = v.getDecryptedKeyHex(e, t), C = new q();\n    return C.readPKCS5PrvKeyHex(H), C;\n  }\n  if (e.indexOf(\"-END EC PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") != -1) {\n    var E = v.getDecryptedKeyHex(e, t), o = n(E, 0, [1], \"04\"), B = n(E, 0, [2, 0], \"06\"), O = n(E, 0, [3, 0], \"03\").substr(2), j = \"\";\n    if (a.crypto.OID.oidhex2name[B] !== void 0)\n      j = a.crypto.OID.oidhex2name[B];\n    else\n      throw new Error(\"undefined OID(hex) in KJUR.crypto.OID: \" + B);\n    var l = new u({ curve: j });\n    return l.setPublicKeyHex(O), l.setPrivateKeyHex(o), l.isPublic = !1, l;\n  }\n  if (e.indexOf(\"-END DSA PRIVATE KEY-\") != -1 && e.indexOf(\"4,ENCRYPTED\") != -1) {\n    var E = v.getDecryptedKeyHex(e, t), w = n(E, 0, [1], \"02\"), x = n(E, 0, [2], \"02\"), F = n(E, 0, [3], \"02\"), P = n(E, 0, [4], \"02\"), T = n(E, 0, [5], \"02\"), o = new p();\n    return o.setPrivate(new R(w, 16), new R(x, 16), new R(F, 16), new R(P, 16), new R(T, 16)), o;\n  }\n  if (e.indexOf(\"-END ENCRYPTED PRIVATE KEY-\") != -1)\n    return v.getKeyFromEncryptedPKCS8PEM(e, t);\n  throw new Error(\"not supported argument\");\n};\nk.generateKeypair = function(e, t) {\n  if (e == \"RSA\") {\n    var r = t, i = new q();\n    i.generate(r, \"10001\"), i.isPrivate = !0, i.isPublic = !0;\n    var s = new q(), n = i.n.toString(16), h = i.e.toString(16);\n    s.setPublic(n, h), s.isPrivate = !1, s.isPublic = !0;\n    var u = {};\n    return u.prvKeyObj = i, u.pubKeyObj = s, u;\n  } else if (e == \"EC\") {\n    var p = t, c = new a.crypto.ECDSA({ curve: p }), y = c.generateKeyPairHex(), i = new a.crypto.ECDSA({ curve: p });\n    i.setPublicKeyHex(y.ecpubhex), i.setPrivateKeyHex(y.ecprvhex), i.isPrivate = !0, i.isPublic = !1;\n    var s = new a.crypto.ECDSA({ curve: p });\n    s.setPublicKeyHex(y.ecpubhex), s.isPrivate = !1, s.isPublic = !0;\n    var u = {};\n    return u.prvKeyObj = i, u.pubKeyObj = s, u;\n  } else\n    throw new Error(\"unknown algorithm: \" + e);\n};\nk.getPEM = function(e, t, r, i, s, n) {\n  var h = a, u = h.asn1, p = u.DERObjectIdentifier, c = u.DERInteger, y = u.ASN1Util.newObject, v = u.x509, o = v.SubjectPublicKeyInfo, l = h.crypto, f = l.DSA, d = l.ECDSA, g = q;\n  function S(B) {\n    var O = y({ seq: [{ int: 0 }, { int: { bigint: B.n } }, { int: B.e }, { int: { bigint: B.d } }, { int: { bigint: B.p } }, { int: { bigint: B.q } }, { int: { bigint: B.dmp1 } }, { int: { bigint: B.dmq1 } }, { int: { bigint: B.coeff } }] });\n    return O;\n  }\n  function b(B) {\n    var O = y({ seq: [{ int: 1 }, { octstr: { hex: B.prvKeyHex } }, { tag: [\"a0\", !0, { oid: { name: B.curveName } }] }, { tag: [\"a1\", !0, { bitstr: { hex: \"00\" + B.pubKeyHex } }] }] });\n    return O;\n  }\n  function D(B) {\n    var O = y({ seq: [{ int: 0 }, { int: { bigint: B.p } }, { int: { bigint: B.q } }, { int: { bigint: B.g } }, { int: { bigint: B.y } }, { int: { bigint: B.x } }] });\n    return O;\n  }\n  if ((g !== void 0 && e instanceof g || f !== void 0 && e instanceof f || d !== void 0 && e instanceof d) && e.isPublic == !0 && (t === void 0 || t == \"PKCS8PUB\")) {\n    var A = new o(e), I = A.tohex();\n    return de(I, \"PUBLIC KEY\");\n  }\n  if (t == \"PKCS1PRV\" && g !== void 0 && e instanceof g && (r === void 0 || r == null) && e.isPrivate == !0) {\n    var A = S(e), I = A.tohex();\n    return de(I, \"RSA PRIVATE KEY\");\n  }\n  if (t == \"PKCS1PRV\" && d !== void 0 && e instanceof d && (r === void 0 || r == null) && e.isPrivate == !0) {\n    var m = new p({ name: e.curveName }), E = m.tohex(), w = b(e), x = w.tohex(), F = \"\";\n    return F += de(E, \"EC PARAMETERS\"), F += de(x, \"EC PRIVATE KEY\"), F;\n  }\n  if (t == \"PKCS1PRV\" && f !== void 0 && e instanceof f && (r === void 0 || r == null) && e.isPrivate == !0) {\n    var A = D(e), I = A.tohex();\n    return de(I, \"DSA PRIVATE KEY\");\n  }\n  if (t == \"PKCS5PRV\" && g !== void 0 && e instanceof g && r !== void 0 && r != null && e.isPrivate == !0) {\n    var A = S(e), I = A.tohex();\n    return i === void 0 && (i = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"RSA\", I, r, i, n);\n  }\n  if (t == \"PKCS5PRV\" && d !== void 0 && e instanceof d && r !== void 0 && r != null && e.isPrivate == !0) {\n    var A = b(e), I = A.tohex();\n    return i === void 0 && (i = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"EC\", I, r, i, n);\n  }\n  if (t == \"PKCS5PRV\" && f !== void 0 && e instanceof f && r !== void 0 && r != null && e.isPrivate == !0) {\n    var A = D(e), I = A.tohex();\n    return i === void 0 && (i = \"DES-EDE3-CBC\"), this.getEncryptedPKCS5PEMFromPrvKeyHex(\"DSA\", I, r, i, n);\n  }\n  var P = function(B, O) {\n    if (typeof O == \"string\")\n      return k.getEncryptedPKCS8PEM(B, O);\n    if (typeof O == \"object\" && J(O, \"passcode\") != null) {\n      var j = JSON.parse(JSON.stringify(O)), fe = j.passcode;\n      return delete j.passcode, k.getEncryptedPKCS8PEM(B, fe, j);\n    }\n  };\n  if (t == \"PKCS8PRV\" && g != null && e instanceof g && e.isPrivate == !0) {\n    var T = S(e), H = T.tohex(), A = y({ seq: [{ int: 0 }, { seq: [{ oid: { name: \"rsaEncryption\" } }, { null: !0 }] }, { octstr: { hex: H } }] }), I = A.tohex();\n    return r === void 0 || r == null ? de(I, \"PRIVATE KEY\") : P(I, r);\n  }\n  if (t == \"PKCS8PRV\" && d !== void 0 && e instanceof d && e.isPrivate == !0) {\n    var C = { seq: [{ int: 1 }, { octstr: { hex: e.prvKeyHex } }] };\n    typeof e.pubKeyHex == \"string\" && C.seq.push({ tag: [\"a1\", !0, { bitstr: { hex: \"00\" + e.pubKeyHex } }] });\n    var T = new y(C), H = T.tohex(), A = y({ seq: [{ int: 0 }, { seq: [{ oid: { name: \"ecPublicKey\" } }, { oid: { name: e.curveName } }] }, { octstr: { hex: H } }] }), I = A.tohex();\n    return r === void 0 || r == null ? de(I, \"PRIVATE KEY\") : P(I, r);\n  }\n  if (t == \"PKCS8PRV\" && f !== void 0 && e instanceof f && e.isPrivate == !0) {\n    var T = new c({ bigint: e.x }), H = T.tohex(), A = y({ seq: [{ int: 0 }, { seq: [{ oid: { name: \"dsa\" } }, { seq: [{ int: { bigint: e.p } }, { int: { bigint: e.q } }, { int: { bigint: e.g } }] }] }, { octstr: { hex: H } }] }), I = A.tohex();\n    return r === void 0 || r == null ? de(I, \"PRIVATE KEY\") : P(I, r);\n  }\n  throw new Error(\"unsupported object nor format\");\n};\nk.getKeyFromCSRPEM = function(e) {\n  var t = ie(e, \"CERTIFICATE REQUEST\"), r = k.getKeyFromCSRHex(t);\n  return r;\n};\nk.getKeyFromCSRHex = function(e) {\n  var t = k.parseCSRHex(e), r = k.getKey(t.p8pubkeyhex, null, \"pkcs8pub\");\n  return r;\n};\nk.parseCSRHex = function(e) {\n  var t = V, r = t.getChildIdx, i = t.getTLV, s = {}, n = e;\n  if (n.substr(0, 2) != \"30\")\n    throw new Error(\"malformed CSR(code:001)\");\n  var h = r(n, 0);\n  if (h.length < 1)\n    throw new Error(\"malformed CSR(code:002)\");\n  if (n.substr(h[0], 2) != \"30\")\n    throw new Error(\"malformed CSR(code:003)\");\n  var u = r(n, h[0]);\n  if (u.length < 3)\n    throw new Error(\"malformed CSR(code:004)\");\n  return s.p8pubkeyhex = i(n, u[2]), s;\n};\nk.getKeyID = function(e) {\n  var t = k, r = V;\n  typeof e == \"string\" && e.indexOf(\"BEGIN \") != -1 && (e = t.getKey(e));\n  var i = ie(t.getPEM(e)), s = r.getIdxbyList(i, 0, [1]), n = r.getV(i, s).substring(2);\n  return a.crypto.Util.hashHex(n, \"sha1\");\n};\nk.getJWK = function(e, t, r, i, s) {\n  var n, h = {}, u, p = a.crypto.Util.hashHex;\n  if (typeof e == \"string\")\n    n = k.getKey(e), e.indexOf(\"CERTIFICATE\") != -1 && (u = ie(e));\n  else if (typeof e == \"object\")\n    e instanceof L ? (n = e.getPublicKey(), u = e.hex) : n = e;\n  else\n    throw new Error(\"unsupported keyinfo type\");\n  if (n instanceof q && n.isPrivate)\n    h.kty = \"RSA\", h.n = ae(n.n.toString(16)), h.e = ae(n.e.toString(16)), h.d = ae(n.d.toString(16)), h.p = ae(n.p.toString(16)), h.q = ae(n.q.toString(16)), h.dp = ae(n.dmp1.toString(16)), h.dq = ae(n.dmq1.toString(16)), h.qi = ae(n.coeff.toString(16));\n  else if (n instanceof q && n.isPublic)\n    h.kty = \"RSA\", h.n = ae(n.n.toString(16)), h.e = ae(n.e.toString(16));\n  else if (n instanceof a.crypto.ECDSA && n.isPrivate) {\n    var c = n.getShortNISTPCurveName();\n    if (c !== \"P-256\" && c !== \"P-384\" && c !== \"P-521\")\n      throw new Error(\"unsupported curve name for JWT: \" + c);\n    var y = n.getPublicKeyXYHex();\n    h.kty = \"EC\", h.crv = c, h.x = ae(y.x), h.y = ae(y.y), h.d = ae(n.prvKeyHex);\n  } else if (n instanceof a.crypto.ECDSA && n.isPublic) {\n    var c = n.getShortNISTPCurveName();\n    if (c !== \"P-256\" && c !== \"P-384\" && c !== \"P-521\")\n      throw new Error(\"unsupported curve name for JWT: \" + c);\n    var y = n.getPublicKeyXYHex();\n    h.kty = \"EC\", h.crv = c, h.x = ae(y.x), h.y = ae(y.y);\n  }\n  if (h.kty == null)\n    throw new Error(\"unsupported keyinfo\");\n  return !n.isPrivate && t != !0 && (h.kid = a.jws.JWS.getJWKthumbprint(h)), u != null && r != !0 && (h.x5c = [_e(u)]), u != null && i != !0 && (h.x5t = Xe(_e(p(u, \"sha1\")))), u != null && s != !0 && (h[\"x5t#S256\"] = Xe(_e(p(u, \"sha256\")))), h;\n};\nk.getJWKFromKey = function(e) {\n  return k.getJWK(e, !0, !0, !0, !0);\n};\nq.getPosArrayOfChildrenFromHex = function(e) {\n  return V.getChildIdx(e, 0);\n};\nq.getHexValueArrayOfChildrenFromHex = function(e) {\n  var t = V, r = t.getV, o = q.getPosArrayOfChildrenFromHex(e), i = r(e, o[0]), s = r(e, o[1]), n = r(e, o[2]), h = r(e, o[3]), u = r(e, o[4]), p = r(e, o[5]), c = r(e, o[6]), y = r(e, o[7]), v = r(e, o[8]), o = new Array();\n  return o.push(i, s, n, h, u, p, c, y, v), o;\n};\nq.prototype.readPrivateKeyFromPEMString = function(e) {\n  var t = ie(e), r = q.getHexValueArrayOfChildrenFromHex(t);\n  this.setPrivateEx(r[1], r[2], r[3], r[4], r[5], r[6], r[7], r[8]);\n};\nq.prototype.readPKCS5PrvKeyHex = function(e) {\n  var t = q.getHexValueArrayOfChildrenFromHex(e);\n  this.setPrivateEx(t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]);\n};\nq.prototype.readPKCS8PrvKeyHex = function(e) {\n  var t, r, i, s, n, h, u, p, c = V, y = c.getVbyListEx;\n  if (c.isASN1HEX(e) === !1)\n    throw new Error(\"not ASN.1 hex string\");\n  try {\n    t = y(e, 0, [2, 0, 1], \"02\"), r = y(e, 0, [2, 0, 2], \"02\"), i = y(e, 0, [2, 0, 3], \"02\"), s = y(e, 0, [2, 0, 4], \"02\"), n = y(e, 0, [2, 0, 5], \"02\"), h = y(e, 0, [2, 0, 6], \"02\"), u = y(e, 0, [2, 0, 7], \"02\"), p = y(e, 0, [2, 0, 8], \"02\");\n  } catch {\n    throw new Error(\"malformed PKCS#8 plain RSA private key\");\n  }\n  this.setPrivateEx(t, r, i, s, n, h, u, p);\n};\nq.prototype.readPKCS5PubKeyHex = function(e) {\n  var t = V, r = t.getV;\n  if (t.isASN1HEX(e) === !1)\n    throw new Error(\"keyHex is not ASN.1 hex string\");\n  var i = t.getChildIdx(e, 0);\n  if (i.length !== 2 || e.substr(i[0], 2) !== \"02\" || e.substr(i[1], 2) !== \"02\")\n    throw new Error(\"wrong hex for PKCS#5 public key\");\n  var s = r(e, i[0]), n = r(e, i[1]);\n  this.setPublic(s, n);\n};\nq.prototype.readPKCS8PubKeyHex = function(e) {\n  var t = V;\n  if (t.isASN1HEX(e) === !1)\n    throw new Error(\"not ASN.1 hex string\");\n  if (t.getTLVbyListEx(e, 0, [0, 0]) !== \"06092a864886f70d010101\")\n    throw new Error(\"not PKCS8 RSA public key\");\n  var r = t.getTLVbyListEx(e, 0, [1, 0]);\n  this.readPKCS5PubKeyHex(r);\n};\nq.prototype.readCertPubKeyHex = function(e, t) {\n  var r, i;\n  r = new L(), r.readCertHex(e), i = r.getPublicKeyHex(), this.readPKCS8PubKeyHex(i);\n};\nfunction Ot(e, t) {\n  for (var r = \"\", i = t / 4 - e.length, s = 0; s < i; s++)\n    r = r + \"0\";\n  return r + e;\n}\nq.prototype.sign = function(e, t) {\n  var r = function(s) {\n    return a.crypto.Util.hashString(s, t);\n  }, i = r(e);\n  return this.signWithMessageHash(i, t);\n};\nq.prototype.signWithMessageHash = function(e, t) {\n  var r = a.crypto.Util.getPaddedDigestInfoHex(e, t, this.n.bitLength()), i = ve(r, 16), s = this.doPrivate(i), n = s.toString(16);\n  return Ot(n, this.n.bitLength());\n};\nfunction jt(e, t, r) {\n  for (var i = \"\", s = 0; i.length < t; )\n    i += Ae(r(Pe(e + String.fromCharCode.apply(String, [(s & 4278190080) >> 24, (s & 16711680) >> 16, (s & 65280) >> 8, s & 255])))), s += 1;\n  return i;\n}\nq.prototype.signPSS = function(e, t, r) {\n  var i = function(n) {\n    return a.crypto.Util.hashHex(n, t);\n  }, s = i(Pe(e));\n  return r === void 0 && (r = -1), this.signWithMessageHashPSS(s, t, r);\n};\nq.prototype.signWithMessageHashPSS = function(e, t, r) {\n  var i = Ae(e), s = i.length, n = this.n.bitLength() - 1, h = Math.ceil(n / 8), u, p = function(g) {\n    return a.crypto.Util.hashHex(g, t);\n  };\n  if (r === -1 || r === void 0)\n    r = s;\n  else if (r === -2)\n    r = h - s - 2;\n  else if (r < -2)\n    throw new Error(\"invalid salt length\");\n  if (h < s + r + 2)\n    throw new Error(\"data too long\");\n  var c = \"\";\n  r > 0 && (c = new Array(r), new Ge().nextBytes(c), c = String.fromCharCode.apply(String, c));\n  var y = Ae(p(Pe(\"\\0\\0\\0\\0\\0\\0\\0\\0\" + i + c))), v = [];\n  for (u = 0; u < h - r - s - 2; u += 1)\n    v[u] = 0;\n  var o = String.fromCharCode.apply(String, v) + \"\u0001\" + c, l = jt(y, o.length, p), f = [];\n  for (u = 0; u < o.length; u += 1)\n    f[u] = o.charCodeAt(u) ^ l.charCodeAt(u);\n  var d = 65280 >> 8 * h - n & 255;\n  for (f[0] &= ~d, u = 0; u < s; u++)\n    f.push(y.charCodeAt(u));\n  return f.push(188), Ot(this.doPrivate(new R(f)).toString(16), this.n.bitLength());\n};\nfunction Vt(e) {\n  for (var t in a.crypto.Util.DIGESTINFOHEAD) {\n    var r = a.crypto.Util.DIGESTINFOHEAD[t], i = r.length;\n    if (e.substring(0, i) == r) {\n      var s = [t, e.substring(i)];\n      return s;\n    }\n  }\n  return [];\n}\nq.prototype.verify = function(e, t) {\n  if (t = t.toLowerCase(), t.match(/^[0-9a-f]+$/) == null)\n    return !1;\n  var r = ve(t, 16), i = this.n.bitLength();\n  if (r.bitLength() > i)\n    return !1;\n  var s = this.doPublic(r), n = s.toString(16);\n  if (n.length + 3 != i / 4)\n    return !1;\n  var h = n.replace(/^1f+00/, \"\"), u = Vt(h);\n  if (u.length == 0)\n    return !1;\n  var p = u[0], c = u[1], y = function(o) {\n    return a.crypto.Util.hashString(o, p);\n  }, v = y(e);\n  return c == v;\n};\nq.prototype.verifyWithMessageHash = function(e, t) {\n  if (t.length != Math.ceil(this.n.bitLength() / 4))\n    return !1;\n  var r = ve(t, 16);\n  if (r.bitLength() > this.n.bitLength())\n    return 0;\n  var i = this.doPublic(r), s = i.toString(16).replace(/^1f+00/, \"\"), n = Vt(s);\n  if (n.length == 0)\n    return !1;\n  n[0];\n  var h = n[1];\n  return h == e;\n};\nq.prototype.verifyPSS = function(e, t, r, i) {\n  var s = function(h) {\n    return a.crypto.Util.hashHex(h, r);\n  }, n = s(Pe(e));\n  return i === void 0 && (i = -1), this.verifyWithMessageHashPSS(n, t, r, i);\n};\nq.prototype.verifyWithMessageHashPSS = function(e, t, r, i) {\n  if (t.length != Math.ceil(this.n.bitLength() / 4))\n    return !1;\n  var s = new R(t, 16), n = function(b) {\n    return a.crypto.Util.hashHex(b, r);\n  }, h = Ae(e), u = h.length, p = this.n.bitLength() - 1, c = Math.ceil(p / 8), y;\n  if (i === -1 || i === void 0)\n    i = u;\n  else if (i === -2)\n    i = c - u - 2;\n  else if (i < -2)\n    throw new Error(\"invalid salt length\");\n  if (c < u + i + 2)\n    throw new Error(\"data too long\");\n  var v = this.doPublic(s).toByteArray();\n  for (y = 0; y < v.length; y += 1)\n    v[y] &= 255;\n  for (; v.length < c; )\n    v.unshift(0);\n  if (v[c - 1] !== 188)\n    throw new Error(\"encoded message does not end in 0xbc\");\n  v = String.fromCharCode.apply(String, v);\n  var o = v.substr(0, c - u - 1), l = v.substr(o.length, u), f = 65280 >> 8 * c - p & 255;\n  if (o.charCodeAt(0) & f)\n    throw new Error(\"bits beyond keysize not zero\");\n  var d = jt(l, o.length, n), g = [];\n  for (y = 0; y < o.length; y += 1)\n    g[y] = o.charCodeAt(y) ^ d.charCodeAt(y);\n  g[0] &= ~f;\n  var S = c - u - i - 2;\n  for (y = 0; y < S; y += 1)\n    if (g[y] !== 0)\n      throw new Error(\"leftmost octets not zero\");\n  if (g[S] !== 1)\n    throw new Error(\"0x01 marker not found\");\n  return l === Ae(n(Pe(\"\\0\\0\\0\\0\\0\\0\\0\\0\" + h + String.fromCharCode.apply(String, g.slice(-i)))));\n};\nq.SALT_LEN_HLEN = -1;\nq.SALT_LEN_MAX = -2;\nq.SALT_LEN_RECOVER = -2;\nfunction L(e) {\n  var t = V, r = t.getChildIdx, i = t.getV;\n  t.dump;\n  var s = t.parse, n = t.getTLV, h = t.getVbyList, u = t.getVbyListEx, p = t.getTLVbyList, c = t.getTLVbyListEx, y = t.getIdxbyList, v = t.getIdxbyListEx, o = t.getVidx, l = t.getInt, f = t.oidname, d = t.hextooidstr, g = ie, S, b = Error;\n  try {\n    S = a.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;\n  } catch {\n  }\n  this.HEX2STAG = { \"0c\": \"utf8\", 13: \"prn\", 16: \"ia5\", \"1a\": \"vis\", \"1e\": \"bmp\" }, this.hex = null, this.version = 0, this.foffset = 0, this.aExtInfo = null, this.getVersion = function() {\n    if (this.hex === null || this.version !== 0)\n      return this.version;\n    var m = p(this.hex, 0, [0, 0]);\n    if (m.substr(0, 2) == \"a0\") {\n      var E = p(m, 0, [0]), w = l(E, 0);\n      if (w < 0 || 2 < w)\n        throw new Error(\"malformed version field\");\n      return this.version = w + 1, this.version;\n    } else\n      return this.version = 1, this.foffset = -1, 1;\n  }, this.getSerialNumberHex = function() {\n    return u(this.hex, 0, [0, 0], \"02\");\n  }, this.getSignatureAlgorithmField = function() {\n    var m = c(this.hex, 0, [0, 1]);\n    return this.getAlgorithmIdentifierName(m);\n  }, this.getAlgorithmIdentifierName = function(m) {\n    for (var E in S)\n      if (m === S[E])\n        return E;\n    return f(u(m, 0, [0], \"06\"));\n  }, this.getIssuer = function(m, E) {\n    return this.getX500Name(this.getIssuerHex(), m, E);\n  }, this.getIssuerHex = function() {\n    return p(this.hex, 0, [0, 3 + this.foffset], \"30\");\n  }, this.getIssuerString = function() {\n    var m = this.getIssuer();\n    return m.str;\n  }, this.getSubject = function(m, E) {\n    return this.getX500Name(this.getSubjectHex(), m, E);\n  }, this.getSubjectHex = function() {\n    return p(this.hex, 0, [0, 5 + this.foffset], \"30\");\n  }, this.getSubjectString = function() {\n    var m = this.getSubject();\n    return m.str;\n  }, this.getNotBefore = function() {\n    var m = h(this.hex, 0, [0, 4 + this.foffset, 0]);\n    return m = m.replace(/(..)/g, \"%$1\"), m = decodeURIComponent(m), m;\n  }, this.getNotAfter = function() {\n    var m = h(this.hex, 0, [0, 4 + this.foffset, 1]);\n    return m = m.replace(/(..)/g, \"%$1\"), m = decodeURIComponent(m), m;\n  }, this.getPublicKeyHex = function() {\n    return this.getSPKI();\n  }, this.getSPKI = function() {\n    return p(this.hex, 0, [0, 6 + this.foffset], \"30\");\n  }, this.getSPKIValue = function() {\n    var m = this.getSPKI();\n    return m == null ? null : h(m, 0, [1], \"03\", !0);\n  }, this.getPublicKeyIdx = function() {\n    return y(this.hex, 0, [0, 6 + this.foffset], \"30\");\n  }, this.getPublicKeyContentIdx = function() {\n    var m = this.getPublicKeyIdx();\n    return y(this.hex, m, [1, 0], \"30\");\n  }, this.getPublicKey = function() {\n    return k.getKey(this.getPublicKeyHex(), null, \"pkcs8pub\");\n  }, this.getSignatureAlgorithmName = function() {\n    var m = p(this.hex, 0, [1], \"30\");\n    return this.getAlgorithmIdentifierName(m);\n  }, this.getSignatureValueHex = function() {\n    return h(this.hex, 0, [2], \"03\", !0);\n  }, this.verifySignature = function(m) {\n    var E = this.getSignatureAlgorithmField(), w = this.getSignatureValueHex(), x = p(this.hex, 0, [0], \"30\"), F = new a.crypto.Signature({ alg: E });\n    return F.init(m), F.updateHex(x), F.verify(w);\n  }, this.parseExt = function(m) {\n    var E, w, x;\n    if (m === void 0) {\n      if (x = this.hex, this.version !== 3)\n        return -1;\n      E = y(x, 0, [0, 7, 0], \"30\"), w = r(x, E);\n    } else {\n      x = ie(m);\n      var F = y(x, 0, [0, 3, 0, 0], \"06\");\n      if (i(x, F) != \"2a864886f70d01090e\") {\n        this.aExtInfo = new Array();\n        return;\n      }\n      E = y(x, 0, [0, 3, 0, 1, 0], \"30\"), w = r(x, E), this.hex = x;\n    }\n    this.aExtInfo = new Array();\n    for (var P = 0; P < w.length; P++) {\n      var T = {};\n      T.critical = !1;\n      var H = r(x, w[P]), C = 0;\n      H.length === 3 && (T.critical = !0, C = 1), T.oid = t.hextooidstr(h(x, w[P], [0], \"06\"));\n      var B = y(x, w[P], [1 + C]);\n      T.vidx = o(x, B), this.aExtInfo.push(T);\n    }\n  }, this.getExtInfo = function(m) {\n    var E = this.aExtInfo, w = m;\n    if (m.match(/^[0-9.]+$/) || (w = a.asn1.x509.OID.name2oid(m)), w !== \"\") {\n      for (var x = 0; x < E.length; x++)\n        if (E[x].oid === w)\n          return E[x];\n    }\n  }, this.getCriticalExtV = function(m, E, w) {\n    if (E != null)\n      return [E, w];\n    var x = this.getExtInfo(m);\n    return x == null ? [null, null] : [n(this.hex, x.vidx), x.critical];\n  }, this.getExtBasicConstraints = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"basicConstraints\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"basicConstraints\" };\n    if (E && (x.critical = !0), m === \"3000\")\n      return x;\n    if (m === \"30030101ff\")\n      return x.cA = !0, x;\n    if (m.substr(0, 12) === \"30060101ff02\") {\n      var F = i(m, 10), P = parseInt(F, 16);\n      return x.cA = !0, x.pathLen = P, x;\n    }\n    throw new Error(\"hExtV parse error: \" + m);\n  }, this.getExtNameConstraints = function(m, E) {\n    var w = this.getCriticalExtV(\"nameConstraints\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"nameConstraints\" };\n      E && (x.critical = !0);\n      for (var F = r(m, 0), P = 0; P < F.length; P++) {\n        for (var T = [], H = r(m, F[P]), C = 0; C < H.length; C++) {\n          var B = n(m, H[C]), O = this.getGeneralSubtree(B);\n          T.push(O);\n        }\n        var j = m.substr(F[P], 2);\n        j == \"a0\" ? x.permit = T : j == \"a1\" && (x.exclude = T);\n      }\n      return x;\n    }\n  }, this.getGeneralSubtree = function(m) {\n    var E = r(m, 0), w = E.length;\n    if (w < 1 || 2 < w)\n      throw new Error(\"wrong num elements\");\n    for (var x = this.getGeneralName(n(m, E[0])), F = 1; F < w; F++) {\n      var P = m.substr(E[F], 2), T = i(m, E[F]), H = parseInt(T, 16);\n      P == \"80\" && (x.min = H), P == \"81\" && (x.max = H);\n    }\n    return x;\n  }, this.getExtKeyUsage = function(m, E) {\n    var w = this.getCriticalExtV(\"keyUsage\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"keyUsage\" };\n      return E && (x.critical = !0), x.names = this.getExtKeyUsageString(m).split(\",\"), x;\n    }\n  }, this.getExtKeyUsageBin = function(m) {\n    if (m === void 0) {\n      var E = this.getExtInfo(\"keyUsage\");\n      if (E === void 0)\n        return \"\";\n      m = n(this.hex, E.vidx);\n    }\n    if (m.length != 8 && m.length != 10)\n      throw new Error(\"malformed key usage value: \" + m);\n    var w = \"000000000000000\" + parseInt(m.substr(6), 16).toString(2);\n    return m.length == 8 && (w = w.slice(-8)), m.length == 10 && (w = w.slice(-16)), w = w.replace(/0+$/, \"\"), w == \"\" && (w = \"0\"), w;\n  }, this.getExtKeyUsageString = function(m) {\n    for (var E = this.getExtKeyUsageBin(m), w = new Array(), x = 0; x < E.length; x++)\n      E.substr(x, 1) == \"1\" && w.push(L.KEYUSAGE_NAME[x]);\n    return w.join(\",\");\n  }, this.getExtSubjectKeyIdentifier = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"subjectKeyIdentifier\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"subjectKeyIdentifier\" };\n    E && (x.critical = !0);\n    var F = i(m, 0);\n    return x.kid = { hex: F }, x;\n  }, this.getExtAuthorityKeyIdentifier = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"authorityKeyIdentifier\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"authorityKeyIdentifier\" };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++) {\n      var T = m.substr(F[P], 2);\n      if (T === \"80\" && (x.kid = { hex: i(m, F[P]) }), T === \"a1\") {\n        var H = n(m, F[P]), C = this.getGeneralNames(H);\n        x.issuer = C[0].dn;\n      }\n      T === \"82\" && (x.sn = { hex: i(m, F[P]) });\n    }\n    return x;\n  }, this.getExtExtKeyUsage = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"extKeyUsage\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"extKeyUsage\", array: [] };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++)\n      x.array.push(f(i(m, F[P])));\n    return x;\n  }, this.getExtExtKeyUsageName = function() {\n    var m = this.getExtInfo(\"extKeyUsage\");\n    if (m === void 0)\n      return m;\n    var E = new Array(), w = n(this.hex, m.vidx);\n    if (w === \"\")\n      return E;\n    for (var x = r(w, 0), F = 0; F < x.length; F++)\n      E.push(f(i(w, x[F])));\n    return E;\n  }, this.getExtSubjectAltName = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"subjectAltName\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"subjectAltName\", array: [] };\n    return E && (x.critical = !0), x.array = this.getGeneralNames(m), x;\n  }, this.getExtIssuerAltName = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"issuerAltName\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"issuerAltName\", array: [] };\n    return E && (x.critical = !0), x.array = this.getGeneralNames(m), x;\n  }, this.getGeneralNames = function(m) {\n    for (var E = r(m, 0), w = [], x = 0; x < E.length; x++) {\n      var F = this.getGeneralName(n(m, E[x]));\n      F !== void 0 && w.push(F);\n    }\n    return w;\n  }, this.getGeneralName = function(m) {\n    var E = m.substr(0, 2), w = i(m, 0), x = Ae(w);\n    if (E == \"81\")\n      return { rfc822: x };\n    if (E == \"82\")\n      return { dns: x };\n    if (E == \"86\")\n      return { uri: x };\n    if (E == \"87\")\n      return { ip: tt(w) };\n    if (E == \"a4\")\n      return { dn: this.getX500Name(w) };\n    if (E == \"a0\")\n      return { other: this.getOtherName(m) };\n  }, this.getExtSubjectAltName2 = function() {\n    var m, E, w, x = this.getExtInfo(\"subjectAltName\");\n    if (x === void 0)\n      return x;\n    for (var F = new Array(), P = n(this.hex, x.vidx), T = r(P, 0), H = 0; H < T.length; H++)\n      w = P.substr(T[H], 2), m = i(P, T[H]), w === \"81\" && (E = W(m), F.push([\"MAIL\", E])), w === \"82\" && (E = W(m), F.push([\"DNS\", E])), w === \"84\" && (E = L.hex2dn(m, 0), F.push([\"DN\", E])), w === \"86\" && (E = W(m), F.push([\"URI\", E])), w === \"87\" && (E = tt(m), F.push([\"IP\", E]));\n    return F;\n  }, this.getExtCRLDistributionPoints = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"cRLDistributionPoints\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"cRLDistributionPoints\", array: [] };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++) {\n      var T = n(m, F[P]);\n      x.array.push(this.getDistributionPoint(T));\n    }\n    return x;\n  }, this.getDistributionPoint = function(m) {\n    for (var E = {}, w = r(m, 0), x = 0; x < w.length; x++) {\n      var F = m.substr(w[x], 2), P = n(m, w[x]);\n      F == \"a0\" && (E.dpname = this.getDistributionPointName(P));\n    }\n    return E;\n  }, this.getDistributionPointName = function(m) {\n    for (var E = {}, w = r(m, 0), x = 0; x < w.length; x++) {\n      var F = m.substr(w[x], 2), P = n(m, w[x]);\n      F == \"a0\" && (E.full = this.getGeneralNames(P));\n    }\n    return E;\n  }, this.getExtCRLDistributionPointsURI = function() {\n    var m = this.getExtCRLDistributionPoints();\n    if (m == null)\n      return m;\n    for (var E = m.array, w = [], x = 0; x < E.length; x++)\n      try {\n        E[x].dpname.full[0].uri != null && w.push(E[x].dpname.full[0].uri);\n      } catch {\n      }\n    return w;\n  }, this.getExtAIAInfo = function() {\n    var m = this.getExtInfo(\"authorityInfoAccess\");\n    if (m === void 0)\n      return m;\n    for (var E = { ocsp: [], caissuer: [] }, w = r(this.hex, m.vidx), x = 0; x < w.length; x++) {\n      var F = h(this.hex, w[x], [0], \"06\"), P = h(this.hex, w[x], [1], \"86\");\n      F === \"2b06010505073001\" && E.ocsp.push(W(P)), F === \"2b06010505073002\" && E.caissuer.push(W(P));\n    }\n    return E;\n  }, this.getExtAuthorityInfoAccess = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"authorityInfoAccess\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"authorityInfoAccess\", array: [] };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++) {\n      var T = u(m, F[P], [0], \"06\"), H = h(m, F[P], [1], \"86\"), C = W(H);\n      if (T == \"2b06010505073001\")\n        x.array.push({ ocsp: C });\n      else if (T == \"2b06010505073002\")\n        x.array.push({ caissuer: C });\n      else\n        throw new Error(\"unknown method: \" + T);\n    }\n    return x;\n  }, this.getExtCertificatePolicies = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"certificatePolicies\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"certificatePolicies\", array: [] };\n    E && (x.critical = !0);\n    for (var F = r(m, 0), P = 0; P < F.length; P++) {\n      var T = n(m, F[P]), H = this.getPolicyInformation(T);\n      x.array.push(H);\n    }\n    return x;\n  }, this.getPolicyInformation = function(m) {\n    var E = {}, w = h(m, 0, [0], \"06\");\n    E.policyoid = f(w);\n    var x = v(m, 0, [1], \"30\");\n    if (x != -1) {\n      E.array = [];\n      for (var F = r(m, x), P = 0; P < F.length; P++) {\n        var T = n(m, F[P]), H = this.getPolicyQualifierInfo(T);\n        E.array.push(H);\n      }\n    }\n    return E;\n  }, this.getOtherName = function(m) {\n    var E = {}, w = r(m, 0), x = h(m, w[0], [], \"06\"), F = h(m, w[1], []);\n    return E.oid = f(x), E.value = s(F), E;\n  }, this.getPolicyQualifierInfo = function(m) {\n    var E = {}, w = h(m, 0, [0], \"06\");\n    if (w === \"2b06010505070201\") {\n      var x = u(m, 0, [1], \"16\");\n      E.cps = Ae(x);\n    } else if (w === \"2b06010505070202\") {\n      var F = p(m, 0, [1], \"30\");\n      E.unotice = this.getUserNotice(F);\n    }\n    return E;\n  }, this.getUserNotice = function(m) {\n    var E = null;\n    try {\n      E = t.parse(m);\n      var w = this._asn1ToUnotice(E);\n      return w;\n    } catch {\n      return;\n    }\n  }, this._asn1ToUnotice = function(m) {\n    try {\n      for (var E = {}, w = J(m, \"seq\"), x = 0; x < w.length; x++) {\n        var F = this._asn1ToNoticeRef(w[x]);\n        F != null && (E.noticeref = F);\n        var P = this.asn1ToDisplayText(w[x]);\n        P != null && (E.exptext = P);\n      }\n      return Object.keys(E).length > 0 ? E : void 0;\n    } catch {\n      return;\n    }\n  }, this._asn1ToNoticeRef = function(m) {\n    try {\n      for (var E = {}, w = J(m, \"seq\"), x = 0; x < w.length; x++) {\n        var F = this._asn1ToNoticeNum(w[x]);\n        F != null && (E.noticenum = F);\n        var P = this.asn1ToDisplayText(w[x]);\n        P != null && (E.org = P);\n      }\n      return Object.keys(E).length > 0 ? E : void 0;\n    } catch {\n      return;\n    }\n  }, this._asn1ToNoticeNum = function(m) {\n    try {\n      for (var E = J(m, \"seq\"), w = [], x = 0; x < E.length; x++) {\n        var F = E[x];\n        w.push(parseInt(J(F, \"int.hex\"), 16));\n      }\n      return w;\n    } catch {\n      return;\n    }\n  }, this.getDisplayText = function(m) {\n    var E = { \"0c\": \"utf8\", 16: \"ia5\", \"1a\": \"vis\", \"1e\": \"bmp\" }, w = {};\n    return w.type = E[m.substr(0, 2)], w.str = Ae(i(m, 0)), w;\n  }, this.asn1ToDisplayText = function(m) {\n    if (m.utf8str != null)\n      return { type: \"utf8\", str: m.utf8str.str };\n    if (m.ia5str != null)\n      return { type: \"ia5\", str: m.ia5str.str };\n    if (m.visstr != null)\n      return { type: \"vis\", str: m.visstr.str };\n    if (m.bmpstr != null)\n      return { type: \"bmp\", str: m.bmpstr.str };\n    if (m.prnstr != null)\n      return { type: \"prn\", str: m.prnstr.str };\n  }, this.getExtPolicyMappings = function(m, E) {\n    var w = this.getCriticalExtV(\"policyMappings\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"policyMappings\" };\n      E && (x.critical = !0);\n      try {\n        for (var F = s(m), P = F.seq, T = [], H = 0; H < P.length; H++) {\n          var C = P[H].seq;\n          T.push([C[0].oid, C[1].oid]);\n        }\n        x.array = T;\n      } catch {\n        throw new b(\"malformed policyMappings\");\n      }\n      return x;\n    }\n  }, this.getExtPolicyConstraints = function(m, E) {\n    var w = this.getCriticalExtV(\"policyConstraints\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"policyConstraints\" };\n      E && (x.critical = !0);\n      var F = s(m);\n      try {\n        for (var P = F.seq, T = 0; T < P.length; T++) {\n          var H = P[T].tag;\n          H.explicit == !1 && (H.tag == \"80\" && (x.reqexp = parseInt(H.hex, 16)), H.tag == \"81\" && (x.inhibit = parseInt(H.hex, 16)));\n        }\n      } catch {\n        return new b(\"malformed policyConstraints value\");\n      }\n      return x;\n    }\n  }, this.getExtInhibitAnyPolicy = function(m, E) {\n    var w = this.getCriticalExtV(\"inhibitAnyPolicy\", m, E);\n    if (m = w[0], E = w[1], m != null) {\n      var x = { extname: \"inhibitAnyPolicy\" };\n      E && (x.critical = !0);\n      var F = l(m, 0);\n      return F == -1 ? new b(\"wrong value\") : (x.skip = F, x);\n    }\n  }, this.getExtCRLNumber = function(m, E) {\n    var w = { extname: \"cRLNumber\" };\n    if (E && (w.critical = !0), m.substr(0, 2) == \"02\")\n      return w.num = { hex: i(m, 0) }, w;\n    throw new b(\"hExtV parse error: \" + m);\n  }, this.getExtCRLReason = function(m, E) {\n    var w = { extname: \"cRLReason\" };\n    if (E && (w.critical = !0), m.substr(0, 2) == \"0a\")\n      return w.code = parseInt(i(m, 0), 16), w;\n    throw new Error(\"hExtV parse error: \" + m);\n  }, this.getExtOcspNonce = function(m, E) {\n    var w = { extname: \"ocspNonce\" };\n    E && (w.critical = !0);\n    var x = i(m, 0);\n    return w.hex = x, w;\n  }, this.getExtOcspNoCheck = function(m, E) {\n    var w = { extname: \"ocspNoCheck\" };\n    return E && (w.critical = !0), w;\n  }, this.getExtAdobeTimeStamp = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"adobeTimeStamp\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"adobeTimeStamp\" };\n    E && (x.critical = !0);\n    var F = r(m, 0);\n    if (F.length > 1) {\n      var P = n(m, F[1]), T = this.getGeneralName(P);\n      T.uri != null && (x.uri = T.uri);\n    }\n    if (F.length > 2) {\n      var H = n(m, F[2]);\n      H == \"0101ff\" && (x.reqauth = !0), H == \"010100\" && (x.reqauth = !1);\n    }\n    return x;\n  }, this.getExtSubjectDirectoryAttributes = function(m, E) {\n    if (m === void 0 && E === void 0) {\n      var w = this.getExtInfo(\"subjectDirectoryAttributes\");\n      if (w === void 0)\n        return;\n      m = n(this.hex, w.vidx), E = w.critical;\n    }\n    var x = { extname: \"subjectDirectoryAttributes\" };\n    E && (x.critical = !0);\n    try {\n      for (var F = s(m), P = [], T = 0; T < F.seq.length; T++) {\n        var H = F.seq[T], C = J(H, \"seq.0.oid\"), B = J(H, \"seq.1.set\");\n        if (C == null || B == null)\n          throw \"error\";\n        P.push({ attr: C, array: B });\n      }\n      return x.array = P, x;\n    } catch {\n      throw new Error(\"malformed subjectDirectoryAttributes extension value\");\n    }\n  };\n  var D = function(m) {\n    var E = {};\n    try {\n      var w = m.seq[0].oid, x = a.asn1.x509.OID.name2oid(w);\n      E.type = a.asn1.x509.OID.oid2atype(x);\n      var F = m.seq[1];\n      if (F.utf8str != null)\n        E.ds = \"utf8\", E.value = F.utf8str.str;\n      else if (F.numstr != null)\n        E.ds = \"num\", E.value = F.numstr.str;\n      else if (F.telstr != null)\n        E.ds = \"tel\", E.value = F.telstr.str;\n      else if (F.prnstr != null)\n        E.ds = \"prn\", E.value = F.prnstr.str;\n      else if (F.ia5str != null)\n        E.ds = \"ia5\", E.value = F.ia5str.str;\n      else if (F.visstr != null)\n        E.ds = \"vis\", E.value = F.visstr.str;\n      else if (F.bmpstr != null)\n        E.ds = \"bmp\", E.value = F.bmpstr.str;\n      else\n        throw \"error\";\n      return E;\n    } catch {\n      throw new Erorr(\"improper ASN.1 parsed AttrTypeAndValue\");\n    }\n  }, A = function(m) {\n    try {\n      return m.set.map(function(E) {\n        return D(E);\n      });\n    } catch (E) {\n      throw new Error(\"improper ASN.1 parsed RDN: \" + E);\n    }\n  }, I = function(m) {\n    try {\n      return m.seq.map(function(E) {\n        return A(E);\n      });\n    } catch (E) {\n      throw new Error(\"improper ASN.1 parsed X500Name: \" + E);\n    }\n  };\n  this.getX500NameRule = function(m) {\n    for (var E = null, w = [], x = 0; x < m.length; x++)\n      for (var F = m[x], P = 0; P < F.length; P++)\n        w.push(F[P]);\n    for (var x = 0; x < w.length; x++) {\n      var T = w[x], H = T.ds, C = T.value, B = T.type;\n      if (H != \"prn\" && H != \"utf8\" && H != \"ia5\")\n        return \"mixed\";\n      if (H == \"ia5\") {\n        if (B != \"CN\")\n          return \"mixed\";\n        if (a.lang.String.isMail(C))\n          continue;\n        return \"mixed\";\n      }\n      if (B == \"C\") {\n        if (H == \"prn\")\n          continue;\n        return \"mixed\";\n      }\n      if (E == null)\n        E = H;\n      else if (E !== H)\n        return \"mixed\";\n    }\n    return E ?? \"prn\";\n  }, this.getAttrTypeAndValue = function(m) {\n    var E = s(m);\n    return D(E);\n  }, this.getRDN = function(m) {\n    var E = s(m);\n    return A(E);\n  }, this.getX500NameArray = function(m) {\n    var E = s(m);\n    return I(E);\n  }, this.getX500Name = function(m, E, w) {\n    var x = this.getX500NameArray(m), F = this.dnarraytostr(x), P = { str: F };\n    return P.array = x, w == !0 && (P.hex = m), E == !0 && (P.canon = this.c14nRDNArray(x)), P;\n  }, this.readCertPEM = function(m) {\n    this.readCertHex(g(m));\n  }, this.readCertHex = function(m) {\n    this.hex = m, this.getVersion();\n    try {\n      y(this.hex, 0, [0, 7], \"a3\"), this.parseExt();\n    } catch {\n    }\n  }, this.getParam = function(m) {\n    var E = {};\n    return m == null && (m = {}), E.version = this.getVersion(), E.serial = { hex: this.getSerialNumberHex() }, E.sigalg = this.getSignatureAlgorithmField(), E.issuer = this.getIssuer(m.dncanon, m.dnhex), E.notbefore = this.getNotBefore(), E.notafter = this.getNotAfter(), E.subject = this.getSubject(m.dncanon, m.dnhex), E.sbjpubkey = de(this.getPublicKeyHex(), \"PUBLIC KEY\"), this.aExtInfo != null && this.aExtInfo.length > 0 && (E.ext = this.getExtParamArray()), E.sighex = this.getSignatureValueHex(), m.tbshex == !0 && (E.tbshex = p(this.hex, 0, [0])), m.nodnarray == !0 && (delete E.issuer.array, delete E.subject.array), E;\n  }, this.getExtParamArray = function(m) {\n    if (m == null) {\n      var E = v(this.hex, 0, [0, \"[3]\"]);\n      E != -1 && (m = c(this.hex, 0, [0, \"[3]\", 0], \"30\"));\n    }\n    for (var w = [], x = r(m, 0), F = 0; F < x.length; F++) {\n      var P = n(m, x[F]), T = this.getExtParam(P);\n      T != null && w.push(T);\n    }\n    return w;\n  }, this.getExtParam = function(m) {\n    var E = r(m, 0), w = E.length;\n    if (w != 2 && w != 3)\n      throw new Error(\"wrong number elements in Extension: \" + w + \" \" + m);\n    var x = d(h(m, 0, [0], \"06\")), F = !1;\n    w == 3 && p(m, 0, [1]) == \"0101ff\" && (F = !0);\n    var P = p(m, 0, [w - 1, 0]), T = void 0;\n    if (x == \"2.5.29.14\" ? T = this.getExtSubjectKeyIdentifier(P, F) : x == \"2.5.29.15\" ? T = this.getExtKeyUsage(P, F) : x == \"2.5.29.17\" ? T = this.getExtSubjectAltName(P, F) : x == \"2.5.29.18\" ? T = this.getExtIssuerAltName(P, F) : x == \"2.5.29.19\" ? T = this.getExtBasicConstraints(P, F) : x == \"2.5.29.30\" ? T = this.getExtNameConstraints(P, F) : x == \"2.5.29.31\" ? T = this.getExtCRLDistributionPoints(P, F) : x == \"2.5.29.32\" ? T = this.getExtCertificatePolicies(P, F) : x == \"2.5.29.33\" ? T = this.getExtPolicyMappings(P, F) : x == \"2.5.29.35\" ? T = this.getExtAuthorityKeyIdentifier(P, F) : x == \"2.5.29.36\" ? T = this.getExtPolicyConstraints(P, F) : x == \"2.5.29.37\" ? T = this.getExtExtKeyUsage(P, F) : x == \"2.5.29.54\" ? T = this.getExtInhibitAnyPolicy(P, F) : x == \"1.3.6.1.5.5.7.1.1\" ? T = this.getExtAuthorityInfoAccess(P, F) : x == \"2.5.29.20\" ? T = this.getExtCRLNumber(P, F) : x == \"2.5.29.21\" ? T = this.getExtCRLReason(P, F) : x == \"2.5.29.9\" ? T = this.getExtSubjectDirectoryAttributes(P, F) : x == \"1.3.6.1.5.5.7.48.1.2\" ? T = this.getExtOcspNonce(P, F) : x == \"1.3.6.1.5.5.7.48.1.5\" ? T = this.getExtOcspNoCheck(P, F) : x == \"1.2.840.113583.1.1.9.1\" ? T = this.getExtAdobeTimeStamp(P, F) : L.EXT_PARSER[x] != null && (T = L.EXT_PARSER[x](x, F, P)), T != null)\n      return T;\n    var H = { extname: x, extn: P };\n    try {\n      H.extn = s(P);\n    } catch {\n    }\n    return F && (H.critical = !0), H;\n  }, this.findExt = function(m, E) {\n    for (var w = 0; w < m.length; w++)\n      if (m[w].extname == E)\n        return m[w];\n    return null;\n  }, this.updateExtCDPFullURI = function(m, E) {\n    var w = this.findExt(m, \"cRLDistributionPoints\");\n    if (w != null && w.array != null) {\n      for (var x = w.array, F = 0; F < x.length; F++)\n        if (x[F].dpname != null && x[F].dpname.full != null)\n          for (var P = x[F].dpname.full, T = 0; T < P.length; T++) {\n            var H = P[F];\n            H.uri != null && (H.uri = E);\n          }\n    }\n  }, this.updateExtAIAOCSP = function(m, E) {\n    var w = this.findExt(m, \"authorityInfoAccess\");\n    if (w != null && w.array != null)\n      for (var x = w.array, F = 0; F < x.length; F++)\n        x[F].ocsp != null && (x[F].ocsp = E);\n  }, this.updateExtAIACAIssuer = function(m, E) {\n    var w = this.findExt(m, \"authorityInfoAccess\");\n    if (w != null && w.array != null)\n      for (var x = w.array, F = 0; F < x.length; F++)\n        x[F].caissuer != null && (x[F].caissuer = E);\n  }, this.dnarraytostr = function(m) {\n    function E(x) {\n      return x.map(function(F) {\n        return w(F).replace(/\\+/, \"\\\\+\");\n      }).join(\"+\");\n    }\n    function w(x) {\n      return x.type + \"=\" + x.value;\n    }\n    return \"/\" + m.map(function(x) {\n      return E(x).replace(/\\//, \"\\\\/\");\n    }).join(\"/\");\n  }, this.setCanonicalizedDN = function(m) {\n    var E;\n    if (m.str != null && m.array == null) {\n      var w = new a.asn1.x509.X500Name({ str: m.str }), x = w.tohex();\n      E = this.getX500NameArray(x);\n    } else\n      E = m.array;\n    m.canon == null && (m.canon = this.c14nRDNArray(E));\n  }, this.c14nRDNArray = function(m) {\n    for (var E = [], w = 0; w < m.length; w++) {\n      for (var x = m[w], F = [], P = 0; P < x.length; P++) {\n        var T = x[P], H = T.value;\n        H = H.replace(/^\\s*/, \"\"), H = H.replace(/\\s*$/, \"\"), H = H.replace(/\\s+/g, \" \"), H = H.toLowerCase(), F.push(T.type.toLowerCase() + \"=\" + H);\n      }\n      E.push(F.join(\"+\"));\n    }\n    return \"/\" + E.join(\"/\");\n  }, this.getInfo = function() {\n    var m = function(ce) {\n      for (var M = \"\", G = \"    \", Q = `\n`, ee = ce.array, pe = 0; pe < ee.length; pe++) {\n        var te = ee[pe];\n        if (te.dn != null && (M += G + \"dn: \" + te.dn.str + Q), te.ip != null && (M += G + \"ip: \" + te.ip + Q), te.rfc822 != null && (M += G + \"rfc822: \" + te.rfc822 + Q), te.dns != null && (M += G + \"dns: \" + te.dns + Q), te.uri != null && (M += G + \"uri: \" + te.uri + Q), te.other != null) {\n          var Me = te.other.oid, Ne = JSON.stringify(te.other.value).replace(/\\\"/g, \"\");\n          M += G + \"other: \" + Me + \"=\" + Ne + Q;\n        }\n      }\n      return M = M.replace(/\\n$/, \"\"), M;\n    }, E = function(ce) {\n      for (var M = \"\", G = ce.array, Q = 0; Q < G.length; Q++) {\n        var ee = G[Q];\n        if (M += \"    policy oid: \" + ee.policyoid + `\n`, ee.array !== void 0)\n          for (var pe = 0; pe < ee.array.length; pe++) {\n            var te = ee.array[pe];\n            te.cps !== void 0 && (M += \"    cps: \" + te.cps + `\n`);\n          }\n      }\n      return M;\n    }, w = function(ce) {\n      for (var M = \"\", G = ce.array, Q = 0; Q < G.length; Q++) {\n        var ee = G[Q];\n        try {\n          ee.dpname.full[0].uri !== void 0 && (M += \"    \" + ee.dpname.full[0].uri + `\n`);\n        } catch {\n        }\n        try {\n          ee.dname.full[0].dn.hex !== void 0 && (M += \"    \" + L.hex2dn(ee.dpname.full[0].dn.hex) + `\n`);\n        } catch {\n        }\n      }\n      return M;\n    }, x = function(ce) {\n      for (var M = \"\", G = ce.array, Q = 0; Q < G.length; Q++) {\n        var ee = G[Q];\n        ee.caissuer !== void 0 && (M += \"    caissuer: \" + ee.caissuer + `\n`), ee.ocsp !== void 0 && (M += \"    ocsp: \" + ee.ocsp + `\n`);\n      }\n      return M;\n    }, F, P, T;\n    if (F = `Basic Fields\n`, F += \"  serial number: \" + this.getSerialNumberHex() + `\n`, F += \"  signature algorithm: \" + this.getSignatureAlgorithmField() + `\n`, F += \"  issuer: \" + this.getIssuerString() + `\n`, F += \"  notBefore: \" + this.getNotBefore() + `\n`, F += \"  notAfter: \" + this.getNotAfter() + `\n`, F += \"  subject: \" + this.getSubjectString() + `\n`, F += `  subject public key info: \n`, P = this.getPublicKey(), F += \"    key algorithm: \" + P.type + `\n`, P.type === \"RSA\" && (F += \"    n=\" + xt(P.n.toString(16)).substr(0, 16) + `...\n`, F += \"    e=\" + xt(P.e.toString(16)) + `\n`), T = this.aExtInfo, T != null) {\n      F += `X509v3 Extensions:\n`;\n      for (var H = 0; H < T.length; H++) {\n        var C = T[H], B = a.asn1.x509.OID.oid2name(C.oid);\n        B === \"\" && (B = C.oid);\n        var O = \"\";\n        if (C.critical === !0 && (O = \"CRITICAL\"), F += \"  \" + B + \" \" + O + `:\n`, B === \"basicConstraints\") {\n          var j = this.getExtBasicConstraints();\n          j.cA === void 0 ? F += `    {}\n` : (F += \"    cA=true\", j.pathLen !== void 0 && (F += \", pathLen=\" + j.pathLen), F += `\n`);\n        } else if (B == \"policyMappings\") {\n          var fe = this.getExtPolicyMappings().array, Z = fe.map(function(ce) {\n            var M = ce;\n            return M[0] + \":\" + M[1];\n          }).join(\", \");\n          F += \"    \" + Z + `\n`;\n        } else if (B == \"policyConstraints\") {\n          var X = this.getExtPolicyConstraints();\n          F += \"    \", X.reqexp != null && (F += \" reqexp=\" + X.reqexp), X.inhibit != null && (F += \" inhibit=\" + X.inhibit), F += `\n`;\n        } else if (B == \"inhibitAnyPolicy\") {\n          var X = this.getExtInhibitAnyPolicy();\n          F += \"    skip=\" + X.skip + `\n`;\n        } else if (B == \"keyUsage\")\n          F += \"    \" + this.getExtKeyUsageString() + `\n`;\n        else if (B == \"subjectKeyIdentifier\")\n          F += \"    \" + this.getExtSubjectKeyIdentifier().kid.hex + `\n`;\n        else if (B == \"authorityKeyIdentifier\") {\n          var re = this.getExtAuthorityKeyIdentifier();\n          re.kid !== void 0 && (F += \"    kid=\" + re.kid.hex + `\n`);\n        } else if (B == \"extKeyUsage\") {\n          var ne = this.getExtExtKeyUsage().array;\n          F += \"    \" + ne.join(\", \") + `\n`;\n        } else if (B == \"subjectAltName\") {\n          var he = m(this.getExtSubjectAltName());\n          F += he + `\n`;\n        } else if (B == \"cRLDistributionPoints\") {\n          var se = this.getExtCRLDistributionPoints();\n          F += w(se);\n        } else if (B == \"authorityInfoAccess\") {\n          var ke = this.getExtAuthorityInfoAccess();\n          F += x(ke);\n        } else\n          B == \"certificatePolicies\" && (F += E(this.getExtCertificatePolicies()));\n      }\n    }\n    return F += \"signature algorithm: \" + this.getSignatureAlgorithmName() + `\n`, F += \"signature: \" + this.getSignatureValueHex().substr(0, 16) + `...\n`, F;\n  }, typeof e == \"string\" && (e.indexOf(\"-----BEGIN\") != -1 ? this.readCertPEM(e) : a.lang.String.isHex(e) && this.readCertHex(e));\n}\nL.EXT_PARSER = {};\nL.registExtParser = function(e, t) {\n  L.EXT_PARSER[e] = t;\n};\nL.hex2dn = function(e, t) {\n  t === void 0 && (t = 0);\n  var r = new L();\n  V.getTLV(e, t);\n  var i = r.getX500Name(e);\n  return i.str;\n};\nL.hex2rdn = function(e, t) {\n  if (t === void 0 && (t = 0), e.substr(t, 2) !== \"31\")\n    throw new Error(\"malformed RDN\");\n  for (var r = new Array(), i = V.getChildIdx(e, t), s = 0; s < i.length; s++)\n    r.push(L.hex2attrTypeValue(e, i[s]));\n  return r = r.map(function(n) {\n    return n.replace(\"+\", \"\\\\+\");\n  }), r.join(\"+\");\n};\nL.hex2attrTypeValue = function(e, t) {\n  var r = V, i = r.getV;\n  if (t === void 0 && (t = 0), e.substr(t, 2) !== \"30\")\n    throw new Error(\"malformed attribute type and value\");\n  var s = r.getChildIdx(e, t);\n  s.length !== 2 || e.substr(s[0], 2);\n  var n = i(e, s[0]), h = a.asn1.ASN1Util.oidHexToInt(n), u = a.asn1.x509.OID.oid2atype(h), p = i(e, s[1]), c = Ae(p);\n  return u + \"=\" + c;\n};\nL.getPublicKeyFromCertHex = function(e) {\n  var t = new L();\n  return t.readCertHex(e), t.getPublicKey();\n};\nL.getPublicKeyFromCertPEM = function(e) {\n  var t = new L();\n  return t.readCertPEM(e), t.getPublicKey();\n};\nL.getPublicKeyInfoPropOfCertPEM = function(e) {\n  var t = V, r = t.getVbyList, i = {}, s, n;\n  return i.algparam = null, s = new L(), s.readCertPEM(e), n = s.getPublicKeyHex(), i.keyhex = r(n, 0, [1], \"03\").substr(2), i.algoid = r(n, 0, [0, 0], \"06\"), i.algoid === \"2a8648ce3d0201\" && (i.algparam = r(n, 0, [0, 1], \"06\")), i;\n};\nL.KEYUSAGE_NAME = [\"digitalSignature\", \"nonRepudiation\", \"keyEncipherment\", \"dataEncipherment\", \"keyAgreement\", \"keyCertSign\", \"cRLSign\", \"encipherOnly\", \"decipherOnly\"];\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.jws > \"u\" || !a.jws) && (a.jws = {});\na.jws.JWS = function() {\n  var e = a, t = e.jws.JWS, r = t.isSafeJSONString;\n  this.parseJWS = function(i, s) {\n    if (!(this.parsedJWS !== void 0 && (s || this.parsedJWS.sigvalH !== void 0))) {\n      var n = i.match(/^([^.]+)\\.([^.]+)\\.([^.]+)$/);\n      if (n == null)\n        throw \"JWS signature is not a form of 'Head.Payload.SigValue'.\";\n      var h = n[1], u = n[2], p = n[3], c = h + \".\" + u;\n      if (this.parsedJWS = {}, this.parsedJWS.headB64U = h, this.parsedJWS.payloadB64U = u, this.parsedJWS.sigvalB64U = p, this.parsedJWS.si = c, !s) {\n        var y = Y(p), v = ve(y, 16);\n        this.parsedJWS.sigvalH = y, this.parsedJWS.sigvalBI = v;\n      }\n      var o = we(h), l = we(u);\n      if (this.parsedJWS.headS = o, this.parsedJWS.payloadS = l, !r(o, this.parsedJWS, \"headP\"))\n        throw \"malformed JSON string for JWS Head: \" + o;\n    }\n  };\n};\na.jws.JWS.sign = function(e, t, r, i, s) {\n  var n = a, h = n.jws, u = h.JWS, p = u.readSafeJSONString, c = u.isSafeJSONString, y = n.crypto;\n  y.ECDSA;\n  var v = y.Mac, o = y.Signature, l = JSON, f, d, g;\n  if (typeof t != \"string\" && typeof t != \"object\")\n    throw \"spHeader must be JSON string or object: \" + t;\n  if (typeof t == \"object\" && (d = t, f = l.stringify(d)), typeof t == \"string\") {\n    if (f = t, !c(f))\n      throw \"JWS Head is not safe JSON string: \" + f;\n    d = p(f);\n  }\n  if (g = r, typeof r == \"object\" && (g = l.stringify(r)), (e == \"\" || e == null) && d.alg !== void 0 && (e = d.alg), e != \"\" && e != null && d.alg === void 0 && (d.alg = e, f = l.stringify(d)), e !== d.alg)\n    throw \"alg and sHeader.alg doesn't match: \" + e + \"!=\" + d.alg;\n  var S = null;\n  if (u.jwsalg2sigalg[e] === void 0)\n    throw \"unsupported alg name: \" + e;\n  S = u.jwsalg2sigalg[e];\n  var b = Je(f), D = Je(g), A = b + \".\" + D, I = \"\";\n  if (S.substr(0, 4) == \"Hmac\") {\n    if (i === void 0)\n      throw \"mac key shall be specified for HS* alg\";\n    var m = new v({ alg: S, prov: \"cryptojs\", pass: i });\n    m.updateString(A), I = m.doFinal();\n  } else if (S.indexOf(\"withECDSA\") != -1) {\n    var E = new o({ alg: S });\n    E.init(i, s), E.updateString(A);\n    var w = E.sign();\n    I = a.crypto.ECDSA.asn1SigToConcatSig(w);\n  } else if (S != \"none\") {\n    var E = new o({ alg: S });\n    E.init(i, s), E.updateString(A), I = E.sign();\n  }\n  var x = ae(I);\n  return A + \".\" + x;\n};\na.jws.JWS.verify = function(e, t, r) {\n  var i = a, s = i.jws, n = s.JWS, h = n.readSafeJSONString, u = i.crypto, p = u.ECDSA, c = u.Mac, y = u.Signature, v;\n  if (typeof q !== void 0 && (v = q), !Ht(e))\n    return !1;\n  var o = e.split(\".\");\n  if (o.length !== 3)\n    return !1;\n  var l = o[0], f = o[1], d = l + \".\" + f, g = Y(o[2]), S = h(we(o[0])), b = null, D = null;\n  if (S.alg === void 0)\n    throw \"algorithm not specified in header\";\n  if (b = S.alg, D = b.substr(0, 2), r != null && Object.prototype.toString.call(r) === \"[object Array]\" && r.length > 0) {\n    var A = \":\" + r.join(\":\") + \":\";\n    if (A.indexOf(\":\" + b + \":\") == -1)\n      throw \"algorithm '\" + b + \"' not accepted in the list\";\n  }\n  if (b != \"none\" && t === null)\n    throw \"key shall be specified to verify.\";\n  if (typeof t == \"string\" && t.indexOf(\"-----BEGIN \") != -1 && (t = k.getKey(t)), (D == \"RS\" || D == \"PS\") && !(t instanceof v))\n    throw \"key shall be a RSAKey obj for RS* and PS* algs\";\n  if (D == \"ES\" && !(t instanceof p))\n    throw \"key shall be a ECDSA obj for ES* algs\";\n  var I = null;\n  if (n.jwsalg2sigalg[S.alg] === void 0)\n    throw \"unsupported alg name: \" + b;\n  if (I = n.jwsalg2sigalg[b], I == \"none\")\n    throw \"not supported\";\n  if (I.substr(0, 4) == \"Hmac\") {\n    var m = null;\n    if (t === void 0)\n      throw \"hexadecimal key shall be specified for HMAC\";\n    var E = new c({ alg: I, pass: t });\n    return E.updateString(d), m = E.doFinal(), g == m;\n  } else if (I.indexOf(\"withECDSA\") != -1) {\n    var w = null;\n    try {\n      w = p.concatSigToASN1Sig(g);\n    } catch {\n      return !1;\n    }\n    var x = new y({ alg: I });\n    return x.init(t), x.updateString(d), x.verify(w);\n  } else {\n    var x = new y({ alg: I });\n    return x.init(t), x.updateString(d), x.verify(g);\n  }\n};\na.jws.JWS.parse = function(e) {\n  var t = e.split(\".\"), r = {}, i, s, n;\n  if (t.length != 2 && t.length != 3)\n    throw \"malformed sJWS: wrong number of '.' splitted elements\";\n  return i = t[0], s = t[1], t.length == 3 && (n = t[2]), r.headerObj = a.jws.JWS.readSafeJSONString(we(i)), r.payloadObj = a.jws.JWS.readSafeJSONString(we(s)), r.headerPP = JSON.stringify(r.headerObj, null, \"  \"), r.payloadObj == null ? r.payloadPP = we(s) : r.payloadPP = JSON.stringify(r.payloadObj, null, \"  \"), n !== void 0 && (r.sigHex = Y(n)), r;\n};\na.jws.JWS.verifyJWT = function(e, t, r) {\n  var i = a, s = i.jws, n = s.JWS, h = n.readSafeJSONString, u = n.inArray, p = n.includedArray;\n  if (!Ht(e))\n    return !1;\n  var c = e.split(\".\");\n  if (c.length != 3)\n    return !1;\n  var y = c[0], v = c[1];\n  Y(c[2]);\n  var o = h(we(y)), l = h(we(v));\n  if (o.alg === void 0)\n    return !1;\n  if (r.alg === void 0)\n    throw \"acceptField.alg shall be specified\";\n  if (!u(o.alg, r.alg) || l.iss !== void 0 && typeof r.iss == \"object\" && !u(l.iss, r.iss) || l.sub !== void 0 && typeof r.sub == \"object\" && !u(l.sub, r.sub))\n    return !1;\n  if (l.aud !== void 0 && typeof r.aud == \"object\") {\n    if (typeof l.aud == \"string\") {\n      if (!u(l.aud, r.aud))\n        return !1;\n    } else if (typeof l.aud == \"object\" && !p(l.aud, r.aud))\n      return !1;\n  }\n  var f = s.IntDate.getNow();\n  return r.verifyAt !== void 0 && typeof r.verifyAt == \"number\" && (f = r.verifyAt), (r.gracePeriod === void 0 || typeof r.gracePeriod != \"number\") && (r.gracePeriod = 0), !(l.exp !== void 0 && typeof l.exp == \"number\" && l.exp + r.gracePeriod < f || l.nbf !== void 0 && typeof l.nbf == \"number\" && f < l.nbf - r.gracePeriod || l.iat !== void 0 && typeof l.iat == \"number\" && f < l.iat - r.gracePeriod || l.jti !== void 0 && r.jti !== void 0 && l.jti !== r.jti || !n.verify(e, t, r.alg));\n};\na.jws.JWS.includedArray = function(e, t) {\n  var r = a.jws.JWS.inArray;\n  if (e === null || typeof e != \"object\" || typeof e.length != \"number\")\n    return !1;\n  for (var i = 0; i < e.length; i++)\n    if (!r(e[i], t))\n      return !1;\n  return !0;\n};\na.jws.JWS.inArray = function(e, t) {\n  if (t === null || typeof t != \"object\" || typeof t.length != \"number\")\n    return !1;\n  for (var r = 0; r < t.length; r++)\n    if (t[r] == e)\n      return !0;\n  return !1;\n};\na.jws.JWS.jwsalg2sigalg = { HS256: \"HmacSHA256\", HS384: \"HmacSHA384\", HS512: \"HmacSHA512\", RS256: \"SHA256withRSA\", RS384: \"SHA384withRSA\", RS512: \"SHA512withRSA\", ES256: \"SHA256withECDSA\", ES384: \"SHA384withECDSA\", ES512: \"SHA512withECDSA\", PS256: \"SHA256withRSAandMGF1\", PS384: \"SHA384withRSAandMGF1\", PS512: \"SHA512withRSAandMGF1\", none: \"none\" };\na.jws.JWS.isSafeJSONString = function(e, t, r) {\n  var i = null;\n  try {\n    return i = Pt(e), typeof i != \"object\" || i.constructor === Array ? 0 : (t && (t[r] = i), 1);\n  } catch {\n    return 0;\n  }\n};\na.jws.JWS.readSafeJSONString = function(e) {\n  var t = null;\n  try {\n    return t = Pt(e), typeof t != \"object\" || t.constructor === Array ? null : t;\n  } catch {\n    return null;\n  }\n};\na.jws.JWS.getEncodedSignatureValueFromJWS = function(e) {\n  var t = e.match(/^[^.]+\\.[^.]+\\.([^.]+)$/);\n  if (t == null)\n    throw \"JWS signature is not a form of 'Head.Payload.SigValue'.\";\n  return t[1];\n};\na.jws.JWS.getJWKthumbprint = function(e) {\n  if (e.kty !== \"RSA\" && e.kty !== \"EC\" && e.kty !== \"oct\")\n    throw \"unsupported algorithm for JWK Thumprint\";\n  var t = \"{\";\n  if (e.kty === \"RSA\") {\n    if (typeof e.n != \"string\" || typeof e.e != \"string\")\n      throw \"wrong n and e value for RSA key\";\n    t += '\"e\":\"' + e.e + '\",', t += '\"kty\":\"' + e.kty + '\",', t += '\"n\":\"' + e.n + '\"}';\n  } else if (e.kty === \"EC\") {\n    if (typeof e.crv != \"string\" || typeof e.x != \"string\" || typeof e.y != \"string\")\n      throw \"wrong crv, x and y value for EC key\";\n    t += '\"crv\":\"' + e.crv + '\",', t += '\"kty\":\"' + e.kty + '\",', t += '\"x\":\"' + e.x + '\",', t += '\"y\":\"' + e.y + '\"}';\n  } else if (e.kty === \"oct\") {\n    if (typeof e.k != \"string\")\n      throw \"wrong k value for oct(symmetric) key\";\n    t += '\"kty\":\"' + e.kty + '\",', t += '\"k\":\"' + e.k + '\"}';\n  }\n  var r = Pe(t), i = a.crypto.Util.hashHex(r, \"sha256\"), s = ae(i);\n  return s;\n};\na.jws.IntDate = {};\na.jws.IntDate.get = function(e) {\n  var t = a.jws.IntDate, r = t.getNow, i = t.getZulu;\n  if (e == \"now\")\n    return r();\n  if (e == \"now + 1hour\")\n    return r() + 60 * 60;\n  if (e == \"now + 1day\")\n    return r() + 60 * 60 * 24;\n  if (e == \"now + 1month\")\n    return r() + 60 * 60 * 24 * 30;\n  if (e == \"now + 1year\")\n    return r() + 60 * 60 * 24 * 365;\n  if (e.match(/Z$/))\n    return i(e);\n  if (e.match(/^[0-9]+$/))\n    return parseInt(e);\n  throw \"unsupported format: \" + e;\n};\na.jws.IntDate.getZulu = function(e) {\n  return gn(e);\n};\na.jws.IntDate.getNow = function() {\n  var e = ~~(/* @__PURE__ */ new Date() / 1e3);\n  return e;\n};\na.jws.IntDate.intDate2UTCString = function(e) {\n  var t = new Date(e * 1e3);\n  return t.toUTCString();\n};\na.jws.IntDate.intDate2Zulu = function(e) {\n  var t = new Date(e * 1e3), r = (\"0000\" + t.getUTCFullYear()).slice(-4), i = (\"00\" + (t.getUTCMonth() + 1)).slice(-2), s = (\"00\" + t.getUTCDate()).slice(-2), n = (\"00\" + t.getUTCHours()).slice(-2), h = (\"00\" + t.getUTCMinutes()).slice(-2), u = (\"00\" + t.getUTCSeconds()).slice(-2);\n  return r + i + s + n + h + u + \"Z\";\n};\n(typeof a > \"u\" || !a) && (a = {});\n(typeof a.jws > \"u\" || !a.jws) && (a.jws = {});\na.jws.JWSJS = function() {\n  var e = a, t = e.jws, r = t.JWS, i = r.readSafeJSONString;\n  this.aHeader = [], this.sPayload = \"\", this.aSignature = [], this.init = function() {\n    this.aHeader = [], this.sPayload = void 0, this.aSignature = [];\n  }, this.initWithJWS = function(s) {\n    this.init();\n    var n = s.split(\".\");\n    if (n.length != 3)\n      throw \"malformed input JWS\";\n    this.aHeader.push(n[0]), this.sPayload = n[1], this.aSignature.push(n[2]);\n  }, this.addSignature = function(s, n, h, u) {\n    if (this.sPayload === void 0 || this.sPayload === null)\n      throw \"there's no JSON-JS signature to add.\";\n    var p = this.aHeader.length;\n    if (this.aHeader.length != this.aSignature.length)\n      throw \"aHeader.length != aSignature.length\";\n    try {\n      var c = a.jws.JWS.sign(s, n, this.sPayload, h, u), y = c.split(\".\"), v = y[0], o = y[2];\n      this.aHeader.push(y[0]), this.aSignature.push(y[2]);\n    } catch (l) {\n      throw this.aHeader.length > p && this.aHeader.pop(), this.aSignature.length > p && this.aSignature.pop(), \"addSignature failed: \" + l;\n    }\n  }, this.verifyAll = function(s) {\n    if (this.aHeader.length !== s.length || this.aSignature.length !== s.length)\n      return !1;\n    for (var n = 0; n < s.length; n++) {\n      var h = s[n];\n      if (h.length !== 2)\n        return !1;\n      var u = this.verifyNth(n, h[0], h[1]);\n      if (u === !1)\n        return !1;\n    }\n    return !0;\n  }, this.verifyNth = function(s, n, h) {\n    if (this.aHeader.length <= s || this.aSignature.length <= s)\n      return !1;\n    var u = this.aHeader[s], p = this.aSignature[s], c = u + \".\" + this.sPayload + \".\" + p, y = !1;\n    try {\n      y = r.verify(c, n, h);\n    } catch {\n      return !1;\n    }\n    return y;\n  }, this.readJWSJS = function(s) {\n    if (typeof s == \"string\") {\n      var n = i(s);\n      if (n == null)\n        throw \"argument is not safe JSON object string\";\n      this.aHeader = n.headers, this.sPayload = n.payload, this.aSignature = n.signatures;\n    } else\n      try {\n        if (s.headers.length > 0)\n          this.aHeader = s.headers;\n        else\n          throw \"malformed header\";\n        if (typeof s.payload == \"string\")\n          this.sPayload = s.payload;\n        else\n          throw \"malformed signatures\";\n        if (s.signatures.length > 0)\n          this.aSignature = s.signatures;\n        else\n          throw \"malformed signatures\";\n      } catch (h) {\n        throw \"malformed JWS-JS JSON object: \" + h;\n      }\n  }, this.getJSON = function() {\n    return { headers: this.aHeader, payload: this.sPayload, signatures: this.aSignature };\n  }, this.isEmpty = function() {\n    return this.aHeader.length == 0 ? 1 : 0;\n  };\n};\na.crypto.ECDSA;\na.crypto.DSA;\na.crypto.Signature;\na.crypto.MessageDigest;\na.crypto.Mac;\nvar wn = k, Fn = we, bn = a;\na.crypto;\na.asn1;\na.jws;\na.lang;\nconst An = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  KEYUTIL: wn,\n  KJUR: bn,\n  b64utoutf8: Fn\n}, Symbol.toStringTag, { value: \"Module\" }));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtpbmRlL2p3dC12YWxpZGF0b3IvZGlzdC9qc3JzYXNpZ24tQjJnWklKaFkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRyxpQ0FBaUM7QUFDcEM7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsNEJBQTRCLE9BQU87QUFDbkM7QUFDQTtBQUNBLEtBQUssaUJBQWlCLGdCQUFnQjtBQUN0Qyx5REFBeUQsT0FBTztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCwwQ0FBMEMsT0FBTztBQUNqRDtBQUNBO0FBQ0EsS0FBSyxtQkFBbUI7QUFDeEIseURBQXlELE9BQU87QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMENBQTBDLE9BQU87QUFDakQ7QUFDQTtBQUNBLEtBQUssaUJBQWlCO0FBQ3RCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEtBQUssNENBQTRDO0FBQ2pEO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLHlHQUF5RztBQUM1Ryxp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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsT0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixPQUFPO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxRQUFRO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxjQUFjO0FBQzNCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFdBQVcsMEJBQTBCLFdBQVcsMkJB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Q0EsMEJBQTBCLE9BQU87QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGNBQWM7QUFDNUI7QUFDQSxTQUFTLGNBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsY0FBYztBQUM1QjtBQUNBO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esb0JBQW9CLDhEQUE4RDtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0Es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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdCQUF3QixpQkFBaUI7QUFHeEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdHVkZW50LWF0dGVuZGFuY2UtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGtpbmRlL2p3dC12YWxpZGF0b3IvZGlzdC9qc3JzYXNpZ24tQjJnWklKaFkuanM/YzIyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVWUgPSB7fTtcblVlLnVzZXJBZ2VudCA9ICExO1xudmFyIFZlID0ge307XG4vKiEgQ3J5cHRvSlMgdjMuMS4yIGNvcmUtZml4LmpzXG4gKiBjb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanNcbiAqIChjKSAyMDA5LTIwMTMgYnkgSmVmZiBNb3R0LiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogY29kZS5nb29nbGUuY29tL3AvY3J5cHRvLWpzL3dpa2kvTGljZW5zZVxuICogVEhJUyBJUyBGSVggb2YgJ2NvcmUuanMnIHRvIGZpeCBIbWFjIGlzc3VlLlxuICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jcnlwdG8tanMvaXNzdWVzL2RldGFpbD9pZD04NFxuICogaHR0cHM6Ly9jcnlwdG8tanMuZ29vZ2xlY29kZS5jb20vc3ZuLWhpc3RvcnkvcjY2Ny9icmFuY2hlcy8zLngvc3JjL2NvcmUuanNcbiAqL1xudmFyIEsgPSBLIHx8IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSB7fSwgaSA9IHIubGliID0ge30sIHMgPSBpLkJhc2UgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gbygpIHtcbiAgICB9XG4gICAgcmV0dXJuIHsgZXh0ZW5kOiBmdW5jdGlvbihsKSB7XG4gICAgICBvLnByb3RvdHlwZSA9IHRoaXM7XG4gICAgICB2YXIgZiA9IG5ldyBvKCk7XG4gICAgICByZXR1cm4gbCAmJiBmLm1peEluKGwpLCBmLmhhc093blByb3BlcnR5KFwiaW5pdFwiKSB8fCAoZi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGYuJHN1cGVyLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pLCBmLmluaXQucHJvdG90eXBlID0gZiwgZi4kc3VwZXIgPSB0aGlzLCBmO1xuICAgIH0sIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbCA9IHRoaXMuZXh0ZW5kKCk7XG4gICAgICByZXR1cm4gbC5pbml0LmFwcGx5KGwsIGFyZ3VtZW50cyksIGw7XG4gICAgfSwgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgfSwgbWl4SW46IGZ1bmN0aW9uKGwpIHtcbiAgICAgIGZvciAodmFyIGYgaW4gbClcbiAgICAgICAgbC5oYXNPd25Qcm9wZXJ0eShmKSAmJiAodGhpc1tmXSA9IGxbZl0pO1xuICAgICAgbC5oYXNPd25Qcm9wZXJ0eShcInRvU3RyaW5nXCIpICYmICh0aGlzLnRvU3RyaW5nID0gbC50b1N0cmluZyk7XG4gICAgfSwgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpO1xuICAgIH0gfTtcbiAgfSgpLCBuID0gaS5Xb3JkQXJyYXkgPSBzLmV4dGVuZCh7IGluaXQ6IGZ1bmN0aW9uKG8sIGwpIHtcbiAgICBvID0gdGhpcy53b3JkcyA9IG8gfHwgW10sIGwgIT0gdCA/IHRoaXMuc2lnQnl0ZXMgPSBsIDogdGhpcy5zaWdCeXRlcyA9IG8ubGVuZ3RoICogNDtcbiAgfSwgdG9TdHJpbmc6IGZ1bmN0aW9uKG8pIHtcbiAgICByZXR1cm4gKG8gfHwgdSkuc3RyaW5naWZ5KHRoaXMpO1xuICB9LCBjb25jYXQ6IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbCA9IHRoaXMud29yZHMsIGYgPSBvLndvcmRzLCBkID0gdGhpcy5zaWdCeXRlcywgZyA9IG8uc2lnQnl0ZXM7XG4gICAgaWYgKHRoaXMuY2xhbXAoKSwgZCAlIDQpXG4gICAgICBmb3IgKHZhciBTID0gMDsgUyA8IGc7IFMrKykge1xuICAgICAgICB2YXIgYiA9IGZbUyA+Pj4gMl0gPj4+IDI0IC0gUyAlIDQgKiA4ICYgMjU1O1xuICAgICAgICBsW2QgKyBTID4+PiAyXSB8PSBiIDw8IDI0IC0gKGQgKyBTKSAlIDQgKiA4O1xuICAgICAgfVxuICAgIGVsc2VcbiAgICAgIGZvciAodmFyIFMgPSAwOyBTIDwgZzsgUyArPSA0KVxuICAgICAgICBsW2QgKyBTID4+PiAyXSA9IGZbUyA+Pj4gMl07XG4gICAgcmV0dXJuIHRoaXMuc2lnQnl0ZXMgKz0gZywgdGhpcztcbiAgfSwgY2xhbXA6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvID0gdGhpcy53b3JkcywgbCA9IHRoaXMuc2lnQnl0ZXM7XG4gICAgb1tsID4+PiAyXSAmPSA0Mjk0OTY3Mjk1IDw8IDMyIC0gbCAlIDQgKiA4LCBvLmxlbmd0aCA9IGUuY2VpbChsIC8gNCk7XG4gIH0sIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IHMuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gby53b3JkcyA9IHRoaXMud29yZHMuc2xpY2UoMCksIG87XG4gIH0sIHJhbmRvbTogZnVuY3Rpb24obykge1xuICAgIGZvciAodmFyIGwgPSBbXSwgZiA9IDA7IGYgPCBvOyBmICs9IDQpXG4gICAgICBsLnB1c2goZS5yYW5kb20oKSAqIDQyOTQ5NjcyOTYgfCAwKTtcbiAgICByZXR1cm4gbmV3IG4uaW5pdChsLCBvKTtcbiAgfSB9KSwgaCA9IHIuZW5jID0ge30sIHUgPSBoLkhleCA9IHsgc3RyaW5naWZ5OiBmdW5jdGlvbihvKSB7XG4gICAgZm9yICh2YXIgbCA9IG8ud29yZHMsIGYgPSBvLnNpZ0J5dGVzLCBkID0gW10sIGcgPSAwOyBnIDwgZjsgZysrKSB7XG4gICAgICB2YXIgUyA9IGxbZyA+Pj4gMl0gPj4+IDI0IC0gZyAlIDQgKiA4ICYgMjU1O1xuICAgICAgZC5wdXNoKChTID4+PiA0KS50b1N0cmluZygxNikpLCBkLnB1c2goKFMgJiAxNSkudG9TdHJpbmcoMTYpKTtcbiAgICB9XG4gICAgcmV0dXJuIGQuam9pbihcIlwiKTtcbiAgfSwgcGFyc2U6IGZ1bmN0aW9uKG8pIHtcbiAgICBmb3IgKHZhciBsID0gby5sZW5ndGgsIGYgPSBbXSwgZCA9IDA7IGQgPCBsOyBkICs9IDIpXG4gICAgICBmW2QgPj4+IDNdIHw9IHBhcnNlSW50KG8uc3Vic3RyKGQsIDIpLCAxNikgPDwgMjQgLSBkICUgOCAqIDQ7XG4gICAgcmV0dXJuIG5ldyBuLmluaXQoZiwgbCAvIDIpO1xuICB9IH0sIHAgPSBoLkxhdGluMSA9IHsgc3RyaW5naWZ5OiBmdW5jdGlvbihvKSB7XG4gICAgZm9yICh2YXIgbCA9IG8ud29yZHMsIGYgPSBvLnNpZ0J5dGVzLCBkID0gW10sIGcgPSAwOyBnIDwgZjsgZysrKSB7XG4gICAgICB2YXIgUyA9IGxbZyA+Pj4gMl0gPj4+IDI0IC0gZyAlIDQgKiA4ICYgMjU1O1xuICAgICAgZC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoUykpO1xuICAgIH1cbiAgICByZXR1cm4gZC5qb2luKFwiXCIpO1xuICB9LCBwYXJzZTogZnVuY3Rpb24obykge1xuICAgIGZvciAodmFyIGwgPSBvLmxlbmd0aCwgZiA9IFtdLCBkID0gMDsgZCA8IGw7IGQrKylcbiAgICAgIGZbZCA+Pj4gMl0gfD0gKG8uY2hhckNvZGVBdChkKSAmIDI1NSkgPDwgMjQgLSBkICUgNCAqIDg7XG4gICAgcmV0dXJuIG5ldyBuLmluaXQoZiwgbCk7XG4gIH0gfSwgYyA9IGguVXRmOCA9IHsgc3RyaW5naWZ5OiBmdW5jdGlvbihvKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHAuc3RyaW5naWZ5KG8pKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgVVRGLTggZGF0YVwiKTtcbiAgICB9XG4gIH0sIHBhcnNlOiBmdW5jdGlvbihvKSB7XG4gICAgcmV0dXJuIHAucGFyc2UodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KG8pKSk7XG4gIH0gfSwgeSA9IGkuQnVmZmVyZWRCbG9ja0FsZ29yaXRobSA9IHMuZXh0ZW5kKHsgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2RhdGEgPSBuZXcgbi5pbml0KCksIHRoaXMuX25EYXRhQnl0ZXMgPSAwO1xuICB9LCBfYXBwZW5kOiBmdW5jdGlvbihvKSB7XG4gICAgdHlwZW9mIG8gPT0gXCJzdHJpbmdcIiAmJiAobyA9IGMucGFyc2UobykpLCB0aGlzLl9kYXRhLmNvbmNhdChvKSwgdGhpcy5fbkRhdGFCeXRlcyArPSBvLnNpZ0J5dGVzO1xuICB9LCBfcHJvY2VzczogZnVuY3Rpb24obykge1xuICAgIHZhciBsID0gdGhpcy5fZGF0YSwgZiA9IGwud29yZHMsIGQgPSBsLnNpZ0J5dGVzLCBnID0gdGhpcy5ibG9ja1NpemUsIFMgPSBnICogNCwgYiA9IGQgLyBTO1xuICAgIG8gPyBiID0gZS5jZWlsKGIpIDogYiA9IGUubWF4KChiIHwgMCkgLSB0aGlzLl9taW5CdWZmZXJTaXplLCAwKTtcbiAgICB2YXIgRCA9IGIgKiBnLCBBID0gZS5taW4oRCAqIDQsIGQpO1xuICAgIGlmIChEKSB7XG4gICAgICBmb3IgKHZhciBJID0gMDsgSSA8IEQ7IEkgKz0gZylcbiAgICAgICAgdGhpcy5fZG9Qcm9jZXNzQmxvY2soZiwgSSk7XG4gICAgICB2YXIgbSA9IGYuc3BsaWNlKDAsIEQpO1xuICAgICAgbC5zaWdCeXRlcyAtPSBBO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IG4uaW5pdChtLCBBKTtcbiAgfSwgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvID0gcy5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIHJldHVybiBvLl9kYXRhID0gdGhpcy5fZGF0YS5jbG9uZSgpLCBvO1xuICB9LCBfbWluQnVmZmVyU2l6ZTogMCB9KTtcbiAgaS5IYXNoZXIgPSB5LmV4dGVuZCh7IGNmZzogcy5leHRlbmQoKSwgaW5pdDogZnVuY3Rpb24obykge1xuICAgIHRoaXMuY2ZnID0gdGhpcy5jZmcuZXh0ZW5kKG8pLCB0aGlzLnJlc2V0KCk7XG4gIH0sIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB5LnJlc2V0LmNhbGwodGhpcyksIHRoaXMuX2RvUmVzZXQoKTtcbiAgfSwgdXBkYXRlOiBmdW5jdGlvbihvKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FwcGVuZChvKSwgdGhpcy5fcHJvY2VzcygpLCB0aGlzO1xuICB9LCBmaW5hbGl6ZTogZnVuY3Rpb24obykge1xuICAgIG8gJiYgdGhpcy5fYXBwZW5kKG8pO1xuICAgIHZhciBsID0gdGhpcy5fZG9GaW5hbGl6ZSgpO1xuICAgIHJldHVybiBsO1xuICB9LCBibG9ja1NpemU6IDUxMiAvIDMyLCBfY3JlYXRlSGVscGVyOiBmdW5jdGlvbihvKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGwsIGYpIHtcbiAgICAgIHJldHVybiBuZXcgby5pbml0KGYpLmZpbmFsaXplKGwpO1xuICAgIH07XG4gIH0sIF9jcmVhdGVIbWFjSGVscGVyOiBmdW5jdGlvbihvKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGwsIGYpIHtcbiAgICAgIHJldHVybiBuZXcgdi5ITUFDLmluaXQobywgZikuZmluYWxpemUobCk7XG4gICAgfTtcbiAgfSB9KTtcbiAgdmFyIHYgPSByLmFsZ28gPSB7fTtcbiAgcmV0dXJuIHI7XG59KE1hdGgpO1xuKGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHMgPSBLLCB0ID0gcy5saWIsIHIgPSB0LkJhc2UsIGkgPSB0LldvcmRBcnJheSwgcyA9IHMueDY0ID0ge307XG4gIHMuV29yZCA9IHIuZXh0ZW5kKHsgaW5pdDogZnVuY3Rpb24obiwgaCkge1xuICAgIHRoaXMuaGlnaCA9IG4sIHRoaXMubG93ID0gaDtcbiAgfSB9KSwgcy5Xb3JkQXJyYXkgPSByLmV4dGVuZCh7IGluaXQ6IGZ1bmN0aW9uKG4sIGgpIHtcbiAgICBuID0gdGhpcy53b3JkcyA9IG4gfHwgW10sIHRoaXMuc2lnQnl0ZXMgPSBoICE9IGUgPyBoIDogOCAqIG4ubGVuZ3RoO1xuICB9LCB0b1gzMjogZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgbiA9IHRoaXMud29yZHMsIGggPSBuLmxlbmd0aCwgdSA9IFtdLCBwID0gMDsgcCA8IGg7IHArKykge1xuICAgICAgdmFyIGMgPSBuW3BdO1xuICAgICAgdS5wdXNoKGMuaGlnaCksIHUucHVzaChjLmxvdyk7XG4gICAgfVxuICAgIHJldHVybiBpLmNyZWF0ZSh1LCB0aGlzLnNpZ0J5dGVzKTtcbiAgfSwgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIG4gPSByLmNsb25lLmNhbGwodGhpcyksIGggPSBuLndvcmRzID0gdGhpcy53b3Jkcy5zbGljZSgwKSwgdSA9IGgubGVuZ3RoLCBwID0gMDsgcCA8IHU7IHArKykgaFtwXSA9IGhbcF0uY2xvbmUoKTtcbiAgICByZXR1cm4gbjtcbiAgfSB9KTtcbn0pKCk7XG5LLmxpYi5DaXBoZXIgfHwgZnVuY3Rpb24oZSkge1xuICB2YXIgbCA9IEssIHQgPSBsLmxpYiwgciA9IHQuQmFzZSwgaSA9IHQuV29yZEFycmF5LCBzID0gdC5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtLCBuID0gbC5lbmMuQmFzZTY0LCBoID0gbC5hbGdvLkV2cEtERiwgdSA9IHQuQ2lwaGVyID0gcy5leHRlbmQoeyBjZmc6IHIuZXh0ZW5kKCksIGNyZWF0ZUVuY3J5cHRvcjogZnVuY3Rpb24oZCwgZykge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9FTkNfWEZPUk1fTU9ERSwgZCwgZyk7XG4gIH0sIGNyZWF0ZURlY3J5cHRvcjogZnVuY3Rpb24oZCwgZykge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9ERUNfWEZPUk1fTU9ERSwgZCwgZyk7XG4gIH0sIGluaXQ6IGZ1bmN0aW9uKGQsIGcsIFMpIHtcbiAgICB0aGlzLmNmZyA9IHRoaXMuY2ZnLmV4dGVuZChTKSwgdGhpcy5feGZvcm1Nb2RlID0gZCwgdGhpcy5fa2V5ID0gZywgdGhpcy5yZXNldCgpO1xuICB9LCByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgcy5yZXNldC5jYWxsKHRoaXMpLCB0aGlzLl9kb1Jlc2V0KCk7XG4gIH0sIHByb2Nlc3M6IGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gdGhpcy5fYXBwZW5kKGQpLCB0aGlzLl9wcm9jZXNzKCk7XG4gIH0sIGZpbmFsaXplOiBmdW5jdGlvbihkKSB7XG4gICAgcmV0dXJuIGQgJiYgdGhpcy5fYXBwZW5kKGQpLCB0aGlzLl9kb0ZpbmFsaXplKCk7XG4gIH0sIGtleVNpemU6IDQsIGl2U2l6ZTogNCwgX0VOQ19YRk9STV9NT0RFOiAxLCBfREVDX1hGT1JNX01PREU6IDIsIF9jcmVhdGVIZWxwZXI6IGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4geyBlbmNyeXB0OiBmdW5jdGlvbihnLCBTLCBiKSB7XG4gICAgICByZXR1cm4gKHR5cGVvZiBTID09IFwic3RyaW5nXCIgPyBmIDogbykuZW5jcnlwdChkLCBnLCBTLCBiKTtcbiAgICB9LCBkZWNyeXB0OiBmdW5jdGlvbihnLCBTLCBiKSB7XG4gICAgICByZXR1cm4gKHR5cGVvZiBTID09IFwic3RyaW5nXCIgPyBmIDogbykuZGVjcnlwdChkLCBnLCBTLCBiKTtcbiAgICB9IH07XG4gIH0gfSk7XG4gIHQuU3RyZWFtQ2lwaGVyID0gdS5leHRlbmQoeyBfZG9GaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3MoITApO1xuICB9LCBibG9ja1NpemU6IDEgfSk7XG4gIHZhciB2ID0gbC5tb2RlID0ge30sIHAgPSBmdW5jdGlvbihkLCBnLCBTKSB7XG4gICAgdmFyIGIgPSB0aGlzLl9pdjtcbiAgICBiID8gdGhpcy5faXYgPSBlIDogYiA9IHRoaXMuX3ByZXZCbG9jaztcbiAgICBmb3IgKHZhciBEID0gMDsgRCA8IFM7IEQrKykgZFtnICsgRF0gXj0gYltEXTtcbiAgfSwgYyA9ICh0LkJsb2NrQ2lwaGVyTW9kZSA9IHIuZXh0ZW5kKHsgY3JlYXRlRW5jcnlwdG9yOiBmdW5jdGlvbihkLCBnKSB7XG4gICAgcmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZShkLCBnKTtcbiAgfSwgY3JlYXRlRGVjcnlwdG9yOiBmdW5jdGlvbihkLCBnKSB7XG4gICAgcmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZShkLCBnKTtcbiAgfSwgaW5pdDogZnVuY3Rpb24oZCwgZykge1xuICAgIHRoaXMuX2NpcGhlciA9IGQsIHRoaXMuX2l2ID0gZztcbiAgfSB9KSkuZXh0ZW5kKCk7XG4gIGMuRW5jcnlwdG9yID0gYy5leHRlbmQoeyBwcm9jZXNzQmxvY2s6IGZ1bmN0aW9uKGQsIGcpIHtcbiAgICB2YXIgUyA9IHRoaXMuX2NpcGhlciwgYiA9IFMuYmxvY2tTaXplO1xuICAgIHAuY2FsbCh0aGlzLCBkLCBnLCBiKSwgUy5lbmNyeXB0QmxvY2soZCwgZyksIHRoaXMuX3ByZXZCbG9jayA9IGQuc2xpY2UoZywgZyArIGIpO1xuICB9IH0pLCBjLkRlY3J5cHRvciA9IGMuZXh0ZW5kKHsgcHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbihkLCBnKSB7XG4gICAgdmFyIFMgPSB0aGlzLl9jaXBoZXIsIGIgPSBTLmJsb2NrU2l6ZSwgRCA9IGQuc2xpY2UoZywgZyArIGIpO1xuICAgIFMuZGVjcnlwdEJsb2NrKFxuICAgICAgZCxcbiAgICAgIGdcbiAgICApLCBwLmNhbGwodGhpcywgZCwgZywgYiksIHRoaXMuX3ByZXZCbG9jayA9IEQ7XG4gIH0gfSksIHYgPSB2LkNCQyA9IGMsIGMgPSAobC5wYWQgPSB7fSkuUGtjczcgPSB7IHBhZDogZnVuY3Rpb24oZCwgZykge1xuICAgIGZvciAodmFyIFMgPSA0ICogZywgUyA9IFMgLSBkLnNpZ0J5dGVzICUgUywgYiA9IFMgPDwgMjQgfCBTIDw8IDE2IHwgUyA8PCA4IHwgUywgRCA9IFtdLCBBID0gMDsgQSA8IFM7IEEgKz0gNCkgRC5wdXNoKGIpO1xuICAgIFMgPSBpLmNyZWF0ZShELCBTKSwgZC5jb25jYXQoUyk7XG4gIH0sIHVucGFkOiBmdW5jdGlvbihkKSB7XG4gICAgZC5zaWdCeXRlcyAtPSBkLndvcmRzW2Quc2lnQnl0ZXMgLSAxID4+PiAyXSAmIDI1NTtcbiAgfSB9LCB0LkJsb2NrQ2lwaGVyID0gdS5leHRlbmQoeyBjZmc6IHUuY2ZnLmV4dGVuZCh7IG1vZGU6IHYsIHBhZGRpbmc6IGMgfSksIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB1LnJlc2V0LmNhbGwodGhpcyk7XG4gICAgdmFyIGcgPSB0aGlzLmNmZywgZCA9IGcuaXYsIGcgPSBnLm1vZGU7XG4gICAgaWYgKHRoaXMuX3hmb3JtTW9kZSA9PSB0aGlzLl9FTkNfWEZPUk1fTU9ERSkgdmFyIFMgPSBnLmNyZWF0ZUVuY3J5cHRvcjtcbiAgICBlbHNlIFMgPSBnLmNyZWF0ZURlY3J5cHRvciwgdGhpcy5fbWluQnVmZmVyU2l6ZSA9IDE7XG4gICAgdGhpcy5fbW9kZSA9IFMuY2FsbChnLCB0aGlzLCBkICYmIGQud29yZHMpO1xuICB9LCBfZG9Qcm9jZXNzQmxvY2s6IGZ1bmN0aW9uKGQsIGcpIHtcbiAgICB0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayhkLCBnKTtcbiAgfSwgX2RvRmluYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkID0gdGhpcy5jZmcucGFkZGluZztcbiAgICBpZiAodGhpcy5feGZvcm1Nb2RlID09IHRoaXMuX0VOQ19YRk9STV9NT0RFKSB7XG4gICAgICBkLnBhZCh0aGlzLl9kYXRhLCB0aGlzLmJsb2NrU2l6ZSk7XG4gICAgICB2YXIgZyA9IHRoaXMuX3Byb2Nlc3MoITApO1xuICAgIH0gZWxzZSBnID0gdGhpcy5fcHJvY2VzcyghMCksIGQudW5wYWQoZyk7XG4gICAgcmV0dXJuIGc7XG4gIH0sIGJsb2NrU2l6ZTogNCB9KTtcbiAgdmFyIHkgPSB0LkNpcGhlclBhcmFtcyA9IHIuZXh0ZW5kKHsgaW5pdDogZnVuY3Rpb24oZCkge1xuICAgIHRoaXMubWl4SW4oZCk7XG4gIH0sIHRvU3RyaW5nOiBmdW5jdGlvbihkKSB7XG4gICAgcmV0dXJuIChkIHx8IHRoaXMuZm9ybWF0dGVyKS5zdHJpbmdpZnkodGhpcyk7XG4gIH0gfSksIHYgPSAobC5mb3JtYXQgPSB7fSkuT3BlblNTTCA9IHsgc3RyaW5naWZ5OiBmdW5jdGlvbihkKSB7XG4gICAgdmFyIGcgPSBkLmNpcGhlcnRleHQ7XG4gICAgcmV0dXJuIGQgPSBkLnNhbHQsIChkID8gaS5jcmVhdGUoWzEzOTg4OTM2ODQsIDE3MDEwNzY4MzFdKS5jb25jYXQoZCkuY29uY2F0KGcpIDogZykudG9TdHJpbmcobik7XG4gIH0sIHBhcnNlOiBmdW5jdGlvbihkKSB7XG4gICAgZCA9IG4ucGFyc2UoZCk7XG4gICAgdmFyIGcgPSBkLndvcmRzO1xuICAgIGlmIChnWzBdID09IDEzOTg4OTM2ODQgJiYgZ1sxXSA9PSAxNzAxMDc2ODMxKSB7XG4gICAgICB2YXIgUyA9IGkuY3JlYXRlKGcuc2xpY2UoMiwgNCkpO1xuICAgICAgZy5zcGxpY2UoMCwgNCksIGQuc2lnQnl0ZXMgLT0gMTY7XG4gICAgfVxuICAgIHJldHVybiB5LmNyZWF0ZSh7IGNpcGhlcnRleHQ6IGQsIHNhbHQ6IFMgfSk7XG4gIH0gfSwgbyA9IHQuU2VyaWFsaXphYmxlQ2lwaGVyID0gci5leHRlbmQoeyBjZmc6IHIuZXh0ZW5kKHsgZm9ybWF0OiB2IH0pLCBlbmNyeXB0OiBmdW5jdGlvbihkLCBnLCBTLCBiKSB7XG4gICAgYiA9IHRoaXMuY2ZnLmV4dGVuZChiKTtcbiAgICB2YXIgRCA9IGQuY3JlYXRlRW5jcnlwdG9yKFMsIGIpO1xuICAgIHJldHVybiBnID0gRC5maW5hbGl6ZShnKSwgRCA9IEQuY2ZnLCB5LmNyZWF0ZSh7XG4gICAgICBjaXBoZXJ0ZXh0OiBnLFxuICAgICAga2V5OiBTLFxuICAgICAgaXY6IEQuaXYsXG4gICAgICBhbGdvcml0aG06IGQsXG4gICAgICBtb2RlOiBELm1vZGUsXG4gICAgICBwYWRkaW5nOiBELnBhZGRpbmcsXG4gICAgICBibG9ja1NpemU6IGQuYmxvY2tTaXplLFxuICAgICAgZm9ybWF0dGVyOiBiLmZvcm1hdFxuICAgIH0pO1xuICB9LCBkZWNyeXB0OiBmdW5jdGlvbihkLCBnLCBTLCBiKSB7XG4gICAgcmV0dXJuIGIgPSB0aGlzLmNmZy5leHRlbmQoYiksIGcgPSB0aGlzLl9wYXJzZShnLCBiLmZvcm1hdCksIGQuY3JlYXRlRGVjcnlwdG9yKFMsIGIpLmZpbmFsaXplKGcuY2lwaGVydGV4dCk7XG4gIH0sIF9wYXJzZTogZnVuY3Rpb24oZCwgZykge1xuICAgIHJldHVybiB0eXBlb2YgZCA9PSBcInN0cmluZ1wiID8gZy5wYXJzZShkLCB0aGlzKSA6IGQ7XG4gIH0gfSksIGwgPSAobC5rZGYgPSB7fSkuT3BlblNTTCA9IHsgZXhlY3V0ZTogZnVuY3Rpb24oZCwgZywgUywgYikge1xuICAgIHJldHVybiBiIHx8IChiID0gaS5yYW5kb20oOCkpLCBkID0gaC5jcmVhdGUoeyBrZXlTaXplOiBnICsgUyB9KS5jb21wdXRlKGQsIGIpLCBTID0gaS5jcmVhdGUoZC53b3Jkcy5zbGljZShnKSwgNCAqIFMpLCBkLnNpZ0J5dGVzID0gNCAqIGcsIHkuY3JlYXRlKHsga2V5OiBkLCBpdjogUywgc2FsdDogYiB9KTtcbiAgfSB9LCBmID0gdC5QYXNzd29yZEJhc2VkQ2lwaGVyID0gby5leHRlbmQoeyBjZmc6IG8uY2ZnLmV4dGVuZCh7IGtkZjogbCB9KSwgZW5jcnlwdDogZnVuY3Rpb24oZCwgZywgUywgYikge1xuICAgIHJldHVybiBiID0gdGhpcy5jZmcuZXh0ZW5kKGIpLCBTID0gYi5rZGYuZXhlY3V0ZShTLCBkLmtleVNpemUsIGQuaXZTaXplKSwgYi5pdiA9IFMuaXYsIGQgPSBvLmVuY3J5cHQuY2FsbCh0aGlzLCBkLCBnLCBTLmtleSwgYiksIGQubWl4SW4oUyksIGQ7XG4gIH0sIGRlY3J5cHQ6IGZ1bmN0aW9uKGQsIGcsIFMsIGIpIHtcbiAgICByZXR1cm4gYiA9IHRoaXMuY2ZnLmV4dGVuZChiKSwgZyA9IHRoaXMuX3BhcnNlKGcsIGIuZm9ybWF0KSwgUyA9IGIua2RmLmV4ZWN1dGUoUywgZC5rZXlTaXplLCBkLml2U2l6ZSwgZy5zYWx0KSwgYi5pdiA9IFMuaXYsIG8uZGVjcnlwdC5jYWxsKHRoaXMsIGQsIGcsIFMua2V5LCBiKTtcbiAgfSB9KTtcbn0oKTtcbihmdW5jdGlvbigpIHtcbiAgZm9yICh2YXIgZSA9IEssIHQgPSBlLmxpYi5CbG9ja0NpcGhlciwgbSA9IGUuYWxnbywgciA9IFtdLCBpID0gW10sIHMgPSBbXSwgbiA9IFtdLCBoID0gW10sIHUgPSBbXSwgcCA9IFtdLCBjID0gW10sIHkgPSBbXSwgdiA9IFtdLCBvID0gW10sIGwgPSAwOyAyNTYgPiBsOyBsKyspIG9bbF0gPSAxMjggPiBsID8gbCA8PCAxIDogbCA8PCAxIF4gMjgzO1xuICBmb3IgKHZhciBmID0gMCwgZCA9IDAsIGwgPSAwOyAyNTYgPiBsOyBsKyspIHtcbiAgICB2YXIgZyA9IGQgXiBkIDw8IDEgXiBkIDw8IDIgXiBkIDw8IDMgXiBkIDw8IDQsIGcgPSBnID4+PiA4IF4gZyAmIDI1NSBeIDk5O1xuICAgIHJbZl0gPSBnLCBpW2ddID0gZjtcbiAgICB2YXIgUyA9IG9bZl0sIGIgPSBvW1NdLCBEID0gb1tiXSwgQSA9IDI1NyAqIG9bZ10gXiAxNjg0MzAwOCAqIGc7XG4gICAgc1tmXSA9IEEgPDwgMjQgfCBBID4+PiA4LCBuW2ZdID0gQSA8PCAxNiB8IEEgPj4+IDE2LCBoW2ZdID0gQSA8PCA4IHwgQSA+Pj4gMjQsIHVbZl0gPSBBLCBBID0gMTY4NDMwMDkgKiBEIF4gNjU1MzcgKiBiIF4gMjU3ICogUyBeIDE2ODQzMDA4ICogZiwgcFtnXSA9IEEgPDwgMjQgfCBBID4+PiA4LCBjW2ddID0gQSA8PCAxNiB8IEEgPj4+IDE2LCB5W2ddID0gQSA8PCA4IHwgQSA+Pj4gMjQsIHZbZ10gPSBBLCBmID8gKGYgPSBTIF4gb1tvW29bRCBeIFNdXV0sIGQgXj0gb1tvW2RdXSkgOiBmID0gZCA9IDE7XG4gIH1cbiAgdmFyIEkgPSBbXG4gICAgMCxcbiAgICAxLFxuICAgIDIsXG4gICAgNCxcbiAgICA4LFxuICAgIDE2LFxuICAgIDMyLFxuICAgIDY0LFxuICAgIDEyOCxcbiAgICAyNyxcbiAgICA1NFxuICBdLCBtID0gbS5BRVMgPSB0LmV4dGVuZCh7IF9kb1Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciB4ID0gdGhpcy5fa2V5LCBFID0geC53b3JkcywgdyA9IHguc2lnQnl0ZXMgLyA0LCB4ID0gNCAqICgodGhpcy5fblJvdW5kcyA9IHcgKyA2KSArIDEpLCBGID0gdGhpcy5fa2V5U2NoZWR1bGUgPSBbXSwgUCA9IDA7IFAgPCB4OyBQKyspIGlmIChQIDwgdykgRltQXSA9IEVbUF07XG4gICAgZWxzZSB7XG4gICAgICB2YXIgVCA9IEZbUCAtIDFdO1xuICAgICAgUCAlIHcgPyA2IDwgdyAmJiBQICUgdyA9PSA0ICYmIChUID0gcltUID4+PiAyNF0gPDwgMjQgfCByW1QgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IHJbVCA+Pj4gOCAmIDI1NV0gPDwgOCB8IHJbVCAmIDI1NV0pIDogKFQgPSBUIDw8IDggfCBUID4+PiAyNCwgVCA9IHJbVCA+Pj4gMjRdIDw8IDI0IHwgcltUID4+PiAxNiAmIDI1NV0gPDwgMTYgfCByW1QgPj4+IDggJiAyNTVdIDw8IDggfCByW1QgJiAyNTVdLCBUIF49IElbUCAvIHcgfCAwXSA8PCAyNCksIEZbUF0gPSBGW1AgLSB3XSBeIFQ7XG4gICAgfVxuICAgIGZvciAoRSA9IHRoaXMuX2ludktleVNjaGVkdWxlID0gW10sIHcgPSAwOyB3IDwgeDsgdysrKSBQID0geCAtIHcsIFQgPSB3ICUgNCA/IEZbUF0gOiBGW1AgLSA0XSwgRVt3XSA9IDQgPiB3IHx8IDQgPj0gUCA/IFQgOiBwW3JbVCA+Pj4gMjRdXSBeIGNbcltUID4+PiAxNiAmIDI1NV1dIF4geVtyW1QgPj4+IDggJiAyNTVdXSBeIHZbcltUICYgMjU1XV07XG4gIH0sIGVuY3J5cHRCbG9jazogZnVuY3Rpb24oRSwgdykge1xuICAgIHRoaXMuX2RvQ3J5cHRCbG9jayhFLCB3LCB0aGlzLl9rZXlTY2hlZHVsZSwgcywgbiwgaCwgdSwgcik7XG4gIH0sIGRlY3J5cHRCbG9jazogZnVuY3Rpb24oRSwgdykge1xuICAgIHZhciB4ID0gRVt3ICsgMV07XG4gICAgRVt3ICsgMV0gPSBFW3cgKyAzXSwgRVt3ICsgM10gPSB4LCB0aGlzLl9kb0NyeXB0QmxvY2soRSwgdywgdGhpcy5faW52S2V5U2NoZWR1bGUsIHAsIGMsIHksIHYsIGkpLCB4ID0gRVt3ICsgMV0sIEVbdyArIDFdID0gRVt3ICsgM10sIEVbdyArIDNdID0geDtcbiAgfSwgX2RvQ3J5cHRCbG9jazogZnVuY3Rpb24oRSwgdywgeCwgRiwgUCwgVCwgSCwgQykge1xuICAgIGZvciAodmFyIEIgPSB0aGlzLl9uUm91bmRzLCBuZSA9IEVbd10gXiB4WzBdLCBoZSA9IEVbdyArIDFdIF4geFsxXSwgc2UgPSBFW3cgKyAyXSBeIHhbMl0sIHJlID0gRVt3ICsgM10gXiB4WzNdLCBPID0gNCwgaiA9IDE7IGogPCBCOyBqKyspIHZhciBmZSA9IEZbbmUgPj4+IDI0XSBeIFBbaGUgPj4+IDE2ICYgMjU1XSBeIFRbc2UgPj4+IDggJiAyNTVdIF4gSFtyZSAmIDI1NV0gXiB4W08rK10sIFogPSBGW2hlID4+PiAyNF0gXiBQW3NlID4+PiAxNiAmIDI1NV0gXiBUW3JlID4+PiA4ICYgMjU1XSBeIEhbbmUgJiAyNTVdIF4geFtPKytdLCBYID0gRltzZSA+Pj4gMjRdIF4gUFtyZSA+Pj4gMTYgJiAyNTVdIF4gVFtuZSA+Pj4gOCAmIDI1NV0gXiBIW2hlICYgMjU1XSBeIHhbTysrXSwgcmUgPSBGW3JlID4+PiAyNF0gXiBQW25lID4+PiAxNiAmIDI1NV0gXiBUW2hlID4+PiA4ICYgMjU1XSBeIEhbc2UgJiAyNTVdIF4geFtPKytdLCBuZSA9IGZlLCBoZSA9IFosIHNlID0gWDtcbiAgICBmZSA9IChDW25lID4+PiAyNF0gPDwgMjQgfCBDW2hlID4+PiAxNiAmIDI1NV0gPDwgMTYgfCBDW3NlID4+PiA4ICYgMjU1XSA8PCA4IHwgQ1tyZSAmIDI1NV0pIF4geFtPKytdLCBaID0gKENbaGUgPj4+IDI0XSA8PCAyNCB8IENbc2UgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IENbcmUgPj4+IDggJiAyNTVdIDw8IDggfCBDW25lICYgMjU1XSkgXiB4W08rK10sIFggPSAoQ1tzZSA+Pj4gMjRdIDw8IDI0IHwgQ1tyZSA+Pj4gMTYgJiAyNTVdIDw8IDE2IHwgQ1tuZSA+Pj4gOCAmIDI1NV0gPDwgOCB8IENbaGUgJiAyNTVdKSBeIHhbTysrXSwgcmUgPSAoQ1tyZSA+Pj4gMjRdIDw8IDI0IHwgQ1tuZSA+Pj4gMTYgJiAyNTVdIDw8IDE2IHwgQ1toZSA+Pj4gOCAmIDI1NV0gPDwgOCB8IENbc2UgJiAyNTVdKSBeIHhbTysrXSwgRVt3XSA9IGZlLCBFW3cgKyAxXSA9IFosIEVbdyArIDJdID0gWCwgRVt3ICsgM10gPSByZTtcbiAgfSwga2V5U2l6ZTogOCB9KTtcbiAgZS5BRVMgPSB0Ll9jcmVhdGVIZWxwZXIobSk7XG59KSgpO1xuKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlKG8sIGwpIHtcbiAgICB2YXIgZiA9ICh0aGlzLl9sQmxvY2sgPj4+IG8gXiB0aGlzLl9yQmxvY2spICYgbDtcbiAgICB0aGlzLl9yQmxvY2sgXj0gZiwgdGhpcy5fbEJsb2NrIF49IGYgPDwgbztcbiAgfVxuICBmdW5jdGlvbiB0KG8sIGwpIHtcbiAgICB2YXIgZiA9ICh0aGlzLl9yQmxvY2sgPj4+IG8gXiB0aGlzLl9sQmxvY2spICYgbDtcbiAgICB0aGlzLl9sQmxvY2sgXj0gZiwgdGhpcy5fckJsb2NrIF49IGYgPDwgbztcbiAgfVxuICB2YXIgciA9IEssIHMgPSByLmxpYiwgaSA9IHMuV29yZEFycmF5LCBzID0gcy5CbG9ja0NpcGhlciwgbiA9IHIuYWxnbywgaCA9IFs1NywgNDksIDQxLCAzMywgMjUsIDE3LCA5LCAxLCA1OCwgNTAsIDQyLCAzNCwgMjYsIDE4LCAxMCwgMiwgNTksIDUxLCA0MywgMzUsIDI3LCAxOSwgMTEsIDMsIDYwLCA1MiwgNDQsIDM2LCA2MywgNTUsIDQ3LCAzOSwgMzEsIDIzLCAxNSwgNywgNjIsIDU0LCA0NiwgMzgsIDMwLCAyMiwgMTQsIDYsIDYxLCA1MywgNDUsIDM3LCAyOSwgMjEsIDEzLCA1LCAyOCwgMjAsIDEyLCA0XSwgdSA9IFtcbiAgICAxNCxcbiAgICAxNyxcbiAgICAxMSxcbiAgICAyNCxcbiAgICAxLFxuICAgIDUsXG4gICAgMyxcbiAgICAyOCxcbiAgICAxNSxcbiAgICA2LFxuICAgIDIxLFxuICAgIDEwLFxuICAgIDIzLFxuICAgIDE5LFxuICAgIDEyLFxuICAgIDQsXG4gICAgMjYsXG4gICAgOCxcbiAgICAxNixcbiAgICA3LFxuICAgIDI3LFxuICAgIDIwLFxuICAgIDEzLFxuICAgIDIsXG4gICAgNDEsXG4gICAgNTIsXG4gICAgMzEsXG4gICAgMzcsXG4gICAgNDcsXG4gICAgNTUsXG4gICAgMzAsXG4gICAgNDAsXG4gICAgNTEsXG4gICAgNDUsXG4gICAgMzMsXG4gICAgNDgsXG4gICAgNDQsXG4gICAgNDksXG4gICAgMzksXG4gICAgNTYsXG4gICAgMzQsXG4gICAgNTMsXG4gICAgNDYsXG4gICAgNDIsXG4gICAgNTAsXG4gICAgMzYsXG4gICAgMjksXG4gICAgMzJcbiAgXSwgcCA9IFsxLCAyLCA0LCA2LCA4LCAxMCwgMTIsIDE0LCAxNSwgMTcsIDE5LCAyMSwgMjMsIDI1LCAyNywgMjhdLCBjID0gW3tcbiAgICAwOiA4NDIxODg4LFxuICAgIDI2ODQzNTQ1NjogMzI3NjgsXG4gICAgNTM2ODcwOTEyOiA4NDIxMzc4LFxuICAgIDgwNTMwNjM2ODogMixcbiAgICAxMDczNzQxODI0OiA1MTIsXG4gICAgMTM0MjE3NzI4MDogODQyMTg5MCxcbiAgICAxNjEwNjEyNzM2OiA4Mzg5MTIyLFxuICAgIDE4NzkwNDgxOTI6IDgzODg2MDgsXG4gICAgMjE0NzQ4MzY0ODogNTE0LFxuICAgIDI0MTU5MTkxMDQ6IDgzODkxMjAsXG4gICAgMjY4NDM1NDU2MDogMzMyODAsXG4gICAgMjk1Mjc5MDAxNjogODQyMTM3NixcbiAgICAzMjIxMjI1NDcyOiAzMjc3MCxcbiAgICAzNDg5NjYwOTI4OiA4Mzg4NjEwLFxuICAgIDM3NTgwOTYzODQ6IDAsXG4gICAgNDAyNjUzMTg0MDogMzMyODIsXG4gICAgMTM0MjE3NzI4OiAwLFxuICAgIDQwMjY1MzE4NDogODQyMTg5MCxcbiAgICA2NzEwODg2NDA6IDMzMjgyLFxuICAgIDkzOTUyNDA5NjogMzI3NjgsXG4gICAgMTIwNzk1OTU1MjogODQyMTg4OCxcbiAgICAxNDc2Mzk1MDA4OiA1MTIsXG4gICAgMTc0NDgzMDQ2NDogODQyMTM3OCxcbiAgICAyMDEzMjY1OTIwOiAyLFxuICAgIDIyODE3MDEzNzY6IDgzODkxMjAsXG4gICAgMjU1MDEzNjgzMjogMzMyODAsXG4gICAgMjgxODU3MjI4ODogODQyMTM3NixcbiAgICAzMDg3MDA3NzQ0OiA4Mzg5MTIyLFxuICAgIDMzNTU0NDMyMDA6IDgzODg2MTAsXG4gICAgMzYyMzg3ODY1NjogMzI3NzAsXG4gICAgMzg5MjMxNDExMjogNTE0LFxuICAgIDQxNjA3NDk1Njg6IDgzODg2MDgsXG4gICAgMTogMzI3NjgsXG4gICAgMjY4NDM1NDU3OiAyLFxuICAgIDUzNjg3MDkxMzogODQyMTg4OCxcbiAgICA4MDUzMDYzNjk6IDgzODg2MDgsXG4gICAgMTA3Mzc0MTgyNTogODQyMTM3OCxcbiAgICAxMzQyMTc3MjgxOiAzMzI4MCxcbiAgICAxNjEwNjEyNzM3OiA1MTIsXG4gICAgMTg3OTA0ODE5MzogODM4OTEyMixcbiAgICAyMTQ3NDgzNjQ5OiA4NDIxODkwLFxuICAgIDI0MTU5MTkxMDU6IDg0MjEzNzYsXG4gICAgMjY4NDM1NDU2MTogODM4ODYxMCxcbiAgICAyOTUyNzkwMDE3OiAzMzI4MixcbiAgICAzMjIxMjI1NDczOiA1MTQsXG4gICAgMzQ4OTY2MDkyOTogODM4OTEyMCxcbiAgICAzNzU4MDk2Mzg1OiAzMjc3MCxcbiAgICA0MDI2NTMxODQxOiAwLFxuICAgIDEzNDIxNzcyOTogODQyMTg5MCxcbiAgICA0MDI2NTMxODU6IDg0MjEzNzYsXG4gICAgNjcxMDg4NjQxOiA4Mzg4NjA4LFxuICAgIDkzOTUyNDA5NzogNTEyLFxuICAgIDEyMDc5NTk1NTM6IDMyNzY4LFxuICAgIDE0NzYzOTUwMDk6IDgzODg2MTAsXG4gICAgMTc0NDgzMDQ2NTogMixcbiAgICAyMDEzMjY1OTIxOiAzMzI4MixcbiAgICAyMjgxNzAxMzc3OiAzMjc3MCxcbiAgICAyNTUwMTM2ODMzOiA4Mzg5MTIyLFxuICAgIDI4MTg1NzIyODk6IDUxNCxcbiAgICAzMDg3MDA3NzQ1OiA4NDIxODg4LFxuICAgIDMzNTU0NDMyMDE6IDgzODkxMjAsXG4gICAgMzYyMzg3ODY1NzogMCxcbiAgICAzODkyMzE0MTEzOiAzMzI4MCxcbiAgICA0MTYwNzQ5NTY5OiA4NDIxMzc4XG4gIH0sIHtcbiAgICAwOiAxMDc0MjgyNTEyLFxuICAgIDE2Nzc3MjE2OiAxNjM4NCxcbiAgICAzMzU1NDQzMjogNTI0Mjg4LFxuICAgIDUwMzMxNjQ4OiAxMDc0MjY2MTI4LFxuICAgIDY3MTA4ODY0OiAxMDczNzQxODQwLFxuICAgIDgzODg2MDgwOiAxMDc0MjgyNDk2LFxuICAgIDEwMDY2MzI5NjogMTA3Mzc1ODIwOCxcbiAgICAxMTc0NDA1MTI6IDE2LFxuICAgIDEzNDIxNzcyODogNTQwNjcyLFxuICAgIDE1MDk5NDk0NDogMTA3Mzc1ODIyNCxcbiAgICAxNjc3NzIxNjA6IDEwNzM3NDE4MjQsXG4gICAgMTg0NTQ5Mzc2OiA1NDA2ODgsXG4gICAgMjAxMzI2NTkyOiA1MjQzMDQsXG4gICAgMjE4MTAzODA4OiAwLFxuICAgIDIzNDg4MTAyNDogMTY0MDAsXG4gICAgMjUxNjU4MjQwOiAxMDc0MjY2MTEyLFxuICAgIDgzODg2MDg6IDEwNzM3NTgyMDgsXG4gICAgMjUxNjU4MjQ6IDU0MDY4OCxcbiAgICA0MTk0MzA0MDogMTYsXG4gICAgNTg3MjAyNTY6IDEwNzM3NTgyMjQsXG4gICAgNzU0OTc0NzI6IDEwNzQyODI1MTIsXG4gICAgOTIyNzQ2ODg6IDEwNzM3NDE4MjQsXG4gICAgMTA5MDUxOTA0OiA1MjQyODgsXG4gICAgMTI1ODI5MTIwOiAxMDc0MjY2MTI4LFxuICAgIDE0MjYwNjMzNjogNTI0MzA0LFxuICAgIDE1OTM4MzU1MjogMCxcbiAgICAxNzYxNjA3Njg6IDE2Mzg0LFxuICAgIDE5MjkzNzk4NDogMTA3NDI2NjExMixcbiAgICAyMDk3MTUyMDA6IDEwNzM3NDE4NDAsXG4gICAgMjI2NDkyNDE2OiA1NDA2NzIsXG4gICAgMjQzMjY5NjMyOiAxMDc0MjgyNDk2LFxuICAgIDI2MDA0Njg0ODogMTY0MDAsXG4gICAgMjY4NDM1NDU2OiAwLFxuICAgIDI4NTIxMjY3MjogMTA3NDI2NjEyOCxcbiAgICAzMDE5ODk4ODg6IDEwNzM3NTgyMjQsXG4gICAgMzE4NzY3MTA0OiAxMDc0MjgyNDk2LFxuICAgIDMzNTU0NDMyMDogMTA3NDI2NjExMixcbiAgICAzNTIzMjE1MzY6IDE2LFxuICAgIDM2OTA5ODc1MjogNTQwNjg4LFxuICAgIDM4NTg3NTk2ODogMTYzODQsXG4gICAgNDAyNjUzMTg0OiAxNjQwMCxcbiAgICA0MTk0MzA0MDA6IDUyNDI4OCxcbiAgICA0MzYyMDc2MTY6IDUyNDMwNCxcbiAgICA0NTI5ODQ4MzI6IDEwNzM3NDE4NDAsXG4gICAgNDY5NzYyMDQ4OiA1NDA2NzIsXG4gICAgNDg2NTM5MjY0OiAxMDczNzU4MjA4LFxuICAgIDUwMzMxNjQ4MDogMTA3Mzc0MTgyNCxcbiAgICA1MjAwOTM2OTY6IDEwNzQyODI1MTIsXG4gICAgMjc2ODI0MDY0OiA1NDA2ODgsXG4gICAgMjkzNjAxMjgwOiA1MjQyODgsXG4gICAgMzEwMzc4NDk2OiAxMDc0MjY2MTEyLFxuICAgIDMyNzE1NTcxMjogMTYzODQsXG4gICAgMzQzOTMyOTI4OiAxMDczNzU4MjA4LFxuICAgIDM2MDcxMDE0NDogMTA3NDI4MjUxMixcbiAgICAzNzc0ODczNjA6IDE2LFxuICAgIDM5NDI2NDU3NjogMTA3Mzc0MTgyNCxcbiAgICA0MTEwNDE3OTI6IDEwNzQyODI0OTYsXG4gICAgNDI3ODE5MDA4OiAxMDczNzQxODQwLFxuICAgIDQ0NDU5NjIyNDogMTA3Mzc1ODIyNCxcbiAgICA0NjEzNzM0NDA6IDUyNDMwNCxcbiAgICA0NzgxNTA2NTY6IDAsXG4gICAgNDk0OTI3ODcyOiAxNjQwMCxcbiAgICA1MTE3MDUwODg6IDEwNzQyNjYxMjgsXG4gICAgNTI4NDgyMzA0OiA1NDA2NzJcbiAgfSwge1xuICAgIDA6IDI2MCxcbiAgICAxMDQ4NTc2OiAwLFxuICAgIDIwOTcxNTI6IDY3MTA5MTIwLFxuICAgIDMxNDU3Mjg6IDY1Nzk2LFxuICAgIDQxOTQzMDQ6IDY1NTQwLFxuICAgIDUyNDI4ODA6IDY3MTA4ODY4LFxuICAgIDYyOTE0NTY6IDY3MTc0NjYwLFxuICAgIDczNDAwMzI6IDY3MTc0NDAwLFxuICAgIDgzODg2MDg6IDY3MTA4ODY0LFxuICAgIDk0MzcxODQ6IDY3MTc0NjU2LFxuICAgIDEwNDg1NzYwOiA2NTc5MixcbiAgICAxMTUzNDMzNjogNjcxNzQ0MDQsXG4gICAgMTI1ODI5MTI6IDY3MTA5MTI0LFxuICAgIDEzNjMxNDg4OiA2NTUzNixcbiAgICAxNDY4MDA2NDogNCxcbiAgICAxNTcyODY0MDogMjU2LFxuICAgIDUyNDI4ODogNjcxNzQ2NTYsXG4gICAgMTU3Mjg2NDogNjcxNzQ0MDQsXG4gICAgMjYyMTQ0MDogMCxcbiAgICAzNjcwMDE2OiA2NzEwOTEyMCxcbiAgICA0NzE4NTkyOiA2NzEwODg2OCxcbiAgICA1NzY3MTY4OiA2NTUzNixcbiAgICA2ODE1NzQ0OiA2NTU0MCxcbiAgICA3ODY0MzIwOiAyNjAsXG4gICAgODkxMjg5NjogNCxcbiAgICA5OTYxNDcyOiAyNTYsXG4gICAgMTEwMTAwNDg6IDY3MTc0NDAwLFxuICAgIDEyMDU4NjI0OiA2NTc5NixcbiAgICAxMzEwNzIwMDogNjU3OTIsXG4gICAgMTQxNTU3NzY6IDY3MTA5MTI0LFxuICAgIDE1MjA0MzUyOiA2NzE3NDY2MCxcbiAgICAxNjI1MjkyODogNjcxMDg4NjQsXG4gICAgMTY3NzcyMTY6IDY3MTc0NjU2LFxuICAgIDE3ODI1NzkyOiA2NTU0MCxcbiAgICAxODg3NDM2ODogNjU1MzYsXG4gICAgMTk5MjI5NDQ6IDY3MTA5MTIwLFxuICAgIDIwOTcxNTIwOiAyNTYsXG4gICAgMjIwMjAwOTY6IDY3MTc0NjYwLFxuICAgIDIzMDY4NjcyOiA2NzEwODg2OCxcbiAgICAyNDExNzI0ODogMCxcbiAgICAyNTE2NTgyNDogNjcxMDkxMjQsXG4gICAgMjYyMTQ0MDA6IDY3MTA4ODY0LFxuICAgIDI3MjYyOTc2OiA0LFxuICAgIDI4MzExNTUyOiA2NTc5MixcbiAgICAyOTM2MDEyODogNjcxNzQ0MDAsXG4gICAgMzA0MDg3MDQ6IDI2MCxcbiAgICAzMTQ1NzI4MDogNjU3OTYsXG4gICAgMzI1MDU4NTY6IDY3MTc0NDA0LFxuICAgIDE3MzAxNTA0OiA2NzEwODg2NCxcbiAgICAxODM1MDA4MDogMjYwLFxuICAgIDE5Mzk4NjU2OiA2NzE3NDY1NixcbiAgICAyMDQ0NzIzMjogMCxcbiAgICAyMTQ5NTgwODogNjU1NDAsXG4gICAgMjI1NDQzODQ6IDY3MTA5MTIwLFxuICAgIDIzNTkyOTYwOiAyNTYsXG4gICAgMjQ2NDE1MzY6IDY3MTc0NDA0LFxuICAgIDI1NjkwMTEyOiA2NTUzNixcbiAgICAyNjczODY4ODogNjcxNzQ2NjAsXG4gICAgMjc3ODcyNjQ6IDY1Nzk2LFxuICAgIDI4ODM1ODQwOiA2NzEwODg2OCxcbiAgICAyOTg4NDQxNjogNjcxMDkxMjQsXG4gICAgMzA5MzI5OTI6IDY3MTc0NDAwLFxuICAgIDMxOTgxNTY4OiA0LFxuICAgIDMzMDMwMTQ0OiA2NTc5MlxuICB9LCB7XG4gICAgMDogMjE1MTY4MjA0OCxcbiAgICA2NTUzNjogMjE0NzQ4NzgwOCxcbiAgICAxMzEwNzI6IDQxOTg0NjQsXG4gICAgMTk2NjA4OiAyMTUxNjc3OTUyLFxuICAgIDI2MjE0NDogMCxcbiAgICAzMjc2ODA6IDQxOTg0MDAsXG4gICAgMzkzMjE2OiAyMTQ3NDgzNzEyLFxuICAgIDQ1ODc1MjogNDE5NDM2OCxcbiAgICA1MjQyODg6IDIxNDc0ODM2NDgsXG4gICAgNTg5ODI0OiA0MTk0MzA0LFxuICAgIDY1NTM2MDogNjQsXG4gICAgNzIwODk2OiAyMTQ3NDg3NzQ0LFxuICAgIDc4NjQzMjogMjE1MTY3ODAxNixcbiAgICA4NTE5Njg6IDQxNjAsXG4gICAgOTE3NTA0OiA0MDk2LFxuICAgIDk4MzA0MDogMjE1MTY4MjExMixcbiAgICAzMjc2ODogMjE0NzQ4NzgwOCxcbiAgICA5ODMwNDogNjQsXG4gICAgMTYzODQwOiAyMTUxNjc4MDE2LFxuICAgIDIyOTM3NjogMjE0NzQ4Nzc0NCxcbiAgICAyOTQ5MTI6IDQxOTg0MDAsXG4gICAgMzYwNDQ4OiAyMTUxNjgyMTEyLFxuICAgIDQyNTk4NDogMCxcbiAgICA0OTE1MjA6IDIxNTE2Nzc5NTIsXG4gICAgNTU3MDU2OiA0MDk2LFxuICAgIDYyMjU5MjogMjE1MTY4MjA0OCxcbiAgICA2ODgxMjg6IDQxOTQzMDQsXG4gICAgNzUzNjY0OiA0MTYwLFxuICAgIDgxOTIwMDogMjE0NzQ4MzY0OCxcbiAgICA4ODQ3MzY6IDQxOTQzNjgsXG4gICAgOTUwMjcyOiA0MTk4NDY0LFxuICAgIDEwMTU4MDg6IDIxNDc0ODM3MTIsXG4gICAgMTA0ODU3NjogNDE5NDM2OCxcbiAgICAxMTE0MTEyOiA0MTk4NDAwLFxuICAgIDExNzk2NDg6IDIxNDc0ODM3MTIsXG4gICAgMTI0NTE4NDogMCxcbiAgICAxMzEwNzIwOiA0MTYwLFxuICAgIDEzNzYyNTY6IDIxNTE2NzgwMTYsXG4gICAgMTQ0MTc5MjogMjE1MTY4MjA0OCxcbiAgICAxNTA3MzI4OiAyMTQ3NDg3ODA4LFxuICAgIDE1NzI4NjQ6IDIxNTE2ODIxMTIsXG4gICAgMTYzODQwMDogMjE0NzQ4MzY0OCxcbiAgICAxNzAzOTM2OiAyMTUxNjc3OTUyLFxuICAgIDE3Njk0NzI6IDQxOTg0NjQsXG4gICAgMTgzNTAwODogMjE0NzQ4Nzc0NCxcbiAgICAxOTAwNTQ0OiA0MTk0MzA0LFxuICAgIDE5NjYwODA6IDY0LFxuICAgIDIwMzE2MTY6IDQwOTYsXG4gICAgMTA4MTM0NDogMjE1MTY3Nzk1MixcbiAgICAxMTQ2ODgwOiAyMTUxNjgyMTEyLFxuICAgIDEyMTI0MTY6IDAsXG4gICAgMTI3Nzk1MjogNDE5ODQwMCxcbiAgICAxMzQzNDg4OiA0MTk0MzY4LFxuICAgIDE0MDkwMjQ6IDIxNDc0ODM2NDgsXG4gICAgMTQ3NDU2MDogMjE0NzQ4NzgwOCxcbiAgICAxNTQwMDk2OiA2NCxcbiAgICAxNjA1NjMyOiAyMTQ3NDgzNzEyLFxuICAgIDE2NzExNjg6IDQwOTYsXG4gICAgMTczNjcwNDogMjE0NzQ4Nzc0NCxcbiAgICAxODAyMjQwOiAyMTUxNjc4MDE2LFxuICAgIDE4Njc3NzY6IDQxNjAsXG4gICAgMTkzMzMxMjogMjE1MTY4MjA0OCxcbiAgICAxOTk4ODQ4OiA0MTk0MzA0LFxuICAgIDIwNjQzODQ6IDQxOTg0NjRcbiAgfSwge1xuICAgIDA6IDEyOCxcbiAgICA0MDk2OiAxNzAzOTM2MCxcbiAgICA4MTkyOiAyNjIxNDQsXG4gICAgMTIyODg6IDUzNjg3MDkxMixcbiAgICAxNjM4NDogNTM3MTMzMTg0LFxuICAgIDIwNDgwOiAxNjc3NzM0NCxcbiAgICAyNDU3NjogNTUzNjQ4MjU2LFxuICAgIDI4NjcyOiAyNjIyNzIsXG4gICAgMzI3Njg6IDE2Nzc3MjE2LFxuICAgIDM2ODY0OiA1MzcxMzMwNTYsXG4gICAgNDA5NjA6IDUzNjg3MTA0MCxcbiAgICA0NTA1NjogNTUzOTEwNDAwLFxuICAgIDQ5MTUyOiA1NTM5MTAyNzIsXG4gICAgNTMyNDg6IDAsXG4gICAgNTczNDQ6IDE3MDM5NDg4LFxuICAgIDYxNDQwOiA1NTM2NDgxMjgsXG4gICAgMjA0ODogMTcwMzk0ODgsXG4gICAgNjE0NDogNTUzNjQ4MjU2LFxuICAgIDEwMjQwOiAxMjgsXG4gICAgMTQzMzY6IDE3MDM5MzYwLFxuICAgIDE4NDMyOiAyNjIxNDQsXG4gICAgMjI1Mjg6IDUzNzEzMzE4NCxcbiAgICAyNjYyNDogNTUzOTEwMjcyLFxuICAgIDMwNzIwOiA1MzY4NzA5MTIsXG4gICAgMzQ4MTY6IDUzNzEzMzA1NixcbiAgICAzODkxMjogMCxcbiAgICA0MzAwODogNTUzOTEwNDAwLFxuICAgIDQ3MTA0OiAxNjc3NzM0NCxcbiAgICA1MTIwMDogNTM2ODcxMDQwLFxuICAgIDU1Mjk2OiA1NTM2NDgxMjgsXG4gICAgNTkzOTI6IDE2Nzc3MjE2LFxuICAgIDYzNDg4OiAyNjIyNzIsXG4gICAgNjU1MzY6IDI2MjE0NCxcbiAgICA2OTYzMjogMTI4LFxuICAgIDczNzI4OiA1MzY4NzA5MTIsXG4gICAgNzc4MjQ6IDU1MzY0ODI1NixcbiAgICA4MTkyMDogMTY3NzczNDQsXG4gICAgODYwMTY6IDU1MzkxMDI3MixcbiAgICA5MDExMjogNTM3MTMzMTg0LFxuICAgIDk0MjA4OiAxNjc3NzIxNixcbiAgICA5ODMwNDogNTUzOTEwNDAwLFxuICAgIDEwMjQwMDogNTUzNjQ4MTI4LFxuICAgIDEwNjQ5NjogMTcwMzkzNjAsXG4gICAgMTEwNTkyOiA1MzcxMzMwNTYsXG4gICAgMTE0Njg4OiAyNjIyNzIsXG4gICAgMTE4Nzg0OiA1MzY4NzEwNDAsXG4gICAgMTIyODgwOiAwLFxuICAgIDEyNjk3NjogMTcwMzk0ODgsXG4gICAgNjc1ODQ6IDU1MzY0ODI1NixcbiAgICA3MTY4MDogMTY3NzcyMTYsXG4gICAgNzU3NzY6IDE3MDM5MzYwLFxuICAgIDc5ODcyOiA1MzcxMzMxODQsXG4gICAgODM5Njg6IDUzNjg3MDkxMixcbiAgICA4ODA2NDogMTcwMzk0ODgsXG4gICAgOTIxNjA6IDEyOCxcbiAgICA5NjI1NjogNTUzOTEwMjcyLFxuICAgIDEwMDM1MjogMjYyMjcyLFxuICAgIDEwNDQ0ODogNTUzOTEwNDAwLFxuICAgIDEwODU0NDogMCxcbiAgICAxMTI2NDA6IDU1MzY0ODEyOCxcbiAgICAxMTY3MzY6IDE2Nzc3MzQ0LFxuICAgIDEyMDgzMjogMjYyMTQ0LFxuICAgIDEyNDkyODogNTM3MTMzMDU2LFxuICAgIDEyOTAyNDogNTM2ODcxMDQwXG4gIH0sIHtcbiAgICAwOiAyNjg0MzU0NjQsXG4gICAgMjU2OiA4MTkyLFxuICAgIDUxMjogMjcwNTMyNjA4LFxuICAgIDc2ODogMjcwNTQwODA4LFxuICAgIDEwMjQ6IDI2ODQ0MzY0OCxcbiAgICAxMjgwOiAyMDk3MTUyLFxuICAgIDE1MzY6IDIwOTcxNjAsXG4gICAgMTc5MjogMjY4NDM1NDU2LFxuICAgIDIwNDg6IDAsXG4gICAgMjMwNDogMjY4NDQzNjU2LFxuICAgIDI1NjA6IDIxMDUzNDQsXG4gICAgMjgxNjogOCxcbiAgICAzMDcyOiAyNzA1MzI2MTYsXG4gICAgMzMyODogMjEwNTM1MixcbiAgICAzNTg0OiA4MjAwLFxuICAgIDM4NDA6IDI3MDU0MDgwMCxcbiAgICAxMjg6IDI3MDUzMjYwOCxcbiAgICAzODQ6IDI3MDU0MDgwOCxcbiAgICA2NDA6IDgsXG4gICAgODk2OiAyMDk3MTUyLFxuICAgIDExNTI6IDIxMDUzNTIsXG4gICAgMTQwODogMjY4NDM1NDY0LFxuICAgIDE2NjQ6IDI2ODQ0MzY0OCxcbiAgICAxOTIwOiA4MjAwLFxuICAgIDIxNzY6IDIwOTcxNjAsXG4gICAgMjQzMjogODE5MixcbiAgICAyNjg4OiAyNjg0NDM2NTYsXG4gICAgMjk0NDogMjcwNTMyNjE2LFxuICAgIDMyMDA6IDAsXG4gICAgMzQ1NjogMjcwNTQwODAwLFxuICAgIDM3MTI6IDIxMDUzNDQsXG4gICAgMzk2ODogMjY4NDM1NDU2LFxuICAgIDQwOTY6IDI2ODQ0MzY0OCxcbiAgICA0MzUyOiAyNzA1MzI2MTYsXG4gICAgNDYwODogMjcwNTQwODA4LFxuICAgIDQ4NjQ6IDgyMDAsXG4gICAgNTEyMDogMjA5NzE1MixcbiAgICA1Mzc2OiAyNjg0MzU0NTYsXG4gICAgNTYzMjogMjY4NDM1NDY0LFxuICAgIDU4ODg6IDIxMDUzNDQsXG4gICAgNjE0NDogMjEwNTM1MixcbiAgICA2NDAwOiAwLFxuICAgIDY2NTY6IDgsXG4gICAgNjkxMjogMjcwNTMyNjA4LFxuICAgIDcxNjg6IDgxOTIsXG4gICAgNzQyNDogMjY4NDQzNjU2LFxuICAgIDc2ODA6IDI3MDU0MDgwMCxcbiAgICA3OTM2OiAyMDk3MTYwLFxuICAgIDQyMjQ6IDgsXG4gICAgNDQ4MDogMjEwNTM0NCxcbiAgICA0NzM2OiAyMDk3MTUyLFxuICAgIDQ5OTI6IDI2ODQzNTQ2NCxcbiAgICA1MjQ4OiAyNjg0NDM2NDgsXG4gICAgNTUwNDogODIwMCxcbiAgICA1NzYwOiAyNzA1NDA4MDgsXG4gICAgNjAxNjogMjcwNTMyNjA4LFxuICAgIDYyNzI6IDI3MDU0MDgwMCxcbiAgICA2NTI4OiAyNzA1MzI2MTYsXG4gICAgNjc4NDogODE5MixcbiAgICA3MDQwOiAyMTA1MzUyLFxuICAgIDcyOTY6IDIwOTcxNjAsXG4gICAgNzU1MjogMCxcbiAgICA3ODA4OiAyNjg0MzU0NTYsXG4gICAgODA2NDogMjY4NDQzNjU2XG4gIH0sIHtcbiAgICAwOiAxMDQ4NTc2LFxuICAgIDE2OiAzMzU1NTQ1NyxcbiAgICAzMjogMTAyNCxcbiAgICA0ODogMTA0OTYwMSxcbiAgICA2NDogMzQ2MDQwMzMsXG4gICAgODA6IDAsXG4gICAgOTY6IDEsXG4gICAgMTEyOiAzNDYwMzAwOSxcbiAgICAxMjg6IDMzNTU1NDU2LFxuICAgIDE0NDogMTA0ODU3NyxcbiAgICAxNjA6IDMzNTU0NDMzLFxuICAgIDE3NjogMzQ2MDQwMzIsXG4gICAgMTkyOiAzNDYwMzAwOCxcbiAgICAyMDg6IDEwMjUsXG4gICAgMjI0OiAxMDQ5NjAwLFxuICAgIDI0MDogMzM1NTQ0MzIsXG4gICAgODogMzQ2MDMwMDksXG4gICAgMjQ6IDAsXG4gICAgNDA6IDMzNTU1NDU3LFxuICAgIDU2OiAzNDYwNDAzMixcbiAgICA3MjogMTA0ODU3NixcbiAgICA4ODogMzM1NTQ0MzMsXG4gICAgMTA0OiAzMzU1NDQzMixcbiAgICAxMjA6IDEwMjUsXG4gICAgMTM2OiAxMDQ5NjAxLFxuICAgIDE1MjogMzM1NTU0NTYsXG4gICAgMTY4OiAzNDYwMzAwOCxcbiAgICAxODQ6IDEwNDg1NzcsXG4gICAgMjAwOiAxMDI0LFxuICAgIDIxNjogMzQ2MDQwMzMsXG4gICAgMjMyOiAxLFxuICAgIDI0ODogMTA0OTYwMCxcbiAgICAyNTY6IDMzNTU0NDMyLFxuICAgIDI3MjogMTA0ODU3NixcbiAgICAyODg6IDMzNTU1NDU3LFxuICAgIDMwNDogMzQ2MDMwMDksXG4gICAgMzIwOiAxMDQ4NTc3LFxuICAgIDMzNjogMzM1NTU0NTYsXG4gICAgMzUyOiAzNDYwNDAzMixcbiAgICAzNjg6IDEwNDk2MDEsXG4gICAgMzg0OiAxMDI1LFxuICAgIDQwMDogMzQ2MDQwMzMsXG4gICAgNDE2OiAxMDQ5NjAwLFxuICAgIDQzMjogMSxcbiAgICA0NDg6IDAsXG4gICAgNDY0OiAzNDYwMzAwOCxcbiAgICA0ODA6IDMzNTU0NDMzLFxuICAgIDQ5NjogMTAyNCxcbiAgICAyNjQ6IDEwNDk2MDAsXG4gICAgMjgwOiAzMzU1NTQ1NyxcbiAgICAyOTY6IDM0NjAzMDA5LFxuICAgIDMxMjogMSxcbiAgICAzMjg6IDMzNTU0NDMyLFxuICAgIDM0NDogMTA0ODU3NixcbiAgICAzNjA6IDEwMjUsXG4gICAgMzc2OiAzNDYwNDAzMixcbiAgICAzOTI6IDMzNTU0NDMzLFxuICAgIDQwODogMzQ2MDMwMDgsXG4gICAgNDI0OiAwLFxuICAgIDQ0MDogMzQ2MDQwMzMsXG4gICAgNDU2OiAxMDQ5NjAxLFxuICAgIDQ3MjogMTAyNCxcbiAgICA0ODg6IDMzNTU1NDU2LFxuICAgIDUwNDogMTA0ODU3N1xuICB9LCB7XG4gICAgMDogMTM0MjE5ODA4LFxuICAgIDE6IDEzMTA3MixcbiAgICAyOiAxMzQyMTc3MjgsXG4gICAgMzogMzIsXG4gICAgNDogMTMxMTA0LFxuICAgIDU6IDEzNDM1MDg4MCxcbiAgICA2OiAxMzQzNTA4NDgsXG4gICAgNzogMjA0OCxcbiAgICA4OiAxMzQzNDg4MDAsXG4gICAgOTogMTM0MjE5Nzc2LFxuICAgIDEwOiAxMzMxMjAsXG4gICAgMTE6IDEzNDM0ODgzMixcbiAgICAxMjogMjA4MCxcbiAgICAxMzogMCxcbiAgICAxNDogMTM0MjE3NzYwLFxuICAgIDE1OiAxMzMxNTIsXG4gICAgMjE0NzQ4MzY0ODogMjA0OCxcbiAgICAyMTQ3NDgzNjQ5OiAxMzQzNTA4ODAsXG4gICAgMjE0NzQ4MzY1MDogMTM0MjE5ODA4LFxuICAgIDIxNDc0ODM2NTE6IDEzNDIxNzcyOCxcbiAgICAyMTQ3NDgzNjUyOiAxMzQzNDg4MDAsXG4gICAgMjE0NzQ4MzY1MzogMTMzMTIwLFxuICAgIDIxNDc0ODM2NTQ6IDEzMzE1MixcbiAgICAyMTQ3NDgzNjU1OiAzMixcbiAgICAyMTQ3NDgzNjU2OiAxMzQyMTc3NjAsXG4gICAgMjE0NzQ4MzY1NzogMjA4MCxcbiAgICAyMTQ3NDgzNjU4OiAxMzExMDQsXG4gICAgMjE0NzQ4MzY1OTogMTM0MzUwODQ4LFxuICAgIDIxNDc0ODM2NjA6IDAsXG4gICAgMjE0NzQ4MzY2MTogMTM0MzQ4ODMyLFxuICAgIDIxNDc0ODM2NjI6IDEzNDIxOTc3NixcbiAgICAyMTQ3NDgzNjYzOiAxMzEwNzIsXG4gICAgMTY6IDEzMzE1MixcbiAgICAxNzogMTM0MzUwODQ4LFxuICAgIDE4OiAzMixcbiAgICAxOTogMjA0OCxcbiAgICAyMDogMTM0MjE5Nzc2LFxuICAgIDIxOiAxMzQyMTc3NjAsXG4gICAgMjI6IDEzNDM0ODgzMixcbiAgICAyMzogMTMxMDcyLFxuICAgIDI0OiAwLFxuICAgIDI1OiAxMzExMDQsXG4gICAgMjY6IDEzNDM0ODgwMCxcbiAgICAyNzogMTM0MjE5ODA4LFxuICAgIDI4OiAxMzQzNTA4ODAsXG4gICAgMjk6IDEzMzEyMCxcbiAgICAzMDogMjA4MCxcbiAgICAzMTogMTM0MjE3NzI4LFxuICAgIDIxNDc0ODM2NjQ6IDEzMTA3MixcbiAgICAyMTQ3NDgzNjY1OiAyMDQ4LFxuICAgIDIxNDc0ODM2NjY6IDEzNDM0ODgzMixcbiAgICAyMTQ3NDgzNjY3OiAxMzMxNTIsXG4gICAgMjE0NzQ4MzY2ODogMzIsXG4gICAgMjE0NzQ4MzY2OTogMTM0MzQ4ODAwLFxuICAgIDIxNDc0ODM2NzA6IDEzNDIxNzcyOCxcbiAgICAyMTQ3NDgzNjcxOiAxMzQyMTk4MDgsXG4gICAgMjE0NzQ4MzY3MjogMTM0MzUwODgwLFxuICAgIDIxNDc0ODM2NzM6IDEzNDIxNzc2MCxcbiAgICAyMTQ3NDgzNjc0OiAxMzQyMTk3NzYsXG4gICAgMjE0NzQ4MzY3NTogMCxcbiAgICAyMTQ3NDgzNjc2OiAxMzMxMjAsXG4gICAgMjE0NzQ4MzY3NzogMjA4MCxcbiAgICAyMTQ3NDgzNjc4OiAxMzExMDQsXG4gICAgMjE0NzQ4MzY3OTogMTM0MzUwODQ4XG4gIH1dLCB5ID0gWzQxNjA3NDk1NjksIDUyODQ4MjMwNCwgMzMwMzAxNDQsIDIwNjQzODQsIDEyOTAyNCwgODA2NCwgNTA0LCAyMTQ3NDgzNjc5XSwgdiA9IG4uREVTID0gcy5leHRlbmQoeyBfZG9SZXNldDogZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgbyA9IHRoaXMuX2tleS53b3JkcywgbCA9IFtdLCBmID0gMDsgNTYgPiBmOyBmKyspIHtcbiAgICAgIHZhciBkID0gaFtmXSAtIDE7XG4gICAgICBsW2ZdID0gb1tkID4+PiA1XSA+Pj4gMzEgLSBkICUgMzIgJiAxO1xuICAgIH1cbiAgICBmb3IgKG8gPSB0aGlzLl9zdWJLZXlzID0gW10sIGQgPSAwOyAxNiA+IGQ7IGQrKykge1xuICAgICAgZm9yICh2YXIgZyA9IG9bZF0gPSBbXSwgUyA9IHBbZF0sIGYgPSAwOyAyNCA+IGY7IGYrKykgZ1tmIC8gNiB8IDBdIHw9IGxbKHVbZl0gLSAxICsgUykgJSAyOF0gPDwgMzEgLSBmICUgNiwgZ1s0ICsgKGYgLyA2IHwgMCldIHw9IGxbMjggKyAodVtmICsgMjRdIC0gMSArIFMpICUgMjhdIDw8IDMxIC0gZiAlIDY7XG4gICAgICBmb3IgKGdbMF0gPSBnWzBdIDw8IDEgfCBnWzBdID4+PiAzMSwgZiA9IDE7IDcgPiBmOyBmKyspIGdbZl0gPj4+PSA0ICogKGYgLSAxKSArIDM7XG4gICAgICBnWzddID0gZ1s3XSA8PCA1IHwgZ1s3XSA+Pj4gMjc7XG4gICAgfVxuICAgIGZvciAobCA9IHRoaXMuX2ludlN1YktleXMgPSBbXSwgZiA9IDA7IDE2ID4gZjsgZisrKSBsW2ZdID0gb1sxNSAtIGZdO1xuICB9LCBlbmNyeXB0QmxvY2s6IGZ1bmN0aW9uKG8sIGwpIHtcbiAgICB0aGlzLl9kb0NyeXB0QmxvY2sobywgbCwgdGhpcy5fc3ViS2V5cyk7XG4gIH0sIGRlY3J5cHRCbG9jazogZnVuY3Rpb24obywgbCkge1xuICAgIHRoaXMuX2RvQ3J5cHRCbG9jayhvLCBsLCB0aGlzLl9pbnZTdWJLZXlzKTtcbiAgfSwgX2RvQ3J5cHRCbG9jazogZnVuY3Rpb24obywgbCwgZikge1xuICAgIHRoaXMuX2xCbG9jayA9IG9bbF0sIHRoaXMuX3JCbG9jayA9IG9bbCArIDFdLCBlLmNhbGwodGhpcywgNCwgMjUyNjQ1MTM1KSwgZS5jYWxsKHRoaXMsIDE2LCA2NTUzNSksIHQuY2FsbCh0aGlzLCAyLCA4NTg5OTM0NTkpLCB0LmNhbGwodGhpcywgOCwgMTY3MTE5MzUpLCBlLmNhbGwodGhpcywgMSwgMTQzMTY1NTc2NSk7XG4gICAgZm9yICh2YXIgZCA9IDA7IDE2ID4gZDsgZCsrKSB7XG4gICAgICBmb3IgKHZhciBnID0gZltkXSwgUyA9IHRoaXMuX2xCbG9jaywgYiA9IHRoaXMuX3JCbG9jaywgRCA9IDAsIEEgPSAwOyA4ID4gQTsgQSsrKSBEIHw9IGNbQV1bKChiIF4gZ1tBXSkgJiB5W0FdKSA+Pj4gMF07XG4gICAgICB0aGlzLl9sQmxvY2sgPSBiLCB0aGlzLl9yQmxvY2sgPSBTIF4gRDtcbiAgICB9XG4gICAgZiA9IHRoaXMuX2xCbG9jaywgdGhpcy5fbEJsb2NrID0gdGhpcy5fckJsb2NrLCB0aGlzLl9yQmxvY2sgPSBmLCBlLmNhbGwodGhpcywgMSwgMTQzMTY1NTc2NSksIHQuY2FsbCh0aGlzLCA4LCAxNjcxMTkzNSksIHQuY2FsbCh0aGlzLCAyLCA4NTg5OTM0NTkpLCBlLmNhbGwodGhpcywgMTYsIDY1NTM1KSwgZS5jYWxsKHRoaXMsIDQsIDI1MjY0NTEzNSksIG9bbF0gPSB0aGlzLl9sQmxvY2ssIG9bbCArIDFdID0gdGhpcy5fckJsb2NrO1xuICB9LCBrZXlTaXplOiAyLCBpdlNpemU6IDIsIGJsb2NrU2l6ZTogMiB9KTtcbiAgci5ERVMgPSBzLl9jcmVhdGVIZWxwZXIodiksIG4gPSBuLlRyaXBsZURFUyA9IHMuZXh0ZW5kKHsgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvID0gdGhpcy5fa2V5LndvcmRzO1xuICAgIHRoaXMuX2RlczEgPSB2LmNyZWF0ZUVuY3J5cHRvcihpLmNyZWF0ZShvLnNsaWNlKDAsIDIpKSksIHRoaXMuX2RlczIgPSB2LmNyZWF0ZUVuY3J5cHRvcihpLmNyZWF0ZShvLnNsaWNlKDIsIDQpKSksIHRoaXMuX2RlczMgPSB2LmNyZWF0ZUVuY3J5cHRvcihpLmNyZWF0ZShvLnNsaWNlKDQsIDYpKSk7XG4gIH0sIGVuY3J5cHRCbG9jazogZnVuY3Rpb24obywgbCkge1xuICAgIHRoaXMuX2RlczEuZW5jcnlwdEJsb2NrKG8sIGwpLCB0aGlzLl9kZXMyLmRlY3J5cHRCbG9jayhvLCBsKSwgdGhpcy5fZGVzMy5lbmNyeXB0QmxvY2sobywgbCk7XG4gIH0sIGRlY3J5cHRCbG9jazogZnVuY3Rpb24obywgbCkge1xuICAgIHRoaXMuX2RlczMuZGVjcnlwdEJsb2NrKG8sIGwpLCB0aGlzLl9kZXMyLmVuY3J5cHRCbG9jayhvLCBsKSwgdGhpcy5fZGVzMS5kZWNyeXB0QmxvY2sobywgbCk7XG4gIH0sIGtleVNpemU6IDYsIGl2U2l6ZTogMiwgYmxvY2tTaXplOiAyIH0pLCByLlRyaXBsZURFUyA9IHMuX2NyZWF0ZUhlbHBlcihuKTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gSywgdCA9IGUubGliLldvcmRBcnJheTtcbiAgZS5lbmMuQmFzZTY0ID0geyBzdHJpbmdpZnk6IGZ1bmN0aW9uKHIpIHtcbiAgICB2YXIgaSA9IHIud29yZHMsIHMgPSByLnNpZ0J5dGVzLCBuID0gdGhpcy5fbWFwO1xuICAgIHIuY2xhbXAoKSwgciA9IFtdO1xuICAgIGZvciAodmFyIGggPSAwOyBoIDwgczsgaCArPSAzKSBmb3IgKHZhciB1ID0gKGlbaCA+Pj4gMl0gPj4+IDI0IC0gOCAqIChoICUgNCkgJiAyNTUpIDw8IDE2IHwgKGlbaCArIDEgPj4+IDJdID4+PiAyNCAtIDggKiAoKGggKyAxKSAlIDQpICYgMjU1KSA8PCA4IHwgaVtoICsgMiA+Pj4gMl0gPj4+IDI0IC0gOCAqICgoaCArIDIpICUgNCkgJiAyNTUsIHAgPSAwOyA0ID4gcCAmJiBoICsgMC43NSAqIHAgPCBzOyBwKyspIHIucHVzaChuLmNoYXJBdCh1ID4+PiA2ICogKDMgLSBwKSAmIDYzKSk7XG4gICAgaWYgKGkgPSBuLmNoYXJBdCg2NCkpIGZvciAoOyByLmxlbmd0aCAlIDQ7ICkgci5wdXNoKGkpO1xuICAgIHJldHVybiByLmpvaW4oXCJcIik7XG4gIH0sIHBhcnNlOiBmdW5jdGlvbihyKSB7XG4gICAgdmFyIGkgPSByLmxlbmd0aCwgcyA9IHRoaXMuX21hcCwgbiA9IHMuY2hhckF0KDY0KTtcbiAgICBuICYmIChuID0gci5pbmRleE9mKG4pLCBuICE9IC0xICYmIChpID0gbikpO1xuICAgIGZvciAodmFyIG4gPSBbXSwgaCA9IDAsIHUgPSAwOyB1IDwgaTsgdSsrKSBpZiAodSAlIDQpIHtcbiAgICAgIHZhciBwID0gcy5pbmRleE9mKHIuY2hhckF0KHUgLSAxKSkgPDwgMiAqICh1ICUgNCksIGMgPSBzLmluZGV4T2Yoci5jaGFyQXQodSkpID4+PiA2IC0gMiAqICh1ICUgNCk7XG4gICAgICBuW2ggPj4+IDJdIHw9IChwIHwgYykgPDwgMjQgLSA4ICogKGggJSA0KSwgaCsrO1xuICAgIH1cbiAgICByZXR1cm4gdC5jcmVhdGUobiwgaCk7XG4gIH0sIF9tYXA6IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIiB9O1xufSkoKTtcbihmdW5jdGlvbihlKSB7XG4gIGZ1bmN0aW9uIHQodiwgbywgbCwgZiwgZCwgZywgUykge1xuICAgIHJldHVybiB2ID0gdiArIChvICYgbCB8IH5vICYgZikgKyBkICsgUywgKHYgPDwgZyB8IHYgPj4+IDMyIC0gZykgKyBvO1xuICB9XG4gIGZ1bmN0aW9uIHIodiwgbywgbCwgZiwgZCwgZywgUykge1xuICAgIHJldHVybiB2ID0gdiArIChvICYgZiB8IGwgJiB+ZikgKyBkICsgUywgKHYgPDwgZyB8IHYgPj4+IDMyIC0gZykgKyBvO1xuICB9XG4gIGZ1bmN0aW9uIGkodiwgbywgbCwgZiwgZCwgZywgUykge1xuICAgIHJldHVybiB2ID0gdiArIChvIF4gbCBeIGYpICsgZCArIFMsICh2IDw8IGcgfCB2ID4+PiAzMiAtIGcpICsgbztcbiAgfVxuICBmdW5jdGlvbiBzKHYsIG8sIGwsIGYsIGQsIGcsIFMpIHtcbiAgICByZXR1cm4gdiA9IHYgKyAobCBeIChvIHwgfmYpKSArIGQgKyBTLCAodiA8PCBnIHwgdiA+Pj4gMzIgLSBnKSArIG87XG4gIH1cbiAgZm9yICh2YXIgbiA9IEssIHAgPSBuLmxpYiwgaCA9IHAuV29yZEFycmF5LCB1ID0gcC5IYXNoZXIsIHAgPSBuLmFsZ28sIGMgPSBbXSwgeSA9IDA7IDY0ID4geTsgeSsrKSBjW3ldID0gNDI5NDk2NzI5NiAqIGUuYWJzKGUuc2luKHkgKyAxKSkgfCAwO1xuICBwID0gcC5NRDUgPSB1LmV4dGVuZCh7XG4gICAgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5faGFzaCA9IG5ldyBoLmluaXQoWzE3MzI1ODQxOTMsIDQwMjMyMzM0MTcsIDI1NjIzODMxMDIsIDI3MTczMzg3OF0pO1xuICAgIH0sXG4gICAgX2RvUHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbih2LCBvKSB7XG4gICAgICBmb3IgKHZhciBsID0gMDsgMTYgPiBsOyBsKyspIHtcbiAgICAgICAgdmFyIGYgPSBvICsgbCwgZCA9IHZbZl07XG4gICAgICAgIHZbZl0gPSAoZCA8PCA4IHwgZCA+Pj4gMjQpICYgMTY3MTE5MzUgfCAoZCA8PCAyNCB8IGQgPj4+IDgpICYgNDI3ODI1NTM2MDtcbiAgICAgIH1cbiAgICAgIHZhciBsID0gdGhpcy5faGFzaC53b3JkcywgZiA9IHZbbyArIDBdLCBkID0gdltvICsgMV0sIGcgPSB2W28gKyAyXSwgUyA9IHZbbyArIDNdLCBiID0gdltvICsgNF0sIEQgPSB2W28gKyA1XSwgQSA9IHZbbyArIDZdLCBJID0gdltvICsgN10sIG0gPSB2W28gKyA4XSwgRSA9IHZbbyArIDldLCB3ID0gdltvICsgMTBdLCB4ID0gdltvICsgMTFdLCBGID0gdltvICsgMTJdLCBQID0gdltvICsgMTNdLCBUID0gdltvICsgMTRdLCBIID0gdltvICsgMTVdLCBDID0gbFswXSwgaiA9IGxbMV0sIE8gPSBsWzJdLCBCID0gbFszXSwgQyA9IHQoQywgaiwgTywgQiwgZiwgNywgY1swXSksIEIgPSB0KEIsIEMsIGosIE8sIGQsIDEyLCBjWzFdKSwgTyA9IHQoTywgQiwgQywgaiwgZywgMTcsIGNbMl0pLCBqID0gdChqLCBPLCBCLCBDLCBTLCAyMiwgY1szXSksIEMgPSB0KEMsIGosIE8sIEIsIGIsIDcsIGNbNF0pLCBCID0gdChCLCBDLCBqLCBPLCBELCAxMiwgY1s1XSksIE8gPSB0KE8sIEIsIEMsIGosIEEsIDE3LCBjWzZdKSwgaiA9IHQoaiwgTywgQiwgQywgSSwgMjIsIGNbN10pLCBDID0gdChDLCBqLCBPLCBCLCBtLCA3LCBjWzhdKSwgQiA9IHQoQiwgQywgaiwgTywgRSwgMTIsIGNbOV0pLCBPID0gdChPLCBCLCBDLCBqLCB3LCAxNywgY1sxMF0pLCBqID0gdChqLCBPLCBCLCBDLCB4LCAyMiwgY1sxMV0pLCBDID0gdChDLCBqLCBPLCBCLCBGLCA3LCBjWzEyXSksIEIgPSB0KEIsIEMsIGosIE8sIFAsIDEyLCBjWzEzXSksIE8gPSB0KE8sIEIsIEMsIGosIFQsIDE3LCBjWzE0XSksIGogPSB0KGosIE8sIEIsIEMsIEgsIDIyLCBjWzE1XSksIEMgPSByKEMsIGosIE8sIEIsIGQsIDUsIGNbMTZdKSwgQiA9IHIoQiwgQywgaiwgTywgQSwgOSwgY1sxN10pLCBPID0gcihPLCBCLCBDLCBqLCB4LCAxNCwgY1sxOF0pLCBqID0gcihqLCBPLCBCLCBDLCBmLCAyMCwgY1sxOV0pLCBDID0gcihDLCBqLCBPLCBCLCBELCA1LCBjWzIwXSksIEIgPSByKEIsIEMsIGosIE8sIHcsIDksIGNbMjFdKSwgTyA9IHIoTywgQiwgQywgaiwgSCwgMTQsIGNbMjJdKSwgaiA9IHIoaiwgTywgQiwgQywgYiwgMjAsIGNbMjNdKSwgQyA9IHIoQywgaiwgTywgQiwgRSwgNSwgY1syNF0pLCBCID0gcihCLCBDLCBqLCBPLCBULCA5LCBjWzI1XSksIE8gPSByKE8sIEIsIEMsIGosIFMsIDE0LCBjWzI2XSksIGogPSByKGosIE8sIEIsIEMsIG0sIDIwLCBjWzI3XSksIEMgPSByKEMsIGosIE8sIEIsIFAsIDUsIGNbMjhdKSwgQiA9IHIoXG4gICAgICAgIEIsXG4gICAgICAgIEMsXG4gICAgICAgIGosXG4gICAgICAgIE8sXG4gICAgICAgIGcsXG4gICAgICAgIDksXG4gICAgICAgIGNbMjldXG4gICAgICApLCBPID0gcihPLCBCLCBDLCBqLCBJLCAxNCwgY1szMF0pLCBqID0gcihqLCBPLCBCLCBDLCBGLCAyMCwgY1szMV0pLCBDID0gaShDLCBqLCBPLCBCLCBELCA0LCBjWzMyXSksIEIgPSBpKEIsIEMsIGosIE8sIG0sIDExLCBjWzMzXSksIE8gPSBpKE8sIEIsIEMsIGosIHgsIDE2LCBjWzM0XSksIGogPSBpKGosIE8sIEIsIEMsIFQsIDIzLCBjWzM1XSksIEMgPSBpKEMsIGosIE8sIEIsIGQsIDQsIGNbMzZdKSwgQiA9IGkoQiwgQywgaiwgTywgYiwgMTEsIGNbMzddKSwgTyA9IGkoTywgQiwgQywgaiwgSSwgMTYsIGNbMzhdKSwgaiA9IGkoaiwgTywgQiwgQywgdywgMjMsIGNbMzldKSwgQyA9IGkoQywgaiwgTywgQiwgUCwgNCwgY1s0MF0pLCBCID0gaShCLCBDLCBqLCBPLCBmLCAxMSwgY1s0MV0pLCBPID0gaShPLCBCLCBDLCBqLCBTLCAxNiwgY1s0Ml0pLCBqID0gaShqLCBPLCBCLCBDLCBBLCAyMywgY1s0M10pLCBDID0gaShDLCBqLCBPLCBCLCBFLCA0LCBjWzQ0XSksIEIgPSBpKEIsIEMsIGosIE8sIEYsIDExLCBjWzQ1XSksIE8gPSBpKE8sIEIsIEMsIGosIEgsIDE2LCBjWzQ2XSksIGogPSBpKGosIE8sIEIsIEMsIGcsIDIzLCBjWzQ3XSksIEMgPSBzKEMsIGosIE8sIEIsIGYsIDYsIGNbNDhdKSwgQiA9IHMoQiwgQywgaiwgTywgSSwgMTAsIGNbNDldKSwgTyA9IHMoXG4gICAgICAgIE8sXG4gICAgICAgIEIsXG4gICAgICAgIEMsXG4gICAgICAgIGosXG4gICAgICAgIFQsXG4gICAgICAgIDE1LFxuICAgICAgICBjWzUwXVxuICAgICAgKSwgaiA9IHMoaiwgTywgQiwgQywgRCwgMjEsIGNbNTFdKSwgQyA9IHMoQywgaiwgTywgQiwgRiwgNiwgY1s1Ml0pLCBCID0gcyhCLCBDLCBqLCBPLCBTLCAxMCwgY1s1M10pLCBPID0gcyhPLCBCLCBDLCBqLCB3LCAxNSwgY1s1NF0pLCBqID0gcyhqLCBPLCBCLCBDLCBkLCAyMSwgY1s1NV0pLCBDID0gcyhDLCBqLCBPLCBCLCBtLCA2LCBjWzU2XSksIEIgPSBzKEIsIEMsIGosIE8sIEgsIDEwLCBjWzU3XSksIE8gPSBzKE8sIEIsIEMsIGosIEEsIDE1LCBjWzU4XSksIGogPSBzKGosIE8sIEIsIEMsIFAsIDIxLCBjWzU5XSksIEMgPSBzKEMsIGosIE8sIEIsIGIsIDYsIGNbNjBdKSwgQiA9IHMoQiwgQywgaiwgTywgeCwgMTAsIGNbNjFdKSwgTyA9IHMoTywgQiwgQywgaiwgZywgMTUsIGNbNjJdKSwgaiA9IHMoaiwgTywgQiwgQywgRSwgMjEsIGNbNjNdKTtcbiAgICAgIGxbMF0gPSBsWzBdICsgQyB8IDAsIGxbMV0gPSBsWzFdICsgaiB8IDAsIGxbMl0gPSBsWzJdICsgTyB8IDAsIGxbM10gPSBsWzNdICsgQiB8IDA7XG4gICAgfSxcbiAgICBfZG9GaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdiA9IHRoaXMuX2RhdGEsIG8gPSB2LndvcmRzLCBsID0gOCAqIHRoaXMuX25EYXRhQnl0ZXMsIGYgPSA4ICogdi5zaWdCeXRlcztcbiAgICAgIG9bZiA+Pj4gNV0gfD0gMTI4IDw8IDI0IC0gZiAlIDMyO1xuICAgICAgdmFyIGQgPSBlLmZsb29yKGwgLyA0Mjk0OTY3Mjk2KTtcbiAgICAgIGZvciAob1soZiArIDY0ID4+PiA5IDw8IDQpICsgMTVdID0gKGQgPDwgOCB8IGQgPj4+IDI0KSAmIDE2NzExOTM1IHwgKGQgPDwgMjQgfCBkID4+PiA4KSAmIDQyNzgyNTUzNjAsIG9bKGYgKyA2NCA+Pj4gOSA8PCA0KSArIDE0XSA9IChsIDw8IDggfCBsID4+PiAyNCkgJiAxNjcxMTkzNSB8IChsIDw8IDI0IHwgbCA+Pj4gOCkgJiA0Mjc4MjU1MzYwLCB2LnNpZ0J5dGVzID0gNCAqIChvLmxlbmd0aCArIDEpLCB0aGlzLl9wcm9jZXNzKCksIHYgPSB0aGlzLl9oYXNoLCBvID0gdi53b3JkcywgbCA9IDA7IDQgPiBsOyBsKyspIGYgPSBvW2xdLCBvW2xdID0gKGYgPDwgOCB8IGYgPj4+IDI0KSAmIDE2NzExOTM1IHwgKGYgPDwgMjQgfCBmID4+PiA4KSAmIDQyNzgyNTUzNjA7XG4gICAgICByZXR1cm4gdjtcbiAgICB9LFxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2ID0gdS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgICAgcmV0dXJuIHYuX2hhc2ggPSB0aGlzLl9oYXNoLmNsb25lKCksIHY7XG4gICAgfVxuICB9KSwgbi5NRDUgPSB1Ll9jcmVhdGVIZWxwZXIocCksIG4uSG1hY01ENSA9IHUuX2NyZWF0ZUhtYWNIZWxwZXIocCk7XG59KShNYXRoKTtcbihmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBLLCBzID0gZS5saWIsIHQgPSBzLldvcmRBcnJheSwgciA9IHMuSGFzaGVyLCBpID0gW10sIHMgPSBlLmFsZ28uU0hBMSA9IHIuZXh0ZW5kKHsgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2hhc2ggPSBuZXcgdC5pbml0KFsxNzMyNTg0MTkzLCA0MDIzMjMzNDE3LCAyNTYyMzgzMTAyLCAyNzE3MzM4NzgsIDMyODUzNzc1MjBdKTtcbiAgfSwgX2RvUHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbihuLCBoKSB7XG4gICAgZm9yICh2YXIgdSA9IHRoaXMuX2hhc2gud29yZHMsIHAgPSB1WzBdLCBjID0gdVsxXSwgeSA9IHVbMl0sIHYgPSB1WzNdLCBvID0gdVs0XSwgbCA9IDA7IDgwID4gbDsgbCsrKSB7XG4gICAgICBpZiAoMTYgPiBsKSBpW2xdID0gbltoICsgbF0gfCAwO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciBmID0gaVtsIC0gM10gXiBpW2wgLSA4XSBeIGlbbCAtIDE0XSBeIGlbbCAtIDE2XTtcbiAgICAgICAgaVtsXSA9IGYgPDwgMSB8IGYgPj4+IDMxO1xuICAgICAgfVxuICAgICAgZiA9IChwIDw8IDUgfCBwID4+PiAyNykgKyBvICsgaVtsXSwgZiA9IDIwID4gbCA/IGYgKyAoKGMgJiB5IHwgfmMgJiB2KSArIDE1MTg1MDAyNDkpIDogNDAgPiBsID8gZiArICgoYyBeIHkgXiB2KSArIDE4NTk3NzUzOTMpIDogNjAgPiBsID8gZiArICgoYyAmIHkgfCBjICYgdiB8IHkgJiB2KSAtIDE4OTQwMDc1ODgpIDogZiArICgoYyBeIHkgXiB2KSAtIDg5OTQ5NzUxNCksIG8gPSB2LCB2ID0geSwgeSA9IGMgPDwgMzAgfCBjID4+PiAyLCBjID0gcCwgcCA9IGY7XG4gICAgfVxuICAgIHVbMF0gPSB1WzBdICsgcCB8IDAsIHVbMV0gPSB1WzFdICsgYyB8IDAsIHVbMl0gPSB1WzJdICsgeSB8IDAsIHVbM10gPSB1WzNdICsgdiB8IDAsIHVbNF0gPSB1WzRdICsgbyB8IDA7XG4gIH0sIF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXMuX2RhdGEsIGggPSBuLndvcmRzLCB1ID0gOCAqIHRoaXMuX25EYXRhQnl0ZXMsIHAgPSA4ICogbi5zaWdCeXRlcztcbiAgICByZXR1cm4gaFtwID4+PiA1XSB8PSAxMjggPDwgMjQgLSBwICUgMzIsIGhbKHAgKyA2NCA+Pj4gOSA8PCA0KSArIDE0XSA9IE1hdGguZmxvb3IodSAvIDQyOTQ5NjcyOTYpLCBoWyhwICsgNjQgPj4+IDkgPDwgNCkgKyAxNV0gPSB1LCBuLnNpZ0J5dGVzID0gNCAqIGgubGVuZ3RoLCB0aGlzLl9wcm9jZXNzKCksIHRoaXMuX2hhc2g7XG4gIH0sIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHIuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICByZXR1cm4gbi5faGFzaCA9IHRoaXMuX2hhc2guY2xvbmUoKSwgbjtcbiAgfSB9KTtcbiAgZS5TSEExID0gci5fY3JlYXRlSGVscGVyKHMpLCBlLkhtYWNTSEExID0gci5fY3JlYXRlSG1hY0hlbHBlcihzKTtcbn0pKCk7XG4oZnVuY3Rpb24oZSkge1xuICBmb3IgKHZhciB0ID0gSywgbCA9IHQubGliLCByID0gbC5Xb3JkQXJyYXksIGkgPSBsLkhhc2hlciwgbCA9IHQuYWxnbywgcyA9IFtdLCBuID0gW10sIGggPSBmdW5jdGlvbihkKSB7XG4gICAgcmV0dXJuIDQyOTQ5NjcyOTYgKiAoZCAtIChkIHwgMCkpIHwgMDtcbiAgfSwgdSA9IDIsIHAgPSAwOyA2NCA+IHA7ICkge1xuICAgIHZhciBjO1xuICAgIGU6IHtcbiAgICAgIGMgPSB1O1xuICAgICAgZm9yICh2YXIgeSA9IGUuc3FydChjKSwgdiA9IDI7IHYgPD0geTsgdisrKSBpZiAoIShjICUgdikpIHtcbiAgICAgICAgYyA9ICExO1xuICAgICAgICBicmVhayBlO1xuICAgICAgfVxuICAgICAgYyA9ICEwO1xuICAgIH1cbiAgICBjICYmICg4ID4gcCAmJiAoc1twXSA9IGgoZS5wb3codSwgMC41KSkpLCBuW3BdID0gaChlLnBvdyh1LCAxIC8gMykpLCBwKyspLCB1Kys7XG4gIH1cbiAgdmFyIG8gPSBbXSwgbCA9IGwuU0hBMjU2ID0gaS5leHRlbmQoeyBfZG9SZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faGFzaCA9IG5ldyByLmluaXQocy5zbGljZSgwKSk7XG4gIH0sIF9kb1Byb2Nlc3NCbG9jazogZnVuY3Rpb24oZiwgZCkge1xuICAgIGZvciAodmFyIGcgPSB0aGlzLl9oYXNoLndvcmRzLCBTID0gZ1swXSwgYiA9IGdbMV0sIEQgPSBnWzJdLCBBID0gZ1szXSwgSSA9IGdbNF0sIG0gPSBnWzVdLCBFID0gZ1s2XSwgdyA9IGdbN10sIHggPSAwOyA2NCA+IHg7IHgrKykge1xuICAgICAgaWYgKDE2ID4geCkgb1t4XSA9IGZbZCArIHhdIHwgMDtcbiAgICAgIGVsc2Uge1xuICAgICAgICB2YXIgRiA9IG9beCAtIDE1XSwgUCA9IG9beCAtIDJdO1xuICAgICAgICBvW3hdID0gKChGIDw8IDI1IHwgRiA+Pj4gNykgXiAoRiA8PCAxNCB8IEYgPj4+IDE4KSBeIEYgPj4+IDMpICsgb1t4IC0gN10gKyAoKFAgPDwgMTUgfCBQID4+PiAxNykgXiAoUCA8PCAxMyB8IFAgPj4+IDE5KSBeIFAgPj4+IDEwKSArIG9beCAtIDE2XTtcbiAgICAgIH1cbiAgICAgIEYgPSB3ICsgKChJIDw8IDI2IHwgSSA+Pj4gNikgXiAoSSA8PCAyMSB8IEkgPj4+IDExKSBeIChJIDw8IDcgfCBJID4+PiAyNSkpICsgKEkgJiBtIF4gfkkgJiBFKSArIG5beF0gKyBvW3hdLCBQID0gKChTIDw8IDMwIHwgUyA+Pj4gMikgXiAoUyA8PCAxOSB8IFMgPj4+IDEzKSBeIChTIDw8IDEwIHwgUyA+Pj4gMjIpKSArIChTICYgYiBeIFMgJiBEIF4gYiAmIEQpLCB3ID0gRSwgRSA9IG0sIG0gPSBJLCBJID0gQSArIEYgfCAwLCBBID0gRCwgRCA9IGIsIGIgPSBTLCBTID0gRiArIFAgfCAwO1xuICAgIH1cbiAgICBnWzBdID0gZ1swXSArIFMgfCAwLCBnWzFdID0gZ1sxXSArIGIgfCAwLCBnWzJdID0gZ1syXSArIEQgfCAwLCBnWzNdID0gZ1szXSArIEEgfCAwLCBnWzRdID0gZ1s0XSArIEkgfCAwLCBnWzVdID0gZ1s1XSArIG0gfCAwLCBnWzZdID0gZ1s2XSArIEUgfCAwLCBnWzddID0gZ1s3XSArIHcgfCAwO1xuICB9LCBfZG9GaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGYgPSB0aGlzLl9kYXRhLCBkID0gZi53b3JkcywgZyA9IDggKiB0aGlzLl9uRGF0YUJ5dGVzLCBTID0gOCAqIGYuc2lnQnl0ZXM7XG4gICAgcmV0dXJuIGRbUyA+Pj4gNV0gfD0gMTI4IDw8IDI0IC0gUyAlIDMyLCBkWyhTICsgNjQgPj4+IDkgPDwgNCkgKyAxNF0gPSBlLmZsb29yKGcgLyA0Mjk0OTY3Mjk2KSwgZFsoUyArIDY0ID4+PiA5IDw8IDQpICsgMTVdID0gZywgZi5zaWdCeXRlcyA9IDQgKiBkLmxlbmd0aCwgdGhpcy5fcHJvY2VzcygpLCB0aGlzLl9oYXNoO1xuICB9LCBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGYgPSBpLmNsb25lLmNhbGwodGhpcyk7XG4gICAgcmV0dXJuIGYuX2hhc2ggPSB0aGlzLl9oYXNoLmNsb25lKCksIGY7XG4gIH0gfSk7XG4gIHQuU0hBMjU2ID0gaS5fY3JlYXRlSGVscGVyKGwpLCB0LkhtYWNTSEEyNTYgPSBpLl9jcmVhdGVIbWFjSGVscGVyKGwpO1xufSkoTWF0aCk7XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gSywgdCA9IGUubGliLldvcmRBcnJheSwgaSA9IGUuYWxnbywgciA9IGkuU0hBMjU2LCBpID0gaS5TSEEyMjQgPSByLmV4dGVuZCh7IF9kb1Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9oYXNoID0gbmV3IHQuaW5pdChbMzIzODM3MTAzMiwgOTE0MTUwNjYzLCA4MTI3MDI5OTksIDQxNDQ5MTI2OTcsIDQyOTA3NzU4NTcsIDE3NTA2MDMwMjUsIDE2OTQwNzY4MzksIDMyMDQwNzU0MjhdKTtcbiAgfSwgX2RvRmluYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gci5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO1xuICAgIHJldHVybiBzLnNpZ0J5dGVzIC09IDQsIHM7XG4gIH0gfSk7XG4gIGUuU0hBMjI0ID0gci5fY3JlYXRlSGVscGVyKGkpLCBlLkhtYWNTSEEyMjQgPSByLl9jcmVhdGVIbWFjSGVscGVyKGkpO1xufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gZSgpIHtcbiAgICByZXR1cm4gaS5jcmVhdGUuYXBwbHkoaSwgYXJndW1lbnRzKTtcbiAgfVxuICBmb3IgKHZhciB0ID0gSywgciA9IHQubGliLkhhc2hlciwgbiA9IHQueDY0LCBpID0gbi5Xb3JkLCBzID0gbi5Xb3JkQXJyYXksIG4gPSB0LmFsZ28sIGggPSBbXG4gICAgZSgxMTE2MzUyNDA4LCAzNjA5NzY3NDU4KSxcbiAgICBlKDE4OTk0NDc0NDEsIDYwMjg5MTcyNSksXG4gICAgZSgzMDQ5MzIzNDcxLCAzOTY0NDg0Mzk5KSxcbiAgICBlKDM5MjEwMDk1NzMsIDIxNzMyOTU1NDgpLFxuICAgIGUoOTYxOTg3MTYzLCA0MDgxNjI4NDcyKSxcbiAgICBlKDE1MDg5NzA5OTMsIDMwNTM4MzQyNjUpLFxuICAgIGUoMjQ1MzYzNTc0OCwgMjkzNzY3MTU3OSksXG4gICAgZSgyODcwNzYzMjIxLCAzNjY0NjA5NTYwKSxcbiAgICBlKDM2MjQzODEwODAsIDI3MzQ4ODMzOTQpLFxuICAgIGUoMzEwNTk4NDAxLCAxMTY0OTk2NTQyKSxcbiAgICBlKDYwNzIyNTI3OCwgMTMyMzYxMDc2NCksXG4gICAgZSgxNDI2ODgxOTg3LCAzNTkwMzA0OTk0KSxcbiAgICBlKDE5MjUwNzgzODgsIDQwNjgxODIzODMpLFxuICAgIGUoMjE2MjA3ODIwNiwgOTkxMzM2MTEzKSxcbiAgICBlKDI2MTQ4ODgxMDMsIDYzMzgwMzMxNyksXG4gICAgZSgzMjQ4MjIyNTgwLCAzNDc5Nzc0ODY4KSxcbiAgICBlKDM4MzUzOTA0MDEsIDI2NjY2MTM0NTgpLFxuICAgIGUoNDAyMjIyNDc3NCwgOTQ0NzExMTM5KSxcbiAgICBlKDI2NDM0NzA3OCwgMjM0MTI2Mjc3MyksXG4gICAgZSg2MDQ4MDc2MjgsIDIwMDc4MDA5MzMpLFxuICAgIGUoNzcwMjU1OTgzLCAxNDk1OTkwOTAxKSxcbiAgICBlKDEyNDkxNTAxMjIsIDE4NTY0MzEyMzUpLFxuICAgIGUoMTU1NTA4MTY5MiwgMzE3NTIxODEzMiksXG4gICAgZSgxOTk2MDY0OTg2LCAyMTk4OTUwODM3KSxcbiAgICBlKDI1NTQyMjA4ODIsIDM5OTk3MTkzMzkpLFxuICAgIGUoMjgyMTgzNDM0OSwgNzY2Nzg0MDE2KSxcbiAgICBlKDI5NTI5OTY4MDgsIDI1NjY1OTQ4NzkpLFxuICAgIGUoMzIxMDMxMzY3MSwgMzIwMzMzNzk1NiksXG4gICAgZSgzMzM2NTcxODkxLCAxMDM0NDU3MDI2KSxcbiAgICBlKDM1ODQ1Mjg3MTEsIDI0NjY5NDg5MDEpLFxuICAgIGUoMTEzOTI2OTkzLCAzNzU4MzI2MzgzKSxcbiAgICBlKDMzODI0MTg5NSwgMTY4NzE3OTM2KSxcbiAgICBlKDY2NjMwNzIwNSwgMTE4ODE3OTk2NCksXG4gICAgZSg3NzM1Mjk5MTIsIDE1NDYwNDU3MzQpLFxuICAgIGUoMTI5NDc1NzM3MiwgMTUyMjgwNTQ4NSksXG4gICAgZShcbiAgICAgIDEzOTYxODIyOTEsXG4gICAgICAyNjQzODMzODIzXG4gICAgKSxcbiAgICBlKDE2OTUxODM3MDAsIDIzNDM1MjczOTApLFxuICAgIGUoMTk4NjY2MTA1MSwgMTAxNDQ3NzQ4MCksXG4gICAgZSgyMTc3MDI2MzUwLCAxMjA2NzU5MTQyKSxcbiAgICBlKDI0NTY5NTYwMzcsIDM0NDA3NzYyNyksXG4gICAgZSgyNzMwNDg1OTIxLCAxMjkwODYzNDYwKSxcbiAgICBlKDI4MjAzMDI0MTEsIDMxNTg0NTQyNzMpLFxuICAgIGUoMzI1OTczMDgwMCwgMzUwNTk1MjY1NyksXG4gICAgZSgzMzQ1NzY0NzcxLCAxMDYyMTcwMDgpLFxuICAgIGUoMzUxNjA2NTgxNywgMzYwNjAwODM0NCksXG4gICAgZSgzNjAwMzUyODA0LCAxNDMyNzI1Nzc2KSxcbiAgICBlKDQwOTQ1NzE5MDksIDE0NjcwMzE1OTQpLFxuICAgIGUoMjc1NDIzMzQ0LCA4NTExNjk3MjApLFxuICAgIGUoNDMwMjI3NzM0LCAzMTAwODIzNzUyKSxcbiAgICBlKDUwNjk0ODYxNiwgMTM2MzI1ODE5NSksXG4gICAgZSg2NTkwNjA1NTYsIDM3NTA2ODU1OTMpLFxuICAgIGUoODgzOTk3ODc3LCAzNzg1MDUwMjgwKSxcbiAgICBlKDk1ODEzOTU3MSwgMzMxODMwNzQyNyksXG4gICAgZSgxMzIyODIyMjE4LCAzODEyNzIzNDAzKSxcbiAgICBlKDE1MzcwMDIwNjMsIDIwMDMwMzQ5OTUpLFxuICAgIGUoMTc0Nzg3Mzc3OSwgMzYwMjAzNjg5OSksXG4gICAgZSgxOTU1NTYyMjIyLCAxNTc1OTkwMDEyKSxcbiAgICBlKDIwMjQxMDQ4MTUsIDExMjU1OTI5MjgpLFxuICAgIGUoMjIyNzczMDQ1MiwgMjcxNjkwNDMwNiksXG4gICAgZSgyMzYxODUyNDI0LCA0NDI3NzYwNDQpLFxuICAgIGUoMjQyODQzNjQ3NCwgNTkzNjk4MzQ0KSxcbiAgICBlKDI3NTY3MzQxODcsIDM3MzMxMTAyNDkpLFxuICAgIGUoMzIwNDAzMTQ3OSwgMjk5OTM1MTU3MyksXG4gICAgZSgzMzI5MzI1Mjk4LCAzODE1OTIwNDI3KSxcbiAgICBlKDMzOTE1Njk2MTQsIDM5MjgzODM5MDApLFxuICAgIGUoMzUxNTI2NzI3MSwgNTY2MjgwNzExKSxcbiAgICBlKDM5NDAxODc2MDYsIDM0NTQwNjk1MzQpLFxuICAgIGUoNDExODYzMDI3MSwgNDAwMDIzOTk5MiksXG4gICAgZSgxMTY0MTg0NzQsIDE5MTQxMzg1NTQpLFxuICAgIGUoMTc0MjkyNDIxLCAyNzMxMDU1MjcwKSxcbiAgICBlKDI4OTM4MDM1NiwgMzIwMzk5MzAwNiksXG4gICAgZSg0NjAzOTMyNjksIDMyMDYyMDMxNSksXG4gICAgZSg2ODU0NzE3MzMsIDU4NzQ5NjgzNiksXG4gICAgZSg4NTIxNDI5NzEsIDEwODY3OTI4NTEpLFxuICAgIGUoMTAxNzAzNjI5OCwgMzY1NTQzMTAwKSxcbiAgICBlKDExMjYwMDA1ODAsIDI2MTgyOTc2NzYpLFxuICAgIGUoXG4gICAgICAxMjg4MDMzNDcwLFxuICAgICAgMzQwOTg1NTE1OFxuICAgICksXG4gICAgZSgxNTAxNTA1OTQ4LCA0MjM0NTA5ODY2KSxcbiAgICBlKDE2MDcxNjc5MTUsIDk4NzE2NzQ2OCksXG4gICAgZSgxODE2NDAyMzE2LCAxMjQ2MTg5NTkxKVxuICBdLCB1ID0gW10sIHAgPSAwOyA4MCA+IHA7IHArKykgdVtwXSA9IGUoKTtcbiAgbiA9IG4uU0hBNTEyID0gci5leHRlbmQoeyBfZG9SZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faGFzaCA9IG5ldyBzLmluaXQoW25ldyBpLmluaXQoMTc3OTAzMzcwMywgNDA4OTIzNTcyMCksIG5ldyBpLmluaXQoMzE0NDEzNDI3NywgMjIyNzg3MzU5NSksIG5ldyBpLmluaXQoMTAxMzkwNDI0MiwgNDI3MTE3NTcyMyksIG5ldyBpLmluaXQoMjc3MzQ4MDc2MiwgMTU5NTc1MDEyOSksIG5ldyBpLmluaXQoMTM1OTg5MzExOSwgMjkxNzU2NTEzNyksIG5ldyBpLmluaXQoMjYwMDgyMjkyNCwgNzI1NTExMTk5KSwgbmV3IGkuaW5pdCg1Mjg3MzQ2MzUsIDQyMTUzODk1NDcpLCBuZXcgaS5pbml0KDE1NDE0NTkyMjUsIDMyNzAzMzIwOSldKTtcbiAgfSwgX2RvUHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbihjLCB5KSB7XG4gICAgZm9yICh2YXIgYiA9IHRoaXMuX2hhc2gud29yZHMsIHYgPSBiWzBdLCBvID0gYlsxXSwgbCA9IGJbMl0sIGYgPSBiWzNdLCBkID0gYls0XSwgZyA9IGJbNV0sIFMgPSBiWzZdLCBiID0gYls3XSwgRCA9IHYuaGlnaCwgQSA9IHYubG93LCBJID0gby5oaWdoLCBtID0gby5sb3csIEUgPSBsLmhpZ2gsIHcgPSBsLmxvdywgeCA9IGYuaGlnaCwgRiA9IGYubG93LCBQID0gZC5oaWdoLCBUID0gZC5sb3csIEggPSBnLmhpZ2gsIEMgPSBnLmxvdywgQiA9IFMuaGlnaCwgTyA9IFMubG93LCBqID0gYi5oaWdoLCBmZSA9IGIubG93LCBaID0gRCwgWCA9IEEsIHJlID0gSSwgbmUgPSBtLCBoZSA9IEUsIHNlID0gdywga2UgPSB4LCBjZSA9IEYsIE0gPSBQLCBHID0gVCwgUSA9IEgsIGVlID0gQywgcGUgPSBCLCB0ZSA9IE8sIE1lID0gaiwgTmUgPSBmZSwgeGUgPSAwOyA4MCA+IHhlOyB4ZSsrKSB7XG4gICAgICB2YXIgQ2UgPSB1W3hlXTtcbiAgICAgIGlmICgxNiA+IHhlKSB2YXIgeWUgPSBDZS5oaWdoID0gY1t5ICsgMiAqIHhlXSB8IDAsIFUgPSBDZS5sb3cgPSBjW3kgKyAyICogeGUgKyAxXSB8IDA7XG4gICAgICBlbHNlIHtcbiAgICAgICAgdmFyIHllID0gdVt4ZSAtIDE1XSwgVSA9IHllLmhpZ2gsIEZlID0geWUubG93LCB5ZSA9IChVID4+PiAxIHwgRmUgPDwgMzEpIF4gKFUgPj4+IDggfCBGZSA8PCAyNCkgXiBVID4+PiA3LCBGZSA9IChGZSA+Pj4gMSB8IFUgPDwgMzEpIF4gKEZlID4+PiA4IHwgVSA8PCAyNCkgXiAoRmUgPj4+IDcgfCBVIDw8IDI1KSwgSGUgPSB1W3hlIC0gMl0sIFUgPSBIZS5oaWdoLCAkID0gSGUubG93LCBIZSA9IChVID4+PiAxOSB8ICQgPDwgMTMpIF4gKFUgPDwgMyB8ICQgPj4+IDI5KSBeIFUgPj4+IDYsICQgPSAoJCA+Pj4gMTkgfCBVIDw8IDEzKSBeICgkIDw8IDMgfCBVID4+PiAyOSkgXiAoJCA+Pj4gNiB8IFUgPDwgMjYpLCBVID0gdVt4ZSAtIDddLCBRZSA9IFUuaGlnaCwgSWUgPSB1W3hlIC0gMTZdLCBiZSA9IEllLmhpZ2gsIEllID0gSWUubG93LCBVID0gRmUgKyBVLmxvdywgeWUgPSB5ZSArIFFlICsgKFUgPj4+IDAgPCBGZSA+Pj4gMCA/IDEgOiAwKSwgVSA9IFUgKyAkLCB5ZSA9IHllICsgSGUgKyAoVSA+Pj4gMCA8ICQgPj4+IDAgPyAxIDogMCksIFUgPSBVICsgSWUsIHllID0geWUgKyBiZSArIChVID4+PiAwIDwgSWUgPj4+IDAgPyAxIDogMCk7XG4gICAgICAgIENlLmhpZ2ggPSB5ZSwgQ2UubG93ID0gVTtcbiAgICAgIH1cbiAgICAgIHZhciBRZSA9IE0gJiBRIF4gfk0gJiBwZSwgSWUgPSBHICYgZWUgXiB+RyAmIHRlLCBDZSA9IFogJiByZSBeIFogJiBoZSBeIHJlICYgaGUsIEt0ID0gWCAmIG5lIF4gWCAmIHNlIF4gbmUgJiBzZSwgRmUgPSAoWiA+Pj4gMjggfCBYIDw8IDQpIF4gKFogPDwgMzAgfCBYID4+PiAyKSBeIChaIDw8IDI1IHwgWCA+Pj4gNyksIEhlID0gKFggPj4+IDI4IHwgWiA8PCA0KSBeIChYIDw8IDMwIHwgWiA+Pj4gMikgXiAoWCA8PCAyNSB8IFogPj4+IDcpLCAkID0gaFt4ZV0sIEx0ID0gJC5oaWdoLCBjdCA9ICQubG93LCAkID0gTmUgKyAoKEcgPj4+IDE0IHwgTSA8PCAxOCkgXiAoRyA+Pj4gMTggfCBNIDw8IDE0KSBeIChHIDw8IDIzIHwgTSA+Pj4gOSkpLCBiZSA9IE1lICsgKChNID4+PiAxNCB8IEcgPDwgMTgpIF4gKE0gPj4+IDE4IHwgRyA8PCAxNCkgXiAoTSA8PCAyMyB8IEcgPj4+IDkpKSArICgkID4+PiAwIDwgTmUgPj4+IDAgPyAxIDogMCksICQgPSAkICsgSWUsIGJlID0gYmUgKyBRZSArICgkID4+PiAwIDwgSWUgPj4+IDAgPyAxIDogMCksICQgPSAkICsgY3QsIGJlID0gYmUgKyBMdCArICgkID4+PiAwIDwgY3QgPj4+IDAgPyAxIDogMCksICQgPSAkICsgVSwgYmUgPSBiZSArIHllICsgKCQgPj4+IDAgPCBVID4+PiAwID8gMSA6IDApLCBVID0gSGUgKyBLdCwgQ2UgPSBGZSArIENlICsgKFUgPj4+IDAgPCBIZSA+Pj4gMCA/IDEgOiAwKSwgTWUgPSBwZSwgTmUgPSB0ZSwgcGUgPSBRLCB0ZSA9IGVlLCBRID0gTSwgZWUgPSBHLCBHID0gY2UgKyAkIHwgMCwgTSA9IGtlICsgYmUgKyAoRyA+Pj4gMCA8IGNlID4+PiAwID8gMSA6IDApIHwgMCwga2UgPSBoZSwgY2UgPSBzZSwgaGUgPSByZSwgc2UgPSBuZSwgcmUgPSBaLCBuZSA9IFgsIFggPSAkICsgVSB8IDAsIFogPSBiZSArIENlICsgKFggPj4+IDAgPCAkID4+PiAwID8gMSA6IDApIHwgMDtcbiAgICB9XG4gICAgQSA9IHYubG93ID0gQSArIFgsIHYuaGlnaCA9IEQgKyBaICsgKEEgPj4+IDAgPCBYID4+PiAwID8gMSA6IDApLCBtID0gby5sb3cgPSBtICsgbmUsIG8uaGlnaCA9IEkgKyByZSArIChtID4+PiAwIDwgbmUgPj4+IDAgPyAxIDogMCksIHcgPSBsLmxvdyA9IHcgKyBzZSwgbC5oaWdoID0gRSArIGhlICsgKHcgPj4+IDAgPCBzZSA+Pj4gMCA/IDEgOiAwKSwgRiA9IGYubG93ID0gRiArIGNlLCBmLmhpZ2ggPSB4ICsga2UgKyAoRiA+Pj4gMCA8IGNlID4+PiAwID8gMSA6IDApLCBUID0gZC5sb3cgPSBUICsgRywgZC5oaWdoID0gUCArIE0gKyAoVCA+Pj4gMCA8IEcgPj4+IDAgPyAxIDogMCksIEMgPSBnLmxvdyA9IEMgKyBlZSwgZy5oaWdoID0gSCArIFEgKyAoQyA+Pj4gMCA8IGVlID4+PiAwID8gMSA6IDApLCBPID0gUy5sb3cgPSBPICsgdGUsIFMuaGlnaCA9IEIgKyBwZSArIChPID4+PiAwIDwgdGUgPj4+IDAgPyAxIDogMCksIGZlID0gYi5sb3cgPSBmZSArIE5lLCBiLmhpZ2ggPSBqICsgTWUgKyAoZmUgPj4+IDAgPCBOZSA+Pj4gMCA/IDEgOiAwKTtcbiAgfSwgX2RvRmluYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjID0gdGhpcy5fZGF0YSwgeSA9IGMud29yZHMsIHYgPSA4ICogdGhpcy5fbkRhdGFCeXRlcywgbyA9IDggKiBjLnNpZ0J5dGVzO1xuICAgIHJldHVybiB5W28gPj4+IDVdIHw9IDEyOCA8PCAyNCAtIG8gJSAzMiwgeVsobyArIDEyOCA+Pj4gMTAgPDwgNSkgKyAzMF0gPSBNYXRoLmZsb29yKHYgLyA0Mjk0OTY3Mjk2KSwgeVsobyArIDEyOCA+Pj4gMTAgPDwgNSkgKyAzMV0gPSB2LCBjLnNpZ0J5dGVzID0gNCAqIHkubGVuZ3RoLCB0aGlzLl9wcm9jZXNzKCksIHRoaXMuX2hhc2gudG9YMzIoKTtcbiAgfSwgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjID0gci5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIHJldHVybiBjLl9oYXNoID0gdGhpcy5faGFzaC5jbG9uZSgpLCBjO1xuICB9LCBibG9ja1NpemU6IDMyIH0pLCB0LlNIQTUxMiA9IHIuX2NyZWF0ZUhlbHBlcihuKSwgdC5IbWFjU0hBNTEyID0gci5fY3JlYXRlSG1hY0hlbHBlcihuKTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gSywgcyA9IGUueDY0LCB0ID0gcy5Xb3JkLCByID0gcy5Xb3JkQXJyYXksIHMgPSBlLmFsZ28sIGkgPSBzLlNIQTUxMiwgcyA9IHMuU0hBMzg0ID0gaS5leHRlbmQoeyBfZG9SZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faGFzaCA9IG5ldyByLmluaXQoW25ldyB0LmluaXQoMzQxODA3MDM2NSwgMzIzODM3MTAzMiksIG5ldyB0LmluaXQoMTY1NDI3MDI1MCwgOTE0MTUwNjYzKSwgbmV3IHQuaW5pdCgyNDM4NTI5MzcwLCA4MTI3MDI5OTkpLCBuZXcgdC5pbml0KDM1NTQ2MjM2MCwgNDE0NDkxMjY5NyksIG5ldyB0LmluaXQoMTczMTQwNTQxNSwgNDI5MDc3NTg1NyksIG5ldyB0LmluaXQoMjM5NDE4MDIzMSwgMTc1MDYwMzAyNSksIG5ldyB0LmluaXQoMzY3NTAwODUyNSwgMTY5NDA3NjgzOSksIG5ldyB0LmluaXQoMTIwMzA2MjgxMywgMzIwNDA3NTQyOCldKTtcbiAgfSwgX2RvRmluYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gaS5fZG9GaW5hbGl6ZS5jYWxsKHRoaXMpO1xuICAgIHJldHVybiBuLnNpZ0J5dGVzIC09IDE2LCBuO1xuICB9IH0pO1xuICBlLlNIQTM4NCA9IGkuX2NyZWF0ZUhlbHBlcihzKSwgZS5IbWFjU0hBMzg0ID0gaS5fY3JlYXRlSG1hY0hlbHBlcihzKTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gSywgYyA9IGUubGliLCB0ID0gYy5Xb3JkQXJyYXksIHIgPSBjLkhhc2hlciwgYyA9IGUuYWxnbywgaSA9IHQuY3JlYXRlKFswLCAxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEyLCAxMywgMTQsIDE1LCA3LCA0LCAxMywgMSwgMTAsIDYsIDE1LCAzLCAxMiwgMCwgOSwgNSwgMiwgMTQsIDExLCA4LCAzLCAxMCwgMTQsIDQsIDksIDE1LCA4LCAxLCAyLCA3LCAwLCA2LCAxMywgMTEsIDUsIDEyLCAxLCA5LCAxMSwgMTAsIDAsIDgsIDEyLCA0LCAxMywgMywgNywgMTUsIDE0LCA1LCA2LCAyLCA0LCAwLCA1LCA5LCA3LCAxMiwgMiwgMTAsIDE0LCAxLCAzLCA4LCAxMSwgNiwgMTUsIDEzXSksIHMgPSB0LmNyZWF0ZShbNSwgMTQsIDcsIDAsIDksIDIsIDExLCA0LCAxMywgNiwgMTUsIDgsIDEsIDEwLCAzLCAxMiwgNiwgMTEsIDMsIDcsIDAsIDEzLCA1LCAxMCwgMTQsIDE1LCA4LCAxMiwgNCwgOSwgMSwgMiwgMTUsIDUsIDEsIDMsIDcsIDE0LCA2LCA5LCAxMSwgOCwgMTIsIDIsIDEwLCAwLCA0LCAxMywgOCwgNiwgNCwgMSwgMywgMTEsIDE1LCAwLCA1LCAxMiwgMiwgMTMsIDksIDcsIDEwLCAxNCwgMTIsIDE1LCAxMCwgNCwgMSwgNSwgOCwgNywgNiwgMiwgMTMsIDE0LCAwLCAzLCA5LCAxMV0pLCBuID0gdC5jcmVhdGUoW1xuICAgIDExLFxuICAgIDE0LFxuICAgIDE1LFxuICAgIDEyLFxuICAgIDUsXG4gICAgOCxcbiAgICA3LFxuICAgIDksXG4gICAgMTEsXG4gICAgMTMsXG4gICAgMTQsXG4gICAgMTUsXG4gICAgNixcbiAgICA3LFxuICAgIDksXG4gICAgOCxcbiAgICA3LFxuICAgIDYsXG4gICAgOCxcbiAgICAxMyxcbiAgICAxMSxcbiAgICA5LFxuICAgIDcsXG4gICAgMTUsXG4gICAgNyxcbiAgICAxMixcbiAgICAxNSxcbiAgICA5LFxuICAgIDExLFxuICAgIDcsXG4gICAgMTMsXG4gICAgMTIsXG4gICAgMTEsXG4gICAgMTMsXG4gICAgNixcbiAgICA3LFxuICAgIDE0LFxuICAgIDksXG4gICAgMTMsXG4gICAgMTUsXG4gICAgMTQsXG4gICAgOCxcbiAgICAxMyxcbiAgICA2LFxuICAgIDUsXG4gICAgMTIsXG4gICAgNyxcbiAgICA1LFxuICAgIDExLFxuICAgIDEyLFxuICAgIDE0LFxuICAgIDE1LFxuICAgIDE0LFxuICAgIDE1LFxuICAgIDksXG4gICAgOCxcbiAgICA5LFxuICAgIDE0LFxuICAgIDUsXG4gICAgNixcbiAgICA4LFxuICAgIDYsXG4gICAgNSxcbiAgICAxMixcbiAgICA5LFxuICAgIDE1LFxuICAgIDUsXG4gICAgMTEsXG4gICAgNixcbiAgICA4LFxuICAgIDEzLFxuICAgIDEyLFxuICAgIDUsXG4gICAgMTIsXG4gICAgMTMsXG4gICAgMTQsXG4gICAgMTEsXG4gICAgOCxcbiAgICA1LFxuICAgIDZcbiAgXSksIGggPSB0LmNyZWF0ZShbOCwgOSwgOSwgMTEsIDEzLCAxNSwgMTUsIDUsIDcsIDcsIDgsIDExLCAxNCwgMTQsIDEyLCA2LCA5LCAxMywgMTUsIDcsIDEyLCA4LCA5LCAxMSwgNywgNywgMTIsIDcsIDYsIDE1LCAxMywgMTEsIDksIDcsIDE1LCAxMSwgOCwgNiwgNiwgMTQsIDEyLCAxMywgNSwgMTQsIDEzLCAxMywgNywgNSwgMTUsIDUsIDgsIDExLCAxNCwgMTQsIDYsIDE0LCA2LCA5LCAxMiwgOSwgMTIsIDUsIDE1LCA4LCA4LCA1LCAxMiwgOSwgMTIsIDUsIDE0LCA2LCA4LCAxMywgNiwgNSwgMTUsIDEzLCAxMSwgMTFdKSwgdSA9IHQuY3JlYXRlKFswLCAxNTE4NTAwMjQ5LCAxODU5Nzc1MzkzLCAyNDAwOTU5NzA4LCAyODQwODUzODM4XSksIHAgPSB0LmNyZWF0ZShbXG4gICAgMTM1MjgyOTkyNixcbiAgICAxNTQ4NjAzNjg0LFxuICAgIDE4MzYwNzI2OTEsXG4gICAgMjA1Mzk5NDIxNyxcbiAgICAwXG4gIF0pLCBjID0gYy5SSVBFTUQxNjAgPSByLmV4dGVuZCh7IF9kb1Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9oYXNoID0gdC5jcmVhdGUoWzE3MzI1ODQxOTMsIDQwMjMyMzM0MTcsIDI1NjIzODMxMDIsIDI3MTczMzg3OCwgMzI4NTM3NzUyMF0pO1xuICB9LCBfZG9Qcm9jZXNzQmxvY2s6IGZ1bmN0aW9uKHksIHYpIHtcbiAgICBmb3IgKHZhciBvID0gMDsgMTYgPiBvOyBvKyspIHtcbiAgICAgIHZhciBsID0gdiArIG8sIGYgPSB5W2xdO1xuICAgICAgeVtsXSA9IChmIDw8IDggfCBmID4+PiAyNCkgJiAxNjcxMTkzNSB8IChmIDw8IDI0IHwgZiA+Pj4gOCkgJiA0Mjc4MjU1MzYwO1xuICAgIH1cbiAgICB2YXIgbCA9IHRoaXMuX2hhc2gud29yZHMsIGYgPSB1LndvcmRzLCBkID0gcC53b3JkcywgZyA9IGkud29yZHMsIFMgPSBzLndvcmRzLCBiID0gbi53b3JkcywgRCA9IGgud29yZHMsIEEsIEksIG0sIEUsIHcsIHgsIEYsIFAsIFQsIEg7XG4gICAgeCA9IEEgPSBsWzBdLCBGID0gSSA9IGxbMV0sIFAgPSBtID0gbFsyXSwgVCA9IEUgPSBsWzNdLCBIID0gdyA9IGxbNF07XG4gICAgZm9yICh2YXIgQywgbyA9IDA7IDgwID4gbzsgbyArPSAxKSBDID0gQSArIHlbdiArIGdbb11dIHwgMCwgQyA9IDE2ID4gbyA/IEMgKyAoKEkgXiBtIF4gRSkgKyBmWzBdKSA6IDMyID4gbyA/IEMgKyAoKEkgJiBtIHwgfkkgJiBFKSArIGZbMV0pIDogNDggPiBvID8gQyArICgoKEkgfCB+bSkgXiBFKSArIGZbMl0pIDogNjQgPiBvID8gQyArICgoSSAmIEUgfCBtICYgfkUpICsgZlszXSkgOiBDICsgKChJIF4gKG0gfCB+RSkpICsgZls0XSksIEMgfD0gMCwgQyA9IEMgPDwgYltvXSB8IEMgPj4+IDMyIC0gYltvXSwgQyA9IEMgKyB3IHwgMCwgQSA9IHcsIHcgPSBFLCBFID0gbSA8PCAxMCB8IG0gPj4+IDIyLCBtID0gSSwgSSA9IEMsIEMgPSB4ICsgeVt2ICsgU1tvXV0gfCAwLCBDID0gMTYgPiBvID8gQyArICgoRiBeIChQIHwgflQpKSArIGRbMF0pIDogMzIgPiBvID8gQyArICgoRiAmIFQgfCBQICYgflQpICsgZFsxXSkgOiA0OCA+IG8gPyBDICsgKCgoRiB8IH5QKSBeIFQpICsgZFsyXSkgOiA2NCA+IG8gPyBDICsgKChGICYgUCB8IH5GICYgVCkgKyBkWzNdKSA6IEMgKyAoKEYgXiBQIF4gVCkgKyBkWzRdKSwgQyB8PSAwLCBDID0gQyA8PCBEW29dIHwgQyA+Pj4gMzIgLSBEW29dLCBDID0gQyArIEggfCAwLCB4ID0gSCwgSCA9IFQsIFQgPSBQIDw8IDEwIHwgUCA+Pj4gMjIsIFAgPSBGLCBGID0gQztcbiAgICBDID0gbFsxXSArIG0gKyBUIHwgMCwgbFsxXSA9IGxbMl0gKyBFICsgSCB8IDAsIGxbMl0gPSBsWzNdICsgdyArIHggfCAwLCBsWzNdID0gbFs0XSArIEEgKyBGIHwgMCwgbFs0XSA9IGxbMF0gKyBJICsgUCB8IDAsIGxbMF0gPSBDO1xuICB9LCBfZG9GaW5hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHkgPSB0aGlzLl9kYXRhLCB2ID0geS53b3JkcywgbyA9IDggKiB0aGlzLl9uRGF0YUJ5dGVzLCBsID0gOCAqIHkuc2lnQnl0ZXM7XG4gICAgZm9yICh2W2wgPj4+IDVdIHw9IDEyOCA8PCAyNCAtIGwgJSAzMiwgdlsobCArIDY0ID4+PiA5IDw8IDQpICsgMTRdID0gKG8gPDwgOCB8IG8gPj4+IDI0KSAmIDE2NzExOTM1IHwgKG8gPDwgMjQgfCBvID4+PiA4KSAmIDQyNzgyNTUzNjAsIHkuc2lnQnl0ZXMgPSA0ICogKHYubGVuZ3RoICsgMSksIHRoaXMuX3Byb2Nlc3MoKSwgeSA9IHRoaXMuX2hhc2gsIHYgPSB5LndvcmRzLCBvID0gMDsgNSA+IG87IG8rKykgbCA9IHZbb10sIHZbb10gPSAobCA8PCA4IHwgbCA+Pj4gMjQpICYgMTY3MTE5MzUgfCAobCA8PCAyNCB8IGwgPj4+IDgpICYgNDI3ODI1NTM2MDtcbiAgICByZXR1cm4geTtcbiAgfSwgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB5ID0gci5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIHJldHVybiB5Ll9oYXNoID0gdGhpcy5faGFzaC5jbG9uZSgpLCB5O1xuICB9IH0pO1xuICBlLlJJUEVNRDE2MCA9IHIuX2NyZWF0ZUhlbHBlcihjKSwgZS5IbWFjUklQRU1EMTYwID0gci5fY3JlYXRlSG1hY0hlbHBlcihjKTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gSywgdCA9IGUuZW5jLlV0Zjg7XG4gIGUuYWxnby5ITUFDID0gZS5saWIuQmFzZS5leHRlbmQoeyBpbml0OiBmdW5jdGlvbihyLCBpKSB7XG4gICAgciA9IHRoaXMuX2hhc2hlciA9IG5ldyByLmluaXQoKSwgdHlwZW9mIGkgPT0gXCJzdHJpbmdcIiAmJiAoaSA9IHQucGFyc2UoaSkpO1xuICAgIHZhciBzID0gci5ibG9ja1NpemUsIG4gPSA0ICogcztcbiAgICBpLnNpZ0J5dGVzID4gbiAmJiAoaSA9IHIuZmluYWxpemUoaSkpLCBpLmNsYW1wKCk7XG4gICAgZm9yICh2YXIgaCA9IHRoaXMuX29LZXkgPSBpLmNsb25lKCksIHUgPSB0aGlzLl9pS2V5ID0gaS5jbG9uZSgpLCBwID0gaC53b3JkcywgYyA9IHUud29yZHMsIHkgPSAwOyB5IDwgczsgeSsrKSBwW3ldIF49IDE1NDk1NTY4MjgsIGNbeV0gXj0gOTA5NTIyNDg2O1xuICAgIGguc2lnQnl0ZXMgPSB1LnNpZ0J5dGVzID0gbiwgdGhpcy5yZXNldCgpO1xuICB9LCByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHIgPSB0aGlzLl9oYXNoZXI7XG4gICAgci5yZXNldCgpLCByLnVwZGF0ZSh0aGlzLl9pS2V5KTtcbiAgfSwgdXBkYXRlOiBmdW5jdGlvbihyKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hhc2hlci51cGRhdGUociksIHRoaXM7XG4gIH0sIGZpbmFsaXplOiBmdW5jdGlvbihyKSB7XG4gICAgdmFyIGkgPSB0aGlzLl9oYXNoZXI7XG4gICAgcmV0dXJuIHIgPSBpLmZpbmFsaXplKHIpLCBpLnJlc2V0KCksIGkuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChyKSk7XG4gIH0gfSk7XG59KSgpO1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IEssIGkgPSBlLmxpYiwgdCA9IGkuQmFzZSwgciA9IGkuV29yZEFycmF5LCBpID0gZS5hbGdvLCBzID0gaS5ITUFDLCBuID0gaS5QQktERjIgPSB0LmV4dGVuZCh7IGNmZzogdC5leHRlbmQoeyBrZXlTaXplOiA0LCBoYXNoZXI6IGkuU0hBMSwgaXRlcmF0aW9uczogMSB9KSwgaW5pdDogZnVuY3Rpb24oaCkge1xuICAgIHRoaXMuY2ZnID0gdGhpcy5jZmcuZXh0ZW5kKGgpO1xuICB9LCBjb21wdXRlOiBmdW5jdGlvbihoLCB1KSB7XG4gICAgZm9yICh2YXIgZiA9IHRoaXMuY2ZnLCBwID0gcy5jcmVhdGUoZi5oYXNoZXIsIGgpLCBjID0gci5jcmVhdGUoKSwgeSA9IHIuY3JlYXRlKFsxXSksIHYgPSBjLndvcmRzLCBvID0geS53b3JkcywgbCA9IGYua2V5U2l6ZSwgZiA9IGYuaXRlcmF0aW9uczsgdi5sZW5ndGggPCBsOyApIHtcbiAgICAgIHZhciBkID0gcC51cGRhdGUodSkuZmluYWxpemUoeSk7XG4gICAgICBwLnJlc2V0KCk7XG4gICAgICBmb3IgKHZhciBnID0gZC53b3JkcywgUyA9IGcubGVuZ3RoLCBiID0gZCwgRCA9IDE7IEQgPCBmOyBEKyspIHtcbiAgICAgICAgYiA9IHAuZmluYWxpemUoYiksIHAucmVzZXQoKTtcbiAgICAgICAgZm9yICh2YXIgQSA9IGIud29yZHMsIEkgPSAwOyBJIDwgUzsgSSsrKSBnW0ldIF49IEFbSV07XG4gICAgICB9XG4gICAgICBjLmNvbmNhdChkKSwgb1swXSsrO1xuICAgIH1cbiAgICByZXR1cm4gYy5zaWdCeXRlcyA9IDQgKiBsLCBjO1xuICB9IH0pO1xuICBlLlBCS0RGMiA9IGZ1bmN0aW9uKGgsIHUsIHApIHtcbiAgICByZXR1cm4gbi5jcmVhdGUocCkuY29tcHV0ZShoLCB1KTtcbiAgfTtcbn0pKCk7XG4vKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi9cbiAqL1xudmFyIEtlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIsIEV0ID0gXCI9XCI7XG5mdW5jdGlvbiBfZShlKSB7XG4gIHZhciB0LCByLCBpID0gXCJcIjtcbiAgZm9yICh0ID0gMDsgdCArIDMgPD0gZS5sZW5ndGg7IHQgKz0gMylcbiAgICByID0gcGFyc2VJbnQoZS5zdWJzdHJpbmcodCwgdCArIDMpLCAxNiksIGkgKz0gS2UuY2hhckF0KHIgPj4gNikgKyBLZS5jaGFyQXQociAmIDYzKTtcbiAgZm9yICh0ICsgMSA9PSBlLmxlbmd0aCA/IChyID0gcGFyc2VJbnQoZS5zdWJzdHJpbmcodCwgdCArIDEpLCAxNiksIGkgKz0gS2UuY2hhckF0KHIgPDwgMikpIDogdCArIDIgPT0gZS5sZW5ndGggJiYgKHIgPSBwYXJzZUludChlLnN1YnN0cmluZyh0LCB0ICsgMiksIDE2KSwgaSArPSBLZS5jaGFyQXQociA+PiAyKSArIEtlLmNoYXJBdCgociAmIDMpIDw8IDQpKTsgKGkubGVuZ3RoICYgMykgPiAwOyApXG4gICAgaSArPSBFdDtcbiAgcmV0dXJuIGk7XG59XG5mdW5jdGlvbiBpdChlKSB7XG4gIHZhciB0ID0gXCJcIiwgciwgaSA9IDAsIHMsIG47XG4gIGZvciAociA9IDA7IHIgPCBlLmxlbmd0aCAmJiBlLmNoYXJBdChyKSAhPSBFdDsgKytyKVxuICAgIG4gPSBLZS5pbmRleE9mKGUuY2hhckF0KHIpKSwgIShuIDwgMCkgJiYgKGkgPT0gMCA/ICh0ICs9IERlKG4gPj4gMiksIHMgPSBuICYgMywgaSA9IDEpIDogaSA9PSAxID8gKHQgKz0gRGUocyA8PCAyIHwgbiA+PiA0KSwgcyA9IG4gJiAxNSwgaSA9IDIpIDogaSA9PSAyID8gKHQgKz0gRGUocyksIHQgKz0gRGUobiA+PiAyKSwgcyA9IG4gJiAzLCBpID0gMykgOiAodCArPSBEZShzIDw8IDIgfCBuID4+IDQpLCB0ICs9IERlKG4gJiAxNSksIGkgPSAwKSk7XG4gIHJldHVybiBpID09IDEgJiYgKHQgKz0gRGUocyA8PCAyKSksIHQ7XG59XG4vKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi9cbiovXG52YXIgVGU7XG5mdW5jdGlvbiBSKGUsIHQsIHIpIHtcbiAgZSAhPSBudWxsICYmICh0eXBlb2YgZSA9PSBcIm51bWJlclwiID8gdGhpcy5mcm9tTnVtYmVyKGUsIHQsIHIpIDogdCA9PSBudWxsICYmIHR5cGVvZiBlICE9IFwic3RyaW5nXCIgPyB0aGlzLmZyb21TdHJpbmcoZSwgMjU2KSA6IHRoaXMuZnJvbVN0cmluZyhlLCB0KSk7XG59XG5mdW5jdGlvbiBfKCkge1xuICByZXR1cm4gbmV3IFIobnVsbCk7XG59XG5mdW5jdGlvbiBxdChlLCB0LCByLCBpLCBzLCBuKSB7XG4gIGZvciAoOyAtLW4gPj0gMDsgKSB7XG4gICAgdmFyIGggPSB0ICogdGhpc1tlKytdICsgcltpXSArIHM7XG4gICAgcyA9IE1hdGguZmxvb3IoaCAvIDY3MTA4ODY0KSwgcltpKytdID0gaCAmIDY3MTA4ODYzO1xuICB9XG4gIHJldHVybiBzO1xufVxuZnVuY3Rpb24ga3QoZSwgdCwgciwgaSwgcywgbikge1xuICBmb3IgKHZhciBoID0gdCAmIDMyNzY3LCB1ID0gdCA+PiAxNTsgLS1uID49IDA7ICkge1xuICAgIHZhciBwID0gdGhpc1tlXSAmIDMyNzY3LCBjID0gdGhpc1tlKytdID4+IDE1LCB5ID0gdSAqIHAgKyBjICogaDtcbiAgICBwID0gaCAqIHAgKyAoKHkgJiAzMjc2NykgPDwgMTUpICsgcltpXSArIChzICYgMTA3Mzc0MTgyMyksIHMgPSAocCA+Pj4gMzApICsgKHkgPj4+IDE1KSArIHUgKiBjICsgKHMgPj4+IDMwKSwgcltpKytdID0gcCAmIDEwNzM3NDE4MjM7XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5mdW5jdGlvbiBNdChlLCB0LCByLCBpLCBzLCBuKSB7XG4gIGZvciAodmFyIGggPSB0ICYgMTYzODMsIHUgPSB0ID4+IDE0OyAtLW4gPj0gMDsgKSB7XG4gICAgdmFyIHAgPSB0aGlzW2VdICYgMTYzODMsIGMgPSB0aGlzW2UrK10gPj4gMTQsIHkgPSB1ICogcCArIGMgKiBoO1xuICAgIHAgPSBoICogcCArICgoeSAmIDE2MzgzKSA8PCAxNCkgKyByW2ldICsgcywgcyA9IChwID4+IDI4KSArICh5ID4+IDE0KSArIHUgKiBjLCByW2krK10gPSBwICYgMjY4NDM1NDU1O1xuICB9XG4gIHJldHVybiBzO1xufVxuVWUuYXBwTmFtZSA9PSBcIk1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlclwiID8gKFIucHJvdG90eXBlLmFtID0ga3QsIFRlID0gMzApIDogVWUuYXBwTmFtZSAhPSBcIk5ldHNjYXBlXCIgPyAoUi5wcm90b3R5cGUuYW0gPSBxdCwgVGUgPSAyNikgOiAoUi5wcm90b3R5cGUuYW0gPSBNdCwgVGUgPSAyOCk7XG5SLnByb3RvdHlwZS5EQiA9IFRlO1xuUi5wcm90b3R5cGUuRE0gPSAoMSA8PCBUZSkgLSAxO1xuUi5wcm90b3R5cGUuRFYgPSAxIDw8IFRlO1xudmFyIG50ID0gNTI7XG5SLnByb3RvdHlwZS5GViA9IE1hdGgucG93KDIsIG50KTtcblIucHJvdG90eXBlLkYxID0gbnQgLSBUZTtcblIucHJvdG90eXBlLkYyID0gMiAqIFRlIC0gbnQ7XG52YXIgX3QgPSBcIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLCAkZSA9IG5ldyBBcnJheSgpLCBMZSwgbWU7XG5MZSA9IDQ4O1xuZm9yIChtZSA9IDA7IG1lIDw9IDk7ICsrbWUpXG4gICRlW0xlKytdID0gbWU7XG5MZSA9IDk3O1xuZm9yIChtZSA9IDEwOyBtZSA8IDM2OyArK21lKVxuICAkZVtMZSsrXSA9IG1lO1xuTGUgPSA2NTtcbmZvciAobWUgPSAxMDsgbWUgPCAzNjsgKyttZSlcbiAgJGVbTGUrK10gPSBtZTtcbmZ1bmN0aW9uIERlKGUpIHtcbiAgcmV0dXJuIF90LmNoYXJBdChlKTtcbn1cbmZ1bmN0aW9uIHd0KGUsIHQpIHtcbiAgdmFyIHIgPSAkZVtlLmNoYXJDb2RlQXQodCldO1xuICByZXR1cm4gciA/PyAtMTtcbn1cbmZ1bmN0aW9uIFV0KGUpIHtcbiAgZm9yICh2YXIgdCA9IHRoaXMudCAtIDE7IHQgPj0gMDsgLS10KVxuICAgIGVbdF0gPSB0aGlzW3RdO1xuICBlLnQgPSB0aGlzLnQsIGUucyA9IHRoaXMucztcbn1cbmZ1bmN0aW9uIHp0KGUpIHtcbiAgdGhpcy50ID0gMSwgdGhpcy5zID0gZSA8IDAgPyAtMSA6IDAsIGUgPiAwID8gdGhpc1swXSA9IGUgOiBlIDwgLTEgPyB0aGlzWzBdID0gZSArIHRoaXMuRFYgOiB0aGlzLnQgPSAwO1xufVxuZnVuY3Rpb24gUmUoZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIHQuZnJvbUludChlKSwgdDtcbn1cbmZ1bmN0aW9uIEd0KGUsIHQpIHtcbiAgdmFyIHI7XG4gIGlmICh0ID09IDE2KVxuICAgIHIgPSA0O1xuICBlbHNlIGlmICh0ID09IDgpXG4gICAgciA9IDM7XG4gIGVsc2UgaWYgKHQgPT0gMjU2KVxuICAgIHIgPSA4O1xuICBlbHNlIGlmICh0ID09IDIpXG4gICAgciA9IDE7XG4gIGVsc2UgaWYgKHQgPT0gMzIpXG4gICAgciA9IDU7XG4gIGVsc2UgaWYgKHQgPT0gNClcbiAgICByID0gMjtcbiAgZWxzZSB7XG4gICAgdGhpcy5mcm9tUmFkaXgoZSwgdCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMudCA9IDAsIHRoaXMucyA9IDA7XG4gIGZvciAodmFyIGkgPSBlLmxlbmd0aCwgcyA9ICExLCBuID0gMDsgLS1pID49IDA7ICkge1xuICAgIHZhciBoID0gciA9PSA4ID8gZVtpXSAmIDI1NSA6IHd0KGUsIGkpO1xuICAgIGlmIChoIDwgMCkge1xuICAgICAgZS5jaGFyQXQoaSkgPT0gXCItXCIgJiYgKHMgPSAhMCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcyA9ICExLCBuID09IDAgPyB0aGlzW3RoaXMudCsrXSA9IGggOiBuICsgciA+IHRoaXMuREIgPyAodGhpc1t0aGlzLnQgLSAxXSB8PSAoaCAmICgxIDw8IHRoaXMuREIgLSBuKSAtIDEpIDw8IG4sIHRoaXNbdGhpcy50KytdID0gaCA+PiB0aGlzLkRCIC0gbikgOiB0aGlzW3RoaXMudCAtIDFdIHw9IGggPDwgbiwgbiArPSByLCBuID49IHRoaXMuREIgJiYgKG4gLT0gdGhpcy5EQik7XG4gIH1cbiAgciA9PSA4ICYmIGVbMF0gJiAxMjggJiYgKHRoaXMucyA9IC0xLCBuID4gMCAmJiAodGhpc1t0aGlzLnQgLSAxXSB8PSAoMSA8PCB0aGlzLkRCIC0gbikgLSAxIDw8IG4pKSwgdGhpcy5jbGFtcCgpLCBzICYmIFIuWkVSTy5zdWJUbyh0aGlzLCB0aGlzKTtcbn1cbmZ1bmN0aW9uIFd0KCkge1xuICBmb3IgKHZhciBlID0gdGhpcy5zICYgdGhpcy5ETTsgdGhpcy50ID4gMCAmJiB0aGlzW3RoaXMudCAtIDFdID09IGU7IClcbiAgICAtLXRoaXMudDtcbn1cbmZ1bmN0aW9uIFh0KGUpIHtcbiAgaWYgKHRoaXMucyA8IDApXG4gICAgcmV0dXJuIFwiLVwiICsgdGhpcy5uZWdhdGUoKS50b1N0cmluZyhlKTtcbiAgdmFyIHQ7XG4gIGlmIChlID09IDE2KVxuICAgIHQgPSA0O1xuICBlbHNlIGlmIChlID09IDgpXG4gICAgdCA9IDM7XG4gIGVsc2UgaWYgKGUgPT0gMilcbiAgICB0ID0gMTtcbiAgZWxzZSBpZiAoZSA9PSAzMilcbiAgICB0ID0gNTtcbiAgZWxzZSBpZiAoZSA9PSA0KVxuICAgIHQgPSAyO1xuICBlbHNlXG4gICAgcmV0dXJuIHRoaXMudG9SYWRpeChlKTtcbiAgdmFyIHIgPSAoMSA8PCB0KSAtIDEsIGksIHMgPSAhMSwgbiA9IFwiXCIsIGggPSB0aGlzLnQsIHUgPSB0aGlzLkRCIC0gaCAqIHRoaXMuREIgJSB0O1xuICBpZiAoaC0tID4gMClcbiAgICBmb3IgKHUgPCB0aGlzLkRCICYmIChpID0gdGhpc1toXSA+PiB1KSA+IDAgJiYgKHMgPSAhMCwgbiA9IERlKGkpKTsgaCA+PSAwOyApXG4gICAgICB1IDwgdCA/IChpID0gKHRoaXNbaF0gJiAoMSA8PCB1KSAtIDEpIDw8IHQgLSB1LCBpIHw9IHRoaXNbLS1oXSA+PiAodSArPSB0aGlzLkRCIC0gdCkpIDogKGkgPSB0aGlzW2hdID4+ICh1IC09IHQpICYgciwgdSA8PSAwICYmICh1ICs9IHRoaXMuREIsIC0taCkpLCBpID4gMCAmJiAocyA9ICEwKSwgcyAmJiAobiArPSBEZShpKSk7XG4gIHJldHVybiBzID8gbiA6IFwiMFwiO1xufVxuZnVuY3Rpb24gSnQoKSB7XG4gIHZhciBlID0gXygpO1xuICByZXR1cm4gUi5aRVJPLnN1YlRvKHRoaXMsIGUpLCBlO1xufVxuZnVuY3Rpb24gJHQoKSB7XG4gIHJldHVybiB0aGlzLnMgPCAwID8gdGhpcy5uZWdhdGUoKSA6IHRoaXM7XG59XG5mdW5jdGlvbiBZdChlKSB7XG4gIHZhciB0ID0gdGhpcy5zIC0gZS5zO1xuICBpZiAodCAhPSAwKVxuICAgIHJldHVybiB0O1xuICB2YXIgciA9IHRoaXMudDtcbiAgaWYgKHQgPSByIC0gZS50LCB0ICE9IDApXG4gICAgcmV0dXJuIHRoaXMucyA8IDAgPyAtdCA6IHQ7XG4gIGZvciAoOyAtLXIgPj0gMDsgKVxuICAgIGlmICgodCA9IHRoaXNbcl0gLSBlW3JdKSAhPSAwKVxuICAgICAgcmV0dXJuIHQ7XG4gIHJldHVybiAwO1xufVxuZnVuY3Rpb24gWWUoZSkge1xuICB2YXIgdCA9IDEsIHI7XG4gIHJldHVybiAociA9IGUgPj4+IDE2KSAhPSAwICYmIChlID0gciwgdCArPSAxNiksIChyID0gZSA+PiA4KSAhPSAwICYmIChlID0gciwgdCArPSA4KSwgKHIgPSBlID4+IDQpICE9IDAgJiYgKGUgPSByLCB0ICs9IDQpLCAociA9IGUgPj4gMikgIT0gMCAmJiAoZSA9IHIsIHQgKz0gMiksIChyID0gZSA+PiAxKSAhPSAwICYmIChlID0gciwgdCArPSAxKSwgdDtcbn1cbmZ1bmN0aW9uIFp0KCkge1xuICByZXR1cm4gdGhpcy50IDw9IDAgPyAwIDogdGhpcy5EQiAqICh0aGlzLnQgLSAxKSArIFllKHRoaXNbdGhpcy50IC0gMV0gXiB0aGlzLnMgJiB0aGlzLkRNKTtcbn1cbmZ1bmN0aW9uIFF0KGUsIHQpIHtcbiAgdmFyIHI7XG4gIGZvciAociA9IHRoaXMudCAtIDE7IHIgPj0gMDsgLS1yKVxuICAgIHRbciArIGVdID0gdGhpc1tyXTtcbiAgZm9yIChyID0gZSAtIDE7IHIgPj0gMDsgLS1yKVxuICAgIHRbcl0gPSAwO1xuICB0LnQgPSB0aGlzLnQgKyBlLCB0LnMgPSB0aGlzLnM7XG59XG5mdW5jdGlvbiBlcihlLCB0KSB7XG4gIGZvciAodmFyIHIgPSBlOyByIDwgdGhpcy50OyArK3IpXG4gICAgdFtyIC0gZV0gPSB0aGlzW3JdO1xuICB0LnQgPSBNYXRoLm1heCh0aGlzLnQgLSBlLCAwKSwgdC5zID0gdGhpcy5zO1xufVxuZnVuY3Rpb24gdHIoZSwgdCkge1xuICB2YXIgciA9IGUgJSB0aGlzLkRCLCBpID0gdGhpcy5EQiAtIHIsIHMgPSAoMSA8PCBpKSAtIDEsIG4gPSBNYXRoLmZsb29yKGUgLyB0aGlzLkRCKSwgaCA9IHRoaXMucyA8PCByICYgdGhpcy5ETSwgdTtcbiAgZm9yICh1ID0gdGhpcy50IC0gMTsgdSA+PSAwOyAtLXUpXG4gICAgdFt1ICsgbiArIDFdID0gdGhpc1t1XSA+PiBpIHwgaCwgaCA9ICh0aGlzW3VdICYgcykgPDwgcjtcbiAgZm9yICh1ID0gbiAtIDE7IHUgPj0gMDsgLS11KVxuICAgIHRbdV0gPSAwO1xuICB0W25dID0gaCwgdC50ID0gdGhpcy50ICsgbiArIDEsIHQucyA9IHRoaXMucywgdC5jbGFtcCgpO1xufVxuZnVuY3Rpb24gcnIoZSwgdCkge1xuICB0LnMgPSB0aGlzLnM7XG4gIHZhciByID0gTWF0aC5mbG9vcihlIC8gdGhpcy5EQik7XG4gIGlmIChyID49IHRoaXMudCkge1xuICAgIHQudCA9IDA7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBpID0gZSAlIHRoaXMuREIsIHMgPSB0aGlzLkRCIC0gaSwgbiA9ICgxIDw8IGkpIC0gMTtcbiAgdFswXSA9IHRoaXNbcl0gPj4gaTtcbiAgZm9yICh2YXIgaCA9IHIgKyAxOyBoIDwgdGhpcy50OyArK2gpXG4gICAgdFtoIC0gciAtIDFdIHw9ICh0aGlzW2hdICYgbikgPDwgcywgdFtoIC0gcl0gPSB0aGlzW2hdID4+IGk7XG4gIGkgPiAwICYmICh0W3RoaXMudCAtIHIgLSAxXSB8PSAodGhpcy5zICYgbikgPDwgcyksIHQudCA9IHRoaXMudCAtIHIsIHQuY2xhbXAoKTtcbn1cbmZ1bmN0aW9uIGlyKGUsIHQpIHtcbiAgZm9yICh2YXIgciA9IDAsIGkgPSAwLCBzID0gTWF0aC5taW4oZS50LCB0aGlzLnQpOyByIDwgczsgKVxuICAgIGkgKz0gdGhpc1tyXSAtIGVbcl0sIHRbcisrXSA9IGkgJiB0aGlzLkRNLCBpID4+PSB0aGlzLkRCO1xuICBpZiAoZS50IDwgdGhpcy50KSB7XG4gICAgZm9yIChpIC09IGUuczsgciA8IHRoaXMudDsgKVxuICAgICAgaSArPSB0aGlzW3JdLCB0W3IrK10gPSBpICYgdGhpcy5ETSwgaSA+Pj0gdGhpcy5EQjtcbiAgICBpICs9IHRoaXMucztcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGkgKz0gdGhpcy5zOyByIDwgZS50OyApXG4gICAgICBpIC09IGVbcl0sIHRbcisrXSA9IGkgJiB0aGlzLkRNLCBpID4+PSB0aGlzLkRCO1xuICAgIGkgLT0gZS5zO1xuICB9XG4gIHQucyA9IGkgPCAwID8gLTEgOiAwLCBpIDwgLTEgPyB0W3IrK10gPSB0aGlzLkRWICsgaSA6IGkgPiAwICYmICh0W3IrK10gPSBpKSwgdC50ID0gciwgdC5jbGFtcCgpO1xufVxuZnVuY3Rpb24gbnIoZSwgdCkge1xuICB2YXIgciA9IHRoaXMuYWJzKCksIGkgPSBlLmFicygpLCBzID0gci50O1xuICBmb3IgKHQudCA9IHMgKyBpLnQ7IC0tcyA+PSAwOyApXG4gICAgdFtzXSA9IDA7XG4gIGZvciAocyA9IDA7IHMgPCBpLnQ7ICsrcylcbiAgICB0W3MgKyByLnRdID0gci5hbSgwLCBpW3NdLCB0LCBzLCAwLCByLnQpO1xuICB0LnMgPSAwLCB0LmNsYW1wKCksIHRoaXMucyAhPSBlLnMgJiYgUi5aRVJPLnN1YlRvKHQsIHQpO1xufVxuZnVuY3Rpb24gc3IoZSkge1xuICBmb3IgKHZhciB0ID0gdGhpcy5hYnMoKSwgciA9IGUudCA9IDIgKiB0LnQ7IC0tciA+PSAwOyApXG4gICAgZVtyXSA9IDA7XG4gIGZvciAociA9IDA7IHIgPCB0LnQgLSAxOyArK3IpIHtcbiAgICB2YXIgaSA9IHQuYW0ociwgdFtyXSwgZSwgMiAqIHIsIDAsIDEpO1xuICAgIChlW3IgKyB0LnRdICs9IHQuYW0ociArIDEsIDIgKiB0W3JdLCBlLCAyICogciArIDEsIGksIHQudCAtIHIgLSAxKSkgPj0gdC5EViAmJiAoZVtyICsgdC50XSAtPSB0LkRWLCBlW3IgKyB0LnQgKyAxXSA9IDEpO1xuICB9XG4gIGUudCA+IDAgJiYgKGVbZS50IC0gMV0gKz0gdC5hbShyLCB0W3JdLCBlLCAyICogciwgMCwgMSkpLCBlLnMgPSAwLCBlLmNsYW1wKCk7XG59XG5mdW5jdGlvbiBhcihlLCB0LCByKSB7XG4gIHZhciBpID0gZS5hYnMoKTtcbiAgaWYgKCEoaS50IDw9IDApKSB7XG4gICAgdmFyIHMgPSB0aGlzLmFicygpO1xuICAgIGlmIChzLnQgPCBpLnQpIHtcbiAgICAgIHQgIT0gbnVsbCAmJiB0LmZyb21JbnQoMCksIHIgIT0gbnVsbCAmJiB0aGlzLmNvcHlUbyhyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgciA9PSBudWxsICYmIChyID0gXygpKTtcbiAgICB2YXIgbiA9IF8oKSwgaCA9IHRoaXMucywgdSA9IGUucywgcCA9IHRoaXMuREIgLSBZZShpW2kudCAtIDFdKTtcbiAgICBwID4gMCA/IChpLmxTaGlmdFRvKHAsIG4pLCBzLmxTaGlmdFRvKHAsIHIpKSA6IChpLmNvcHlUbyhuKSwgcy5jb3B5VG8ocikpO1xuICAgIHZhciBjID0gbi50LCB5ID0gbltjIC0gMV07XG4gICAgaWYgKHkgIT0gMCkge1xuICAgICAgdmFyIHYgPSB5ICogKDEgPDwgdGhpcy5GMSkgKyAoYyA+IDEgPyBuW2MgLSAyXSA+PiB0aGlzLkYyIDogMCksIG8gPSB0aGlzLkZWIC8gdiwgbCA9ICgxIDw8IHRoaXMuRjEpIC8gdiwgZiA9IDEgPDwgdGhpcy5GMiwgZCA9IHIudCwgZyA9IGQgLSBjLCBTID0gdCA/PyBfKCk7XG4gICAgICBmb3IgKG4uZGxTaGlmdFRvKGcsIFMpLCByLmNvbXBhcmVUbyhTKSA+PSAwICYmIChyW3IudCsrXSA9IDEsIHIuc3ViVG8oUywgcikpLCBSLk9ORS5kbFNoaWZ0VG8oYywgUyksIFMuc3ViVG8obiwgbik7IG4udCA8IGM7IClcbiAgICAgICAgbltuLnQrK10gPSAwO1xuICAgICAgZm9yICg7IC0tZyA+PSAwOyApIHtcbiAgICAgICAgdmFyIGIgPSByWy0tZF0gPT0geSA/IHRoaXMuRE0gOiBNYXRoLmZsb29yKHJbZF0gKiBvICsgKHJbZCAtIDFdICsgZikgKiBsKTtcbiAgICAgICAgaWYgKChyW2RdICs9IG4uYW0oMCwgYiwgciwgZywgMCwgYykpIDwgYilcbiAgICAgICAgICBmb3IgKG4uZGxTaGlmdFRvKGcsIFMpLCByLnN1YlRvKFMsIHIpOyByW2RdIDwgLS1iOyApXG4gICAgICAgICAgICByLnN1YlRvKFMsIHIpO1xuICAgICAgfVxuICAgICAgdCAhPSBudWxsICYmIChyLmRyU2hpZnRUbyhjLCB0KSwgaCAhPSB1ICYmIFIuWkVSTy5zdWJUbyh0LCB0KSksIHIudCA9IGMsIHIuY2xhbXAoKSwgcCA+IDAgJiYgci5yU2hpZnRUbyhwLCByKSwgaCA8IDAgJiYgUi5aRVJPLnN1YlRvKHIsIHIpO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gb3IoZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIHRoaXMuYWJzKCkuZGl2UmVtVG8oZSwgbnVsbCwgdCksIHRoaXMucyA8IDAgJiYgdC5jb21wYXJlVG8oUi5aRVJPKSA+IDAgJiYgZS5zdWJUbyh0LCB0KSwgdDtcbn1cbmZ1bmN0aW9uIE9lKGUpIHtcbiAgdGhpcy5tID0gZTtcbn1cbmZ1bmN0aW9uIHVyKGUpIHtcbiAgcmV0dXJuIGUucyA8IDAgfHwgZS5jb21wYXJlVG8odGhpcy5tKSA+PSAwID8gZS5tb2QodGhpcy5tKSA6IGU7XG59XG5mdW5jdGlvbiBocihlKSB7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gZnIoZSkge1xuICBlLmRpdlJlbVRvKHRoaXMubSwgbnVsbCwgZSk7XG59XG5mdW5jdGlvbiBjcihlLCB0LCByKSB7XG4gIGUubXVsdGlwbHlUbyh0LCByKSwgdGhpcy5yZWR1Y2Uocik7XG59XG5mdW5jdGlvbiBscihlLCB0KSB7XG4gIGUuc3F1YXJlVG8odCksIHRoaXMucmVkdWNlKHQpO1xufVxuT2UucHJvdG90eXBlLmNvbnZlcnQgPSB1cjtcbk9lLnByb3RvdHlwZS5yZXZlcnQgPSBocjtcbk9lLnByb3RvdHlwZS5yZWR1Y2UgPSBmcjtcbk9lLnByb3RvdHlwZS5tdWxUbyA9IGNyO1xuT2UucHJvdG90eXBlLnNxclRvID0gbHI7XG5mdW5jdGlvbiBkcigpIHtcbiAgaWYgKHRoaXMudCA8IDEpXG4gICAgcmV0dXJuIDA7XG4gIHZhciBlID0gdGhpc1swXTtcbiAgaWYgKCEoZSAmIDEpKVxuICAgIHJldHVybiAwO1xuICB2YXIgdCA9IGUgJiAzO1xuICByZXR1cm4gdCA9IHQgKiAoMiAtIChlICYgMTUpICogdCkgJiAxNSwgdCA9IHQgKiAoMiAtIChlICYgMjU1KSAqIHQpICYgMjU1LCB0ID0gdCAqICgyIC0gKChlICYgNjU1MzUpICogdCAmIDY1NTM1KSkgJiA2NTUzNSwgdCA9IHQgKiAoMiAtIGUgKiB0ICUgdGhpcy5EVikgJSB0aGlzLkRWLCB0ID4gMCA/IHRoaXMuRFYgLSB0IDogLXQ7XG59XG5mdW5jdGlvbiBqZShlKSB7XG4gIHRoaXMubSA9IGUsIHRoaXMubXAgPSBlLmludkRpZ2l0KCksIHRoaXMubXBsID0gdGhpcy5tcCAmIDMyNzY3LCB0aGlzLm1waCA9IHRoaXMubXAgPj4gMTUsIHRoaXMudW0gPSAoMSA8PCBlLkRCIC0gMTUpIC0gMSwgdGhpcy5tdDIgPSAyICogZS50O1xufVxuZnVuY3Rpb24gcHIoZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIGUuYWJzKCkuZGxTaGlmdFRvKHRoaXMubS50LCB0KSwgdC5kaXZSZW1Ubyh0aGlzLm0sIG51bGwsIHQpLCBlLnMgPCAwICYmIHQuY29tcGFyZVRvKFIuWkVSTykgPiAwICYmIHRoaXMubS5zdWJUbyh0LCB0KSwgdDtcbn1cbmZ1bmN0aW9uIHZyKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiBlLmNvcHlUbyh0KSwgdGhpcy5yZWR1Y2UodCksIHQ7XG59XG5mdW5jdGlvbiBncihlKSB7XG4gIGZvciAoOyBlLnQgPD0gdGhpcy5tdDI7IClcbiAgICBlW2UudCsrXSA9IDA7XG4gIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5tLnQ7ICsrdCkge1xuICAgIHZhciByID0gZVt0XSAmIDMyNzY3LCBpID0gciAqIHRoaXMubXBsICsgKChyICogdGhpcy5tcGggKyAoZVt0XSA+PiAxNSkgKiB0aGlzLm1wbCAmIHRoaXMudW0pIDw8IDE1KSAmIGUuRE07XG4gICAgZm9yIChyID0gdCArIHRoaXMubS50LCBlW3JdICs9IHRoaXMubS5hbSgwLCBpLCBlLCB0LCAwLCB0aGlzLm0udCk7IGVbcl0gPj0gZS5EVjsgKVxuICAgICAgZVtyXSAtPSBlLkRWLCBlWysrcl0rKztcbiAgfVxuICBlLmNsYW1wKCksIGUuZHJTaGlmdFRvKHRoaXMubS50LCBlKSwgZS5jb21wYXJlVG8odGhpcy5tKSA+PSAwICYmIGUuc3ViVG8odGhpcy5tLCBlKTtcbn1cbmZ1bmN0aW9uIHlyKGUsIHQpIHtcbiAgZS5zcXVhcmVUbyh0KSwgdGhpcy5yZWR1Y2UodCk7XG59XG5mdW5jdGlvbiBtcihlLCB0LCByKSB7XG4gIGUubXVsdGlwbHlUbyh0LCByKSwgdGhpcy5yZWR1Y2Uocik7XG59XG5qZS5wcm90b3R5cGUuY29udmVydCA9IHByO1xuamUucHJvdG90eXBlLnJldmVydCA9IHZyO1xuamUucHJvdG90eXBlLnJlZHVjZSA9IGdyO1xuamUucHJvdG90eXBlLm11bFRvID0gbXI7XG5qZS5wcm90b3R5cGUuc3FyVG8gPSB5cjtcbmZ1bmN0aW9uIHhyKCkge1xuICByZXR1cm4gKHRoaXMudCA+IDAgPyB0aGlzWzBdICYgMSA6IHRoaXMucykgPT0gMDtcbn1cbmZ1bmN0aW9uIFNyKGUsIHQpIHtcbiAgaWYgKGUgPiA0Mjk0OTY3Mjk1IHx8IGUgPCAxKVxuICAgIHJldHVybiBSLk9ORTtcbiAgdmFyIHIgPSBfKCksIGkgPSBfKCksIHMgPSB0LmNvbnZlcnQodGhpcyksIG4gPSBZZShlKSAtIDE7XG4gIGZvciAocy5jb3B5VG8ocik7IC0tbiA+PSAwOyApXG4gICAgaWYgKHQuc3FyVG8ociwgaSksIChlICYgMSA8PCBuKSA+IDApXG4gICAgICB0Lm11bFRvKGksIHMsIHIpO1xuICAgIGVsc2Uge1xuICAgICAgdmFyIGggPSByO1xuICAgICAgciA9IGksIGkgPSBoO1xuICAgIH1cbiAgcmV0dXJuIHQucmV2ZXJ0KHIpO1xufVxuZnVuY3Rpb24gRXIoZSwgdCkge1xuICB2YXIgcjtcbiAgcmV0dXJuIGUgPCAyNTYgfHwgdC5pc0V2ZW4oKSA/IHIgPSBuZXcgT2UodCkgOiByID0gbmV3IGplKHQpLCB0aGlzLmV4cChlLCByKTtcbn1cblIucHJvdG90eXBlLmNvcHlUbyA9IFV0O1xuUi5wcm90b3R5cGUuZnJvbUludCA9IHp0O1xuUi5wcm90b3R5cGUuZnJvbVN0cmluZyA9IEd0O1xuUi5wcm90b3R5cGUuY2xhbXAgPSBXdDtcblIucHJvdG90eXBlLmRsU2hpZnRUbyA9IFF0O1xuUi5wcm90b3R5cGUuZHJTaGlmdFRvID0gZXI7XG5SLnByb3RvdHlwZS5sU2hpZnRUbyA9IHRyO1xuUi5wcm90b3R5cGUuclNoaWZ0VG8gPSBycjtcblIucHJvdG90eXBlLnN1YlRvID0gaXI7XG5SLnByb3RvdHlwZS5tdWx0aXBseVRvID0gbnI7XG5SLnByb3RvdHlwZS5zcXVhcmVUbyA9IHNyO1xuUi5wcm90b3R5cGUuZGl2UmVtVG8gPSBhcjtcblIucHJvdG90eXBlLmludkRpZ2l0ID0gZHI7XG5SLnByb3RvdHlwZS5pc0V2ZW4gPSB4cjtcblIucHJvdG90eXBlLmV4cCA9IFNyO1xuUi5wcm90b3R5cGUudG9TdHJpbmcgPSBYdDtcblIucHJvdG90eXBlLm5lZ2F0ZSA9IEp0O1xuUi5wcm90b3R5cGUuYWJzID0gJHQ7XG5SLnByb3RvdHlwZS5jb21wYXJlVG8gPSBZdDtcblIucHJvdG90eXBlLmJpdExlbmd0aCA9IFp0O1xuUi5wcm90b3R5cGUubW9kID0gb3I7XG5SLnByb3RvdHlwZS5tb2RQb3dJbnQgPSBFcjtcblIuWkVSTyA9IFJlKDApO1xuUi5PTkUgPSBSZSgxKTtcbi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuL1xuICovXG5mdW5jdGlvbiB3cigpIHtcbiAgdmFyIGUgPSBfKCk7XG4gIHJldHVybiB0aGlzLmNvcHlUbyhlKSwgZTtcbn1cbmZ1bmN0aW9uIEZyKCkge1xuICBpZiAodGhpcy5zIDwgMCkge1xuICAgIGlmICh0aGlzLnQgPT0gMSlcbiAgICAgIHJldHVybiB0aGlzWzBdIC0gdGhpcy5EVjtcbiAgICBpZiAodGhpcy50ID09IDApXG4gICAgICByZXR1cm4gLTE7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoaXMudCA9PSAxKVxuICAgICAgcmV0dXJuIHRoaXNbMF07XG4gICAgaWYgKHRoaXMudCA9PSAwKVxuICAgICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuICh0aGlzWzFdICYgKDEgPDwgMzIgLSB0aGlzLkRCKSAtIDEpIDw8IHRoaXMuREIgfCB0aGlzWzBdO1xufVxuZnVuY3Rpb24gYnIoKSB7XG4gIHJldHVybiB0aGlzLnQgPT0gMCA/IHRoaXMucyA6IHRoaXNbMF0gPDwgMjQgPj4gMjQ7XG59XG5mdW5jdGlvbiBBcigpIHtcbiAgcmV0dXJuIHRoaXMudCA9PSAwID8gdGhpcy5zIDogdGhpc1swXSA8PCAxNiA+PiAxNjtcbn1cbmZ1bmN0aW9uIERyKGUpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5MTjIgKiB0aGlzLkRCIC8gTWF0aC5sb2coZSkpO1xufVxuZnVuY3Rpb24gUHIoKSB7XG4gIHJldHVybiB0aGlzLnMgPCAwID8gLTEgOiB0aGlzLnQgPD0gMCB8fCB0aGlzLnQgPT0gMSAmJiB0aGlzWzBdIDw9IDAgPyAwIDogMTtcbn1cbmZ1bmN0aW9uIElyKGUpIHtcbiAgaWYgKGUgPT0gbnVsbCAmJiAoZSA9IDEwKSwgdGhpcy5zaWdudW0oKSA9PSAwIHx8IGUgPCAyIHx8IGUgPiAzNilcbiAgICByZXR1cm4gXCIwXCI7XG4gIHZhciB0ID0gdGhpcy5jaHVua1NpemUoZSksIHIgPSBNYXRoLnBvdyhlLCB0KSwgaSA9IFJlKHIpLCBzID0gXygpLCBuID0gXygpLCBoID0gXCJcIjtcbiAgZm9yICh0aGlzLmRpdlJlbVRvKGksIHMsIG4pOyBzLnNpZ251bSgpID4gMDsgKVxuICAgIGggPSAociArIG4uaW50VmFsdWUoKSkudG9TdHJpbmcoZSkuc3Vic3RyKDEpICsgaCwgcy5kaXZSZW1UbyhpLCBzLCBuKTtcbiAgcmV0dXJuIG4uaW50VmFsdWUoKS50b1N0cmluZyhlKSArIGg7XG59XG5mdW5jdGlvbiBDcihlLCB0KSB7XG4gIHRoaXMuZnJvbUludCgwKSwgdCA9PSBudWxsICYmICh0ID0gMTApO1xuICBmb3IgKHZhciByID0gdGhpcy5jaHVua1NpemUodCksIGkgPSBNYXRoLnBvdyh0LCByKSwgcyA9ICExLCBuID0gMCwgaCA9IDAsIHUgPSAwOyB1IDwgZS5sZW5ndGg7ICsrdSkge1xuICAgIHZhciBwID0gd3QoZSwgdSk7XG4gICAgaWYgKHAgPCAwKSB7XG4gICAgICBlLmNoYXJBdCh1KSA9PSBcIi1cIiAmJiB0aGlzLnNpZ251bSgpID09IDAgJiYgKHMgPSAhMCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaCA9IHQgKiBoICsgcCwgKytuID49IHIgJiYgKHRoaXMuZE11bHRpcGx5KGkpLCB0aGlzLmRBZGRPZmZzZXQoaCwgMCksIG4gPSAwLCBoID0gMCk7XG4gIH1cbiAgbiA+IDAgJiYgKHRoaXMuZE11bHRpcGx5KE1hdGgucG93KHQsIG4pKSwgdGhpcy5kQWRkT2Zmc2V0KGgsIDApKSwgcyAmJiBSLlpFUk8uc3ViVG8odGhpcywgdGhpcyk7XG59XG5mdW5jdGlvbiBScihlLCB0LCByKSB7XG4gIGlmICh0eXBlb2YgdCA9PSBcIm51bWJlclwiKVxuICAgIGlmIChlIDwgMilcbiAgICAgIHRoaXMuZnJvbUludCgxKTtcbiAgICBlbHNlXG4gICAgICBmb3IgKHRoaXMuZnJvbU51bWJlcihlLCByKSwgdGhpcy50ZXN0Qml0KGUgLSAxKSB8fCB0aGlzLmJpdHdpc2VUbyhSLk9ORS5zaGlmdExlZnQoZSAtIDEpLCBzdCwgdGhpcyksIHRoaXMuaXNFdmVuKCkgJiYgdGhpcy5kQWRkT2Zmc2V0KDEsIDApOyAhdGhpcy5pc1Byb2JhYmxlUHJpbWUodCk7IClcbiAgICAgICAgdGhpcy5kQWRkT2Zmc2V0KDIsIDApLCB0aGlzLmJpdExlbmd0aCgpID4gZSAmJiB0aGlzLnN1YlRvKFIuT05FLnNoaWZ0TGVmdChlIC0gMSksIHRoaXMpO1xuICBlbHNlIHtcbiAgICB2YXIgaSA9IG5ldyBBcnJheSgpLCBzID0gZSAmIDc7XG4gICAgaS5sZW5ndGggPSAoZSA+PiAzKSArIDEsIHQubmV4dEJ5dGVzKGkpLCBzID4gMCA/IGlbMF0gJj0gKDEgPDwgcykgLSAxIDogaVswXSA9IDAsIHRoaXMuZnJvbVN0cmluZyhpLCAyNTYpO1xuICB9XG59XG5mdW5jdGlvbiBUcigpIHtcbiAgdmFyIGUgPSB0aGlzLnQsIHQgPSBuZXcgQXJyYXkoKTtcbiAgdFswXSA9IHRoaXMucztcbiAgdmFyIHIgPSB0aGlzLkRCIC0gZSAqIHRoaXMuREIgJSA4LCBpLCBzID0gMDtcbiAgaWYgKGUtLSA+IDApXG4gICAgZm9yIChyIDwgdGhpcy5EQiAmJiAoaSA9IHRoaXNbZV0gPj4gcikgIT0gKHRoaXMucyAmIHRoaXMuRE0pID4+IHIgJiYgKHRbcysrXSA9IGkgfCB0aGlzLnMgPDwgdGhpcy5EQiAtIHIpOyBlID49IDA7IClcbiAgICAgIHIgPCA4ID8gKGkgPSAodGhpc1tlXSAmICgxIDw8IHIpIC0gMSkgPDwgOCAtIHIsIGkgfD0gdGhpc1stLWVdID4+IChyICs9IHRoaXMuREIgLSA4KSkgOiAoaSA9IHRoaXNbZV0gPj4gKHIgLT0gOCkgJiAyNTUsIHIgPD0gMCAmJiAociArPSB0aGlzLkRCLCAtLWUpKSwgaSAmIDEyOCAmJiAoaSB8PSAtMjU2KSwgcyA9PSAwICYmICh0aGlzLnMgJiAxMjgpICE9IChpICYgMTI4KSAmJiArK3MsIChzID4gMCB8fCBpICE9IHRoaXMucykgJiYgKHRbcysrXSA9IGkpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIEJyKGUpIHtcbiAgcmV0dXJuIHRoaXMuY29tcGFyZVRvKGUpID09IDA7XG59XG5mdW5jdGlvbiBOcihlKSB7XG4gIHJldHVybiB0aGlzLmNvbXBhcmVUbyhlKSA8IDAgPyB0aGlzIDogZTtcbn1cbmZ1bmN0aW9uIEhyKGUpIHtcbiAgcmV0dXJuIHRoaXMuY29tcGFyZVRvKGUpID4gMCA/IHRoaXMgOiBlO1xufVxuZnVuY3Rpb24gT3IoZSwgdCwgcikge1xuICB2YXIgaSwgcywgbiA9IE1hdGgubWluKGUudCwgdGhpcy50KTtcbiAgZm9yIChpID0gMDsgaSA8IG47ICsraSlcbiAgICByW2ldID0gdCh0aGlzW2ldLCBlW2ldKTtcbiAgaWYgKGUudCA8IHRoaXMudCkge1xuICAgIGZvciAocyA9IGUucyAmIHRoaXMuRE0sIGkgPSBuOyBpIDwgdGhpcy50OyArK2kpXG4gICAgICByW2ldID0gdCh0aGlzW2ldLCBzKTtcbiAgICByLnQgPSB0aGlzLnQ7XG4gIH0gZWxzZSB7XG4gICAgZm9yIChzID0gdGhpcy5zICYgdGhpcy5ETSwgaSA9IG47IGkgPCBlLnQ7ICsraSlcbiAgICAgIHJbaV0gPSB0KHMsIGVbaV0pO1xuICAgIHIudCA9IGUudDtcbiAgfVxuICByLnMgPSB0KHRoaXMucywgZS5zKSwgci5jbGFtcCgpO1xufVxuZnVuY3Rpb24ganIoZSwgdCkge1xuICByZXR1cm4gZSAmIHQ7XG59XG5mdW5jdGlvbiBWcihlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdGhpcy5iaXR3aXNlVG8oZSwganIsIHQpLCB0O1xufVxuZnVuY3Rpb24gc3QoZSwgdCkge1xuICByZXR1cm4gZSB8IHQ7XG59XG5mdW5jdGlvbiBLcihlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdGhpcy5iaXR3aXNlVG8oZSwgc3QsIHQpLCB0O1xufVxuZnVuY3Rpb24gRnQoZSwgdCkge1xuICByZXR1cm4gZSBeIHQ7XG59XG5mdW5jdGlvbiBMcihlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdGhpcy5iaXR3aXNlVG8oZSwgRnQsIHQpLCB0O1xufVxuZnVuY3Rpb24gYnQoZSwgdCkge1xuICByZXR1cm4gZSAmIH50O1xufVxuZnVuY3Rpb24gcXIoZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIHRoaXMuYml0d2lzZVRvKGUsIGJ0LCB0KSwgdDtcbn1cbmZ1bmN0aW9uIGtyKCkge1xuICBmb3IgKHZhciBlID0gXygpLCB0ID0gMDsgdCA8IHRoaXMudDsgKyt0KVxuICAgIGVbdF0gPSB0aGlzLkRNICYgfnRoaXNbdF07XG4gIHJldHVybiBlLnQgPSB0aGlzLnQsIGUucyA9IH50aGlzLnMsIGU7XG59XG5mdW5jdGlvbiBNcihlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gZSA8IDAgPyB0aGlzLnJTaGlmdFRvKC1lLCB0KSA6IHRoaXMubFNoaWZ0VG8oZSwgdCksIHQ7XG59XG5mdW5jdGlvbiBfcihlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gZSA8IDAgPyB0aGlzLmxTaGlmdFRvKC1lLCB0KSA6IHRoaXMuclNoaWZ0VG8oZSwgdCksIHQ7XG59XG5mdW5jdGlvbiBVcihlKSB7XG4gIGlmIChlID09IDApXG4gICAgcmV0dXJuIC0xO1xuICB2YXIgdCA9IDA7XG4gIHJldHVybiBlICYgNjU1MzUgfHwgKGUgPj49IDE2LCB0ICs9IDE2KSwgZSAmIDI1NSB8fCAoZSA+Pj0gOCwgdCArPSA4KSwgZSAmIDE1IHx8IChlID4+PSA0LCB0ICs9IDQpLCBlICYgMyB8fCAoZSA+Pj0gMiwgdCArPSAyKSwgZSAmIDEgfHwgKyt0LCB0O1xufVxuZnVuY3Rpb24genIoKSB7XG4gIGZvciAodmFyIGUgPSAwOyBlIDwgdGhpcy50OyArK2UpXG4gICAgaWYgKHRoaXNbZV0gIT0gMClcbiAgICAgIHJldHVybiBlICogdGhpcy5EQiArIFVyKHRoaXNbZV0pO1xuICByZXR1cm4gdGhpcy5zIDwgMCA/IHRoaXMudCAqIHRoaXMuREIgOiAtMTtcbn1cbmZ1bmN0aW9uIEdyKGUpIHtcbiAgZm9yICh2YXIgdCA9IDA7IGUgIT0gMDsgKVxuICAgIGUgJj0gZSAtIDEsICsrdDtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBXcigpIHtcbiAgZm9yICh2YXIgZSA9IDAsIHQgPSB0aGlzLnMgJiB0aGlzLkRNLCByID0gMDsgciA8IHRoaXMudDsgKytyKVxuICAgIGUgKz0gR3IodGhpc1tyXSBeIHQpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIFhyKGUpIHtcbiAgdmFyIHQgPSBNYXRoLmZsb29yKGUgLyB0aGlzLkRCKTtcbiAgcmV0dXJuIHQgPj0gdGhpcy50ID8gdGhpcy5zICE9IDAgOiAodGhpc1t0XSAmIDEgPDwgZSAlIHRoaXMuREIpICE9IDA7XG59XG5mdW5jdGlvbiBKcihlLCB0KSB7XG4gIHZhciByID0gUi5PTkUuc2hpZnRMZWZ0KGUpO1xuICByZXR1cm4gdGhpcy5iaXR3aXNlVG8ociwgdCwgciksIHI7XG59XG5mdW5jdGlvbiAkcihlKSB7XG4gIHJldHVybiB0aGlzLmNoYW5nZUJpdChlLCBzdCk7XG59XG5mdW5jdGlvbiBZcihlKSB7XG4gIHJldHVybiB0aGlzLmNoYW5nZUJpdChlLCBidCk7XG59XG5mdW5jdGlvbiBacihlKSB7XG4gIHJldHVybiB0aGlzLmNoYW5nZUJpdChlLCBGdCk7XG59XG5mdW5jdGlvbiBRcihlLCB0KSB7XG4gIGZvciAodmFyIHIgPSAwLCBpID0gMCwgcyA9IE1hdGgubWluKGUudCwgdGhpcy50KTsgciA8IHM7IClcbiAgICBpICs9IHRoaXNbcl0gKyBlW3JdLCB0W3IrK10gPSBpICYgdGhpcy5ETSwgaSA+Pj0gdGhpcy5EQjtcbiAgaWYgKGUudCA8IHRoaXMudCkge1xuICAgIGZvciAoaSArPSBlLnM7IHIgPCB0aGlzLnQ7IClcbiAgICAgIGkgKz0gdGhpc1tyXSwgdFtyKytdID0gaSAmIHRoaXMuRE0sIGkgPj49IHRoaXMuREI7XG4gICAgaSArPSB0aGlzLnM7XG4gIH0gZWxzZSB7XG4gICAgZm9yIChpICs9IHRoaXMuczsgciA8IGUudDsgKVxuICAgICAgaSArPSBlW3JdLCB0W3IrK10gPSBpICYgdGhpcy5ETSwgaSA+Pj0gdGhpcy5EQjtcbiAgICBpICs9IGUucztcbiAgfVxuICB0LnMgPSBpIDwgMCA/IC0xIDogMCwgaSA+IDAgPyB0W3IrK10gPSBpIDogaSA8IC0xICYmICh0W3IrK10gPSB0aGlzLkRWICsgaSksIHQudCA9IHIsIHQuY2xhbXAoKTtcbn1cbmZ1bmN0aW9uIGVpKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiB0aGlzLmFkZFRvKGUsIHQpLCB0O1xufVxuZnVuY3Rpb24gdGkoZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIHRoaXMuc3ViVG8oZSwgdCksIHQ7XG59XG5mdW5jdGlvbiByaShlKSB7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gdGhpcy5tdWx0aXBseVRvKGUsIHQpLCB0O1xufVxuZnVuY3Rpb24gaWkoKSB7XG4gIHZhciBlID0gXygpO1xuICByZXR1cm4gdGhpcy5zcXVhcmVUbyhlKSwgZTtcbn1cbmZ1bmN0aW9uIG5pKGUpIHtcbiAgdmFyIHQgPSBfKCk7XG4gIHJldHVybiB0aGlzLmRpdlJlbVRvKGUsIHQsIG51bGwpLCB0O1xufVxuZnVuY3Rpb24gc2koZSkge1xuICB2YXIgdCA9IF8oKTtcbiAgcmV0dXJuIHRoaXMuZGl2UmVtVG8oZSwgbnVsbCwgdCksIHQ7XG59XG5mdW5jdGlvbiBhaShlKSB7XG4gIHZhciB0ID0gXygpLCByID0gXygpO1xuICByZXR1cm4gdGhpcy5kaXZSZW1UbyhlLCB0LCByKSwgbmV3IEFycmF5KHQsIHIpO1xufVxuZnVuY3Rpb24gb2koZSkge1xuICB0aGlzW3RoaXMudF0gPSB0aGlzLmFtKDAsIGUgLSAxLCB0aGlzLCAwLCAwLCB0aGlzLnQpLCArK3RoaXMudCwgdGhpcy5jbGFtcCgpO1xufVxuZnVuY3Rpb24gdWkoZSwgdCkge1xuICBpZiAoZSAhPSAwKSB7XG4gICAgZm9yICg7IHRoaXMudCA8PSB0OyApXG4gICAgICB0aGlzW3RoaXMudCsrXSA9IDA7XG4gICAgZm9yICh0aGlzW3RdICs9IGU7IHRoaXNbdF0gPj0gdGhpcy5EVjsgKVxuICAgICAgdGhpc1t0XSAtPSB0aGlzLkRWLCArK3QgPj0gdGhpcy50ICYmICh0aGlzW3RoaXMudCsrXSA9IDApLCArK3RoaXNbdF07XG4gIH1cbn1cbmZ1bmN0aW9uIHplKCkge1xufVxuZnVuY3Rpb24gQXQoZSkge1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIGhpKGUsIHQsIHIpIHtcbiAgZS5tdWx0aXBseVRvKHQsIHIpO1xufVxuZnVuY3Rpb24gZmkoZSwgdCkge1xuICBlLnNxdWFyZVRvKHQpO1xufVxuemUucHJvdG90eXBlLmNvbnZlcnQgPSBBdDtcbnplLnByb3RvdHlwZS5yZXZlcnQgPSBBdDtcbnplLnByb3RvdHlwZS5tdWxUbyA9IGhpO1xuemUucHJvdG90eXBlLnNxclRvID0gZmk7XG5mdW5jdGlvbiBjaShlKSB7XG4gIHJldHVybiB0aGlzLmV4cChlLCBuZXcgemUoKSk7XG59XG5mdW5jdGlvbiBsaShlLCB0LCByKSB7XG4gIHZhciBpID0gTWF0aC5taW4odGhpcy50ICsgZS50LCB0KTtcbiAgZm9yIChyLnMgPSAwLCByLnQgPSBpOyBpID4gMDsgKVxuICAgIHJbLS1pXSA9IDA7XG4gIHZhciBzO1xuICBmb3IgKHMgPSByLnQgLSB0aGlzLnQ7IGkgPCBzOyArK2kpXG4gICAgcltpICsgdGhpcy50XSA9IHRoaXMuYW0oMCwgZVtpXSwgciwgaSwgMCwgdGhpcy50KTtcbiAgZm9yIChzID0gTWF0aC5taW4oZS50LCB0KTsgaSA8IHM7ICsraSlcbiAgICB0aGlzLmFtKDAsIGVbaV0sIHIsIGksIDAsIHQgLSBpKTtcbiAgci5jbGFtcCgpO1xufVxuZnVuY3Rpb24gZGkoZSwgdCwgcikge1xuICAtLXQ7XG4gIHZhciBpID0gci50ID0gdGhpcy50ICsgZS50IC0gdDtcbiAgZm9yIChyLnMgPSAwOyAtLWkgPj0gMDsgKVxuICAgIHJbaV0gPSAwO1xuICBmb3IgKGkgPSBNYXRoLm1heCh0IC0gdGhpcy50LCAwKTsgaSA8IGUudDsgKytpKVxuICAgIHJbdGhpcy50ICsgaSAtIHRdID0gdGhpcy5hbSh0IC0gaSwgZVtpXSwgciwgMCwgMCwgdGhpcy50ICsgaSAtIHQpO1xuICByLmNsYW1wKCksIHIuZHJTaGlmdFRvKDEsIHIpO1xufVxuZnVuY3Rpb24gcWUoZSkge1xuICB0aGlzLnIyID0gXygpLCB0aGlzLnEzID0gXygpLCBSLk9ORS5kbFNoaWZ0VG8oMiAqIGUudCwgdGhpcy5yMiksIHRoaXMubXUgPSB0aGlzLnIyLmRpdmlkZShlKSwgdGhpcy5tID0gZTtcbn1cbmZ1bmN0aW9uIHBpKGUpIHtcbiAgaWYgKGUucyA8IDAgfHwgZS50ID4gMiAqIHRoaXMubS50KVxuICAgIHJldHVybiBlLm1vZCh0aGlzLm0pO1xuICBpZiAoZS5jb21wYXJlVG8odGhpcy5tKSA8IDApXG4gICAgcmV0dXJuIGU7XG4gIHZhciB0ID0gXygpO1xuICByZXR1cm4gZS5jb3B5VG8odCksIHRoaXMucmVkdWNlKHQpLCB0O1xufVxuZnVuY3Rpb24gdmkoZSkge1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIGdpKGUpIHtcbiAgZm9yIChlLmRyU2hpZnRUbyh0aGlzLm0udCAtIDEsIHRoaXMucjIpLCBlLnQgPiB0aGlzLm0udCArIDEgJiYgKGUudCA9IHRoaXMubS50ICsgMSwgZS5jbGFtcCgpKSwgdGhpcy5tdS5tdWx0aXBseVVwcGVyVG8odGhpcy5yMiwgdGhpcy5tLnQgKyAxLCB0aGlzLnEzKSwgdGhpcy5tLm11bHRpcGx5TG93ZXJUbyh0aGlzLnEzLCB0aGlzLm0udCArIDEsIHRoaXMucjIpOyBlLmNvbXBhcmVUbyh0aGlzLnIyKSA8IDA7IClcbiAgICBlLmRBZGRPZmZzZXQoMSwgdGhpcy5tLnQgKyAxKTtcbiAgZm9yIChlLnN1YlRvKHRoaXMucjIsIGUpOyBlLmNvbXBhcmVUbyh0aGlzLm0pID49IDA7IClcbiAgICBlLnN1YlRvKHRoaXMubSwgZSk7XG59XG5mdW5jdGlvbiB5aShlLCB0KSB7XG4gIGUuc3F1YXJlVG8odCksIHRoaXMucmVkdWNlKHQpO1xufVxuZnVuY3Rpb24gbWkoZSwgdCwgcikge1xuICBlLm11bHRpcGx5VG8odCwgciksIHRoaXMucmVkdWNlKHIpO1xufVxucWUucHJvdG90eXBlLmNvbnZlcnQgPSBwaTtcbnFlLnByb3RvdHlwZS5yZXZlcnQgPSB2aTtcbnFlLnByb3RvdHlwZS5yZWR1Y2UgPSBnaTtcbnFlLnByb3RvdHlwZS5tdWxUbyA9IG1pO1xucWUucHJvdG90eXBlLnNxclRvID0geWk7XG5mdW5jdGlvbiB4aShlLCB0KSB7XG4gIHZhciByID0gZS5iaXRMZW5ndGgoKSwgaSwgcyA9IFJlKDEpLCBuO1xuICBpZiAociA8PSAwKVxuICAgIHJldHVybiBzO1xuICByIDwgMTggPyBpID0gMSA6IHIgPCA0OCA/IGkgPSAzIDogciA8IDE0NCA/IGkgPSA0IDogciA8IDc2OCA/IGkgPSA1IDogaSA9IDYsIHIgPCA4ID8gbiA9IG5ldyBPZSh0KSA6IHQuaXNFdmVuKCkgPyBuID0gbmV3IHFlKHQpIDogbiA9IG5ldyBqZSh0KTtcbiAgdmFyIGggPSBuZXcgQXJyYXkoKSwgdSA9IDMsIHAgPSBpIC0gMSwgYyA9ICgxIDw8IGkpIC0gMTtcbiAgaWYgKGhbMV0gPSBuLmNvbnZlcnQodGhpcyksIGkgPiAxKSB7XG4gICAgdmFyIHkgPSBfKCk7XG4gICAgZm9yIChuLnNxclRvKGhbMV0sIHkpOyB1IDw9IGM7IClcbiAgICAgIGhbdV0gPSBfKCksIG4ubXVsVG8oeSwgaFt1IC0gMl0sIGhbdV0pLCB1ICs9IDI7XG4gIH1cbiAgdmFyIHYgPSBlLnQgLSAxLCBvLCBsID0gITAsIGYgPSBfKCksIGQ7XG4gIGZvciAociA9IFllKGVbdl0pIC0gMTsgdiA+PSAwOyApIHtcbiAgICBmb3IgKHIgPj0gcCA/IG8gPSBlW3ZdID4+IHIgLSBwICYgYyA6IChvID0gKGVbdl0gJiAoMSA8PCByICsgMSkgLSAxKSA8PCBwIC0gciwgdiA+IDAgJiYgKG8gfD0gZVt2IC0gMV0gPj4gdGhpcy5EQiArIHIgLSBwKSksIHUgPSBpOyAhKG8gJiAxKTsgKVxuICAgICAgbyA+Pj0gMSwgLS11O1xuICAgIGlmICgociAtPSB1KSA8IDAgJiYgKHIgKz0gdGhpcy5EQiwgLS12KSwgbClcbiAgICAgIGhbb10uY29weVRvKHMpLCBsID0gITE7XG4gICAgZWxzZSB7XG4gICAgICBmb3IgKDsgdSA+IDE7IClcbiAgICAgICAgbi5zcXJUbyhzLCBmKSwgbi5zcXJUbyhmLCBzKSwgdSAtPSAyO1xuICAgICAgdSA+IDAgPyBuLnNxclRvKHMsIGYpIDogKGQgPSBzLCBzID0gZiwgZiA9IGQpLCBuLm11bFRvKGYsIGhbb10sIHMpO1xuICAgIH1cbiAgICBmb3IgKDsgdiA+PSAwICYmICEoZVt2XSAmIDEgPDwgcik7IClcbiAgICAgIG4uc3FyVG8ocywgZiksIGQgPSBzLCBzID0gZiwgZiA9IGQsIC0tciA8IDAgJiYgKHIgPSB0aGlzLkRCIC0gMSwgLS12KTtcbiAgfVxuICByZXR1cm4gbi5yZXZlcnQocyk7XG59XG5mdW5jdGlvbiBTaShlKSB7XG4gIHZhciB0ID0gdGhpcy5zIDwgMCA/IHRoaXMubmVnYXRlKCkgOiB0aGlzLmNsb25lKCksIHIgPSBlLnMgPCAwID8gZS5uZWdhdGUoKSA6IGUuY2xvbmUoKTtcbiAgaWYgKHQuY29tcGFyZVRvKHIpIDwgMCkge1xuICAgIHZhciBpID0gdDtcbiAgICB0ID0gciwgciA9IGk7XG4gIH1cbiAgdmFyIHMgPSB0LmdldExvd2VzdFNldEJpdCgpLCBuID0gci5nZXRMb3dlc3RTZXRCaXQoKTtcbiAgaWYgKG4gPCAwKVxuICAgIHJldHVybiB0O1xuICBmb3IgKHMgPCBuICYmIChuID0gcyksIG4gPiAwICYmICh0LnJTaGlmdFRvKG4sIHQpLCByLnJTaGlmdFRvKG4sIHIpKTsgdC5zaWdudW0oKSA+IDA7IClcbiAgICAocyA9IHQuZ2V0TG93ZXN0U2V0Qml0KCkpID4gMCAmJiB0LnJTaGlmdFRvKHMsIHQpLCAocyA9IHIuZ2V0TG93ZXN0U2V0Qml0KCkpID4gMCAmJiByLnJTaGlmdFRvKHMsIHIpLCB0LmNvbXBhcmVUbyhyKSA+PSAwID8gKHQuc3ViVG8ociwgdCksIHQuclNoaWZ0VG8oMSwgdCkpIDogKHIuc3ViVG8odCwgciksIHIuclNoaWZ0VG8oMSwgcikpO1xuICByZXR1cm4gbiA+IDAgJiYgci5sU2hpZnRUbyhuLCByKSwgcjtcbn1cbmZ1bmN0aW9uIEVpKGUpIHtcbiAgaWYgKGUgPD0gMClcbiAgICByZXR1cm4gMDtcbiAgdmFyIHQgPSB0aGlzLkRWICUgZSwgciA9IHRoaXMucyA8IDAgPyBlIC0gMSA6IDA7XG4gIGlmICh0aGlzLnQgPiAwKVxuICAgIGlmICh0ID09IDApXG4gICAgICByID0gdGhpc1swXSAlIGU7XG4gICAgZWxzZVxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudCAtIDE7IGkgPj0gMDsgLS1pKVxuICAgICAgICByID0gKHQgKiByICsgdGhpc1tpXSkgJSBlO1xuICByZXR1cm4gcjtcbn1cbmZ1bmN0aW9uIHdpKGUpIHtcbiAgdmFyIHQgPSBlLmlzRXZlbigpO1xuICBpZiAodGhpcy5pc0V2ZW4oKSAmJiB0IHx8IGUuc2lnbnVtKCkgPT0gMClcbiAgICByZXR1cm4gUi5aRVJPO1xuICBmb3IgKHZhciByID0gZS5jbG9uZSgpLCBpID0gdGhpcy5jbG9uZSgpLCBzID0gUmUoMSksIG4gPSBSZSgwKSwgaCA9IFJlKDApLCB1ID0gUmUoMSk7IHIuc2lnbnVtKCkgIT0gMDsgKSB7XG4gICAgZm9yICg7IHIuaXNFdmVuKCk7IClcbiAgICAgIHIuclNoaWZ0VG8oMSwgciksIHQgPyAoKCFzLmlzRXZlbigpIHx8ICFuLmlzRXZlbigpKSAmJiAocy5hZGRUbyh0aGlzLCBzKSwgbi5zdWJUbyhlLCBuKSksIHMuclNoaWZ0VG8oMSwgcykpIDogbi5pc0V2ZW4oKSB8fCBuLnN1YlRvKGUsIG4pLCBuLnJTaGlmdFRvKDEsIG4pO1xuICAgIGZvciAoOyBpLmlzRXZlbigpOyApXG4gICAgICBpLnJTaGlmdFRvKDEsIGkpLCB0ID8gKCghaC5pc0V2ZW4oKSB8fCAhdS5pc0V2ZW4oKSkgJiYgKGguYWRkVG8odGhpcywgaCksIHUuc3ViVG8oZSwgdSkpLCBoLnJTaGlmdFRvKDEsIGgpKSA6IHUuaXNFdmVuKCkgfHwgdS5zdWJUbyhlLCB1KSwgdS5yU2hpZnRUbygxLCB1KTtcbiAgICByLmNvbXBhcmVUbyhpKSA+PSAwID8gKHIuc3ViVG8oaSwgciksIHQgJiYgcy5zdWJUbyhoLCBzKSwgbi5zdWJUbyh1LCBuKSkgOiAoaS5zdWJUbyhyLCBpKSwgdCAmJiBoLnN1YlRvKHMsIGgpLCB1LnN1YlRvKG4sIHUpKTtcbiAgfVxuICBpZiAoaS5jb21wYXJlVG8oUi5PTkUpICE9IDApXG4gICAgcmV0dXJuIFIuWkVSTztcbiAgaWYgKHUuY29tcGFyZVRvKGUpID49IDApXG4gICAgcmV0dXJuIHUuc3VidHJhY3QoZSk7XG4gIGlmICh1LnNpZ251bSgpIDwgMClcbiAgICB1LmFkZFRvKGUsIHUpO1xuICBlbHNlXG4gICAgcmV0dXJuIHU7XG4gIHJldHVybiB1LnNpZ251bSgpIDwgMCA/IHUuYWRkKGUpIDogdTtcbn1cbnZhciBsZSA9IFsyLCAzLCA1LCA3LCAxMSwgMTMsIDE3LCAxOSwgMjMsIDI5LCAzMSwgMzcsIDQxLCA0MywgNDcsIDUzLCA1OSwgNjEsIDY3LCA3MSwgNzMsIDc5LCA4MywgODksIDk3LCAxMDEsIDEwMywgMTA3LCAxMDksIDExMywgMTI3LCAxMzEsIDEzNywgMTM5LCAxNDksIDE1MSwgMTU3LCAxNjMsIDE2NywgMTczLCAxNzksIDE4MSwgMTkxLCAxOTMsIDE5NywgMTk5LCAyMTEsIDIyMywgMjI3LCAyMjksIDIzMywgMjM5LCAyNDEsIDI1MSwgMjU3LCAyNjMsIDI2OSwgMjcxLCAyNzcsIDI4MSwgMjgzLCAyOTMsIDMwNywgMzExLCAzMTMsIDMxNywgMzMxLCAzMzcsIDM0NywgMzQ5LCAzNTMsIDM1OSwgMzY3LCAzNzMsIDM3OSwgMzgzLCAzODksIDM5NywgNDAxLCA0MDksIDQxOSwgNDIxLCA0MzEsIDQzMywgNDM5LCA0NDMsIDQ0OSwgNDU3LCA0NjEsIDQ2MywgNDY3LCA0NzksIDQ4NywgNDkxLCA0OTksIDUwMywgNTA5LCA1MjEsIDUyMywgNTQxLCA1NDcsIDU1NywgNTYzLCA1NjksIDU3MSwgNTc3LCA1ODcsIDU5MywgNTk5LCA2MDEsIDYwNywgNjEzLCA2MTcsIDYxOSwgNjMxLCA2NDEsIDY0MywgNjQ3LCA2NTMsIDY1OSwgNjYxLCA2NzMsIDY3NywgNjgzLCA2OTEsIDcwMSwgNzA5LCA3MTksIDcyNywgNzMzLCA3MzksIDc0MywgNzUxLCA3NTcsIDc2MSwgNzY5LCA3NzMsIDc4NywgNzk3LCA4MDksIDgxMSwgODIxLCA4MjMsIDgyNywgODI5LCA4MzksIDg1MywgODU3LCA4NTksIDg2MywgODc3LCA4ODEsIDg4MywgODg3LCA5MDcsIDkxMSwgOTE5LCA5MjksIDkzNywgOTQxLCA5NDcsIDk1MywgOTY3LCA5NzEsIDk3NywgOTgzLCA5OTEsIDk5N10sIEZpID0gKDEgPDwgMjYpIC8gbGVbbGUubGVuZ3RoIC0gMV07XG5mdW5jdGlvbiBiaShlKSB7XG4gIHZhciB0LCByID0gdGhpcy5hYnMoKTtcbiAgaWYgKHIudCA9PSAxICYmIHJbMF0gPD0gbGVbbGUubGVuZ3RoIC0gMV0pIHtcbiAgICBmb3IgKHQgPSAwOyB0IDwgbGUubGVuZ3RoOyArK3QpXG4gICAgICBpZiAoclswXSA9PSBsZVt0XSlcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIHJldHVybiAhMTtcbiAgfVxuICBpZiAoci5pc0V2ZW4oKSlcbiAgICByZXR1cm4gITE7XG4gIGZvciAodCA9IDE7IHQgPCBsZS5sZW5ndGg7ICkge1xuICAgIGZvciAodmFyIGkgPSBsZVt0XSwgcyA9IHQgKyAxOyBzIDwgbGUubGVuZ3RoICYmIGkgPCBGaTsgKVxuICAgICAgaSAqPSBsZVtzKytdO1xuICAgIGZvciAoaSA9IHIubW9kSW50KGkpOyB0IDwgczsgKVxuICAgICAgaWYgKGkgJSBsZVt0KytdID09IDApXG4gICAgICAgIHJldHVybiAhMTtcbiAgfVxuICByZXR1cm4gci5taWxsZXJSYWJpbihlKTtcbn1cbmZ1bmN0aW9uIEFpKGUpIHtcbiAgdmFyIHQgPSB0aGlzLnN1YnRyYWN0KFIuT05FKSwgciA9IHQuZ2V0TG93ZXN0U2V0Qml0KCk7XG4gIGlmIChyIDw9IDApXG4gICAgcmV0dXJuICExO1xuICB2YXIgaSA9IHQuc2hpZnRSaWdodChyKTtcbiAgZSA9IGUgKyAxID4+IDEsIGUgPiBsZS5sZW5ndGggJiYgKGUgPSBsZS5sZW5ndGgpO1xuICBmb3IgKHZhciBzID0gXygpLCBuID0gMDsgbiA8IGU7ICsrbikge1xuICAgIHMuZnJvbUludChsZVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsZS5sZW5ndGgpXSk7XG4gICAgdmFyIGggPSBzLm1vZFBvdyhpLCB0aGlzKTtcbiAgICBpZiAoaC5jb21wYXJlVG8oUi5PTkUpICE9IDAgJiYgaC5jb21wYXJlVG8odCkgIT0gMCkge1xuICAgICAgZm9yICh2YXIgdSA9IDE7IHUrKyA8IHIgJiYgaC5jb21wYXJlVG8odCkgIT0gMDsgKVxuICAgICAgICBpZiAoaCA9IGgubW9kUG93SW50KDIsIHRoaXMpLCBoLmNvbXBhcmVUbyhSLk9ORSkgPT0gMClcbiAgICAgICAgICByZXR1cm4gITE7XG4gICAgICBpZiAoaC5jb21wYXJlVG8odCkgIT0gMClcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgfVxuICByZXR1cm4gITA7XG59XG5SLnByb3RvdHlwZS5jaHVua1NpemUgPSBEcjtcblIucHJvdG90eXBlLnRvUmFkaXggPSBJcjtcblIucHJvdG90eXBlLmZyb21SYWRpeCA9IENyO1xuUi5wcm90b3R5cGUuZnJvbU51bWJlciA9IFJyO1xuUi5wcm90b3R5cGUuYml0d2lzZVRvID0gT3I7XG5SLnByb3RvdHlwZS5jaGFuZ2VCaXQgPSBKcjtcblIucHJvdG90eXBlLmFkZFRvID0gUXI7XG5SLnByb3RvdHlwZS5kTXVsdGlwbHkgPSBvaTtcblIucHJvdG90eXBlLmRBZGRPZmZzZXQgPSB1aTtcblIucHJvdG90eXBlLm11bHRpcGx5TG93ZXJUbyA9IGxpO1xuUi5wcm90b3R5cGUubXVsdGlwbHlVcHBlclRvID0gZGk7XG5SLnByb3RvdHlwZS5tb2RJbnQgPSBFaTtcblIucHJvdG90eXBlLm1pbGxlclJhYmluID0gQWk7XG5SLnByb3RvdHlwZS5jbG9uZSA9IHdyO1xuUi5wcm90b3R5cGUuaW50VmFsdWUgPSBGcjtcblIucHJvdG90eXBlLmJ5dGVWYWx1ZSA9IGJyO1xuUi5wcm90b3R5cGUuc2hvcnRWYWx1ZSA9IEFyO1xuUi5wcm90b3R5cGUuc2lnbnVtID0gUHI7XG5SLnByb3RvdHlwZS50b0J5dGVBcnJheSA9IFRyO1xuUi5wcm90b3R5cGUuZXF1YWxzID0gQnI7XG5SLnByb3RvdHlwZS5taW4gPSBOcjtcblIucHJvdG90eXBlLm1heCA9IEhyO1xuUi5wcm90b3R5cGUuYW5kID0gVnI7XG5SLnByb3RvdHlwZS5vciA9IEtyO1xuUi5wcm90b3R5cGUueG9yID0gTHI7XG5SLnByb3RvdHlwZS5hbmROb3QgPSBxcjtcblIucHJvdG90eXBlLm5vdCA9IGtyO1xuUi5wcm90b3R5cGUuc2hpZnRMZWZ0ID0gTXI7XG5SLnByb3RvdHlwZS5zaGlmdFJpZ2h0ID0gX3I7XG5SLnByb3RvdHlwZS5nZXRMb3dlc3RTZXRCaXQgPSB6cjtcblIucHJvdG90eXBlLmJpdENvdW50ID0gV3I7XG5SLnByb3RvdHlwZS50ZXN0Qml0ID0gWHI7XG5SLnByb3RvdHlwZS5zZXRCaXQgPSAkcjtcblIucHJvdG90eXBlLmNsZWFyQml0ID0gWXI7XG5SLnByb3RvdHlwZS5mbGlwQml0ID0gWnI7XG5SLnByb3RvdHlwZS5hZGQgPSBlaTtcblIucHJvdG90eXBlLnN1YnRyYWN0ID0gdGk7XG5SLnByb3RvdHlwZS5tdWx0aXBseSA9IHJpO1xuUi5wcm90b3R5cGUuZGl2aWRlID0gbmk7XG5SLnByb3RvdHlwZS5yZW1haW5kZXIgPSBzaTtcblIucHJvdG90eXBlLmRpdmlkZUFuZFJlbWFpbmRlciA9IGFpO1xuUi5wcm90b3R5cGUubW9kUG93ID0geGk7XG5SLnByb3RvdHlwZS5tb2RJbnZlcnNlID0gd2k7XG5SLnByb3RvdHlwZS5wb3cgPSBjaTtcblIucHJvdG90eXBlLmdjZCA9IFNpO1xuUi5wcm90b3R5cGUuaXNQcm9iYWJsZVByaW1lID0gYmk7XG5SLnByb3RvdHlwZS5zcXVhcmUgPSBpaTtcbi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuL1xuICovXG5mdW5jdGlvbiBhdCgpIHtcbiAgdGhpcy5pID0gMCwgdGhpcy5qID0gMCwgdGhpcy5TID0gbmV3IEFycmF5KCk7XG59XG5mdW5jdGlvbiBEaShlKSB7XG4gIHZhciB0LCByLCBpO1xuICBmb3IgKHQgPSAwOyB0IDwgMjU2OyArK3QpXG4gICAgdGhpcy5TW3RdID0gdDtcbiAgZm9yIChyID0gMCwgdCA9IDA7IHQgPCAyNTY7ICsrdClcbiAgICByID0gciArIHRoaXMuU1t0XSArIGVbdCAlIGUubGVuZ3RoXSAmIDI1NSwgaSA9IHRoaXMuU1t0XSwgdGhpcy5TW3RdID0gdGhpcy5TW3JdLCB0aGlzLlNbcl0gPSBpO1xuICB0aGlzLmkgPSAwLCB0aGlzLmogPSAwO1xufVxuZnVuY3Rpb24gUGkoKSB7XG4gIHZhciBlO1xuICByZXR1cm4gdGhpcy5pID0gdGhpcy5pICsgMSAmIDI1NSwgdGhpcy5qID0gdGhpcy5qICsgdGhpcy5TW3RoaXMuaV0gJiAyNTUsIGUgPSB0aGlzLlNbdGhpcy5pXSwgdGhpcy5TW3RoaXMuaV0gPSB0aGlzLlNbdGhpcy5qXSwgdGhpcy5TW3RoaXMual0gPSBlLCB0aGlzLlNbZSArIHRoaXMuU1t0aGlzLmldICYgMjU1XTtcbn1cbmF0LnByb3RvdHlwZS5pbml0ID0gRGk7XG5hdC5wcm90b3R5cGUubmV4dCA9IFBpO1xuZnVuY3Rpb24gSWkoKSB7XG4gIHJldHVybiBuZXcgYXQoKTtcbn1cbnZhciBldCA9IDI1Njtcbi8qISAoYykgVG9tIFd1IHwgaHR0cDovL3d3dy1jcy1zdHVkZW50cy5zdGFuZm9yZC5lZHUvfnRqdy9qc2JuL1xuICovXG52YXIgV2UsIGdlLCBvZTtcbmZ1bmN0aW9uIENpKGUpIHtcbiAgZ2Vbb2UrK10gXj0gZSAmIDI1NSwgZ2Vbb2UrK10gXj0gZSA+PiA4ICYgMjU1LCBnZVtvZSsrXSBePSBlID4+IDE2ICYgMjU1LCBnZVtvZSsrXSBePSBlID4+IDI0ICYgMjU1LCBvZSA+PSBldCAmJiAob2UgLT0gZXQpO1xufVxuZnVuY3Rpb24gRHQoKSB7XG4gIENpKCgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkuZ2V0VGltZSgpKTtcbn1cbmlmIChnZSA9PSBudWxsKSB7XG4gIGdlID0gbmV3IEFycmF5KCksIG9lID0gMDtcbiAgdmFyIFNlO1xuICBpZiAoVmUgIT09IHZvaWQgMCAmJiAoVmUuY3J5cHRvICE9PSB2b2lkIDAgfHwgVmUubXNDcnlwdG8gIT09IHZvaWQgMCkpIHtcbiAgICB2YXIgbHQgPSBWZS5jcnlwdG8gfHwgVmUubXNDcnlwdG87XG4gICAgaWYgKGx0LmdldFJhbmRvbVZhbHVlcykge1xuICAgICAgdmFyIGR0ID0gbmV3IFVpbnQ4QXJyYXkoMzIpO1xuICAgICAgZm9yIChsdC5nZXRSYW5kb21WYWx1ZXMoZHQpLCBTZSA9IDA7IFNlIDwgMzI7ICsrU2UpXG4gICAgICAgIGdlW29lKytdID0gZHRbU2VdO1xuICAgIH0gZWxzZSBpZiAoVWUuYXBwTmFtZSA9PSBcIk5ldHNjYXBlXCIgJiYgVWUuYXBwVmVyc2lvbiA8IFwiNVwiKSB7XG4gICAgICB2YXIgcHQgPSBWZS5jcnlwdG8ucmFuZG9tKDMyKTtcbiAgICAgIGZvciAoU2UgPSAwOyBTZSA8IHB0Lmxlbmd0aDsgKytTZSlcbiAgICAgICAgZ2Vbb2UrK10gPSBwdC5jaGFyQ29kZUF0KFNlKSAmIDI1NTtcbiAgICB9XG4gIH1cbiAgZm9yICg7IG9lIDwgZXQ7IClcbiAgICBTZSA9IE1hdGguZmxvb3IoNjU1MzYgKiBNYXRoLnJhbmRvbSgpKSwgZ2Vbb2UrK10gPSBTZSA+Pj4gOCwgZ2Vbb2UrK10gPSBTZSAmIDI1NTtcbiAgb2UgPSAwLCBEdCgpO1xufVxuZnVuY3Rpb24gUmkoKSB7XG4gIGlmIChXZSA9PSBudWxsKSB7XG4gICAgZm9yIChEdCgpLCBXZSA9IElpKCksIFdlLmluaXQoZ2UpLCBvZSA9IDA7IG9lIDwgZ2UubGVuZ3RoOyArK29lKVxuICAgICAgZ2Vbb2VdID0gMDtcbiAgICBvZSA9IDA7XG4gIH1cbiAgcmV0dXJuIFdlLm5leHQoKTtcbn1cbmZ1bmN0aW9uIFRpKGUpIHtcbiAgdmFyIHQ7XG4gIGZvciAodCA9IDA7IHQgPCBlLmxlbmd0aDsgKyt0KVxuICAgIGVbdF0gPSBSaSgpO1xufVxuZnVuY3Rpb24gR2UoKSB7XG59XG5HZS5wcm90b3R5cGUubmV4dEJ5dGVzID0gVGk7XG4vKiEgKGMpIFRvbSBXdSB8IGh0dHA6Ly93d3ctY3Mtc3R1ZGVudHMuc3RhbmZvcmQuZWR1L350ancvanNibi9cbiAqL1xuZnVuY3Rpb24gdmUoZSwgdCkge1xuICByZXR1cm4gbmV3IFIoZSwgdCk7XG59XG5mdW5jdGlvbiBxKCkge1xuICB0aGlzLm4gPSBudWxsLCB0aGlzLmUgPSAwLCB0aGlzLmQgPSBudWxsLCB0aGlzLnAgPSBudWxsLCB0aGlzLnEgPSBudWxsLCB0aGlzLmRtcDEgPSBudWxsLCB0aGlzLmRtcTEgPSBudWxsLCB0aGlzLmNvZWZmID0gbnVsbDtcbn1cbmZ1bmN0aW9uIEJpKGUsIHQpIHtcbiAgaWYgKHRoaXMuaXNQdWJsaWMgPSAhMCwgdGhpcy5pc1ByaXZhdGUgPSAhMSwgdHlwZW9mIGUgIT0gXCJzdHJpbmdcIilcbiAgICB0aGlzLm4gPSBlLCB0aGlzLmUgPSB0O1xuICBlbHNlIGlmIChlICE9IG51bGwgJiYgdCAhPSBudWxsICYmIGUubGVuZ3RoID4gMCAmJiB0Lmxlbmd0aCA+IDApXG4gICAgdGhpcy5uID0gdmUoZSwgMTYpLCB0aGlzLmUgPSBwYXJzZUludCh0LCAxNik7XG4gIGVsc2VcbiAgICB0aHJvdyBcIkludmFsaWQgUlNBIHB1YmxpYyBrZXlcIjtcbn1cbmZ1bmN0aW9uIE5pKGUpIHtcbiAgcmV0dXJuIGUubW9kUG93SW50KHRoaXMuZSwgdGhpcy5uKTtcbn1cbnEucHJvdG90eXBlLmRvUHVibGljID0gTmk7XG5xLnByb3RvdHlwZS5zZXRQdWJsaWMgPSBCaTtcbnEucHJvdG90eXBlLnR5cGUgPSBcIlJTQVwiO1xuZnVuY3Rpb24gSGkoZSwgdCwgcikge1xuICBpZiAodGhpcy5pc1ByaXZhdGUgPSAhMCwgdHlwZW9mIGUgIT0gXCJzdHJpbmdcIilcbiAgICB0aGlzLm4gPSBlLCB0aGlzLmUgPSB0LCB0aGlzLmQgPSByO1xuICBlbHNlIGlmIChlICE9IG51bGwgJiYgdCAhPSBudWxsICYmIGUubGVuZ3RoID4gMCAmJiB0Lmxlbmd0aCA+IDApXG4gICAgdGhpcy5uID0gdmUoZSwgMTYpLCB0aGlzLmUgPSBwYXJzZUludCh0LCAxNiksIHRoaXMuZCA9IHZlKHIsIDE2KTtcbiAgZWxzZVxuICAgIHRocm93IFwiSW52YWxpZCBSU0EgcHJpdmF0ZSBrZXlcIjtcbn1cbmZ1bmN0aW9uIE9pKGUsIHQsIHIsIGksIHMsIG4sIGgsIHUpIHtcbiAgaWYgKHRoaXMuaXNQcml2YXRlID0gITAsIHRoaXMuaXNQdWJsaWMgPSAhMSwgZSA9PSBudWxsKVxuICAgIHRocm93IFwiUlNBU2V0UHJpdmF0ZUV4IE4gPT0gbnVsbFwiO1xuICBpZiAodCA9PSBudWxsKVxuICAgIHRocm93IFwiUlNBU2V0UHJpdmF0ZUV4IEUgPT0gbnVsbFwiO1xuICBpZiAoZS5sZW5ndGggPT0gMClcbiAgICB0aHJvdyBcIlJTQVNldFByaXZhdGVFeCBOLmxlbmd0aCA9PSAwXCI7XG4gIGlmICh0Lmxlbmd0aCA9PSAwKVxuICAgIHRocm93IFwiUlNBU2V0UHJpdmF0ZUV4IEUubGVuZ3RoID09IDBcIjtcbiAgaWYgKGUgIT0gbnVsbCAmJiB0ICE9IG51bGwgJiYgZS5sZW5ndGggPiAwICYmIHQubGVuZ3RoID4gMClcbiAgICB0aGlzLm4gPSB2ZShlLCAxNiksIHRoaXMuZSA9IHBhcnNlSW50KHQsIDE2KSwgdGhpcy5kID0gdmUociwgMTYpLCB0aGlzLnAgPSB2ZShpLCAxNiksIHRoaXMucSA9IHZlKHMsIDE2KSwgdGhpcy5kbXAxID0gdmUobiwgMTYpLCB0aGlzLmRtcTEgPSB2ZShoLCAxNiksIHRoaXMuY29lZmYgPSB2ZSh1LCAxNik7XG4gIGVsc2VcbiAgICB0aHJvdyBcIkludmFsaWQgUlNBIHByaXZhdGUga2V5IGluIFJTQVNldFByaXZhdGVFeFwiO1xufVxuZnVuY3Rpb24gamkoZSwgdCkge1xuICB2YXIgciA9IG5ldyBHZSgpLCBpID0gZSA+PiAxO1xuICB0aGlzLmUgPSBwYXJzZUludCh0LCAxNik7XG4gIGZvciAodmFyIHMgPSBuZXcgUih0LCAxNiksIG4gPSBlIC8gMiAtIDEwMCwgaCA9IFIuT05FLnNoaWZ0TGVmdChuKTsgOyApIHtcbiAgICBmb3IgKDsgdGhpcy5wID0gbmV3IFIoZSAtIGksIDEsIHIpLCAhKHRoaXMucC5zdWJ0cmFjdChSLk9ORSkuZ2NkKHMpLmNvbXBhcmVUbyhSLk9ORSkgPT0gMCAmJiB0aGlzLnAuaXNQcm9iYWJsZVByaW1lKDEwKSk7IClcbiAgICAgIDtcbiAgICBmb3IgKDsgdGhpcy5xID0gbmV3IFIoaSwgMSwgciksICEodGhpcy5xLnN1YnRyYWN0KFIuT05FKS5nY2QocykuY29tcGFyZVRvKFIuT05FKSA9PSAwICYmIHRoaXMucS5pc1Byb2JhYmxlUHJpbWUoMTApKTsgKVxuICAgICAgO1xuICAgIGlmICh0aGlzLnAuY29tcGFyZVRvKHRoaXMucSkgPD0gMCkge1xuICAgICAgdmFyIHUgPSB0aGlzLnA7XG4gICAgICB0aGlzLnAgPSB0aGlzLnEsIHRoaXMucSA9IHU7XG4gICAgfVxuICAgIHZhciBwID0gdGhpcy5xLnN1YnRyYWN0KHRoaXMucCkuYWJzKCk7XG4gICAgaWYgKCEocC5iaXRMZW5ndGgoKSA8IG4gfHwgcC5jb21wYXJlVG8oaCkgPD0gMCkpIHtcbiAgICAgIHZhciBjID0gdGhpcy5wLnN1YnRyYWN0KFIuT05FKSwgeSA9IHRoaXMucS5zdWJ0cmFjdChSLk9ORSksIHYgPSBjLm11bHRpcGx5KHkpO1xuICAgICAgaWYgKHYuZ2NkKHMpLmNvbXBhcmVUbyhSLk9ORSkgPT0gMCAmJiAodGhpcy5uID0gdGhpcy5wLm11bHRpcGx5KHRoaXMucSksIHRoaXMubi5iaXRMZW5ndGgoKSA9PSBlKSkge1xuICAgICAgICB0aGlzLmQgPSBzLm1vZEludmVyc2UodiksIHRoaXMuZG1wMSA9IHRoaXMuZC5tb2QoYyksIHRoaXMuZG1xMSA9IHRoaXMuZC5tb2QoeSksIHRoaXMuY29lZmYgPSB0aGlzLnEubW9kSW52ZXJzZSh0aGlzLnApO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdGhpcy5pc1ByaXZhdGUgPSAhMDtcbn1cbmZ1bmN0aW9uIFZpKGUpIHtcbiAgaWYgKHRoaXMucCA9PSBudWxsIHx8IHRoaXMucSA9PSBudWxsKVxuICAgIHJldHVybiBlLm1vZFBvdyh0aGlzLmQsIHRoaXMubik7XG4gIGZvciAodmFyIHQgPSBlLm1vZCh0aGlzLnApLm1vZFBvdyh0aGlzLmRtcDEsIHRoaXMucCksIHIgPSBlLm1vZCh0aGlzLnEpLm1vZFBvdyh0aGlzLmRtcTEsIHRoaXMucSk7IHQuY29tcGFyZVRvKHIpIDwgMDsgKVxuICAgIHQgPSB0LmFkZCh0aGlzLnApO1xuICByZXR1cm4gdC5zdWJ0cmFjdChyKS5tdWx0aXBseSh0aGlzLmNvZWZmKS5tb2QodGhpcy5wKS5tdWx0aXBseSh0aGlzLnEpLmFkZChyKTtcbn1cbnEucHJvdG90eXBlLmRvUHJpdmF0ZSA9IFZpO1xucS5wcm90b3R5cGUuc2V0UHJpdmF0ZSA9IEhpO1xucS5wcm90b3R5cGUuc2V0UHJpdmF0ZUV4ID0gT2k7XG5xLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGppO1xuLyohIChjKSBUb20gV3UgfCBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4gKi9cbmZ1bmN0aW9uIHVlKGUsIHQpIHtcbiAgdGhpcy54ID0gdCwgdGhpcy5xID0gZTtcbn1cbmZ1bmN0aW9uIEtpKGUpIHtcbiAgcmV0dXJuIGUgPT0gdGhpcyA/ICEwIDogdGhpcy5xLmVxdWFscyhlLnEpICYmIHRoaXMueC5lcXVhbHMoZS54KTtcbn1cbmZ1bmN0aW9uIExpKCkge1xuICByZXR1cm4gdGhpcy54O1xufVxuZnVuY3Rpb24gcWkoKSB7XG4gIHJldHVybiBuZXcgdWUodGhpcy5xLCB0aGlzLngubmVnYXRlKCkubW9kKHRoaXMucSkpO1xufVxuZnVuY3Rpb24ga2koZSkge1xuICByZXR1cm4gbmV3IHVlKHRoaXMucSwgdGhpcy54LmFkZChlLnRvQmlnSW50ZWdlcigpKS5tb2QodGhpcy5xKSk7XG59XG5mdW5jdGlvbiBNaShlKSB7XG4gIHJldHVybiBuZXcgdWUodGhpcy5xLCB0aGlzLnguc3VidHJhY3QoZS50b0JpZ0ludGVnZXIoKSkubW9kKHRoaXMucSkpO1xufVxuZnVuY3Rpb24gX2koZSkge1xuICByZXR1cm4gbmV3IHVlKHRoaXMucSwgdGhpcy54Lm11bHRpcGx5KGUudG9CaWdJbnRlZ2VyKCkpLm1vZCh0aGlzLnEpKTtcbn1cbmZ1bmN0aW9uIFVpKCkge1xuICByZXR1cm4gbmV3IHVlKHRoaXMucSwgdGhpcy54LnNxdWFyZSgpLm1vZCh0aGlzLnEpKTtcbn1cbmZ1bmN0aW9uIHppKGUpIHtcbiAgcmV0dXJuIG5ldyB1ZSh0aGlzLnEsIHRoaXMueC5tdWx0aXBseShlLnRvQmlnSW50ZWdlcigpLm1vZEludmVyc2UodGhpcy5xKSkubW9kKHRoaXMucSkpO1xufVxudWUucHJvdG90eXBlLmVxdWFscyA9IEtpO1xudWUucHJvdG90eXBlLnRvQmlnSW50ZWdlciA9IExpO1xudWUucHJvdG90eXBlLm5lZ2F0ZSA9IHFpO1xudWUucHJvdG90eXBlLmFkZCA9IGtpO1xudWUucHJvdG90eXBlLnN1YnRyYWN0ID0gTWk7XG51ZS5wcm90b3R5cGUubXVsdGlwbHkgPSBfaTtcbnVlLnByb3RvdHlwZS5zcXVhcmUgPSBVaTtcbnVlLnByb3RvdHlwZS5kaXZpZGUgPSB6aTtcbnVlLnByb3RvdHlwZS5zcXJ0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgdWUodGhpcy5xLCB0aGlzLnguc3FydCgpLm1vZCh0aGlzLnEpKTtcbn07XG5mdW5jdGlvbiB6KGUsIHQsIHIsIGkpIHtcbiAgdGhpcy5jdXJ2ZSA9IGUsIHRoaXMueCA9IHQsIHRoaXMueSA9IHIsIGkgPT0gbnVsbCA/IHRoaXMueiA9IFIuT05FIDogdGhpcy56ID0gaSwgdGhpcy56aW52ID0gbnVsbDtcbn1cbmZ1bmN0aW9uIEdpKCkge1xuICByZXR1cm4gdGhpcy56aW52ID09IG51bGwgJiYgKHRoaXMuemludiA9IHRoaXMuei5tb2RJbnZlcnNlKHRoaXMuY3VydmUucSkpLCB0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKHRoaXMueC50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnppbnYpLm1vZCh0aGlzLmN1cnZlLnEpKTtcbn1cbmZ1bmN0aW9uIFdpKCkge1xuICByZXR1cm4gdGhpcy56aW52ID09IG51bGwgJiYgKHRoaXMuemludiA9IHRoaXMuei5tb2RJbnZlcnNlKHRoaXMuY3VydmUucSkpLCB0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKHRoaXMueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnppbnYpLm1vZCh0aGlzLmN1cnZlLnEpKTtcbn1cbmZ1bmN0aW9uIFhpKGUpIHtcbiAgaWYgKGUgPT0gdGhpcylcbiAgICByZXR1cm4gITA7XG4gIGlmICh0aGlzLmlzSW5maW5pdHkoKSlcbiAgICByZXR1cm4gZS5pc0luZmluaXR5KCk7XG4gIGlmIChlLmlzSW5maW5pdHkoKSlcbiAgICByZXR1cm4gdGhpcy5pc0luZmluaXR5KCk7XG4gIHZhciB0LCByO1xuICByZXR1cm4gdCA9IGUueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseSh0aGlzLnopLnN1YnRyYWN0KHRoaXMueS50b0JpZ0ludGVnZXIoKS5tdWx0aXBseShlLnopKS5tb2QodGhpcy5jdXJ2ZS5xKSwgdC5lcXVhbHMoUi5aRVJPKSA/IChyID0gZS54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KHRoaXMueikuc3VidHJhY3QodGhpcy54LnRvQmlnSW50ZWdlcigpLm11bHRpcGx5KGUueikpLm1vZCh0aGlzLmN1cnZlLnEpLCByLmVxdWFscyhSLlpFUk8pKSA6ICExO1xufVxuZnVuY3Rpb24gSmkoKSB7XG4gIHJldHVybiB0aGlzLnggPT0gbnVsbCAmJiB0aGlzLnkgPT0gbnVsbCA/ICEwIDogdGhpcy56LmVxdWFscyhSLlpFUk8pICYmICF0aGlzLnkudG9CaWdJbnRlZ2VyKCkuZXF1YWxzKFIuWkVSTyk7XG59XG5mdW5jdGlvbiAkaSgpIHtcbiAgcmV0dXJuIG5ldyB6KHRoaXMuY3VydmUsIHRoaXMueCwgdGhpcy55Lm5lZ2F0ZSgpLCB0aGlzLnopO1xufVxuZnVuY3Rpb24gWWkoZSkge1xuICBpZiAodGhpcy5pc0luZmluaXR5KCkpXG4gICAgcmV0dXJuIGU7XG4gIGlmIChlLmlzSW5maW5pdHkoKSlcbiAgICByZXR1cm4gdGhpcztcbiAgdmFyIHQgPSBlLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLnkudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkoZS56KSkubW9kKHRoaXMuY3VydmUucSksIHIgPSBlLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkodGhpcy56KS5zdWJ0cmFjdCh0aGlzLngudG9CaWdJbnRlZ2VyKCkubXVsdGlwbHkoZS56KSkubW9kKHRoaXMuY3VydmUucSk7XG4gIGlmIChSLlpFUk8uZXF1YWxzKHIpKVxuICAgIHJldHVybiBSLlpFUk8uZXF1YWxzKHQpID8gdGhpcy50d2ljZSgpIDogdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpO1xuICB2YXIgaSA9IG5ldyBSKFwiM1wiKSwgcyA9IHRoaXMueC50b0JpZ0ludGVnZXIoKSwgbiA9IHRoaXMueS50b0JpZ0ludGVnZXIoKTtcbiAgZS54LnRvQmlnSW50ZWdlcigpLCBlLnkudG9CaWdJbnRlZ2VyKCk7XG4gIHZhciBoID0gci5zcXVhcmUoKSwgdSA9IGgubXVsdGlwbHkociksIHAgPSBzLm11bHRpcGx5KGgpLCBjID0gdC5zcXVhcmUoKS5tdWx0aXBseSh0aGlzLnopLCB5ID0gYy5zdWJ0cmFjdChwLnNoaWZ0TGVmdCgxKSkubXVsdGlwbHkoZS56KS5zdWJ0cmFjdCh1KS5tdWx0aXBseShyKS5tb2QodGhpcy5jdXJ2ZS5xKSwgdiA9IHAubXVsdGlwbHkoaSkubXVsdGlwbHkodCkuc3VidHJhY3Qobi5tdWx0aXBseSh1KSkuc3VidHJhY3QoYy5tdWx0aXBseSh0KSkubXVsdGlwbHkoZS56KS5hZGQodC5tdWx0aXBseSh1KSkubW9kKHRoaXMuY3VydmUucSksIG8gPSB1Lm11bHRpcGx5KHRoaXMueikubXVsdGlwbHkoZS56KS5tb2QodGhpcy5jdXJ2ZS5xKTtcbiAgcmV0dXJuIG5ldyB6KHRoaXMuY3VydmUsIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIoeSksIHRoaXMuY3VydmUuZnJvbUJpZ0ludGVnZXIodiksIG8pO1xufVxuZnVuY3Rpb24gWmkoKSB7XG4gIGlmICh0aGlzLmlzSW5maW5pdHkoKSlcbiAgICByZXR1cm4gdGhpcztcbiAgaWYgKHRoaXMueS50b0JpZ0ludGVnZXIoKS5zaWdudW0oKSA9PSAwKVxuICAgIHJldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCk7XG4gIHZhciBlID0gbmV3IFIoXCIzXCIpLCB0ID0gdGhpcy54LnRvQmlnSW50ZWdlcigpLCByID0gdGhpcy55LnRvQmlnSW50ZWdlcigpLCBpID0gci5tdWx0aXBseSh0aGlzLnopLCBzID0gaS5tdWx0aXBseShyKS5tb2QodGhpcy5jdXJ2ZS5xKSwgbiA9IHRoaXMuY3VydmUuYS50b0JpZ0ludGVnZXIoKSwgaCA9IHQuc3F1YXJlKCkubXVsdGlwbHkoZSk7XG4gIFIuWkVSTy5lcXVhbHMobikgfHwgKGggPSBoLmFkZCh0aGlzLnouc3F1YXJlKCkubXVsdGlwbHkobikpKSwgaCA9IGgubW9kKHRoaXMuY3VydmUucSk7XG4gIHZhciB1ID0gaC5zcXVhcmUoKS5zdWJ0cmFjdCh0LnNoaWZ0TGVmdCgzKS5tdWx0aXBseShzKSkuc2hpZnRMZWZ0KDEpLm11bHRpcGx5KGkpLm1vZCh0aGlzLmN1cnZlLnEpLCBwID0gaC5tdWx0aXBseShlKS5tdWx0aXBseSh0KS5zdWJ0cmFjdChzLnNoaWZ0TGVmdCgxKSkuc2hpZnRMZWZ0KDIpLm11bHRpcGx5KHMpLnN1YnRyYWN0KGguc3F1YXJlKCkubXVsdGlwbHkoaCkpLm1vZCh0aGlzLmN1cnZlLnEpLCBjID0gaS5zcXVhcmUoKS5tdWx0aXBseShpKS5zaGlmdExlZnQoMykubW9kKHRoaXMuY3VydmUucSk7XG4gIHJldHVybiBuZXcgeih0aGlzLmN1cnZlLCB0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKHUpLCB0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKHApLCBjKTtcbn1cbmZ1bmN0aW9uIFFpKGUpIHtcbiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiB0aGlzO1xuICBpZiAoZS5zaWdudW0oKSA9PSAwKVxuICAgIHJldHVybiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCk7XG4gIHZhciB0ID0gZSwgciA9IHQubXVsdGlwbHkobmV3IFIoXCIzXCIpKSwgaSA9IHRoaXMubmVnYXRlKCksIHMgPSB0aGlzLCBuID0gdGhpcy5jdXJ2ZS5xLnN1YnRyYWN0KGUpLCBoID0gbi5tdWx0aXBseShuZXcgUihcIjNcIikpLCB1ID0gbmV3IHoodGhpcy5jdXJ2ZSwgdGhpcy54LCB0aGlzLnkpLCBwID0gdS5uZWdhdGUoKSwgYztcbiAgZm9yIChjID0gci5iaXRMZW5ndGgoKSAtIDI7IGMgPiAwOyAtLWMpIHtcbiAgICBzID0gcy50d2ljZSgpO1xuICAgIHZhciB5ID0gci50ZXN0Qml0KGMpLCB2ID0gdC50ZXN0Qml0KGMpO1xuICAgIHkgIT0gdiAmJiAocyA9IHMuYWRkKHkgPyB0aGlzIDogaSkpO1xuICB9XG4gIGZvciAoYyA9IGguYml0TGVuZ3RoKCkgLSAyOyBjID4gMDsgLS1jKSB7XG4gICAgdSA9IHUudHdpY2UoKTtcbiAgICB2YXIgbyA9IGgudGVzdEJpdChjKSwgbCA9IG4udGVzdEJpdChjKTtcbiAgICBvICE9IGwgJiYgKHUgPSB1LmFkZChvID8gdSA6IHApKTtcbiAgfVxuICByZXR1cm4gcztcbn1cbmZ1bmN0aW9uIGVuKGUsIHQsIHIpIHtcbiAgdmFyIGk7XG4gIGUuYml0TGVuZ3RoKCkgPiByLmJpdExlbmd0aCgpID8gaSA9IGUuYml0TGVuZ3RoKCkgLSAxIDogaSA9IHIuYml0TGVuZ3RoKCkgLSAxO1xuICBmb3IgKHZhciBzID0gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpLCBuID0gdGhpcy5hZGQodCk7IGkgPj0gMDsgKVxuICAgIHMgPSBzLnR3aWNlKCksIGUudGVzdEJpdChpKSA/IHIudGVzdEJpdChpKSA/IHMgPSBzLmFkZChuKSA6IHMgPSBzLmFkZCh0aGlzKSA6IHIudGVzdEJpdChpKSAmJiAocyA9IHMuYWRkKHQpKSwgLS1pO1xuICByZXR1cm4gcztcbn1cbnoucHJvdG90eXBlLmdldFggPSBHaTtcbnoucHJvdG90eXBlLmdldFkgPSBXaTtcbnoucHJvdG90eXBlLmVxdWFscyA9IFhpO1xuei5wcm90b3R5cGUuaXNJbmZpbml0eSA9IEppO1xuei5wcm90b3R5cGUubmVnYXRlID0gJGk7XG56LnByb3RvdHlwZS5hZGQgPSBZaTtcbnoucHJvdG90eXBlLnR3aWNlID0gWmk7XG56LnByb3RvdHlwZS5tdWx0aXBseSA9IFFpO1xuei5wcm90b3R5cGUubXVsdGlwbHlUd28gPSBlbjtcbmZ1bmN0aW9uIEJlKGUsIHQsIHIpIHtcbiAgdGhpcy5xID0gZSwgdGhpcy5hID0gdGhpcy5mcm9tQmlnSW50ZWdlcih0KSwgdGhpcy5iID0gdGhpcy5mcm9tQmlnSW50ZWdlcihyKSwgdGhpcy5pbmZpbml0eSA9IG5ldyB6KHRoaXMsIG51bGwsIG51bGwpO1xufVxuZnVuY3Rpb24gdG4oKSB7XG4gIHJldHVybiB0aGlzLnE7XG59XG5mdW5jdGlvbiBybigpIHtcbiAgcmV0dXJuIHRoaXMuYTtcbn1cbmZ1bmN0aW9uIG5uKCkge1xuICByZXR1cm4gdGhpcy5iO1xufVxuZnVuY3Rpb24gc24oZSkge1xuICByZXR1cm4gZSA9PSB0aGlzID8gITAgOiB0aGlzLnEuZXF1YWxzKGUucSkgJiYgdGhpcy5hLmVxdWFscyhlLmEpICYmIHRoaXMuYi5lcXVhbHMoZS5iKTtcbn1cbmZ1bmN0aW9uIGFuKCkge1xuICByZXR1cm4gdGhpcy5pbmZpbml0eTtcbn1cbmZ1bmN0aW9uIG9uKGUpIHtcbiAgcmV0dXJuIG5ldyB1ZSh0aGlzLnEsIGUpO1xufVxuZnVuY3Rpb24gdW4oZSkge1xuICBzd2l0Y2ggKHBhcnNlSW50KGUuc3Vic3RyKDAsIDIpLCAxNikpIHtcbiAgICBjYXNlIDA6XG4gICAgICByZXR1cm4gdGhpcy5pbmZpbml0eTtcbiAgICBjYXNlIDI6XG4gICAgY2FzZSAzOlxuICAgICAgdmFyIHQgPSBlLnN1YnN0cigwLCAyKTtcbiAgICAgIGUuc3Vic3RyKDIpO1xuICAgICAgdmFyIHIgPSB0aGlzLmZyb21CaWdJbnRlZ2VyKG5ldyBSKHAsIDE2KSksIGkgPSB0aGlzLmdldEEoKSwgcyA9IHRoaXMuZ2V0QigpLCBuID0gci5zcXVhcmUoKS5hZGQoaSkubXVsdGlwbHkocikuYWRkKHMpLCBoID0gbi5zcXJ0KCk7XG4gICAgICByZXR1cm4gdCA9PSBcIjAzXCIgJiYgKGggPSBoLm5lZ2F0ZSgpKSwgbmV3IHoodGhpcywgciwgaCk7XG4gICAgY2FzZSA0OlxuICAgIGNhc2UgNjpcbiAgICBjYXNlIDc6XG4gICAgICB2YXIgdSA9IChlLmxlbmd0aCAtIDIpIC8gMiwgcCA9IGUuc3Vic3RyKDIsIHUpLCBjID0gZS5zdWJzdHIodSArIDIsIHUpO1xuICAgICAgcmV0dXJuIG5ldyB6KHRoaXMsIHRoaXMuZnJvbUJpZ0ludGVnZXIobmV3IFIocCwgMTYpKSwgdGhpcy5mcm9tQmlnSW50ZWdlcihuZXcgUihjLCAxNikpKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbkJlLnByb3RvdHlwZS5nZXRRID0gdG47XG5CZS5wcm90b3R5cGUuZ2V0QSA9IHJuO1xuQmUucHJvdG90eXBlLmdldEIgPSBubjtcbkJlLnByb3RvdHlwZS5lcXVhbHMgPSBzbjtcbkJlLnByb3RvdHlwZS5nZXRJbmZpbml0eSA9IGFuO1xuQmUucHJvdG90eXBlLmZyb21CaWdJbnRlZ2VyID0gb247XG5CZS5wcm90b3R5cGUuZGVjb2RlUG9pbnRIZXggPSB1bjtcbi8qISAoYykgU3RlZmFuIFRob21hcyB8IGh0dHBzOi8vZ2l0aHViLmNvbS9iaXRjb2luanMvYml0Y29pbmpzLWxpYlxuICovXG51ZS5wcm90b3R5cGUuZ2V0Qnl0ZUxlbmd0aCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gTWF0aC5mbG9vcigodGhpcy50b0JpZ0ludGVnZXIoKS5iaXRMZW5ndGgoKSArIDcpIC8gOCk7XG59O1xuei5wcm90b3R5cGUuZ2V0RW5jb2RlZCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBmdW5jdGlvbihuLCBoKSB7XG4gICAgdmFyIHUgPSBuLnRvQnl0ZUFycmF5VW5zaWduZWQoKTtcbiAgICBpZiAoaCA8IHUubGVuZ3RoKVxuICAgICAgdSA9IHUuc2xpY2UodS5sZW5ndGggLSBoKTtcbiAgICBlbHNlXG4gICAgICBmb3IgKDsgaCA+IHUubGVuZ3RoOyApXG4gICAgICAgIHUudW5zaGlmdCgwKTtcbiAgICByZXR1cm4gdTtcbiAgfSwgciA9IHRoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLCBpID0gdGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCksIHMgPSB0KHIsIDMyKTtcbiAgcmV0dXJuIGUgPyBpLmlzRXZlbigpID8gcy51bnNoaWZ0KDIpIDogcy51bnNoaWZ0KDMpIDogKHMudW5zaGlmdCg0KSwgcyA9IHMuY29uY2F0KHQoaSwgMzIpKSksIHM7XG59O1xuei5kZWNvZGVGcm9tID0gZnVuY3Rpb24oZSwgdCkge1xuICB0WzBdO1xuICB2YXIgciA9IHQubGVuZ3RoIC0gMSwgaSA9IHQuc2xpY2UoMSwgMSArIHIgLyAyKSwgcyA9IHQuc2xpY2UoMSArIHIgLyAyLCAxICsgcik7XG4gIGkudW5zaGlmdCgwKSwgcy51bnNoaWZ0KDApO1xuICB2YXIgbiA9IG5ldyBSKGkpLCBoID0gbmV3IFIocyk7XG4gIHJldHVybiBuZXcgeihlLCBlLmZyb21CaWdJbnRlZ2VyKG4pLCBlLmZyb21CaWdJbnRlZ2VyKGgpKTtcbn07XG56LmRlY29kZUZyb21IZXggPSBmdW5jdGlvbihlLCB0KSB7XG4gIHQuc3Vic3RyKDAsIDIpO1xuICB2YXIgciA9IHQubGVuZ3RoIC0gMiwgaSA9IHQuc3Vic3RyKDIsIHIgLyAyKSwgcyA9IHQuc3Vic3RyKDIgKyByIC8gMiwgciAvIDIpLCBuID0gbmV3IFIoaSwgMTYpLCBoID0gbmV3IFIocywgMTYpO1xuICByZXR1cm4gbmV3IHooZSwgZS5mcm9tQmlnSW50ZWdlcihuKSwgZS5mcm9tQmlnSW50ZWdlcihoKSk7XG59O1xuei5wcm90b3R5cGUuYWRkMkQgPSBmdW5jdGlvbihlKSB7XG4gIGlmICh0aGlzLmlzSW5maW5pdHkoKSlcbiAgICByZXR1cm4gZTtcbiAgaWYgKGUuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiB0aGlzO1xuICBpZiAodGhpcy54LmVxdWFscyhlLngpKVxuICAgIHJldHVybiB0aGlzLnkuZXF1YWxzKGUueSkgPyB0aGlzLnR3aWNlKCkgOiB0aGlzLmN1cnZlLmdldEluZmluaXR5KCk7XG4gIHZhciB0ID0gZS54LnN1YnRyYWN0KHRoaXMueCksIHIgPSBlLnkuc3VidHJhY3QodGhpcy55KSwgaSA9IHIuZGl2aWRlKHQpLCBzID0gaS5zcXVhcmUoKS5zdWJ0cmFjdCh0aGlzLngpLnN1YnRyYWN0KGUueCksIG4gPSBpLm11bHRpcGx5KHRoaXMueC5zdWJ0cmFjdChzKSkuc3VidHJhY3QodGhpcy55KTtcbiAgcmV0dXJuIG5ldyB6KHRoaXMuY3VydmUsIHMsIG4pO1xufTtcbnoucHJvdG90eXBlLnR3aWNlMkQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuaXNJbmZpbml0eSgpKVxuICAgIHJldHVybiB0aGlzO1xuICBpZiAodGhpcy55LnRvQmlnSW50ZWdlcigpLnNpZ251bSgpID09IDApXG4gICAgcmV0dXJuIHRoaXMuY3VydmUuZ2V0SW5maW5pdHkoKTtcbiAgdmFyIGUgPSB0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKFIudmFsdWVPZigyKSksIHQgPSB0aGlzLmN1cnZlLmZyb21CaWdJbnRlZ2VyKFIudmFsdWVPZigzKSksIHIgPSB0aGlzLnguc3F1YXJlKCkubXVsdGlwbHkodCkuYWRkKHRoaXMuY3VydmUuYSkuZGl2aWRlKHRoaXMueS5tdWx0aXBseShlKSksIGkgPSByLnNxdWFyZSgpLnN1YnRyYWN0KHRoaXMueC5tdWx0aXBseShlKSksIHMgPSByLm11bHRpcGx5KHRoaXMueC5zdWJ0cmFjdChpKSkuc3VidHJhY3QodGhpcy55KTtcbiAgcmV0dXJuIG5ldyB6KHRoaXMuY3VydmUsIGksIHMpO1xufTtcbnoucHJvdG90eXBlLm11bHRpcGx5MkQgPSBmdW5jdGlvbihlKSB7XG4gIGlmICh0aGlzLmlzSW5maW5pdHkoKSlcbiAgICByZXR1cm4gdGhpcztcbiAgaWYgKGUuc2lnbnVtKCkgPT0gMClcbiAgICByZXR1cm4gdGhpcy5jdXJ2ZS5nZXRJbmZpbml0eSgpO1xuICB2YXIgdCA9IGUsIHIgPSB0Lm11bHRpcGx5KG5ldyBSKFwiM1wiKSksIGkgPSB0aGlzLm5lZ2F0ZSgpLCBzID0gdGhpcywgbjtcbiAgZm9yIChuID0gci5iaXRMZW5ndGgoKSAtIDI7IG4gPiAwOyAtLW4pIHtcbiAgICBzID0gcy50d2ljZSgpO1xuICAgIHZhciBoID0gci50ZXN0Qml0KG4pLCB1ID0gdC50ZXN0Qml0KG4pO1xuICAgIGggIT0gdSAmJiAocyA9IHMuYWRkMkQoaCA/IHRoaXMgOiBpKSk7XG4gIH1cbiAgcmV0dXJuIHM7XG59O1xuei5wcm90b3R5cGUuaXNPbkN1cnZlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gdGhpcy5nZXRYKCkudG9CaWdJbnRlZ2VyKCksIHQgPSB0aGlzLmdldFkoKS50b0JpZ0ludGVnZXIoKSwgciA9IHRoaXMuY3VydmUuZ2V0QSgpLnRvQmlnSW50ZWdlcigpLCBpID0gdGhpcy5jdXJ2ZS5nZXRCKCkudG9CaWdJbnRlZ2VyKCksIHMgPSB0aGlzLmN1cnZlLmdldFEoKSwgbiA9IHQubXVsdGlwbHkodCkubW9kKHMpLCBoID0gZS5tdWx0aXBseShlKS5tdWx0aXBseShlKS5hZGQoci5tdWx0aXBseShlKSkuYWRkKGkpLm1vZChzKTtcbiAgcmV0dXJuIG4uZXF1YWxzKGgpO1xufTtcbnoucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBcIihcIiArIHRoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLnRvU3RyaW5nKCkgKyBcIixcIiArIHRoaXMuZ2V0WSgpLnRvQmlnSW50ZWdlcigpLnRvU3RyaW5nKCkgKyBcIilcIjtcbn07XG56LnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IHRoaXMuY3VydmUuZ2V0USgpO1xuICBpZiAodGhpcy5pc0luZmluaXR5KCkpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUG9pbnQgaXMgYXQgaW5maW5pdHkuXCIpO1xuICB2YXIgdCA9IHRoaXMuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLCByID0gdGhpcy5nZXRZKCkudG9CaWdJbnRlZ2VyKCk7XG4gIGlmICh0LmNvbXBhcmVUbyhSLk9ORSkgPCAwIHx8IHQuY29tcGFyZVRvKGUuc3VidHJhY3QoUi5PTkUpKSA+IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwieCBjb29yZGluYXRlIG91dCBvZiBib3VuZHNcIik7XG4gIGlmIChyLmNvbXBhcmVUbyhSLk9ORSkgPCAwIHx8IHIuY29tcGFyZVRvKGUuc3VidHJhY3QoUi5PTkUpKSA+IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwieSBjb29yZGluYXRlIG91dCBvZiBib3VuZHNcIik7XG4gIGlmICghdGhpcy5pc09uQ3VydmUoKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQb2ludCBpcyBub3Qgb24gdGhlIGN1cnZlLlwiKTtcbiAgaWYgKHRoaXMubXVsdGlwbHkoZSkuaXNJbmZpbml0eSgpKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlBvaW50IGlzIG5vdCBhIHNjYWxhciBtdWx0aXBsZSBvZiBHLlwiKTtcbiAgcmV0dXJuICEwO1xufTtcbi8qISBNaWtlIFNhbXVlbCAoYykgMjAwOSB8IGNvZGUuZ29vZ2xlLmNvbS9wL2pzb24tc2Fucy1ldmFsXG4gKi9cbnZhciBQdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IFwiKD86LT9cXFxcYig/OjB8WzEtOV1bMC05XSopKD86XFxcXC5bMC05XSspPyg/OltlRV1bKy1dP1swLTldKyk/XFxcXGIpXCIsIHQgPSAnKD86W15cXFxcMC1cXFxceDA4XFxcXHgwYS1cXFxceDFmXCJcXFxcXFxcXF18XFxcXFxcXFwoPzpbXCIvXFxcXFxcXFxiZm5ydF18dVswLTlBLUZhLWZdezR9KSknLCByID0gJyg/OlwiJyArIHQgKyAnKlwiKScsIGkgPSBuZXcgUmVnRXhwKFwiKD86ZmFsc2V8dHJ1ZXxudWxsfFtcXFxce1xcXFx9XFxcXFtcXFxcXV18XCIgKyBlICsgXCJ8XCIgKyByICsgXCIpXCIsIFwiZ1wiKSwgcyA9IG5ldyBSZWdFeHAoXCJcXFxcXFxcXCg/OihbXnVdKXx1KC57NH0pKVwiLCBcImdcIiksIG4gPSB7ICdcIic6ICdcIicsIFwiL1wiOiBcIi9cIiwgXCJcXFxcXCI6IFwiXFxcXFwiLCBiOiBcIlxcYlwiLCBmOiBcIlxcZlwiLCBuOiBgXG5gLCByOiBcIlxcclwiLCB0OiBcIlx0XCIgfTtcbiAgZnVuY3Rpb24gaCh5LCB2LCBvKSB7XG4gICAgcmV0dXJuIHYgPyBuW3ZdIDogU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChvLCAxNikpO1xuICB9XG4gIHZhciB1ID0gbmV3IFN0cmluZyhcIlwiKSwgcCA9IFwiXFxcXFwiLCBjID0gT2JqZWN0Lmhhc093blByb3BlcnR5O1xuICByZXR1cm4gZnVuY3Rpb24oeSwgdikge1xuICAgIHZhciBvID0geS5tYXRjaChpKSwgbCwgZiA9IG9bMF0sIGQgPSAhMTtcbiAgICBmID09PSBcIntcIiA/IGwgPSB7fSA6IGYgPT09IFwiW1wiID8gbCA9IFtdIDogKGwgPSBbXSwgZCA9ICEwKTtcbiAgICBmb3IgKHZhciBnLCBTID0gW2xdLCBiID0gMSAtIGQsIEQgPSBvLmxlbmd0aDsgYiA8IEQ7ICsrYikge1xuICAgICAgZiA9IG9bYl07XG4gICAgICB2YXIgQTtcbiAgICAgIHN3aXRjaCAoZi5jaGFyQ29kZUF0KDApKSB7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgQSA9IFNbMF0sIEFbZyB8fCBBLmxlbmd0aF0gPSArZiwgZyA9IHZvaWQgMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzNDpcbiAgICAgICAgICBpZiAoZiA9IGYuc3Vic3RyaW5nKDEsIGYubGVuZ3RoIC0gMSksIGYuaW5kZXhPZihwKSAhPT0gLTEgJiYgKGYgPSBmLnJlcGxhY2UocywgaCkpLCBBID0gU1swXSwgIWcpXG4gICAgICAgICAgICBpZiAoQSBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgICBnID0gQS5sZW5ndGg7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgZyA9IGYgfHwgdTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgQVtnXSA9IGYsIGcgPSB2b2lkIDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTE6XG4gICAgICAgICAgQSA9IFNbMF0sIFMudW5zaGlmdChBW2cgfHwgQS5sZW5ndGhdID0gW10pLCBnID0gdm9pZCAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDkzOlxuICAgICAgICAgIFMuc2hpZnQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDI6XG4gICAgICAgICAgQSA9IFNbMF0sIEFbZyB8fCBBLmxlbmd0aF0gPSAhMSwgZyA9IHZvaWQgMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMTA6XG4gICAgICAgICAgQSA9IFNbMF0sIEFbZyB8fCBBLmxlbmd0aF0gPSBudWxsLCBnID0gdm9pZCAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDExNjpcbiAgICAgICAgICBBID0gU1swXSwgQVtnIHx8IEEubGVuZ3RoXSA9ICEwLCBnID0gdm9pZCAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEyMzpcbiAgICAgICAgICBBID0gU1swXSwgUy51bnNoaWZ0KEFbZyB8fCBBLmxlbmd0aF0gPSB7fSksIGcgPSB2b2lkIDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTI1OlxuICAgICAgICAgIFMuc2hpZnQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGQpIHtcbiAgICAgIGlmIChTLmxlbmd0aCAhPT0gMSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICBsID0gbFswXTtcbiAgICB9IGVsc2UgaWYgKFMubGVuZ3RoKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgaWYgKHYpIHtcbiAgICAgIHZhciBJID0gZnVuY3Rpb24obSwgRSkge1xuICAgICAgICB2YXIgdyA9IG1bRV07XG4gICAgICAgIGlmICh3ICYmIHR5cGVvZiB3ID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICB2YXIgeCA9IG51bGw7XG4gICAgICAgICAgZm9yICh2YXIgRiBpbiB3KVxuICAgICAgICAgICAgaWYgKGMuY2FsbCh3LCBGKSAmJiB3ICE9PSBtKSB7XG4gICAgICAgICAgICAgIHZhciBQID0gSSh3LCBGKTtcbiAgICAgICAgICAgICAgUCAhPT0gdm9pZCAwID8gd1tGXSA9IFAgOiAoeCB8fCAoeCA9IFtdKSwgeC5wdXNoKEYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoeClcbiAgICAgICAgICAgIGZvciAodmFyIFQgPSB4Lmxlbmd0aDsgLS1UID49IDA7IClcbiAgICAgICAgICAgICAgZGVsZXRlIHdbeFtUXV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHYuY2FsbChtLCBFLCB3KTtcbiAgICAgIH07XG4gICAgICBsID0gSSh7IFwiXCI6IGwgfSwgXCJcIik7XG4gICAgfVxuICAgIHJldHVybiBsO1xuICB9O1xufSgpO1xuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmFzbjEgPiBcInVcIiB8fCAhYS5hc24xKSAmJiAoYS5hc24xID0ge30pO1xuYS5hc24xLkFTTjFVdGlsID0gbmV3IGZ1bmN0aW9uKCkge1xuICB0aGlzLmludGVnZXJUb0J5dGVIZXggPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHQgPSBlLnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gdC5sZW5ndGggJSAyID09IDEgJiYgKHQgPSBcIjBcIiArIHQpLCB0O1xuICB9LCB0aGlzLmJpZ0ludFRvTWluVHdvc0NvbXBsZW1lbnRzSGV4ID0gZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiBaZShlKTtcbiAgfSwgdGhpcy5nZXRQRU1TdHJpbmdGcm9tSGV4ID0gZnVuY3Rpb24oZSwgdCkge1xuICAgIHJldHVybiBkZShlLCB0KTtcbiAgfSwgdGhpcy5uZXdPYmplY3QgPSBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5BU04xT2JqZWN0LCBzID0gci5ERVJCb29sZWFuLCBuID0gci5ERVJJbnRlZ2VyLCBoID0gci5ERVJCaXRTdHJpbmcsIHUgPSByLkRFUk9jdGV0U3RyaW5nLCBwID0gci5ERVJOdWxsLCBjID0gci5ERVJPYmplY3RJZGVudGlmaWVyLCB5ID0gci5ERVJFbnVtZXJhdGVkLCB2ID0gci5ERVJVVEY4U3RyaW5nLCBvID0gci5ERVJOdW1lcmljU3RyaW5nLCBsID0gci5ERVJQcmludGFibGVTdHJpbmcsIGYgPSByLkRFUlRlbGV0ZXhTdHJpbmcsIGQgPSByLkRFUklBNVN0cmluZywgZyA9IHIuREVSVVRDVGltZSwgUyA9IHIuREVSR2VuZXJhbGl6ZWRUaW1lLCBiID0gci5ERVJWaXNpYmxlU3RyaW5nLCBEID0gci5ERVJCTVBTdHJpbmcsIEEgPSByLkRFUlNlcXVlbmNlLCBJID0gci5ERVJTZXQsIG0gPSByLkRFUlRhZ2dlZE9iamVjdCwgRSA9IHIuQVNOMVV0aWwubmV3T2JqZWN0O1xuICAgIGlmIChlIGluc3RhbmNlb2Ygci5BU04xT2JqZWN0KVxuICAgICAgcmV0dXJuIGU7XG4gICAgdmFyIHcgPSBPYmplY3Qua2V5cyhlKTtcbiAgICBpZiAody5sZW5ndGggIT0gMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImtleSBvZiBwYXJhbSBzaGFsbCBiZSBvbmx5IG9uZS5cIik7XG4gICAgdmFyIHggPSB3WzBdO1xuICAgIGlmIChcIjphc24xOmJvb2w6aW50OmJpdHN0cjpvY3RzdHI6bnVsbDpvaWQ6ZW51bTp1dGY4c3RyOm51bXN0cjpwcm5zdHI6dGVsc3RyOmlhNXN0cjp1dGN0aW1lOmdlbnRpbWU6dmlzc3RyOmJtcHN0cjpzZXE6c2V0OnRhZzpcIi5pbmRleE9mKFwiOlwiICsgeCArIFwiOlwiKSA9PSAtMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuZGVmaW5lZCBrZXk6IFwiICsgeCk7XG4gICAgaWYgKHggPT0gXCJib29sXCIpXG4gICAgICByZXR1cm4gbmV3IHMoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJpbnRcIilcbiAgICAgIHJldHVybiBuZXcgbihlW3hdKTtcbiAgICBpZiAoeCA9PSBcImJpdHN0clwiKVxuICAgICAgcmV0dXJuIG5ldyBoKGVbeF0pO1xuICAgIGlmICh4ID09IFwib2N0c3RyXCIpXG4gICAgICByZXR1cm4gbmV3IHUoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJudWxsXCIpXG4gICAgICByZXR1cm4gbmV3IHAoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJvaWRcIilcbiAgICAgIHJldHVybiBuZXcgYyhlW3hdKTtcbiAgICBpZiAoeCA9PSBcImVudW1cIilcbiAgICAgIHJldHVybiBuZXcgeShlW3hdKTtcbiAgICBpZiAoeCA9PSBcInV0ZjhzdHJcIilcbiAgICAgIHJldHVybiBuZXcgdihlW3hdKTtcbiAgICBpZiAoeCA9PSBcIm51bXN0clwiKVxuICAgICAgcmV0dXJuIG5ldyBvKGVbeF0pO1xuICAgIGlmICh4ID09IFwicHJuc3RyXCIpXG4gICAgICByZXR1cm4gbmV3IGwoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJ0ZWxzdHJcIilcbiAgICAgIHJldHVybiBuZXcgZihlW3hdKTtcbiAgICBpZiAoeCA9PSBcImlhNXN0clwiKVxuICAgICAgcmV0dXJuIG5ldyBkKGVbeF0pO1xuICAgIGlmICh4ID09IFwidXRjdGltZVwiKVxuICAgICAgcmV0dXJuIG5ldyBnKGVbeF0pO1xuICAgIGlmICh4ID09IFwiZ2VudGltZVwiKVxuICAgICAgcmV0dXJuIG5ldyBTKGVbeF0pO1xuICAgIGlmICh4ID09IFwidmlzc3RyXCIpXG4gICAgICByZXR1cm4gbmV3IGIoZVt4XSk7XG4gICAgaWYgKHggPT0gXCJibXBzdHJcIilcbiAgICAgIHJldHVybiBuZXcgRChlW3hdKTtcbiAgICBpZiAoeCA9PSBcImFzbjFcIilcbiAgICAgIHJldHVybiBuZXcgaShlW3hdKTtcbiAgICBpZiAoeCA9PSBcInNlcVwiKSB7XG4gICAgICBmb3IgKHZhciBGID0gZVt4XSwgUCA9IFtdLCBUID0gMDsgVCA8IEYubGVuZ3RoOyBUKyspIHtcbiAgICAgICAgdmFyIEggPSBFKEZbVF0pO1xuICAgICAgICBQLnB1c2goSCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEEoeyBhcnJheTogUCB9KTtcbiAgICB9XG4gICAgaWYgKHggPT0gXCJzZXRcIikge1xuICAgICAgZm9yICh2YXIgRiA9IGVbeF0sIFAgPSBbXSwgVCA9IDA7IFQgPCBGLmxlbmd0aDsgVCsrKSB7XG4gICAgICAgIHZhciBIID0gRShGW1RdKTtcbiAgICAgICAgUC5wdXNoKEgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBJKHsgYXJyYXk6IFAgfSk7XG4gICAgfVxuICAgIGlmICh4ID09IFwidGFnXCIpIHtcbiAgICAgIHZhciBDID0gZVt4XTtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoQykgPT09IFwiW29iamVjdCBBcnJheV1cIiAmJiBDLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgIHZhciBCID0gRShDWzJdKTtcbiAgICAgICAgcmV0dXJuIG5ldyBtKHsgdGFnOiBDWzBdLCBleHBsaWNpdDogQ1sxXSwgb2JqOiBCIH0pO1xuICAgICAgfSBlbHNlXG4gICAgICAgIHJldHVybiBuZXcgbShDKTtcbiAgICB9XG4gIH0sIHRoaXMuanNvblRvQVNOMUhFWCA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgdCA9IHRoaXMubmV3T2JqZWN0KGUpO1xuICAgIHJldHVybiB0LnRvaGV4KCk7XG4gIH07XG59KCk7XG5hLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQgPSBmdW5jdGlvbihlKSB7XG4gIGZvciAodmFyIHMgPSBcIlwiLCB0ID0gcGFyc2VJbnQoZS5zdWJzdHIoMCwgMiksIDE2KSwgciA9IE1hdGguZmxvb3IodCAvIDQwKSwgaSA9IHQgJSA0MCwgcyA9IHIgKyBcIi5cIiArIGksIG4gPSBcIlwiLCBoID0gMjsgaCA8IGUubGVuZ3RoOyBoICs9IDIpIHtcbiAgICB2YXIgdSA9IHBhcnNlSW50KGUuc3Vic3RyKGgsIDIpLCAxNiksIHAgPSAoXCIwMDAwMDAwMFwiICsgdS50b1N0cmluZygyKSkuc2xpY2UoLTgpO1xuICAgIGlmIChuID0gbiArIHAuc3Vic3RyKDEsIDcpLCBwLnN1YnN0cigwLCAxKSA9PSBcIjBcIikge1xuICAgICAgdmFyIGMgPSBuZXcgUihuLCAyKTtcbiAgICAgIHMgPSBzICsgXCIuXCIgKyBjLnRvU3RyaW5nKDEwKSwgbiA9IFwiXCI7XG4gICAgfVxuICB9XG4gIHJldHVybiBzO1xufTtcbmEuYXNuMS5BU04xVXRpbC5vaWRJbnRUb0hleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBmdW5jdGlvbih1KSB7XG4gICAgdmFyIHAgPSB1LnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gcC5sZW5ndGggPT0gMSAmJiAocCA9IFwiMFwiICsgcCksIHA7XG4gIH0sIHIgPSBmdW5jdGlvbih1KSB7XG4gICAgdmFyIHAgPSBcIlwiLCBjID0gbmV3IFIodSwgMTApLCB5ID0gYy50b1N0cmluZygyKSwgdiA9IDcgLSB5Lmxlbmd0aCAlIDc7XG4gICAgdiA9PSA3ICYmICh2ID0gMCk7XG4gICAgZm9yICh2YXIgbyA9IFwiXCIsIGwgPSAwOyBsIDwgdjsgbCsrKVxuICAgICAgbyArPSBcIjBcIjtcbiAgICB5ID0gbyArIHk7XG4gICAgZm9yICh2YXIgbCA9IDA7IGwgPCB5Lmxlbmd0aCAtIDE7IGwgKz0gNykge1xuICAgICAgdmFyIGYgPSB5LnN1YnN0cihsLCA3KTtcbiAgICAgIGwgIT0geS5sZW5ndGggLSA3ICYmIChmID0gXCIxXCIgKyBmKSwgcCArPSB0KHBhcnNlSW50KGYsIDIpKTtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH07XG4gIGlmICghZS5tYXRjaCgvXlswLTkuXSskLykpXG4gICAgdGhyb3cgXCJtYWxmb3JtZWQgb2lkIHN0cmluZzogXCIgKyBlO1xuICB2YXIgaSA9IFwiXCIsIHMgPSBlLnNwbGl0KFwiLlwiKSwgbiA9IHBhcnNlSW50KHNbMF0pICogNDAgKyBwYXJzZUludChzWzFdKTtcbiAgaSArPSB0KG4pLCBzLnNwbGljZSgwLCAyKTtcbiAgZm9yICh2YXIgaCA9IDA7IGggPCBzLmxlbmd0aDsgaCsrKVxuICAgIGkgKz0gcihzW2hdKTtcbiAgcmV0dXJuIGk7XG59O1xuYS5hc24xLkFTTjFPYmplY3QgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gXCJcIjtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldExlbmd0aEhleEZyb21WYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5oViA+IFwidVwiIHx8IHRoaXMuaFYgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInRoaXMuaFYgaXMgbnVsbCBvciB1bmRlZmluZWRcIik7XG4gICAgaWYgKHRoaXMuaFYubGVuZ3RoICUgMiA9PSAxKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidmFsdWUgaGV4IG11c3QgYmUgZXZlbiBsZW5ndGg6IG49XCIgKyB0Lmxlbmd0aCArIFwiLHY9XCIgKyB0aGlzLmhWKTtcbiAgICB2YXIgciA9IHRoaXMuaFYubGVuZ3RoIC8gMiwgaSA9IHIudG9TdHJpbmcoMTYpO1xuICAgIGlmIChpLmxlbmd0aCAlIDIgPT0gMSAmJiAoaSA9IFwiMFwiICsgaSksIHIgPCAxMjgpXG4gICAgICByZXR1cm4gaTtcbiAgICB2YXIgcyA9IGkubGVuZ3RoIC8gMjtcbiAgICBpZiAocyA+IDE1KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVNOLjEgbGVuZ3RoIHRvbyBsb25nIHRvIHJlcHJlc2VudCBieSA4eDogbiA9IFwiICsgci50b1N0cmluZygxNikpO1xuICAgIHZhciBuID0gMTI4ICsgcztcbiAgICByZXR1cm4gbi50b1N0cmluZygxNikgKyBpO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLmhUTFYgPT0gbnVsbCB8fCB0aGlzLmlzTW9kaWZpZWQpICYmICh0aGlzLmhWID0gdGhpcy5nZXRGcmVzaFZhbHVlSGV4KCksIHRoaXMuaEwgPSB0aGlzLmdldExlbmd0aEhleEZyb21WYWx1ZSgpLCB0aGlzLmhUTFYgPSB0aGlzLmhUICsgdGhpcy5oTCArIHRoaXMuaFYsIHRoaXMuaXNNb2RpZmllZCA9ICExKSwgdGhpcy5oVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0aGlzLmdldFZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKSwgdGhpcy5oVjtcbiAgfSwgdGhpcy5nZXRGcmVzaFZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHI7XG4gIH0sIGUgIT0gbnVsbCAmJiBlLnRsdiAhPSBudWxsICYmICh0aGlzLmhUTFYgPSBlLnRsdiwgdGhpcy5pc01vZGlmaWVkID0gITEpO1xufTtcbmEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5nZXRTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zO1xuICB9LCB0aGlzLnNldFN0cmluZyA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5zID0gdCwgdGhpcy5oViA9IGh0KHRoaXMucykudG9Mb3dlckNhc2UoKTtcbiAgfSwgdGhpcy5zZXRTdHJpbmdIZXggPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMucyA9IG51bGwsIHRoaXMuaFYgPSB0O1xuICB9LCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5oVjtcbiAgfSwgdHlwZW9mIGUgPCBcInVcIiAmJiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIiA/IHRoaXMuc2V0U3RyaW5nKGUpIDogdHlwZW9mIGUuc3RyIDwgXCJ1XCIgPyB0aGlzLnNldFN0cmluZyhlLnN0cikgOiB0eXBlb2YgZS5oZXggPCBcInVcIiAmJiB0aGlzLnNldFN0cmluZ0hleChlLmhleCkpO1xufTtcbk4oYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuREVSQWJzdHJhY3RUaW1lID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSQWJzdHJhY3RUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5sb2NhbERhdGVUb1VUQyA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgciA9IHQuZ2V0VGltZSgpICsgdC5nZXRUaW1lem9uZU9mZnNldCgpICogNmU0LCBpID0gbmV3IERhdGUocik7XG4gICAgcmV0dXJuIGk7XG4gIH0sIHRoaXMuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKHQsIHIsIGkpIHtcbiAgICB2YXIgcyA9IHRoaXMuemVyb1BhZGRpbmcsIG4gPSB0aGlzLmxvY2FsRGF0ZVRvVVRDKHQpLCBoID0gU3RyaW5nKG4uZ2V0RnVsbFllYXIoKSk7XG4gICAgciA9PSBcInV0Y1wiICYmIChoID0gaC5zdWJzdHIoMiwgMikpO1xuICAgIHZhciB1ID0gcyhTdHJpbmcobi5nZXRNb250aCgpICsgMSksIDIpLCBwID0gcyhTdHJpbmcobi5nZXREYXRlKCkpLCAyKSwgYyA9IHMoU3RyaW5nKG4uZ2V0SG91cnMoKSksIDIpLCB5ID0gcyhTdHJpbmcobi5nZXRNaW51dGVzKCkpLCAyKSwgdiA9IHMoU3RyaW5nKG4uZ2V0U2Vjb25kcygpKSwgMiksIG8gPSBoICsgdSArIHAgKyBjICsgeSArIHY7XG4gICAgaWYgKGkgPT09ICEwKSB7XG4gICAgICB2YXIgbCA9IG4uZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgICBpZiAobCAhPSAwKSB7XG4gICAgICAgIHZhciBmID0gcyhTdHJpbmcobCksIDMpO1xuICAgICAgICBmID0gZi5yZXBsYWNlKC9bMF0rJC8sIFwiXCIpLCBvID0gbyArIFwiLlwiICsgZjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG8gKyBcIlpcIjtcbiAgfSwgdGhpcy56ZXJvUGFkZGluZyA9IGZ1bmN0aW9uKHQsIHIpIHtcbiAgICByZXR1cm4gdC5sZW5ndGggPj0gciA/IHQgOiBuZXcgQXJyYXkociAtIHQubGVuZ3RoICsgMSkuam9pbihcIjBcIikgKyB0O1xuICB9LCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5oViA9IG51bGwsIHRoaXMuaFRMViA9IG51bGwsIHRoaXMucGFyYW1zID0gdDtcbiAgfSwgdGhpcy5nZXRTdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgfSwgdGhpcy5zZXRTdHJpbmcgPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMucGFyYW1zID09IG51bGwgJiYgKHRoaXMucGFyYW1zID0ge30pLCB0aGlzLnBhcmFtcy5zdHIgPSB0O1xuICB9LCB0aGlzLnNldEJ5RGF0ZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5wYXJhbXMgPT0gbnVsbCAmJiAodGhpcy5wYXJhbXMgPSB7fSksIHRoaXMucGFyYW1zLmRhdGUgPSB0O1xuICB9LCB0aGlzLnNldEJ5RGF0ZVZhbHVlID0gZnVuY3Rpb24odCwgciwgaSwgcywgbiwgaCkge1xuICAgIHZhciB1ID0gbmV3IERhdGUoRGF0ZS5VVEModCwgciAtIDEsIGksIHMsIG4sIGgsIDApKTtcbiAgICB0aGlzLnNldEJ5RGF0ZSh1KTtcbiAgfSwgdGhpcy5nZXRGcmVzaFZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaFY7XG4gIH07XG59O1xuTihhLmFzbjEuREVSQWJzdHJhY3RUaW1lLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuREVSQWJzdHJhY3RTdHJ1Y3R1cmVkID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnNldEJ5QVNOMU9iamVjdEFycmF5ID0gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLmFzbjFBcnJheSA9IHQ7XG4gIH0sIHRoaXMuYXBwZW5kQVNOMU9iamVjdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5hc24xQXJyYXkucHVzaCh0KTtcbiAgfSwgdGhpcy5hc24xQXJyYXkgPSBuZXcgQXJyYXkoKSwgdHlwZW9mIGUgPCBcInVcIiAmJiB0eXBlb2YgZS5hcnJheSA8IFwidVwiICYmICh0aGlzLmFzbjFBcnJheSA9IGUuYXJyYXkpO1xufTtcbk4oYS5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLkRFUkJvb2xlYW4gPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJCb29sZWFuLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5oVCA9IFwiMDFcIiwgZSA9PSAhMSA/IHRoaXMuaFRMViA9IFwiMDEwMTAwXCIgOiB0aGlzLmhUTFYgPSBcIjAxMDFmZlwiO1xufTtcbk4oYS5hc24xLkRFUkJvb2xlYW4sIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5ERVJJbnRlZ2VyID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSSW50ZWdlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuaFQgPSBcIjAyXCIsIHRoaXMucGFyYW1zID0gbnVsbDtcbiAgdmFyIHQgPSBaZTtcbiAgdGhpcy5zZXRCeUJpZ0ludGVnZXIgPSBmdW5jdGlvbihyKSB7XG4gICAgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMucGFyYW1zID0geyBiaWdpbnQ6IHIgfTtcbiAgfSwgdGhpcy5zZXRCeUludGVnZXIgPSBmdW5jdGlvbihyKSB7XG4gICAgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMucGFyYW1zID0gcjtcbiAgfSwgdGhpcy5zZXRWYWx1ZUhleCA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5wYXJhbXMgPSB7IGhleDogciB9O1xuICB9LCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgciA9IHRoaXMucGFyYW1zLCBpID0gbnVsbDtcbiAgICBpZiAociA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidmFsdWUgbm90IHNldFwiKTtcbiAgICBpZiAodHlwZW9mIHIgPT0gXCJvYmplY3RcIiAmJiByLmhleCAhPSBudWxsKVxuICAgICAgcmV0dXJuIHRoaXMuaFYgPSByLmhleCwgdGhpcy5oVjtcbiAgICBpZiAodHlwZW9mIHIgPT0gXCJudW1iZXJcIilcbiAgICAgIGkgPSBuZXcgUihTdHJpbmcociksIDEwKTtcbiAgICBlbHNlIGlmIChyLmludCAhPSBudWxsKVxuICAgICAgaSA9IG5ldyBSKFN0cmluZyhyLmludCksIDEwKTtcbiAgICBlbHNlIGlmIChyLmJpZ2ludCAhPSBudWxsKVxuICAgICAgaSA9IHIuYmlnaW50O1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIndyb25nIHBhcmFtZXRlclwiKTtcbiAgICByZXR1cm4gdGhpcy5oViA9IHQoaSksIHRoaXMuaFY7XG4gIH0sIGUgIT0gbnVsbCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS5ERVJJbnRlZ2VyLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuREVSQml0U3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBpZiAoZSAhPT0gdm9pZCAwICYmIHR5cGVvZiBlLm9iaiA8IFwidVwiKSB7XG4gICAgdmFyIHQgPSBhLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KGUub2JqKTtcbiAgICBlLmhleCA9IFwiMDBcIiArIHQudG9oZXgoKTtcbiAgfVxuICBhLmFzbjEuREVSQml0U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5oVCA9IFwiMDNcIiwgdGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHMgPSBmdW5jdGlvbihyKSB7XG4gICAgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMuaFYgPSByO1xuICB9LCB0aGlzLnNldFVudXNlZEJpdHNBbmRIZXhWYWx1ZSA9IGZ1bmN0aW9uKHIsIGkpIHtcbiAgICBpZiAociA8IDAgfHwgNyA8IHIpXG4gICAgICB0aHJvdyBcInVudXNlZCBiaXRzIHNoYWxsIGJlIGZyb20gMCB0byA3OiB1ID0gXCIgKyByO1xuICAgIHZhciBzID0gXCIwXCIgKyByO1xuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLmhWID0gcyArIGk7XG4gIH0sIHRoaXMuc2V0QnlCaW5hcnlTdHJpbmcgPSBmdW5jdGlvbihyKSB7XG4gICAgciA9IHIucmVwbGFjZSgvMCskLywgXCJcIik7XG4gICAgdmFyIGkgPSA4IC0gci5sZW5ndGggJSA4O1xuICAgIGkgPT0gOCAmJiAoaSA9IDApLCByICs9IFwiMDAwMDAwMFwiLnN1YnN0cigwLCBpKTtcbiAgICBmb3IgKHZhciBzID0gXCJcIiwgbiA9IDA7IG4gPCByLmxlbmd0aCAtIDE7IG4gKz0gOCkge1xuICAgICAgdmFyIGggPSByLnN1YnN0cihuLCA4KSwgdSA9IHBhcnNlSW50KGgsIDIpLnRvU3RyaW5nKDE2KTtcbiAgICAgIHUubGVuZ3RoID09IDEgJiYgKHUgPSBcIjBcIiArIHUpLCBzICs9IHU7XG4gICAgfVxuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLmhWID0gXCIwXCIgKyBpICsgcztcbiAgfSwgdGhpcy5zZXRCeUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uKHIpIHtcbiAgICBmb3IgKHZhciBpID0gXCJcIiwgcyA9IDA7IHMgPCByLmxlbmd0aDsgcysrKVxuICAgICAgcltzXSA9PSAhMCA/IGkgKz0gXCIxXCIgOiBpICs9IFwiMFwiO1xuICAgIHRoaXMuc2V0QnlCaW5hcnlTdHJpbmcoaSk7XG4gIH0sIHRoaXMubmV3RmFsc2VBcnJheSA9IGZ1bmN0aW9uKHIpIHtcbiAgICBmb3IgKHZhciBpID0gbmV3IEFycmF5KHIpLCBzID0gMDsgcyA8IHI7IHMrKylcbiAgICAgIGlbc10gPSAhMTtcbiAgICByZXR1cm4gaTtcbiAgfSwgdGhpcy5nZXRGcmVzaFZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaFY7XG4gIH0sIHR5cGVvZiBlIDwgXCJ1XCIgJiYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIgJiYgZS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eWzAtOWEtZl0rJC8pID8gdGhpcy5zZXRIZXhWYWx1ZUluY2x1ZGluZ1VudXNlZEJpdHMoZSkgOiB0eXBlb2YgZS5oZXggPCBcInVcIiA/IHRoaXMuc2V0SGV4VmFsdWVJbmNsdWRpbmdVbnVzZWRCaXRzKGUuaGV4KSA6IHR5cGVvZiBlLmJpbiA8IFwidVwiID8gdGhpcy5zZXRCeUJpbmFyeVN0cmluZyhlLmJpbikgOiB0eXBlb2YgZS5hcnJheSA8IFwidVwiICYmIHRoaXMuc2V0QnlCb29sZWFuQXJyYXkoZS5hcnJheSkpO1xufTtcbk4oYS5hc24xLkRFUkJpdFN0cmluZywgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLkRFUk9jdGV0U3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBpZiAoZSAhPT0gdm9pZCAwICYmIHR5cGVvZiBlLm9iaiA8IFwidVwiKSB7XG4gICAgdmFyIHQgPSBhLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KGUub2JqKTtcbiAgICBlLmhleCA9IHQudG9oZXgoKTtcbiAgfVxuICBhLmFzbjEuREVST2N0ZXRTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIwNFwiO1xufTtcbk4oYS5hc24xLkRFUk9jdGV0U3RyaW5nLCBhLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO1xuYS5hc24xLkRFUk51bGwgPSBmdW5jdGlvbigpIHtcbiAgYS5hc24xLkRFUk51bGwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmhUID0gXCIwNVwiLCB0aGlzLmhUTFYgPSBcIjA1MDBcIjtcbn07XG5OKGEuYXNuMS5ERVJOdWxsLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuREVST2JqZWN0SWRlbnRpZmllciA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUk9iamVjdElkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmhUID0gXCIwNlwiLCB0aGlzLnNldFZhbHVlSGV4ID0gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLnMgPSBudWxsLCB0aGlzLmhWID0gdDtcbiAgfSwgdGhpcy5zZXRWYWx1ZU9pZFN0cmluZyA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgciA9IG1uKHQpO1xuICAgIGlmIChyID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgb2lkIHN0cmluZzogXCIgKyB0KTtcbiAgICB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLmlzTW9kaWZpZWQgPSAhMCwgdGhpcy5zID0gbnVsbCwgdGhpcy5oViA9IHI7XG4gIH0sIHRoaXMuc2V0VmFsdWVOYW1lID0gZnVuY3Rpb24odCkge1xuICAgIHZhciByID0gYS5hc24xLng1MDkuT0lELm5hbWUyb2lkKHQpO1xuICAgIGlmIChyICE9PSBcIlwiKVxuICAgICAgdGhpcy5zZXRWYWx1ZU9pZFN0cmluZyhyKTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJERVJPYmplY3RJZGVudGlmaWVyIG9pZE5hbWUgdW5kZWZpbmVkOiBcIiArIHQpO1xuICB9LCB0aGlzLnNldFZhbHVlTmFtZU9yT2lkID0gZnVuY3Rpb24odCkge1xuICAgIHQubWF0Y2goL15bMC0yXS5bMC05Ll0rJC8pID8gdGhpcy5zZXRWYWx1ZU9pZFN0cmluZyh0KSA6IHRoaXMuc2V0VmFsdWVOYW1lKHQpO1xuICB9LCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5oVjtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24odCkge1xuICAgIHR5cGVvZiB0ID09IFwic3RyaW5nXCIgPyB0aGlzLnNldFZhbHVlTmFtZU9yT2lkKHQpIDogdC5vaWQgIT09IHZvaWQgMCA/IHRoaXMuc2V0VmFsdWVOYW1lT3JPaWQodC5vaWQpIDogdC5uYW1lICE9PSB2b2lkIDAgPyB0aGlzLnNldFZhbHVlTmFtZU9yT2lkKHQubmFtZSkgOiB0LmhleCAhPT0gdm9pZCAwICYmIHRoaXMuc2V0VmFsdWVIZXgodC5oZXgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLkRFUk9iamVjdElkZW50aWZpZXIsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5ERVJFbnVtZXJhdGVkID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSRW51bWVyYXRlZC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuaFQgPSBcIjBhXCIsIHRoaXMuc2V0QnlCaWdJbnRlZ2VyID0gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuaFRMViA9IG51bGwsIHRoaXMuaXNNb2RpZmllZCA9ICEwLCB0aGlzLmhWID0gWmUodCk7XG4gIH0sIHRoaXMuc2V0QnlJbnRlZ2VyID0gZnVuY3Rpb24odCkge1xuICAgIHZhciByID0gbmV3IFIoU3RyaW5nKHQpLCAxMCk7XG4gICAgdGhpcy5zZXRCeUJpZ0ludGVnZXIocik7XG4gIH0sIHRoaXMuc2V0VmFsdWVIZXggPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5oViA9IHQ7XG4gIH0sIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmhWO1xuICB9LCB0eXBlb2YgZSA8IFwidVwiICYmICh0eXBlb2YgZS5pbnQgPCBcInVcIiA/IHRoaXMuc2V0QnlJbnRlZ2VyKGUuaW50KSA6IHR5cGVvZiBlID09IFwibnVtYmVyXCIgPyB0aGlzLnNldEJ5SW50ZWdlcihlKSA6IHR5cGVvZiBlLmhleCA8IFwidVwiICYmIHRoaXMuc2V0VmFsdWVIZXgoZS5oZXgpKTtcbn07XG5OKGEuYXNuMS5ERVJFbnVtZXJhdGVkLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuREVSVVRGOFN0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUlVURjhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIwY1wiO1xufTtcbk4oYS5hc24xLkRFUlVURjhTdHJpbmcsIGEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7XG5hLmFzbjEuREVSTnVtZXJpY1N0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUk51bWVyaWNTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIxMlwiO1xufTtcbk4oYS5hc24xLkRFUk51bWVyaWNTdHJpbmcsIGEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7XG5hLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSUHJpbnRhYmxlU3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5oVCA9IFwiMTNcIjtcbn07XG5OKGEuYXNuMS5ERVJQcmludGFibGVTdHJpbmcsIGEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7XG5hLmFzbjEuREVSVGVsZXRleFN0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUlRlbGV0ZXhTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIxNFwiO1xufTtcbk4oYS5hc24xLkRFUlRlbGV0ZXhTdHJpbmcsIGEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7XG5hLmFzbjEuREVSSUE1U3RyaW5nID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSSUE1U3RyaW5nLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5oVCA9IFwiMTZcIjtcbn07XG5OKGEuYXNuMS5ERVJJQTVTdHJpbmcsIGEuYXNuMS5ERVJBYnN0cmFjdFN0cmluZyk7XG5hLmFzbjEuREVSVmlzaWJsZVN0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLkRFUklBNVN0cmluZy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjFhXCI7XG59O1xuTihhLmFzbjEuREVSVmlzaWJsZVN0cmluZywgYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtcbmEuYXNuMS5ERVJCTVBTdHJpbmcgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJCTVBTdHJpbmcuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLmhUID0gXCIxZVwiO1xufTtcbk4oYS5hc24xLkRFUkJNUFN0cmluZywgYS5hc24xLkRFUkFic3RyYWN0U3RyaW5nKTtcbmEuYXNuMS5ERVJVVENUaW1lID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSVVRDVGltZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjE3XCIsIHRoaXMucGFyYW1zID0gdm9pZCAwLCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IHRoaXMucGFyYW1zO1xuICAgIGlmICh0aGlzLnBhcmFtcyA9PSBudWxsICYmICh0ID0geyBkYXRlOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KSwgdHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICAgIGlmICh0Lm1hdGNoKC9eWzAtOV17MTJ9WiQvKSB8fCB0Lm1hdGNoKC9eWzAtOV17MTJ9XFwuWzAtOV0rWiQvKSlcbiAgICAgICAgdGhpcy5oViA9IEVlKHQpO1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgc3RyaW5nIGZvciBVVENUaW1lOiBcIiArIHQpO1xuICAgIGVsc2UgaWYgKHQuc3RyICE9IG51bGwpXG4gICAgICB0aGlzLmhWID0gRWUodC5zdHIpO1xuICAgIGVsc2UgaWYgKHQuZGF0ZSA9PSBudWxsICYmIHQubWlsbGlzID09ICEwKSB7XG4gICAgICB2YXIgciA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgICAgdGhpcy5oViA9IEVlKHRoaXMuZm9ybWF0RGF0ZShyLCBcInV0Y1wiLCAhMCkpO1xuICAgIH0gZWxzZSBpZiAodC5kYXRlICE9IG51bGwgJiYgdC5kYXRlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgdmFyIGkgPSB0Lm1pbGxpcyA9PT0gITA7XG4gICAgICB0aGlzLmhWID0gRWUodGhpcy5mb3JtYXREYXRlKHQuZGF0ZSwgXCJ1dGNcIiwgaSkpO1xuICAgIH0gZWxzZVxuICAgICAgdCBpbnN0YW5jZW9mIERhdGUgJiYgKHRoaXMuaFYgPSBFZSh0aGlzLmZvcm1hdERhdGUodCwgXCJ1dGNcIikpKTtcbiAgICBpZiAodGhpcy5oViA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicGFyYW1ldGVyIG5vdCBzcGVjaWZpZWQgcHJvcGVybHkgZm9yIFVUQ1RpbWVcIik7XG4gICAgcmV0dXJuIHRoaXMuaFY7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuREVSVVRDVGltZSwgYS5hc24xLkRFUkFic3RyYWN0VGltZSk7XG5hLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSR2VuZXJhbGl6ZWRUaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5oVCA9IFwiMThcIiwgdGhpcy5wYXJhbXMgPSBlLCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IHRoaXMucGFyYW1zO1xuICAgIGlmICh0aGlzLnBhcmFtcyA9PSBudWxsICYmICh0ID0geyBkYXRlOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSB9KSwgdHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICAgIGlmICh0Lm1hdGNoKC9eWzAtOV17MTR9WiQvKSB8fCB0Lm1hdGNoKC9eWzAtOV17MTR9XFwuWzAtOV0rWiQvKSlcbiAgICAgICAgdGhpcy5oViA9IEVlKHQpO1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgc3RyaW5nIGZvciBHZW5lcmFsaXplZFRpbWU6IFwiICsgdCk7XG4gICAgZWxzZSBpZiAodC5zdHIgIT0gbnVsbClcbiAgICAgIHRoaXMuaFYgPSBFZSh0LnN0cik7XG4gICAgZWxzZSBpZiAodC5kYXRlID09IG51bGwgJiYgdC5taWxsaXMgPT0gITApIHtcbiAgICAgIHZhciByID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgICB0aGlzLmhWID0gRWUodGhpcy5mb3JtYXREYXRlKHIsIFwiZ2VuXCIsICEwKSk7XG4gICAgfSBlbHNlIGlmICh0LmRhdGUgIT0gbnVsbCAmJiB0LmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICB2YXIgaSA9IHQubWlsbGlzID09PSAhMDtcbiAgICAgIHRoaXMuaFYgPSBFZSh0aGlzLmZvcm1hdERhdGUodC5kYXRlLCBcImdlblwiLCBpKSk7XG4gICAgfSBlbHNlXG4gICAgICB0IGluc3RhbmNlb2YgRGF0ZSAmJiAodGhpcy5oViA9IEVlKHRoaXMuZm9ybWF0RGF0ZSh0LCBcImdlblwiKSkpO1xuICAgIGlmICh0aGlzLmhWID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwYXJhbWV0ZXIgbm90IHNwZWNpZmllZCBwcm9wZXJseSBmb3IgR2VuZXJhbGl6ZWRUaW1lXCIpO1xuICAgIHJldHVybiB0aGlzLmhWO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLkRFUkdlbmVyYWxpemVkVGltZSwgYS5hc24xLkRFUkFic3RyYWN0VGltZSk7XG5hLmFzbjEuREVSU2VxdWVuY2UgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5ERVJTZXF1ZW5jZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjMwXCIsIHRoaXMuZ2V0RnJlc2hWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHQgPSBcIlwiLCByID0gMDsgciA8IHRoaXMuYXNuMUFycmF5Lmxlbmd0aDsgcisrKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuYXNuMUFycmF5W3JdO1xuICAgICAgdCArPSBpLnRvaGV4KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmhWID0gdCwgdGhpcy5oVjtcbiAgfTtcbn07XG5OKGEuYXNuMS5ERVJTZXF1ZW5jZSwgYS5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCk7XG5hLmFzbjEuREVSU2V0ID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSU2V0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5oVCA9IFwiMzFcIiwgdGhpcy5zb3J0RmxhZyA9ICEwLCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciB0ID0gbmV3IEFycmF5KCksIHIgPSAwOyByIDwgdGhpcy5hc24xQXJyYXkubGVuZ3RoOyByKyspIHtcbiAgICAgIHZhciBpID0gdGhpcy5hc24xQXJyYXlbcl07XG4gICAgICB0LnB1c2goaS50b2hleCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc29ydEZsYWcgPT0gITAgJiYgdC5zb3J0KCksIHRoaXMuaFYgPSB0LmpvaW4oXCJcIiksIHRoaXMuaFY7XG4gIH0sIHR5cGVvZiBlIDwgXCJ1XCIgJiYgdHlwZW9mIGUuc29ydGZsYWcgPCBcInVcIiAmJiBlLnNvcnRmbGFnID09ICExICYmICh0aGlzLnNvcnRGbGFnID0gITEpO1xufTtcbk4oYS5hc24xLkRFUlNldCwgYS5hc24xLkRFUkFic3RyYWN0U3RydWN0dXJlZCk7XG5hLmFzbjEuREVSVGFnZ2VkT2JqZWN0ID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuREVSVGFnZ2VkT2JqZWN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLmFzbjEsIHIgPSBWLCBpID0gci5nZXRWO1xuICByLmlzQVNOMUhFWDtcbiAgdmFyIHMgPSB0LkFTTjFVdGlsLm5ld09iamVjdDtcbiAgdGhpcy5oVCA9IFwiYTBcIiwgdGhpcy5oViA9IFwiXCIsIHRoaXMuaXNFeHBsaWNpdCA9ICEwLCB0aGlzLmFzbjFPYmplY3QgPSBudWxsLCB0aGlzLnBhcmFtcyA9IHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCB9LCB0aGlzLnNldEFTTjFPYmplY3QgPSBmdW5jdGlvbihuLCBoLCB1KSB7XG4gICAgdGhpcy5wYXJhbXMgPSB7IHRhZzogaCwgZXhwbGljaXQ6IG4sIG9iajogdSB9O1xuICB9LCB0aGlzLmdldEZyZXNoVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXMucGFyYW1zO1xuICAgIGlmIChuLmV4cGxpY2l0ID09IG51bGwgJiYgKG4uZXhwbGljaXQgPSAhMCksIG4udGFnZSAhPSBudWxsICYmIChuLnRhZyA9IG4udGFnZSwgbi5leHBsaWNpdCA9ICEwKSwgbi50YWdpICE9IG51bGwgJiYgKG4udGFnID0gbi50YWdpLCBuLmV4cGxpY2l0ID0gITEpLCBuLnN0ciAhPSBudWxsKVxuICAgICAgdGhpcy5oViA9IGh0KG4uc3RyKTtcbiAgICBlbHNlIGlmIChuLmhleCAhPSBudWxsKVxuICAgICAgdGhpcy5oViA9IG4uaGV4O1xuICAgIGVsc2UgaWYgKG4ub2JqICE9IG51bGwpIHtcbiAgICAgIHZhciBoO1xuICAgICAgbi5vYmogaW5zdGFuY2VvZiB0LkFTTjFPYmplY3QgPyBoID0gbi5vYmoudG9oZXgoKSA6IHR5cGVvZiBuLm9iaiA9PSBcIm9iamVjdFwiICYmIChoID0gcyhuLm9iaikudG9oZXgoKSksIG4uZXhwbGljaXQgPyB0aGlzLmhWID0gaCA6IHRoaXMuaFYgPSBpKGgsIDApO1xuICAgIH0gZWxzZVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwic3RyLCBoZXggbm9yIG9iaiBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIHJldHVybiBuLnRhZyA9PSBudWxsICYmIChuLnRhZyA9IFwiYTBcIiksIHRoaXMuaFQgPSBuLnRhZywgdGhpcy5oVExWID0gbnVsbCwgdGhpcy5pc01vZGlmaWVkID0gITAsIHRoaXMuaFY7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKG4pIHtcbiAgICB0aGlzLnBhcmFtcyA9IG47XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuREVSVGFnZ2VkT2JqZWN0LCBhLmFzbjEuQVNOMU9iamVjdCk7XG52YXIgViA9IG5ldyBmdW5jdGlvbigpIHtcbn0oKTtcblYuZ2V0TGJsZW4gPSBmdW5jdGlvbihlLCB0KSB7XG4gIGlmIChlLnN1YnN0cih0ICsgMiwgMSkgIT0gXCI4XCIpXG4gICAgcmV0dXJuIDE7XG4gIHZhciByID0gcGFyc2VJbnQoZS5zdWJzdHIodCArIDMsIDEpKTtcbiAgcmV0dXJuIHIgPT0gMCA/IC0xIDogMCA8IHIgJiYgciA8IDEwID8gciArIDEgOiAtMjtcbn07XG5WLmdldEwgPSBmdW5jdGlvbihlLCB0KSB7XG4gIHZhciByID0gVi5nZXRMYmxlbihlLCB0KTtcbiAgcmV0dXJuIHIgPCAxID8gXCJcIiA6IGUuc3Vic3RyKHQgKyAyLCByICogMik7XG59O1xuVi5nZXRWYmxlbiA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIsIGk7XG4gIHJldHVybiByID0gVi5nZXRMKGUsIHQpLCByID09IFwiXCIgPyAtMSA6IChyLnN1YnN0cigwLCAxKSA9PT0gXCI4XCIgPyBpID0gbmV3IFIoci5zdWJzdHIoMiksIDE2KSA6IGkgPSBuZXcgUihyLCAxNiksIGkuaW50VmFsdWUoKSk7XG59O1xuVi5nZXRWaWR4ID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IFYuZ2V0TGJsZW4oZSwgdCk7XG4gIHJldHVybiByIDwgMCA/IHIgOiB0ICsgKHIgKyAxKSAqIDI7XG59O1xuVi5nZXRWID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IFYuZ2V0VmlkeChlLCB0KSwgaSA9IFYuZ2V0VmJsZW4oZSwgdCk7XG4gIHJldHVybiBlLnN1YnN0cihyLCBpICogMik7XG59O1xuVi5nZXRUTFYgPSBmdW5jdGlvbihlLCB0KSB7XG4gIHJldHVybiBlLnN1YnN0cih0LCAyKSArIFYuZ2V0TChlLCB0KSArIFYuZ2V0VihlLCB0KTtcbn07XG5WLmdldFRMVmJsZW4gPSBmdW5jdGlvbihlLCB0KSB7XG4gIHJldHVybiAyICsgVi5nZXRMYmxlbihlLCB0KSAqIDIgKyBWLmdldFZibGVuKGUsIHQpICogMjtcbn07XG5WLmdldE5leHRTaWJsaW5nSWR4ID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IFYuZ2V0VmlkeChlLCB0KSwgaSA9IFYuZ2V0VmJsZW4oZSwgdCk7XG4gIHJldHVybiByICsgaSAqIDI7XG59O1xuVi5nZXRDaGlsZElkeCA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBWLCBpID0gW10sIHMsIG4sIGg7XG4gIHMgPSByLmdldFZpZHgoZSwgdCksIG4gPSByLmdldFZibGVuKGUsIHQpICogMiwgZS5zdWJzdHIodCwgMikgPT0gXCIwM1wiICYmIChzICs9IDIsIG4gLT0gMiksIGggPSAwO1xuICBmb3IgKHZhciB1ID0gczsgaCA8PSBuOyApIHtcbiAgICB2YXIgcCA9IHIuZ2V0VExWYmxlbihlLCB1KTtcbiAgICBpZiAoaCArPSBwLCBoIDw9IG4gJiYgaS5wdXNoKHUpLCB1ICs9IHAsIGggPj0gbilcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiBpO1xufTtcblYuZ2V0TnRoQ2hpbGRJZHggPSBmdW5jdGlvbihlLCB0LCByKSB7XG4gIHZhciBpID0gVi5nZXRDaGlsZElkeChlLCB0KTtcbiAgcmV0dXJuIGlbcl07XG59O1xuVi5nZXRJZHhieUxpc3QgPSBmdW5jdGlvbihlLCB0LCByLCBpKSB7XG4gIHZhciBzID0gViwgbiwgaDtcbiAgcmV0dXJuIHIubGVuZ3RoID09IDAgPyBpICE9PSB2b2lkIDAgJiYgZS5zdWJzdHIodCwgMikgIT09IGkgPyAtMSA6IHQgOiAobiA9IHIuc2hpZnQoKSwgaCA9IHMuZ2V0Q2hpbGRJZHgoZSwgdCksIG4gPj0gaC5sZW5ndGggPyAtMSA6IHMuZ2V0SWR4YnlMaXN0KGUsIGhbbl0sIHIsIGkpKTtcbn07XG5WLmdldElkeGJ5TGlzdEV4ID0gZnVuY3Rpb24oZSwgdCwgciwgaSkge1xuICB2YXIgcyA9IFYsIG4sIGg7XG4gIGlmIChyLmxlbmd0aCA9PSAwKVxuICAgIHJldHVybiBpICE9PSB2b2lkIDAgJiYgZS5zdWJzdHIodCwgMikgIT09IGkgPyAtMSA6IHQ7XG4gIG4gPSByLnNoaWZ0KCksIGggPSBzLmdldENoaWxkSWR4KGUsIHQpO1xuICBmb3IgKHZhciB1ID0gMCwgcCA9IDA7IHAgPCBoLmxlbmd0aDsgcCsrKSB7XG4gICAgdmFyIGMgPSBlLnN1YnN0cihoW3BdLCAyKTtcbiAgICBpZiAodHlwZW9mIG4gPT0gXCJudW1iZXJcIiAmJiAhcy5pc0NvbnRleHRUYWcoYykgJiYgdSA9PSBuIHx8IHR5cGVvZiBuID09IFwic3RyaW5nXCIgJiYgcy5pc0NvbnRleHRUYWcoYywgbikpXG4gICAgICByZXR1cm4gcy5nZXRJZHhieUxpc3RFeChlLCBoW3BdLCByLCBpKTtcbiAgICBzLmlzQ29udGV4dFRhZyhjKSB8fCB1Kys7XG4gIH1cbiAgcmV0dXJuIC0xO1xufTtcblYuZ2V0VExWYnlMaXN0ID0gZnVuY3Rpb24oZSwgdCwgciwgaSkge1xuICB2YXIgcyA9IFYsIG4gPSBzLmdldElkeGJ5TGlzdChlLCB0LCByLCBpKTtcbiAgcmV0dXJuIG4gPT0gLTEgfHwgbiA+PSBlLmxlbmd0aCA/IG51bGwgOiBzLmdldFRMVihlLCBuKTtcbn07XG5WLmdldFRMVmJ5TGlzdEV4ID0gZnVuY3Rpb24oZSwgdCwgciwgaSkge1xuICB2YXIgcyA9IFYsIG4gPSBzLmdldElkeGJ5TGlzdEV4KGUsIHQsIHIsIGkpO1xuICByZXR1cm4gbiA9PSAtMSA/IG51bGwgOiBzLmdldFRMVihlLCBuKTtcbn07XG5WLmdldFZieUxpc3QgPSBmdW5jdGlvbihlLCB0LCByLCBpLCBzKSB7XG4gIHZhciBuID0gViwgaCwgdTtcbiAgcmV0dXJuIGggPSBuLmdldElkeGJ5TGlzdChlLCB0LCByLCBpKSwgaCA9PSAtMSB8fCBoID49IGUubGVuZ3RoID8gbnVsbCA6ICh1ID0gbi5nZXRWKGUsIGgpLCBzID09PSAhMCAmJiAodSA9IHUuc3Vic3RyKDIpKSwgdSk7XG59O1xuVi5nZXRWYnlMaXN0RXggPSBmdW5jdGlvbihlLCB0LCByLCBpLCBzKSB7XG4gIHZhciBuID0gViwgaCwgdTtcbiAgcmV0dXJuIGggPSBuLmdldElkeGJ5TGlzdEV4KGUsIHQsIHIsIGkpLCBoID09IC0xID8gbnVsbCA6ICh1ID0gbi5nZXRWKGUsIGgpLCBlLnN1YnN0cihoLCAyKSA9PSBcIjAzXCIgJiYgcyAhPT0gITEgJiYgKHUgPSB1LnN1YnN0cigyKSksIHUpO1xufTtcblYuZ2V0SW50ID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICByID09IG51bGwgJiYgKHIgPSAtMSk7XG4gIHRyeSB7XG4gICAgdmFyIGkgPSBlLnN1YnN0cih0LCAyKTtcbiAgICBpZiAoaSAhPSBcIjAyXCIgJiYgaSAhPSBcIjAzXCIpXG4gICAgICByZXR1cm4gcjtcbiAgICB2YXIgcyA9IFYuZ2V0VihlLCB0KTtcbiAgICByZXR1cm4gaSA9PSBcIjAyXCIgPyBwYXJzZUludChzLCAxNikgOiBTbihzKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHI7XG4gIH1cbn07XG5WLmdldE9JRCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgciA9PSBudWxsICYmIChyID0gbnVsbCk7XG4gIHRyeSB7XG4gICAgaWYgKGUuc3Vic3RyKHQsIDIpICE9IFwiMDZcIilcbiAgICAgIHJldHVybiByO1xuICAgIHZhciBpID0gVi5nZXRWKGUsIHQpO1xuICAgIHJldHVybiBmdChpKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHI7XG4gIH1cbn07XG5WLmdldE9JRE5hbWUgPSBmdW5jdGlvbihlLCB0LCByKSB7XG4gIHIgPT0gbnVsbCAmJiAociA9IG51bGwpO1xuICB0cnkge1xuICAgIHZhciBpID0gVi5nZXRPSUQoZSwgdCwgcik7XG4gICAgaWYgKGkgPT0gcilcbiAgICAgIHJldHVybiByO1xuICAgIHZhciBzID0gYS5hc24xLng1MDkuT0lELm9pZDJuYW1lKGkpO1xuICAgIHJldHVybiBzID09IFwiXCIgPyBpIDogcztcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHI7XG4gIH1cbn07XG5WLmdldFN0cmluZyA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgciA9PSBudWxsICYmIChyID0gbnVsbCk7XG4gIHRyeSB7XG4gICAgdmFyIGkgPSBWLmdldFYoZSwgdCk7XG4gICAgcmV0dXJuIEFlKGkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gcjtcbiAgfVxufTtcblYuaGV4dG9vaWRzdHIgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gZnVuY3Rpb24odiwgbykge1xuICAgIHJldHVybiB2Lmxlbmd0aCA+PSBvID8gdiA6IG5ldyBBcnJheShvIC0gdi5sZW5ndGggKyAxKS5qb2luKFwiMFwiKSArIHY7XG4gIH0sIHIgPSBbXSwgaSA9IGUuc3Vic3RyKDAsIDIpLCBzID0gcGFyc2VJbnQoaSwgMTYpO1xuICByWzBdID0gbmV3IFN0cmluZyhNYXRoLmZsb29yKHMgLyA0MCkpLCByWzFdID0gbmV3IFN0cmluZyhzICUgNDApO1xuICBmb3IgKHZhciBuID0gZS5zdWJzdHIoMiksIGggPSBbXSwgdSA9IDA7IHUgPCBuLmxlbmd0aCAvIDI7IHUrKylcbiAgICBoLnB1c2gocGFyc2VJbnQobi5zdWJzdHIodSAqIDIsIDIpLCAxNikpO1xuICBmb3IgKHZhciBwID0gW10sIGMgPSBcIlwiLCB1ID0gMDsgdSA8IGgubGVuZ3RoOyB1KyspXG4gICAgaFt1XSAmIDEyOCA/IGMgPSBjICsgdCgoaFt1XSAmIDEyNykudG9TdHJpbmcoMiksIDcpIDogKGMgPSBjICsgdCgoaFt1XSAmIDEyNykudG9TdHJpbmcoMiksIDcpLCBwLnB1c2gobmV3IFN0cmluZyhwYXJzZUludChjLCAyKSkpLCBjID0gXCJcIik7XG4gIHZhciB5ID0gci5qb2luKFwiLlwiKTtcbiAgcmV0dXJuIHAubGVuZ3RoID4gMCAmJiAoeSA9IHkgKyBcIi5cIiArIHAuam9pbihcIi5cIikpLCB5O1xufTtcblYuZHVtcCA9IGZ1bmN0aW9uKGUsIHQsIHIsIGkpIHtcbiAgdmFyIHMgPSBWLCBuID0gcy5nZXRWLCBoID0gcy5kdW1wLCB1ID0gcy5nZXRDaGlsZElkeCwgcCA9IGU7XG4gIGUgaW5zdGFuY2VvZiBhLmFzbjEuQVNOMU9iamVjdCAmJiAocCA9IGUudG9oZXgoKSk7XG4gIHZhciBjID0gZnVuY3Rpb24oRSwgdykge1xuICAgIGlmIChFLmxlbmd0aCA8PSB3ICogMilcbiAgICAgIHJldHVybiBFO1xuICAgIHZhciB4ID0gRS5zdWJzdHIoMCwgdykgKyBcIi4uKHRvdGFsIFwiICsgRS5sZW5ndGggLyAyICsgXCJieXRlcykuLlwiICsgRS5zdWJzdHIoRS5sZW5ndGggLSB3LCB3KTtcbiAgICByZXR1cm4geDtcbiAgfTtcbiAgdCA9PT0gdm9pZCAwICYmICh0ID0geyBvbW1pdF9sb25nX29jdGV0OiAzMiB9KSwgciA9PT0gdm9pZCAwICYmIChyID0gMCksIGkgPT09IHZvaWQgMCAmJiAoaSA9IFwiXCIpO1xuICB2YXIgeSA9IHQub21taXRfbG9uZ19vY3RldCwgSSA9IHAuc3Vic3RyKHIsIDIpO1xuICBpZiAoSSA9PSBcIjAxXCIpIHtcbiAgICB2YXIgdiA9IG4ocCwgcik7XG4gICAgcmV0dXJuIHYgPT0gXCIwMFwiID8gaSArIGBCT09MRUFOIEZBTFNFXG5gIDogaSArIGBCT09MRUFOIFRSVUVcbmA7XG4gIH1cbiAgaWYgKEkgPT0gXCIwMlwiKSB7XG4gICAgdmFyIHYgPSBuKHAsIHIpO1xuICAgIHJldHVybiBpICsgXCJJTlRFR0VSIFwiICsgYyh2LCB5KSArIGBcbmA7XG4gIH1cbiAgaWYgKEkgPT0gXCIwM1wiKSB7XG4gICAgdmFyIHYgPSBuKHAsIHIpO1xuICAgIGlmIChzLmlzQVNOMUhFWCh2LnN1YnN0cigyKSkpIHtcbiAgICAgIHZhciBvID0gaSArIGBCSVRTVFJJTkcsIGVuY2Fwc3VsYXRlc1xuYDtcbiAgICAgIHJldHVybiBvID0gbyArIGgodi5zdWJzdHIoMiksIHQsIDAsIGkgKyBcIiAgXCIpLCBvO1xuICAgIH0gZWxzZVxuICAgICAgcmV0dXJuIGkgKyBcIkJJVFNUUklORyBcIiArIGModiwgeSkgKyBgXG5gO1xuICB9XG4gIGlmIChJID09IFwiMDRcIikge1xuICAgIHZhciB2ID0gbihwLCByKTtcbiAgICBpZiAocy5pc0FTTjFIRVgodikpIHtcbiAgICAgIHZhciBvID0gaSArIGBPQ1RFVFNUUklORywgZW5jYXBzdWxhdGVzXG5gO1xuICAgICAgcmV0dXJuIG8gPSBvICsgaCh2LCB0LCAwLCBpICsgXCIgIFwiKSwgbztcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybiBpICsgXCJPQ1RFVFNUUklORyBcIiArIGModiwgeSkgKyBgXG5gO1xuICB9XG4gIGlmIChJID09IFwiMDVcIilcbiAgICByZXR1cm4gaSArIGBOVUxMXG5gO1xuICBpZiAoSSA9PSBcIjA2XCIpIHtcbiAgICB2YXIgbCA9IG4ocCwgciksIGYgPSBhLmFzbjEuQVNOMVV0aWwub2lkSGV4VG9JbnQobCksIGQgPSBhLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoZiksIGcgPSBmLnJlcGxhY2UoL1xcLi9nLCBcIiBcIik7XG4gICAgcmV0dXJuIGQgIT0gXCJcIiA/IGkgKyBcIk9iamVjdElkZW50aWZpZXIgXCIgKyBkICsgXCIgKFwiICsgZyArIGApXG5gIDogaSArIFwiT2JqZWN0SWRlbnRpZmllciAoXCIgKyBnICsgYClcbmA7XG4gIH1cbiAgaWYgKEkgPT0gXCIwYVwiKVxuICAgIHJldHVybiBpICsgXCJFTlVNRVJBVEVEIFwiICsgcGFyc2VJbnQobihwLCByKSkgKyBgXG5gO1xuICBpZiAoSSA9PSBcIjBjXCIpXG4gICAgcmV0dXJuIGkgKyBcIlVURjhTdHJpbmcgJ1wiICsgVyhuKHAsIHIpKSArIGAnXG5gO1xuICBpZiAoSSA9PSBcIjEzXCIpXG4gICAgcmV0dXJuIGkgKyBcIlByaW50YWJsZVN0cmluZyAnXCIgKyBXKG4ocCwgcikpICsgYCdcbmA7XG4gIGlmIChJID09IFwiMTRcIilcbiAgICByZXR1cm4gaSArIFwiVGVsZXRleFN0cmluZyAnXCIgKyBXKG4ocCwgcikpICsgYCdcbmA7XG4gIGlmIChJID09IFwiMTZcIilcbiAgICByZXR1cm4gaSArIFwiSUE1U3RyaW5nICdcIiArIFcobihwLCByKSkgKyBgJ1xuYDtcbiAgaWYgKEkgPT0gXCIxN1wiKVxuICAgIHJldHVybiBpICsgXCJVVENUaW1lIFwiICsgVyhuKHAsIHIpKSArIGBcbmA7XG4gIGlmIChJID09IFwiMThcIilcbiAgICByZXR1cm4gaSArIFwiR2VuZXJhbGl6ZWRUaW1lIFwiICsgVyhuKHAsIHIpKSArIGBcbmA7XG4gIGlmIChJID09IFwiMWFcIilcbiAgICByZXR1cm4gaSArIFwiVmlzdWFsU3RyaW5nICdcIiArIFcobihwLCByKSkgKyBgJ1xuYDtcbiAgaWYgKEkgPT0gXCIxZVwiKVxuICAgIHJldHVybiBpICsgXCJCTVBTdHJpbmcgJ1wiICsgVHQobihwLCByKSkgKyBgJ1xuYDtcbiAgaWYgKEkgPT0gXCIzMFwiKSB7XG4gICAgaWYgKHAuc3Vic3RyKHIsIDQpID09IFwiMzAwMFwiKVxuICAgICAgcmV0dXJuIGkgKyBgU0VRVUVOQ0Uge31cbmA7XG4gICAgdmFyIG8gPSBpICsgYFNFUVVFTkNFXG5gLCBTID0gdShwLCByKSwgYiA9IHQ7XG4gICAgaWYgKChTLmxlbmd0aCA9PSAyIHx8IFMubGVuZ3RoID09IDMpICYmIHAuc3Vic3RyKFNbMF0sIDIpID09IFwiMDZcIiAmJiBwLnN1YnN0cihTW1MubGVuZ3RoIC0gMV0sIDIpID09IFwiMDRcIikge1xuICAgICAgdmFyIGQgPSBzLm9pZG5hbWUobihwLCBTWzBdKSksIEQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICAgIEQueDUwOUV4dE5hbWUgPSBkLCBiID0gRDtcbiAgICB9XG4gICAgZm9yICh2YXIgQSA9IDA7IEEgPCBTLmxlbmd0aDsgQSsrKVxuICAgICAgbyA9IG8gKyBoKHAsIGIsIFNbQV0sIGkgKyBcIiAgXCIpO1xuICAgIHJldHVybiBvO1xuICB9XG4gIGlmIChJID09IFwiMzFcIikge1xuICAgIGZvciAodmFyIG8gPSBpICsgYFNFVFxuYCwgUyA9IHUocCwgciksIEEgPSAwOyBBIDwgUy5sZW5ndGg7IEErKylcbiAgICAgIG8gPSBvICsgaChwLCB0LCBTW0FdLCBpICsgXCIgIFwiKTtcbiAgICByZXR1cm4gbztcbiAgfVxuICB2YXIgSSA9IHBhcnNlSW50KEksIDE2KTtcbiAgaWYgKEkgJiAxMjgpIHtcbiAgICB2YXIgbSA9IEkgJiAzMTtcbiAgICBpZiAoSSAmIDMyKSB7XG4gICAgICBmb3IgKHZhciBvID0gaSArIFwiW1wiICsgbSArIGBdXG5gLCBTID0gdShwLCByKSwgQSA9IDA7IEEgPCBTLmxlbmd0aDsgQSsrKVxuICAgICAgICBvID0gbyArIGgocCwgdCwgU1tBXSwgaSArIFwiICBcIik7XG4gICAgICByZXR1cm4gbztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHYgPSBuKHAsIHIpO1xuICAgICAgaWYgKFYuaXNBU04xSEVYKHYpKSB7XG4gICAgICAgIHZhciBvID0gaSArIFwiW1wiICsgbSArIGBdXG5gO1xuICAgICAgICByZXR1cm4gbyA9IG8gKyBoKHYsIHQsIDAsIGkgKyBcIiAgXCIpLCBvO1xuICAgICAgfSBlbHNlXG4gICAgICAgICh2LnN1YnN0cigwLCA4KSA9PSBcIjY4NzQ3NDcwXCIgfHwgdC54NTA5RXh0TmFtZSA9PT0gXCJzdWJqZWN0QWx0TmFtZVwiICYmIG0gPT0gMikgJiYgKHYgPSBXKHYpKTtcbiAgICAgIHZhciBvID0gaSArIFwiW1wiICsgbSArIFwiXSBcIiArIHYgKyBgXG5gO1xuICAgICAgcmV0dXJuIG87XG4gICAgfVxuICB9XG4gIHJldHVybiBpICsgXCJVTktOT1dOKFwiICsgSSArIFwiKSBcIiArIG4ocCwgcikgKyBgXG5gO1xufTtcblYucGFyc2UgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gViwgciA9IHQucGFyc2UsIGkgPSB0LmlzQVNOMUhFWCwgcyA9IHQuZ2V0ViwgbiA9IHQuZ2V0VExWLCBoID0gdC5nZXRDaGlsZElkeCwgdSA9IGEuYXNuMSwgcCA9IHUuQVNOMVV0aWwub2lkSGV4VG9JbnQsIGMgPSB1Lng1MDkuT0lELm9pZDJuYW1lLCB5ID0gVywgdiA9IFR0LCBvID0gZm4sIGwgPSB7IFwiMGNcIjogXCJ1dGY4c3RyXCIsIDEyOiBcIm51bXN0clwiLCAxMzogXCJwcm5zdHJcIiwgMTQ6IFwidGVsc3RyXCIsIDE2OiBcImlhNXN0clwiLCAxNzogXCJ1dGN0aW1lXCIsIDE4OiBcImdlbnRpbWVcIiwgXCIxYVwiOiBcInZpc3N0clwiLCBcIjFlXCI6IFwiYm1wc3RyXCIsIDMwOiBcInNlcVwiLCAzMTogXCJzZXRcIiB9LCBmID0gZnVuY3Rpb24oeCkge1xuICAgIGZvciAodmFyIEYgPSBbXSwgUCA9IGgoeCwgMCksIFQgPSAwOyBUIDwgUC5sZW5ndGg7IFQrKykge1xuICAgICAgdmFyIEggPSBQW1RdLCBDID0gbih4LCBIKSwgQiA9IHIoQyk7XG4gICAgICBGLnB1c2goQik7XG4gICAgfVxuICAgIHJldHVybiBGO1xuICB9LCBkID0gZS5zdWJzdHIoMCwgMiksIGcgPSB7fSwgUyA9IHMoZSwgMCk7XG4gIGlmIChkID09IFwiMDFcIilcbiAgICByZXR1cm4gZSA9PSBcIjAxMDFmZlwiID8geyBib29sOiAhMCB9IDogeyBib29sOiAhMSB9O1xuICBpZiAoZCA9PSBcIjAyXCIpXG4gICAgcmV0dXJuIHsgaW50OiB7IGhleDogUyB9IH07XG4gIGlmIChkID09IFwiMDNcIilcbiAgICB0cnkge1xuICAgICAgaWYgKFMuc3Vic3RyKDAsIDIpICE9IFwiMDBcIilcbiAgICAgICAgdGhyb3cgXCJub3QgZW5jYXBcIjtcbiAgICAgIHZhciBiID0gUy5zdWJzdHIoMik7XG4gICAgICBpZiAoIWkoYikpXG4gICAgICAgIHRocm93IFwibm90IGVuY2FwXCI7XG4gICAgICByZXR1cm4geyBiaXRzdHI6IHsgb2JqOiByKGIpIH0gfTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHZhciBEID0gbnVsbDtcbiAgICAgIHJldHVybiBTLmxlbmd0aCA8PSAxMCAmJiAoRCA9IEVuKFMpKSwgRCA9PSBudWxsID8geyBiaXRzdHI6IHsgaGV4OiBTIH0gfSA6IHsgYml0c3RyOiB7IGJpbjogRCB9IH07XG4gICAgfVxuICBlbHNlIGlmIChkID09IFwiMDRcIilcbiAgICB0cnkge1xuICAgICAgaWYgKCFpKFMpKVxuICAgICAgICB0aHJvdyBcIm5vdCBlbmNhcFwiO1xuICAgICAgcmV0dXJuIHsgb2N0c3RyOiB7IG9iajogcihTKSB9IH07XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4geyBvY3RzdHI6IHsgaGV4OiBTIH0gfTtcbiAgICB9XG4gIGVsc2Uge1xuICAgIGlmIChkID09IFwiMDVcIilcbiAgICAgIHJldHVybiB7IG51bGw6IFwiXCIgfTtcbiAgICBpZiAoZCA9PSBcIjA2XCIpIHtcbiAgICAgIHZhciBBID0gcChTKSwgSSA9IGMoQSk7XG4gICAgICByZXR1cm4gSSA9PSBcIlwiID8geyBvaWQ6IEEgfSA6IHsgb2lkOiBJIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkID09IFwiMGFcIilcbiAgICAgICAgcmV0dXJuIFMubGVuZ3RoID4gNCA/IHsgZW51bTogeyBoZXg6IFMgfSB9IDogeyBlbnVtOiBwYXJzZUludChTLCAxNikgfTtcbiAgICAgIGlmIChkID09IFwiMzBcIiB8fCBkID09IFwiMzFcIilcbiAgICAgICAgcmV0dXJuIGdbbFtkXV0gPSBmKGUpLCBnO1xuICAgICAgaWYgKGQgPT0gXCIxNFwiKSB7XG4gICAgICAgIHZhciBtID0gbyhTKTtcbiAgICAgICAgcmV0dXJuIGdbbFtkXV0gPSB7IHN0cjogbSB9LCBnO1xuICAgICAgfSBlbHNlIGlmIChkID09IFwiMWVcIikge1xuICAgICAgICB2YXIgbSA9IHYoUyk7XG4gICAgICAgIHJldHVybiBnW2xbZF1dID0geyBzdHI6IG0gfSwgZztcbiAgICAgIH0gZWxzZSBpZiAoXCI6MGM6MTI6MTM6MTY6MTc6MTg6MWE6XCIuaW5kZXhPZihkKSAhPSAtMSkge1xuICAgICAgICB2YXIgbSA9IHkoUyk7XG4gICAgICAgIHJldHVybiBnW2xbZF1dID0geyBzdHI6IG0gfSwgZztcbiAgICAgIH0gZWxzZSBpZiAoZC5tYXRjaCgvXjhbMC05XSQvKSkge1xuICAgICAgICB2YXIgbSA9IHkoUyk7XG4gICAgICAgIHJldHVybiBtID09IG51bGwgfCBtID09IFwiXCIgPyB7IHRhZzogeyB0YWc6IGQsIGV4cGxpY2l0OiAhMSwgaGV4OiBTIH0gfSA6IG0ubWF0Y2goL1tcXHgwMC1cXHgxRlxceDdGLVxceDlGXS8pICE9IG51bGwgfHwgbS5tYXRjaCgvW1xcdTAwMDAtXFx1MDAxRlxcdTAwODDigJNcXHUwMDlGXS8pICE9IG51bGwgPyB7IHRhZzogeyB0YWc6IGQsIGV4cGxpY2l0OiAhMSwgaGV4OiBTIH0gfSA6IHsgdGFnOiB7IHRhZzogZCwgZXhwbGljaXQ6ICExLCBzdHI6IG0gfSB9O1xuICAgICAgfSBlbHNlIGlmIChkLm1hdGNoKC9eYVswLTldJC8pKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghaShTKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBlbmNhcFwiKTtcbiAgICAgICAgICByZXR1cm4geyB0YWc6IHsgdGFnOiBkLCBleHBsaWNpdDogITAsIG9iajogcihTKSB9IH07XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIHJldHVybiB7IHRhZzogeyB0YWc6IGQsIGV4cGxpY2l0OiAhMCwgaGV4OiBTIH0gfTtcbiAgICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciBFID0gbmV3IGEuYXNuMS5BU04xT2JqZWN0KCk7XG4gICAgICAgIEUuaFYgPSBTO1xuICAgICAgICB2YXIgdyA9IEUuZ2V0TGVuZ3RoSGV4RnJvbVZhbHVlKCk7XG4gICAgICAgIHJldHVybiB7IGFzbjE6IHsgdGx2OiBkICsgdyArIFMgfSB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblYuaXNDb250ZXh0VGFnID0gZnVuY3Rpb24oZSwgdCkge1xuICBlID0gZS50b0xvd2VyQ2FzZSgpO1xuICB2YXIgciwgaTtcbiAgdHJ5IHtcbiAgICByID0gcGFyc2VJbnQoZSwgMTYpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHQgPT09IHZvaWQgMClcbiAgICByZXR1cm4gKHIgJiAxOTIpID09IDEyODtcbiAgdHJ5IHtcbiAgICB2YXIgcyA9IHQubWF0Y2goL15cXFtbMC05XStcXF0kLyk7XG4gICAgcmV0dXJuIHMgPT0gbnVsbCB8fCAoaSA9IHBhcnNlSW50KHQuc3Vic3RyKDEsIHQubGVuZ3RoIC0gMSksIDEwKSwgaSA+IDMxKSA/ICExIDogKHIgJiAxOTIpID09IDEyOCAmJiAociAmIDMxKSA9PSBpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gITE7XG4gIH1cbn07XG5WLmlzQVNOMUhFWCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWO1xuICBpZiAoZS5sZW5ndGggJSAyID09IDEpXG4gICAgcmV0dXJuICExO1xuICB2YXIgciA9IHQuZ2V0VmJsZW4oZSwgMCksIGkgPSBlLnN1YnN0cigwLCAyKSwgcyA9IHQuZ2V0TChlLCAwKSwgbiA9IGUubGVuZ3RoIC0gaS5sZW5ndGggLSBzLmxlbmd0aDtcbiAgcmV0dXJuIG4gPT0gciAqIDI7XG59O1xuVi5jaGVja1N0cmljdERFUiA9IGZ1bmN0aW9uKGUsIHQsIHIsIGksIHMpIHtcbiAgdmFyIG4gPSBWO1xuICBpZiAociA9PT0gdm9pZCAwKSB7XG4gICAgaWYgKHR5cGVvZiBlICE9IFwic3RyaW5nXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgaGV4IHN0cmluZ1wiKTtcbiAgICBpZiAoZSA9IGUudG9Mb3dlckNhc2UoKSwgIWEubGFuZy5TdHJpbmcuaXNIZXgoZSkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgaGV4IHN0cmluZ1wiKTtcbiAgICByID0gZS5sZW5ndGgsIGkgPSBlLmxlbmd0aCAvIDIsIGkgPCAxMjggPyBzID0gMSA6IHMgPSBNYXRoLmNlaWwoaS50b1N0cmluZygxNikpICsgMTtcbiAgfVxuICB2YXIgaCA9IG4uZ2V0TChlLCB0KTtcbiAgaWYgKGgubGVuZ3RoID4gcyAqIDIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTCBvZiBUTFYgdG9vIGxvbmc6IGlkeD1cIiArIHQpO1xuICB2YXIgdSA9IG4uZ2V0VmJsZW4oZSwgdCk7XG4gIGlmICh1ID4gaSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2YWx1ZSBvZiBMIHRvbyBsb25nIHRoYW4gaGV4OiBpZHg9XCIgKyB0KTtcbiAgdmFyIHAgPSBuLmdldFRMVihlLCB0KSwgYyA9IHAubGVuZ3RoIC0gMiAtIG4uZ2V0TChlLCB0KS5sZW5ndGg7XG4gIGlmIChjICE9PSB1ICogMilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJWIHN0cmluZyBsZW5ndGggYW5kIEwncyB2YWx1ZSBub3QgdGhlIHNhbWU6XCIgKyBjICsgXCIvXCIgKyB1ICogMik7XG4gIGlmICh0ID09PSAwICYmIGUubGVuZ3RoICE9IHAubGVuZ3RoKVxuICAgIHRocm93IG5ldyBFcnJvcihcInRvdGFsIGxlbmd0aCBhbmQgVExWIGxlbmd0aCB1bm1hdGNoOlwiICsgZS5sZW5ndGggKyBcIiE9XCIgKyBwLmxlbmd0aCk7XG4gIHZhciB5ID0gZS5zdWJzdHIodCwgMik7XG4gIGlmICh5ID09PSBcIjAyXCIpIHtcbiAgICB2YXIgdiA9IG4uZ2V0VmlkeChlLCB0KTtcbiAgICBpZiAoZS5zdWJzdHIodiwgMikgPT0gXCIwMFwiICYmIGUuY2hhckNvZGVBdCh2ICsgMikgPCA1NilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBsZWFzdCB6ZXJvcyBmb3IgREVSIElOVEVHRVJcIik7XG4gIH1cbiAgaWYgKHBhcnNlSW50KHksIDE2KSAmIDMyKSB7XG4gICAgZm9yICh2YXIgbyA9IG4uZ2V0VmJsZW4oZSwgdCksIGwgPSAwLCBmID0gbi5nZXRDaGlsZElkeChlLCB0KSwgZCA9IDA7IGQgPCBmLmxlbmd0aDsgZCsrKSB7XG4gICAgICB2YXIgZyA9IG4uZ2V0VExWKGUsIGZbZF0pO1xuICAgICAgbCArPSBnLmxlbmd0aCwgbi5jaGVja1N0cmljdERFUihlLCBmW2RdLCByLCBpLCBzKTtcbiAgICB9XG4gICAgaWYgKG8gKiAyICE9IGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzdW0gb2YgY2hpbGRyZW4ncyBUTFYgbGVuZ3RoIGFuZCBMIHVubWF0Y2g6IFwiICsgbyAqIDIgKyBcIiE9XCIgKyBsKTtcbiAgfVxufTtcblYub2lkbmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLmFzbjE7XG4gIGEubGFuZy5TdHJpbmcuaXNIZXgoZSkgJiYgKGUgPSB0LkFTTjFVdGlsLm9pZEhleFRvSW50KGUpKTtcbiAgdmFyIHIgPSB0Lng1MDkuT0lELm9pZDJuYW1lKGUpO1xuICByZXR1cm4gciA9PT0gXCJcIiAmJiAociA9IGUpLCByO1xufTtcbih0eXBlb2YgYSA+IFwidVwiIHx8ICFhKSAmJiAoYSA9IHt9KTtcbih0eXBlb2YgYS5hc24xID4gXCJ1XCIgfHwgIWEuYXNuMSkgJiYgKGEuYXNuMSA9IHt9KTtcbih0eXBlb2YgYS5hc24xLng1MDkgPiBcInVcIiB8fCAhYS5hc24xLng1MDkpICYmIChhLmFzbjEueDUwOSA9IHt9KTtcbmEuYXNuMS54NTA5LkNlcnRpZmljYXRlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSQml0U3RyaW5nLCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IHIueDUwOSwgaCA9IG4uVEJTQ2VydGlmaWNhdGUsIHUgPSBuLkFsZ29yaXRobUlkZW50aWZpZXI7XG4gIHRoaXMucGFyYW1zID0gdm9pZCAwLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihwKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBwO1xuICB9LCB0aGlzLnNpZ24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcCA9IHRoaXMucGFyYW1zLCBjID0gcC5zaWdhbGc7XG4gICAgcC5zaWdhbGcubmFtZSAhPSBudWxsICYmIChjID0gcC5zaWdhbGcubmFtZSk7XG4gICAgdmFyIHkgPSBwLnRic29iai50b2hleCgpLCB2ID0gbmV3IGEuY3J5cHRvLlNpZ25hdHVyZSh7IGFsZzogYyB9KTtcbiAgICB2LmluaXQocC5jYWtleSksIHYudXBkYXRlSGV4KHkpLCBwLnNpZ2hleCA9IHYuc2lnbigpO1xuICB9LCB0aGlzLmdldFBFTSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkZSh0aGlzLnRvaGV4KCksIFwiQ0VSVElGSUNBVEVcIik7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcCA9IHRoaXMucGFyYW1zO1xuICAgIGlmICgocC50YnNvYmogPT0gbnVsbCB8fCBwLnRic29iaiA9PSBudWxsKSAmJiAocC50YnNvYmogPSBuZXcgaChwKSksIHAuc2lnaGV4ID09IG51bGwgJiYgcC5jYWtleSAhPSBudWxsICYmIHRoaXMuc2lnbigpLCBwLnNpZ2hleCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwic2lnaGV4IG9yIGNha2V5IHBhcmFtZXRlciBub3QgZGVmaW5lZFwiKTtcbiAgICB2YXIgYyA9IFtdO1xuICAgIGMucHVzaChwLnRic29iaiksIGMucHVzaChuZXcgdSh7IG5hbWU6IHAuc2lnYWxnIH0pKSwgYy5wdXNoKG5ldyBpKHsgaGV4OiBcIjAwXCIgKyBwLnNpZ2hleCB9KSk7XG4gICAgdmFyIHkgPSBuZXcgcyh7IGFycmF5OiBjIH0pO1xuICAgIHJldHVybiB5LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LkNlcnRpZmljYXRlLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5UQlNDZXJ0aWZpY2F0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuVEJTQ2VydGlmaWNhdGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLng1MDksIHMgPSByLkRFUlRhZ2dlZE9iamVjdCwgbiA9IHIuREVSSW50ZWdlciwgaCA9IHIuREVSU2VxdWVuY2UsIHUgPSBpLkFsZ29yaXRobUlkZW50aWZpZXIsIHAgPSBpLlRpbWUsIGMgPSBpLlg1MDBOYW1lLCB5ID0gaS5FeHRlbnNpb25zLCB2ID0gaS5TdWJqZWN0UHVibGljS2V5SW5mbztcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihvKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBvO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG8gPSBbXSwgbCA9IHRoaXMucGFyYW1zO1xuICAgIGlmIChsLnZlcnNpb24gIT0gbnVsbCB8fCBsLnZlcnNpb24gIT0gMSkge1xuICAgICAgdmFyIGYgPSAyO1xuICAgICAgbC52ZXJzaW9uICE9IG51bGwgJiYgKGYgPSBsLnZlcnNpb24gLSAxKTtcbiAgICAgIHZhciBkID0gbmV3IHMoeyBvYmo6IG5ldyBuKHsgaW50OiBmIH0pIH0pO1xuICAgICAgby5wdXNoKGQpO1xuICAgIH1cbiAgICBvLnB1c2gobmV3IG4obC5zZXJpYWwpKSwgby5wdXNoKG5ldyB1KHsgbmFtZTogbC5zaWdhbGcgfSkpLCBvLnB1c2gobmV3IGMobC5pc3N1ZXIpKSwgby5wdXNoKG5ldyBoKHsgYXJyYXk6IFtuZXcgcChsLm5vdGJlZm9yZSksIG5ldyBwKGwubm90YWZ0ZXIpXSB9KSksIG8ucHVzaChuZXcgYyhsLnN1YmplY3QpKSwgby5wdXNoKG5ldyB2KGsuZ2V0S2V5KGwuc2JqcHVia2V5KSkpLCBsLmV4dCAhPT0gdm9pZCAwICYmIGwuZXh0Lmxlbmd0aCA+IDAgJiYgby5wdXNoKG5ldyBzKHsgdGFnOiBcImEzXCIsIG9iajogbmV3IHkobC5leHQpIH0pKTtcbiAgICB2YXIgZyA9IG5ldyBhLmFzbjEuREVSU2VxdWVuY2UoeyBhcnJheTogbyB9KTtcbiAgICByZXR1cm4gZy50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLng1MDkuVEJTQ2VydGlmaWNhdGUsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkV4dGVuc2lvbnMgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkV4dGVuc2lvbnMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci54NTA5O1xuICB0aGlzLmFQYXJhbSA9IFtdLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5hUGFyYW0gPSBuO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgbiA9IFtdLCBoID0gMDsgaCA8IHRoaXMuYVBhcmFtLmxlbmd0aDsgaCsrKSB7XG4gICAgICB2YXIgdSA9IHRoaXMuYVBhcmFtW2hdLCBwID0gdS5leHRuYW1lLCBjID0gbnVsbDtcbiAgICAgIGlmICh1LmV4dG4gIT0gbnVsbClcbiAgICAgICAgYyA9IG5ldyBzLlByaXZhdGVFeHRlbnNpb24odSk7XG4gICAgICBlbHNlIGlmIChwID09IFwic3ViamVjdEtleUlkZW50aWZpZXJcIilcbiAgICAgICAgYyA9IG5ldyBzLlN1YmplY3RLZXlJZGVudGlmaWVyKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcImtleVVzYWdlXCIpXG4gICAgICAgIGMgPSBuZXcgcy5LZXlVc2FnZSh1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJzdWJqZWN0QWx0TmFtZVwiKVxuICAgICAgICBjID0gbmV3IHMuU3ViamVjdEFsdE5hbWUodSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiaXNzdWVyQWx0TmFtZVwiKVxuICAgICAgICBjID0gbmV3IHMuSXNzdWVyQWx0TmFtZSh1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJiYXNpY0NvbnN0cmFpbnRzXCIpXG4gICAgICAgIGMgPSBuZXcgcy5CYXNpY0NvbnN0cmFpbnRzKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcIm5hbWVDb25zdHJhaW50c1wiKVxuICAgICAgICBjID0gbmV3IHMuTmFtZUNvbnN0cmFpbnRzKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcImNSTERpc3RyaWJ1dGlvblBvaW50c1wiKVxuICAgICAgICBjID0gbmV3IHMuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcImNlcnRpZmljYXRlUG9saWNpZXNcIilcbiAgICAgICAgYyA9IG5ldyBzLkNlcnRpZmljYXRlUG9saWNpZXModSk7XG4gICAgICBlbHNlIGlmIChwID09IFwicG9saWN5TWFwcGluZ3NcIilcbiAgICAgICAgYyA9IG5ldyBzLlBvbGljeU1hcHBpbmdzKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcInBvbGljeUNvbnN0cmFpbnRzXCIpXG4gICAgICAgIGMgPSBuZXcgcy5Qb2xpY3lDb25zdHJhaW50cyh1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJpbmhpYml0QW55UG9saWN5XCIpXG4gICAgICAgIGMgPSBuZXcgcy5JbmhpYml0QW55UG9saWN5KHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcImF1dGhvcml0eUtleUlkZW50aWZpZXJcIilcbiAgICAgICAgYyA9IG5ldyBzLkF1dGhvcml0eUtleUlkZW50aWZpZXIodSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiZXh0S2V5VXNhZ2VcIilcbiAgICAgICAgYyA9IG5ldyBzLkV4dEtleVVzYWdlKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcImF1dGhvcml0eUluZm9BY2Nlc3NcIilcbiAgICAgICAgYyA9IG5ldyBzLkF1dGhvcml0eUluZm9BY2Nlc3ModSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiY1JMTnVtYmVyXCIpXG4gICAgICAgIGMgPSBuZXcgcy5DUkxOdW1iZXIodSk7XG4gICAgICBlbHNlIGlmIChwID09IFwiY1JMUmVhc29uXCIpXG4gICAgICAgIGMgPSBuZXcgcy5DUkxSZWFzb24odSk7XG4gICAgICBlbHNlIGlmIChwID09IFwib2NzcE5vbmNlXCIpXG4gICAgICAgIGMgPSBuZXcgcy5PQ1NQTm9uY2UodSk7XG4gICAgICBlbHNlIGlmIChwID09IFwib2NzcE5vQ2hlY2tcIilcbiAgICAgICAgYyA9IG5ldyBzLk9DU1BOb0NoZWNrKHUpO1xuICAgICAgZWxzZSBpZiAocCA9PSBcImFkb2JlVGltZVN0YW1wXCIpXG4gICAgICAgIGMgPSBuZXcgcy5BZG9iZVRpbWVTdGFtcCh1KTtcbiAgICAgIGVsc2UgaWYgKHAgPT0gXCJzdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlc1wiKVxuICAgICAgICBjID0gbmV3IHMuU3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXModSk7XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImV4dGVuc2lvbiBub3Qgc3VwcG9ydGVkOlwiICsgSlNPTi5zdHJpbmdpZnkodSkpO1xuICAgICAgYyAhPSBudWxsICYmIG4ucHVzaChjKTtcbiAgICB9XG4gICAgdmFyIHkgPSBuZXcgaSh7IGFycmF5OiBuIH0pO1xuICAgIHJldHVybiB5LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEueDUwOS5FeHRlbnNpb25zLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5FeHRlbnNpb24gPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkV4dGVuc2lvbi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVST2JqZWN0SWRlbnRpZmllciwgcyA9IHIuREVST2N0ZXRTdHJpbmc7XG4gIHIuREVSQml0U3RyaW5nO1xuICB2YXIgbiA9IHIuREVSQm9vbGVhbiwgaCA9IHIuREVSU2VxdWVuY2U7XG4gIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IG5ldyBpKHsgb2lkOiB0aGlzLm9pZCB9KSwgcCA9IG5ldyBzKHsgaGV4OiB0aGlzLmdldEV4dG5WYWx1ZUhleCgpIH0pLCBjID0gbmV3IEFycmF5KCk7XG4gICAgYy5wdXNoKHUpLCB0aGlzLmNyaXRpY2FsICYmIGMucHVzaChuZXcgbigpKSwgYy5wdXNoKHApO1xuICAgIHZhciB5ID0gbmV3IGgoeyBhcnJheTogYyB9KTtcbiAgICByZXR1cm4geS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0aGlzLmNyaXRpY2FsID0gITEsIGUgIT09IHZvaWQgMCAmJiBlLmNyaXRpY2FsICE9PSB2b2lkIDAgJiYgKHRoaXMuY3JpdGljYWwgPSBlLmNyaXRpY2FsKTtcbn07XG5OKGEuYXNuMS54NTA5LkV4dGVuc2lvbiwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuS2V5VXNhZ2UgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LktleVVzYWdlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBFcnJvciwgciA9IHsgZGlnaXRhbFNpZ25hdHVyZTogMCwgbm9uUmVwdWRpYXRpb246IDEsIGtleUVuY2lwaGVybWVudDogMiwgZGF0YUVuY2lwaGVybWVudDogMywga2V5QWdyZWVtZW50OiA0LCBrZXlDZXJ0U2lnbjogNSwgY1JMU2lnbjogNiwgZW5jaXBoZXJPbmx5OiA3LCBkZWNpcGhlck9ubHk6IDggfTtcbiAgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IHRoaXMuZ2V0QmluVmFsdWUoKTtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IGEuYXNuMS5ERVJCaXRTdHJpbmcoeyBiaW46IGkgfSksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLmdldEJpblZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGkgPSB0aGlzLnBhcmFtcztcbiAgICBpZiAodHlwZW9mIGkgIT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgaS5uYW1lcyAhPSBcIm9iamVjdFwiICYmIHR5cGVvZiBpLmJpbiAhPSBcInN0cmluZ1wiKVxuICAgICAgdGhyb3cgbmV3IHQoXCJwYXJhbWV0ZXIgbm90IHlldCBzZXRcIik7XG4gICAgaWYgKGkubmFtZXMgIT0gbnVsbClcbiAgICAgIHJldHVybiBydChpLm5hbWVzLCByKTtcbiAgICBpZiAoaS5iaW4gIT0gbnVsbClcbiAgICAgIHJldHVybiBpLmJpbjtcbiAgICB0aHJvdyBuZXcgdChcInBhcmFtZXRlciBub3Qgc2V0IHByb3Blcmx5XCIpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjE1XCIsIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LktleVVzYWdlLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuQmFzaWNDb25zdHJhaW50cyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQmFzaWNDb25zdHJhaW50cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYS5hc24xLCByID0gdC5ERVJCb29sZWFuLCBpID0gdC5ERVJJbnRlZ2VyLCBzID0gdC5ERVJTZXF1ZW5jZTtcbiAgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IG5ldyBBcnJheSgpO1xuICAgIHRoaXMuY0EgJiYgbi5wdXNoKG5ldyByKCkpLCB0aGlzLnBhdGhMZW4gPiAtMSAmJiBuLnB1c2gobmV3IGkoeyBpbnQ6IHRoaXMucGF0aExlbiB9KSk7XG4gICAgdmFyIGggPSBuZXcgcyh7IGFycmF5OiBuIH0pO1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBoLCB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4xOVwiLCB0aGlzLmNBID0gITEsIHRoaXMucGF0aExlbiA9IC0xLCBlICE9PSB2b2lkIDAgJiYgKGUuY0EgIT09IHZvaWQgMCAmJiAodGhpcy5jQSA9IGUuY0EpLCBlLnBhdGhMZW4gIT09IHZvaWQgMCAmJiAodGhpcy5wYXRoTGVuID0gZS5wYXRoTGVuKSk7XG59O1xuTihhLmFzbjEueDUwOS5CYXNpY0NvbnN0cmFpbnRzLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuQ1JMRGlzdHJpYnV0aW9uUG9pbnRzID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5DUkxEaXN0cmlidXRpb25Qb2ludHMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLng1MDk7XG4gIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLnNldEJ5RFBBcnJheSA9IGZ1bmN0aW9uKHMpIHtcbiAgICBmb3IgKHZhciBuID0gW10sIGggPSAwOyBoIDwgcy5sZW5ndGg7IGgrKylcbiAgICAgIGlmIChzW2hdIGluc3RhbmNlb2YgYS5hc24xLkFTTjFPYmplY3QpXG4gICAgICAgIG4ucHVzaChzW2hdKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICB2YXIgdSA9IG5ldyBpLkRpc3RyaWJ1dGlvblBvaW50KHNbaF0pO1xuICAgICAgICBuLnB1c2godSk7XG4gICAgICB9XG4gICAgdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IHIuREVSU2VxdWVuY2UoeyBhcnJheTogbiB9KTtcbiAgfSwgdGhpcy5zZXRCeU9uZVVSSSA9IGZ1bmN0aW9uKHMpIHtcbiAgICB2YXIgbiA9IG5ldyBpLkRpc3RyaWJ1dGlvblBvaW50KHsgZnVsbHVyaTogcyB9KTtcbiAgICB0aGlzLnNldEJ5RFBBcnJheShbbl0pO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjMxXCIsIGUgIT09IHZvaWQgMCAmJiAoZS5hcnJheSAhPT0gdm9pZCAwID8gdGhpcy5zZXRCeURQQXJyYXkoZS5hcnJheSkgOiBlLnVyaSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlPbmVVUkkoZS51cmkpKTtcbn07XG5OKGEuYXNuMS54NTA5LkNSTERpc3RyaWJ1dGlvblBvaW50cywgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50ID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWU7XG4gIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcyA9IG5ldyByLkRFUlNlcXVlbmNlKCk7XG4gICAgaWYgKHRoaXMuYXNuMURQICE9IG51bGwpIHtcbiAgICAgIHZhciBuID0gbmV3IHIuREVSVGFnZ2VkT2JqZWN0KHsgZXhwbGljaXQ6ICEwLCB0YWc6IFwiYTBcIiwgb2JqOiB0aGlzLmFzbjFEUCB9KTtcbiAgICAgIHMuYXBwZW5kQVNOMU9iamVjdChuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaFRMViA9IHMudG9oZXgoKSwgdGhpcy5oVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgKGUuZHBvYmogIT09IHZvaWQgMCA/IHRoaXMuYXNuMURQID0gZS5kcG9iaiA6IGUuZHBuYW1lICE9PSB2b2lkIDAgPyB0aGlzLmFzbjFEUCA9IG5ldyBpKGUuZHBuYW1lKSA6IGUuZnVsbHVyaSAhPT0gdm9pZCAwICYmICh0aGlzLmFzbjFEUCA9IG5ldyBpKHsgZnVsbDogW3sgdXJpOiBlLmZ1bGx1cmkgfV0gfSkpKTtcbn07XG5OKGEuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5EaXN0cmlidXRpb25Qb2ludE5hbWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50TmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSVGFnZ2VkT2JqZWN0O1xuICBpZiAodGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT0gXCJmdWxsXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjdXJyZW50bHkgdHlwZSBzaGFsbCBiZSAnZnVsbCc6IFwiICsgdGhpcy50eXBlKTtcbiAgICByZXR1cm4gdGhpcy5hc24xT2JqID0gbmV3IGkoeyBleHBsaWNpdDogITEsIHRhZzogdGhpcy50YWcsIG9iajogdGhpcy5hc24xViB9KSwgdGhpcy5oVExWID0gdGhpcy5hc24xT2JqLnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwKVxuICAgIGlmIChyLng1MDkuR2VuZXJhbE5hbWVzLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpKVxuICAgICAgdGhpcy50eXBlID0gXCJmdWxsXCIsIHRoaXMudGFnID0gXCJhMFwiLCB0aGlzLmFzbjFWID0gZTtcbiAgICBlbHNlIGlmIChlLmZ1bGwgIT09IHZvaWQgMClcbiAgICAgIHRoaXMudHlwZSA9IFwiZnVsbFwiLCB0aGlzLnRhZyA9IFwiYTBcIiwgdGhpcy5hc24xViA9IG5ldyByLng1MDkuR2VuZXJhbE5hbWVzKGUuZnVsbCk7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBjbGFzcyBzdXBwb3J0cyBHZW5lcmFsTmFtZXMgb25seSBhcyBhcmd1bWVudFwiKTtcbn07XG5OKGEuYXNuMS54NTA5LkRpc3RyaWJ1dGlvblBvaW50TmFtZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuQ2VydGlmaWNhdGVQb2xpY2llcyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQ2VydGlmaWNhdGVQb2xpY2llcy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIueDUwOSwgcyA9IHIuREVSU2VxdWVuY2UsIG4gPSBpLlBvbGljeUluZm9ybWF0aW9uO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgaCA9IFtdLCB1ID0gMDsgdSA8IHRoaXMucGFyYW1zLmFycmF5Lmxlbmd0aDsgdSsrKVxuICAgICAgaC5wdXNoKG5ldyBuKHRoaXMucGFyYW1zLmFycmF5W3VdKSk7XG4gICAgdmFyIHAgPSBuZXcgcyh7IGFycmF5OiBoIH0pO1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBwLCB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4zMlwiLCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5DZXJ0aWZpY2F0ZVBvbGljaWVzLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuUG9saWN5SW5mb3JtYXRpb24gPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlBvbGljeUluZm9ybWF0aW9uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLmFzbjEsIHIgPSB0LkRFUlNlcXVlbmNlLCBpID0gdC5ERVJPYmplY3RJZGVudGlmaWVyLCBzID0gdC54NTA5LlBvbGljeVF1YWxpZmllckluZm87XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBhcmFtcy5wb2xpY3lvaWQgPT09IHZvaWQgMCAmJiB0aGlzLnBhcmFtcy5hcnJheSA9PT0gdm9pZCAwKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicGFyYW1ldGVyIG9pZCBhbmQgYXJyYXkgbWlzc2luZ1wiKTtcbiAgICB2YXIgbiA9IFtuZXcgaSh0aGlzLnBhcmFtcy5wb2xpY3lvaWQpXTtcbiAgICBpZiAodGhpcy5wYXJhbXMuYXJyYXkgIT09IHZvaWQgMCkge1xuICAgICAgZm9yICh2YXIgaCA9IFtdLCB1ID0gMDsgdSA8IHRoaXMucGFyYW1zLmFycmF5Lmxlbmd0aDsgdSsrKVxuICAgICAgICBoLnB1c2gobmV3IHModGhpcy5wYXJhbXMuYXJyYXlbdV0pKTtcbiAgICAgIGgubGVuZ3RoID4gMCAmJiBuLnB1c2gobmV3IHIoeyBhcnJheTogaCB9KSk7XG4gICAgfVxuICAgIHZhciBwID0gbmV3IHIoeyBhcnJheTogbiB9KTtcbiAgICByZXR1cm4gcC50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5Qb2xpY3lJbmZvcm1hdGlvbiwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuUG9saWN5UXVhbGlmaWVySW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuUG9saWN5UXVhbGlmaWVySW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYS5hc24xLCByID0gdC5ERVJTZXF1ZW5jZSwgaSA9IHQuREVSSUE1U3RyaW5nLCBzID0gdC5ERVJPYmplY3RJZGVudGlmaWVyLCBuID0gdC54NTA5LlVzZXJOb3RpY2U7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnBhcmFtcy5jcHMgIT09IHZvaWQgMCkge1xuICAgICAgdmFyIGggPSBuZXcgcih7IGFycmF5OiBbbmV3IHMoeyBvaWQ6IFwiMS4zLjYuMS41LjUuNy4yLjFcIiB9KSwgbmV3IGkoeyBzdHI6IHRoaXMucGFyYW1zLmNwcyB9KV0gfSk7XG4gICAgICByZXR1cm4gaC50b2hleCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYXJhbXMudW5vdGljZSAhPSBudWxsKSB7XG4gICAgICB2YXIgaCA9IG5ldyByKHsgYXJyYXk6IFtuZXcgcyh7IG9pZDogXCIxLjMuNi4xLjUuNS43LjIuMlwiIH0pLCBuZXcgbih0aGlzLnBhcmFtcy51bm90aWNlKV0gfSk7XG4gICAgICByZXR1cm4gaC50b2hleCgpO1xuICAgIH1cbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuUG9saWN5UXVhbGlmaWVySW5mbywgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuVXNlck5vdGljZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuVXNlck5vdGljZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYS5hc24xLkRFUlNlcXVlbmNlO1xuICBhLmFzbjEuREVSSW50ZWdlcjtcbiAgdmFyIHIgPSBhLmFzbjEueDUwOS5EaXNwbGF5VGV4dCwgaSA9IGEuYXNuMS54NTA5Lk5vdGljZVJlZmVyZW5jZTtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSBbXTtcbiAgICB0aGlzLnBhcmFtcy5ub3RpY2VyZWYgIT09IHZvaWQgMCAmJiBzLnB1c2gobmV3IGkodGhpcy5wYXJhbXMubm90aWNlcmVmKSksIHRoaXMucGFyYW1zLmV4cHRleHQgIT09IHZvaWQgMCAmJiBzLnB1c2gobmV3IHIodGhpcy5wYXJhbXMuZXhwdGV4dCkpO1xuICAgIHZhciBuID0gbmV3IHQoeyBhcnJheTogcyB9KTtcbiAgICByZXR1cm4gbi50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5Vc2VyTm90aWNlLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5Ob3RpY2VSZWZlcmVuY2UgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5Lk5vdGljZVJlZmVyZW5jZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYS5hc24xLkRFUlNlcXVlbmNlLCByID0gYS5hc24xLkRFUkludGVnZXIsIGkgPSBhLmFzbjEueDUwOS5EaXNwbGF5VGV4dDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSBbXTtcbiAgICBpZiAodGhpcy5wYXJhbXMub3JnICE9PSB2b2lkIDAgJiYgcy5wdXNoKG5ldyBpKHRoaXMucGFyYW1zLm9yZykpLCB0aGlzLnBhcmFtcy5ub3RpY2VudW0gIT09IHZvaWQgMCkge1xuICAgICAgZm9yICh2YXIgbiA9IFtdLCBoID0gdGhpcy5wYXJhbXMubm90aWNlbnVtLCB1ID0gMDsgdSA8IGgubGVuZ3RoOyB1KyspXG4gICAgICAgIG4ucHVzaChuZXcgcihoW3VdKSk7XG4gICAgICBzLnB1c2gobmV3IHQoeyBhcnJheTogbiB9KSk7XG4gICAgfVxuICAgIGlmIChzLmxlbmd0aCA9PSAwKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicGFyYW1ldGVyIGlzIGVtcHR5XCIpO1xuICAgIHZhciBwID0gbmV3IHQoeyBhcnJheTogcyB9KTtcbiAgICByZXR1cm4gcC50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5Ob3RpY2VSZWZlcmVuY2UsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkRpc3BsYXlUZXh0ID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5EaXNwbGF5VGV4dC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuaFQgPSBcIjBjXCIsIGUgIT09IHZvaWQgMCAmJiAoZS50eXBlID09PSBcImlhNVwiID8gdGhpcy5oVCA9IFwiMTZcIiA6IGUudHlwZSA9PT0gXCJ2aXNcIiA/IHRoaXMuaFQgPSBcIjFhXCIgOiBlLnR5cGUgPT09IFwiYm1wXCIgJiYgKHRoaXMuaFQgPSBcIjFlXCIpKTtcbn07XG5OKGEuYXNuMS54NTA5LkRpc3BsYXlUZXh0LCBhLmFzbjEuREVSQWJzdHJhY3RTdHJpbmcpO1xuYS5hc24xLng1MDkuUG9saWN5TWFwcGluZ3MgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlBvbGljeU1hcHBpbmdzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICByLng1MDk7XG4gIHZhciBpID0gci5BU04xVXRpbC5uZXdPYmplY3Q7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBzID0gdGhpcy5wYXJhbXMsIG4gPSBbXSwgaCA9IDA7IGggPCBzLmFycmF5Lmxlbmd0aDsgaCsrKSB7XG4gICAgICB2YXIgdSA9IHMuYXJyYXlbaF07XG4gICAgICBuLnB1c2goeyBzZXE6IFt7IG9pZDogdVswXSB9LCB7IG9pZDogdVsxXSB9XSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IGkoeyBzZXE6IG4gfSksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjMzXCIsIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LlBvbGljeU1hcHBpbmdzLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuUG9saWN5Q29uc3RyYWludHMgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlBvbGljeUNvbnN0cmFpbnRzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICByLng1MDk7XG4gIHZhciBpID0gci5BU04xVXRpbC5uZXdPYmplY3Q7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcyA9IHRoaXMucGFyYW1zLCBuID0gW107XG4gICAgcmV0dXJuIHMucmVxZXhwICE9IG51bGwgJiYgbi5wdXNoKHsgdGFnOiB7IHRhZ2k6IFwiODBcIiwgb2JqOiB7IGludDogcy5yZXFleHAgfSB9IH0pLCBzLmluaGliaXQgIT0gbnVsbCAmJiBuLnB1c2goeyB0YWc6IHsgdGFnaTogXCI4MVwiLCBvYmo6IHsgaW50OiBzLmluaGliaXQgfSB9IH0pLCB0aGlzLmFzbjFFeHRuVmFsdWUgPSBpKHsgc2VxOiBuIH0pLCB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4zNlwiLCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5Qb2xpY3lDb25zdHJhaW50cywgYS5hc24xLng1MDkuRXh0ZW5zaW9uKTtcbmEuYXNuMS54NTA5LkluaGliaXRBbnlQb2xpY3kgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkluaGliaXRBbnlQb2xpY3kuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjE7XG4gIHIueDUwOTtcbiAgdmFyIGkgPSByLkFTTjFVdGlsLm5ld09iamVjdDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBpKHsgaW50OiB0aGlzLnBhcmFtcy5za2lwIH0pLCB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS41NFwiLCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5JbmhpYml0QW55UG9saWN5LCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuTmFtZUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5OYW1lQ29uc3RyYWludHMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLng1MDksIHMgPSByLkFTTjFVdGlsLm5ld09iamVjdCwgbiA9IGkuR2VuZXJhbFN1YnRyZWU7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IHRoaXMucGFyYW1zLCB1ID0gW107XG4gICAgaWYgKGgucGVybWl0ICE9IG51bGwgJiYgaC5wZXJtaXQubGVuZ3RoICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIHAgPSBbXSwgYyA9IDA7IGMgPCBoLnBlcm1pdC5sZW5ndGg7IGMrKylcbiAgICAgICAgcC5wdXNoKG5ldyBuKGgucGVybWl0W2NdKSk7XG4gICAgICB1LnB1c2goeyB0YWc6IHsgdGFnaTogXCJhMFwiLCBvYmo6IHsgc2VxOiBwIH0gfSB9KTtcbiAgICB9XG4gICAgaWYgKGguZXhjbHVkZSAhPSBudWxsICYmIGguZXhjbHVkZS5sZW5ndGggIT0gbnVsbCkge1xuICAgICAgZm9yICh2YXIgeSA9IFtdLCBjID0gMDsgYyA8IGguZXhjbHVkZS5sZW5ndGg7IGMrKylcbiAgICAgICAgeS5wdXNoKG5ldyBuKGguZXhjbHVkZVtjXSkpO1xuICAgICAgdS5wdXNoKHsgdGFnOiB7IHRhZ2k6IFwiYTFcIiwgb2JqOiB7IHNlcTogeSB9IH0gfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBzKHsgc2VxOiB1IH0pLCB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4zMFwiLCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5OYW1lQ29uc3RyYWludHMsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5HZW5lcmFsU3VidHJlZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuR2VuZXJhbFN1YnRyZWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEuYXNuMSwgciA9IHQueDUwOSwgaSA9IHIuR2VuZXJhbE5hbWUsIHMgPSB0LkFTTjFVdGlsLm5ld09iamVjdDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBuO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSB0aGlzLnBhcmFtcywgaCA9IFtuZXcgaShuKV07XG4gICAgbi5taW4gIT0gbnVsbCAmJiBoLnB1c2goeyB0YWc6IHsgdGFnaTogXCI4MFwiLCBvYmo6IHsgaW50OiBuLm1pbiB9IH0gfSksIG4ubWF4ICE9IG51bGwgJiYgaC5wdXNoKHsgdGFnOiB7IHRhZ2k6IFwiODFcIiwgb2JqOiB7IGludDogbi5tYXggfSB9IH0pO1xuICAgIHZhciB1ID0gcyh7IHNlcTogaCB9KTtcbiAgICByZXR1cm4gdS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLng1MDkuR2VuZXJhbFN1YnRyZWUsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkV4dEtleVVzYWdlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5FeHRLZXlVc2FnZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgdGhpcy5zZXRQdXJwb3NlQXJyYXkgPSBmdW5jdGlvbihpKSB7XG4gICAgdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IHIuREVSU2VxdWVuY2UoKTtcbiAgICBmb3IgKHZhciBzID0gMDsgcyA8IGkubGVuZ3RoOyBzKyspIHtcbiAgICAgIHZhciBuID0gbmV3IHIuREVST2JqZWN0SWRlbnRpZmllcihpW3NdKTtcbiAgICAgIHRoaXMuYXNuMUV4dG5WYWx1ZS5hcHBlbmRBU04xT2JqZWN0KG4pO1xuICAgIH1cbiAgfSwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuMzdcIiwgZSAhPT0gdm9pZCAwICYmIGUuYXJyYXkgIT09IHZvaWQgMCAmJiB0aGlzLnNldFB1cnBvc2VBcnJheShlLmFycmF5KTtcbn07XG5OKGEuYXNuMS54NTA5LkV4dEtleVVzYWdlLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuQXV0aG9yaXR5S2V5SWRlbnRpZmllciA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQXV0aG9yaXR5S2V5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSVGFnZ2VkT2JqZWN0LCBzID0gci54NTA5LkdlbmVyYWxOYW1lcztcbiAgdC5jcnlwdG8uVXRpbC5pc0tleSwgdGhpcy5hc24xS0lEID0gbnVsbCwgdGhpcy5hc24xQ2VydElzc3VlciA9IG51bGwsIHRoaXMuYXNuMUNlcnRTTiA9IG51bGwsIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG4gPSBuZXcgQXJyYXkoKTtcbiAgICB0aGlzLmFzbjFLSUQgJiYgbi5wdXNoKG5ldyBpKHsgZXhwbGljaXQ6ICExLCB0YWc6IFwiODBcIiwgb2JqOiB0aGlzLmFzbjFLSUQgfSkpLCB0aGlzLmFzbjFDZXJ0SXNzdWVyICYmIG4ucHVzaChuZXcgaSh7IGV4cGxpY2l0OiAhMSwgdGFnOiBcImExXCIsIG9iajogbmV3IHMoW3sgZG46IHRoaXMuYXNuMUNlcnRJc3N1ZXIgfV0pIH0pKSwgdGhpcy5hc24xQ2VydFNOICYmIG4ucHVzaChuZXcgaSh7IGV4cGxpY2l0OiAhMSwgdGFnOiBcIjgyXCIsIG9iajogdGhpcy5hc24xQ2VydFNOIH0pKTtcbiAgICB2YXIgaCA9IG5ldyByLkRFUlNlcXVlbmNlKHsgYXJyYXk6IG4gfSk7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IGgsIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLnNldEtJREJ5UGFyYW0gPSBmdW5jdGlvbihuKSB7XG4gICAgaWYgKG4uc3RyICE9PSB2b2lkIDAgfHwgbi5oZXggIT09IHZvaWQgMClcbiAgICAgIHRoaXMuYXNuMUtJRCA9IG5ldyBhLmFzbjEuREVST2N0ZXRTdHJpbmcobik7XG4gICAgZWxzZSBpZiAodHlwZW9mIG4gPT0gXCJvYmplY3RcIiAmJiBhLmNyeXB0by5VdGlsLmlzS2V5KG4pIHx8IHR5cGVvZiBuID09IFwic3RyaW5nXCIgJiYgbi5pbmRleE9mKFwiQkVHSU4gXCIpICE9IC0xKSB7XG4gICAgICB2YXIgaCA9IG47XG4gICAgICB0eXBlb2YgbiA9PSBcInN0cmluZ1wiICYmIChoID0gay5nZXRLZXkobikpO1xuICAgICAgdmFyIHUgPSBrLmdldEtleUlEKGgpO1xuICAgICAgdGhpcy5hc24xS0lEID0gbmV3IGEuYXNuMS5ERVJPY3RldFN0cmluZyh7IGhleDogdSB9KTtcbiAgICB9XG4gIH0sIHRoaXMuc2V0Q2VydElzc3VlckJ5UGFyYW0gPSBmdW5jdGlvbihuKSB7XG4gICAgbi5zdHIgIT09IHZvaWQgMCB8fCBuLmxkYXBzdHIgIT09IHZvaWQgMCB8fCBuLmhleCAhPT0gdm9pZCAwIHx8IG4uY2VydHN1YmplY3QgIT09IHZvaWQgMCB8fCBuLmNlcnRpc3N1ZXIgIT09IHZvaWQgMCA/IHRoaXMuYXNuMUNlcnRJc3N1ZXIgPSBuZXcgYS5hc24xLng1MDkuWDUwME5hbWUobikgOiB0eXBlb2YgbiA9PSBcInN0cmluZ1wiICYmIG4uaW5kZXhPZihcIkJFR0lOIFwiKSAhPSAtMSAmJiBuLmluZGV4T2YoXCJDRVJUSUZJQ0FURVwiKSAhPSAtMSAmJiAodGhpcy5hc24xQ2VydElzc3VlciA9IG5ldyBhLmFzbjEueDUwOS5YNTAwTmFtZSh7IGNlcnRpc3N1ZXI6IG4gfSkpO1xuICB9LCB0aGlzLnNldENlcnRTTkJ5UGFyYW0gPSBmdW5jdGlvbihuKSB7XG4gICAgaWYgKG4uc3RyICE9PSB2b2lkIDAgfHwgbi5iaWdpbnQgIT09IHZvaWQgMCB8fCBuLmhleCAhPT0gdm9pZCAwKVxuICAgICAgdGhpcy5hc24xQ2VydFNOID0gbmV3IGEuYXNuMS5ERVJJbnRlZ2VyKG4pO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBuID09IFwic3RyaW5nXCIgJiYgbi5pbmRleE9mKFwiQkVHSU4gXCIpICE9IC0xICYmIG4uaW5kZXhPZihcIkNFUlRJRklDQVRFXCIpKSB7XG4gICAgICB2YXIgaCA9IG5ldyBMKCk7XG4gICAgICBoLnJlYWRDZXJ0UEVNKG4pO1xuICAgICAgdmFyIHUgPSBoLmdldFNlcmlhbE51bWJlckhleCgpO1xuICAgICAgdGhpcy5hc24xQ2VydFNOID0gbmV3IGEuYXNuMS5ERVJJbnRlZ2VyKHsgaGV4OiB1IH0pO1xuICAgIH1cbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4zNVwiLCBlICE9PSB2b2lkIDAgJiYgKGUua2lkICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRLSURCeVBhcmFtKGUua2lkKSwgZS5pc3N1ZXIgIT09IHZvaWQgMCAmJiB0aGlzLnNldENlcnRJc3N1ZXJCeVBhcmFtKGUuaXNzdWVyKSwgZS5zbiAhPT0gdm9pZCAwICYmIHRoaXMuc2V0Q2VydFNOQnlQYXJhbShlLnNuKSwgZS5pc3N1ZXJzbiAhPT0gdm9pZCAwICYmIHR5cGVvZiBlLmlzc3VlcnNuID09IFwic3RyaW5nXCIgJiYgZS5pc3N1ZXJzbi5pbmRleE9mKFwiQkVHSU4gXCIpICE9IC0xICYmIGUuaXNzdWVyc24uaW5kZXhPZihcIkNFUlRJRklDQVRFXCIpICYmICh0aGlzLnNldENlcnRTTkJ5UGFyYW0oZS5pc3N1ZXJzbiksIHRoaXMuc2V0Q2VydElzc3VlckJ5UGFyYW0oZS5pc3N1ZXJzbikpKTtcbn07XG5OKGEuYXNuMS54NTA5LkF1dGhvcml0eUtleUlkZW50aWZpZXIsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5TdWJqZWN0S2V5SWRlbnRpZmllciA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuU3ViamVjdEtleUlkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUk9jdGV0U3RyaW5nO1xuICB0aGlzLmFzbjFLSUQgPSBudWxsLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSB0aGlzLmFzbjFLSUQsIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLnNldEtJREJ5UGFyYW0gPSBmdW5jdGlvbihzKSB7XG4gICAgaWYgKHMuc3RyICE9PSB2b2lkIDAgfHwgcy5oZXggIT09IHZvaWQgMClcbiAgICAgIHRoaXMuYXNuMUtJRCA9IG5ldyBpKHMpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBzID09IFwib2JqZWN0XCIgJiYgYS5jcnlwdG8uVXRpbC5pc0tleShzKSB8fCB0eXBlb2YgcyA9PSBcInN0cmluZ1wiICYmIHMuaW5kZXhPZihcIkJFR0lOXCIpICE9IC0xKSB7XG4gICAgICB2YXIgbiA9IHM7XG4gICAgICB0eXBlb2YgcyA9PSBcInN0cmluZ1wiICYmIChuID0gay5nZXRLZXkocykpO1xuICAgICAgdmFyIGggPSBrLmdldEtleUlEKG4pO1xuICAgICAgdGhpcy5hc24xS0lEID0gbmV3IGEuYXNuMS5ERVJPY3RldFN0cmluZyh7IGhleDogaCB9KTtcbiAgICB9XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuMTRcIiwgZSAhPT0gdm9pZCAwICYmIGUua2lkICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRLSURCeVBhcmFtKGUua2lkKTtcbn07XG5OKGEuYXNuMS54NTA5LlN1YmplY3RLZXlJZGVudGlmaWVyLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuQXV0aG9yaXR5SW5mb0FjY2VzcyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQXV0aG9yaXR5SW5mb0FjY2Vzcy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuc2V0QWNjZXNzRGVzY3JpcHRpb25BcnJheSA9IGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKHZhciByID0gbmV3IEFycmF5KCksIGkgPSBhLCBzID0gaS5hc24xLCBuID0gcy5ERVJTZXF1ZW5jZSwgaCA9IHMuREVST2JqZWN0SWRlbnRpZmllciwgdSA9IHMueDUwOS5HZW5lcmFsTmFtZSwgcCA9IDA7IHAgPCB0Lmxlbmd0aDsgcCsrKSB7XG4gICAgICB2YXIgYywgeSA9IHRbcF07XG4gICAgICBpZiAoeS5vY3NwICE9PSB2b2lkIDApXG4gICAgICAgIGMgPSBuZXcgbih7IGFycmF5OiBbbmV3IGgoeyBvaWQ6IFwiMS4zLjYuMS41LjUuNy40OC4xXCIgfSksIG5ldyB1KHsgdXJpOiB5Lm9jc3AgfSldIH0pO1xuICAgICAgZWxzZSBpZiAoeS5jYWlzc3VlciAhPT0gdm9pZCAwKVxuICAgICAgICBjID0gbmV3IG4oeyBhcnJheTogW25ldyBoKHsgb2lkOiBcIjEuMy42LjEuNS41LjcuNDguMlwiIH0pLCBuZXcgdSh7IHVyaTogeS5jYWlzc3VlciB9KV0gfSk7XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInVua25vd24gQWNjZXNzTWV0aG9kIHBhcmFtZXRlcjogXCIgKyBKU09OLnN0cmluZ2lmeSh5KSk7XG4gICAgICByLnB1c2goYyk7XG4gICAgfVxuICAgIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IG5ldyBuKHsgYXJyYXk6IHIgfSk7XG4gIH0sIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMS4zLjYuMS41LjUuNy4xLjFcIiwgZSAhPT0gdm9pZCAwICYmIGUuYXJyYXkgIT09IHZvaWQgMCAmJiB0aGlzLnNldEFjY2Vzc0Rlc2NyaXB0aW9uQXJyYXkoZS5hcnJheSk7XG59O1xuTihhLmFzbjEueDUwOS5BdXRob3JpdHlJbmZvQWNjZXNzLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuU3ViamVjdEFsdE5hbWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlN1YmplY3RBbHROYW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKSwgdGhpcy5zZXROYW1lQXJyYXkgPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IGEuYXNuMS54NTA5LkdlbmVyYWxOYW1lcyh0KTtcbiAgfSwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuMTdcIiwgZSAhPT0gdm9pZCAwICYmIGUuYXJyYXkgIT09IHZvaWQgMCAmJiB0aGlzLnNldE5hbWVBcnJheShlLmFycmF5KTtcbn07XG5OKGEuYXNuMS54NTA5LlN1YmplY3RBbHROYW1lLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuSXNzdWVyQWx0TmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuSXNzdWVyQWx0TmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMuc2V0TmFtZUFycmF5ID0gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IG5ldyBhLmFzbjEueDUwOS5HZW5lcmFsTmFtZXModCk7XG4gIH0sIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjE4XCIsIGUgIT09IHZvaWQgMCAmJiBlLmFycmF5ICE9PSB2b2lkIDAgJiYgdGhpcy5zZXROYW1lQXJyYXkoZS5hcnJheSk7XG59O1xuTihhLmFzbjEueDUwOS5Jc3N1ZXJBbHROYW1lLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuU3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXMgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLmFzbjEsIHIgPSB0LkRFUlNlcXVlbmNlLCBpID0gdC5BU04xVXRpbC5uZXdPYmplY3QsIHMgPSB0Lng1MDkuT0lELm5hbWUyb2lkO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgbiA9IFtdLCBoID0gMDsgaCA8IHRoaXMucGFyYW1zLmFycmF5Lmxlbmd0aDsgaCsrKSB7XG4gICAgICB2YXIgdSA9IHRoaXMucGFyYW1zLmFycmF5W2hdO1xuICAgICAgaWYgKHUuYXR0ciAhPSBudWxsICYmIHUuYXJyYXkgIT0gbnVsbCkge1xuICAgICAgICB2YXIgcCA9IHsgc2VxOiBbeyBvaWQ6IHUuYXR0ciB9LCB7IHNldDogdS5hcnJheSB9XSB9O1xuICAgICAgICBuLnB1c2goaShwKSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIGMgPSB7IHNlcTogW3sgb2lkOiBcIjEuMi4zLjRcIiB9LCB7IHNldDogW3sgdXRmOHN0cjogXCJERVwiIH1dIH1dIH07XG4gICAgICBpZiAodS5hdHRyID09IFwiZGF0ZU9mQmlydGhcIilcbiAgICAgICAgYy5zZXFbMF0ub2lkID0gcyh1LmF0dHIpLCBjLnNlcVsxXS5zZXRbMF0gPSB7IGdlbnRpbWU6IHUuc3RyIH07XG4gICAgICBlbHNlIGlmICh1LmF0dHIgPT0gXCJwbGFjZU9mQmlydGhcIilcbiAgICAgICAgYy5zZXFbMF0ub2lkID0gcyh1LmF0dHIpLCBjLnNlcVsxXS5zZXRbMF0gPSB7IHV0ZjhzdHI6IHUuc3RyIH07XG4gICAgICBlbHNlIGlmICh1LmF0dHIgPT0gXCJnZW5kZXJcIilcbiAgICAgICAgYy5zZXFbMF0ub2lkID0gcyh1LmF0dHIpLCBjLnNlcVsxXS5zZXRbMF0gPSB7IHBybnN0cjogdS5zdHIgfTtcbiAgICAgIGVsc2UgaWYgKHUuYXR0ciA9PSBcImNvdW50cnlPZkNpdGl6ZW5zaGlwXCIpXG4gICAgICAgIGMuc2VxWzBdLm9pZCA9IHModS5hdHRyKSwgYy5zZXFbMV0uc2V0WzBdID0geyBwcm5zdHI6IHUuc3RyIH07XG4gICAgICBlbHNlIGlmICh1LmF0dHIgPT0gXCJjb3VudHJ5T2ZSZXNpZGVuY2VcIilcbiAgICAgICAgYy5zZXFbMF0ub2lkID0gcyh1LmF0dHIpLCBjLnNlcVsxXS5zZXRbMF0gPSB7IHBybnN0cjogdS5zdHIgfTtcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgYXR0cmlidXRlOiBcIiArIHUuYXR0cik7XG4gICAgICBuLnB1c2gobmV3IGkoYykpO1xuICAgIH1cbiAgICB2YXIgeSA9IG5ldyByKHsgYXJyYXk6IG4gfSk7XG4gICAgcmV0dXJuIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IHksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMi41LjI5LjlcIiwgZSAhPT0gdm9pZCAwICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuU3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXMsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5Qcml2YXRlRXh0ZW5zaW9uID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5Qcml2YXRlRXh0ZW5zaW9uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBlKTtcbiAgdmFyIHQgPSBhLCByID0gdC5sYW5nLlN0cmluZy5pc0hleCwgaSA9IHQuYXNuMSwgcyA9IGkueDUwOS5PSUQubmFtZTJvaWQsIG4gPSBpLkFTTjFVdGlsLm5ld09iamVjdDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihoKSB7XG4gICAgdGhpcy5vaWQgPSBzKGguZXh0bmFtZSksIHRoaXMucGFyYW1zID0gaDtcbiAgfSwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5wYXJhbXMuZXh0bmFtZSA9PSBudWxsIHx8IHRoaXMucGFyYW1zLmV4dG4gPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImV4dG5hbWUgb3IgZXh0bmhleCBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIHZhciBoID0gdGhpcy5wYXJhbXMuZXh0bjtcbiAgICBpZiAodHlwZW9mIGggPT0gXCJzdHJpbmdcIiAmJiByKGgpKVxuICAgICAgcmV0dXJuIGg7XG4gICAgaWYgKHR5cGVvZiBoID09IFwib2JqZWN0XCIpXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gbihoKS50b2hleCgpO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgZXh0biB2YWx1ZVwiKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS54NTA5LlByaXZhdGVFeHRlbnNpb24sIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5DUkwgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkNSTC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSU2VxdWVuY2UsIHMgPSByLkRFUkJpdFN0cmluZywgbiA9IHIueDUwOSwgaCA9IG4uQWxnb3JpdGhtSWRlbnRpZmllciwgdSA9IG4uVEJTQ2VydExpc3Q7XG4gIHRoaXMucGFyYW1zID0gdm9pZCAwLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihwKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBwO1xuICB9LCB0aGlzLnNpZ24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcCA9IG5ldyB1KHRoaXMucGFyYW1zKS50b2hleCgpLCBjID0gbmV3IGEuY3J5cHRvLlNpZ25hdHVyZSh7IGFsZzogdGhpcy5wYXJhbXMuc2lnYWxnIH0pO1xuICAgIGMuaW5pdCh0aGlzLnBhcmFtcy5jYWtleSksIGMudXBkYXRlSGV4KHApO1xuICAgIHZhciB5ID0gYy5zaWduKCk7XG4gICAgdGhpcy5wYXJhbXMuc2lnaGV4ID0geTtcbiAgfSwgdGhpcy5nZXRQRU0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGUodGhpcy50b2hleCgpLCBcIlg1MDkgQ1JMXCIpO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHAgPSB0aGlzLnBhcmFtcztcbiAgICBpZiAocC50YnNvYmogPT0gbnVsbCAmJiAocC50YnNvYmogPSBuZXcgdShwKSksIHAuc2lnaGV4ID09IG51bGwgJiYgcC5jYWtleSAhPSBudWxsICYmIHRoaXMuc2lnbigpLCBwLnNpZ2hleCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwic2lnaGV4IG9yIGNha2V5IHBhcmFtZXRlciBub3QgZGVmaW5lZFwiKTtcbiAgICB2YXIgYyA9IFtdO1xuICAgIGMucHVzaChwLnRic29iaiksIGMucHVzaChuZXcgaCh7IG5hbWU6IHAuc2lnYWxnIH0pKSwgYy5wdXNoKG5ldyBzKHsgaGV4OiBcIjAwXCIgKyBwLnNpZ2hleCB9KSk7XG4gICAgdmFyIHkgPSBuZXcgaSh7IGFycmF5OiBjIH0pO1xuICAgIHJldHVybiB5LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LkNSTCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuVEJTQ2VydExpc3QgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlRCU0NlcnRMaXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJJbnRlZ2VyLCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IHIuREVSVGFnZ2VkT2JqZWN0O1xuICByLkRFUk9iamVjdElkZW50aWZpZXI7XG4gIHZhciBoID0gci54NTA5LCB1ID0gaC5BbGdvcml0aG1JZGVudGlmaWVyLCBwID0gaC5UaW1lLCBjID0gaC5FeHRlbnNpb25zLCB5ID0gaC5YNTAwTmFtZTtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy5wYXJhbXMgPSB2O1xuICB9LCB0aGlzLmdldFJldkNlcnRTZXF1ZW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHYgPSBbXSwgbyA9IHRoaXMucGFyYW1zLnJldmNlcnQsIGwgPSAwOyBsIDwgby5sZW5ndGg7IGwrKykge1xuICAgICAgdmFyIGYgPSBbbmV3IGkob1tsXS5zbiksIG5ldyBwKG9bbF0uZGF0ZSldO1xuICAgICAgb1tsXS5leHQgIT0gbnVsbCAmJiBmLnB1c2gobmV3IGMob1tsXS5leHQpKSwgdi5wdXNoKG5ldyBzKHsgYXJyYXk6IGYgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IHMoeyBhcnJheTogdiB9KTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gW10sIG8gPSB0aGlzLnBhcmFtcztcbiAgICBpZiAoby52ZXJzaW9uICE9IG51bGwpIHtcbiAgICAgIHZhciBsID0gby52ZXJzaW9uIC0gMSwgZiA9IG5ldyBpKHsgaW50OiBsIH0pO1xuICAgICAgdi5wdXNoKGYpO1xuICAgIH1cbiAgICBpZiAodi5wdXNoKG5ldyB1KHsgbmFtZTogby5zaWdhbGcgfSkpLCB2LnB1c2gobmV3IHkoby5pc3N1ZXIpKSwgdi5wdXNoKG5ldyBwKG8udGhpc3VwZGF0ZSkpLCBvLm5leHR1cGRhdGUgIT0gbnVsbCAmJiB2LnB1c2gobmV3IHAoby5uZXh0dXBkYXRlKSksIG8ucmV2Y2VydCAhPSBudWxsICYmIHYucHVzaCh0aGlzLmdldFJldkNlcnRTZXF1ZW5jZSgpKSwgby5leHQgIT0gbnVsbCkge1xuICAgICAgdmFyIGQgPSBuZXcgYyhvLmV4dCk7XG4gICAgICB2LnB1c2gobmV3IG4oeyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICEwLCBvYmo6IGQgfSkpO1xuICAgIH1cbiAgICB2YXIgZyA9IG5ldyBzKHsgYXJyYXk6IHYgfSk7XG4gICAgcmV0dXJuIGcudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS54NTA5LlRCU0NlcnRMaXN0LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5DUkxFbnRyeSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQ1JMRW50cnkuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjE7XG4gIHRoaXMuc2V0Q2VydFNlcmlhbCA9IGZ1bmN0aW9uKGkpIHtcbiAgICB0aGlzLnNuID0gbmV3IHIuREVSSW50ZWdlcihpKTtcbiAgfSwgdGhpcy5zZXRSZXZvY2F0aW9uRGF0ZSA9IGZ1bmN0aW9uKGkpIHtcbiAgICB0aGlzLnRpbWUgPSBuZXcgci54NTA5LlRpbWUoaSk7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IG5ldyByLkRFUlNlcXVlbmNlKHsgYXJyYXk6IFt0aGlzLnNuLCB0aGlzLnRpbWVdIH0pO1xuICAgIHJldHVybiB0aGlzLlRMViA9IGkudG9oZXgoKSwgdGhpcy5UTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiAoZS50aW1lICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRSZXZvY2F0aW9uRGF0ZShlLnRpbWUpLCBlLnNuICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRDZXJ0U2VyaWFsKGUuc24pKTtcbn07XG5OKGEuYXNuMS54NTA5LkNSTEVudHJ5LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5DUkxOdW1iZXIgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkNSTE51bWJlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMucGFyYW1zID0gdm9pZCAwLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBuZXcgYS5hc24xLkRFUkludGVnZXIodGhpcy5wYXJhbXMubnVtKSwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIyLjUuMjkuMjBcIiwgZSAhPSBudWxsICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuQ1JMTnVtYmVyLCBhLmFzbjEueDUwOS5FeHRlbnNpb24pO1xuYS5hc24xLng1MDkuQ1JMUmVhc29uID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5DUkxSZWFzb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLnBhcmFtcyA9IHZvaWQgMCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IGEuYXNuMS5ERVJFbnVtZXJhdGVkKHRoaXMucGFyYW1zLmNvZGUpLCB0aGlzLmFzbjFFeHRuVmFsdWUudG9oZXgoKTtcbiAgfSwgdGhpcy5vaWQgPSBcIjIuNS4yOS4yMVwiLCBlICE9IG51bGwgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5DUkxSZWFzb24sIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5PQ1NQTm9uY2UgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5Lk9DU1BOb25jZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZSksIHRoaXMucGFyYW1zID0gdm9pZCAwLCB0aGlzLmdldEV4dG5WYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFzbjFFeHRuVmFsdWUgPSBuZXcgYS5hc24xLkRFUk9jdGV0U3RyaW5nKHRoaXMucGFyYW1zKSwgdGhpcy5hc24xRXh0blZhbHVlLnRvaGV4KCk7XG4gIH0sIHRoaXMub2lkID0gXCIxLjMuNi4xLjUuNS43LjQ4LjEuMlwiLCBlICE9IG51bGwgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEueDUwOS5PQ1NQTm9uY2UsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5PQ1NQTm9DaGVjayA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuT0NTUE5vQ2hlY2suc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpLCB0aGlzLnBhcmFtcyA9IHZvaWQgMCwgdGhpcy5nZXRFeHRuVmFsdWVIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hc24xRXh0blZhbHVlID0gbmV3IGEuYXNuMS5ERVJOdWxsKCksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMS4zLjYuMS41LjUuNy40OC4xLjVcIiwgZSAhPSBudWxsICYmICh0aGlzLnBhcmFtcyA9IGUpO1xufTtcbk4oYS5hc24xLng1MDkuT0NTUE5vQ2hlY2ssIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5BZG9iZVRpbWVTdGFtcCA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuQWRvYmVUaW1lU3RhbXAuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGUpO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUkludGVnZXIsIHMgPSByLkRFUkJvb2xlYW4sIG4gPSByLkRFUlNlcXVlbmNlLCBoID0gci54NTA5LkdlbmVyYWxOYW1lO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0RXh0blZhbHVlSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcywgcCA9IFtuZXcgaSgxKV07XG4gICAgcmV0dXJuIHAucHVzaChuZXcgaCh7IHVyaTogdS51cmkgfSkpLCB1LnJlcWF1dGggIT0gbnVsbCAmJiBwLnB1c2gobmV3IHModS5yZXFhdXRoKSksIHRoaXMuYXNuMUV4dG5WYWx1ZSA9IG5ldyBuKHsgYXJyYXk6IHAgfSksIHRoaXMuYXNuMUV4dG5WYWx1ZS50b2hleCgpO1xuICB9LCB0aGlzLm9pZCA9IFwiMS4yLjg0MC4xMTM1ODMuMS4xLjkuMVwiLCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLng1MDkuQWRvYmVUaW1lU3RhbXAsIGEuYXNuMS54NTA5LkV4dGVuc2lvbik7XG5hLmFzbjEueDUwOS5YNTAwTmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuWDUwME5hbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmFzbjFBcnJheSA9IFtdLCB0aGlzLnBhcmFtQXJyYXkgPSBbXSwgdGhpcy5zUnVsZSA9IFwidXRmOFwiO1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLng1MDksIHMgPSBpLlJETjtcbiAgdGhpcy5zZXRCeVN0cmluZyA9IGZ1bmN0aW9uKG4sIGgpIHtcbiAgICBoICE9PSB2b2lkIDAgJiYgKHRoaXMuc1J1bGUgPSBoKTtcbiAgICB2YXIgdSA9IG4uc3BsaXQoXCIvXCIpO1xuICAgIHUuc2hpZnQoKTtcbiAgICBmb3IgKHZhciBwID0gW10sIGMgPSAwOyBjIDwgdS5sZW5ndGg7IGMrKylcbiAgICAgIGlmICh1W2NdLm1hdGNoKC9eW149XSs9LiskLykpXG4gICAgICAgIHAucHVzaCh1W2NdKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICB2YXIgeSA9IHAubGVuZ3RoIC0gMTtcbiAgICAgICAgcFt5XSA9IHBbeV0gKyBcIi9cIiArIHVbY107XG4gICAgICB9XG4gICAgZm9yICh2YXIgYyA9IDA7IGMgPCBwLmxlbmd0aDsgYysrKVxuICAgICAgdGhpcy5hc24xQXJyYXkucHVzaChuZXcgcyh7IHN0cjogcFtjXSwgcnVsZTogdGhpcy5zUnVsZSB9KSk7XG4gIH0sIHRoaXMuc2V0QnlMZGFwU3RyaW5nID0gZnVuY3Rpb24obiwgaCkge1xuICAgIGggIT09IHZvaWQgMCAmJiAodGhpcy5zUnVsZSA9IGgpO1xuICAgIHZhciB1ID0gaS5YNTAwTmFtZS5sZGFwVG9Db21wYXQobik7XG4gICAgdGhpcy5zZXRCeVN0cmluZyh1LCBoKTtcbiAgfSwgdGhpcy5zZXRCeU9iamVjdCA9IGZ1bmN0aW9uKG4sIGgpIHtcbiAgICBoICE9PSB2b2lkIDAgJiYgKHRoaXMuc1J1bGUgPSBoKTtcbiAgICBmb3IgKHZhciB1IGluIG4pXG4gICAgICBpZiAobi5oYXNPd25Qcm9wZXJ0eSh1KSkge1xuICAgICAgICB2YXIgcCA9IG5ldyBzKHsgc3RyOiB1ICsgXCI9XCIgKyBuW3VdLCBydWxlOiB0aGlzLnNSdWxlIH0pO1xuICAgICAgICB0aGlzLmFzbjFBcnJheSA/IHRoaXMuYXNuMUFycmF5LnB1c2gocCkgOiB0aGlzLmFzbjFBcnJheSA9IFtwXTtcbiAgICAgIH1cbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24obikge1xuICAgIGlmIChuLnJ1bGUgIT09IHZvaWQgMCAmJiAodGhpcy5zUnVsZSA9IG4ucnVsZSksIG4uYXJyYXkgIT09IHZvaWQgMClcbiAgICAgIHRoaXMucGFyYW1BcnJheSA9IG4uYXJyYXk7XG4gICAgZWxzZSBpZiAobi5zdHIgIT09IHZvaWQgMClcbiAgICAgIHRoaXMuc2V0QnlTdHJpbmcobi5zdHIpO1xuICAgIGVsc2UgaWYgKG4ubGRhcHN0ciAhPT0gdm9pZCAwKVxuICAgICAgdGhpcy5zZXRCeUxkYXBTdHJpbmcobi5sZGFwc3RyKTtcbiAgICBlbHNlIGlmIChuLmhleCAhPT0gdm9pZCAwKVxuICAgICAgdGhpcy5oVExWID0gbi5oZXg7XG4gICAgZWxzZSBpZiAobi5jZXJ0aXNzdWVyICE9PSB2b2lkIDApIHtcbiAgICAgIHZhciBoID0gbmV3IEwoKTtcbiAgICAgIGgucmVhZENlcnRQRU0obi5jZXJ0aXNzdWVyKSwgdGhpcy5oVExWID0gaC5nZXRJc3N1ZXJIZXgoKTtcbiAgICB9IGVsc2UgaWYgKG4uY2VydHN1YmplY3QgIT09IHZvaWQgMCkge1xuICAgICAgdmFyIGggPSBuZXcgTCgpO1xuICAgICAgaC5yZWFkQ2VydFBFTShuLmNlcnRzdWJqZWN0KSwgdGhpcy5oVExWID0gaC5nZXRTdWJqZWN0SGV4KCk7XG4gICAgfSBlbHNlXG4gICAgICB0eXBlb2YgbiA9PSBcIm9iamVjdFwiICYmIG4uY2VydHN1YmplY3QgPT09IHZvaWQgMCAmJiBuLmNlcnRpc3N1ZXIgPT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5T2JqZWN0KG4pO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmhUTFYgPT0gXCJzdHJpbmdcIilcbiAgICAgIHJldHVybiB0aGlzLmhUTFY7XG4gICAgaWYgKHRoaXMuYXNuMUFycmF5Lmxlbmd0aCA9PSAwICYmIHRoaXMucGFyYW1BcnJheS5sZW5ndGggPiAwKVxuICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0aGlzLnBhcmFtQXJyYXkubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgdmFyIGggPSB7IGFycmF5OiB0aGlzLnBhcmFtQXJyYXlbbl0gfTtcbiAgICAgICAgdGhpcy5zUnVsZSAhPSBcInV0ZjhcIiAmJiAoaC5ydWxlID0gdGhpcy5zUnVsZSk7XG4gICAgICAgIHZhciB1ID0gbmV3IHMoaCk7XG4gICAgICAgIHRoaXMuYXNuMUFycmF5LnB1c2godSk7XG4gICAgICB9XG4gICAgdmFyIHAgPSBuZXcgci5ERVJTZXF1ZW5jZSh7IGFycmF5OiB0aGlzLmFzbjFBcnJheSB9KTtcbiAgICByZXR1cm4gdGhpcy5oVExWID0gcC50b2hleCgpLCB0aGlzLmhUTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEueDUwOS5YNTAwTmFtZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuWDUwME5hbWUuY29tcGF0VG9MREFQID0gZnVuY3Rpb24oZSkge1xuICBpZiAoZS5zdWJzdHIoMCwgMSkgIT09IFwiL1wiKVxuICAgIHRocm93IFwibWFsZm9ybWVkIGlucHV0XCI7XG4gIGUgPSBlLnN1YnN0cigxKTtcbiAgdmFyIHQgPSBlLnNwbGl0KFwiL1wiKTtcbiAgcmV0dXJuIHQucmV2ZXJzZSgpLCB0ID0gdC5tYXAoZnVuY3Rpb24ocikge1xuICAgIHJldHVybiByLnJlcGxhY2UoLywvLCBcIlxcXFwsXCIpO1xuICB9KSwgdC5qb2luKFwiLFwiKTtcbn07XG5hLmFzbjEueDUwOS5YNTAwTmFtZS5vbmVsaW5lVG9MREFQID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gYS5hc24xLng1MDkuWDUwME5hbWUuY29tcGF0VG9MREFQKGUpO1xufTtcbmEuYXNuMS54NTA5Llg1MDBOYW1lLmxkYXBUb0NvbXBhdCA9IGZ1bmN0aW9uKGUpIHtcbiAgZm9yICh2YXIgdCA9IGUuc3BsaXQoXCIsXCIpLCByID0gITEsIGkgPSBbXSwgcyA9IDA7IHQubGVuZ3RoID4gMDsgcysrKSB7XG4gICAgdmFyIG4gPSB0LnNoaWZ0KCk7XG4gICAgaWYgKHIgPT09ICEwKSB7XG4gICAgICB2YXIgaCA9IGkucG9wKCksIHUgPSAoaCArIFwiLFwiICsgbikucmVwbGFjZSgvXFxcXCwvZywgXCIsXCIpO1xuICAgICAgaS5wdXNoKHUpLCByID0gITE7XG4gICAgfSBlbHNlXG4gICAgICBpLnB1c2gobik7XG4gICAgbi5zdWJzdHIoLTEsIDEpID09PSBcIlxcXFxcIiAmJiAociA9ICEwKTtcbiAgfVxuICByZXR1cm4gaSA9IGkubWFwKGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gcC5yZXBsYWNlKFwiL1wiLCBcIlxcXFwvXCIpO1xuICB9KSwgaS5yZXZlcnNlKCksIFwiL1wiICsgaS5qb2luKFwiL1wiKTtcbn07XG5hLmFzbjEueDUwOS5YNTAwTmFtZS5sZGFwVG9PbmVsaW5lID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gYS5hc24xLng1MDkuWDUwME5hbWUubGRhcFRvQ29tcGF0KGUpO1xufTtcbmEuYXNuMS54NTA5LlJETiA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuUkROLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5hc24xQXJyYXkgPSBbXSwgdGhpcy5wYXJhbUFycmF5ID0gW10sIHRoaXMuc1J1bGUgPSBcInV0ZjhcIjtcbiAgdmFyIHQgPSBhLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWU7XG4gIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHIpIHtcbiAgICByLnJ1bGUgIT09IHZvaWQgMCAmJiAodGhpcy5zUnVsZSA9IHIucnVsZSksIHIuc3RyICE9PSB2b2lkIDAgJiYgdGhpcy5hZGRCeU11bHRpVmFsdWVkU3RyaW5nKHIuc3RyKSwgci5hcnJheSAhPT0gdm9pZCAwICYmICh0aGlzLnBhcmFtQXJyYXkgPSByLmFycmF5KTtcbiAgfSwgdGhpcy5hZGRCeVN0cmluZyA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aGlzLmFzbjFBcnJheS5wdXNoKG5ldyBhLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUoeyBzdHI6IHIsIHJ1bGU6IHRoaXMuc1J1bGUgfSkpO1xuICB9LCB0aGlzLmFkZEJ5TXVsdGlWYWx1ZWRTdHJpbmcgPSBmdW5jdGlvbihyKSB7XG4gICAgZm9yICh2YXIgaSA9IGEuYXNuMS54NTA5LlJETi5wYXJzZVN0cmluZyhyKSwgcyA9IDA7IHMgPCBpLmxlbmd0aDsgcysrKVxuICAgICAgdGhpcy5hZGRCeVN0cmluZyhpW3NdKTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmFzbjFBcnJheS5sZW5ndGggPT0gMCAmJiB0aGlzLnBhcmFtQXJyYXkubGVuZ3RoID4gMClcbiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdGhpcy5wYXJhbUFycmF5Lmxlbmd0aDsgcisrKSB7XG4gICAgICAgIHZhciBpID0gdGhpcy5wYXJhbUFycmF5W3JdO1xuICAgICAgICBpLnJ1bGUgIT09IHZvaWQgMCAmJiB0aGlzLnNSdWxlICE9IFwidXRmOFwiICYmIChpLnJ1bGUgPSB0aGlzLnNSdWxlKTtcbiAgICAgICAgdmFyIHMgPSBuZXcgdChpKTtcbiAgICAgICAgdGhpcy5hc24xQXJyYXkucHVzaChzKTtcbiAgICAgIH1cbiAgICB2YXIgbiA9IG5ldyBhLmFzbjEuREVSU2V0KHsgYXJyYXk6IHRoaXMuYXNuMUFycmF5IH0pO1xuICAgIHJldHVybiB0aGlzLlRMViA9IG4udG9oZXgoKSwgdGhpcy5UTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEueDUwOS5SRE4sIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LlJETi5wYXJzZVN0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgZm9yICh2YXIgdCA9IGUuc3BsaXQoL1xcKy8pLCByID0gITEsIGkgPSBbXSwgcyA9IDA7IHQubGVuZ3RoID4gMDsgcysrKSB7XG4gICAgdmFyIG4gPSB0LnNoaWZ0KCk7XG4gICAgaWYgKHIgPT09ICEwKSB7XG4gICAgICB2YXIgaCA9IGkucG9wKCksIHUgPSAoaCArIFwiK1wiICsgbikucmVwbGFjZSgvXFxcXFxcKy9nLCBcIitcIik7XG4gICAgICBpLnB1c2godSksIHIgPSAhMTtcbiAgICB9IGVsc2VcbiAgICAgIGkucHVzaChuKTtcbiAgICBuLnN1YnN0cigtMSwgMSkgPT09IFwiXFxcXFwiICYmIChyID0gITApO1xuICB9XG4gIGZvciAodmFyIHAgPSAhMSwgYyA9IFtdLCBzID0gMDsgaS5sZW5ndGggPiAwOyBzKyspIHtcbiAgICB2YXIgbiA9IGkuc2hpZnQoKTtcbiAgICBpZiAocCA9PT0gITApIHtcbiAgICAgIHZhciB5ID0gYy5wb3AoKTtcbiAgICAgIGlmIChuLm1hdGNoKC9cIiQvKSkge1xuICAgICAgICB2YXIgdSA9ICh5ICsgXCIrXCIgKyBuKS5yZXBsYWNlKC9eKFtePV0rKT1cIiguKilcIiQvLCBcIiQxPSQyXCIpO1xuICAgICAgICBjLnB1c2godSksIHAgPSAhMTtcbiAgICAgIH0gZWxzZVxuICAgICAgICBjLnB1c2goeSArIFwiK1wiICsgbik7XG4gICAgfSBlbHNlXG4gICAgICBjLnB1c2gobik7XG4gICAgbi5tYXRjaCgvXltePV0rPVwiLykgJiYgKHAgPSAhMCk7XG4gIH1cbiAgcmV0dXJuIGM7XG59O1xuYS5hc24xLng1MDkuQXR0cmlidXRlVHlwZUFuZFZhbHVlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5BdHRyaWJ1dGVUeXBlQW5kVmFsdWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnNSdWxlID0gXCJ1dGY4XCIsIHRoaXMuc1R5cGUgPSBudWxsLCB0aGlzLnNWYWx1ZSA9IG51bGwsIHRoaXMuZHNUeXBlID0gbnVsbDtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJTZXF1ZW5jZSwgcyA9IHIuREVSVVRGOFN0cmluZywgbiA9IHIuREVSUHJpbnRhYmxlU3RyaW5nLCBoID0gci5ERVJUZWxldGV4U3RyaW5nLCB1ID0gci5ERVJJQTVTdHJpbmcsIHAgPSByLkRFUlZpc2libGVTdHJpbmcsIGMgPSByLkRFUkJNUFN0cmluZywgeSA9IHQubGFuZy5TdHJpbmcuaXNNYWlsLCB2ID0gdC5sYW5nLlN0cmluZy5pc1ByaW50YWJsZTtcbiAgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24obykge1xuICAgIGlmIChvLnJ1bGUgIT09IHZvaWQgMCAmJiAodGhpcy5zUnVsZSA9IG8ucnVsZSksIG8uZHMgIT09IHZvaWQgMCAmJiAodGhpcy5kc1R5cGUgPSBvLmRzKSwgby52YWx1ZSA9PT0gdm9pZCAwICYmIG8uc3RyICE9PSB2b2lkIDApIHtcbiAgICAgIHZhciBsID0gby5zdHIsIGYgPSBsLm1hdGNoKC9eKFtePV0rKT0oLispJC8pO1xuICAgICAgaWYgKGYpXG4gICAgICAgIHRoaXMuc1R5cGUgPSBmWzFdLCB0aGlzLnNWYWx1ZSA9IGZbMl07XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBhdHRyVHlwZUFuZFZhbHVlU3RyOiBcIiArIGF0dHJUeXBlQW5kVmFsdWVTdHIpO1xuICAgIH0gZWxzZVxuICAgICAgdGhpcy5zVHlwZSA9IG8udHlwZSwgdGhpcy5zVmFsdWUgPSBvLnZhbHVlO1xuICB9LCB0aGlzLnNldEJ5U3RyaW5nID0gZnVuY3Rpb24obywgbCkge1xuICAgIGwgIT09IHZvaWQgMCAmJiAodGhpcy5zUnVsZSA9IGwpO1xuICAgIHZhciBmID0gby5tYXRjaCgvXihbXj1dKyk9KC4rKSQvKTtcbiAgICBpZiAoZilcbiAgICAgIHRoaXMuc2V0QnlBdHRyVHlwZUFuZFZhbHVlU3RyKGZbMV0sIGZbMl0pO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBhdHRyVHlwZUFuZFZhbHVlU3RyOiBcIiArIGF0dHJUeXBlQW5kVmFsdWVTdHIpO1xuICB9LCB0aGlzLl9nZXREc1R5cGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IHRoaXMuc1R5cGUsIGwgPSB0aGlzLnNWYWx1ZSwgZiA9IHRoaXMuc1J1bGU7XG4gICAgcmV0dXJuIGYgPT09IFwicHJuXCIgPyBvID09IFwiQ05cIiAmJiB5KGwpID8gXCJpYTVcIiA6IHYobCkgPyBcInByblwiIDogXCJ1dGY4XCIgOiBmID09PSBcInV0ZjhcIiA/IG8gPT0gXCJDTlwiICYmIHkobCkgPyBcImlhNVwiIDogbyA9PSBcIkNcIiA/IFwicHJuXCIgOiBcInV0ZjhcIiA6IFwidXRmOFwiO1xuICB9LCB0aGlzLnNldEJ5QXR0clR5cGVBbmRWYWx1ZVN0ciA9IGZ1bmN0aW9uKG8sIGwsIGYpIHtcbiAgICBmICE9PSB2b2lkIDAgJiYgKHRoaXMuc1J1bGUgPSBmKSwgdGhpcy5zVHlwZSA9IG8sIHRoaXMuc1ZhbHVlID0gbDtcbiAgfSwgdGhpcy5nZXRWYWx1ZU9iaiA9IGZ1bmN0aW9uKG8sIGwpIHtcbiAgICBpZiAobyA9PSBcInV0ZjhcIilcbiAgICAgIHJldHVybiBuZXcgcyh7IHN0cjogbCB9KTtcbiAgICBpZiAobyA9PSBcInByblwiKVxuICAgICAgcmV0dXJuIG5ldyBuKHsgc3RyOiBsIH0pO1xuICAgIGlmIChvID09IFwidGVsXCIpXG4gICAgICByZXR1cm4gbmV3IGgoeyBzdHI6IGwgfSk7XG4gICAgaWYgKG8gPT0gXCJpYTVcIilcbiAgICAgIHJldHVybiBuZXcgdSh7IHN0cjogbCB9KTtcbiAgICBpZiAobyA9PSBcInZpc1wiKVxuICAgICAgcmV0dXJuIG5ldyBwKHsgc3RyOiBsIH0pO1xuICAgIGlmIChvID09IFwiYm1wXCIpXG4gICAgICByZXR1cm4gbmV3IGMoeyBzdHI6IGwgfSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgZGlyZWN0b3J5IHN0cmluZyB0eXBlOiB0eXBlPVwiICsgbyArIFwiIHZhbHVlPVwiICsgbCk7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmRzVHlwZSA9PSBudWxsICYmICh0aGlzLmRzVHlwZSA9IHRoaXMuX2dldERzVHlwZSgpKTtcbiAgICB2YXIgbyA9IGEuYXNuMS54NTA5Lk9JRC5hdHlwZTJvYmoodGhpcy5zVHlwZSksIGwgPSB0aGlzLmdldFZhbHVlT2JqKHRoaXMuZHNUeXBlLCB0aGlzLnNWYWx1ZSksIGYgPSBuZXcgaSh7IGFycmF5OiBbbywgbF0gfSk7XG4gICAgcmV0dXJuIHRoaXMuVExWID0gZi50b2hleCgpLCB0aGlzLlRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS54NTA5LkF0dHJpYnV0ZVR5cGVBbmRWYWx1ZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuU3ViamVjdFB1YmxpY0tleUluZm8gPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJJbnRlZ2VyLCBzID0gci5ERVJCaXRTdHJpbmcsIG4gPSByLkRFUk9iamVjdElkZW50aWZpZXIsIGggPSByLkRFUlNlcXVlbmNlLCB1ID0gci5BU04xVXRpbC5uZXdPYmplY3QsIHAgPSByLng1MDksIGMgPSBwLkFsZ29yaXRobUlkZW50aWZpZXIsIHkgPSB0LmNyeXB0bztcbiAgeS5FQ0RTQSwgeS5EU0EsIHRoaXMuZ2V0QVNOMU9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmFzbjFBbGdJZCA9PSBudWxsIHx8IHRoaXMuYXNuMVN1YmpQS2V5ID09IG51bGwpXG4gICAgICB0aHJvdyBcImFsZ0lkIGFuZC9vciBzdWJqUHViS2V5IG5vdCBzZXRcIjtcbiAgICB2YXIgdiA9IG5ldyBoKHsgYXJyYXk6IFt0aGlzLmFzbjFBbGdJZCwgdGhpcy5hc24xU3VialBLZXldIH0pO1xuICAgIHJldHVybiB2O1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB0aGlzLmdldEFTTjFPYmplY3QoKTtcbiAgICByZXR1cm4gdGhpcy5oVExWID0gdi50b2hleCgpLCB0aGlzLmhUTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0UHViS2V5ID0gZnVuY3Rpb24odikge1xuICAgIHRyeSB7XG4gICAgICBpZiAodiBpbnN0YW5jZW9mIHEpIHtcbiAgICAgICAgdmFyIG8gPSB1KHsgc2VxOiBbeyBpbnQ6IHsgYmlnaW50OiB2Lm4gfSB9LCB7IGludDogeyBpbnQ6IHYuZSB9IH1dIH0pLCBsID0gby50b2hleCgpO1xuICAgICAgICB0aGlzLmFzbjFBbGdJZCA9IG5ldyBjKHsgbmFtZTogXCJyc2FFbmNyeXB0aW9uXCIgfSksIHRoaXMuYXNuMVN1YmpQS2V5ID0gbmV3IHMoeyBoZXg6IFwiMDBcIiArIGwgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBpZiAodiBpbnN0YW5jZW9mIGEuY3J5cHRvLkVDRFNBKSB7XG4gICAgICAgIHZhciBmID0gbmV3IG4oeyBuYW1lOiB2LmN1cnZlTmFtZSB9KTtcbiAgICAgICAgdGhpcy5hc24xQWxnSWQgPSBuZXcgYyh7IG5hbWU6IFwiZWNQdWJsaWNLZXlcIiwgYXNuMXBhcmFtczogZiB9KSwgdGhpcy5hc24xU3VialBLZXkgPSBuZXcgcyh7IGhleDogXCIwMFwiICsgdi5wdWJLZXlIZXggfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBpZiAodiBpbnN0YW5jZW9mIGEuY3J5cHRvLkRTQSkge1xuICAgICAgICB2YXIgZiA9IG5ldyB1KHsgc2VxOiBbeyBpbnQ6IHsgYmlnaW50OiB2LnAgfSB9LCB7IGludDogeyBiaWdpbnQ6IHYucSB9IH0sIHsgaW50OiB7IGJpZ2ludDogdi5nIH0gfV0gfSk7XG4gICAgICAgIHRoaXMuYXNuMUFsZ0lkID0gbmV3IGMoeyBuYW1lOiBcImRzYVwiLCBhc24xcGFyYW1zOiBmIH0pO1xuICAgICAgICB2YXIgZCA9IG5ldyBpKHsgYmlnaW50OiB2LnkgfSk7XG4gICAgICAgIHRoaXMuYXNuMVN1YmpQS2V5ID0gbmV3IHMoeyBoZXg6IFwiMDBcIiArIGQudG9oZXgoKSB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICB9XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldFB1YktleShlKTtcbn07XG5OKGEuYXNuMS54NTA5LlN1YmplY3RQdWJsaWNLZXlJbmZvLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5UaW1lID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5UaW1lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJVVENUaW1lLCBzID0gci5ERVJHZW5lcmFsaXplZFRpbWU7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50eXBlID0gbnVsbCwgdGhpcy5zZXRUaW1lUGFyYW1zID0gZnVuY3Rpb24obikge1xuICAgIHRoaXMudGltZVBhcmFtcyA9IG47XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKG4pIHtcbiAgICB0aGlzLnBhcmFtcyA9IG47XG4gIH0sIHRoaXMuZ2V0VHlwZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gbi5tYXRjaCgvXlswLTldezEyfVokLykgPyBcInV0Y1wiIDogbi5tYXRjaCgvXlswLTldezE0fVokLykgPyBcImdlblwiIDogbi5tYXRjaCgvXlswLTldezEyfVxcLlswLTldK1okLykgPyBcInV0Y1wiIDogbi5tYXRjaCgvXlswLTldezE0fVxcLlswLTldK1okLykgPyBcImdlblwiIDogbnVsbDtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gdGhpcy5wYXJhbXMsIGggPSBudWxsO1xuICAgIGlmICh0eXBlb2YgbiA9PSBcInN0cmluZ1wiICYmIChuID0geyBzdHI6IG4gfSksIG4gIT0gbnVsbCAmJiBuLnN0ciAmJiAobi50eXBlID09IG51bGwgfHwgbi50eXBlID09IG51bGwpICYmIChuLnR5cGUgPSB0aGlzLmdldFR5cGUobi5zdHIpKSwgbiAhPSBudWxsICYmIG4uc3RyID8gKG4udHlwZSA9PSBcInV0Y1wiICYmIChoID0gbmV3IGkobi5zdHIpKSwgbi50eXBlID09IFwiZ2VuXCIgJiYgKGggPSBuZXcgcyhuLnN0cikpKSA6IHRoaXMudHlwZSA9PSBcImdlblwiID8gaCA9IG5ldyBzKCkgOiBoID0gbmV3IGkoKSwgaCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwid3Jvbmcgc2V0dGluZyBmb3IgVGltZVwiKTtcbiAgICByZXR1cm4gdGhpcy5UTFYgPSBoLnRvaGV4KCksIHRoaXMuVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbmEuYXNuMS54NTA5LlRpbWVfYmFrID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5UaW1lX2Jhay5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSVVRDVGltZSwgcyA9IHIuREVSR2VuZXJhbGl6ZWRUaW1lO1xuICB0aGlzLnNldFRpbWVQYXJhbXMgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy50aW1lUGFyYW1zID0gbjtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gbnVsbDtcbiAgICByZXR1cm4gdGhpcy50aW1lUGFyYW1zICE9IG51bGwgPyB0aGlzLnR5cGUgPT0gXCJ1dGNcIiA/IG4gPSBuZXcgaSh0aGlzLnRpbWVQYXJhbXMpIDogbiA9IG5ldyBzKHRoaXMudGltZVBhcmFtcykgOiB0aGlzLnR5cGUgPT0gXCJ1dGNcIiA/IG4gPSBuZXcgaSgpIDogbiA9IG5ldyBzKCksIHRoaXMuVExWID0gbi50b2hleCgpLCB0aGlzLlRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy50eXBlID0gXCJ1dGNcIiwgZSAhPT0gdm9pZCAwICYmIChlLnR5cGUgIT09IHZvaWQgMCA/IHRoaXMudHlwZSA9IGUudHlwZSA6IGUuc3RyICE9PSB2b2lkIDAgJiYgKGUuc3RyLm1hdGNoKC9eWzAtOV17MTJ9WiQvKSAmJiAodGhpcy50eXBlID0gXCJ1dGNcIiksIGUuc3RyLm1hdGNoKC9eWzAtOV17MTR9WiQvKSAmJiAodGhpcy50eXBlID0gXCJnZW5cIikpLCB0aGlzLnRpbWVQYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS54NTA5LlRpbWUsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLm5hbWVBbGcgPSBudWxsLCB0aGlzLmFzbjFBbGcgPSBudWxsLCB0aGlzLmFzbjFQYXJhbXMgPSBudWxsLCB0aGlzLnBhcmFtRW1wdHkgPSAhMTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIuUFNTTkFNRTJBU04xVExWO1xuICBpZiAodGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLm5hbWVBbGcgPT09IG51bGwgJiYgdGhpcy5hc24xQWxnID09PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYWxnb3JpdGhtIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgaWYgKHRoaXMubmFtZUFsZyAhPT0gbnVsbCkge1xuICAgICAgdmFyIG4gPSBudWxsO1xuICAgICAgZm9yICh2YXIgaCBpbiBpKVxuICAgICAgICBoID09PSB0aGlzLm5hbWVBbGcgJiYgKG4gPSBpW2hdKTtcbiAgICAgIGlmIChuICE9PSBudWxsKVxuICAgICAgICByZXR1cm4gdGhpcy5oVExWID0gbiwgdGhpcy5oVExWO1xuICAgIH1cbiAgICB0aGlzLm5hbWVBbGcgIT09IG51bGwgJiYgdGhpcy5hc24xQWxnID09PSBudWxsICYmICh0aGlzLmFzbjFBbGcgPSByLng1MDkuT0lELm5hbWUyb2JqKHRoaXMubmFtZUFsZykpO1xuICAgIHZhciB1ID0gW3RoaXMuYXNuMUFsZ107XG4gICAgdGhpcy5hc24xUGFyYW1zICE9PSBudWxsICYmIHUucHVzaCh0aGlzLmFzbjFQYXJhbXMpO1xuICAgIHZhciBwID0gbmV3IHIuREVSU2VxdWVuY2UoeyBhcnJheTogdSB9KTtcbiAgICByZXR1cm4gdGhpcy5oVExWID0gcC50b2hleCgpLCB0aGlzLmhUTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiAoZS5uYW1lICE9PSB2b2lkIDAgJiYgKHRoaXMubmFtZUFsZyA9IGUubmFtZSksIGUuYXNuMXBhcmFtcyAhPT0gdm9pZCAwICYmICh0aGlzLmFzbjFQYXJhbXMgPSBlLmFzbjFwYXJhbXMpLCBlLnBhcmFtZW1wdHkgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbUVtcHR5ID0gZS5wYXJhbWVtcHR5KSksIHRoaXMuYXNuMVBhcmFtcyA9PT0gbnVsbCAmJiB0aGlzLnBhcmFtRW1wdHkgPT09ICExICYmIHRoaXMubmFtZUFsZyAhPT0gbnVsbCkge1xuICAgIHRoaXMubmFtZUFsZy5uYW1lICE9PSB2b2lkIDAgJiYgKHRoaXMubmFtZUFsZyA9IHRoaXMubmFtZUFsZy5uYW1lKTtcbiAgICB2YXIgcyA9IHRoaXMubmFtZUFsZy50b0xvd2VyQ2FzZSgpO1xuICAgIHMuc3Vic3RyKC03LCA3KSAhPT0gXCJ3aXRoZHNhXCIgJiYgcy5zdWJzdHIoLTksIDkpICE9PSBcIndpdGhlY2RzYVwiICYmICh0aGlzLmFzbjFQYXJhbXMgPSBuZXcgci5ERVJOdWxsKCkpO1xuICB9XG59O1xuTihhLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5BbGdvcml0aG1JZGVudGlmaWVyLlBTU05BTUUyQVNOMVRMViA9IHsgU0hBd2l0aFJTQWFuZE1HRjE6IFwiMzAwZDA2MDkyYTg2NDg4NmY3MGQwMTAxMGEzMDAwXCIsIFNIQTI1NndpdGhSU0FhbmRNR0YxOiBcIjMwM2QwNjA5MmE4NjQ4ODZmNzBkMDEwMTBhMzAzMGEwMGQzMDBiMDYwOTYwODY0ODAxNjUwMzA0MDIwMWExMWEzMDE4MDYwOTJhODY0ODg2ZjcwZDAxMDEwODMwMGIwNjA5NjA4NjQ4MDE2NTAzMDQwMjAxYTIwMzAyMDEyMFwiLCBTSEEzODR3aXRoUlNBYW5kTUdGMTogXCIzMDNkMDYwOTJhODY0ODg2ZjcwZDAxMDEwYTMwMzBhMDBkMzAwYjA2MDk2MDg2NDgwMTY1MDMwNDAyMDJhMTFhMzAxODA2MDkyYTg2NDg4NmY3MGQwMTAxMDgzMDBiMDYwOTYwODY0ODAxNjUwMzA0MDIwMmEyMDMwMjAxMzBcIiwgU0hBNTEyd2l0aFJTQWFuZE1HRjE6IFwiMzAzZDA2MDkyYTg2NDg4NmY3MGQwMTAxMGEzMDMwYTAwZDMwMGIwNjA5NjA4NjQ4MDE2NTAzMDQwMjAzYTExYTMwMTgwNjA5MmE4NjQ4ODZmNzBkMDEwMTA4MzAwYjA2MDk2MDg2NDgwMTY1MDMwNDAyMDNhMjAzMDIwMTQwXCIgfTtcbmEuYXNuMS54NTA5LkdlbmVyYWxOYW1lID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEueDUwOS5HZW5lcmFsTmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIueDUwOSwgcyA9IGkuWDUwME5hbWUsIG4gPSBpLk90aGVyTmFtZSwgaCA9IHIuREVSSUE1U3RyaW5nO1xuICByLkRFUlByaW50YWJsZVN0cmluZztcbiAgdmFyIHUgPSByLkRFUk9jdGV0U3RyaW5nLCBwID0gci5ERVJUYWdnZWRPYmplY3QsIGMgPSByLkFTTjFPYmplY3QsIHkgPSBFcnJvcjtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy5wYXJhbXMgPSB2O1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB0aGlzLnBhcmFtcywgbywgZiwgbCwgZiA9ICExO1xuICAgIGlmICh2Lm90aGVyICE9PSB2b2lkIDApXG4gICAgICBvID0gXCJhMFwiLCBsID0gbmV3IG4odi5vdGhlcik7XG4gICAgZWxzZSBpZiAodi5yZmM4MjIgIT09IHZvaWQgMClcbiAgICAgIG8gPSBcIjgxXCIsIGwgPSBuZXcgaCh7IHN0cjogdi5yZmM4MjIgfSk7XG4gICAgZWxzZSBpZiAodi5kbnMgIT09IHZvaWQgMClcbiAgICAgIG8gPSBcIjgyXCIsIGwgPSBuZXcgaCh7IHN0cjogdi5kbnMgfSk7XG4gICAgZWxzZSBpZiAodi5kbiAhPT0gdm9pZCAwKVxuICAgICAgbyA9IFwiYTRcIiwgZiA9ICEwLCB0eXBlb2Ygdi5kbiA9PSBcInN0cmluZ1wiID8gbCA9IG5ldyBzKHsgc3RyOiB2LmRuIH0pIDogdi5kbiBpbnN0YW5jZW9mIGEuYXNuMS54NTA5Llg1MDBOYW1lID8gbCA9IHYuZG4gOiBsID0gbmV3IHModi5kbik7XG4gICAgZWxzZSBpZiAodi5sZGFwZG4gIT09IHZvaWQgMClcbiAgICAgIG8gPSBcImE0XCIsIGYgPSAhMCwgbCA9IG5ldyBzKHsgbGRhcHN0cjogdi5sZGFwZG4gfSk7XG4gICAgZWxzZSBpZiAodi5jZXJ0aXNzdWVyICE9PSB2b2lkIDAgfHwgdi5jZXJ0c3ViaiAhPT0gdm9pZCAwKSB7XG4gICAgICBvID0gXCJhNFwiLCBmID0gITA7XG4gICAgICB2YXIgZCwgZywgUyA9IG51bGw7XG4gICAgICBpZiAodi5jZXJ0c3ViaiAhPT0gdm9pZCAwID8gKGQgPSAhMSwgZyA9IHYuY2VydHN1YmopIDogKGQgPSAhMCwgZyA9IHYuY2VydGlzc3VlciksIGcubWF0Y2goL15bMC05QS1GYS1mXSskLyksIGcuaW5kZXhPZihcIi0tLS0tQkVHSU4gXCIpICE9IC0xICYmIChTID0gaWUoZykpLCBTID09IG51bGwpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNlcnRzdWJqL2NlcnRpc3N1ZXIgbm90IGNlcnRcIik7XG4gICAgICB2YXIgYiA9IG5ldyBMKCk7XG4gICAgICBiLmhleCA9IFM7XG4gICAgICB2YXIgRDtcbiAgICAgIGQgPyBEID0gYi5nZXRJc3N1ZXJIZXgoKSA6IEQgPSBiLmdldFN1YmplY3RIZXgoKSwgbCA9IG5ldyBjKCksIGwuaFRMViA9IEQ7XG4gICAgfSBlbHNlIGlmICh2LnVyaSAhPT0gdm9pZCAwKVxuICAgICAgbyA9IFwiODZcIiwgbCA9IG5ldyBoKHsgc3RyOiB2LnVyaSB9KTtcbiAgICBlbHNlIGlmICh2LmlwICE9PSB2b2lkIDApIHtcbiAgICAgIG8gPSBcIjg3XCI7XG4gICAgICB2YXIgQSwgSSA9IHYuaXA7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoSS5tYXRjaCgvXlswLTlhLWZdKyQvKSkge1xuICAgICAgICAgIHZhciBtID0gSS5sZW5ndGg7XG4gICAgICAgICAgaWYgKG0gPT0gOCB8fCBtID09IDE2IHx8IG0gPT0gMzIgfHwgbSA9PSA2NClcbiAgICAgICAgICAgIEEgPSBJO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IFwiZXJyXCI7XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgIEEgPSBSdChJKTtcbiAgICAgIH0gY2F0Y2ggKHcpIHtcbiAgICAgICAgdGhyb3cgbmV3IHkoXCJtYWxmb3JtZWQgSVAgYWRkcmVzczogXCIgKyB2LmlwICsgXCI6XCIgKyB3Lm1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgbCA9IG5ldyB1KHsgaGV4OiBBIH0pO1xuICAgIH0gZWxzZVxuICAgICAgdGhyb3cgbmV3IHkoXCJpbXByb3BlciBwYXJhbXNcIik7XG4gICAgdmFyIEUgPSBuZXcgcCh7IHRhZzogbywgZXhwbGljaXQ6IGYsIG9iajogbCB9KTtcbiAgICByZXR1cm4gRS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLng1MDkuR2VuZXJhbE5hbWUsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS54NTA5LkdlbmVyYWxOYW1lcyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLng1MDkuR2VuZXJhbE5hbWVzLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICB0aGlzLnNldEJ5UGFyYW1BcnJheSA9IGZ1bmN0aW9uKGkpIHtcbiAgICBmb3IgKHZhciBzID0gMDsgcyA8IGkubGVuZ3RoOyBzKyspIHtcbiAgICAgIHZhciBuID0gbmV3IHIueDUwOS5HZW5lcmFsTmFtZShpW3NdKTtcbiAgICAgIHRoaXMuYXNuMUFycmF5LnB1c2gobik7XG4gICAgfVxuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGkgPSBuZXcgci5ERVJTZXF1ZW5jZSh7IGFycmF5OiB0aGlzLmFzbjFBcnJheSB9KTtcbiAgICByZXR1cm4gaS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0aGlzLmFzbjFBcnJheSA9IG5ldyBBcnJheSgpLCB0eXBlb2YgZSA8IFwidVwiICYmIHRoaXMuc2V0QnlQYXJhbUFycmF5KGUpO1xufTtcbk4oYS5hc24xLng1MDkuR2VuZXJhbE5hbWVzLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEueDUwOS5PdGhlck5hbWUgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS54NTA5Lk90aGVyTmFtZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVST2JqZWN0SWRlbnRpZmllciwgcyA9IHIuREVSU2VxdWVuY2UsIG4gPSByLkFTTjFVdGlsLm5ld09iamVjdDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihoKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBoO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSB0aGlzLnBhcmFtcztcbiAgICBpZiAoaC5vaWQgPT0gbnVsbCB8fCBoLnZhbHVlID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvaWQgb3IgdmFsdWUgbm90IHNwZWNpZmllZFwiKTtcbiAgICB2YXIgdSA9IG5ldyBpKHsgb2lkOiBoLm9pZCB9KSwgcCA9IG4oeyB0YWc6IHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiBoLnZhbHVlIH0gfSksIGMgPSBuZXcgcyh7IGFycmF5OiBbdSwgcF0gfSk7XG4gICAgcmV0dXJuIGMudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS54NTA5Lk90aGVyTmFtZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLng1MDkuT0lEID0gbmV3IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IGEuYXNuMS5ERVJPYmplY3RJZGVudGlmaWVyO1xuICB0aGlzLm5hbWUyb2lkTGlzdCA9IHsgXCJhZXMxMjgtQ0JDXCI6IFwiMi4xNi44NDAuMS4xMDEuMy40LjEuMlwiLCBcImFlczI1Ni1DQkNcIjogXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMS40MlwiLCBzaGExOiBcIjEuMy4xNC4zLjIuMjZcIiwgc2hhMjU2OiBcIjIuMTYuODQwLjEuMTAxLjMuNC4yLjFcIiwgc2hhMzg0OiBcIjIuMTYuODQwLjEuMTAxLjMuNC4yLjJcIiwgc2hhNTEyOiBcIjIuMTYuODQwLjEuMTAxLjMuNC4yLjNcIiwgc2hhMjI0OiBcIjIuMTYuODQwLjEuMTAxLjMuNC4yLjRcIiwgbWQ1OiBcIjEuMi44NDAuMTEzNTQ5LjIuNVwiLCBtZDI6IFwiMS4zLjE0LjcuMi4yLjFcIiwgcmlwZW1kMTYwOiBcIjEuMy4zNi4zLjIuMVwiLCBobWFjV2l0aFNIQTE6IFwiMS4yLjg0MC4xMTM1NDkuMi43XCIsIGhtYWNXaXRoU0hBMjI0OiBcIjEuMi44NDAuMTEzNTQ5LjIuOFwiLCBobWFjV2l0aFNIQTI1NjogXCIxLjIuODQwLjExMzU0OS4yLjlcIiwgaG1hY1dpdGhTSEEzODQ6IFwiMS4yLjg0MC4xMTM1NDkuMi4xMFwiLCBobWFjV2l0aFNIQTUxMjogXCIxLjIuODQwLjExMzU0OS4yLjExXCIsIE1EMndpdGhSU0E6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjJcIiwgTUQ0d2l0aFJTQTogXCIxLjIuODQwLjExMzU0OS4xLjEuM1wiLCBNRDV3aXRoUlNBOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS40XCIsIFNIQTF3aXRoUlNBOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS41XCIsIFwicGtjczEtTUdGXCI6IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjhcIiwgcnNhUFNTOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xMFwiLCBTSEEyMjR3aXRoUlNBOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xNFwiLCBTSEEyNTZ3aXRoUlNBOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xMVwiLCBTSEEzODR3aXRoUlNBOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xMlwiLCBTSEE1MTJ3aXRoUlNBOiBcIjEuMi44NDAuMTEzNTQ5LjEuMS4xM1wiLCBTSEExd2l0aEVDRFNBOiBcIjEuMi44NDAuMTAwNDUuNC4xXCIsIFNIQTIyNHdpdGhFQ0RTQTogXCIxLjIuODQwLjEwMDQ1LjQuMy4xXCIsIFNIQTI1NndpdGhFQ0RTQTogXCIxLjIuODQwLjEwMDQ1LjQuMy4yXCIsIFNIQTM4NHdpdGhFQ0RTQTogXCIxLjIuODQwLjEwMDQ1LjQuMy4zXCIsIFNIQTUxMndpdGhFQ0RTQTogXCIxLjIuODQwLjEwMDQ1LjQuMy40XCIsIGRzYTogXCIxLjIuODQwLjEwMDQwLjQuMVwiLCBTSEExd2l0aERTQTogXCIxLjIuODQwLjEwMDQwLjQuM1wiLCBTSEEyMjR3aXRoRFNBOiBcIjIuMTYuODQwLjEuMTAxLjMuNC4zLjFcIiwgU0hBMjU2d2l0aERTQTogXCIyLjE2Ljg0MC4xLjEwMS4zLjQuMy4yXCIsIHJzYUVuY3J5cHRpb246IFwiMS4yLjg0MC4xMTM1NDkuMS4xLjFcIiwgY29tbW9uTmFtZTogXCIyLjUuNC4zXCIsIGNvdW50cnlOYW1lOiBcIjIuNS40LjZcIiwgbG9jYWxpdHlOYW1lOiBcIjIuNS40LjdcIiwgc3RhdGVPclByb3ZpbmNlTmFtZTogXCIyLjUuNC44XCIsIHN0cmVldEFkZHJlc3M6IFwiMi41LjQuOVwiLCBvcmdhbml6YXRpb25OYW1lOiBcIjIuNS40LjEwXCIsIG9yZ2FuaXphdGlvbmFsVW5pdE5hbWU6IFwiMi41LjQuMTFcIiwgZG9tYWluQ29tcG9uZW50OiBcIjAuOS4yMzQyLjE5MjAwMzAwLjEwMC4xLjI1XCIsIHVzZXJJZDogXCIwLjkuMjM0Mi4xOTIwMDMwMC4xMDAuMS4xXCIsIHN1cm5hbWU6IFwiMi41LjQuNFwiLCBnaXZlbk5hbWU6IFwiMi41LjQuNDJcIiwgdGl0bGU6IFwiMi41LjQuMTJcIiwgZGlzdGluZ3Vpc2hlZE5hbWU6IFwiMi41LjQuNDlcIiwgZW1haWxBZGRyZXNzOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xXCIsIGRlc2NyaXB0aW9uOiBcIjIuNS40LjEzXCIsIGJ1c2luZXNzQ2F0ZWdvcnk6IFwiMi41LjQuMTVcIiwgcG9zdGFsQ29kZTogXCIyLjUuNC4xN1wiLCB1bmlxdWVJZGVudGlmaWVyOiBcIjIuNS40LjQ1XCIsIG9yZ2FuaXphdGlvbklkZW50aWZpZXI6IFwiMi41LjQuOTdcIiwganVyaXNkaWN0aW9uT2ZJbmNvcnBvcmF0aW9uTDogXCIxLjMuNi4xLjQuMS4zMTEuNjAuMi4xLjFcIiwganVyaXNkaWN0aW9uT2ZJbmNvcnBvcmF0aW9uU1A6IFwiMS4zLjYuMS40LjEuMzExLjYwLjIuMS4yXCIsIGp1cmlzZGljdGlvbk9mSW5jb3Jwb3JhdGlvbkM6IFwiMS4zLjYuMS40LjEuMzExLjYwLjIuMS4zXCIsIHN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzOiBcIjIuNS4yOS45XCIsIHN1YmplY3RLZXlJZGVudGlmaWVyOiBcIjIuNS4yOS4xNFwiLCBrZXlVc2FnZTogXCIyLjUuMjkuMTVcIiwgc3ViamVjdEFsdE5hbWU6IFwiMi41LjI5LjE3XCIsIGlzc3VlckFsdE5hbWU6IFwiMi41LjI5LjE4XCIsIGJhc2ljQ29uc3RyYWludHM6IFwiMi41LjI5LjE5XCIsIGNSTE51bWJlcjogXCIyLjUuMjkuMjBcIiwgY1JMUmVhc29uOiBcIjIuNS4yOS4yMVwiLCBuYW1lQ29uc3RyYWludHM6IFwiMi41LjI5LjMwXCIsIGNSTERpc3RyaWJ1dGlvblBvaW50czogXCIyLjUuMjkuMzFcIiwgY2VydGlmaWNhdGVQb2xpY2llczogXCIyLjUuMjkuMzJcIiwgYW55UG9saWN5OiBcIjIuNS4yOS4zMi4wXCIsIHBvbGljeU1hcHBpbmdzOiBcIjIuNS4yOS4zM1wiLCBhdXRob3JpdHlLZXlJZGVudGlmaWVyOiBcIjIuNS4yOS4zNVwiLCBwb2xpY3lDb25zdHJhaW50czogXCIyLjUuMjkuMzZcIiwgZXh0S2V5VXNhZ2U6IFwiMi41LjI5LjM3XCIsIGluaGliaXRBbnlQb2xpY3k6IFwiMi41LjI5LjU0XCIsIGF1dGhvcml0eUluZm9BY2Nlc3M6IFwiMS4zLjYuMS41LjUuNy4xLjFcIiwgb2NzcDogXCIxLjMuNi4xLjUuNS43LjQ4LjFcIiwgb2NzcEJhc2ljOiBcIjEuMy42LjEuNS41LjcuNDguMS4xXCIsIG9jc3BOb25jZTogXCIxLjMuNi4xLjUuNS43LjQ4LjEuMlwiLCBvY3NwTm9DaGVjazogXCIxLjMuNi4xLjUuNS43LjQ4LjEuNVwiLCBjYUlzc3VlcnM6IFwiMS4zLjYuMS41LjUuNy40OC4yXCIsIGFueUV4dGVuZGVkS2V5VXNhZ2U6IFwiMi41LjI5LjM3LjBcIiwgc2VydmVyQXV0aDogXCIxLjMuNi4xLjUuNS43LjMuMVwiLCBjbGllbnRBdXRoOiBcIjEuMy42LjEuNS41LjcuMy4yXCIsIGNvZGVTaWduaW5nOiBcIjEuMy42LjEuNS41LjcuMy4zXCIsIGVtYWlsUHJvdGVjdGlvbjogXCIxLjMuNi4xLjUuNS43LjMuNFwiLCB0aW1lU3RhbXBpbmc6IFwiMS4zLjYuMS41LjUuNy4zLjhcIiwgb2NzcFNpZ25pbmc6IFwiMS4zLjYuMS41LjUuNy4zLjlcIiwgc210cFVURjhNYWlsYm94OiBcIjEuMy42LjEuNS41LjcuOC45XCIsIGRhdGVPZkJpcnRoOiBcIjEuMy42LjEuNS41LjcuOS4xXCIsIHBsYWNlT2ZCaXJ0aDogXCIxLjMuNi4xLjUuNS43LjkuMlwiLCBnZW5kZXI6IFwiMS4zLjYuMS41LjUuNy45LjNcIiwgY291bnRyeU9mQ2l0aXplbnNoaXA6IFwiMS4zLjYuMS41LjUuNy45LjRcIiwgY291bnRyeU9mUmVzaWRlbmNlOiBcIjEuMy42LjEuNS41LjcuOS41XCIsIGVjUHVibGljS2V5OiBcIjEuMi44NDAuMTAwNDUuMi4xXCIsIFwiUC0yNTZcIjogXCIxLjIuODQwLjEwMDQ1LjMuMS43XCIsIHNlY3AyNTZyMTogXCIxLjIuODQwLjEwMDQ1LjMuMS43XCIsIHNlY3AyNTZrMTogXCIxLjMuMTMyLjAuMTBcIiwgc2VjcDM4NHIxOiBcIjEuMy4xMzIuMC4zNFwiLCBzZWNwNTIxcjE6IFwiMS4zLjEzMi4wLjM1XCIsIHBrY3M1UEJFUzI6IFwiMS4yLjg0MC4xMTM1NDkuMS41LjEzXCIsIHBrY3M1UEJLREYyOiBcIjEuMi44NDAuMTEzNTQ5LjEuNS4xMlwiLCBcImRlcy1FREUzLUNCQ1wiOiBcIjEuMi44NDAuMTEzNTQ5LjMuN1wiLCBkYXRhOiBcIjEuMi44NDAuMTEzNTQ5LjEuNy4xXCIsIFwic2lnbmVkLWRhdGFcIjogXCIxLjIuODQwLjExMzU0OS4xLjcuMlwiLCBcImVudmVsb3BlZC1kYXRhXCI6IFwiMS4yLjg0MC4xMTM1NDkuMS43LjNcIiwgXCJkaWdlc3RlZC1kYXRhXCI6IFwiMS4yLjg0MC4xMTM1NDkuMS43LjVcIiwgXCJlbmNyeXB0ZWQtZGF0YVwiOiBcIjEuMi44NDAuMTEzNTQ5LjEuNy42XCIsIFwiYXV0aGVudGljYXRlZC1kYXRhXCI6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjEuMlwiLCB0c3RpbmZvOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4xLjRcIiwgc2lnbmluZ0NlcnRpZmljYXRlOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjEyXCIsIHRpbWVTdGFtcFRva2VuOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjE0XCIsIHNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXI6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTVcIiwgZXRzQXJjaGl2ZVRpbWVTdGFtcDogXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4yN1wiLCBzaWduaW5nQ2VydGlmaWNhdGVWMjogXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi40N1wiLCBldHNBcmNoaXZlVGltZVN0YW1wVjI6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuNDhcIiwgZXh0ZW5zaW9uUmVxdWVzdDogXCIxLjIuODQwLjExMzU0OS4xLjkuMTRcIiwgY29udGVudFR5cGU6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjNcIiwgbWVzc2FnZURpZ2VzdDogXCIxLjIuODQwLjExMzU0OS4xLjkuNFwiLCBzaWduaW5nVGltZTogXCIxLjIuODQwLjExMzU0OS4xLjkuNVwiLCBjb3VudGVyU2lnbmF0dXJlOiBcIjEuMi44NDAuMTEzNTQ5LjEuOS42XCIsIGFyY2hpdmVUaW1lU3RhbXBWMzogXCIwLjQuMC4xNzMzLjIuNFwiLCBwZGZSZXZvY2F0aW9uSW5mb0FyY2hpdmFsOiBcIjEuMi44NDAuMTEzNTgzLjEuMS44XCIsIGFkb2JlVGltZVN0YW1wOiBcIjEuMi44NDAuMTEzNTgzLjEuMS45LjFcIiwgc21pbWVNYWlsYm94TGVnYWN5OiBcIjIuMjMuMTQwLjEuNS4xLjFcIiwgc21pbWVNYWlsYm94TXVsdGk6IFwiMi4yMy4xNDAuMS41LjEuMlwiLCBzbWltZU1haWxib3hTdHJpY3Q6IFwiMi4yMy4xNDAuMS41LjEuM1wiLCBzbWltZU9yZ2FuaXphdGlvbkxlZ2FjeTogXCIyLjIzLjE0MC4xLjUuMi4xXCIsIHNtaW1lT3JnYW5pemF0aW9uTXVsdGk6IFwiMi4yMy4xNDAuMS41LjIuMlwiLCBzbWltZU9yZ2FuaXphdGlvblN0cmljdDogXCIyLjIzLjE0MC4xLjUuMi4zXCIsIHNtaW1lU3BvbnNvckxlZ2FjeTogXCIyLjIzLjE0MC4xLjUuMy4xXCIsIHNtaW1lU3BvbnNvck11bHRpOiBcIjIuMjMuMTQwLjEuNS4zLjJcIiwgc21pbWVTcG9uc29yU3RyaWN0OiBcIjIuMjMuMTQwLjEuNS4zLjNcIiwgc21pbWVJbmRpdmlkdWFsTGVnYWN5OiBcIjIuMjMuMTQwLjEuNS40LjFcIiwgc21pbWVJbmRpdmlkdWFsTXVsdGk6IFwiMi4yMy4xNDAuMS41LjQuMlwiLCBzbWltZUluZGl2aWR1YWxTdHJpY3Q6IFwiMi4yMy4xNDAuMS41LjQuM1wiIH0sIHRoaXMuYXR5cGUyb2lkTGlzdCA9IHsgQ046IFwiMi41LjQuM1wiLCBMOiBcIjIuNS40LjdcIiwgU1Q6IFwiMi41LjQuOFwiLCBPOiBcIjIuNS40LjEwXCIsIE9VOiBcIjIuNS40LjExXCIsIEM6IFwiMi41LjQuNlwiLCBTVFJFRVQ6IFwiMi41LjQuOVwiLCBEQzogXCIwLjkuMjM0Mi4xOTIwMDMwMC4xMDAuMS4yNVwiLCBVSUQ6IFwiMC45LjIzNDIuMTkyMDAzMDAuMTAwLjEuMVwiLCBTTjogXCIyLjUuNC40XCIsIFQ6IFwiMi41LjQuMTJcIiwgR046IFwiMi41LjQuNDJcIiwgRE46IFwiMi41LjQuNDlcIiwgRTogXCIxLjIuODQwLjExMzU0OS4xLjkuMVwiLCBkZXNjcmlwdGlvbjogXCIyLjUuNC4xM1wiLCBidXNpbmVzc0NhdGVnb3J5OiBcIjIuNS40LjE1XCIsIHBvc3RhbENvZGU6IFwiMi41LjQuMTdcIiwgc2VyaWFsTnVtYmVyOiBcIjIuNS40LjVcIiwgdW5pcXVlSWRlbnRpZmllcjogXCIyLjUuNC40NVwiLCBvcmdhbml6YXRpb25JZGVudGlmaWVyOiBcIjIuNS40Ljk3XCIsIGp1cmlzZGljdGlvbk9mSW5jb3Jwb3JhdGlvbkw6IFwiMS4zLjYuMS40LjEuMzExLjYwLjIuMS4xXCIsIGp1cmlzZGljdGlvbk9mSW5jb3Jwb3JhdGlvblNQOiBcIjEuMy42LjEuNC4xLjMxMS42MC4yLjEuMlwiLCBqdXJpc2RpY3Rpb25PZkluY29ycG9yYXRpb25DOiBcIjEuMy42LjEuNC4xLjMxMS42MC4yLjEuM1wiIH0sIHRoaXMub2JqQ2FjaGUgPSB7fSwgdGhpcy5uYW1lMm9iaiA9IGZ1bmN0aW9uKHQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqQ2FjaGVbdF0gPCBcInVcIilcbiAgICAgIHJldHVybiB0aGlzLm9iakNhY2hlW3RdO1xuICAgIGlmICh0eXBlb2YgdGhpcy5uYW1lMm9pZExpc3RbdF0gPiBcInVcIilcbiAgICAgIHRocm93IFwiTmFtZSBvZiBPYmplY3RJZGVudGlmaWVyIG5vdCBkZWZpbmVkOiBcIiArIHQ7XG4gICAgdmFyIHIgPSB0aGlzLm5hbWUyb2lkTGlzdFt0XSwgaSA9IG5ldyBlKHsgb2lkOiByIH0pO1xuICAgIHJldHVybiB0aGlzLm9iakNhY2hlW3RdID0gaSwgaTtcbiAgfSwgdGhpcy5hdHlwZTJvYmogPSBmdW5jdGlvbih0KSB7XG4gICAgaWYgKHRoaXMub2JqQ2FjaGVbdF0gIT09IHZvaWQgMClcbiAgICAgIHJldHVybiB0aGlzLm9iakNhY2hlW3RdO1xuICAgIHZhciByO1xuICAgIGlmICh0Lm1hdGNoKC9eXFxkK1xcLlxcZCtcXC5bMC05Ll0rJC8pKVxuICAgICAgciA9IHQ7XG4gICAgZWxzZSBpZiAodGhpcy5hdHlwZTJvaWRMaXN0W3RdICE9PSB2b2lkIDApXG4gICAgICByID0gdGhpcy5hdHlwZTJvaWRMaXN0W3RdO1xuICAgIGVsc2UgaWYgKHRoaXMubmFtZTJvaWRMaXN0W3RdICE9PSB2b2lkIDApXG4gICAgICByID0gdGhpcy5uYW1lMm9pZExpc3RbdF07XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0cmlidXRlVHlwZSBuYW1lIHVuZGVmaW5lZDogXCIgKyB0KTtcbiAgICB2YXIgaSA9IG5ldyBlKHsgb2lkOiByIH0pO1xuICAgIHJldHVybiB0aGlzLm9iakNhY2hlW3RdID0gaSwgaTtcbiAgfSwgdGhpcy5yZWdpc3Rlck9JRHMgPSBmdW5jdGlvbih0KSB7XG4gICAgaWYgKHRoaXMuY2hlY2tPSURzKHQpKVxuICAgICAgZm9yICh2YXIgciBpbiB0KVxuICAgICAgICB0aGlzLm5hbWUyb2lkTGlzdFtyXSA9IHRbcl07XG4gIH0sIHRoaXMuY2hlY2tPSURzID0gZnVuY3Rpb24odCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgciA9IE9iamVjdC5rZXlzKHQpO1xuICAgICAgcmV0dXJuIHIubGVuZ3RoID09IDAgPyAhMSA6IChyLm1hcChmdW5jdGlvbihpLCBzLCBuKSB7XG4gICAgICAgIHZhciBoID0gdGhpc1tpXTtcbiAgICAgICAgaWYgKCFoLm1hdGNoKC9eWzAtMl1cXC5bMC05Ll0rJC8pKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInZhbHVlIGlzIG5vdCBPSURcIik7XG4gICAgICB9LCB0KSwgITApO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgfTtcbn0oKTtcbmEuYXNuMS54NTA5Lk9JRC5vaWQybmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0O1xuICBmb3IgKHZhciByIGluIHQpXG4gICAgaWYgKHRbcl0gPT0gZSlcbiAgICAgIHJldHVybiByO1xuICByZXR1cm4gXCJcIjtcbn07XG5hLmFzbjEueDUwOS5PSUQub2lkMmF0eXBlID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEuYXNuMS54NTA5Lk9JRC5hdHlwZTJvaWRMaXN0O1xuICBmb3IgKHZhciByIGluIHQpXG4gICAgaWYgKHRbcl0gPT0gZSlcbiAgICAgIHJldHVybiByO1xuICByZXR1cm4gZTtcbn07XG5hLmFzbjEueDUwOS5PSUQubmFtZTJvaWQgPSBmdW5jdGlvbihlKSB7XG4gIGlmIChlLm1hdGNoKC9eWzAtOS5dKyQvKSlcbiAgICByZXR1cm4gZTtcbiAgdmFyIHQgPSBhLmFzbjEueDUwOS5PSUQubmFtZTJvaWRMaXN0O1xuICByZXR1cm4gdFtlXSA9PT0gdm9pZCAwID8gXCJcIiA6IHRbZV07XG59O1xuYS5hc24xLng1MDkuWDUwOVV0aWwgPSB7fTtcbmEuYXNuMS54NTA5Llg1MDlVdGlsLm5ld0NlcnRQRU0gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYS5hc24xLng1MDk7XG4gIHQuVEJTQ2VydGlmaWNhdGU7XG4gIHZhciByID0gdC5DZXJ0aWZpY2F0ZSwgaSA9IG5ldyByKGUpO1xuICByZXR1cm4gaS5nZXRQRU0oKTtcbn07XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMSA+IFwidVwiIHx8ICFhLmFzbjEpICYmIChhLmFzbjEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMS5jbXMgPiBcInVcIiB8fCAhYS5hc24xLmNtcykgJiYgKGEuYXNuMS5jbXMgPSB7fSk7XG5hLmFzbjEuY21zLkF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUlNlcXVlbmNlLCBuID0gaS5ERVJTZXQsIGggPSBpLkRFUk9iamVjdElkZW50aWZpZXI7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50eXBlT2lkID0gbnVsbCwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMucGFyYW1zID0gdTtcbiAgfSwgdGhpcy5nZXRWYWx1ZUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IHQoXCJub3QgeWV0IGltcGxlbWVudGVkIGFic3RyYWN0XCIpO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSBuZXcgaCh7IG9pZDogdGhpcy50eXBlT2lkIH0pLCBwID0gbmV3IG4oeyBhcnJheTogdGhpcy5nZXRWYWx1ZUFycmF5KCkgfSksIGMgPSBuZXcgcyh7IGFycmF5OiBbdSwgcF0gfSk7XG4gICAgcmV0dXJuIGMudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfTtcbn07XG5OKGEuYXNuMS5jbXMuQXR0cmlidXRlLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLkNvbnRlbnRUeXBlID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjE7XG4gIHIuY21zLkNvbnRlbnRUeXBlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy50eXBlT2lkID0gXCIxLjIuODQwLjExMzU0OS4xLjkuM1wiLCB0aGlzLmdldFZhbHVlQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IG5ldyByLkRFUk9iamVjdElkZW50aWZpZXIodGhpcy5wYXJhbXMudHlwZSk7XG4gICAgcmV0dXJuIFtpXTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuQ29udGVudFR5cGUsIGEuYXNuMS5jbXMuQXR0cmlidXRlKTtcbmEuYXNuMS5jbXMuTWVzc2FnZURpZ2VzdCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJPY3RldFN0cmluZywgcyA9IHIuY21zO1xuICBzLk1lc3NhZ2VEaWdlc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnR5cGVPaWQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS40XCIsIHRoaXMuZ2V0VmFsdWVBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gbmV3IGkodGhpcy5wYXJhbXMpO1xuICAgIHJldHVybiBbbl07XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLk1lc3NhZ2VEaWdlc3QsIGEuYXNuMS5jbXMuQXR0cmlidXRlKTtcbmEuYXNuMS5jbXMuU2lnbmluZ1RpbWUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgci5jbXMuU2lnbmluZ1RpbWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnR5cGVPaWQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS41XCIsIHRoaXMuZ2V0VmFsdWVBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpID0gbmV3IHIueDUwOS5UaW1lKHRoaXMucGFyYW1zKTtcbiAgICByZXR1cm4gW2ldO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5TaWduaW5nVGltZSwgYS5hc24xLmNtcy5BdHRyaWJ1dGUpO1xuYS5hc24xLmNtcy5TaWduaW5nQ2VydGlmaWNhdGUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5ERVJTZXF1ZW5jZSwgbiA9IGkuY21zLCBoID0gbi5FU1NDZXJ0SUQ7XG4gIHIuY3J5cHRvLCBuLlNpZ25pbmdDZXJ0aWZpY2F0ZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMudHlwZU9pZCA9IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTJcIiwgdGhpcy5nZXRWYWx1ZUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMucGFyYW1zID09IG51bGwgfHwgdGhpcy5wYXJhbXMgPT0gbnVsbCB8fCB0aGlzLnBhcmFtcy5hcnJheSA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IHQoXCJwYXJhbWV0ZXIgJ2FycmF5JyBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIGZvciAodmFyIHUgPSB0aGlzLnBhcmFtcy5hcnJheSwgcCA9IFtdLCBjID0gMDsgYyA8IHUubGVuZ3RoOyBjKyspIHtcbiAgICAgIHZhciB5ID0gdVtjXTtcbiAgICAgIGUuaGFzaXMgPT0gITEgJiYgdHlwZW9mIHkgPT0gXCJzdHJpbmdcIiAmJiAoeS5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSB8fCBWLmlzQVNOMUhFWCh5KSkgJiYgKHkgPSB7IGNlcnQ6IHkgfSksIHkuaGFzaXMgIT0gITEgJiYgZS5oYXNpcyA9PSAhMSAmJiAoeS5oYXNpcyA9ICExKSwgcC5wdXNoKG5ldyBoKHkpKTtcbiAgICB9XG4gICAgdmFyIHYgPSBuZXcgcyh7IGFycmF5OiBwIH0pLCBvID0gbmV3IHMoeyBhcnJheTogW3ZdIH0pO1xuICAgIHJldHVybiBbb107XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZSwgYS5hc24xLmNtcy5BdHRyaWJ1dGUpO1xuYS5hc24xLmNtcy5FU1NDZXJ0SUQgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5jbXMuRVNTQ2VydElELnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUk9jdGV0U3RyaW5nLCBuID0gaS5ERVJTZXF1ZW5jZSwgaCA9IGkuY21zLklzc3VlclNlcmlhbDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldENlcnRIYXNoID0gZnVuY3Rpb24odSwgcCkge1xuICAgIGlmICh1Lmhhc2ggIT0gbnVsbClcbiAgICAgIHJldHVybiB1Lmhhc2g7XG4gICAgaWYgKHR5cGVvZiB1ID09IFwic3RyaW5nXCIgJiYgdS5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSA9PSAtMSAmJiAhVi5pc0FTTjFIRVgodSkpXG4gICAgICByZXR1cm4gdTtcbiAgICB2YXIgYztcbiAgICBpZiAodHlwZW9mIHUgPT0gXCJzdHJpbmdcIilcbiAgICAgIGMgPSB1O1xuICAgIGVsc2UgaWYgKHUuY2VydCAhPSBudWxsKVxuICAgICAgYyA9IHUuY2VydDtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgdChcImhhc2ggbm9yIGNlcnQgdW5zcGVjaWZpZWRcIik7XG4gICAgdmFyIHk7XG4gICAgYy5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSA/IHkgPSBpZShjKSA6IHkgPSBjLCB0eXBlb2YgdSA9PSBcInN0cmluZ1wiICYmICh1LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xID8geSA9IGllKHUpIDogVi5pc0FTTjFIRVgodSkgJiYgKHkgPSB1KSk7XG4gICAgdmFyIHY7XG4gICAgaWYgKHUuYWxnICE9IG51bGwpXG4gICAgICB2ID0gdS5hbGc7XG4gICAgZWxzZSBpZiAocCAhPSBudWxsKVxuICAgICAgdiA9IHA7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IHQoXCJoYXNoIGFsZyB1bnNwZWNpZmllZFwiKTtcbiAgICByZXR1cm4gci5jcnlwdG8uVXRpbC5oYXNoSGV4KHksIHYpO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcywgcCA9IHRoaXMuZ2V0Q2VydEhhc2godSwgXCJzaGExXCIpLCBjID0gW107XG4gICAgYy5wdXNoKG5ldyBzKHsgaGV4OiBwIH0pKSwgKHR5cGVvZiB1ID09IFwic3RyaW5nXCIgJiYgdS5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSB8fCB1LmNlcnQgIT0gbnVsbCAmJiB1Lmhhc2lzICE9ICExIHx8IHUuaXNzdWVyICE9IG51bGwgJiYgdS5zZXJpYWwgIT0gbnVsbCkgJiYgYy5wdXNoKG5ldyBoKHUpKTtcbiAgICB2YXIgeSA9IG5ldyBuKHsgYXJyYXk6IGMgfSk7XG4gICAgcmV0dXJuIHkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuRVNTQ2VydElELCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVSU2VxdWVuY2U7XG4gIGkueDUwOTtcbiAgdmFyIG4gPSBpLmNtcywgaCA9IG4uRVNTQ2VydElEdjI7XG4gIHIuY3J5cHRvLCBuLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy50eXBlT2lkID0gXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi40N1wiLCB0aGlzLmdldFZhbHVlQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5wYXJhbXMgPT0gbnVsbCB8fCB0aGlzLnBhcmFtcyA9PSBudWxsIHx8IHRoaXMucGFyYW1zLmFycmF5ID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcInBhcmFtZXRlciAnYXJyYXknIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgZm9yICh2YXIgdSA9IHRoaXMucGFyYW1zLmFycmF5LCBwID0gW10sIGMgPSAwOyBjIDwgdS5sZW5ndGg7IGMrKykge1xuICAgICAgdmFyIHkgPSB1W2NdO1xuICAgICAgKGUuYWxnICE9IG51bGwgfHwgZS5oYXNpcyA9PSAhMSkgJiYgdHlwZW9mIHkgPT0gXCJzdHJpbmdcIiAmJiAoeS5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSB8fCBWLmlzQVNOMUhFWCh5KSkgJiYgKHkgPSB7IGNlcnQ6IHkgfSksIHkuYWxnID09IG51bGwgJiYgZS5hbGcgIT0gbnVsbCAmJiAoeS5hbGcgPSBlLmFsZyksIHkuaGFzaXMgIT0gITEgJiYgZS5oYXNpcyA9PSAhMSAmJiAoeS5oYXNpcyA9ICExKSwgcC5wdXNoKG5ldyBoKHkpKTtcbiAgICB9XG4gICAgdmFyIHYgPSBuZXcgcyh7IGFycmF5OiBwIH0pLCBvID0gbmV3IHMoeyBhcnJheTogW3ZdIH0pO1xuICAgIHJldHVybiBbb107XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyLCBhLmFzbjEuY21zLkF0dHJpYnV0ZSk7XG5hLmFzbjEuY21zLkVTU0NlcnRJRHYyID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuY21zLkVTU0NlcnRJRHYyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJPY3RldFN0cmluZywgcyA9IHIuREVSU2VxdWVuY2UsIG4gPSByLmNtcy5Jc3N1ZXJTZXJpYWwsIGggPSByLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcjtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcywgcCA9IHRoaXMuZ2V0Q2VydEhhc2godSwgXCJzaGEyNTZcIiksIGMgPSBbXTtcbiAgICB1LmFsZyAhPSBudWxsICYmIHUuYWxnICE9IFwic2hhMjU2XCIgJiYgYy5wdXNoKG5ldyBoKHsgbmFtZTogdS5hbGcgfSkpLCBjLnB1c2gobmV3IGkoeyBoZXg6IHAgfSkpLCAodHlwZW9mIHUgPT0gXCJzdHJpbmdcIiAmJiB1LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xIHx8IHUuY2VydCAhPSBudWxsICYmIHUuaGFzaXMgIT0gITEgfHwgdS5pc3N1ZXIgIT0gbnVsbCAmJiB1LnNlcmlhbCAhPSBudWxsKSAmJiBjLnB1c2gobmV3IG4odSkpO1xuICAgIHZhciB5ID0gbmV3IHMoeyBhcnJheTogYyB9KTtcbiAgICByZXR1cm4geS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5FU1NDZXJ0SUR2MiwgYS5hc24xLmNtcy5FU1NDZXJ0SUQpO1xuYS5hc24xLmNtcy5Jc3N1ZXJTZXJpYWwgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5ERVJJbnRlZ2VyLCBuID0gaS5ERVJTZXF1ZW5jZSwgaCA9IGkuY21zLCB1ID0gaS54NTA5LCBwID0gdS5HZW5lcmFsTmFtZXMsIGMgPSBMO1xuICBoLklzc3VlclNlcmlhbC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHkpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHk7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgeSA9IHRoaXMucGFyYW1zLCB2LCBvO1xuICAgIGlmICh0eXBlb2YgeSA9PSBcInN0cmluZ1wiICYmIHkuaW5kZXhPZihcIi0tLS0tQkVHSU5cIikgIT0gLTEgfHwgeS5jZXJ0ICE9IG51bGwpIHtcbiAgICAgIHZhciBsO1xuICAgICAgeS5jZXJ0ICE9IG51bGwgPyBsID0geS5jZXJ0IDogbCA9IHk7XG4gICAgICB2YXIgZiA9IG5ldyBjKCk7XG4gICAgICBmLnJlYWRDZXJ0UEVNKGwpLCB2ID0gZi5nZXRJc3N1ZXIoKSwgbyA9IHsgaGV4OiBmLmdldFNlcmlhbE51bWJlckhleCgpIH07XG4gICAgfSBlbHNlIGlmICh5Lmlzc3VlciAhPSBudWxsICYmIHkuc2VyaWFsKVxuICAgICAgdiA9IHkuaXNzdWVyLCBvID0geS5zZXJpYWw7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IHQoXCJjZXJ0IG9yIGlzc3VlciBhbmQgc2VyaWFsIHBhcmFtZXRlciBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIHZhciBkID0gbmV3IHAoW3sgZG46IHYgfV0pLCBnID0gbmV3IHMobyksIFMgPSBuZXcgbih7IGFycmF5OiBbZCwgZ10gfSk7XG4gICAgcmV0dXJuIFMudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuSXNzdWVyU2VyaWFsLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLlNpZ25lcklkZW50aWZpZXIgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgci5ERVJJbnRlZ2VyLCByLkRFUlNlcXVlbmNlO1xuICB2YXIgaSA9IHIuY21zLCBzID0gaS5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIsIG4gPSBpLlN1YmplY3RLZXlJZGVudGlmaWVyLCBoID0gci54NTA5O1xuICBoLlg1MDBOYW1lLCBpLlNpZ25lcklkZW50aWZpZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IHRoaXMucGFyYW1zO1xuICAgIGlmICh1LnR5cGUgPT0gXCJpc3NzblwiKSB7XG4gICAgICB2YXIgcCA9IG5ldyBzKHUpO1xuICAgICAgcmV0dXJuIHAudG9oZXgoKTtcbiAgICB9IGVsc2UgaWYgKHUudHlwZSA9PSBcInNraWRcIikge1xuICAgICAgdmFyIGMgPSBuZXcgbih1KTtcbiAgICAgIHJldHVybiBjLnRvaGV4KCk7XG4gICAgfSBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ3cm9uZyBwcm9wZXJ0eSBmb3IgaXNzc24gb3Igc2tpZFwiKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuU2lnbmVySWRlbnRpZmllciwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNtcy5Jc3N1ZXJBbmRTZXJpYWxOdW1iZXIgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSSW50ZWdlciwgcyA9IHIuREVSU2VxdWVuY2UsIG4gPSByLmNtcywgaCA9IHIueDUwOSwgdSA9IGguWDUwME5hbWUsIHAgPSBMLCBjID0gRXJyb3I7XG4gIG4uSXNzdWVyQW5kU2VyaWFsTnVtYmVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHkgPSB0aGlzLnBhcmFtcywgdiwgbztcbiAgICBpZiAodHlwZW9mIHkgPT0gXCJzdHJpbmdcIiAmJiB5LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xIHx8IHkuY2VydCAhPSBudWxsKSB7XG4gICAgICB2YXIgbDtcbiAgICAgIHkuY2VydCAhPSBudWxsID8gbCA9IHkuY2VydCA6IGwgPSB5O1xuICAgICAgdmFyIGYgPSBuZXcgcCgpO1xuICAgICAgZi5yZWFkQ2VydFBFTShsKSwgdiA9IGYuZ2V0SXNzdWVyKCksIG8gPSB7IGhleDogZi5nZXRTZXJpYWxOdW1iZXJIZXgoKSB9O1xuICAgIH0gZWxzZSBpZiAoeS5pc3N1ZXIgIT0gbnVsbCAmJiB5LnNlcmlhbClcbiAgICAgIHYgPSB5Lmlzc3VlciwgbyA9IHkuc2VyaWFsO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBjKFwiY2VydCBvciBpc3N1ZXIgYW5kIHNlcmlhbCBwYXJhbWV0ZXIgbm90IHNwZWNpZmllZFwiKTtcbiAgICB2YXIgZCA9IG5ldyB1KHYpLCBnID0gbmV3IGkobyksIFMgPSBuZXcgcyh7IGFycmF5OiBbZCwgZ10gfSk7XG4gICAgcmV0dXJuIFMudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24oeSkge1xuICAgIHRoaXMucGFyYW1zID0geTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuSXNzdWVyQW5kU2VyaWFsTnVtYmVyLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLlN1YmplY3RLZXlJZGVudGlmaWVyID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjE7XG4gIHIuREVSSW50ZWdlciwgci5ERVJTZXF1ZW5jZTtcbiAgdmFyIGkgPSByLkFTTjFVdGlsLm5ld09iamVjdCwgcyA9IHIuY21zO1xuICBzLklzc3VlckFuZFNlcmlhbE5hbWUsIHMuU3ViamVjdEtleUlkZW50aWZpZXI7XG4gIHZhciBuID0gci54NTA5O1xuICBuLlg1MDBOYW1lO1xuICB2YXIgaCA9IEwsIHUgPSBFcnJvcjtcbiAgcy5TdWJqZWN0S2V5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcCA9IHRoaXMucGFyYW1zO1xuICAgIGlmIChwLmNlcnQgPT0gbnVsbCAmJiBwLnNraWQgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyB1KFwicHJvcGVydHkgY2VydCBub3Igc2tpZCB1bmRlZmluZWRcIik7XG4gICAgdmFyIGM7XG4gICAgaWYgKHAuY2VydCAhPSBudWxsKSB7XG4gICAgICB2YXIgeSA9IG5ldyBoKHAuY2VydCksIHYgPSB5LmdldEV4dFN1YmplY3RLZXlJZGVudGlmaWVyKCk7XG4gICAgICBjID0gdi5raWQuaGV4O1xuICAgIH0gZWxzZVxuICAgICAgcC5za2lkICE9IG51bGwgJiYgKGMgPSBwLnNraWQpO1xuICAgIHZhciBvID0gaSh7IHRhZzogeyB0YWdlOiBcImEwXCIsIG9iajogeyBvY3RzdHI6IHsgaGV4OiBjIH0gfSB9IH0pO1xuICAgIHJldHVybiBvLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLlN1YmplY3RLZXlJZGVudGlmaWVyLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3QgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5ERVJTZXQsIG4gPSBpLmNtcztcbiAgbi5BdHRyaWJ1dGVMaXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmhUTFYgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihoKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBoO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSB0aGlzLnBhcmFtcztcbiAgICBpZiAodGhpcy5oVExWICE9IG51bGwpXG4gICAgICByZXR1cm4gdGhpcy5oVExWO1xuICAgIHZhciB1ID0gITA7XG4gICAgaC5zb3J0ZmxhZyAhPSBudWxsICYmICh1ID0gaC5zb3J0ZmxhZyk7XG4gICAgZm9yICh2YXIgcCA9IGguYXJyYXksIGMgPSBbXSwgeSA9IDA7IHkgPCBwLmxlbmd0aDsgeSsrKSB7XG4gICAgICB2YXIgdiA9IHBbeV0sIG8gPSB2LmF0dHI7XG4gICAgICBpZiAobyA9PSBcImNvbnRlbnRUeXBlXCIpXG4gICAgICAgIGMucHVzaChuZXcgbi5Db250ZW50VHlwZSh2KSk7XG4gICAgICBlbHNlIGlmIChvID09IFwibWVzc2FnZURpZ2VzdFwiKVxuICAgICAgICBjLnB1c2gobmV3IG4uTWVzc2FnZURpZ2VzdCh2KSk7XG4gICAgICBlbHNlIGlmIChvID09IFwic2lnbmluZ1RpbWVcIilcbiAgICAgICAgYy5wdXNoKG5ldyBuLlNpZ25pbmdUaW1lKHYpKTtcbiAgICAgIGVsc2UgaWYgKG8gPT0gXCJzaWduaW5nQ2VydGlmaWNhdGVcIilcbiAgICAgICAgYy5wdXNoKG5ldyBuLlNpZ25pbmdDZXJ0aWZpY2F0ZSh2KSk7XG4gICAgICBlbHNlIGlmIChvID09IFwic2lnbmluZ0NlcnRpZmljYXRlVjJcIilcbiAgICAgICAgYy5wdXNoKG5ldyBuLlNpZ25pbmdDZXJ0aWZpY2F0ZVYyKHYpKTtcbiAgICAgIGVsc2UgaWYgKG8gPT0gXCJzaWduYXR1cmVQb2xpY3lJZGVudGlmaWVyXCIpXG4gICAgICAgIGMucHVzaChuZXcgYS5hc24xLmNhZGVzLlNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXIodikpO1xuICAgICAgZWxzZSBpZiAobyA9PSBcInNpZ25hdHVyZVRpbWVTdGFtcFwiIHx8IG8gPT0gXCJ0aW1lU3RhbXBUb2tlblwiKVxuICAgICAgICBjLnB1c2gobmV3IGEuYXNuMS5jYWRlcy5TaWduYXR1cmVUaW1lU3RhbXAodikpO1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgdChcInVua25vd24gYXR0cjogXCIgKyBvKTtcbiAgICB9XG4gICAgdmFyIGwgPSBuZXcgcyh7IGFycmF5OiBjLCBzb3J0ZmxhZzogdSB9KTtcbiAgICByZXR1cm4gdGhpcy5oVExWID0gbC50b2hleCgpLCB0aGlzLmhUTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLkF0dHJpYnV0ZUxpc3QsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuU2lnbmVySW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUkludGVnZXIsIG4gPSBpLkRFUk9jdGV0U3RyaW5nLCBoID0gaS5ERVJTZXF1ZW5jZSwgdSA9IGkuREVSVGFnZ2VkT2JqZWN0LCBwID0gaS5jbXMsIGMgPSBwLlNpZ25lcklkZW50aWZpZXIsIHkgPSBwLkF0dHJpYnV0ZUxpc3Q7XG4gIHAuQ29udGVudFR5cGUsIHAuRW5jYXBzdWxhdGVkQ29udGVudEluZm8sIHAuTWVzc2FnZURpZ2VzdCwgcC5TaWduZWREYXRhO1xuICB2YXIgdiA9IGkueDUwOSwgbyA9IHYuQWxnb3JpdGhtSWRlbnRpZmllciwgbCA9IHIuY3J5cHRvLCBmID0gaztcbiAgcC5TaWduZXJJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNpZ24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZCA9IHRoaXMucGFyYW1zLCBnID0gZC5zaWdhbGcsIFMgPSBuZXcgeShkLnNhdHRycykudG9oZXgoKSwgYiA9IGYuZ2V0S2V5KGQuc2lnbmtleSksIEQgPSBuZXcgbC5TaWduYXR1cmUoeyBhbGc6IGcgfSk7XG4gICAgRC5pbml0KGIpLCBELnVwZGF0ZUhleChTKTtcbiAgICB2YXIgQSA9IEQuc2lnbigpO1xuICAgIGQuc2lnaGV4ID0gQTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkID0gdGhpcy5wYXJhbXMsIGcgPSBbXTtcbiAgICBpZiAoZy5wdXNoKG5ldyBzKHsgaW50OiBkLnZlcnNpb24gfSkpLCBnLnB1c2gobmV3IGMoZC5pZCkpLCBnLnB1c2gobmV3IG8oeyBuYW1lOiBkLmhhc2hhbGcgfSkpLCBkLnNhdHRycyAhPSBudWxsKSB7XG4gICAgICB2YXIgUyA9IG5ldyB5KGQuc2F0dHJzKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGcucHVzaChuZXcgdSh7IHRhZzogXCJhMFwiLCBleHBsaWNpdDogITEsIG9iajogUyB9KSk7XG4gICAgICB9IGNhdGNoIChEKSB7XG4gICAgICAgIHRocm93IG5ldyB0KFwic2kgc2F0dHIgZXJyb3I6IFwiICsgRCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkLnNpZ2FsZ2ZpZWxkICE9IG51bGwgPyBnLnB1c2gobmV3IG8oeyBuYW1lOiBkLnNpZ2FsZ2ZpZWxkIH0pKSA6IGcucHVzaChuZXcgbyh7IG5hbWU6IGQuc2lnYWxnIH0pKSwgZC5zaWdoZXggPT0gbnVsbCAmJiBkLnNpZ25rZXkgIT0gbnVsbCAmJiB0aGlzLnNpZ24oKSwgZy5wdXNoKG5ldyBuKHsgaGV4OiBkLnNpZ2hleCB9KSksIGQudWF0dHJzICE9IG51bGwpIHtcbiAgICAgIHZhciBTID0gbmV3IHkoZC51YXR0cnMpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZy5wdXNoKG5ldyB1KHsgdGFnOiBcImExXCIsIGV4cGxpY2l0OiAhMSwgb2JqOiBTIH0pKTtcbiAgICAgIH0gY2F0Y2ggKEEpIHtcbiAgICAgICAgdGhyb3cgbmV3IHQoXCJzaSB1YXR0ciBlcnJvcjogXCIgKyBBKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGIgPSBuZXcgaCh7IGFycmF5OiBnIH0pO1xuICAgIHJldHVybiBiLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLlNpZ25lckluZm8sIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuRW5jYXBzdWxhdGVkQ29udGVudEluZm8gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSVGFnZ2VkT2JqZWN0LCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IHIuREVST2JqZWN0SWRlbnRpZmllciwgaCA9IHIuREVST2N0ZXRTdHJpbmcsIHUgPSByLmNtcztcbiAgdS5FbmNhcHN1bGF0ZWRDb250ZW50SW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gdGhpcy5wYXJhbXMsIGMgPSBbXTtcbiAgICBpZiAoYy5wdXNoKG5ldyBuKHAudHlwZSkpLCBwLmNvbnRlbnQgIT0gbnVsbCAmJiAocC5jb250ZW50LmhleCAhPSBudWxsIHx8IHAuY29udGVudC5zdHIgIT0gbnVsbCkgJiYgcC5pc0RldGFjaGVkICE9ICEwKSB7XG4gICAgICB2YXIgeSA9IG5ldyBoKHAuY29udGVudCksIHYgPSBuZXcgaSh7IHRhZzogXCJhMFwiLCBleHBsaWNpdDogITAsIG9iajogeSB9KTtcbiAgICAgIGMucHVzaCh2KTtcbiAgICB9XG4gICAgdmFyIG8gPSBuZXcgcyh7IGFycmF5OiBjIH0pO1xuICAgIHJldHVybiBvLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHApIHtcbiAgICB0aGlzLnBhcmFtcyA9IHA7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLkNvbnRlbnRJbmZvID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlRhZ2dlZE9iamVjdCwgcyA9IHIuREVSU2VxdWVuY2UsIG4gPSByLkRFUk9iamVjdElkZW50aWZpZXIsIGggPSByLng1MDk7XG4gIGguT0lELm5hbWUyb2JqLCBhLmFzbjEuY21zLkNvbnRlbnRJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcywgcCA9IFtdO1xuICAgIHAucHVzaChuZXcgbih1LnR5cGUpKTtcbiAgICB2YXIgYyA9IG5ldyBpKHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiB1Lm9iaiB9KTtcbiAgICBwLnB1c2goYyk7XG4gICAgdmFyIHkgPSBuZXcgcyh7IGFycmF5OiBwIH0pO1xuICAgIHJldHVybiB5LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHUpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHU7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLkNvbnRlbnRJbmZvLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLlNpZ25lZERhdGEgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgci5BU04xT2JqZWN0O1xuICB2YXIgaSA9IHIuREVSSW50ZWdlciwgcyA9IHIuREVSU2V0LCBuID0gci5ERVJTZXF1ZW5jZTtcbiAgci5ERVJUYWdnZWRPYmplY3Q7XG4gIHZhciBoID0gci5jbXMsIHUgPSBoLkVuY2Fwc3VsYXRlZENvbnRlbnRJbmZvLCBwID0gaC5TaWduZXJJbmZvLCBjID0gaC5Db250ZW50SW5mbywgeSA9IGguQ2VydGlmaWNhdGVTZXQsIHYgPSBoLlJldm9jYXRpb25JbmZvQ2hvaWNlcywgbyA9IHIueDUwOSwgbCA9IG8uQWxnb3JpdGhtSWRlbnRpZmllcjtcbiAgYS5hc24xLmNtcy5TaWduZWREYXRhLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmNoZWNrQW5kRml4UGFyYW0gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZiA9IHRoaXMucGFyYW1zO1xuICAgIHRoaXMuX3NldERpZ2VzdEFsZ3MoZiksIHRoaXMuX3NldENvbnRlbnRUeXBlQnlFQ29udGVudChmKSwgdGhpcy5fc2V0TWVzc2FnZURpZ2VzdEJ5RUNvbnRlbnQoZiksIHRoaXMuX3NldFNpZ25lckluZm9WZXJzaW9uKGYpLCB0aGlzLl9zZXRTaWduZWREYXRhVmVyc2lvbihmKTtcbiAgfSwgdGhpcy5fc2V0RGlnZXN0QWxncyA9IGZ1bmN0aW9uKGYpIHtcbiAgICBmb3IgKHZhciBkID0ge30sIGcgPSBmLnNpbmZvcywgUyA9IDA7IFMgPCBnLmxlbmd0aDsgUysrKSB7XG4gICAgICB2YXIgYiA9IGdbU107XG4gICAgICBkW2IuaGFzaGFsZ10gPSAxO1xuICAgIH1cbiAgICBmLmhhc2hhbGdzID0gT2JqZWN0LmtleXMoZCkuc29ydCgpO1xuICB9LCB0aGlzLl9zZXRDb250ZW50VHlwZUJ5RUNvbnRlbnQgPSBmdW5jdGlvbihmKSB7XG4gICAgZm9yICh2YXIgZCA9IGYuZWNvbnRlbnQudHlwZSwgZyA9IGYuc2luZm9zLCBTID0gMDsgUyA8IGcubGVuZ3RoOyBTKyspIHtcbiAgICAgIHZhciBiID0gZ1tTXSwgRCA9IHRoaXMuX2dldEF0dHJQYXJhbUJ5TmFtZShiLCBcImNvbnRlbnRUeXBlXCIpO1xuICAgICAgRC50eXBlID0gZDtcbiAgICB9XG4gIH0sIHRoaXMuX3NldE1lc3NhZ2VEaWdlc3RCeUVDb250ZW50ID0gZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0gZi5lY29udGVudDtcbiAgICBmLmVjb250ZW50LnR5cGU7XG4gICAgdmFyIGcgPSBkLmNvbnRlbnQuaGV4O1xuICAgIGcgPT0gbnVsbCAmJiBkLnR5cGUgPT0gXCJkYXRhXCIgJiYgZC5jb250ZW50LnN0ciAhPSBudWxsICYmIChnID0gUGUoZC5jb250ZW50LnN0cikpO1xuICAgIGZvciAodmFyIFMgPSBmLnNpbmZvcywgYiA9IDA7IGIgPCBTLmxlbmd0aDsgYisrKSB7XG4gICAgICB2YXIgRCA9IFNbYl0sIEEgPSBELmhhc2hhbGcsIEkgPSB0aGlzLl9nZXRBdHRyUGFyYW1CeU5hbWUoRCwgXCJtZXNzYWdlRGlnZXN0XCIpLCBtID0gYS5jcnlwdG8uVXRpbC5oYXNoSGV4KGcsIEEpO1xuICAgICAgSS5oZXggPSBtO1xuICAgIH1cbiAgfSwgdGhpcy5fZ2V0QXR0clBhcmFtQnlOYW1lID0gZnVuY3Rpb24oZiwgZCkge1xuICAgIGZvciAodmFyIGcgPSBmLnNhdHRycy5hcnJheSwgUyA9IDA7IFMgPCBnLmxlbmd0aDsgUysrKVxuICAgICAgaWYgKGdbU10uYXR0ciA9PSBkKVxuICAgICAgICByZXR1cm4gZ1tTXTtcbiAgfSwgdGhpcy5fc2V0U2lnbmVySW5mb1ZlcnNpb24gPSBmdW5jdGlvbihmKSB7XG4gICAgZm9yICh2YXIgZCA9IGYuc2luZm9zLCBnID0gMDsgZyA8IGQubGVuZ3RoOyBnKyspIHtcbiAgICAgIHZhciBTID0gZFtnXSwgYiA9IDE7XG4gICAgICBTLmlkLnR5cGUgPT0gXCJza2lkXCIgJiYgKGIgPSAzKSwgUy52ZXJzaW9uID0gYjtcbiAgICB9XG4gIH0sIHRoaXMuX3NldFNpZ25lZERhdGFWZXJzaW9uID0gZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0gdGhpcy5fZ2V0U2lnbmVkRGF0YVZlcnNpb24oZik7XG4gICAgZi52ZXJzaW9uID0gZDtcbiAgfSwgdGhpcy5fZ2V0U2lnbmVkRGF0YVZlcnNpb24gPSBmdW5jdGlvbihmKSB7XG4gICAgaWYgKGYucmV2aW5mb3MgIT0gbnVsbClcbiAgICAgIGZvciAodmFyIGQgPSBmLnJldmluZm9zLCBnID0gMDsgZyA8IGQubGVuZ3RoOyBnKyspIHtcbiAgICAgICAgdmFyIFMgPSBkW2ddO1xuICAgICAgICBpZiAoUy5vY3NwICE9IG51bGwpXG4gICAgICAgICAgcmV0dXJuIDU7XG4gICAgICB9XG4gICAgZm9yICh2YXIgYiA9IGYuc2luZm9zLCBnID0gMDsgZyA8IGIubGVuZ3RoOyBnKyspIHtcbiAgICAgIHZhciBEID0gZi5zaW5mb3NbZ107XG4gICAgICBpZiAoRC52ZXJzaW9uID09IDMpXG4gICAgICAgIHJldHVybiAzO1xuICAgIH1cbiAgICByZXR1cm4gZi5lY29udGVudC50eXBlICE9IFwiZGF0YVwiID8gMyA6IDE7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZiA9IHRoaXMucGFyYW1zO1xuICAgIHRoaXMuZ2V0RW5jb2RlZEhleFByZXBhcmUgIT0gbnVsbCAmJiB0aGlzLmdldEVuY29kZWRIZXhQcmVwYXJlKCksIGYuZml4ZWQgIT0gITAgJiYgdGhpcy5jaGVja0FuZEZpeFBhcmFtKCk7XG4gICAgdmFyIGQgPSBbXTtcbiAgICBkLnB1c2gobmV3IGkoeyBpbnQ6IGYudmVyc2lvbiB9KSk7XG4gICAgZm9yICh2YXIgZyA9IFtdLCBTID0gMDsgUyA8IGYuaGFzaGFsZ3MubGVuZ3RoOyBTKyspIHtcbiAgICAgIHZhciBiID0gZi5oYXNoYWxnc1tTXTtcbiAgICAgIGcucHVzaChuZXcgbCh7IG5hbWU6IGIgfSkpO1xuICAgIH1cbiAgICBkLnB1c2gobmV3IHMoeyBhcnJheTogZyB9KSksIGQucHVzaChuZXcgdShmLmVjb250ZW50KSksIGYuY2VydHMgIT0gbnVsbCAmJiBkLnB1c2gobmV3IHkoZi5jZXJ0cykpLCBmLnJldmluZm9zICE9IG51bGwgJiYgZC5wdXNoKG5ldyB2KGYucmV2aW5mb3MpKTtcbiAgICBmb3IgKHZhciBEID0gW10sIFMgPSAwOyBTIDwgZi5zaW5mb3MubGVuZ3RoOyBTKyspIHtcbiAgICAgIHZhciBBID0gZi5zaW5mb3NbU107XG4gICAgICBELnB1c2gobmV3IHAoQSkpO1xuICAgIH1cbiAgICBkLnB1c2gobmV3IHMoeyBhcnJheTogRCB9KSk7XG4gICAgdmFyIEkgPSBuZXcgbih7IGFycmF5OiBkIH0pO1xuICAgIHJldHVybiBJLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0Q29udGVudEluZm8gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZiA9IG5ldyBjKHsgdHlwZTogXCJzaWduZWQtZGF0YVwiLCBvYmo6IHRoaXMgfSk7XG4gICAgcmV0dXJuIGY7XG4gIH0sIHRoaXMuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29udGVudEluZm8oKS50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5TaWduZWREYXRhLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLkNlcnRpZmljYXRlU2V0ID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuY21zLkNlcnRpZmljYXRlU2V0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEuYXNuMSwgaSA9IHIuREVSVGFnZ2VkT2JqZWN0LCBzID0gci5ERVJTZXQsIG4gPSByLkFTTjFPYmplY3Q7XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoID0gdGhpcy5wYXJhbXMsIHUgPSBbXSwgcDtcbiAgICBpZiAoaCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgcCA9IGg7XG4gICAgZWxzZSBpZiAoaC5hcnJheSAhPSBudWxsKVxuICAgICAgcCA9IGguYXJyYXk7XG4gICAgZWxzZVxuICAgICAgdGhyb3cgbmV3IHQoXCJjZXJ0IGFycmF5IG5vdCBzcGVjaWZpZWRcIik7XG4gICAgZm9yICh2YXIgYyA9IDA7IGMgPCBwLmxlbmd0aDsgYysrKSB7XG4gICAgICB2YXIgeSA9IHBbY10sIHYgPSBpZSh5KSwgbyA9IG5ldyBuKCk7XG4gICAgICBvLmhUTFYgPSB2LCB1LnB1c2gobyk7XG4gICAgfVxuICAgIHZhciBsID0geyBhcnJheTogdSB9O1xuICAgIGguc29ydGZsYWcgPT0gITEgJiYgKGwuc29ydGZsYWcgPSAhMSk7XG4gICAgdmFyIGYgPSBuZXcgcyhsKSwgZCA9IG5ldyBpKHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMSwgb2JqOiBmIH0pO1xuICAgIHJldHVybiBkLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLkNlcnRpZmljYXRlU2V0LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLlJldm9jYXRpb25JbmZvQ2hvaWNlcyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLmNtcy5SZXZvY2F0aW9uSW5mb0Nob2ljZXMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IHRoaXMucGFyYW1zO1xuICAgIGlmICghdCBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicGFyYW1zIGlzIG5vdCBhcnJheVwiKTtcbiAgICBmb3IgKHZhciByID0gW10sIGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKylcbiAgICAgIHIucHVzaChuZXcgYS5hc24xLmNtcy5SZXZvY2F0aW9uSW5mb0Nob2ljZSh0W2ldKSk7XG4gICAgdmFyIHMgPSBhLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHsgdGFnOiB7IHRhZ2k6IFwiYTFcIiwgb2JqOiB7IHNldDogciB9IH0gfSk7XG4gICAgcmV0dXJuIHMudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jbXMuUmV2b2NhdGlvbkluZm9DaG9pY2VzLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLlJldm9jYXRpb25JbmZvQ2hvaWNlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuY21zLlJldm9jYXRpb25JbmZvQ2hvaWNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQgPSB0aGlzLnBhcmFtcztcbiAgICBpZiAodC5jcmwgIT0gbnVsbCAmJiB0eXBlb2YgdC5jcmwgPT0gXCJzdHJpbmdcIikge1xuICAgICAgdmFyIHIgPSB0LmNybDtcbiAgICAgIHJldHVybiB0LmNybC5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSAmJiAociA9IGllKHQuY3JsKSksIHI7XG4gICAgfSBlbHNlIGlmICh0Lm9jc3AgIT0gbnVsbCkge1xuICAgICAgdmFyIGkgPSBhLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHsgdGFnOiB7IHRhZ2k6IFwiYTFcIiwgb2JqOiBuZXcgYS5hc24xLmNtcy5PdGhlclJldm9jYXRpb25Gb3JtYXQodCkgfSB9KTtcbiAgICAgIHJldHVybiBpLnRvaGV4KCk7XG4gICAgfSBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwcm9wZXJ0eSBjcmwgb3Igb2NzcCB1bmRlZmluZWRcIik7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY21zLlJldm9jYXRpb25JbmZvQ2hvaWNlLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY21zLk90aGVyUmV2b2NhdGlvbkZvcm1hdCA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLmNtcy5PdGhlclJldm9jYXRpb25Gb3JtYXQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuQVNOMVV0aWwubmV3T2JqZWN0LCBuID0gci5sYW5nLlN0cmluZy5pc0hleDtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSB0aGlzLnBhcmFtcztcbiAgICBpZiAoaC5vY3NwID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcInByb3BlcnR5IG9jc3Agbm90IHNwZWNpZmllZFwiKTtcbiAgICBpZiAoIW4oaC5vY3NwKSB8fCAhVi5pc0FTTjFIRVgoaC5vY3NwKSlcbiAgICAgIHRocm93IG5ldyB0KFwib2NzcCB2YWx1ZSBub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgICB2YXIgdSA9IHMoeyBzZXE6IFt7IG9pZDogXCIxLjMuNi4xLjUuNS43LjE2LjJcIiB9LCB7IGFzbjE6IHsgdGx2OiBoLm9jc3AgfSB9XSB9KTtcbiAgICByZXR1cm4gdS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNtcy5PdGhlclJldm9jYXRpb25Gb3JtYXQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jbXMuQ01TVXRpbCA9IG5ldyBmdW5jdGlvbigpIHtcbn0oKTtcbmEuYXNuMS5jbXMuQ01TVXRpbC5uZXdTaWduZWREYXRhID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gbmV3IGEuYXNuMS5jbXMuU2lnbmVkRGF0YShlKTtcbn07XG5hLmFzbjEuY21zLkNNU1V0aWwudmVyaWZ5U2lnbmVkRGF0YSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5jbXM7XG4gIGkuU2lnbmVySW5mbywgaS5TaWduZWREYXRhLCBpLlNpZ25pbmdUaW1lLCBpLlNpZ25pbmdDZXJ0aWZpY2F0ZSwgaS5TaWduaW5nQ2VydGlmaWNhdGVWMjtcbiAgdmFyIHMgPSByLmNhZGVzO1xuICBzLlNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXI7XG4gIHZhciBuID0gdC5sYW5nLlN0cmluZy5pc0hleCwgaCA9IFYsIHUgPSBoLmdldFZieUxpc3QsIHAgPSBoLmdldFRMVmJ5TGlzdCwgYyA9IGguZ2V0SWR4YnlMaXN0LCB5ID0gaC5nZXRDaGlsZElkeCwgdiA9IGguZ2V0VExWLCBvID0gaC5vaWRuYW1lLCBsID0gdC5jcnlwdG8uVXRpbC5oYXNoSGV4O1xuICBlLmNtcyA9PT0gdm9pZCAwICYmIG4oZS5jbXMpO1xuICB2YXIgZiA9IGUuY21zLCBkID0gZnVuY3Rpb24odywgeCkge1xuICAgIGZvciAodmFyIEYsIFAgPSAzOyBQIDwgNjsgUCsrKVxuICAgICAgaWYgKEYgPSBjKHcsIDAsIFsxLCAwLCBQXSksIEYgIT09IHZvaWQgMCkge1xuICAgICAgICB2YXIgVCA9IHcuc3Vic3RyKEYsIDIpO1xuICAgICAgICBUID09PSBcImEwXCIgJiYgKHguY2VydHNJZHggPSBGKSwgVCA9PT0gXCJhMVwiICYmICh4LnJldmluZm9zSWR4ID0gRiksIFQgPT09IFwiMzFcIiAmJiAoeC5zaWduZXJpbmZvc0lkeCA9IEYpO1xuICAgICAgfVxuICB9LCBnID0gZnVuY3Rpb24odywgeCkge1xuICAgIHZhciBGID0geC5zaWduZXJpbmZvc0lkeDtcbiAgICBpZiAoRiAhPT0gdm9pZCAwKSB7XG4gICAgICB2YXIgUCA9IHkodywgRik7XG4gICAgICB4LnNpZ25lckluZm9JZHhMaXN0ID0gUDtcbiAgICAgIGZvciAodmFyIFQgPSAwOyBUIDwgUC5sZW5ndGg7IFQrKykge1xuICAgICAgICB2YXIgSCA9IFBbVF0sIEMgPSB7IGlkeDogSCB9O1xuICAgICAgICBTKHcsIEMpLCB4LnNpZ25lckluZm9zLnB1c2goQyk7XG4gICAgICB9XG4gICAgfVxuICB9LCBTID0gZnVuY3Rpb24odywgeCkge1xuICAgIHZhciBGID0geC5pZHg7XG4gICAgeC5zaWduZXJpZF9pc3N1ZXIxID0gcCh3LCBGLCBbMSwgMF0sIFwiMzBcIiksIHguc2lnbmVyaWRfc2VyaWFsMSA9IHUodywgRiwgWzEsIDFdLCBcIjAyXCIpLCB4Lmhhc2hhbGcgPSBvKHUodywgRiwgWzIsIDBdLCBcIjA2XCIpKTtcbiAgICB2YXIgUCA9IGModywgRiwgWzNdLCBcImEwXCIpO1xuICAgIHguaWR4U2lnbmVkQXR0cnMgPSBQLCBiKHcsIHgsIFApO1xuICAgIHZhciBUID0geSh3LCBGKSwgSCA9IFQubGVuZ3RoO1xuICAgIGlmIChIIDwgNilcbiAgICAgIHRocm93IFwibWFsZm9ybWVkIFNpZ25lckluZm9cIjtcbiAgICB4LnNpZ2FsZyA9IG8odSh3LCBGLCBbSCAtIDIsIDBdLCBcIjA2XCIpKSwgeC5zaWd2YWwgPSB1KHcsIEYsIFtIIC0gMV0sIFwiMDRcIik7XG4gIH0sIGIgPSBmdW5jdGlvbih3LCB4LCBGKSB7XG4gICAgdmFyIFAgPSB5KHcsIEYpO1xuICAgIHguc2lnbmVkQXR0cklkeExpc3QgPSBQO1xuICAgIGZvciAodmFyIFQgPSAwOyBUIDwgUC5sZW5ndGg7IFQrKykge1xuICAgICAgdmFyIEggPSBQW1RdLCBDID0gdSh3LCBILCBbMF0sIFwiMDZcIiksIEI7XG4gICAgICBDID09PSBcIjJhODY0ODg2ZjcwZDAxMDkwNVwiID8gKEIgPSBXKHUodywgSCwgWzEsIDBdKSksIHguc2FTaWduaW5nVGltZSA9IEIpIDogQyA9PT0gXCIyYTg2NDg4NmY3MGQwMTA5MDRcIiAmJiAoQiA9IHUodywgSCwgWzEsIDBdLCBcIjA0XCIpLCB4LnNhTWVzc2FnZURpZ2VzdCA9IEIpO1xuICAgIH1cbiAgfSwgRCA9IGZ1bmN0aW9uKHcsIHgpIHtcbiAgICBpZiAodSh3LCAwLCBbMF0sIFwiMDZcIikgIT09IFwiMmE4NjQ4ODZmNzBkMDEwNzAyXCIpXG4gICAgICByZXR1cm4geDtcbiAgICB4LmNtc1R5cGUgPSBcInNpZ25lZERhdGFcIiwgeC5lY29udGVudCA9IHUodywgMCwgWzEsIDAsIDIsIDEsIDBdKSwgZCh3LCB4KSwgeC5zaWduZXJJbmZvcyA9IFtdLCBnKHcsIHgpO1xuICB9LCBBID0gZnVuY3Rpb24odywgeCkge1xuICAgIGZvciAodmFyIEYgPSB4LnBhcnNlLnNpZ25lckluZm9zLCBQID0gRi5sZW5ndGgsIFQgPSAhMCwgSCA9IDA7IEggPCBQOyBIKyspIHtcbiAgICAgIHZhciBDID0gRltIXTtcbiAgICAgIG0odywgeCwgQyksIEMuaXNWYWxpZCB8fCAoVCA9ICExKTtcbiAgICB9XG4gICAgeC5pc1ZhbGlkID0gVDtcbiAgfSwgSSA9IGZ1bmN0aW9uKHcsIHgsIEYsIFApIHtcbiAgICB2YXIgVCA9IHgucGFyc2UuY2VydHNJZHgsIEg7XG4gICAgaWYgKHguY2VydHMgPT09IHZvaWQgMCkge1xuICAgICAgSCA9IFtdLCB4LmNlcnRrZXlzID0gW107XG4gICAgICBmb3IgKHZhciBDID0geSh3LCBUKSwgQiA9IDA7IEIgPCBDLmxlbmd0aDsgQisrKSB7XG4gICAgICAgIHZhciBPID0gdih3LCBDW0JdKSwgaiA9IG5ldyBMKCk7XG4gICAgICAgIGoucmVhZENlcnRIZXgoTyksIEhbQl0gPSBqLCB4LmNlcnRrZXlzW0JdID0gai5nZXRQdWJsaWNLZXkoKTtcbiAgICAgIH1cbiAgICAgIHguY2VydHMgPSBIO1xuICAgIH0gZWxzZVxuICAgICAgSCA9IHguY2VydHM7XG4gICAgeC5jY2NjID0gSC5sZW5ndGgsIHguY2NjY2kgPSBDLmxlbmd0aDtcbiAgICBmb3IgKHZhciBCID0gMDsgQiA8IEgubGVuZ3RoOyBCKyspIHtcbiAgICAgIHZhciBmZSA9IGouZ2V0SXNzdWVySGV4KCksIFogPSBqLmdldFNlcmlhbE51bWJlckhleCgpO1xuICAgICAgRi5zaWduZXJpZF9pc3N1ZXIxID09PSBmZSAmJiBGLnNpZ25lcmlkX3NlcmlhbDEgPT09IFogJiYgKEYuY2VydGtleV9pZHggPSBCKTtcbiAgICB9XG4gIH0sIG0gPSBmdW5jdGlvbih3LCB4LCBGLCBQKSB7XG4gICAgRi52ZXJpZnlEZXRhaWwgPSB7fTtcbiAgICB2YXIgVCA9IEYudmVyaWZ5RGV0YWlsLCBIID0geC5wYXJzZS5lY29udGVudCwgQyA9IEYuaGFzaGFsZywgQiA9IEYuc2FNZXNzYWdlRGlnZXN0O1xuICAgIFQudmFsaWRNZXNzYWdlRGlnZXN0ID0gITEsIGwoSCwgQykgPT09IEIgJiYgKFQudmFsaWRNZXNzYWdlRGlnZXN0ID0gITApLCBJKHcsIHgsIEYpLCBULnZhbGlkU2lnbmF0dXJlVmFsdWUgPSAhMTtcbiAgICB2YXIgTyA9IEYuc2lnYWxnLCBqID0gXCIzMVwiICsgdih3LCBGLmlkeFNpZ25lZEF0dHJzKS5zdWJzdHIoMik7XG4gICAgRi5zaWduZWRhdHRyc2hleCA9IGo7XG4gICAgdmFyIGZlID0geC5jZXJ0c1tGLmNlcnRrZXlfaWR4XS5nZXRQdWJsaWNLZXkoKSwgWiA9IG5ldyBhLmNyeXB0by5TaWduYXR1cmUoeyBhbGc6IE8gfSk7XG4gICAgWi5pbml0KGZlKSwgWi51cGRhdGVIZXgoaik7XG4gICAgdmFyIFggPSBaLnZlcmlmeShGLnNpZ3ZhbCk7XG4gICAgVC52YWxpZFNpZ25hdHVyZVZhbHVlX2lzVmFsaWQgPSBYLCBYID09PSAhMCAmJiAoVC52YWxpZFNpZ25hdHVyZVZhbHVlID0gITApLCBGLmlzVmFsaWQgPSAhMSwgVC52YWxpZE1lc3NhZ2VEaWdlc3QgJiYgVC52YWxpZFNpZ25hdHVyZVZhbHVlICYmIChGLmlzVmFsaWQgPSAhMCk7XG4gIH0sIEUgPSB7IGlzVmFsaWQ6ICExLCBwYXJzZToge30gfTtcbiAgcmV0dXJuIEQoZiwgRS5wYXJzZSksIEEoZiwgRSksIEU7XG59O1xuYS5hc24xLmNtcy5DTVNQYXJzZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBFcnJvciwgdCA9IEwsIHIgPSBuZXcgdCgpLCBpID0gViwgcyA9IGkuZ2V0ViwgbiA9IGkuZ2V0VExWO1xuICBpLmdldElkeGJ5TGlzdDtcbiAgdmFyIGggPSBpLmdldFRMVmJ5TGlzdCwgdSA9IGkuZ2V0VExWYnlMaXN0RXgsIHAgPSBpLmdldFZieUxpc3QsIGMgPSBpLmdldFZieUxpc3RFeCwgeSA9IGkuZ2V0Q2hpbGRJZHg7XG4gIHRoaXMuZ2V0Q01TU2lnbmVkRGF0YSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IGgodiwgMCwgWzEsIDBdKSwgbCA9IHRoaXMuZ2V0U2lnbmVkRGF0YShvKTtcbiAgICByZXR1cm4gbDtcbiAgfSwgdGhpcy5nZXRTaWduZWREYXRhID0gZnVuY3Rpb24odikge1xuICAgIHZhciBvID0geSh2LCAwKSwgbCA9IHt9LCBmID0gcyh2LCBvWzBdKSwgZCA9IHBhcnNlSW50KGYsIDE2KTtcbiAgICBsLnZlcnNpb24gPSBkO1xuICAgIHZhciBnID0gbih2LCBvWzFdKTtcbiAgICBsLmhhc2hhbGdzID0gdGhpcy5nZXRIYXNoQWxnQXJyYXkoZyk7XG4gICAgdmFyIFMgPSBuKHYsIG9bMl0pO1xuICAgIGwuZWNvbnRlbnQgPSB0aGlzLmdldEVDb250ZW50KFMpO1xuICAgIHZhciBiID0gdSh2LCAwLCBbXCJbMF1cIl0pO1xuICAgIGIgIT0gbnVsbCAmJiAobC5jZXJ0cyA9IHRoaXMuZ2V0Q2VydGlmaWNhdGVTZXQoYikpLCB1KHYsIDAsIFtcIlsxXVwiXSk7XG4gICAgdmFyIEQgPSB1KHYsIDAsIFszXSk7XG4gICAgcmV0dXJuIGwuc2luZm9zID0gdGhpcy5nZXRTaWduZXJJbmZvcyhEKSwgbDtcbiAgfSwgdGhpcy5nZXRIYXNoQWxnQXJyYXkgPSBmdW5jdGlvbih2KSB7XG4gICAgZm9yICh2YXIgbyA9IHkodiwgMCksIGwgPSBuZXcgdCgpLCBmID0gW10sIGQgPSAwOyBkIDwgby5sZW5ndGg7IGQrKykge1xuICAgICAgdmFyIGcgPSBuKHYsIG9bZF0pLCBTID0gbC5nZXRBbGdvcml0aG1JZGVudGlmaWVyTmFtZShnKTtcbiAgICAgIGYucHVzaChTKTtcbiAgICB9XG4gICAgcmV0dXJuIGY7XG4gIH0sIHRoaXMuZ2V0RUNvbnRlbnQgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB7fSwgbCA9IHAodiwgMCwgWzBdKSwgZiA9IHAodiwgMCwgWzEsIDBdKTtcbiAgICByZXR1cm4gby50eXBlID0gYS5hc24xLng1MDkuT0lELm9pZDJuYW1lKFYuaGV4dG9vaWRzdHIobCkpLCBvLmNvbnRlbnQgPSB7IGhleDogZiB9LCBvO1xuICB9LCB0aGlzLmdldFNpZ25lckluZm9zID0gZnVuY3Rpb24odikge1xuICAgIGZvciAodmFyIG8gPSBbXSwgbCA9IHkodiwgMCksIGYgPSAwOyBmIDwgbC5sZW5ndGg7IGYrKykge1xuICAgICAgdmFyIGQgPSBuKHYsIGxbZl0pLCBnID0gdGhpcy5nZXRTaWduZXJJbmZvKGQpO1xuICAgICAgby5wdXNoKGcpO1xuICAgIH1cbiAgICByZXR1cm4gbztcbiAgfSwgdGhpcy5nZXRTaWduZXJJbmZvID0gZnVuY3Rpb24odikge1xuICAgIHZhciBvID0ge30sIGwgPSB5KHYsIDApLCBmID0gaS5nZXRJbnQodiwgbFswXSwgLTEpO1xuICAgIGYgIT0gLTEgJiYgKG8udmVyc2lvbiA9IGYpO1xuICAgIHZhciBkID0gbih2LCBsWzFdKSwgZyA9IHRoaXMuZ2V0SXNzdWVyQW5kU2VyaWFsTnVtYmVyKGQpO1xuICAgIG8uaWQgPSBnO1xuICAgIHZhciBTID0gbih2LCBsWzJdKSwgYiA9IHIuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWUoUyk7XG4gICAgby5oYXNoYWxnID0gYjtcbiAgICB2YXIgRCA9IHUodiwgMCwgW1wiWzBdXCJdKTtcbiAgICBpZiAoRCAhPSBudWxsKSB7XG4gICAgICB2YXIgQSA9IHRoaXMuZ2V0QXR0cmlidXRlTGlzdChEKTtcbiAgICAgIG8uc2F0dHJzID0gQTtcbiAgICB9XG4gICAgdmFyIEkgPSB1KHYsIDAsIFszXSksIG0gPSByLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lKEkpO1xuICAgIG8uc2lnYWxnID0gbTtcbiAgICB2YXIgRSA9IGModiwgMCwgWzRdKTtcbiAgICBvLnNpZ2hleCA9IEU7XG4gICAgdmFyIHcgPSB1KHYsIDAsIFtcIlsxXVwiXSk7XG4gICAgaWYgKHcgIT0gbnVsbCkge1xuICAgICAgdmFyIHggPSB0aGlzLmdldEF0dHJpYnV0ZUxpc3Qodyk7XG4gICAgICBvLnVhdHRycyA9IHg7XG4gICAgfVxuICAgIHJldHVybiBvO1xuICB9LCB0aGlzLmdldFNpZ25lcklkZW50aWZpZXIgPSBmdW5jdGlvbih2KSB7XG4gICAgaWYgKHYuc3Vic3RyKDAsIDIpID09IFwiMzBcIilcbiAgICAgIHJldHVybiB0aGlzLmdldElzc3VlckFuZFNlcmlhbE51bWJlcih2KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTS0lEIG9mIHNpZ25lcklkZW50aWZpZXIgbm90IHN1cHBvcnRlZFwiKTtcbiAgfSwgdGhpcy5nZXRJc3N1ZXJBbmRTZXJpYWxOdW1iZXIgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB7IHR5cGU6IFwiaXNzc25cIiB9LCBsID0geSh2LCAwKSwgZiA9IG4odiwgbFswXSk7XG4gICAgby5pc3N1ZXIgPSByLmdldFg1MDBOYW1lKGYpO1xuICAgIHZhciBkID0gcyh2LCBsWzFdKTtcbiAgICByZXR1cm4gby5zZXJpYWwgPSB7IGhleDogZCB9LCBvO1xuICB9LCB0aGlzLmdldEF0dHJpYnV0ZUxpc3QgPSBmdW5jdGlvbih2KSB7XG4gICAgZm9yICh2YXIgbyA9IFtdLCBsID0geSh2LCAwKSwgZiA9IDA7IGYgPCBsLmxlbmd0aDsgZisrKSB7XG4gICAgICB2YXIgZCA9IG4odiwgbFtmXSksIGcgPSB0aGlzLmdldEF0dHJpYnV0ZShkKTtcbiAgICAgIG8ucHVzaChnKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgYXJyYXk6IG8gfTtcbiAgfSwgdGhpcy5nZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB7fSwgbCA9IHkodiwgMCksIGYgPSBpLmdldE9JRCh2LCBsWzBdKSwgZCA9IGEuYXNuMS54NTA5Lk9JRC5vaWQybmFtZShmKTtcbiAgICBvLmF0dHIgPSBkO1xuICAgIHZhciBnID0gbih2LCBsWzFdKSwgUyA9IHkoZywgMCk7XG4gICAgaWYgKFMubGVuZ3RoID09IDEpXG4gICAgICBvLnZhbGhleCA9IG4oZywgU1swXSk7XG4gICAgZWxzZSB7XG4gICAgICBmb3IgKHZhciBiID0gW10sIEQgPSAwOyBEIDwgUy5sZW5ndGg7IEQrKylcbiAgICAgICAgYi5wdXNoKG4oZywgU1tEXSkpO1xuICAgICAgby52YWxoZXggPSBiO1xuICAgIH1cbiAgICByZXR1cm4gZCA9PSBcImNvbnRlbnRUeXBlXCIgPyB0aGlzLnNldENvbnRlbnRUeXBlKG8pIDogZCA9PSBcIm1lc3NhZ2VEaWdlc3RcIiA/IHRoaXMuc2V0TWVzc2FnZURpZ2VzdChvKSA6IGQgPT0gXCJzaWduaW5nVGltZVwiID8gdGhpcy5zZXRTaWduaW5nVGltZShvKSA6IGQgPT0gXCJzaWduaW5nQ2VydGlmaWNhdGVcIiA/IHRoaXMuc2V0U2lnbmluZ0NlcnRpZmljYXRlKG8pIDogZCA9PSBcInNpZ25pbmdDZXJ0aWZpY2F0ZVYyXCIgPyB0aGlzLnNldFNpZ25pbmdDZXJ0aWZpY2F0ZVYyKG8pIDogZCA9PSBcInNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXJcIiAmJiB0aGlzLnNldFNpZ25hdHVyZVBvbGljeUlkZW50aWZpZXIobyksIG87XG4gIH0sIHRoaXMuc2V0Q29udGVudFR5cGUgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSBpLmdldE9JRE5hbWUodi52YWxoZXgsIDAsIG51bGwpO1xuICAgIG8gIT0gbnVsbCAmJiAodi50eXBlID0gbywgZGVsZXRlIHYudmFsaGV4KTtcbiAgfSwgdGhpcy5zZXRTaWduaW5nVGltZSA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHModi52YWxoZXgsIDApLCBsID0gVyhvKTtcbiAgICB2LnN0ciA9IGwsIGRlbGV0ZSB2LnZhbGhleDtcbiAgfSwgdGhpcy5zZXRNZXNzYWdlRGlnZXN0ID0gZnVuY3Rpb24odikge1xuICAgIHZhciBvID0gcyh2LnZhbGhleCwgMCk7XG4gICAgdi5oZXggPSBvLCBkZWxldGUgdi52YWxoZXg7XG4gIH0sIHRoaXMuc2V0U2lnbmluZ0NlcnRpZmljYXRlID0gZnVuY3Rpb24odikge1xuICAgIHZhciBvID0geSh2LnZhbGhleCwgMCk7XG4gICAgaWYgKG8ubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgbCA9IG4odi52YWxoZXgsIG9bMF0pLCBmID0geShsLCAwKSwgZCA9IFtdLCBnID0gMDsgZyA8IGYubGVuZ3RoOyBnKyspIHtcbiAgICAgICAgdmFyIFMgPSBuKGwsIGZbZ10pLCBiID0gdGhpcy5nZXRFU1NDZXJ0SUQoUyk7XG4gICAgICAgIGQucHVzaChiKTtcbiAgICAgIH1cbiAgICAgIHYuYXJyYXkgPSBkO1xuICAgIH1cbiAgICBpZiAoby5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgRCA9IG4odi52YWxoZXgsIG9bMV0pO1xuICAgICAgdi5wb2xoZXggPSBEO1xuICAgIH1cbiAgICBkZWxldGUgdi52YWxoZXg7XG4gIH0sIHRoaXMuc2V0U2lnbmF0dXJlUG9saWN5SWRlbnRpZmllciA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHkodi52YWxoZXgsIDApO1xuICAgIGlmIChvLmxlbmd0aCA+IDApIHtcbiAgICAgIHZhciBsID0gaS5nZXRPSUQodi52YWxoZXgsIG9bMF0pO1xuICAgICAgdi5vaWQgPSBsO1xuICAgIH1cbiAgICBpZiAoby5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgZiA9IG5ldyB0KCksIGQgPSB5KHYudmFsaGV4LCBvWzFdKSwgZyA9IG4odi52YWxoZXgsIGRbMF0pLCBTID0gZi5nZXRBbGdvcml0aG1JZGVudGlmaWVyTmFtZShnKTtcbiAgICAgIHYuYWxnID0gUztcbiAgICAgIHZhciBiID0gcyh2LnZhbGhleCwgZFsxXSk7XG4gICAgICB2Lmhhc2ggPSBiO1xuICAgIH1cbiAgICBkZWxldGUgdi52YWxoZXg7XG4gIH0sIHRoaXMuc2V0U2lnbmluZ0NlcnRpZmljYXRlVjIgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB5KHYudmFsaGV4LCAwKTtcbiAgICBpZiAoby5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKHZhciBsID0gbih2LnZhbGhleCwgb1swXSksIGYgPSB5KGwsIDApLCBkID0gW10sIGcgPSAwOyBnIDwgZi5sZW5ndGg7IGcrKykge1xuICAgICAgICB2YXIgUyA9IG4obCwgZltnXSksIGIgPSB0aGlzLmdldEVTU0NlcnRJRHYyKFMpO1xuICAgICAgICBkLnB1c2goYik7XG4gICAgICB9XG4gICAgICB2LmFycmF5ID0gZDtcbiAgICB9XG4gICAgaWYgKG8ubGVuZ3RoID4gMSkge1xuICAgICAgdmFyIEQgPSBuKHYudmFsaGV4LCBvWzFdKTtcbiAgICAgIHYucG9saGV4ID0gRDtcbiAgICB9XG4gICAgZGVsZXRlIHYudmFsaGV4O1xuICB9LCB0aGlzLmdldEVTU0NlcnRJRCA9IGZ1bmN0aW9uKHYpIHtcbiAgICB2YXIgbyA9IHt9LCBsID0geSh2LCAwKTtcbiAgICBpZiAobC5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgZiA9IHModiwgbFswXSk7XG4gICAgICBvLmhhc2ggPSBmO1xuICAgIH1cbiAgICBpZiAobC5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgZCA9IG4odiwgbFsxXSksIGcgPSB0aGlzLmdldElzc3VlclNlcmlhbChkKTtcbiAgICAgIGcuc2VyaWFsICE9IG51bGwgJiYgKG8uc2VyaWFsID0gZy5zZXJpYWwpLCBnLmlzc3VlciAhPSBudWxsICYmIChvLmlzc3VlciA9IGcuaXNzdWVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG87XG4gIH0sIHRoaXMuZ2V0RVNTQ2VydElEdjIgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB7fSwgbCA9IHkodiwgMCk7XG4gICAgaWYgKGwubGVuZ3RoIDwgMSB8fCAzIDwgbC5sZW5ndGgpXG4gICAgICB0aHJvdyBuZXcgZShcIndyb25nIG51bWJlciBvZiBlbGVtZW50c1wiKTtcbiAgICB2YXIgZiA9IDA7XG4gICAgaWYgKHYuc3Vic3RyKGxbMF0sIDIpID09IFwiMzBcIikge1xuICAgICAgdmFyIGQgPSBuKHYsIGxbMF0pO1xuICAgICAgby5hbGcgPSByLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lKGQpLCBmKys7XG4gICAgfSBlbHNlXG4gICAgICBvLmFsZyA9IFwic2hhMjU2XCI7XG4gICAgdmFyIGcgPSBzKHYsIGxbZl0pO1xuICAgIGlmIChvLmhhc2ggPSBnLCBsLmxlbmd0aCA+IGYgKyAxKSB7XG4gICAgICB2YXIgUyA9IG4odiwgbFtmICsgMV0pLCBiID0gdGhpcy5nZXRJc3N1ZXJTZXJpYWwoUyk7XG4gICAgICBvLmlzc3VlciA9IGIuaXNzdWVyLCBvLnNlcmlhbCA9IGIuc2VyaWFsO1xuICAgIH1cbiAgICByZXR1cm4gbztcbiAgfSwgdGhpcy5nZXRJc3N1ZXJTZXJpYWwgPSBmdW5jdGlvbih2KSB7XG4gICAgdmFyIG8gPSB7fSwgbCA9IHkodiwgMCksIGYgPSBuKHYsIGxbMF0pLCBkID0gci5nZXRHZW5lcmFsTmFtZXMoZiksIGcgPSBkWzBdLmRuO1xuICAgIG8uaXNzdWVyID0gZztcbiAgICB2YXIgUyA9IHModiwgbFsxXSk7XG4gICAgcmV0dXJuIG8uc2VyaWFsID0geyBoZXg6IFMgfSwgbztcbiAgfSwgdGhpcy5nZXRDZXJ0aWZpY2F0ZVNldCA9IGZ1bmN0aW9uKHYpIHtcbiAgICBmb3IgKHZhciBvID0geSh2LCAwKSwgbCA9IFtdLCBmID0gMDsgZiA8IG8ubGVuZ3RoOyBmKyspIHtcbiAgICAgIHZhciBkID0gbih2LCBvW2ZdKTtcbiAgICAgIGlmIChkLnN1YnN0cigwLCAyKSA9PSBcIjMwXCIpIHtcbiAgICAgICAgdmFyIGcgPSBkZShkLCBcIkNFUlRJRklDQVRFXCIpO1xuICAgICAgICBsLnB1c2goZyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGFycmF5OiBsLCBzb3J0ZmxhZzogITEgfTtcbiAgfTtcbn07XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMSA+IFwidVwiIHx8ICFhLmFzbjEpICYmIChhLmFzbjEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMS50c3AgPiBcInVcIiB8fCAhYS5hc24xLnRzcCkgJiYgKGEuYXNuMS50c3AgPSB7fSk7XG5hLmFzbjEudHNwLlRpbWVTdGFtcFRva2VuID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLnRzcDtcbiAgaS5UaW1lU3RhbXBUb2tlbi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRFbmNvZGVkSGV4UHJlcGFyZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gbmV3IGkuVFNUSW5mbyh0aGlzLnBhcmFtcy5lY29udGVudC5jb250ZW50KTtcbiAgICB0aGlzLnBhcmFtcy5lY29udGVudC5jb250ZW50LmhleCA9IHMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS50c3AuVGltZVN0YW1wVG9rZW4sIGEuYXNuMS5jbXMuU2lnbmVkRGF0YSk7XG5hLmFzbjEudHNwLlRTVEluZm8gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSU2VxdWVuY2UsIHMgPSByLkRFUkludGVnZXIsIG4gPSByLkRFUkJvb2xlYW4sIGggPSByLkRFUkdlbmVyYWxpemVkVGltZSwgdSA9IHIuREVST2JqZWN0SWRlbnRpZmllciwgcCA9IHIuREVSVGFnZ2VkT2JqZWN0LCBjID0gci50c3AsIHkgPSBjLk1lc3NhZ2VJbXByaW50LCB2ID0gYy5BY2N1cmFjeTtcbiAgci54NTA5Llg1MDBOYW1lO1xuICB2YXIgbyA9IHIueDUwOS5HZW5lcmFsTmFtZTtcbiAgaWYgKGMuVFNUSW5mby5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuZFZlcnNpb24gPSBuZXcgcyh7IGludDogMSB9KSwgdGhpcy5kUG9saWN5ID0gbnVsbCwgdGhpcy5kTWVzc2FnZUltcHJpbnQgPSBudWxsLCB0aGlzLmRTZXJpYWwgPSBudWxsLCB0aGlzLmRHZW5UaW1lID0gbnVsbCwgdGhpcy5kQWNjdXJhY3kgPSBudWxsLCB0aGlzLmRPcmRlcmluZyA9IG51bGwsIHRoaXMuZE5vbmNlID0gbnVsbCwgdGhpcy5kVHNhID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsID0gW3RoaXMuZFZlcnNpb25dO1xuICAgIGlmICh0aGlzLmRQb2xpY3kgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInBvbGljeSBzaGFsbCBiZSBzcGVjaWZpZWQuXCIpO1xuICAgIGlmIChsLnB1c2godGhpcy5kUG9saWN5KSwgdGhpcy5kTWVzc2FnZUltcHJpbnQgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1lc3NhZ2VJbXByaW50IHNoYWxsIGJlIHNwZWNpZmllZC5cIik7XG4gICAgaWYgKGwucHVzaCh0aGlzLmRNZXNzYWdlSW1wcmludCksIHRoaXMuZFNlcmlhbCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwic2VyaWFsTnVtYmVyIHNoYWxsIGJlIHNwZWNpZmllZC5cIik7XG4gICAgaWYgKGwucHVzaCh0aGlzLmRTZXJpYWwpLCB0aGlzLmRHZW5UaW1lID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJnZW5UaW1lIHNoYWxsIGJlIHNwZWNpZmllZC5cIik7XG4gICAgbC5wdXNoKHRoaXMuZEdlblRpbWUpLCB0aGlzLmRBY2N1cmFjeSAhPSBudWxsICYmIGwucHVzaCh0aGlzLmRBY2N1cmFjeSksIHRoaXMuZE9yZGVyaW5nICE9IG51bGwgJiYgbC5wdXNoKHRoaXMuZE9yZGVyaW5nKSwgdGhpcy5kTm9uY2UgIT0gbnVsbCAmJiBsLnB1c2godGhpcy5kTm9uY2UpLCB0aGlzLmRUc2EgIT0gbnVsbCAmJiBsLnB1c2godGhpcy5kVHNhKTtcbiAgICB2YXIgZiA9IG5ldyBpKHsgYXJyYXk6IGwgfSk7XG4gICAgcmV0dXJuIHRoaXMuaFRMViA9IGYudG9oZXgoKSwgdGhpcy5oVExWO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDApIHtcbiAgICBpZiAodHlwZW9mIGUucG9saWN5ID09IFwic3RyaW5nXCIpIHtcbiAgICAgIGlmICghZS5wb2xpY3kubWF0Y2goL15bMC05Ll0rJC8pKVxuICAgICAgICB0aHJvdyBcInBvbGljeSBzaGFsbCBiZSBvaWQgbGlrZSAwLjEuNC4xMzRcIjtcbiAgICAgIHRoaXMuZFBvbGljeSA9IG5ldyB1KHsgb2lkOiBlLnBvbGljeSB9KTtcbiAgICB9XG4gICAgZS5tZXNzYWdlSW1wcmludCAhPT0gdm9pZCAwICYmICh0aGlzLmRNZXNzYWdlSW1wcmludCA9IG5ldyB5KGUubWVzc2FnZUltcHJpbnQpKSwgZS5zZXJpYWwgIT09IHZvaWQgMCAmJiAodGhpcy5kU2VyaWFsID0gbmV3IHMoZS5zZXJpYWwpKSwgZS5nZW5UaW1lICE9PSB2b2lkIDAgJiYgKHRoaXMuZEdlblRpbWUgPSBuZXcgaChlLmdlblRpbWUpKSwgZS5hY2N1cmFjeSAhPT0gdm9pZCAwICYmICh0aGlzLmRBY2N1cmFjeSA9IG5ldyB2KGUuYWNjdXJhY3kpKSwgZS5vcmRlcmluZyAhPT0gdm9pZCAwICYmIGUub3JkZXJpbmcgPT0gITAgJiYgKHRoaXMuZE9yZGVyaW5nID0gbmV3IG4oKSksIGUubm9uY2UgIT09IHZvaWQgMCAmJiAodGhpcy5kTm9uY2UgPSBuZXcgcyhlLm5vbmNlKSksIGUudHNhICE9PSB2b2lkIDAgJiYgKHRoaXMuZFRzYSA9IG5ldyBwKHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiBuZXcgbyh7IGRuOiBlLnRzYSB9KSB9KSk7XG4gIH1cbn07XG5OKGEuYXNuMS50c3AuVFNUSW5mbywgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLnRzcC5BY2N1cmFjeSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5BU04xVXRpbC5uZXdPYmplY3Q7XG4gIHIudHNwLkFjY3VyYWN5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSB0aGlzLnBhcmFtcywgbiA9IFtdO1xuICAgIHJldHVybiBzLnNlY29uZHMgIT0gbnVsbCAmJiB0eXBlb2Ygcy5zZWNvbmRzID09IFwibnVtYmVyXCIgJiYgbi5wdXNoKHsgaW50OiBzLnNlY29uZHMgfSksIHMubWlsbGlzICE9IG51bGwgJiYgdHlwZW9mIHMubWlsbGlzID09IFwibnVtYmVyXCIgJiYgbi5wdXNoKHsgdGFnOiB7IHRhZ2k6IFwiODBcIiwgb2JqOiB7IGludDogcy5taWxsaXMgfSB9IH0pLCBzLm1pY3JvcyAhPSBudWxsICYmIHR5cGVvZiBzLm1pY3JvcyA9PSBcIm51bWJlclwiICYmIG4ucHVzaCh7IHRhZzogeyB0YWdpOiBcIjgxXCIsIG9iajogeyBpbnQ6IHMubWljcm9zIH0gfSB9KSwgaSh7IHNlcTogbiB9KS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLnRzcC5BY2N1cmFjeSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLnRzcC5NZXNzYWdlSW1wcmludCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJTZXF1ZW5jZSwgcyA9IHIuREVST2N0ZXRTdHJpbmcsIG4gPSByLng1MDksIGggPSBuLkFsZ29yaXRobUlkZW50aWZpZXI7XG4gIHIudHNwLk1lc3NhZ2VJbXByaW50LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcywgcCA9IG5ldyBoKHsgbmFtZTogdS5hbGcgfSksIGMgPSBuZXcgcyh7IGhleDogdS5oYXNoIH0pLCB5ID0gbmV3IGkoeyBhcnJheTogW3AsIGNdIH0pO1xuICAgIHJldHVybiB5LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEudHNwLk1lc3NhZ2VJbXByaW50LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEudHNwLlRpbWVTdGFtcFJlcSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJTZXF1ZW5jZSwgcyA9IHIuREVSSW50ZWdlciwgbiA9IHIuREVSQm9vbGVhbjtcbiAgci5BU04xT2JqZWN0O1xuICB2YXIgaCA9IHIuREVST2JqZWN0SWRlbnRpZmllciwgdSA9IHIudHNwLCBwID0gdS5NZXNzYWdlSW1wcmludDtcbiAgdS5UaW1lU3RhbXBSZXEuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYyA9IHRoaXMucGFyYW1zLCB5ID0gW107XG4gICAgeS5wdXNoKG5ldyBzKHsgaW50OiAxIH0pKSwgYy5tZXNzYWdlSW1wcmludCBpbnN0YW5jZW9mIGEuYXNuMS5BU04xT2JqZWN0ID8geS5wdXNoKGMubWVzc2FnZUltcHJpbnQpIDogeS5wdXNoKG5ldyBwKGMubWVzc2FnZUltcHJpbnQpKSwgYy5wb2xpY3kgIT0gbnVsbCAmJiB5LnB1c2gobmV3IGgoYy5wb2xpY3kpKSwgYy5ub25jZSAhPSBudWxsICYmIHkucHVzaChuZXcgcyhjLm5vbmNlKSksIGMuY2VydHJlcSA9PSAhMCAmJiB5LnB1c2gobmV3IG4oKSk7XG4gICAgdmFyIHYgPSBuZXcgaSh7IGFycmF5OiB5IH0pO1xuICAgIHJldHVybiB2LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEudHNwLlRpbWVTdGFtcFJlcSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLnRzcC5UaW1lU3RhbXBSZXNwID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlO1xuICByLkFTTjFPYmplY3Q7XG4gIHZhciBzID0gci50c3AsIG4gPSBzLlBLSVN0YXR1c0luZm87XG4gIHMuVGltZVN0YW1wUmVzcC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoID0gdGhpcy5wYXJhbXMsIHUgPSBbXTtcbiAgICBpZiAoaC5lY29udGVudCAhPSBudWxsIHx8IGgudHN0ICE9IG51bGwpXG4gICAgICBpZiAoaC5zdGF0dXNpbmZvICE9IG51bGwgPyB1LnB1c2gobmV3IG4oaC5zdGF0dXNpbmZvKSkgOiB1LnB1c2gobmV3IG4oXCJncmFudGVkXCIpKSwgaC5lY29udGVudCAhPSBudWxsKVxuICAgICAgICB1LnB1c2gobmV3IHMuVGltZVN0YW1wVG9rZW4oaCkuZ2V0Q29udGVudEluZm8oKSk7XG4gICAgICBlbHNlIGlmIChoLnRzdCBpbnN0YW5jZW9mIHIuQVNOMU9iamVjdClcbiAgICAgICAgdS5wdXNoKGgudHN0KTtcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW1wcm9wZXIgbWVtYmVyIHRzdCB2YWx1ZVwiKTtcbiAgICBlbHNlIGlmIChoLnN0YXR1c2luZm8gIT0gbnVsbClcbiAgICAgIHUucHVzaChuZXcgbihoLnN0YXR1c2luZm8pKTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwYXJhbWV0ZXIgZm9yIHRva2VuIG5vciBzdGF0dXNpbmZvIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgdmFyIHAgPSBuZXcgaSh7IGFycmF5OiB1IH0pO1xuICAgIHJldHVybiBwLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEudHNwLlRpbWVTdGFtcFJlc3AsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS50c3AuUEtJU3RhdHVzSW5mbyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUlNlcXVlbmNlLCBuID0gaS50c3AsIGggPSBuLlBLSVN0YXR1cywgdSA9IG4uUEtJRnJlZVRleHQsIHAgPSBuLlBLSUZhaWx1cmVJbmZvO1xuICBuLlBLSVN0YXR1c0luZm8uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYyA9IHRoaXMucGFyYW1zLCB5ID0gW107XG4gICAgaWYgKHR5cGVvZiBjID09IFwic3RyaW5nXCIpXG4gICAgICB5LnB1c2gobmV3IGgoYykpO1xuICAgIGVsc2Uge1xuICAgICAgaWYgKGMuc3RhdHVzID09IG51bGwpXG4gICAgICAgIHRocm93IG5ldyB0KFwicHJvcGVydHkgJ3N0YXR1cycgdW5zcGVjaWZpZWRcIik7XG4gICAgICB5LnB1c2gobmV3IGgoYy5zdGF0dXMpKSwgYy5zdGF0dXNzdHIgIT0gbnVsbCAmJiB5LnB1c2gobmV3IHUoYy5zdGF0dXNzdHIpKSwgYy5mYWlsaW5mbyAhPSBudWxsICYmIHkucHVzaChuZXcgcChjLmZhaWxpbmZvKSk7XG4gICAgfVxuICAgIHZhciB2ID0gbmV3IHMoeyBhcnJheTogeSB9KTtcbiAgICByZXR1cm4gdi50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLnRzcC5QS0lTdGF0dXNJbmZvLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEudHNwLlBLSVN0YXR1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUkludGVnZXIsIG4gPSBpLnRzcDtcbiAgbi5QS0lTdGF0dXMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgaCA9IHsgZ3JhbnRlZDogMCwgZ3JhbnRlZFdpdGhNb2RzOiAxLCByZWplY3Rpb246IDIsIHdhaXRpbmc6IDMsIHJldm9jYXRpb25XYXJuaW5nOiA0LCByZXZvY2F0aW9uTm90aWZpY2F0aW9uOiA1IH07XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1ID0gdGhpcy5wYXJhbXMsIHA7XG4gICAgaWYgKHR5cGVvZiB1ID09IFwic3RyaW5nXCIpXG4gICAgICB0cnkge1xuICAgICAgICBwID0gaFt1XTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICB0aHJvdyBuZXcgdChcInVuZGVmaW5lZCBuYW1lOiBcIiArIHUpO1xuICAgICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB1ID09IFwibnVtYmVyXCIpXG4gICAgICBwID0gdTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgdChcInVuc3VwcG9ydGVkIHBhcmFtc1wiKTtcbiAgICByZXR1cm4gbmV3IHMoeyBpbnQ6IHAgfSkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS50c3AuUEtJU3RhdHVzLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEudHNwLlBLSUZyZWVUZXh0ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVSU2VxdWVuY2UsIG4gPSBpLkRFUlVURjhTdHJpbmcsIGggPSBpLnRzcDtcbiAgaC5QS0lGcmVlVGV4dC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKCF1IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICB0aHJvdyBuZXcgdChcIndyb25nIHBhcmFtczogbm90IGFycmF5XCIpO1xuICAgIGZvciAodmFyIHAgPSBbXSwgYyA9IDA7IGMgPCB1Lmxlbmd0aDsgYysrKVxuICAgICAgcC5wdXNoKG5ldyBuKHsgc3RyOiB1W2NdIH0pKTtcbiAgICB2YXIgeSA9IG5ldyBzKHsgYXJyYXk6IHAgfSk7XG4gICAgcmV0dXJuIHkudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS50c3AuUEtJRnJlZVRleHQsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS50c3AuUEtJRmFpbHVyZUluZm8gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5ERVJCaXRTdHJpbmcsIG4gPSBpLnRzcCwgaCA9IG4uUEtJRmFpbHVyZUluZm8sIHUgPSB7IGJhZEFsZzogMCwgYmFkUmVxdWVzdDogMiwgYmFkRGF0YUZvcm1hdDogNSwgdGltZU5vdEF2YWlsYWJsZTogMTQsIHVuYWNjZXB0ZWRQb2xpY3k6IDE1LCB1bmFjY2VwdGVkRXh0ZW5zaW9uOiAxNiwgYWRkSW5mb05vdEF2YWlsYWJsZTogMTcsIHN5c3RlbUZhaWx1cmU6IDI1IH07XG4gIGguc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0QmluVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcCA9IHRoaXMucGFyYW1zLCBjID0gMDtcbiAgICBpZiAodHlwZW9mIHAgPT0gXCJudW1iZXJcIiAmJiAwIDw9IHAgJiYgcCA8PSAyNSkge1xuICAgICAgYyB8PSAxIDw8IHA7XG4gICAgICBmb3IgKHZhciB5ID0gYy50b1N0cmluZygyKSwgdiA9IFwiXCIsIG8gPSB5Lmxlbmd0aCAtIDE7IG8gPj0gMDsgby0tKVxuICAgICAgICB2ICs9IHlbb107XG4gICAgICByZXR1cm4gdjtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBwID09IFwic3RyaW5nXCIgJiYgdVtwXSAhPSBudWxsKVxuICAgICAgICByZXR1cm4gcnQoW3BdLCB1KTtcbiAgICAgIGlmICh0eXBlb2YgcCA9PSBcIm9iamVjdFwiICYmIHAubGVuZ3RoICE9IG51bGwpXG4gICAgICAgIHJldHVybiBydChwLCB1KTtcbiAgICAgIHRocm93IG5ldyB0KFwid3JvbmcgcGFyYW1zXCIpO1xuICAgIH1cbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucGFyYW1zO1xuICAgIHZhciBwID0gdGhpcy5nZXRCaW5WYWx1ZSgpO1xuICAgIHJldHVybiBuZXcgcyh7IGJpbjogcCB9KS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLnRzcC5QS0lGYWlsdXJlSW5mbywgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLnRzcC5BYnN0cmFjdFRTQUFkYXB0ZXIgPSBmdW5jdGlvbihlKSB7XG4gIHRoaXMuZ2V0VFNUSGV4ID0gZnVuY3Rpb24odCwgcikge1xuICAgIHRocm93IFwibm90IGltcGxlbWVudGVkIHlldFwiO1xuICB9O1xufTtcbmEuYXNuMS50c3AuU2ltcGxlVFNBQWRhcHRlciA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci50c3AsIHMgPSB0LmNyeXB0by5VdGlsLmhhc2hIZXg7XG4gIGkuU2ltcGxlVFNBQWRhcHRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5zZXJpYWwgPSAwLCB0aGlzLmdldFRTVEhleCA9IGZ1bmN0aW9uKG4sIGgpIHtcbiAgICB2YXIgdSA9IHMobiwgaCk7XG4gICAgdGhpcy5wYXJhbXMuZWNvbnRlbnQuY29udGVudC5tZXNzYWdlSW1wcmludCA9IHsgYWxnOiBoLCBoYXNoOiB1IH0sIHRoaXMucGFyYW1zLmVjb250ZW50LmNvbnRlbnQuc2VyaWFsID0geyBpbnQ6IHRoaXMuc2VyaWFsKysgfTtcbiAgICB2YXIgcCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDFlOSk7XG4gICAgdGhpcy5wYXJhbXMuZWNvbnRlbnQuY29udGVudC5ub25jZSA9IHsgaW50OiBwIH07XG4gICAgdmFyIGMgPSBuZXcgaS5UaW1lU3RhbXBUb2tlbih0aGlzLnBhcmFtcyk7XG4gICAgcmV0dXJuIGMuZ2V0Q29udGVudEluZm9FbmNvZGVkSGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiAodGhpcy5wYXJhbXMgPSBlKTtcbn07XG5OKGEuYXNuMS50c3AuU2ltcGxlVFNBQWRhcHRlciwgYS5hc24xLnRzcC5BYnN0cmFjdFRTQUFkYXB0ZXIpO1xuYS5hc24xLnRzcC5GaXhlZFRTQUFkYXB0ZXIgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIudHNwLCBzID0gdC5jcnlwdG8uVXRpbC5oYXNoSGV4O1xuICBpLkZpeGVkVFNBQWRhcHRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRUU1RIZXggPSBmdW5jdGlvbihuLCBoKSB7XG4gICAgdmFyIHUgPSBzKG4sIGgpO1xuICAgIHRoaXMucGFyYW1zLmVjb250ZW50LmNvbnRlbnQubWVzc2FnZUltcHJpbnQgPSB7IGFsZzogaCwgaGFzaDogdSB9O1xuICAgIHZhciBwID0gbmV3IGkuVGltZVN0YW1wVG9rZW4odGhpcy5wYXJhbXMpO1xuICAgIHJldHVybiBwLmdldENvbnRlbnRJbmZvRW5jb2RlZEhleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgKHRoaXMucGFyYW1zID0gZSk7XG59O1xuTihhLmFzbjEudHNwLkZpeGVkVFNBQWRhcHRlciwgYS5hc24xLnRzcC5BYnN0cmFjdFRTQUFkYXB0ZXIpO1xuYS5hc24xLnRzcC5UU1BVdGlsID0gbmV3IGZ1bmN0aW9uKCkge1xufSgpO1xuYS5hc24xLnRzcC5UU1BVdGlsLm5ld1RpbWVTdGFtcFRva2VuID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gbmV3IGEuYXNuMS50c3AuVGltZVN0YW1wVG9rZW4oZSk7XG59O1xuYS5hc24xLnRzcC5UU1BVdGlsLnBhcnNlVGltZVN0YW1wUmVxID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IG5ldyBhLmFzbjEudHNwLlRTUFBhcnNlcigpO1xuICByZXR1cm4gdC5nZXRUaW1lU3RhbXBSZXEoZSk7XG59O1xuYS5hc24xLnRzcC5UU1BVdGlsLnBhcnNlTWVzc2FnZUltcHJpbnQgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gbmV3IGEuYXNuMS50c3AuVFNQUGFyc2VyKCk7XG4gIHJldHVybiB0LmdldE1lc3NhZ2VJbXByaW50KGUpO1xufTtcbmEuYXNuMS50c3AuVFNQUGFyc2VyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gTCwgdCA9IG5ldyBlKCksIHIgPSBWLCBpID0gci5nZXRWLCBzID0gci5nZXRUTFYsIG4gPSByLmdldElkeGJ5TGlzdDtcbiAgci5nZXRUTFZieUxpc3RFeDtcbiAgdmFyIGggPSByLmdldENoaWxkSWR4LCB1ID0gW1wiZ3JhbnRlZFwiLCBcImdyYW50ZWRXaXRoTW9kc1wiLCBcInJlamVjdGlvblwiLCBcIndhaXRpbmdcIiwgXCJyZXZvY2F0aW9uV2FybmluZ1wiLCBcInJldm9jYXRpb25Ob3RpZmljYXRpb25cIl0sIHAgPSB7IDA6IFwiYmFkQWxnXCIsIDI6IFwiYmFkUmVxdWVzdFwiLCA1OiBcImJhZERhdGFGb3JtYXRcIiwgMTQ6IFwidGltZU5vdEF2YWlsYWJsZVwiLCAxNTogXCJ1bmFjY2VwdGVkUG9saWN5XCIsIDE2OiBcInVuYWNjZXB0ZWRFeHRlbnNpb25cIiwgMTc6IFwiYWRkSW5mb05vdEF2YWlsYWJsZVwiLCAyNTogXCJzeXN0ZW1GYWlsdXJlXCIgfTtcbiAgdGhpcy5nZXRSZXNwb25zZSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgeSA9IGgoYywgMCk7XG4gICAgaWYgKHkubGVuZ3RoID09IDEpXG4gICAgICByZXR1cm4gdGhpcy5nZXRQS0lTdGF0dXNJbmZvKHMoYywgeVswXSkpO1xuICAgIGlmICh5Lmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciB2ID0gdGhpcy5nZXRQS0lTdGF0dXNJbmZvKHMoYywgeVswXSkpLCBvID0gcyhjLCB5WzFdKSwgbCA9IHRoaXMuZ2V0VG9rZW4obyk7XG4gICAgICByZXR1cm4gbC5zdGF0dXNpbmZvID0gdiwgbDtcbiAgICB9XG4gIH0sIHRoaXMuZ2V0VG9rZW4gPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIHkgPSBuZXcgYS5hc24xLmNtcy5DTVNQYXJzZXIoKSwgdiA9IHkuZ2V0Q01TU2lnbmVkRGF0YShjKTtcbiAgICByZXR1cm4gdGhpcy5zZXRUU1RJbmZvKHYpLCB2O1xuICB9LCB0aGlzLnNldFRTVEluZm8gPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIHkgPSBjLmVjb250ZW50O1xuICAgIGlmICh5LnR5cGUgPT0gXCJ0c3RpbmZvXCIpIHtcbiAgICAgIHZhciB2ID0geS5jb250ZW50LmhleCwgbyA9IHRoaXMuZ2V0VFNUSW5mbyh2KTtcbiAgICAgIHkuY29udGVudCA9IG87XG4gICAgfVxuICB9LCB0aGlzLmdldFRTVEluZm8gPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIHkgPSB7fSwgdiA9IGgoYywgMCksIG8gPSBpKGMsIHZbMV0pO1xuICAgIHkucG9saWN5ID0gZnQobyk7XG4gICAgdmFyIGwgPSBzKGMsIHZbMl0pO1xuICAgIHkubWVzc2FnZUltcHJpbnQgPSB0aGlzLmdldE1lc3NhZ2VJbXByaW50KGwpO1xuICAgIHZhciBmID0gaShjLCB2WzNdKTtcbiAgICB5LnNlcmlhbCA9IHsgaGV4OiBmIH07XG4gICAgdmFyIGQgPSBpKGMsIHZbNF0pO1xuICAgIHkuZ2VuVGltZSA9IHsgc3RyOiBXKGQpIH07XG4gICAgdmFyIGcgPSAwO1xuICAgIGlmICh2Lmxlbmd0aCA+IDUgJiYgYy5zdWJzdHIodls1XSwgMikgPT0gXCIzMFwiKSB7XG4gICAgICB2YXIgUyA9IHMoYywgdls1XSk7XG4gICAgICB5LmFjY3VyYWN5ID0gdGhpcy5nZXRBY2N1cmFjeShTKSwgZysrO1xuICAgIH1cbiAgICBpZiAodi5sZW5ndGggPiA1ICsgZyAmJiBjLnN1YnN0cih2WzUgKyBnXSwgMikgPT0gXCIwMVwiKSB7XG4gICAgICB2YXIgYiA9IGkoYywgdls1ICsgZ10pO1xuICAgICAgYiA9PSBcImZmXCIgJiYgKHkub3JkZXJpbmcgPSAhMCksIGcrKztcbiAgICB9XG4gICAgaWYgKHYubGVuZ3RoID4gNSArIGcgJiYgYy5zdWJzdHIodls1ICsgZ10sIDIpID09IFwiMDJcIikge1xuICAgICAgdmFyIEQgPSBpKGMsIHZbNSArIGddKTtcbiAgICAgIHkubm9uY2UgPSB7IGhleDogRCB9LCBnKys7XG4gICAgfVxuICAgIGlmICh2Lmxlbmd0aCA+IDUgKyBnICYmIGMuc3Vic3RyKHZbNSArIGddLCAyKSA9PSBcImEwXCIpIHtcbiAgICAgIHZhciBBID0gcyhjLCB2WzUgKyBnXSk7XG4gICAgICBBID0gXCIzMFwiICsgQS5zdWJzdHIoMiksIHBHZW5lcmFsTmFtZXMgPSB0LmdldEdlbmVyYWxOYW1lcyhBKTtcbiAgICAgIHZhciBJID0gcEdlbmVyYWxOYW1lc1swXS5kbjtcbiAgICAgIHkudHNhID0gSSwgZysrO1xuICAgIH1cbiAgICBpZiAodi5sZW5ndGggPiA1ICsgZyAmJiBjLnN1YnN0cih2WzUgKyBnXSwgMikgPT0gXCJhMVwiKSB7XG4gICAgICB2YXIgbSA9IHMoYywgdls1ICsgZ10pO1xuICAgICAgbSA9IFwiMzBcIiArIG0uc3Vic3RyKDIpO1xuICAgICAgdmFyIEUgPSB0LmdldEV4dFBhcmFtQXJyYXkobSk7XG4gICAgICB5LmV4dCA9IEUsIGcrKztcbiAgICB9XG4gICAgcmV0dXJuIHk7XG4gIH0sIHRoaXMuZ2V0QWNjdXJhY3kgPSBmdW5jdGlvbihjKSB7XG4gICAgZm9yICh2YXIgeSA9IHt9LCB2ID0gaChjLCAwKSwgbyA9IDA7IG8gPCB2Lmxlbmd0aDsgbysrKSB7XG4gICAgICB2YXIgbCA9IGMuc3Vic3RyKHZbb10sIDIpLCBmID0gaShjLCB2W29dKSwgZCA9IHBhcnNlSW50KGYsIDE2KTtcbiAgICAgIGwgPT0gXCIwMlwiID8geS5zZWNvbmRzID0gZCA6IGwgPT0gXCI4MFwiID8geS5taWxsaXMgPSBkIDogbCA9PSBcIjgxXCIgJiYgKHkubWljcm9zID0gZCk7XG4gICAgfVxuICAgIHJldHVybiB5O1xuICB9LCB0aGlzLmdldE1lc3NhZ2VJbXByaW50ID0gZnVuY3Rpb24oYykge1xuICAgIGlmIChjLnN1YnN0cigwLCAyKSAhPSBcIjMwXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJoZWFkIG9mIG1lc3NhZ2VJbXByaW50IGhleCBzaGFsbCBiZSB4MzBcIik7XG4gICAgdmFyIHkgPSB7fTtcbiAgICBoKGMsIDApO1xuICAgIHZhciB2ID0gbihjLCAwLCBbMCwgMF0pLCBvID0gaShjLCB2KSwgbCA9IHIuaGV4dG9vaWRzdHIobyksIGYgPSBhLmFzbjEueDUwOS5PSUQub2lkMm5hbWUobCk7XG4gICAgaWYgKGYgPT0gXCJcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImhhc2hBbGcgbmFtZSB1bmRlZmluZWQ6IFwiICsgbCk7XG4gICAgdmFyIGQgPSBmLCBnID0gbihjLCAwLCBbMV0pO1xuICAgIHJldHVybiB5LmFsZyA9IGQsIHkuaGFzaCA9IGkoYywgZyksIHk7XG4gIH0sIHRoaXMuZ2V0UEtJU3RhdHVzSW5mbyA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgeSA9IHt9LCB2ID0gaChjLCAwKSwgbyA9IDA7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBsID0gaShjLCB2WzBdKSwgZiA9IHBhcnNlSW50KGwsIDE2KTtcbiAgICAgIHkuc3RhdHVzID0gdVtmXTtcbiAgICB9IGNhdGNoIHtcbiAgICB9XG4gICAgaWYgKHYubGVuZ3RoID4gMSAmJiBjLnN1YnN0cih2WzFdLCAyKSA9PSBcIjMwXCIpIHtcbiAgICAgIHZhciBkID0gcyhjLCB2WzFdKTtcbiAgICAgIHkuc3RhdHVzc3RyID0gdGhpcy5nZXRQS0lGcmVlVGV4dChkKSwgbysrO1xuICAgIH1cbiAgICBpZiAodi5sZW5ndGggPiBvICYmIGMuc3Vic3RyKHZbMSArIG9dLCAyKSA9PSBcIjAzXCIpIHtcbiAgICAgIHZhciBnID0gcyhjLCB2WzEgKyBvXSk7XG4gICAgICB5LmZhaWxpbmZvID0gdGhpcy5nZXRQS0lGYWlsdXJlSW5mbyhnKTtcbiAgICB9XG4gICAgcmV0dXJuIHk7XG4gIH0sIHRoaXMuZ2V0UEtJRnJlZVRleHQgPSBmdW5jdGlvbihjKSB7XG4gICAgZm9yICh2YXIgeSA9IFtdLCB2ID0gaChjLCAwKSwgbyA9IDA7IG8gPCB2Lmxlbmd0aDsgbysrKVxuICAgICAgeS5wdXNoKHIuZ2V0U3RyaW5nKGMsIHZbb10pKTtcbiAgICByZXR1cm4geTtcbiAgfSwgdGhpcy5nZXRQS0lGYWlsdXJlSW5mbyA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgeSA9IHIuZ2V0SW50KGMsIDApO1xuICAgIHJldHVybiBwW3ldICE9IG51bGwgPyBwW3ldIDogeTtcbiAgfSwgdGhpcy5nZXRUaW1lU3RhbXBSZXEgPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIHkgPSB7fTtcbiAgICB5LmNlcnRyZXEgPSAhMTtcbiAgICB2YXIgdiA9IGgoYywgMCk7XG4gICAgaWYgKHYubGVuZ3RoIDwgMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRpbWVTdGFtcFJlcSBtdXN0IGhhdmUgYXQgbGVhc3QgMiBpdGVtc1wiKTtcbiAgICB2YXIgbyA9IHMoYywgdlsxXSk7XG4gICAgeS5tZXNzYWdlSW1wcmludCA9IGEuYXNuMS50c3AuVFNQVXRpbC5wYXJzZU1lc3NhZ2VJbXByaW50KG8pO1xuICAgIGZvciAodmFyIGwgPSAyOyBsIDwgdi5sZW5ndGg7IGwrKykge1xuICAgICAgdmFyIGYgPSB2W2xdLCBkID0gYy5zdWJzdHIoZiwgMik7XG4gICAgICBpZiAoZCA9PSBcIjA2XCIpIHtcbiAgICAgICAgdmFyIGcgPSBpKGMsIGYpO1xuICAgICAgICB5LnBvbGljeSA9IHIuaGV4dG9vaWRzdHIoZyk7XG4gICAgICB9XG4gICAgICBkID09IFwiMDJcIiAmJiAoeS5ub25jZSA9IGkoYywgZikpLCBkID09IFwiMDFcIiAmJiAoeS5jZXJ0cmVxID0gITApO1xuICAgIH1cbiAgICByZXR1cm4geTtcbiAgfTtcbn07XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMSA+IFwidVwiIHx8ICFhLmFzbjEpICYmIChhLmFzbjEgPSB7fSk7XG4odHlwZW9mIGEuYXNuMS5jYWRlcyA+IFwidVwiIHx8ICFhLmFzbjEuY2FkZXMpICYmIChhLmFzbjEuY2FkZXMgPSB7fSk7XG5hLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllciA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5jYWRlcywgcyA9IGkuU2lnbmF0dXJlUG9saWN5SWQ7XG4gIGkuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMudHlwZU9pZCA9IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE2LjIuMTVcIiwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLmdldFZhbHVlQXJyYXkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gW25ldyBzKHRoaXMucGFyYW1zKV07XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKG4pIHtcbiAgICB0aGlzLnBhcmFtcyA9IG47XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY2FkZXMuU2lnbmF0dXJlUG9saWN5SWRlbnRpZmllciwgYS5hc24xLmNtcy5BdHRyaWJ1dGUpO1xuYS5hc24xLmNhZGVzLlNpZ25hdHVyZVBvbGljeUlkID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5ERVJPYmplY3RJZGVudGlmaWVyLCBuID0gci54NTA5O1xuICBuLkFsZ29yaXRobUlkZW50aWZpZXI7XG4gIHZhciBoID0gci5jYWRlcywgdSA9IGguU2lnbmF0dXJlUG9saWN5SWQsIHAgPSBoLk90aGVySGFzaEFsZ0FuZFZhbHVlO1xuICB1LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGMgPSB0aGlzLnBhcmFtcywgeSA9IFtdO1xuICAgIHkucHVzaChuZXcgcyhjLm9pZCkpLCB5LnB1c2gobmV3IHAoYykpO1xuICAgIHZhciB2ID0gbmV3IGkoeyBhcnJheTogeSB9KTtcbiAgICByZXR1cm4gdi50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihjKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBjO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNhZGVzLlNpZ25hdHVyZVBvbGljeUlkLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY2FkZXMuT3RoZXJIYXNoQWxnQW5kVmFsdWUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5hc24xLCBzID0gaS5ERVJTZXF1ZW5jZSwgbiA9IGkuREVST2N0ZXRTdHJpbmcsIGggPSBpLng1MDksIHUgPSBoLkFsZ29yaXRobUlkZW50aWZpZXIsIHAgPSBpLmNhZGVzLCBjID0gcC5PdGhlckhhc2hBbGdBbmRWYWx1ZTtcbiAgYy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB5ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKHkuYWxnID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcInByb3BlcnR5ICdhbGcnIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgaWYgKHkuaGFzaCA9PSBudWxsICYmIHkuY2VydCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IHQoXCJwcm9wZXJ0eSAnaGFzaCcgbm9yICdjZXJ0JyBub3Qgc3BlY2lmaWVkXCIpO1xuICAgIHZhciB2ID0gbnVsbDtcbiAgICBpZiAoeS5oYXNoICE9IG51bGwpXG4gICAgICB2ID0geS5oYXNoO1xuICAgIGVsc2UgaWYgKHkuY2VydCAhPSBudWxsKSB7XG4gICAgICBpZiAodHlwZW9mIHkuY2VydCAhPSBcInN0cmluZ1wiKVxuICAgICAgICB0aHJvdyBuZXcgdChcImNlcnQgbm90IHN0cmluZ1wiKTtcbiAgICAgIHZhciBvID0geS5jZXJ0O1xuICAgICAgeS5jZXJ0LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xICYmIChvID0gaWUoeS5jZXJ0KSksIHYgPSBhLmNyeXB0by5VdGlsLmhhc2hIZXgobywgeS5hbGcpO1xuICAgIH1cbiAgICB2YXIgbCA9IFtdO1xuICAgIGwucHVzaChuZXcgdSh7IG5hbWU6IHkuYWxnIH0pKSwgbC5wdXNoKG5ldyBuKHsgaGV4OiB2IH0pKTtcbiAgICB2YXIgZiA9IG5ldyBzKHsgYXJyYXk6IGwgfSk7XG4gICAgcmV0dXJuIGYudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jYWRlcy5PdGhlckhhc2hBbGdBbmRWYWx1ZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNhZGVzLk90aGVySGFzaFZhbHVlID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEuY2FkZXMuT3RoZXJIYXNoVmFsdWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IEVycm9yLCByID0gYTtcbiAgci5sYW5nLlN0cmluZy5pc0hleDtcbiAgdmFyIGkgPSByLmFzbjEsIHMgPSBpLkRFUk9jdGV0U3RyaW5nO1xuICByLmNyeXB0by5VdGlsLmhhc2hIZXgsIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKG4uaGFzaCA9PSBudWxsICYmIG4uY2VydCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IHQoXCJoYXNoIG9yIGNlcnQgbm90IHNwZWNpZmllZFwiKTtcbiAgICB2YXIgaCA9IG51bGw7XG4gICAgaWYgKG4uaGFzaCAhPSBudWxsKVxuICAgICAgaCA9IG4uaGFzaDtcbiAgICBlbHNlIGlmIChuLmNlcnQgIT0gbnVsbCkge1xuICAgICAgaWYgKHR5cGVvZiBuLmNlcnQgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgdGhyb3cgbmV3IHQoXCJjZXJ0IG5vdCBzdHJpbmdcIik7XG4gICAgICB2YXIgdSA9IG4uY2VydDtcbiAgICAgIG4uY2VydC5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSAmJiAodSA9IGllKG4uY2VydCkpLCBoID0gYS5jcnlwdG8uVXRpbC5oYXNoSGV4KHUsIFwic2hhMVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBzKHsgaGV4OiBoIH0pLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY2FkZXMuT3RoZXJIYXNoVmFsdWUsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jYWRlcy5TaWduYXR1cmVUaW1lU3RhbXAgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gRXJyb3IsIHIgPSBhLCBpID0gci5sYW5nLlN0cmluZy5pc0hleCwgcyA9IHIuYXNuMSwgbiA9IHMuQVNOMU9iamVjdDtcbiAgcy54NTA5O1xuICB2YXIgaCA9IHMuY2FkZXM7XG4gIGguU2lnbmF0dXJlVGltZVN0YW1wLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy50eXBlT2lkID0gXCIxLjIuODQwLjExMzU0OS4xLjkuMTYuMi4xNFwiLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuZ2V0VmFsdWVBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKHUudHN0ICE9IG51bGwpXG4gICAgICBpZiAoaSh1LnRzdCkpIHtcbiAgICAgICAgdmFyIHAgPSBuZXcgbigpO1xuICAgICAgICByZXR1cm4gcC5oVExWID0gdS50c3QsIFtwXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh1LnRzdCBpbnN0YW5jZW9mIG4pXG4gICAgICAgICAgcmV0dXJuIFt1LnRzdF07XG4gICAgICAgIHRocm93IG5ldyB0KFwicGFyYW1zLnRzdCBoYXMgd3JvbmcgdmFsdWVcIik7XG4gICAgICB9XG4gICAgZWxzZSBpZiAodS5yZXMgIT0gbnVsbCkge1xuICAgICAgdmFyIGMgPSB1LnJlcztcbiAgICAgIGlmIChjIGluc3RhbmNlb2YgbiAmJiAoYyA9IGMudG9oZXgoKSksIHR5cGVvZiBjICE9IFwic3RyaW5nXCIgfHwgIWkoYykpXG4gICAgICAgIHRocm93IG5ldyB0KFwicGFyYW1zLnJlcyBoYXMgd3JvbmcgdmFsdWVcIik7XG4gICAgICBWLmdldFRMVmJ5TGlzdChjLCAwLCBbMV0pO1xuICAgICAgdmFyIHAgPSBuZXcgbigpO1xuICAgICAgcmV0dXJuIHAuaFRMViA9IHUudHN0LCBbcF07XG4gICAgfVxuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNhZGVzLlNpZ25hdHVyZVRpbWVTdGFtcCwgYS5hc24xLmNtcy5BdHRyaWJ1dGUpO1xuYS5hc24xLmNhZGVzLkNvbXBsZXRlQ2VydGlmaWNhdGVSZWZzID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IEVycm9yLCByID0gYSwgaSA9IHIuYXNuMSwgcyA9IGkuREVSU2VxdWVuY2UsIG4gPSBpLmNhZGVzLCBoID0gbi5PdGhlckNlcnRJRCwgdSA9IHIubGFuZy5TdHJpbmcuaXNIZXg7XG4gIG4uQ29tcGxldGVDZXJ0aWZpY2F0ZVJlZnMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnR5cGVPaWQgPSBcIjEuMi44NDAuMTEzNTQ5LjEuOS4xNi4yLjIxXCIsIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5nZXRWYWx1ZUFycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgcCA9IHRoaXMucGFyYW1zLCBjID0gW10sIHkgPSAwOyB5IDwgcC5hcnJheS5sZW5ndGg7IHkrKykge1xuICAgICAgdmFyIHYgPSBwLmFycmF5W3ldO1xuICAgICAgaWYgKHR5cGVvZiB2ID09IFwic3RyaW5nXCIpXG4gICAgICAgIGlmICh2LmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xKVxuICAgICAgICAgIHYgPSB7IGNlcnQ6IHYgfTtcbiAgICAgICAgZWxzZSBpZiAodSh2KSlcbiAgICAgICAgICB2ID0geyBoYXNoOiB2IH07XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aHJvdyBuZXcgdChcInVuc3VwcG9ydGVkIHZhbHVlOiBcIiArIHYpO1xuICAgICAgcC5hbGcgIT0gbnVsbCAmJiB2LmFsZyA9PSBudWxsICYmICh2LmFsZyA9IHAuYWxnKSwgcC5oYXNpcyAhPSBudWxsICYmIHYuaGFzaXMgPT0gbnVsbCAmJiAodi5oYXNpcyA9IHAuaGFzaXMpO1xuICAgICAgdmFyIG8gPSBuZXcgaCh2KTtcbiAgICAgIGMucHVzaChvKTtcbiAgICB9XG4gICAgdmFyIGwgPSBuZXcgcyh7IGFycmF5OiBjIH0pO1xuICAgIHJldHVybiBbbF07XG4gIH0sIGUgIT0gbnVsbCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEuY2FkZXMuQ29tcGxldGVDZXJ0aWZpY2F0ZVJlZnMsIGEuYXNuMS5jbXMuQXR0cmlidXRlKTtcbmEuYXNuMS5jYWRlcy5PdGhlckNlcnRJRCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJTZXF1ZW5jZSwgcyA9IHIuY21zLCBuID0gcy5Jc3N1ZXJTZXJpYWwsIGggPSByLmNhZGVzLCB1ID0gaC5PdGhlckhhc2hWYWx1ZSwgcCA9IGguT3RoZXJIYXNoQWxnQW5kVmFsdWU7XG4gIGguT3RoZXJDZXJ0SUQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnBhcmFtcyA9IGUsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYyA9IHRoaXMucGFyYW1zO1xuICAgIHR5cGVvZiBjID09IFwic3RyaW5nXCIgJiYgKGMuaW5kZXhPZihcIi0tLS0tQkVHSU5cIikgIT0gLTEgPyBjID0geyBjZXJ0OiBjIH0gOiBfaXNIZXgoYykgJiYgKGMgPSB7IGhhc2g6IGMgfSkpO1xuICAgIHZhciB5ID0gW10sIHYgPSBudWxsO1xuICAgIGlmIChjLmFsZyAhPSBudWxsID8gdiA9IG5ldyBwKGMpIDogdiA9IG5ldyB1KGMpLCB5LnB1c2godiksIGMuY2VydCAhPSBudWxsICYmIGMuaGFzaXMgPT0gITAgfHwgYy5pc3N1ZXIgIT0gbnVsbCAmJiBjLnNlcmlhbCAhPSBudWxsKSB7XG4gICAgICB2YXIgbyA9IG5ldyBuKGMpO1xuICAgICAgeS5wdXNoKG8pO1xuICAgIH1cbiAgICB2YXIgbCA9IG5ldyBpKHsgYXJyYXk6IHkgfSk7XG4gICAgcmV0dXJuIGwudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jYWRlcy5PdGhlckNlcnRJRCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNhZGVzLk90aGVySGFzaCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xO1xuICByLmNtcztcbiAgdmFyIGkgPSByLmNhZGVzLCBzID0gaS5PdGhlckhhc2hBbGdBbmRWYWx1ZSwgbiA9IGkuT3RoZXJIYXNoVmFsdWU7XG4gIHQuY3J5cHRvLlV0aWwuaGFzaEhleDtcbiAgdmFyIGggPSB0LmxhbmcuU3RyaW5nLmlzSGV4O1xuICBpLk90aGVySGFzaC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1ID0gdGhpcy5wYXJhbXM7XG4gICAgdHlwZW9mIHUgPT0gXCJzdHJpbmdcIiAmJiAodS5pbmRleE9mKFwiLS0tLS1CRUdJTlwiKSAhPSAtMSA/IHUgPSB7IGNlcnQ6IHUgfSA6IGgodSkgJiYgKHUgPSB7IGhhc2g6IHUgfSkpO1xuICAgIHZhciBwID0gbnVsbDtcbiAgICByZXR1cm4gdS5hbGcgIT0gbnVsbCA/IHAgPSBuZXcgcyh1KSA6IHAgPSBuZXcgbih1KSwgcC50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9IG51bGwgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNhZGVzLk90aGVySGFzaCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNhZGVzLkNBZEVTVXRpbCA9IG5ldyBmdW5jdGlvbigpIHtcbn0oKTtcbmEuYXNuMS5jYWRlcy5DQWRFU1V0aWwucGFyc2VTaWduZWREYXRhRm9yQWRkaW5nVW5zaWduZWQgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gbmV3IGEuYXNuMS5jbXMuQ01TUGFyc2VyKCksIHIgPSB0LmdldENNU1NpZ25lZERhdGEoZSk7XG4gIHJldHVybiByO1xufTtcbmEuYXNuMS5jYWRlcy5DQWRFU1V0aWwucGFyc2VTaWduZXJJbmZvRm9yQWRkaW5nVW5zaWduZWQgPSBmdW5jdGlvbihlLCB0LCByKSB7XG4gIHZhciBpID0gViwgcyA9IGkuZ2V0Q2hpbGRJZHgsIG4gPSBpLmdldFRMViwgaCA9IGkuZ2V0ViwgdSA9IGEsIHAgPSB1LmFzbjEsIGMgPSBwLkFTTjFPYmplY3QsIHkgPSBwLmNtcywgdiA9IHkuQXR0cmlidXRlTGlzdCwgbyA9IHkuU2lnbmVySW5mbywgbCA9IHt9LCBmID0gcyhlLCB0KTtcbiAgaWYgKGYubGVuZ3RoICE9IDYpXG4gICAgdGhyb3cgXCJub3Qgc3VwcG9ydGVkIGl0ZW1zIGZvciBTaWduZXJJbmZvICghPTYpXCI7XG4gIHZhciBkID0gZi5zaGlmdCgpO1xuICBsLnZlcnNpb24gPSBuKGUsIGQpO1xuICB2YXIgZyA9IGYuc2hpZnQoKTtcbiAgbC5zaSA9IG4oZSwgZyk7XG4gIHZhciBTID0gZi5zaGlmdCgpO1xuICBsLmRpZ2FsZyA9IG4oZSwgUyk7XG4gIHZhciBiID0gZi5zaGlmdCgpO1xuICBsLnNhdHRycyA9IG4oZSwgYik7XG4gIHZhciBEID0gZi5zaGlmdCgpO1xuICBsLnNpZ2FsZyA9IG4oZSwgRCk7XG4gIHZhciBBID0gZi5zaGlmdCgpO1xuICBsLnNpZyA9IG4oZSwgQSksIGwuc2lndmFsID0gaChlLCBBKTtcbiAgdmFyIEkgPSBudWxsO1xuICByZXR1cm4gbC5vYmogPSBuZXcgbygpLCBJID0gbmV3IGMoKSwgSS5oVExWID0gbC52ZXJzaW9uLCBsLm9iai5kQ01TVmVyc2lvbiA9IEksIEkgPSBuZXcgYygpLCBJLmhUTFYgPSBsLnNpLCBsLm9iai5kU2lnbmVySWRlbnRpZmllciA9IEksIEkgPSBuZXcgYygpLCBJLmhUTFYgPSBsLmRpZ2FsZywgbC5vYmouZERpZ2VzdEFsZ29yaXRobSA9IEksIEkgPSBuZXcgYygpLCBJLmhUTFYgPSBsLnNhdHRycywgbC5vYmouZFNpZ25lZEF0dHJzID0gSSwgSSA9IG5ldyBjKCksIEkuaFRMViA9IGwuc2lnYWxnLCBsLm9iai5kU2lnQWxnID0gSSwgSSA9IG5ldyBjKCksIEkuaFRMViA9IGwuc2lnLCBsLm9iai5kU2lnID0gSSwgbC5vYmouZFVuc2lnbmVkQXR0cnMgPSBuZXcgdigpLCBsO1xufTtcbih0eXBlb2YgYS5hc24xLmNzciA+IFwidVwiIHx8ICFhLmFzbjEuY3NyKSAmJiAoYS5hc24xLmNzciA9IHt9KTtcbmEuYXNuMS5jc3IuQ2VydGlmaWNhdGlvblJlcXVlc3QgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuREVSQml0U3RyaW5nLCBzID0gci5ERVJTZXF1ZW5jZSwgbiA9IHIuY3NyO1xuICByLng1MDk7XG4gIHZhciBoID0gbi5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm87XG4gIG4uQ2VydGlmaWNhdGlvblJlcXVlc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbih1KSB7XG4gICAgdGhpcy5wYXJhbXMgPSB1O1xuICB9LCB0aGlzLnNpZ24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IG5ldyBoKHRoaXMucGFyYW1zKS50b2hleCgpLCBwID0gbmV3IGEuY3J5cHRvLlNpZ25hdHVyZSh7IGFsZzogdGhpcy5wYXJhbXMuc2lnYWxnIH0pO1xuICAgIHAuaW5pdCh0aGlzLnBhcmFtcy5zYmpwcnZrZXkpLCBwLnVwZGF0ZUhleCh1KTtcbiAgICB2YXIgYyA9IHAuc2lnbigpO1xuICAgIHRoaXMucGFyYW1zLnNpZ2hleCA9IGM7XG4gIH0sIHRoaXMuZ2V0UEVNID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlKHRoaXMudG9oZXgoKSwgXCJDRVJUSUZJQ0FURSBSRVFVRVNUXCIpO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHUgPSB0aGlzLnBhcmFtcywgcCA9IG5ldyBhLmFzbjEuY3NyLkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyh0aGlzLnBhcmFtcyksIGMgPSBuZXcgYS5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllcih7IG5hbWU6IHUuc2lnYWxnIH0pO1xuICAgIGlmICh1LnNpZ2hleCA9PSBudWxsICYmIHUuc2JqcHJ2a2V5ICE9IG51bGwgJiYgdGhpcy5zaWduKCksIHUuc2lnaGV4ID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJzaWdoZXggb3Igc2JqcHJ2a2V5IHBhcmFtZXRlciBub3QgZGVmaW5lZFwiKTtcbiAgICB2YXIgeSA9IG5ldyBpKHsgaGV4OiBcIjAwXCIgKyB1LnNpZ2hleCB9KSwgdiA9IG5ldyBzKHsgYXJyYXk6IFtwLCBjLCB5XSB9KTtcbiAgICByZXR1cm4gdi50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLmNzci5DZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMTtcbiAgci5ERVJCaXRTdHJpbmc7XG4gIHZhciBpID0gci5ERVJTZXF1ZW5jZSwgcyA9IHIuREVSSW50ZWdlciwgbiA9IHIuREVSVVRGOFN0cmluZywgaCA9IHIuREVSVGFnZ2VkT2JqZWN0LCB1ID0gci5BU04xVXRpbC5uZXdPYmplY3QsIHAgPSByLmNzciwgYyA9IHIueDUwOSwgeSA9IGMuWDUwME5hbWUsIHYgPSBjLkV4dGVuc2lvbnMsIG8gPSBjLlN1YmplY3RQdWJsaWNLZXlJbmZvO1xuICBwLkF0dHJpYnV0ZUxpc3QsIHAuQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihmKSB7XG4gICAgZiAhPSBudWxsICYmICh0aGlzLnBhcmFtcyA9IGYpO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGYgPSB0aGlzLnBhcmFtcywgZCA9IFtdO1xuICAgIGlmIChkLnB1c2gobmV3IHMoeyBpbnQ6IDAgfSkpLCBkLnB1c2gobmV3IHkoZi5zdWJqZWN0KSksIGQucHVzaChuZXcgbyhrLmdldEtleShmLnNianB1YmtleSkpKSwgZi5hdHRycyAhPSBudWxsKSB7XG4gICAgICB2YXIgZyA9IGwoZi5hdHRycyksIFMgPSB1KHsgdGFnOiB7IHRhZ2U6IFwiYTBcIiwgb2JqOiBnIH0gfSk7XG4gICAgICBkLnB1c2goUyk7XG4gICAgfSBlbHNlIGlmIChmLmV4dHJlcSAhPSBudWxsKSB7XG4gICAgICB2YXIgYiA9IG5ldyB2KGYuZXh0cmVxKSwgUyA9IHUoeyB0YWc6IHsgdGFnZTogXCJhMFwiLCBvYmo6IHsgc2VxOiBbeyBvaWQ6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjE0XCIgfSwgeyBzZXQ6IFtiXSB9XSB9IH0gfSk7XG4gICAgICBkLnB1c2goUyk7XG4gICAgfSBlbHNlXG4gICAgICBkLnB1c2gobmV3IGgoeyB0YWc6IFwiYTBcIiwgZXhwbGljaXQ6ICExLCBvYmo6IG5ldyBuKHsgc3RyOiBcIlwiIH0pIH0pKTtcbiAgICB2YXIgRCA9IG5ldyBpKHsgYXJyYXk6IGQgfSk7XG4gICAgcmV0dXJuIEQudG9oZXgoKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfTtcbiAgZnVuY3Rpb24gbChmKSB7XG4gICAgZm9yICh2YXIgZCA9IEVycm9yLCBnID0gYS5hc24xLng1MDkuRXh0ZW5zaW9ucywgUyA9IFtdLCBiID0gMDsgYiA8IGYubGVuZ3RoOyBiKyspIHtcbiAgICAgIHZhciBEID0gZltiXSwgQSA9IEQuYXR0cjtcbiAgICAgIGlmIChBID09IFwiZXh0ZW5zaW9uUmVxdWVzdFwiKSB7XG4gICAgICAgIHZhciBJID0gbmV3IGcoRC5leHQpLCBtID0geyBzZXE6IFt7IG9pZDogXCIxLjIuODQwLjExMzU0OS4xLjkuMTRcIiB9LCB7IHNldDogW0ldIH1dIH07XG4gICAgICAgIFMucHVzaChtKTtcbiAgICAgIH0gZWxzZSBpZiAoQSA9PSBcInVuc3RydWN0dXJlZE5hbWVcIikge1xuICAgICAgICB2YXIgbSA9IHsgc2VxOiBbeyBvaWQ6IFwiMS4yLjg0MC4xMTM1NDkuMS45LjJcIiB9LCB7IHNldDogRC5uYW1lcyB9XSB9O1xuICAgICAgICBTLnB1c2gobSk7XG4gICAgICB9IGVsc2UgaWYgKEEgPT0gXCJjaGFsbGVuZ2VQYXNzd29yZFwiKSB7XG4gICAgICAgIHZhciBtID0geyBzZXE6IFt7IG9pZDogXCIxLjIuODQwLjExMzU0OS4xLjkuN1wiIH0sIHsgc2V0OiBbeyB1dGY4c3RyOiBELnBhc3N3b3JkIH1dIH1dIH07XG4gICAgICAgIFMucHVzaChtKTtcbiAgICAgIH0gZWxzZVxuICAgICAgICB0aHJvdyBuZXcgZChcInVua25vd24gQ1NSIGF0dHJpYnV0ZVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgc2V0OiBTIH07XG4gIH1cbiAgZSAhPSBudWxsICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5jc3IuQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEuY3NyLkF0dHJpYnV0ZUxpc3QgPSBmdW5jdGlvbihlKSB7XG59O1xuTihhLmFzbjEuY3NyLkF0dHJpYnV0ZUxpc3QsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5jc3IuQ1NSVXRpbCA9IG5ldyBmdW5jdGlvbigpIHtcbn0oKTtcbmEuYXNuMS5jc3IuQ1NSVXRpbC5uZXdDU1JQRU0gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gYS5hc24xLmNzciwgciA9IG5ldyB0LkNlcnRpZmljYXRpb25SZXF1ZXN0KGUpLCBpID0gci5nZXRQRU0oKTtcbiAgcmV0dXJuIGk7XG59O1xuYS5hc24xLmNzci5DU1JVdGlsLmdldFBhcmFtID0gZnVuY3Rpb24oZSwgdCkge1xuICB2YXIgciA9IFYsIGkgPSByLmdldFYsIHMgPSByLmdldElkeGJ5TGlzdCwgbiA9IHIuZ2V0VExWYnlMaXN0LCBoID0gci5nZXRUTFZieUxpc3RFeCwgdSA9IHIuZ2V0VmJ5TGlzdEV4LCBwID0gZnVuY3Rpb24oYikge1xuICAgIHZhciBEID0gcyhiLCAwLCBbMCwgMywgMCwgMF0sIFwiMDZcIik7XG4gICAgcmV0dXJuIGkoYiwgRCkgIT0gXCIyYTg2NDg4NmY3MGQwMTA5MGVcIiA/IG51bGwgOiBuKGIsIDAsIFswLCAzLCAwLCAxLCAwXSwgXCIzMFwiKTtcbiAgfSwgYyA9IHt9O1xuICBpZiAoZS5pbmRleE9mKFwiLS0tLS1CRUdJTiBDRVJUSUZJQ0FURSBSRVFVRVNUXCIpID09IC0xKVxuICAgIHRocm93IG5ldyBFcnJvcihcImFyZ3VtZW50IGlzIG5vdCBQRU0gZmlsZVwiKTtcbiAgdmFyIHkgPSBpZShlLCBcIkNFUlRJRklDQVRFIFJFUVVFU1RcIik7XG4gIHQgJiYgKGMudGJzID0gbih5LCAwLCBbMF0pKTtcbiAgdHJ5IHtcbiAgICB2YXIgdiA9IGgoeSwgMCwgWzAsIDFdKTtcbiAgICBpZiAodiA9PSBcIjMwMDBcIilcbiAgICAgIGMuc3ViamVjdCA9IHt9O1xuICAgIGVsc2Uge1xuICAgICAgdmFyIGQgPSBuZXcgTCgpO1xuICAgICAgYy5zdWJqZWN0ID0gZC5nZXRYNTAwTmFtZSh2KTtcbiAgICB9XG4gIH0gY2F0Y2gge1xuICB9XG4gIHZhciBvID0gaCh5LCAwLCBbMCwgMl0pLCBsID0gay5nZXRLZXkobywgbnVsbCwgXCJwa2NzOHB1YlwiKTtcbiAgYy5zYmpwdWJrZXkgPSBrLmdldFBFTShsLCBcIlBLQ1M4UFVCXCIpO1xuICB2YXIgZiA9IHAoeSksIGQgPSBuZXcgTCgpO1xuICBmICE9IG51bGwgJiYgKGMuZXh0cmVxID0gZC5nZXRFeHRQYXJhbUFycmF5KGYpKTtcbiAgdHJ5IHtcbiAgICB2YXIgZyA9IGgoeSwgMCwgWzFdLCBcIjMwXCIpLCBkID0gbmV3IEwoKTtcbiAgICBjLnNpZ2FsZyA9IGQuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWUoZyk7XG4gIH0gY2F0Y2gge1xuICB9XG4gIHRyeSB7XG4gICAgdmFyIFMgPSB1KHksIDAsIFsyXSk7XG4gICAgYy5zaWdoZXggPSBTO1xuICB9IGNhdGNoIHtcbiAgfVxuICByZXR1cm4gYztcbn07XG5hLmFzbjEuY3NyLkNTUlV0aWwudmVyaWZ5U2lnbmF0dXJlID0gZnVuY3Rpb24oZSkge1xuICB0cnkge1xuICAgIHZhciB0ID0gbnVsbDtcbiAgICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIiAmJiBlLmluZGV4T2YoXCItLS0tLUJFR0lOIENFUlRJRklDQVRFIFJFUVVFU1RcIikgIT0gLTEgPyB0ID0gYS5hc24xLmNzci5DU1JVdGlsLmdldFBhcmFtKGUsICEwKSA6IHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgZS5zYmpwdWJrZXkgIT0gbnVsbCAmJiBlLnNpZ2FsZyAhPSBudWxsICYmIGUuc2lnaGV4ICE9IG51bGwgJiYgZS50YnMgIT0gbnVsbCAmJiAodCA9IGUpLCB0ID09IG51bGwpXG4gICAgICByZXR1cm4gITE7XG4gICAgdmFyIHIgPSBuZXcgYS5jcnlwdG8uU2lnbmF0dXJlKHsgYWxnOiB0LnNpZ2FsZyB9KTtcbiAgICByZXR1cm4gci5pbml0KHQuc2JqcHVia2V5KSwgci51cGRhdGVIZXgodC50YnMpLCByLnZlcmlmeSh0LnNpZ2hleCk7XG4gIH0gY2F0Y2ggKGkpIHtcbiAgICByZXR1cm4gYWxlcnQoaSksICExO1xuICB9XG59O1xuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmFzbjEgPiBcInVcIiB8fCAhYS5hc24xKSAmJiAoYS5hc24xID0ge30pO1xuKHR5cGVvZiBhLmFzbjEub2NzcCA+IFwidVwiIHx8ICFhLmFzbjEub2NzcCkgJiYgKGEuYXNuMS5vY3NwID0ge30pO1xuYS5hc24xLm9jc3AuREVGQVVMVF9IQVNIID0gXCJzaGExXCI7XG5hLmFzbjEub2NzcC5PQ1NQUmVzcG9uc2UgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5vY3NwLk9DU1BSZXNwb25zZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIGEuYXNuMS5ERVJFbnVtZXJhdGVkO1xuICB2YXIgdCA9IGEuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QsIHIgPSBhLmFzbjEub2NzcC5SZXNwb25zZUJ5dGVzLCBpID0gW1wic3VjY2Vzc2Z1bFwiLCBcIm1hbGZvcm1lZFJlcXVlc3RcIiwgXCJpbnRlcm5hbEVycm9yXCIsIFwidHJ5TGF0ZXJcIiwgXCJfbm90X3VzZWRfXCIsIFwic2lnUmVxdWlyZWRcIiwgXCJ1bmF1dGhvcml6ZWRcIl07XG4gIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5fZ2V0U3RhdHVzQ29kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gdGhpcy5wYXJhbXMucmVzc3RhdHVzO1xuICAgIHJldHVybiB0eXBlb2YgcyA9PSBcIm51bWJlclwiID8gcyA6IHR5cGVvZiBzICE9IFwic3RyaW5nXCIgPyAtMSA6IGkuaW5kZXhPZihzKTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24ocykge1xuICAgIHRoaXMucGFyYW1zID0gcztcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gdGhpcy5wYXJhbXMsIG4gPSB0aGlzLl9nZXRTdGF0dXNDb2RlKCk7XG4gICAgaWYgKG4gPT0gLTEpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJyZXNwb25zZVN0YXR1cyBub3Qgc3VwcG9ydGVkOiBcIiArIHMucmVzc3RhdHVzKTtcbiAgICBpZiAobiAhPSAwKVxuICAgICAgcmV0dXJuIHQoeyBzZXE6IFt7IGVudW06IHsgaW50OiBuIH0gfV0gfSkudG9oZXgoKTtcbiAgICB2YXIgaCA9IG5ldyByKHMpO1xuICAgIHJldHVybiB0KHsgc2VxOiBbeyBlbnVtOiB7IGludDogMCB9IH0sIHsgdGFnOiB7IHRhZzogXCJhMFwiLCBleHBsaWNpdDogITAsIG9iajogaCB9IH1dIH0pLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEub2NzcC5PQ1NQUmVzcG9uc2UsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLlJlc3BvbnNlQnl0ZXMgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5vY3NwLlJlc3BvbnNlQnl0ZXMuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IGEuYXNuMSwgciA9IHQuREVSU2VxdWVuY2UsIGkgPSB0LkRFUk9iamVjdElkZW50aWZpZXIsIHMgPSB0LkRFUk9jdGV0U3RyaW5nLCBuID0gdC5vY3NwLkJhc2ljT0NTUFJlc3BvbnNlO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKGgpIHtcbiAgICB0aGlzLnBhcmFtcyA9IGg7XG4gIH0sIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IHRoaXMucGFyYW1zO1xuICAgIGlmIChoLnJlc3R5cGUgIT0gXCJvY3NwQmFzaWNcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBzdXBwb3J0ZWQgcmVzcG9uc2VUeXBlOiBcIiArIGgucmVzdHlwZSk7XG4gICAgdmFyIHUgPSBuZXcgbihoKSwgcCA9IFtdO1xuICAgIHAucHVzaChuZXcgaSh7IG5hbWU6IFwib2NzcEJhc2ljXCIgfSkpLCBwLnB1c2gobmV3IHMoeyBoZXg6IHUudG9oZXgoKSB9KSk7XG4gICAgdmFyIGMgPSBuZXcgcih7IGFycmF5OiBwIH0pO1xuICAgIHJldHVybiBjLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEub2NzcC5SZXNwb25zZUJ5dGVzLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEub2NzcC5CYXNpY09DU1BSZXNwb25zZSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLm9jc3AuQmFzaWNPQ1NQUmVzcG9uc2Uuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICB2YXIgdCA9IEVycm9yLCByID0gYS5hc24xLCBpID0gci5BU04xT2JqZWN0LCBzID0gci5ERVJTZXF1ZW5jZTtcbiAgci5ERVJHZW5lcmFsaXplZFRpbWU7XG4gIHZhciBuID0gci5ERVJUYWdnZWRPYmplY3QsIGggPSByLkRFUkJpdFN0cmluZztcbiAgci54NTA5LkV4dGVuc2lvbnM7XG4gIHZhciB1ID0gci54NTA5LkFsZ29yaXRobUlkZW50aWZpZXIsIHAgPSByLm9jc3A7XG4gIHAuUmVzcG9uZGVySUQsIF9TaW5nbGVSZXNwb25zZUxpc3QgPSBwLlNpbmdsZVJlc3BvbnNlTGlzdCwgX1Jlc3BvbnNlRGF0YSA9IHAuUmVzcG9uc2VEYXRhLCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB0aGlzLnBhcmFtcyA9IGM7XG4gIH0sIHRoaXMuc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjID0gdGhpcy5wYXJhbXMsIHkgPSBjLnRic3Jlc3AudG9oZXgoKSwgdiA9IG5ldyBhLmNyeXB0by5TaWduYXR1cmUoeyBhbGc6IGMuc2lnYWxnIH0pO1xuICAgIHYuaW5pdChjLnJlc2tleSksIHYudXBkYXRlSGV4KHkpLCBjLnNpZ2hleCA9IHYuc2lnbigpO1xuICB9LCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGMgPSB0aGlzLnBhcmFtcztcbiAgICBjLnRic3Jlc3AgPT0gbnVsbCAmJiAoYy50YnNyZXNwID0gbmV3IF9SZXNwb25zZURhdGEoYykpLCBjLnNpZ2hleCA9PSBudWxsICYmIGMucmVza2V5ICE9IG51bGwgJiYgdGhpcy5zaWduKCk7XG4gICAgdmFyIHkgPSBbXTtcbiAgICBpZiAoeS5wdXNoKGMudGJzcmVzcCksIHkucHVzaChuZXcgdSh7IG5hbWU6IGMuc2lnYWxnIH0pKSwgeS5wdXNoKG5ldyBoKHsgaGV4OiBcIjAwXCIgKyBjLnNpZ2hleCB9KSksIGMuY2VydHMgIT0gbnVsbCAmJiBjLmNlcnRzLmxlbmd0aCAhPSBudWxsKSB7XG4gICAgICBmb3IgKHZhciB2ID0gW10sIG8gPSAwOyBvIDwgYy5jZXJ0cy5sZW5ndGg7IG8rKykge1xuICAgICAgICB2YXIgbCA9IGMuY2VydHNbb10sIGYgPSBudWxsO1xuICAgICAgICBpZiAoVi5pc0FTTjFIRVgobCkpXG4gICAgICAgICAgZiA9IGw7XG4gICAgICAgIGVsc2UgaWYgKGwubWF0Y2goLy0tLS0tQkVHSU4vKSlcbiAgICAgICAgICBmID0gaWUobCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aHJvdyBuZXcgdChcImNlcnRzW1wiICsgbyArIFwiXSBub3QgaGV4IG9yIFBFTVwiKTtcbiAgICAgICAgdi5wdXNoKG5ldyBpKHsgdGx2OiBmIH0pKTtcbiAgICAgIH1cbiAgICAgIHZhciBkID0gbmV3IHMoeyBhcnJheTogdiB9KTtcbiAgICAgIHkucHVzaChuZXcgbih7IHRhZzogXCJhMFwiLCBleHBsaWNpdDogITAsIG9iajogZCB9KSk7XG4gICAgfVxuICAgIHZhciBnID0gbmV3IHMoeyBhcnJheTogeSB9KTtcbiAgICByZXR1cm4gZy50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLm9jc3AuQmFzaWNPQ1NQUmVzcG9uc2UsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLlJlc3BvbnNlRGF0YSA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLm9jc3AuUmVzcG9uc2VEYXRhLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgdmFyIHQgPSBhLmFzbjEsIHIgPSB0LkRFUlNlcXVlbmNlLCBpID0gdC5ERVJHZW5lcmFsaXplZFRpbWUsIHMgPSB0LkRFUlRhZ2dlZE9iamVjdCwgbiA9IHQueDUwOS5FeHRlbnNpb25zLCBoID0gdC5vY3NwLCB1ID0gaC5SZXNwb25kZXJJRDtcbiAgX1NpbmdsZVJlc3BvbnNlTGlzdCA9IGguU2luZ2xlUmVzcG9uc2VMaXN0LCB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcCA9IHRoaXMucGFyYW1zO1xuICAgIHAucmVzcGlkICE9IG51bGwsIHAucHJvZGF0ICE9IG51bGwsIHAuYXJyYXkgIT0gbnVsbDtcbiAgICB2YXIgYyA9IFtdO1xuICAgIGlmIChjLnB1c2gobmV3IHUocC5yZXNwaWQpKSwgYy5wdXNoKG5ldyBpKHAucHJvZGF0KSksIGMucHVzaChuZXcgX1NpbmdsZVJlc3BvbnNlTGlzdChwLmFycmF5KSksIHAuZXh0ICE9IG51bGwpIHtcbiAgICAgIHZhciB5ID0gbmV3IG4ocC5leHQpO1xuICAgICAgYy5wdXNoKG5ldyBzKHsgdGFnOiBcImExXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiB5IH0pKTtcbiAgICB9XG4gICAgdmFyIHYgPSBuZXcgcih7IGFycmF5OiBjIH0pO1xuICAgIHJldHVybiB2LnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHApIHtcbiAgICB0aGlzLnBhcmFtcyA9IHA7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEub2NzcC5SZXNwb25zZURhdGEsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLlJlc3BvbmRlcklEID0gZnVuY3Rpb24oZSkge1xuICBhLmFzbjEub2NzcC5SZXNwb25kZXJJRC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYSwgciA9IHQuYXNuMSwgaSA9IHIuQVNOMVV0aWwubmV3T2JqZWN0LCBzID0gci54NTA5Llg1MDBOYW1lLCBuID0gdC5sYW5nLlN0cmluZy5pc0hleCwgaCA9IEVycm9yO1xuICB0aGlzLnBhcmFtcyA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdSA9IHRoaXMucGFyYW1zO1xuICAgIGlmICh1LmtleSAhPSBudWxsKSB7XG4gICAgICB2YXIgcCA9IG51bGw7XG4gICAgICBpZiAodHlwZW9mIHUua2V5ID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKG4odS5rZXkpICYmIChwID0gdS5rZXkpLCB1LmtleS5tYXRjaCgvLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS8pKSB7XG4gICAgICAgICAgdmFyIGMgPSBuZXcgTCh1LmtleSksIHkgPSBjLmdldEV4dFN1YmplY3RLZXlJZGVudGlmaWVyKCk7XG4gICAgICAgICAgeSAhPSBudWxsICYmIChwID0geS5raWQuaGV4KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh1LmtleSBpbnN0YW5jZW9mIEwpIHtcbiAgICAgICAgdmFyIHkgPSB1LmtleS5nZXRFeHRTdWJqZWN0S2V5SWRlbnRpZmllcigpO1xuICAgICAgICB5ICE9IG51bGwgJiYgKHAgPSB5LmtpZC5oZXgpO1xuICAgICAgfVxuICAgICAgaWYgKHAgPT0gbnVsbClcbiAgICAgICAgdGhyb3cgbmV3IGgoXCJ3cm9uZyBrZXkgbWVtYmVyIHZhbHVlXCIpO1xuICAgICAgdmFyIHYgPSBpKHsgdGFnOiB7IHRhZzogXCJhMlwiLCBleHBsaWNpdDogITAsIG9iajogeyBvY3RzdHI6IHsgaGV4OiBwIH0gfSB9IH0pO1xuICAgICAgcmV0dXJuIHYudG9oZXgoKTtcbiAgICB9IGVsc2UgaWYgKHUubmFtZSAhPSBudWxsKSB7XG4gICAgICB2YXIgbyA9IG51bGw7XG4gICAgICBpZiAodHlwZW9mIHUubmFtZSA9PSBcInN0cmluZ1wiICYmIHUubmFtZS5tYXRjaCgvLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS8pKSB7XG4gICAgICAgIHZhciBjID0gbmV3IEwodS5uYW1lKTtcbiAgICAgICAgbyA9IGMuZ2V0U3ViamVjdCgpO1xuICAgICAgfSBlbHNlXG4gICAgICAgIHUubmFtZSBpbnN0YW5jZW9mIEwgPyBvID0gdS5uYW1lLmdldFN1YmplY3QoKSA6IHR5cGVvZiB1Lm5hbWUgPT0gXCJvYmplY3RcIiAmJiAodS5uYW1lLmFycmF5ICE9IG51bGwgfHwgdS5uYW1lLnN0ciAhPSBudWxsKSAmJiAobyA9IHUubmFtZSk7XG4gICAgICBpZiAobyA9PSBudWxsKVxuICAgICAgICB0aHJvdyBuZXcgaChcIndyb25nIG5hbWUgbWVtYmVyIHZhbHVlXCIpO1xuICAgICAgdmFyIHYgPSBpKHsgdGFnOiB7IHRhZzogXCJhMVwiLCBleHBsaWNpdDogITAsIG9iajogbmV3IHMobykgfSB9KTtcbiAgICAgIHJldHVybiB2LnRvaGV4KCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBoKFwia2V5IG9yIG5hbWUgbm90IHNwZWNpZmllZFwiKTtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdGhpcy5zZXRCeVBhcmFtID0gZnVuY3Rpb24odSkge1xuICAgIHRoaXMucGFyYW1zID0gdTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5vY3NwLlJlc3BvbmRlcklELCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEub2NzcC5TaW5nbGVSZXNwb25zZUxpc3QgPSBmdW5jdGlvbihlKSB7XG4gIGEuYXNuMS5vY3NwLlNpbmdsZVJlc3BvbnNlTGlzdC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gIHZhciB0ID0gYS5hc24xLCByID0gdC5ERVJTZXF1ZW5jZSwgaSA9IHQub2NzcC5TaW5nbGVSZXNwb25zZTtcbiAgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSB0aGlzLnBhcmFtcztcbiAgICBpZiAodHlwZW9mIHMgIT0gXCJvYmplY3RcIiB8fCBzLmxlbmd0aCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicGFyYW1zIG5vdCBzcGVjaWZpZWQgcHJvcGVybHlcIik7XG4gICAgZm9yICh2YXIgbiA9IFtdLCBoID0gMDsgaCA8IHMubGVuZ3RoOyBoKyspXG4gICAgICBuLnB1c2gobmV3IGkoc1toXSkpO1xuICAgIHZhciB1ID0gbmV3IHIoeyBhcnJheTogbiB9KTtcbiAgICByZXR1cm4gdS50b2hleCgpO1xuICB9LCB0aGlzLmdldEVuY29kZWRIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2hleCgpO1xuICB9LCB0aGlzLnNldEJ5UGFyYW0gPSBmdW5jdGlvbihzKSB7XG4gICAgdGhpcy5wYXJhbXMgPSBzO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRCeVBhcmFtKGUpO1xufTtcbk4oYS5hc24xLm9jc3AuU2luZ2xlUmVzcG9uc2VMaXN0LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEub2NzcC5TaW5nbGVSZXNwb25zZSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBFcnJvciwgciA9IGEsIGkgPSByLmFzbjEsIHMgPSBpLkRFUlNlcXVlbmNlLCBuID0gaS5ERVJHZW5lcmFsaXplZFRpbWUsIGggPSBpLkRFUlRhZ2dlZE9iamVjdCwgdSA9IGkub2NzcCwgcCA9IHUuQ2VydElELCBjID0gdS5DZXJ0U3RhdHVzLCB5ID0gaS54NTA5LCB2ID0geS5FeHRlbnNpb25zO1xuICB1LlNpbmdsZVJlc3BvbnNlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbXMgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG8gPSB0aGlzLnBhcmFtcywgbCA9IFtdO1xuICAgIGlmIChvLmNlcnRpZCA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IHQoXCJjZXJ0aWQgdW5zcGVjaWZpZWRcIik7XG4gICAgaWYgKG8uc3RhdHVzID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcInN0YXR1cyB1bnNwZWNpZmllZFwiKTtcbiAgICBpZiAoby50aGlzdXBkYXRlID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgdChcInRoaXN1cGRhdGUgdW5zcGVjaWZpZWRcIik7XG4gICAgaWYgKGwucHVzaChuZXcgcChvLmNlcnRpZCkpLCBsLnB1c2gobmV3IGMoby5zdGF0dXMpKSwgbC5wdXNoKG5ldyBuKG8udGhpc3VwZGF0ZSkpLCBvLm5leHR1cGRhdGUgIT0gbnVsbCkge1xuICAgICAgdmFyIGYgPSBuZXcgbihvLm5leHR1cGRhdGUpO1xuICAgICAgbC5wdXNoKG5ldyBoKHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiBmIH0pKTtcbiAgICB9XG4gICAgaWYgKG8uZXh0ICE9IG51bGwpIHtcbiAgICAgIHZhciBkID0gbmV3IHYoby5leHQpO1xuICAgICAgbC5wdXNoKG5ldyBoKHsgdGFnOiBcImExXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiBkIH0pKTtcbiAgICB9XG4gICAgdmFyIGcgPSBuZXcgcyh7IGFycmF5OiBsIH0pO1xuICAgIHJldHVybiBnLnRvaGV4KCk7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKG8pIHtcbiAgICB0aGlzLnBhcmFtcyA9IG87XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEub2NzcC5TaW5nbGVSZXNwb25zZSwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLm9jc3AuQ2VydElEID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUk9jdGV0U3RyaW5nLCBzID0gci5ERVJJbnRlZ2VyLCBuID0gci5ERVJTZXF1ZW5jZSwgaCA9IHIueDUwOSwgdSA9IGguQWxnb3JpdGhtSWRlbnRpZmllciwgcCA9IHIub2NzcDtcbiAgcC5ERUZBVUxUX0hBU0g7XG4gIHZhciBjID0gdC5jcnlwdG8sIHkgPSBjLlV0aWwuaGFzaEhleCwgdiA9IEwsIG8gPSBWLCBsID0gby5nZXRWYnlMaXN0O1xuICBwLkNlcnRJRC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuREVGQVVMVF9IQVNIID0gXCJzaGExXCIsIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy5zZXRCeVZhbHVlID0gZnVuY3Rpb24oZiwgZCwgZywgUykge1xuICAgIFMgPT0gbnVsbCAmJiAoUyA9IHRoaXMuREVGQVVMVF9IQVNIKSwgdGhpcy5wYXJhbXMgPSB7IGFsZzogUywgaXNzbmFtZTogZiwgaXNza2V5OiBkLCBzYmpzbjogZyB9O1xuICB9LCB0aGlzLnNldEJ5Q2VydCA9IGZ1bmN0aW9uKGYsIGQsIGcpIHtcbiAgICBnID09IG51bGwgJiYgKGcgPSB0aGlzLkRFRkFVTFRfSEFTSCksIHRoaXMucGFyYW1zID0geyBhbGc6IGcsIGlzc3VlckNlcnQ6IGYsIHN1YmplY3RDZXJ0OiBkIH07XG4gIH0sIHRoaXMuZ2V0UGFyYW1CeUNlcnRzID0gZnVuY3Rpb24oZiwgZCwgZykge1xuICAgIGcgPT0gbnVsbCAmJiAoZyA9IHRoaXMuREVGQVVMVF9IQVNIKTtcbiAgICB2YXIgUyA9IG5ldyB2KGYpLCBiID0gbmV3IHYoZCksIEQgPSB5KFMuZ2V0U3ViamVjdEhleCgpLCBnKSwgQSA9IFMuZ2V0UHVibGljS2V5SGV4KCksIEkgPSB5KGwoQSwgMCwgWzFdLCBcIjAzXCIsICEwKSwgZyksIG0gPSBiLmdldFNlcmlhbE51bWJlckhleCgpLCBFID0geyBhbGc6IGcsIGlzc25hbWU6IEQsIGlzc2tleTogSSwgc2Jqc246IG0gfTtcbiAgICByZXR1cm4gRTtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5wYXJhbXMgIT0gXCJvYmplY3RcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInBhcmFtcyBub3Qgc2V0XCIpO1xuICAgIHZhciBmID0gdGhpcy5wYXJhbXMsIGQsIGcsIFMsIGI7XG4gICAgaWYgKGYuYWxnID09IG51bGwgPyBiID0gdGhpcy5ERUZBVUxUX0hBU0ggOiBiID0gZi5hbGcsIGYuaXNzdWVyQ2VydCAhPSBudWxsICYmIGYuc3ViamVjdENlcnQgIT0gbnVsbCkge1xuICAgICAgdmFyIEQgPSB0aGlzLmdldFBhcmFtQnlDZXJ0cyhmLmlzc3VlckNlcnQsIGYuc3ViamVjdENlcnQsIGIpO1xuICAgICAgZCA9IEQuaXNzbmFtZSwgZyA9IEQuaXNza2V5LCBTID0gRC5zYmpzbjtcbiAgICB9IGVsc2UgaWYgKGYuaXNzbmFtZSAhPSBudWxsICYmIGYuaXNza2V5ICE9IG51bGwgJiYgZi5zYmpzbiAhPSBudWxsKVxuICAgICAgZCA9IGYuaXNzbmFtZSwgZyA9IGYuaXNza2V5LCBTID0gZi5zYmpzbjtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJyZXF1aXJlZCBwYXJhbSBtZW1iZXJzIG5vdCBkZWZpbmVkXCIpO1xuICAgIHZhciBBID0gbmV3IHUoeyBuYW1lOiBiIH0pLCBJID0gbmV3IGkoeyBoZXg6IGQgfSksIG0gPSBuZXcgaSh7IGhleDogZyB9KSwgRSA9IG5ldyBzKHsgaGV4OiBTIH0pLCB3ID0gbmV3IG4oeyBhcnJheTogW0EsIEksIG0sIEVdIH0pO1xuICAgIHJldHVybiB0aGlzLmhUTFYgPSB3LnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIHRoaXMuc2V0QnlQYXJhbShlKTtcbn07XG5OKGEuYXNuMS5vY3NwLkNlcnRJRCwgYS5hc24xLkFTTjFPYmplY3QpO1xuYS5hc24xLm9jc3AuQ2VydFN0YXR1cyA9IGZ1bmN0aW9uKGUpIHtcbiAgYS5hc24xLm9jc3AuQ2VydFN0YXR1cy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMucGFyYW1zID0gbnVsbCwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gdGhpcy5wYXJhbXM7XG4gICAgaWYgKHQuc3RhdHVzID09IFwiZ29vZFwiKVxuICAgICAgcmV0dXJuIFwiODAwMFwiO1xuICAgIGlmICh0LnN0YXR1cyA9PSBcInVua25vd25cIilcbiAgICAgIHJldHVybiBcIjgyMDBcIjtcbiAgICBpZiAodC5zdGF0dXMgPT0gXCJyZXZva2VkXCIpIHtcbiAgICAgIHZhciByID0gW3sgZ2VudGltZTogeyBzdHI6IHQudGltZSB9IH1dO1xuICAgICAgdC5yZWFzb24gIT0gbnVsbCAmJiByLnB1c2goeyB0YWc6IHsgdGFnOiBcImEwXCIsIGV4cGxpY2l0OiAhMCwgb2JqOiB7IGVudW06IHsgaW50OiB0LnJlYXNvbiB9IH0gfSB9KTtcbiAgICAgIHZhciBpID0geyB0YWc6IFwiYTFcIiwgZXhwbGljaXQ6ICExLCBvYmo6IHsgc2VxOiByIH0gfTtcbiAgICAgIHJldHVybiBhLmFzbjEuQVNOMVV0aWwubmV3T2JqZWN0KHsgdGFnOiBpIH0pLnRvaGV4KCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcImJhZCBzdGF0dXNcIik7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIHRoaXMuc2V0QnlQYXJhbSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnBhcmFtcyA9IHQ7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiB0aGlzLnNldEJ5UGFyYW0oZSk7XG59O1xuTihhLmFzbjEub2NzcC5DZXJ0U3RhdHVzLCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEub2NzcC5SZXF1ZXN0ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5vY3NwO1xuICBpZiAocy5SZXF1ZXN0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5kUmVxQ2VydCA9IG51bGwsIHRoaXMuZEV4dCA9IG51bGwsIHRoaXMudG9oZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IFtdO1xuICAgIGlmICh0aGlzLmRSZXFDZXJ0ID09PSBudWxsKVxuICAgICAgdGhyb3cgXCJyZXFDZXJ0IG5vdCBzZXRcIjtcbiAgICBoLnB1c2godGhpcy5kUmVxQ2VydCk7XG4gICAgdmFyIHUgPSBuZXcgaSh7IGFycmF5OiBoIH0pO1xuICAgIHJldHVybiB0aGlzLmhUTFYgPSB1LnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgdHlwZW9mIGUgPCBcInVcIikge1xuICAgIHZhciBuID0gbmV3IHMuQ2VydElEKGUpO1xuICAgIHRoaXMuZFJlcUNlcnQgPSBuO1xuICB9XG59O1xuTihhLmFzbjEub2NzcC5SZXF1ZXN0LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEub2NzcC5UQlNSZXF1ZXN0ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEsIHIgPSB0LmFzbjEsIGkgPSByLkRFUlNlcXVlbmNlLCBzID0gci5vY3NwO1xuICBzLlRCU1JlcXVlc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLnZlcnNpb24gPSAwLCB0aGlzLmRSZXF1ZXN0b3JOYW1lID0gbnVsbCwgdGhpcy5kUmVxdWVzdExpc3QgPSBbXSwgdGhpcy5kUmVxdWVzdEV4dCA9IG51bGwsIHRoaXMuc2V0UmVxdWVzdExpc3RCeVBhcmFtID0gZnVuY3Rpb24obikge1xuICAgIGZvciAodmFyIGggPSBbXSwgdSA9IDA7IHUgPCBuLmxlbmd0aDsgdSsrKSB7XG4gICAgICB2YXIgcCA9IG5ldyBzLlJlcXVlc3QoblswXSk7XG4gICAgICBoLnB1c2gocCk7XG4gICAgfVxuICAgIHRoaXMuZFJlcXVlc3RMaXN0ID0gaDtcbiAgfSwgdGhpcy50b2hleCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuID0gW107XG4gICAgaWYgKHRoaXMudmVyc2lvbiAhPT0gMClcbiAgICAgIHRocm93IFwibm90IHN1cHBvcnRlZCB2ZXJzaW9uOiBcIiArIHRoaXMudmVyc2lvbjtcbiAgICBpZiAodGhpcy5kUmVxdWVzdG9yTmFtZSAhPT0gbnVsbClcbiAgICAgIHRocm93IFwicmVxdWVzdG9yTmFtZSBub3Qgc3VwcG9ydGVkXCI7XG4gICAgdmFyIGggPSBuZXcgaSh7IGFycmF5OiB0aGlzLmRSZXF1ZXN0TGlzdCB9KTtcbiAgICBpZiAobi5wdXNoKGgpLCB0aGlzLmRSZXF1ZXN0RXh0ICE9PSBudWxsKVxuICAgICAgdGhyb3cgXCJyZXF1ZXN0RXh0ZW5zaW9ucyBub3Qgc3VwcG9ydGVkXCI7XG4gICAgdmFyIHUgPSBuZXcgaSh7IGFycmF5OiBuIH0pO1xuICAgIHJldHVybiB0aGlzLmhUTFYgPSB1LnRvaGV4KCksIHRoaXMuaFRMVjtcbiAgfSwgdGhpcy5nZXRFbmNvZGVkSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9oZXgoKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIGUucmVxTGlzdCAhPT0gdm9pZCAwICYmIHRoaXMuc2V0UmVxdWVzdExpc3RCeVBhcmFtKGUucmVxTGlzdCk7XG59O1xuTihhLmFzbjEub2NzcC5UQlNSZXF1ZXN0LCBhLmFzbjEuQVNOMU9iamVjdCk7XG5hLmFzbjEub2NzcC5PQ1NQUmVxdWVzdCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLCByID0gdC5hc24xLCBpID0gci5ERVJTZXF1ZW5jZSwgcyA9IHIub2NzcDtcbiAgaWYgKHMuT0NTUFJlcXVlc3Quc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmRUYnNSZXF1ZXN0ID0gbnVsbCwgdGhpcy5kT3B0aW9uYWxTaWduYXR1cmUgPSBudWxsLCB0aGlzLnRvaGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSBbXTtcbiAgICBpZiAodGhpcy5kVGJzUmVxdWVzdCAhPT0gbnVsbClcbiAgICAgIGgucHVzaCh0aGlzLmRUYnNSZXF1ZXN0KTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBcInRic1JlcXVlc3Qgbm90IHNldFwiO1xuICAgIGlmICh0aGlzLmRPcHRpb25hbFNpZ25hdHVyZSAhPT0gbnVsbClcbiAgICAgIHRocm93IFwib3B0aW9uYWxTaWduYXR1cmUgbm90IHN1cHBvcnRlZFwiO1xuICAgIHZhciB1ID0gbmV3IGkoeyBhcnJheTogaCB9KTtcbiAgICByZXR1cm4gdGhpcy5oVExWID0gdS50b2hleCgpLCB0aGlzLmhUTFY7XG4gIH0sIHRoaXMuZ2V0RW5jb2RlZEhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnRvaGV4KCk7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiBlLnJlcUxpc3QgIT09IHZvaWQgMCkge1xuICAgIHZhciBuID0gbmV3IHMuVEJTUmVxdWVzdChlKTtcbiAgICB0aGlzLmRUYnNSZXF1ZXN0ID0gbjtcbiAgfVxufTtcbk4oYS5hc24xLm9jc3AuT0NTUFJlcXVlc3QsIGEuYXNuMS5BU04xT2JqZWN0KTtcbmEuYXNuMS5vY3NwLk9DU1BVdGlsID0ge307XG5hLmFzbjEub2NzcC5PQ1NQVXRpbC5nZXRSZXF1ZXN0SGV4ID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICB2YXIgaSA9IGEsIHMgPSBpLmFzbjEsIG4gPSBzLm9jc3A7XG4gIHIgPT09IHZvaWQgMCAmJiAociA9IG4uREVGQVVMVF9IQVNIKTtcbiAgdmFyIGggPSB7IGFsZzogciwgaXNzdWVyQ2VydDogZSwgc3ViamVjdENlcnQ6IHQgfSwgdSA9IG5ldyBuLk9DU1BSZXF1ZXN0KHsgcmVxTGlzdDogW2hdIH0pO1xuICByZXR1cm4gdS50b2hleCgpO1xufTtcbmEuYXNuMS5vY3NwLk9DU1BVdGlsLmdldE9DU1BSZXNwb25zZUluZm8gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gViwgciA9IHQuZ2V0VmJ5TGlzdCwgaSA9IHQuZ2V0VmJ5TGlzdEV4LCBzID0gdC5nZXRJZHhieUxpc3Q7XG4gIHQuZ2V0SWR4YnlMaXN0RXg7XG4gIHZhciBuID0gdC5nZXRWLCBoID0ge307XG4gIHRyeSB7XG4gICAgdmFyIHUgPSBpKGUsIDAsIFswXSwgXCIwYVwiKTtcbiAgICBoLnJlc3BvbnNlU3RhdHVzID0gcGFyc2VJbnQodSwgMTYpO1xuICB9IGNhdGNoIHtcbiAgfVxuICBpZiAoaC5yZXNwb25zZVN0YXR1cyAhPT0gMClcbiAgICByZXR1cm4gaDtcbiAgdHJ5IHtcbiAgICB2YXIgcCA9IHMoZSwgMCwgWzEsIDAsIDEsIDAsIDAsIDIsIDAsIDFdKTtcbiAgICBlLnN1YnN0cihwLCAyKSA9PT0gXCI4MFwiID8gaC5jZXJ0U3RhdHVzID0gXCJnb29kXCIgOiBlLnN1YnN0cihwLCAyKSA9PT0gXCJhMVwiID8gKGguY2VydFN0YXR1cyA9IFwicmV2b2tlZFwiLCBoLnJldm9jYXRpb25UaW1lID0gVyhyKGUsIHAsIFswXSkpKSA6IGUuc3Vic3RyKHAsIDIpID09PSBcIjgyXCIgJiYgKGguY2VydFN0YXR1cyA9IFwidW5rbm93blwiKTtcbiAgfSBjYXRjaCB7XG4gIH1cbiAgdHJ5IHtcbiAgICB2YXIgYyA9IHMoZSwgMCwgWzEsIDAsIDEsIDAsIDAsIDIsIDAsIDJdKTtcbiAgICBoLnRoaXNVcGRhdGUgPSBXKG4oZSwgYykpO1xuICB9IGNhdGNoIHtcbiAgfVxuICB0cnkge1xuICAgIHZhciB5ID0gcyhlLCAwLCBbMSwgMCwgMSwgMCwgMCwgMiwgMCwgM10pO1xuICAgIGUuc3Vic3RyKHksIDIpID09PSBcImEwXCIgJiYgKGgubmV4dFVwZGF0ZSA9IFcocihlLCB5LCBbMF0pKSk7XG4gIH0gY2F0Y2gge1xuICB9XG4gIHJldHVybiBoO1xufTtcbmEuYXNuMS5vY3NwLk9DU1BQYXJzZXIgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBFcnJvciwgdCA9IEwsIHIgPSBuZXcgdCgpLCBpID0gViwgcyA9IGkuZ2V0ViwgbiA9IGkuZ2V0VExWLCBoID0gaS5nZXRJZHhieUxpc3QsIHUgPSBpLmdldFZieUxpc3QsIHAgPSBpLmdldFRMVmJ5TGlzdCwgYyA9IGkuZ2V0VmJ5TGlzdEV4LCB5ID0gaS5nZXRUTFZieUxpc3RFeCwgdiA9IGkuZ2V0Q2hpbGRJZHg7XG4gIHRoaXMuZ2V0T0NTUFJlcXVlc3QgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGwgPSB2KG8sIDApO1xuICAgIGlmIChsLmxlbmd0aCAhPSAxICYmIGwubGVuZ3RoICE9IDIpXG4gICAgICB0aHJvdyBuZXcgZShcIndyb25nIG51bWJlciBlbGVtZW50czogXCIgKyBsLmxlbmd0aCk7XG4gICAgdmFyIGYgPSB0aGlzLmdldFRCU1JlcXVlc3QobihvLCBsWzBdKSk7XG4gICAgcmV0dXJuIGY7XG4gIH0sIHRoaXMuZ2V0VEJTUmVxdWVzdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbCA9IHt9LCBmID0geShvLCAwLCBbMF0sIFwiMzBcIik7XG4gICAgbC5hcnJheSA9IHRoaXMuZ2V0UmVxdWVzdExpc3QoZik7XG4gICAgdmFyIGQgPSB5KG8sIDAsIFtcIlsyXVwiLCAwXSwgXCIzMFwiKTtcbiAgICByZXR1cm4gZCAhPSBudWxsICYmIChsLmV4dCA9IHIuZ2V0RXh0UGFyYW1BcnJheShkKSksIGw7XG4gIH0sIHRoaXMuZ2V0UmVxdWVzdExpc3QgPSBmdW5jdGlvbihvKSB7XG4gICAgZm9yICh2YXIgbCA9IFtdLCBmID0gdihvLCAwKSwgZCA9IDA7IGQgPCBmLmxlbmd0aDsgZCsrKSB7XG4gICAgICB2YXIgbyA9IG4obywgZltkXSk7XG4gICAgICBsLnB1c2godGhpcy5nZXRSZXF1ZXN0KG8pKTtcbiAgICB9XG4gICAgcmV0dXJuIGw7XG4gIH0sIHRoaXMuZ2V0UmVxdWVzdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbCA9IHYobywgMCk7XG4gICAgaWYgKGwubGVuZ3RoICE9IDEgJiYgbC5sZW5ndGggIT0gMilcbiAgICAgIHRocm93IG5ldyBlKFwid3JvbmcgbnVtYmVyIGVsZW1lbnRzOiBcIiArIGwubGVuZ3RoKTtcbiAgICB2YXIgZiA9IHRoaXMuZ2V0Q2VydElEKG4obywgbFswXSkpO1xuICAgIGlmIChsLmxlbmd0aCA9PSAyKSB7XG4gICAgICB2YXIgZCA9IGgobywgMCwgWzEsIDBdKTtcbiAgICAgIGYuZXh0ID0gci5nZXRFeHRQYXJhbUFycmF5KG4obywgZCkpO1xuICAgIH1cbiAgICByZXR1cm4gZjtcbiAgfSwgdGhpcy5nZXRDZXJ0SUQgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGwgPSB2KG8sIDApO1xuICAgIGlmIChsLmxlbmd0aCAhPSA0KVxuICAgICAgdGhyb3cgbmV3IGUoXCJ3cm9uZyBudW1iZXIgZWxlbWVudHM6IFwiICsgbC5sZW5ndGgpO1xuICAgIHZhciBmID0gbmV3IHQoKSwgZCA9IHt9O1xuICAgIHJldHVybiBkLmFsZyA9IGYuZ2V0QWxnb3JpdGhtSWRlbnRpZmllck5hbWUobihvLCBsWzBdKSksIGQuaXNzbmFtZSA9IHMobywgbFsxXSksIGQuaXNza2V5ID0gcyhvLCBsWzJdKSwgZC5zYmpzbiA9IHMobywgbFszXSksIGQ7XG4gIH0sIHRoaXMuZ2V0T0NTUFJlc3BvbnNlID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsID0gdihvLCAwKSwgZiwgZCA9IHMobywgbFswXSksIGcgPSBwYXJzZUludChkKTtcbiAgICBpZiAobC5sZW5ndGggPT0gMSlcbiAgICAgIHJldHVybiB7IHJlc3N0YXR1czogZyB9O1xuICAgIHZhciBTID0gcChvLCAwLCBbMSwgMF0pO1xuICAgIHJldHVybiBmID0gdGhpcy5nZXRSZXNwb25zZUJ5dGVzKFMpLCBmLnJlc3N0YXR1cyA9IGcsIGY7XG4gIH0sIHRoaXMuZ2V0UmVzcG9uc2VCeXRlcyA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbCA9IHYobywgMCksIGYsIGQgPSBwKG8sIDAsIFsxLCAwXSk7XG4gICAgZiA9IHRoaXMuZ2V0QmFzaWNPQ1NQUmVzcG9uc2UoZCk7XG4gICAgdmFyIGcgPSBzKG8sIGxbMF0pO1xuICAgIHJldHVybiBmLnJlc3R5cGUgPSBhLmFzbjEueDUwOS5PSUQub2lkMm5hbWUoZnQoZykpLCBmO1xuICB9LCB0aGlzLmdldEJhc2ljT0NTUFJlc3BvbnNlID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsID0gdihvLCAwKSwgZjtcbiAgICBmID0gdGhpcy5nZXRSZXNwb25zZURhdGEobihvLCBsWzBdKSk7XG4gICAgdmFyIGQgPSBuZXcgTCgpO1xuICAgIGYuYWxnID0gZC5nZXRBbGdvcml0aG1JZGVudGlmaWVyTmFtZShuKG8sIGxbMV0pKTtcbiAgICB2YXIgZyA9IHMobywgbFsyXSk7XG4gICAgZi5zaWdoZXggPSBnLnN1YnN0cigyKTtcbiAgICB2YXIgUyA9IGMobywgMCwgW1wiWzBdXCJdKTtcbiAgICBpZiAoUyAhPSBudWxsKSB7XG4gICAgICBmb3IgKHZhciBiID0gdihTLCAwKSwgRCA9IFtdLCBBID0gMDsgQSA8IGIubGVuZ3RoOyBBKyspIHtcbiAgICAgICAgdmFyIEkgPSBuKFMsIGJbQV0pO1xuICAgICAgICBELnB1c2goSSk7XG4gICAgICB9XG4gICAgICBmLmNlcnRzID0gRDtcbiAgICB9XG4gICAgcmV0dXJuIGY7XG4gIH0sIHRoaXMuZ2V0UmVzcG9uc2VEYXRhID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsID0gdihvLCAwKSwgZiA9IGwubGVuZ3RoLCBkID0ge30sIGcgPSAwO1xuICAgIG8uc3Vic3RyKGxbMF0sIDIpID09IFwiYTBcIiAmJiBnKyssIGQucmVzcGlkID0gdGhpcy5nZXRSZXNwb25kZXJJRChuKG8sIGxbZysrXSkpO1xuICAgIHZhciBTID0gcyhvLCBsW2crK10pO1xuICAgIGlmIChkLnByb2RhdCA9IFcoUyksIGQuYXJyYXkgPSB0aGlzLmdldFNpbmdsZVJlc3BvbnNlTGlzdChuKG8sIGxbZysrXSkpLCBvLnN1YnN0cihsW2YgLSAxXSwgMikgPT0gXCJhMVwiKSB7XG4gICAgICB2YXIgYiA9IHAobywgbFtmIC0gMV0sIFswXSksIEQgPSBuZXcgTCgpO1xuICAgICAgZC5leHQgPSBELmdldEV4dFBhcmFtQXJyYXkoYik7XG4gICAgfVxuICAgIHJldHVybiBkO1xuICB9LCB0aGlzLmdldFJlc3BvbmRlcklEID0gZnVuY3Rpb24obykge1xuICAgIHZhciBsID0ge307XG4gICAgaWYgKG8uc3Vic3RyKDAsIDIpID09IFwiYTJcIikge1xuICAgICAgdmFyIGYgPSB1KG8sIDAsIFswXSk7XG4gICAgICBsLmtleSA9IGY7XG4gICAgfVxuICAgIGlmIChvLnN1YnN0cigwLCAyKSA9PSBcImExXCIpIHtcbiAgICAgIHZhciBkID0gcChvLCAwLCBbMF0pLCBnID0gbmV3IEwoKTtcbiAgICAgIGwubmFtZSA9IGcuZ2V0WDUwME5hbWUoZCk7XG4gICAgfVxuICAgIHJldHVybiBsO1xuICB9LCB0aGlzLmdldFNpbmdsZVJlc3BvbnNlTGlzdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICBmb3IgKHZhciBsID0gdihvLCAwKSwgZiA9IFtdLCBkID0gMDsgZCA8IGwubGVuZ3RoOyBkKyspIHtcbiAgICAgIHZhciBnID0gdGhpcy5nZXRTaW5nbGVSZXNwb25zZShuKG8sIGxbZF0pKTtcbiAgICAgIGYucHVzaChnKTtcbiAgICB9XG4gICAgcmV0dXJuIGY7XG4gIH0sIHRoaXMuZ2V0U2luZ2xlUmVzcG9uc2UgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIGwgPSB2KG8sIDApLCBmID0ge30sIGQgPSB0aGlzLmdldENlcnRJRChuKG8sIGxbMF0pKTtcbiAgICBmLmNlcnRpZCA9IGQ7XG4gICAgdmFyIGcgPSB0aGlzLmdldENlcnRTdGF0dXMobihvLCBsWzFdKSk7XG4gICAgaWYgKGYuc3RhdHVzID0gZywgby5zdWJzdHIobFsyXSwgMikgPT0gXCIxOFwiKSB7XG4gICAgICB2YXIgUyA9IHMobywgbFsyXSk7XG4gICAgICBmLnRoaXN1cGRhdGUgPSBXKFMpO1xuICAgIH1cbiAgICBmb3IgKHZhciBiID0gMzsgYiA8IGwubGVuZ3RoOyBiKyspIHtcbiAgICAgIGlmIChvLnN1YnN0cihsW2JdLCAyKSA9PSBcImEwXCIpIHtcbiAgICAgICAgdmFyIEQgPSB1KG8sIGxbYl0sIFswXSwgXCIxOFwiKTtcbiAgICAgICAgZi5uZXh0dXBkYXRlID0gVyhEKTtcbiAgICAgIH1cbiAgICAgIGlmIChvLnN1YnN0cihsW2JdLCAyKSA9PSBcImExXCIpIHtcbiAgICAgICAgdmFyIEEgPSBuZXcgTCgpLCBJID0gcChvLCAwLCBbYiwgMF0pO1xuICAgICAgICBmLmV4dCA9IEEuZ2V0RXh0UGFyYW1BcnJheShJKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGY7XG4gIH0sIHRoaXMuZ2V0Q2VydFN0YXR1cyA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbCA9IHt9O1xuICAgIGlmIChvID09IFwiODAwMFwiKVxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBcImdvb2RcIiB9O1xuICAgIGlmIChvID09IFwiODIwMFwiKVxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBcInVua25vd25cIiB9O1xuICAgIGlmIChvLnN1YnN0cigwLCAyKSA9PSBcImExXCIpIHtcbiAgICAgIGwuc3RhdHVzID0gXCJyZXZva2VkXCI7XG4gICAgICB2YXIgZiA9IHUobywgMCwgWzBdKSwgZCA9IFcoZik7XG4gICAgICBsLnRpbWUgPSBkO1xuICAgIH1cbiAgICByZXR1cm4gbDtcbiAgfTtcbn07XG52YXIgYTtcbih0eXBlb2YgYSA+IFwidVwiIHx8ICFhKSAmJiAoYSA9IHt9KTtcbih0eXBlb2YgYS5sYW5nID4gXCJ1XCIgfHwgIWEubGFuZykgJiYgKGEubGFuZyA9IHt9KTtcbmEubGFuZy5TdHJpbmcgPSBmdW5jdGlvbigpIHtcbn07XG5mdW5jdGlvbiBobihlKSB7XG4gIGZvciAodmFyIHQgPSBuZXcgQXJyYXkoKSwgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKVxuICAgIHRbcl0gPSBlLmNoYXJDb2RlQXQocik7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gb3QoZSkge1xuICBmb3IgKHZhciB0ID0gXCJcIiwgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKSB7XG4gICAgdmFyIGkgPSBlW3JdLnRvU3RyaW5nKDE2KTtcbiAgICBpLmxlbmd0aCA9PSAxICYmIChpID0gXCIwXCIgKyBpKSwgdCA9IHQgKyBpO1xuICB9XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gRWUoZSkge1xuICByZXR1cm4gb3QoaG4oZSkpO1xufVxuZnVuY3Rpb24gWGUoZSkge1xuICByZXR1cm4gZSA9IGUucmVwbGFjZSgvXFw9L2csIFwiXCIpLCBlID0gZS5yZXBsYWNlKC9cXCsvZywgXCItXCIpLCBlID0gZS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpLCBlO1xufVxuZnVuY3Rpb24gdXQoZSkge1xuICByZXR1cm4gZS5sZW5ndGggJSA0ID09IDIgPyBlID0gZSArIFwiPT1cIiA6IGUubGVuZ3RoICUgNCA9PSAzICYmIChlID0gZSArIFwiPVwiKSwgZSA9IGUucmVwbGFjZSgvLS9nLCBcIitcIiksIGUgPSBlLnJlcGxhY2UoL18vZywgXCIvXCIpLCBlO1xufVxuZnVuY3Rpb24gYWUoZSkge1xuICByZXR1cm4gZS5sZW5ndGggJSAyID09IDEgJiYgKGUgPSBcIjBcIiArIGUpLCBYZShfZShlKSk7XG59XG5mdW5jdGlvbiBZKGUpIHtcbiAgcmV0dXJuIGl0KHV0KGUpKTtcbn1cbnZhciBKZSwgd2U7XG50eXBlb2YgQnVmZmVyID09IFwiZnVuY3Rpb25cIiA/IChKZSA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIFhlKEJ1ZmZlci5mcm9tKGUsIFwidXRmOFwiKS50b1N0cmluZyhcImJhc2U2NFwiKSk7XG59LCB3ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKHV0KGUpLCBcImJhc2U2NFwiKS50b1N0cmluZyhcInV0ZjhcIik7XG59KSA6IChKZSA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGFlKEl0KEJ0KGUpKSk7XG59LCB3ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChDdChZKGUpKSk7XG59KTtcbmZ1bmN0aW9uIGh0KGUpIHtcbiAgcmV0dXJuIEl0KEJ0KGUpKS50b0xvd2VyQ2FzZSgpO1xufVxuZnVuY3Rpb24gVyhlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChDdChlKSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBmbihlKSB7XG4gIHJldHVybiBXKGNuKGUpKTtcbn1cbmZ1bmN0aW9uIGNuKGUpIHtcbiAgZm9yICh2YXIgdCA9IGUubWF0Y2goLy57MSwyfS9nKSwgciA9IFtdLCBpID0gMDsgaSA8IHQubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcyA9IHBhcnNlSW50KHRbaV0sIDE2KTtcbiAgICAxNjEgPD0gcyAmJiBzIDw9IDE5MSA/IChyLnB1c2goXCJjMlwiKSwgci5wdXNoKHRbaV0pKSA6IDE5MiA8PSBzICYmIHMgPD0gMjU1ID8gKHIucHVzaChcImMzXCIpLCByLnB1c2goKHMgLSA2NCkudG9TdHJpbmcoMTYpKSkgOiByLnB1c2godFtpXSk7XG4gIH1cbiAgcmV0dXJuIHIuam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIEFlKGUpIHtcbiAgZm9yICh2YXIgdCA9IFwiXCIsIHIgPSAwOyByIDwgZS5sZW5ndGggLSAxOyByICs9IDIpXG4gICAgdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGUuc3Vic3RyKHIsIDIpLCAxNikpO1xuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIFBlKGUpIHtcbiAgZm9yICh2YXIgdCA9IFwiXCIsIHIgPSAwOyByIDwgZS5sZW5ndGg7IHIrKylcbiAgICB0ICs9IChcIjBcIiArIGUuY2hhckNvZGVBdChyKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBsbihlKSB7XG4gIHJldHVybiBfZShlKTtcbn1cbmZ1bmN0aW9uIGRuKGUsIHQpIHtcbiAgcmV0dXJuIGUgPSBlLnJlcGxhY2UobmV3IFJlZ0V4cChcIigue1wiICsgdCArIFwifSlcIiwgXCJnXCIpLCBgJDFcXHJcbmApLCBlID0gZS5yZXBsYWNlKC9cXHMrJC8sIFwiXCIpLCBlO1xufVxuZnVuY3Rpb24gcG4oZSkge1xuICB2YXIgdCA9IGUucmVwbGFjZSgvW14wLTlBLVphLXpcXC8rPV0qL2csIFwiXCIpLCByID0gaXQodCk7XG4gIHJldHVybiByO1xufVxuZnVuY3Rpb24gZGUoZSwgdCkge1xuICByZXR1cm4gXCItLS0tLUJFR0lOIFwiICsgdCArIGAtLS0tLVxcclxuYCArIGRuKGxuKGUpLCA2NCkgKyBgXFxyXG4tLS0tLUVORCBgICsgdCArIGAtLS0tLVxcclxuYDtcbn1cbmZ1bmN0aW9uIGllKGUsIHQpIHtcbiAgaWYgKGUuaW5kZXhPZihcIi0tLS0tQkVHSU4gXCIpID09IC0xKVxuICAgIHRocm93IG5ldyBFcnJvcihcImNhbid0IGZpbmQgUEVNIGhlYWRlclwiKTtcbiAgcmV0dXJuIHQgIT09IHZvaWQgMCA/IChlID0gZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCJeW15dKi0tLS0tQkVHSU4gXCIgKyB0ICsgXCItLS0tLVwiKSwgXCJcIiksIGUgPSBlLnJlcGxhY2UobmV3IFJlZ0V4cChcIi0tLS0tRU5EIFwiICsgdCArIFwiLS0tLS1bXl0qJFwiKSwgXCJcIikpIDogKGUgPSBlLnJlcGxhY2UoL15bXl0qLS0tLS1CRUdJTiBbXi1dKy0tLS0tLywgXCJcIiksIGUgPSBlLnJlcGxhY2UoLy0tLS0tRU5EIFteLV0rLS0tLS1bXl0qJC8sIFwiXCIpKSwgcG4oZSk7XG59XG5mdW5jdGlvbiB2bihlKSB7XG4gIHZhciB0LCByLCBpLCBzLCBuLCBoLCB1LCBwLCBjLCB5O1xuICBpZiAoZSA9IHluKGUpLCB5ID0gZS5tYXRjaCgvXihcXGR7NH0pKFxcZFxcZCkoXFxkXFxkKShcXGRcXGQpKFxcZFxcZCkoXFxkXFxkKSh8XFwuXFxkKylaJC8pLCB5KVxuICAgIHJldHVybiB0ID0gcGFyc2VJbnQoeVsxXSksIHIgPSBwYXJzZUludCh5WzJdKSAtIDEsIGkgPSBwYXJzZUludCh5WzNdKSwgcyA9IHBhcnNlSW50KHlbNF0pLCBuID0gcGFyc2VJbnQoeVs1XSksIGggPSBwYXJzZUludCh5WzZdKSwgdSA9IDAsIHAgPSB5WzddLCBwICE9PSBcIlwiICYmIChjID0gKHAuc3Vic3RyKDEpICsgXCIwMFwiKS5zdWJzdHIoMCwgMyksIHUgPSBwYXJzZUludChjKSksIERhdGUuVVRDKHQsIHIsIGksIHMsIG4sIGgsIHUpO1xuICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCB6dWx1IGZvcm1hdDogXCIgKyBlKTtcbn1cbmZ1bmN0aW9uIGduKGUpIHtcbiAgcmV0dXJuIE1hdGgucm91bmQodm4oZSkgLyAxZTMpO1xufVxuZnVuY3Rpb24geW4oZSkge1xuICByZXR1cm4gZS5tYXRjaCgvXlswLTldezEyfVokLykgfHwgZS5tYXRjaCgvXlswLTldezEyfVsuXVswLTldKlokLykgPyBlLm1hdGNoKC9eWzAtNF0vKSA/IFwiMjBcIiArIGUgOiBcIjE5XCIgKyBlIDogZTtcbn1cbmZ1bmN0aW9uIEl0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvJS9nLCBcIlwiKTtcbn1cbmZ1bmN0aW9uIEN0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvKC4uKS9nLCBcIiUkMVwiKTtcbn1cbmZ1bmN0aW9uIHZ0KGUpIHtcbiAgdmFyIHQgPSBcIm1hbGZvcm1lZCBJUHY2IGFkZHJlc3NcIjtcbiAgaWYgKCFlLm1hdGNoKC9eWzAtOUEtRmEtZjpdKyQvKSlcbiAgICB0aHJvdyB0O1xuICBlID0gZS50b0xvd2VyQ2FzZSgpO1xuICB2YXIgciA9IGUuc3BsaXQoXCI6XCIpLmxlbmd0aCAtIDE7XG4gIGlmIChyIDwgMilcbiAgICB0aHJvdyB0O1xuICB2YXIgaSA9IFwiOlwiLnJlcGVhdCg3IC0gciArIDIpO1xuICBlID0gZS5yZXBsYWNlKFwiOjpcIiwgaSk7XG4gIHZhciBzID0gZS5zcGxpdChcIjpcIik7XG4gIGlmIChzLmxlbmd0aCAhPSA4KVxuICAgIHRocm93IHQ7XG4gIGZvciAodmFyIG4gPSAwOyBuIDwgODsgbisrKVxuICAgIHNbbl0gPSAoXCIwMDAwXCIgKyBzW25dKS5zbGljZSgtNCk7XG4gIHJldHVybiBzLmpvaW4oXCJcIik7XG59XG5mdW5jdGlvbiBndChlKSB7XG4gIGlmICghZS5tYXRjaCgvXlswLTlBLUZhLWZdezMyfSQvKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgSVB2NiBhZGRyZXNzOiBcIiArIGUpO1xuICBlID0gZS50b0xvd2VyQ2FzZSgpO1xuICB2YXIgdCA9IGUubWF0Y2goLy57MSw0fS9nKTtcbiAgdCA9IHQubWFwKGZ1bmN0aW9uKHMpIHtcbiAgICByZXR1cm4gcy5yZXBsYWNlKC9eMCsvLCBcIlwiKTtcbiAgfSksIHQgPSB0Lm1hcChmdW5jdGlvbihzKSB7XG4gICAgcmV0dXJuIHMgPT0gXCJcIiA/IFwiMFwiIDogcztcbiAgfSksIGUgPSBcIjpcIiArIHQuam9pbihcIjpcIikgKyBcIjpcIjtcbiAgdmFyIHIgPSBlLm1hdGNoKC86KDA6KXsyLH0vZyk7XG4gIGlmIChyID09IG51bGwpXG4gICAgcmV0dXJuIGUuc2xpY2UoMSwgLTEpO1xuICB2YXIgaSA9IHIuc29ydCgpLnNsaWNlKC0xKVswXTtcbiAgcmV0dXJuIGUgPSBlLnJlcGxhY2UoaS5zdWJzdHIoMCwgaS5sZW5ndGggLSAxKSwgXCI6XCIpLCBlLnN1YnN0cigwLCAyKSAhPSBcIjo6XCIgJiYgKGUgPSBlLnN1YnN0cigxKSksIGUuc3Vic3RyKC0yLCAyKSAhPSBcIjo6XCIgJiYgKGUgPSBlLnN1YnN0cigwLCBlLmxlbmd0aCAtIDEpKSwgZTtcbn1cbmZ1bmN0aW9uIHR0KGUpIHtcbiAgdmFyIHQgPSBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgaGV4IHZhbHVlXCIpO1xuICBpZiAoIWUubWF0Y2goL14oWzAtOUEtRmEtZl1bMC05QS1GYS1mXSl7MSx9JC8pKVxuICAgIHRocm93IHQ7XG4gIGlmIChlLmxlbmd0aCA9PSA4KSB7XG4gICAgdmFyIHI7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiByID0gcGFyc2VJbnQoZS5zdWJzdHIoMCwgMiksIDE2KSArIFwiLlwiICsgcGFyc2VJbnQoZS5zdWJzdHIoMiwgMiksIDE2KSArIFwiLlwiICsgcGFyc2VJbnQoZS5zdWJzdHIoNCwgMiksIDE2KSArIFwiLlwiICsgcGFyc2VJbnQoZS5zdWJzdHIoNiwgMiksIDE2KSwgcjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IHQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKGUubGVuZ3RoID09IDE2KVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdHQoZS5zdWJzdHIoMCwgOCkpICsgXCIvXCIgKyB5dChlLnN1YnN0cig4KSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyB0O1xuICAgIH1cbiAgZWxzZSB7XG4gICAgaWYgKGUubGVuZ3RoID09IDMyKVxuICAgICAgcmV0dXJuIGd0KGUpO1xuICAgIGlmIChlLmxlbmd0aCA9PSA2NCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGd0KGUuc3Vic3RyKDAsIDMyKSkgKyBcIi9cIiArIHl0KGUuc3Vic3RyKDMyKSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdGhyb3cgdDtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybiBlO1xuICB9XG59XG5mdW5jdGlvbiB5dChlKSB7XG4gIHZhciB0ID0gbmV3IEVycm9yKFwibWFsZm9ybWVkIG1hc2tcIiksIHI7XG4gIHRyeSB7XG4gICAgciA9IG5ldyBSKGUsIDE2KS50b1N0cmluZygyKTtcbiAgfSBjYXRjaCB7XG4gICAgdGhyb3cgdDtcbiAgfVxuICBpZiAoIXIubWF0Y2goL14xKjAqJC8pKVxuICAgIHRocm93IHQ7XG4gIHJldHVybiByLnJlcGxhY2UoLzArJC8sIFwiXCIpLmxlbmd0aDtcbn1cbmZ1bmN0aW9uIFJ0KGUpIHtcbiAgdmFyIHQgPSBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgSVAgYWRkcmVzc1wiKTtcbiAgaWYgKGUgPSBlLnRvTG93ZXJDYXNlKGUpLCAhZS5tYXRjaCgvXlswLTlhLWYuOi9dKyQvKSlcbiAgICB0aHJvdyB0O1xuICBpZiAoZS5tYXRjaCgvXlswLTkuXSskLykpIHtcbiAgICB2YXIgciA9IGUuc3BsaXQoXCIuXCIpO1xuICAgIGlmIChyLmxlbmd0aCAhPT0gNClcbiAgICAgIHRocm93IHQ7XG4gICAgdmFyIGkgPSBcIlwiO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBzID0gMDsgcyA8IDQ7IHMrKykge1xuICAgICAgICB2YXIgbiA9IHBhcnNlSW50KHJbc10pO1xuICAgICAgICBpICs9IChcIjBcIiArIG4udG9TdHJpbmcoMTYpKS5zbGljZSgtMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gaTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IHQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKGUubWF0Y2goL15bMC05Ll0rXFwvWzAtOV0rJC8pKSB7XG4gICAgdmFyIGggPSBlLnNwbGl0KFwiL1wiKTtcbiAgICByZXR1cm4gUnQoaFswXSkgKyBtdChwYXJzZUludChoWzFdKSwgMzIpO1xuICB9IGVsc2Uge1xuICAgIGlmIChlLm1hdGNoKC9eWzAtOWEtZjpdKyQvKSAmJiBlLmluZGV4T2YoXCI6XCIpICE9PSAtMSlcbiAgICAgIHJldHVybiB2dChlKTtcbiAgICBpZiAoZS5tYXRjaCgvXlswLTlhLWY6XStcXC9bMC05XSskLykgJiYgZS5pbmRleE9mKFwiOlwiKSAhPT0gLTEpIHtcbiAgICAgIHZhciBoID0gZS5zcGxpdChcIi9cIik7XG4gICAgICByZXR1cm4gdnQoaFswXSkgKyBtdChwYXJzZUludChoWzFdKSwgMTI4KTtcbiAgICB9IGVsc2VcbiAgICAgIHRocm93IHQ7XG4gIH1cbn1cbmZ1bmN0aW9uIG10KGUsIHQpIHtcbiAgaWYgKHQgPT0gMzIgJiYgZSA9PSAwKVxuICAgIHJldHVybiBcIjAwMDAwMDAwXCI7XG4gIGlmICh0ID09IDEyOCAmJiBlID09IDApXG4gICAgcmV0dXJuIFwiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcIjtcbiAgdmFyIHIgPSBBcnJheShlICsgMSkuam9pbihcIjFcIikgKyBBcnJheSh0IC0gZSArIDEpLmpvaW4oXCIwXCIpO1xuICByZXR1cm4gbmV3IFIociwgMikudG9TdHJpbmcoMTYpO1xufVxuZnVuY3Rpb24gVHQoZSkge1xuICBmdW5jdGlvbiB0KHMpIHtcbiAgICB2YXIgbiA9IHBhcnNlSW50KHMuc3Vic3RyKDAsIDIpLCAxNiksIGggPSBwYXJzZUludChzLnN1YnN0cigyKSwgMTYpO1xuICAgIGlmIChuID09IDAgJiBoIDwgMTI4KVxuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoaCk7XG4gICAgaWYgKG4gPCA4KSB7XG4gICAgICB2YXIgdSA9IDE5MiB8IChuICYgNykgPDwgMyB8IChoICYgMTkyKSA+PiA2LCBwID0gMTI4IHwgaCAmIDYzO1xuICAgICAgcmV0dXJuIFcodS50b1N0cmluZygxNikgKyBwLnRvU3RyaW5nKDE2KSk7XG4gICAgfVxuICAgIHZhciB1ID0gMjI0IHwgKG4gJiAyNDApID4+IDQsIHAgPSAxMjggfCAobiAmIDE1KSA8PCAyIHwgKGggJiAxOTIpID4+IDYsIGMgPSAxMjggfCBoICYgNjM7XG4gICAgcmV0dXJuIFcodS50b1N0cmluZygxNikgKyBwLnRvU3RyaW5nKDE2KSArIGMudG9TdHJpbmcoMTYpKTtcbiAgfVxuICB2YXIgciA9IGUubWF0Y2goLy57NH0vZyksIGkgPSByLm1hcCh0KTtcbiAgcmV0dXJuIGkuam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIEJ0KGUpIHtcbiAgZm9yICh2YXIgdCA9IGVuY29kZVVSSUNvbXBvbmVudChlKSwgciA9IFwiXCIsIGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKylcbiAgICB0W2ldID09IFwiJVwiID8gKHIgPSByICsgdC5zdWJzdHIoaSwgMyksIGkgPSBpICsgMikgOiByID0gciArIFwiJVwiICsgRWUodFtpXSk7XG4gIHJldHVybiByO1xufVxuYS5sYW5nLlN0cmluZy5pc0ludGVnZXIgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlLm1hdGNoKC9eWzAtOV0rJC8pID8gITAgOiAhIWUubWF0Y2goL14tWzAtOV0rJC8pO1xufTtcbmEubGFuZy5TdHJpbmcuaXNIZXggPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBOdChlKTtcbn07XG5mdW5jdGlvbiBOdChlKSB7XG4gIHJldHVybiAhIShlLmxlbmd0aCAlIDIgPT0gMCAmJiAoZS5tYXRjaCgvXlswLTlhLWZdKyQvKSB8fCBlLm1hdGNoKC9eWzAtOUEtRl0rJC8pKSk7XG59XG5hLmxhbmcuU3RyaW5nLmlzQmFzZTY0ID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZSA9IGUucmVwbGFjZSgvXFxzKy9nLCBcIlwiKSwgISEoZS5tYXRjaCgvXlswLTlBLVphLXorXFwvXSs9ezAsM30kLykgJiYgZS5sZW5ndGggJSA0ID09IDApO1xufTtcbmEubGFuZy5TdHJpbmcuaXNCYXNlNjRVUkwgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlLm1hdGNoKC9bKy89XS8pID8gITEgOiAoZSA9IHV0KGUpLCBhLmxhbmcuU3RyaW5nLmlzQmFzZTY0KGUpKTtcbn07XG5mdW5jdGlvbiBIdChlKSB7XG4gIHJldHVybiAhIWUubWF0Y2goL15bMC05QS1aYS16LV8uXSskLyk7XG59XG5hLmxhbmcuU3RyaW5nLmlzSW50ZWdlckFycmF5ID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZSA9IGUucmVwbGFjZSgvXFxzKy9nLCBcIlwiKSwgISFlLm1hdGNoKC9eXFxbWzAtOSxdK1xcXSQvKTtcbn07XG5hLmxhbmcuU3RyaW5nLmlzUHJpbnRhYmxlID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZS5tYXRjaCgvXlswLTlBLVphLXogJygpKywtLi86PT9dKiQvKSAhPT0gbnVsbDtcbn07XG5hLmxhbmcuU3RyaW5nLmlzSUE1ID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZS5tYXRjaCgvXltcXHgyMC1cXHgyMVxceDIzLVxceDdmXSokLykgIT09IG51bGw7XG59O1xuYS5sYW5nLlN0cmluZy5pc01haWwgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlLm1hdGNoKC9eW0EtWmEtejAtOV17MX1bQS1aYS16MC05Xy4tXSpAezF9W0EtWmEtejAtOV8uLV17MSx9XFwuW0EtWmEtejAtOV17MSx9JC8pICE9PSBudWxsO1xufTtcbmZ1bmN0aW9uIHh0KGUpIHtcbiAgcmV0dXJuIGUubGVuZ3RoICUgMiA9PSAxID8gXCIwXCIgKyBlIDogZS5zdWJzdHIoMCwgMSkgPiBcIjdcIiA/IFwiMDBcIiArIGUgOiBlO1xufVxuZnVuY3Rpb24gbW4oZSkge1xuICB2YXIgdCA9IGZ1bmN0aW9uKHUpIHtcbiAgICB2YXIgcCA9IHUudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiBwLmxlbmd0aCA9PSAxICYmIChwID0gXCIwXCIgKyBwKSwgcDtcbiAgfSwgciA9IGZ1bmN0aW9uKHUpIHtcbiAgICB2YXIgcCA9IFwiXCIsIGMgPSBwYXJzZUludCh1LCAxMCksIHkgPSBjLnRvU3RyaW5nKDIpLCB2ID0gNyAtIHkubGVuZ3RoICUgNztcbiAgICB2ID09IDcgJiYgKHYgPSAwKTtcbiAgICBmb3IgKHZhciBvID0gXCJcIiwgbCA9IDA7IGwgPCB2OyBsKyspXG4gICAgICBvICs9IFwiMFwiO1xuICAgIHkgPSBvICsgeTtcbiAgICBmb3IgKHZhciBsID0gMDsgbCA8IHkubGVuZ3RoIC0gMTsgbCArPSA3KSB7XG4gICAgICB2YXIgZiA9IHkuc3Vic3RyKGwsIDcpO1xuICAgICAgbCAhPSB5Lmxlbmd0aCAtIDcgJiYgKGYgPSBcIjFcIiArIGYpLCBwICs9IHQocGFyc2VJbnQoZiwgMikpO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfTtcbiAgdHJ5IHtcbiAgICBpZiAoIWUubWF0Y2goL15bMC05Ll0rJC8pKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgdmFyIGkgPSBcIlwiLCBzID0gZS5zcGxpdChcIi5cIiksIG4gPSBwYXJzZUludChzWzBdLCAxMCkgKiA0MCArIHBhcnNlSW50KHNbMV0sIDEwKTtcbiAgICBpICs9IHQobiksIHMuc3BsaWNlKDAsIDIpO1xuICAgIGZvciAodmFyIGggPSAwOyBoIDwgcy5sZW5ndGg7IGgrKylcbiAgICAgIGkgKz0gcihzW2hdKTtcbiAgICByZXR1cm4gaTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIGZ0KGUpIHtcbiAgaWYgKCFOdChlKSlcbiAgICByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICB2YXIgdCA9IFtdLCByID0gZS5zdWJzdHIoMCwgMiksIGkgPSBwYXJzZUludChyLCAxNik7XG4gICAgdFswXSA9IG5ldyBTdHJpbmcoTWF0aC5mbG9vcihpIC8gNDApKSwgdFsxXSA9IG5ldyBTdHJpbmcoaSAlIDQwKTtcbiAgICBmb3IgKHZhciBzID0gZS5zdWJzdHIoMiksIG4gPSBbXSwgaCA9IDA7IGggPCBzLmxlbmd0aCAvIDI7IGgrKylcbiAgICAgIG4ucHVzaChwYXJzZUludChzLnN1YnN0cihoICogMiwgMiksIDE2KSk7XG4gICAgZm9yICh2YXIgdSA9IFtdLCBwID0gXCJcIiwgaCA9IDA7IGggPCBuLmxlbmd0aDsgaCsrKVxuICAgICAgbltoXSAmIDEyOCA/IHAgPSBwICsgU3QoKG5baF0gJiAxMjcpLnRvU3RyaW5nKDIpLCA3KSA6IChwID0gcCArIFN0KChuW2hdICYgMTI3KS50b1N0cmluZygyKSwgNyksIHUucHVzaChuZXcgU3RyaW5nKHBhcnNlSW50KHAsIDIpKSksIHAgPSBcIlwiKTtcbiAgICB2YXIgYyA9IHQuam9pbihcIi5cIik7XG4gICAgcmV0dXJuIHUubGVuZ3RoID4gMCAmJiAoYyA9IGMgKyBcIi5cIiArIHUuam9pbihcIi5cIikpLCBjO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24geG4oZSkge1xuICB2YXIgdCA9IG5ldyBSKFN0cmluZyhlKSwgMTApO1xuICByZXR1cm4gWmUodCk7XG59XG5mdW5jdGlvbiBaZShlKSB7XG4gIHZhciB0ID0gZS50b1N0cmluZygxNik7XG4gIGlmICh0LnN1YnN0cigwLCAxKSAhPSBcIi1cIilcbiAgICByZXR1cm4gdC5sZW5ndGggJSAyID09IDEgPyB0ID0gXCIwXCIgKyB0IDogdC5tYXRjaCgvXlswLTddLykgfHwgKHQgPSBcIjAwXCIgKyB0KSwgdDtcbiAgdmFyIHIgPSB0LnN1YnN0cigxKSwgaSA9IHIubGVuZ3RoO1xuICBpICUgMiA9PSAxID8gaSArPSAxIDogdC5tYXRjaCgvXlswLTddLykgfHwgKGkgKz0gMik7XG4gIGZvciAodmFyIHMgPSBcIlwiLCBuID0gMDsgbiA8IGk7IG4rKylcbiAgICBzICs9IFwiZlwiO1xuICB2YXIgaCA9IG5ldyBSKHMsIDE2KSwgdSA9IGgueG9yKGUpLmFkZChSLk9ORSk7XG4gIHJldHVybiB0ID0gdS50b1N0cmluZygxNikucmVwbGFjZSgvXi0vLCBcIlwiKSwgdDtcbn1cbnZhciBTdCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgcmV0dXJuIHIgPT0gbnVsbCAmJiAociA9IFwiMFwiKSwgZS5sZW5ndGggPj0gdCA/IGUgOiBuZXcgQXJyYXkodCAtIGUubGVuZ3RoICsgMSkuam9pbihyKSArIGU7XG59O1xuZnVuY3Rpb24gU24oZSkge1xuICBpZiAoZS5sZW5ndGggJSAyICE9IDAgfHwgKGUgPSBlLnRvTG93ZXJDYXNlKCksIGUubWF0Y2goL15bMC05YS1mXSskLykgPT0gbnVsbCkpXG4gICAgcmV0dXJuIC0xO1xuICB0cnkge1xuICAgIHZhciB0ID0gZS5zdWJzdHIoMCwgMik7XG4gICAgaWYgKHQgPT0gXCIwMFwiKVxuICAgICAgcmV0dXJuIHBhcnNlSW50KGUuc3Vic3RyKDIpLCAxNik7XG4gICAgdmFyIHIgPSBwYXJzZUludCh0LCAxNik7XG4gICAgaWYgKHIgPiA3KVxuICAgICAgcmV0dXJuIC0xO1xuICAgIHZhciBpID0gZS5zdWJzdHIoMiksIHMgPSBwYXJzZUludChpLCAxNikudG9TdHJpbmcoMik7XG4gICAgcyA9PSBcIjBcIiAmJiAocyA9IFwiMDAwMDAwMDBcIiksIHMgPSBzLnNsaWNlKDAsIDAgLSByKTtcbiAgICB2YXIgbiA9IHBhcnNlSW50KHMsIDIpO1xuICAgIHJldHVybiBuID09IE5hTiA/IC0xIDogbjtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG59XG5mdW5jdGlvbiBFbihlKSB7XG4gIGlmICh0eXBlb2YgZSAhPSBcInN0cmluZ1wiIHx8IGUubGVuZ3RoICUgMiAhPSAwIHx8ICFlLm1hdGNoKC9eWzAtOWEtZl0rJC8pKVxuICAgIHJldHVybiBudWxsO1xuICB0cnkge1xuICAgIHZhciB0ID0gcGFyc2VJbnQoZS5zdWJzdHIoMCwgMiksIDE2KTtcbiAgICBpZiAodCA8IDAgfHwgNyA8IHQpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBmb3IgKHZhciByID0gZS5zdWJzdHIoMiksIGkgPSBcIlwiLCBzID0gMDsgcyA8IHIubGVuZ3RoOyBzICs9IDIpIHtcbiAgICAgIHZhciBuID0gci5zdWJzdHIocywgMiksIGggPSBwYXJzZUludChuLCAxNikudG9TdHJpbmcoMik7XG4gICAgICBoID0gKFwiMDAwMDAwMFwiICsgaCkuc2xpY2UoLTgpLCBpICs9IGg7XG4gICAgfVxuICAgIHJldHVybiBpLnN1YnN0cigwLCBpLmxlbmd0aCAtIHQpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuZnVuY3Rpb24gcnQoZSwgdCkge1xuICBmb3IgKHZhciByID0gMCwgaSA9IDA7IGkgPCBlLmxlbmd0aDsgaSsrKVxuICAgIHIgfD0gMSA8PCB0W2VbaV1dO1xuICBmb3IgKHZhciBzID0gci50b1N0cmluZygyKSwgbiA9IFwiXCIsIGkgPSBzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgIG4gKz0gc1tpXTtcbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBKKGUsIGksIHIpIHtcbiAgaWYgKHR5cGVvZiBlID09IFwib2JqZWN0XCIpIHtcbiAgICBmb3IgKHZhciBpID0gU3RyaW5nKGkpLnNwbGl0KFwiLlwiKSwgcyA9IDA7IHMgPCBpLmxlbmd0aCAmJiBlOyBzKyspIHtcbiAgICAgIHZhciBuID0gaVtzXTtcbiAgICAgIG4ubWF0Y2goL15bMC05XSskLykgJiYgKG4gPSBwYXJzZUludChuKSksIGUgPSBlW25dO1xuICAgIH1cbiAgICByZXR1cm4gZSB8fCBlID09PSAhMSA/IGUgOiByO1xuICB9XG59XG5mdW5jdGlvbiBOKGUsIHQpIHtcbiAgdmFyIHIgPSBmdW5jdGlvbigpIHtcbiAgfTtcbiAgci5wcm90b3R5cGUgPSB0LnByb3RvdHlwZSwgZS5wcm90b3R5cGUgPSBuZXcgcigpLCBlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGUsIGUuc3VwZXJjbGFzcyA9IHQucHJvdG90eXBlLCB0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9PSBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yICYmICh0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHQpO1xufVxuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmNyeXB0byA+IFwidVwiIHx8ICFhLmNyeXB0bykgJiYgKGEuY3J5cHRvID0ge30pO1xuYS5jcnlwdG8uVXRpbCA9IG5ldyBmdW5jdGlvbigpIHtcbiAgdGhpcy5ESUdFU1RJTkZPSEVBRCA9IHsgc2hhMTogXCIzMDIxMzAwOTA2MDUyYjBlMDMwMjFhMDUwMDA0MTRcIiwgc2hhMjI0OiBcIjMwMmQzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwNDA1MDAwNDFjXCIsIHNoYTI1NjogXCIzMDMxMzAwZDA2MDk2MDg2NDgwMTY1MDMwNDAyMDEwNTAwMDQyMFwiLCBzaGEzODQ6IFwiMzA0MTMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAyMDUwMDA0MzBcIiwgc2hhNTEyOiBcIjMwNTEzMDBkMDYwOTYwODY0ODAxNjUwMzA0MDIwMzA1MDAwNDQwXCIsIG1kMjogXCIzMDIwMzAwYzA2MDgyYTg2NDg4NmY3MGQwMjAyMDUwMDA0MTBcIiwgbWQ1OiBcIjMwMjAzMDBjMDYwODJhODY0ODg2ZjcwZDAyMDUwNTAwMDQxMFwiLCByaXBlbWQxNjA6IFwiMzAyMTMwMDkwNjA1MmIyNDAzMDIwMTA1MDAwNDE0XCIgfSwgdGhpcy5ERUZBVUxUUFJPVklERVIgPSB7IG1kNTogXCJjcnlwdG9qc1wiLCBzaGExOiBcImNyeXB0b2pzXCIsIHNoYTIyNDogXCJjcnlwdG9qc1wiLCBzaGEyNTY6IFwiY3J5cHRvanNcIiwgc2hhMzg0OiBcImNyeXB0b2pzXCIsIHNoYTUxMjogXCJjcnlwdG9qc1wiLCByaXBlbWQxNjA6IFwiY3J5cHRvanNcIiwgaG1hY21kNTogXCJjcnlwdG9qc1wiLCBobWFjc2hhMTogXCJjcnlwdG9qc1wiLCBobWFjc2hhMjI0OiBcImNyeXB0b2pzXCIsIGhtYWNzaGEyNTY6IFwiY3J5cHRvanNcIiwgaG1hY3NoYTM4NDogXCJjcnlwdG9qc1wiLCBobWFjc2hhNTEyOiBcImNyeXB0b2pzXCIsIGhtYWNyaXBlbWQxNjA6IFwiY3J5cHRvanNcIiwgTUQ1d2l0aFJTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEExd2l0aFJTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEEyMjR3aXRoUlNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTI1NndpdGhSU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMzg0d2l0aFJTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEE1MTJ3aXRoUlNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFJJUEVNRDE2MHdpdGhSU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgTUQ1d2l0aEVDRFNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTF3aXRoRUNEU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMjI0d2l0aEVDRFNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTI1NndpdGhFQ0RTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEEzODR3aXRoRUNEU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBNTEyd2l0aEVDRFNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFJJUEVNRDE2MHdpdGhFQ0RTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEExd2l0aERTQTogXCJjcnlwdG9qcy9qc3JzYVwiLCBTSEEyMjR3aXRoRFNBOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTI1NndpdGhEU0E6IFwiY3J5cHRvanMvanNyc2FcIiwgTUQ1d2l0aFJTQWFuZE1HRjE6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBd2l0aFJTQWFuZE1HRjE6IFwiY3J5cHRvanMvanNyc2FcIiwgU0hBMXdpdGhSU0FhbmRNR0YxOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTIyNHdpdGhSU0FhbmRNR0YxOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTI1NndpdGhSU0FhbmRNR0YxOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTM4NHdpdGhSU0FhbmRNR0YxOiBcImNyeXB0b2pzL2pzcnNhXCIsIFNIQTUxMndpdGhSU0FhbmRNR0YxOiBcImNyeXB0b2pzL2pzcnNhXCIsIFJJUEVNRDE2MHdpdGhSU0FhbmRNR0YxOiBcImNyeXB0b2pzL2pzcnNhXCIgfSwgdGhpcy5DUllQVE9KU01FU1NBR0VESUdFU1ROQU1FID0geyBtZDU6IEsuYWxnby5NRDUsIHNoYTE6IEsuYWxnby5TSEExLCBzaGEyMjQ6IEsuYWxnby5TSEEyMjQsIHNoYTI1NjogSy5hbGdvLlNIQTI1Niwgc2hhMzg0OiBLLmFsZ28uU0hBMzg0LCBzaGE1MTI6IEsuYWxnby5TSEE1MTIsIHJpcGVtZDE2MDogSy5hbGdvLlJJUEVNRDE2MCB9LCB0aGlzLmdldERpZ2VzdEluZm9IZXggPSBmdW5jdGlvbihlLCB0KSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLkRJR0VTVElORk9IRUFEW3RdID4gXCJ1XCIpXG4gICAgICB0aHJvdyBcImFsZyBub3Qgc3VwcG9ydGVkIGluIFV0aWwuRElHRVNUSU5GT0hFQUQ6IFwiICsgdDtcbiAgICByZXR1cm4gdGhpcy5ESUdFU1RJTkZPSEVBRFt0XSArIGU7XG4gIH0sIHRoaXMuZ2V0UGFkZGVkRGlnZXN0SW5mb0hleCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgICB2YXIgaSA9IHRoaXMuZ2V0RGlnZXN0SW5mb0hleChlLCB0KSwgcyA9IHIgLyA0O1xuICAgIGlmIChpLmxlbmd0aCArIDIyID4gcylcbiAgICAgIHRocm93IFwia2V5IGlzIHRvbyBzaG9ydCBmb3IgU2lnQWxnOiBrZXlsZW49XCIgKyByICsgXCIsXCIgKyB0O1xuICAgIGZvciAodmFyIG4gPSBcIjAwMDFcIiwgaCA9IFwiMDBcIiArIGksIHUgPSBcIlwiLCBwID0gcyAtIG4ubGVuZ3RoIC0gaC5sZW5ndGgsIGMgPSAwOyBjIDwgcDsgYyArPSAyKVxuICAgICAgdSArPSBcImZmXCI7XG4gICAgdmFyIHkgPSBuICsgdSArIGg7XG4gICAgcmV0dXJuIHk7XG4gIH0sIHRoaXMuaGFzaFN0cmluZyA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgICB2YXIgciA9IG5ldyBhLmNyeXB0by5NZXNzYWdlRGlnZXN0KHsgYWxnOiB0IH0pO1xuICAgIHJldHVybiByLmRpZ2VzdFN0cmluZyhlKTtcbiAgfSwgdGhpcy5oYXNoSGV4ID0gZnVuY3Rpb24oZSwgdCkge1xuICAgIHZhciByID0gbmV3IGEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QoeyBhbGc6IHQgfSk7XG4gICAgcmV0dXJuIHIuZGlnZXN0SGV4KGUpO1xuICB9LCB0aGlzLnNoYTEgPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaFN0cmluZyhlLCBcInNoYTFcIik7XG4gIH0sIHRoaXMuc2hhMjU2ID0gZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiB0aGlzLmhhc2hTdHJpbmcoZSwgXCJzaGEyNTZcIik7XG4gIH0sIHRoaXMuc2hhMjU2SGV4ID0gZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiB0aGlzLmhhc2hIZXgoZSwgXCJzaGEyNTZcIik7XG4gIH0sIHRoaXMuc2hhNTEyID0gZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiB0aGlzLmhhc2hTdHJpbmcoZSwgXCJzaGE1MTJcIik7XG4gIH0sIHRoaXMuc2hhNTEySGV4ID0gZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiB0aGlzLmhhc2hIZXgoZSwgXCJzaGE1MTJcIik7XG4gIH0sIHRoaXMuaXNLZXkgPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBxIHx8IGUgaW5zdGFuY2VvZiBhLmNyeXB0by5EU0EgfHwgZSBpbnN0YW5jZW9mIGEuY3J5cHRvLkVDRFNBO1xuICB9O1xufSgpO1xuYS5jcnlwdG8uVXRpbC5tZDUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gbmV3IGEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QoeyBhbGc6IFwibWQ1XCIsIHByb3Y6IFwiY3J5cHRvanNcIiB9KTtcbiAgcmV0dXJuIHQuZGlnZXN0U3RyaW5nKGUpO1xufTtcbmEuY3J5cHRvLlV0aWwucmlwZW1kMTYwID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IG5ldyBhLmNyeXB0by5NZXNzYWdlRGlnZXN0KHsgYWxnOiBcInJpcGVtZDE2MFwiLCBwcm92OiBcImNyeXB0b2pzXCIgfSk7XG4gIHJldHVybiB0LmRpZ2VzdFN0cmluZyhlKTtcbn07XG5hLmNyeXB0by5VdGlsLlNFQ1VSRVJBTkRPTUdFTiA9IG5ldyBHZSgpO1xuYS5jcnlwdG8uVXRpbC5nZXRSYW5kb21IZXhPZk5ieXRlcyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBuZXcgQXJyYXkoZSk7XG4gIHJldHVybiBhLmNyeXB0by5VdGlsLlNFQ1VSRVJBTkRPTUdFTi5uZXh0Qnl0ZXModCksIG90KHQpO1xufTtcbmEuY3J5cHRvLlV0aWwuZ2V0UmFuZG9tQmlnSW50ZWdlck9mTmJ5dGVzID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gbmV3IFIoYS5jcnlwdG8uVXRpbC5nZXRSYW5kb21IZXhPZk5ieXRlcyhlKSwgMTYpO1xufTtcbmEuY3J5cHRvLlV0aWwuZ2V0UmFuZG9tSGV4T2ZOYml0cyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBlICUgOCwgciA9IChlIC0gdCkgLyA4LCBpID0gbmV3IEFycmF5KHIgKyAxKTtcbiAgcmV0dXJuIGEuY3J5cHRvLlV0aWwuU0VDVVJFUkFORE9NR0VOLm5leHRCeXRlcyhpKSwgaVswXSA9ICgyNTUgPDwgdCAmIDI1NSBeIDI1NSkgJiBpWzBdLCBvdChpKTtcbn07XG5hLmNyeXB0by5VdGlsLmdldFJhbmRvbUJpZ0ludGVnZXJPZk5iaXRzID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gbmV3IFIoYS5jcnlwdG8uVXRpbC5nZXRSYW5kb21IZXhPZk5iaXRzKGUpLCAxNik7XG59O1xuYS5jcnlwdG8uVXRpbC5nZXRSYW5kb21CaWdJbnRlZ2VyWmVyb1RvTWF4ID0gZnVuY3Rpb24oZSkge1xuICBmb3IgKHZhciB0ID0gZS5iaXRMZW5ndGgoKTsgOyApIHtcbiAgICB2YXIgciA9IGEuY3J5cHRvLlV0aWwuZ2V0UmFuZG9tQmlnSW50ZWdlck9mTmJpdHModCk7XG4gICAgaWYgKGUuY29tcGFyZVRvKHIpICE9IC0xKVxuICAgICAgcmV0dXJuIHI7XG4gIH1cbn07XG5hLmNyeXB0by5VdGlsLmdldFJhbmRvbUJpZ0ludGVnZXJNaW5Ub01heCA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBlLmNvbXBhcmVUbyh0KTtcbiAgaWYgKHIgPT0gMSlcbiAgICB0aHJvdyBcImJpTWluIGlzIGdyZWF0ZXIgdGhhbiBiaU1heFwiO1xuICBpZiAociA9PSAwKVxuICAgIHJldHVybiBlO1xuICB2YXIgaSA9IHQuc3VidHJhY3QoZSksIHMgPSBhLmNyeXB0by5VdGlsLmdldFJhbmRvbUJpZ0ludGVnZXJaZXJvVG9NYXgoaSk7XG4gIHJldHVybiBzLmFkZChlKTtcbn07XG5hLmNyeXB0by5NZXNzYWdlRGlnZXN0ID0gZnVuY3Rpb24oZSkge1xuICB0aGlzLnNldEFsZ0FuZFByb3ZpZGVyID0gZnVuY3Rpb24odCwgcikge1xuICAgIGlmICh0ID0gYS5jcnlwdG8uTWVzc2FnZURpZ2VzdC5nZXRDYW5vbmljYWxBbGdOYW1lKHQpLCB0ICE9PSBudWxsICYmIHIgPT09IHZvaWQgMCAmJiAociA9IGEuY3J5cHRvLlV0aWwuREVGQVVMVFBST1ZJREVSW3RdKSwgXCI6bWQ1OnNoYTE6c2hhMjI0OnNoYTI1NjpzaGEzODQ6c2hhNTEyOnJpcGVtZDE2MDpcIi5pbmRleE9mKHQpICE9IC0xICYmIHIgPT0gXCJjcnlwdG9qc1wiKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLm1kID0gYS5jcnlwdG8uVXRpbC5DUllQVE9KU01FU1NBR0VESUdFU1ROQU1FW3RdLmNyZWF0ZSgpO1xuICAgICAgfSBjYXRjaCAoaSkge1xuICAgICAgICB0aHJvdyBcInNldEFsZ0FuZFByb3ZpZGVyIGhhc2ggYWxnIHNldCBmYWlsIGFsZz1cIiArIHQgKyBcIi9cIiArIGk7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVN0cmluZyA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdGhpcy5tZC51cGRhdGUoaSk7XG4gICAgICB9LCB0aGlzLnVwZGF0ZUhleCA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgdmFyIHMgPSBLLmVuYy5IZXgucGFyc2UoaSk7XG4gICAgICAgIHRoaXMubWQudXBkYXRlKHMpO1xuICAgICAgfSwgdGhpcy5kaWdlc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLm1kLmZpbmFsaXplKCk7XG4gICAgICAgIHJldHVybiBpLnRvU3RyaW5nKEsuZW5jLkhleCk7XG4gICAgICB9LCB0aGlzLmRpZ2VzdFN0cmluZyA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlU3RyaW5nKGkpLCB0aGlzLmRpZ2VzdCgpO1xuICAgICAgfSwgdGhpcy5kaWdlc3RIZXggPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUhleChpKSwgdGhpcy5kaWdlc3QoKTtcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChcIjpzaGEyNTY6XCIuaW5kZXhPZih0KSAhPSAtMSAmJiByID09IFwic2pjbFwiKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLm1kID0gbmV3IHNqY2wuaGFzaC5zaGEyNTYoKTtcbiAgICAgIH0gY2F0Y2ggKGkpIHtcbiAgICAgICAgdGhyb3cgXCJzZXRBbGdBbmRQcm92aWRlciBoYXNoIGFsZyBzZXQgZmFpbCBhbGc9XCIgKyB0ICsgXCIvXCIgKyBpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVTdHJpbmcgPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHRoaXMubWQudXBkYXRlKGkpO1xuICAgICAgfSwgdGhpcy51cGRhdGVIZXggPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciBzID0gc2pjbC5jb2RlYy5oZXgudG9CaXRzKGkpO1xuICAgICAgICB0aGlzLm1kLnVwZGF0ZShzKTtcbiAgICAgIH0sIHRoaXMuZGlnZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpID0gdGhpcy5tZC5maW5hbGl6ZSgpO1xuICAgICAgICByZXR1cm4gc2pjbC5jb2RlYy5oZXguZnJvbUJpdHMoaSk7XG4gICAgICB9LCB0aGlzLmRpZ2VzdFN0cmluZyA9IGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlU3RyaW5nKGkpLCB0aGlzLmRpZ2VzdCgpO1xuICAgICAgfSwgdGhpcy5kaWdlc3RIZXggPSBmdW5jdGlvbihpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUhleChpKSwgdGhpcy5kaWdlc3QoKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCB0aGlzLnVwZGF0ZVN0cmluZyA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aHJvdyBcInVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiICsgdGhpcy5hbGdOYW1lICsgXCIvXCIgKyB0aGlzLnByb3ZOYW1lO1xuICB9LCB0aGlzLnVwZGF0ZUhleCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aHJvdyBcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiICsgdGhpcy5hbGdOYW1lICsgXCIvXCIgKyB0aGlzLnByb3ZOYW1lO1xuICB9LCB0aGlzLmRpZ2VzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IFwiZGlnZXN0KCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ05hbWUgKyBcIi9cIiArIHRoaXMucHJvdk5hbWU7XG4gIH0sIHRoaXMuZGlnZXN0U3RyaW5nID0gZnVuY3Rpb24odCkge1xuICAgIHRocm93IFwiZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ05hbWUgKyBcIi9cIiArIHRoaXMucHJvdk5hbWU7XG4gIH0sIHRoaXMuZGlnZXN0SGV4ID0gZnVuY3Rpb24odCkge1xuICAgIHRocm93IFwiZGlnZXN0SGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ05hbWUgKyBcIi9cIiArIHRoaXMucHJvdk5hbWU7XG4gIH0sIGUgIT09IHZvaWQgMCAmJiBlLmFsZyAhPT0gdm9pZCAwICYmICh0aGlzLmFsZ05hbWUgPSBlLmFsZywgZS5wcm92ID09PSB2b2lkIDAgJiYgKHRoaXMucHJvdk5hbWUgPSBhLmNyeXB0by5VdGlsLkRFRkFVTFRQUk9WSURFUlt0aGlzLmFsZ05hbWVdKSwgdGhpcy5zZXRBbGdBbmRQcm92aWRlcih0aGlzLmFsZ05hbWUsIHRoaXMucHJvdk5hbWUpKTtcbn07XG5hLmNyeXB0by5NZXNzYWdlRGlnZXN0LmdldENhbm9uaWNhbEFsZ05hbWUgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiB0eXBlb2YgZSA9PSBcInN0cmluZ1wiICYmIChlID0gZS50b0xvd2VyQ2FzZSgpLCBlID0gZS5yZXBsYWNlKC8tLywgXCJcIikpLCBlO1xufTtcbmEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QuZ2V0SGFzaExlbmd0aCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLmNyeXB0by5NZXNzYWdlRGlnZXN0LCByID0gdC5nZXRDYW5vbmljYWxBbGdOYW1lKGUpO1xuICBpZiAodC5IQVNITEVOR1RIW3JdID09PSB2b2lkIDApXG4gICAgdGhyb3cgXCJub3Qgc3VwcG9ydGVkIGFsZ29yaXRobTogXCIgKyBlO1xuICByZXR1cm4gdC5IQVNITEVOR1RIW3JdO1xufTtcbmEuY3J5cHRvLk1lc3NhZ2VEaWdlc3QuSEFTSExFTkdUSCA9IHsgbWQ1OiAxNiwgc2hhMTogMjAsIHNoYTIyNDogMjgsIHNoYTI1NjogMzIsIHNoYTM4NDogNDgsIHNoYTUxMjogNjQsIHJpcGVtZDE2MDogMjAgfTtcbmEuY3J5cHRvLk1hYyA9IGZ1bmN0aW9uKGUpIHtcbiAgdGhpcy5zZXRBbGdBbmRQcm92aWRlciA9IGZ1bmN0aW9uKHQsIHIpIHtcbiAgICBpZiAodCA9IHQudG9Mb3dlckNhc2UoKSwgdCA9PSBudWxsICYmICh0ID0gXCJobWFjc2hhMVwiKSwgdCA9IHQudG9Mb3dlckNhc2UoKSwgdC5zdWJzdHIoMCwgNCkgIT0gXCJobWFjXCIpXG4gICAgICB0aHJvdyBcInNldEFsZ0FuZFByb3ZpZGVyIHVuc3VwcG9ydGVkIEhNQUMgYWxnOiBcIiArIHQ7XG4gICAgciA9PT0gdm9pZCAwICYmIChyID0gYS5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdF0pLCB0aGlzLmFsZ1Byb3YgPSB0ICsgXCIvXCIgKyByO1xuICAgIHZhciBpID0gdC5zdWJzdHIoNCk7XG4gICAgaWYgKFwiOm1kNTpzaGExOnNoYTIyNDpzaGEyNTY6c2hhMzg0OnNoYTUxMjpyaXBlbWQxNjA6XCIuaW5kZXhPZihpKSAhPSAtMSAmJiByID09IFwiY3J5cHRvanNcIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHMgPSBhLmNyeXB0by5VdGlsLkNSWVBUT0pTTUVTU0FHRURJR0VTVE5BTUVbaV07XG4gICAgICAgIHRoaXMubWFjID0gSy5hbGdvLkhNQUMuY3JlYXRlKHMsIHRoaXMucGFzcyk7XG4gICAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIHRocm93IFwic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgaGFzaEFsZz1cIiArIGkgKyBcIi9cIiArIG47XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVN0cmluZyA9IGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgdGhpcy5tYWMudXBkYXRlKG4pO1xuICAgICAgfSwgdGhpcy51cGRhdGVIZXggPSBmdW5jdGlvbihuKSB7XG4gICAgICAgIHZhciBoID0gSy5lbmMuSGV4LnBhcnNlKG4pO1xuICAgICAgICB0aGlzLm1hYy51cGRhdGUoaCk7XG4gICAgICB9LCB0aGlzLmRvRmluYWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG4gPSB0aGlzLm1hYy5maW5hbGl6ZSgpO1xuICAgICAgICByZXR1cm4gbi50b1N0cmluZyhLLmVuYy5IZXgpO1xuICAgICAgfSwgdGhpcy5kb0ZpbmFsU3RyaW5nID0gZnVuY3Rpb24obikge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVTdHJpbmcobiksIHRoaXMuZG9GaW5hbCgpO1xuICAgICAgfSwgdGhpcy5kb0ZpbmFsSGV4ID0gZnVuY3Rpb24obikge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVIZXgobiksIHRoaXMuZG9GaW5hbCgpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIHRoaXMudXBkYXRlU3RyaW5nID0gZnVuY3Rpb24odCkge1xuICAgIHRocm93IFwidXBkYXRlU3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ1Byb3Y7XG4gIH0sIHRoaXMudXBkYXRlSGV4ID0gZnVuY3Rpb24odCkge1xuICAgIHRocm93IFwidXBkYXRlSGV4KGhleCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ1Byb3Y7XG4gIH0sIHRoaXMuZG9GaW5hbCA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IFwiZGlnZXN0KCkgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGcvcHJvdjogXCIgKyB0aGlzLmFsZ1Byb3Y7XG4gIH0sIHRoaXMuZG9GaW5hbFN0cmluZyA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0aHJvdyBcImRpZ2VzdFN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnL3Byb3Y6IFwiICsgdGhpcy5hbGdQcm92O1xuICB9LCB0aGlzLmRvRmluYWxIZXggPSBmdW5jdGlvbih0KSB7XG4gICAgdGhyb3cgXCJkaWdlc3RIZXgoaGV4KSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZy9wcm92OiBcIiArIHRoaXMuYWxnUHJvdjtcbiAgfSwgdGhpcy5zZXRQYXNzd29yZCA9IGZ1bmN0aW9uKHQpIHtcbiAgICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgdmFyIHIgPSB0O1xuICAgICAgKHQubGVuZ3RoICUgMiA9PSAxIHx8ICF0Lm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKSAmJiAociA9IFBlKHQpKSwgdGhpcy5wYXNzID0gSy5lbmMuSGV4LnBhcnNlKHIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHQgIT0gXCJvYmplY3RcIilcbiAgICAgIHRocm93IFwiS0pVUi5jcnlwdG8uTWFjIHVuc3VwcG9ydGVkIHBhc3N3b3JkIHR5cGU6IFwiICsgdDtcbiAgICB2YXIgciA9IG51bGw7XG4gICAgaWYgKHQuaGV4ICE9PSB2b2lkIDApIHtcbiAgICAgIGlmICh0LmhleC5sZW5ndGggJSAyICE9IDAgfHwgIXQuaGV4Lm1hdGNoKC9eWzAtOUEtRmEtZl0rJC8pKVxuICAgICAgICB0aHJvdyBcIk1hYzogd3JvbmcgaGV4IHBhc3N3b3JkOiBcIiArIHQuaGV4O1xuICAgICAgciA9IHQuaGV4O1xuICAgIH1cbiAgICBpZiAodC51dGY4ICE9PSB2b2lkIDAgJiYgKHIgPSBodCh0LnV0ZjgpKSwgdC5yc3RyICE9PSB2b2lkIDAgJiYgKHIgPSBQZSh0LnJzdHIpKSwgdC5iNjQgIT09IHZvaWQgMCAmJiAociA9IGl0KHQuYjY0KSksIHQuYjY0dSAhPT0gdm9pZCAwICYmIChyID0gWSh0LmI2NHUpKSwgciA9PSBudWxsKVxuICAgICAgdGhyb3cgXCJLSlVSLmNyeXB0by5NYWMgdW5zdXBwb3J0ZWQgcGFzc3dvcmQgdHlwZTogXCIgKyB0O1xuICAgIHRoaXMucGFzcyA9IEsuZW5jLkhleC5wYXJzZShyKTtcbiAgfSwgZSAhPT0gdm9pZCAwICYmIChlLnBhc3MgIT09IHZvaWQgMCAmJiB0aGlzLnNldFBhc3N3b3JkKGUucGFzcyksIGUuYWxnICE9PSB2b2lkIDAgJiYgKHRoaXMuYWxnTmFtZSA9IGUuYWxnLCBlLnByb3YgPT09IHZvaWQgMCAmJiAodGhpcy5wcm92TmFtZSA9IGEuY3J5cHRvLlV0aWwuREVGQVVMVFBST1ZJREVSW3RoaXMuYWxnTmFtZV0pLCB0aGlzLnNldEFsZ0FuZFByb3ZpZGVyKHRoaXMuYWxnTmFtZSwgdGhpcy5wcm92TmFtZSkpKTtcbn07XG5hLmNyeXB0by5TaWduYXR1cmUgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gbnVsbDtcbiAgaWYgKHRoaXMuX3NldEFsZ05hbWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHIgPSB0aGlzLmFsZ05hbWUubWF0Y2goL14oLispd2l0aCguKykkLyk7XG4gICAgciAmJiAodGhpcy5tZEFsZ05hbWUgPSByWzFdLnRvTG93ZXJDYXNlKCksIHRoaXMucHVia2V5QWxnTmFtZSA9IHJbMl0udG9Mb3dlckNhc2UoKSwgdGhpcy5wdWJrZXlBbGdOYW1lID09IFwicnNhYW5kbWdmMVwiICYmIHRoaXMubWRBbGdOYW1lID09IFwic2hhXCIgJiYgKHRoaXMubWRBbGdOYW1lID0gXCJzaGExXCIpKTtcbiAgfSwgdGhpcy5femVyb1BhZGRpbmdPZlNpZ25hdHVyZSA9IGZ1bmN0aW9uKHIsIGkpIHtcbiAgICBmb3IgKHZhciBzID0gXCJcIiwgbiA9IGkgLyA0IC0gci5sZW5ndGgsIGggPSAwOyBoIDwgbjsgaCsrKVxuICAgICAgcyA9IHMgKyBcIjBcIjtcbiAgICByZXR1cm4gcyArIHI7XG4gIH0sIHRoaXMuc2V0QWxnQW5kUHJvdmlkZXIgPSBmdW5jdGlvbihyLCBpKSB7XG4gICAgaWYgKHRoaXMuX3NldEFsZ05hbWVzKCksIGkgIT0gXCJjcnlwdG9qcy9qc3JzYVwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwicHJvdmlkZXIgbm90IHN1cHBvcnRlZDogXCIgKyBpKTtcbiAgICBpZiAoXCI6bWQ1OnNoYTE6c2hhMjI0OnNoYTI1NjpzaGEzODQ6c2hhNTEyOnJpcGVtZDE2MDpcIi5pbmRleE9mKHRoaXMubWRBbGdOYW1lKSAhPSAtMSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5tZCA9IG5ldyBhLmNyeXB0by5NZXNzYWdlRGlnZXN0KHsgYWxnOiB0aGlzLm1kQWxnTmFtZSB9KTtcbiAgICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwic2V0QWxnQW5kUHJvdmlkZXIgaGFzaCBhbGcgc2V0IGZhaWwgYWxnPVwiICsgdGhpcy5tZEFsZ05hbWUgKyBcIi9cIiArIHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5pbml0ID0gZnVuY3Rpb24ocywgbikge1xuICAgICAgICB2YXIgaCA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbiA9PT0gdm9pZCAwID8gaCA9IGsuZ2V0S2V5KHMpIDogaCA9IGsuZ2V0S2V5KHMsIG4pO1xuICAgICAgICB9IGNhdGNoICh1KSB7XG4gICAgICAgICAgdGhyb3cgXCJpbml0IGZhaWxlZDpcIiArIHU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGguaXNQcml2YXRlID09PSAhMClcbiAgICAgICAgICB0aGlzLnBydktleSA9IGgsIHRoaXMuc3RhdGUgPSBcIlNJR05cIjtcbiAgICAgICAgZWxzZSBpZiAoaC5pc1B1YmxpYyA9PT0gITApXG4gICAgICAgICAgdGhpcy5wdWJLZXkgPSBoLCB0aGlzLnN0YXRlID0gXCJWRVJJRllcIjtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IFwiaW5pdCBmYWlsZWQuOlwiICsgaDtcbiAgICAgIH0sIHRoaXMudXBkYXRlU3RyaW5nID0gZnVuY3Rpb24ocykge1xuICAgICAgICB0aGlzLm1kLnVwZGF0ZVN0cmluZyhzKTtcbiAgICAgIH0sIHRoaXMudXBkYXRlSGV4ID0gZnVuY3Rpb24ocykge1xuICAgICAgICB0aGlzLm1kLnVwZGF0ZUhleChzKTtcbiAgICAgIH0sIHRoaXMuc2lnbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5zSGFzaEhleCA9IHRoaXMubWQuZGlnZXN0KCksIHRoaXMucHJ2S2V5ID09PSB2b2lkIDAgJiYgdGhpcy5lY3BydmhleCAhPT0gdm9pZCAwICYmIHRoaXMuZWNjdXJ2ZW5hbWUgIT09IHZvaWQgMCAmJiBhLmNyeXB0by5FQ0RTQSAhPT0gdm9pZCAwICYmICh0aGlzLnBydktleSA9IG5ldyBhLmNyeXB0by5FQ0RTQSh7IGN1cnZlOiB0aGlzLmVjY3VydmVuYW1lLCBwcnY6IHRoaXMuZWNwcnZoZXggfSkpLCB0aGlzLnBydktleSBpbnN0YW5jZW9mIHEgJiYgdGhpcy5wdWJrZXlBbGdOYW1lID09PSBcInJzYWFuZG1nZjFcIilcbiAgICAgICAgICB0aGlzLmhTaWduID0gdGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaFBTUyh0aGlzLnNIYXNoSGV4LCB0aGlzLm1kQWxnTmFtZSwgdGhpcy5wc3NTYWx0TGVuKTtcbiAgICAgICAgZWxzZSBpZiAodGhpcy5wcnZLZXkgaW5zdGFuY2VvZiBxICYmIHRoaXMucHVia2V5QWxnTmFtZSA9PT0gXCJyc2FcIilcbiAgICAgICAgICB0aGlzLmhTaWduID0gdGhpcy5wcnZLZXkuc2lnbldpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LCB0aGlzLm1kQWxnTmFtZSk7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucHJ2S2V5IGluc3RhbmNlb2YgYS5jcnlwdG8uRUNEU0EpXG4gICAgICAgICAgdGhpcy5oU2lnbiA9IHRoaXMucHJ2S2V5LnNpZ25XaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCk7XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucHJ2S2V5IGluc3RhbmNlb2YgYS5jcnlwdG8uRFNBKVxuICAgICAgICAgIHRoaXMuaFNpZ24gPSB0aGlzLnBydktleS5zaWduV2l0aE1lc3NhZ2VIYXNoKHRoaXMuc0hhc2hIZXgpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgdGhyb3cgXCJTaWduYXR1cmU6IHVuc3VwcG9ydGVkIHByaXZhdGUga2V5IGFsZzogXCIgKyB0aGlzLnB1YmtleUFsZ05hbWU7XG4gICAgICAgIHJldHVybiB0aGlzLmhTaWduO1xuICAgICAgfSwgdGhpcy5zaWduU3RyaW5nID0gZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVTdHJpbmcocyksIHRoaXMuc2lnbigpO1xuICAgICAgfSwgdGhpcy5zaWduSGV4ID0gZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVIZXgocyksIHRoaXMuc2lnbigpO1xuICAgICAgfSwgdGhpcy52ZXJpZnkgPSBmdW5jdGlvbihzKSB7XG4gICAgICAgIGlmICh0aGlzLnNIYXNoSGV4ID0gdGhpcy5tZC5kaWdlc3QoKSwgdGhpcy5wdWJLZXkgPT09IHZvaWQgMCAmJiB0aGlzLmVjcHViaGV4ICE9PSB2b2lkIDAgJiYgdGhpcy5lY2N1cnZlbmFtZSAhPT0gdm9pZCAwICYmIGEuY3J5cHRvLkVDRFNBICE9PSB2b2lkIDAgJiYgKHRoaXMucHViS2V5ID0gbmV3IGEuY3J5cHRvLkVDRFNBKHsgY3VydmU6IHRoaXMuZWNjdXJ2ZW5hbWUsIHB1YjogdGhpcy5lY3B1YmhleCB9KSksIHRoaXMucHViS2V5IGluc3RhbmNlb2YgcSAmJiB0aGlzLnB1YmtleUFsZ05hbWUgPT09IFwicnNhYW5kbWdmMVwiKVxuICAgICAgICAgIHJldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1ModGhpcy5zSGFzaEhleCwgcywgdGhpcy5tZEFsZ05hbWUsIHRoaXMucHNzU2FsdExlbik7XG4gICAgICAgIGlmICh0aGlzLnB1YktleSBpbnN0YW5jZW9mIHEgJiYgdGhpcy5wdWJrZXlBbGdOYW1lID09PSBcInJzYVwiKVxuICAgICAgICAgIHJldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCwgcyk7XG4gICAgICAgIGlmIChhLmNyeXB0by5FQ0RTQSAhPT0gdm9pZCAwICYmIHRoaXMucHViS2V5IGluc3RhbmNlb2YgYS5jcnlwdG8uRUNEU0EpXG4gICAgICAgICAgcmV0dXJuIHRoaXMucHViS2V5LnZlcmlmeVdpdGhNZXNzYWdlSGFzaCh0aGlzLnNIYXNoSGV4LCBzKTtcbiAgICAgICAgaWYgKGEuY3J5cHRvLkRTQSAhPT0gdm9pZCAwICYmIHRoaXMucHViS2V5IGluc3RhbmNlb2YgYS5jcnlwdG8uRFNBKVxuICAgICAgICAgIHJldHVybiB0aGlzLnB1YktleS52ZXJpZnlXaXRoTWVzc2FnZUhhc2godGhpcy5zSGFzaEhleCwgcyk7XG4gICAgICAgIHRocm93IFwiU2lnbmF0dXJlOiB1bnN1cHBvcnRlZCBwdWJsaWMga2V5IGFsZzogXCIgKyB0aGlzLnB1YmtleUFsZ05hbWU7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgdGhpcy5pbml0ID0gZnVuY3Rpb24ociwgaSkge1xuICAgIHRocm93IFwiaW5pdChrZXksIHBhc3MpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIgKyB0aGlzLmFsZ1Byb3ZOYW1lO1xuICB9LCB0aGlzLnVwZGF0ZVN0cmluZyA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aHJvdyBcInVwZGF0ZVN0cmluZyhzdHIpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIgKyB0aGlzLmFsZ1Byb3ZOYW1lO1xuICB9LCB0aGlzLnVwZGF0ZUhleCA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aHJvdyBcInVwZGF0ZUhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIgKyB0aGlzLmFsZ1Byb3ZOYW1lO1xuICB9LCB0aGlzLnNpZ24gPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBcInNpZ24oKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiICsgdGhpcy5hbGdQcm92TmFtZTtcbiAgfSwgdGhpcy5zaWduU3RyaW5nID0gZnVuY3Rpb24ocikge1xuICAgIHRocm93IFwiZGlnZXN0U3RyaW5nKHN0cikgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBhbGc6cHJvdj1cIiArIHRoaXMuYWxnUHJvdk5hbWU7XG4gIH0sIHRoaXMuc2lnbkhleCA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aHJvdyBcImRpZ2VzdEhleChoZXgpIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgYWxnOnByb3Y9XCIgKyB0aGlzLmFsZ1Byb3ZOYW1lO1xuICB9LCB0aGlzLnZlcmlmeSA9IGZ1bmN0aW9uKHIpIHtcbiAgICB0aHJvdyBcInZlcmlmeShoU2lnVmFsKSBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIGFsZzpwcm92PVwiICsgdGhpcy5hbGdQcm92TmFtZTtcbiAgfSwgdGhpcy5pbml0UGFyYW1zID0gZSwgZSAhPT0gdm9pZCAwICYmIChlLmFsZyAhPT0gdm9pZCAwICYmICh0aGlzLmFsZ05hbWUgPSBlLmFsZywgZS5wcm92ID09PSB2b2lkIDAgPyB0aGlzLnByb3ZOYW1lID0gYS5jcnlwdG8uVXRpbC5ERUZBVUxUUFJPVklERVJbdGhpcy5hbGdOYW1lXSA6IHRoaXMucHJvdk5hbWUgPSBlLnByb3YsIHRoaXMuYWxnUHJvdk5hbWUgPSB0aGlzLmFsZ05hbWUgKyBcIjpcIiArIHRoaXMucHJvdk5hbWUsIHRoaXMuc2V0QWxnQW5kUHJvdmlkZXIodGhpcy5hbGdOYW1lLCB0aGlzLnByb3ZOYW1lKSwgdGhpcy5fc2V0QWxnTmFtZXMoKSksIGUucHNzc2FsdGxlbiAhPT0gdm9pZCAwICYmICh0aGlzLnBzc1NhbHRMZW4gPSBlLnBzc3NhbHRsZW4pLCBlLnBydmtleXBlbSAhPT0gdm9pZCAwKSkge1xuICAgIGlmIChlLnBydmtleXBhcyAhPT0gdm9pZCAwKVxuICAgICAgdGhyb3cgXCJib3RoIHBydmtleXBlbSBhbmQgcHJ2a2V5cGFzIHBhcmFtZXRlcnMgbm90IHN1cHBvcnRlZFwiO1xuICAgIHRyeSB7XG4gICAgICB2YXIgdCA9IGsuZ2V0S2V5KGUucHJ2a2V5cGVtKTtcbiAgICAgIHRoaXMuaW5pdCh0KTtcbiAgICB9IGNhdGNoIChyKSB7XG4gICAgICB0aHJvdyBcImZhdGFsIGVycm9yIHRvIGxvYWQgcGVtIHByaXZhdGUga2V5OiBcIiArIHI7XG4gICAgfVxuICB9XG59O1xuYS5jcnlwdG8uQ2lwaGVyID0gZnVuY3Rpb24oZSkge1xufTtcbmEuY3J5cHRvLkNpcGhlci5lbmNyeXB0ID0gZnVuY3Rpb24oZSwgdCwgciwgaSkge1xuICBpZiAoSihpLCBcImVuY2xhZ1wiKSAhPSBudWxsICYmIChyID0gaS5lbmNhbGcpLCB0eXBlb2YgciA9PSBcInN0cmluZ1wiICYmIHIuc3Vic3RyKC00KSA9PSBcIi1DQkNcIikge1xuICAgIHZhciBzID0gdCwgbiA9IGU7XG4gICAgSihpLCBcImtleVwiKSAhPSBudWxsICYmIChzID0gaS5rZXkpLCBKKGksIFwiZW5jXCIpICE9IG51bGwgJiYgKGhFbmMgPSBpLmVuYyk7XG4gICAgdmFyIGggPSBLLmVuYy5IZXgucGFyc2UocyksIHUgPSBLLmVuYy5IZXgucGFyc2UobiksIHAgPSBLLmVuYy5IZXgucGFyc2UoaS5pdiksIGM7XG4gICAgaWYgKHIgPT0gXCJkZXMtRURFMy1DQkNcIilcbiAgICAgIGMgPSBLLlRyaXBsZURFUy5lbmNyeXB0KHUsIGgsIHsgaXY6IHAgfSk7XG4gICAgZWxzZSBpZiAociA9PSBcImFlczEyOC1DQkNcIiB8fCByID09IFwiYWVzMjU2LUNCQ1wiKVxuICAgICAgYyA9IEsuQUVTLmVuY3J5cHQodSwgaCwgeyBpdjogcCB9KTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBhbGdvcml0aG06IFwiICsgcik7XG4gICAgcmV0dXJuIGMgKyBcIlwiO1xuICB9IGVsc2VcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDaXBoZXIuZW5jcnlwdDogdW5zdXBwb3J0ZWQga2V5IG9yIGFsZ29yaXRobVwiKTtcbn07XG5hLmNyeXB0by5DaXBoZXIuZGVjcnlwdCA9IGZ1bmN0aW9uKGUsIHQsIHIsIGkpIHtcbiAgaWYgKEooaSwgXCJlbmNsYWdcIikgIT0gbnVsbCAmJiAociA9IGkuZW5jYWxnKSwgdHlwZW9mIHIgPT0gXCJzdHJpbmdcIiAmJiByLnN1YnN0cigtNCkgPT0gXCItQ0JDXCIpIHtcbiAgICB2YXIgcyA9IHQsIG4gPSBlO1xuICAgIEooaSwgXCJrZXlcIikgIT0gbnVsbCAmJiAocyA9IGkua2V5KSwgSihpLCBcImVuY1wiKSAhPSBudWxsICYmIChuID0gaS5lbmMpO1xuICAgIHZhciBoID0gSy5lbmMuSGV4LnBhcnNlKHMpLCB1ID0gSy5lbmMuSGV4LnBhcnNlKG4pLCBwID0gSy5lbmMuSGV4LnBhcnNlKGkuaXYpLCBjO1xuICAgIGlmIChyID09IFwiZGVzLUVERTMtQ0JDXCIpXG4gICAgICBjID0gSy5UcmlwbGVERVMuZGVjcnlwdCh7IGNpcGhlcnRleHQ6IHUgfSwgaCwgeyBpdjogcCB9KTtcbiAgICBlbHNlIGlmIChyID09IFwiYWVzMTI4LUNCQ1wiIHx8IHIgPT0gXCJhZXMyNTYtQ0JDXCIpXG4gICAgICBjID0gSy5BRVMuZGVjcnlwdCh7IGNpcGhlcnRleHQ6IHUgfSwgaCwgeyBpdjogcCB9KTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBhbGdvcml0aG06IFwiICsgcik7XG4gICAgcmV0dXJuIEsuZW5jLkhleC5zdHJpbmdpZnkoYyk7XG4gIH0gZWxzZVxuICAgIHRocm93IG5ldyBFcnJvcihcIkNpcGhlci5kZWNyeXB0OiB1bnN1cHBvcnRlZCBrZXkgb3IgYWxnb3JpdGhtXCIpO1xufTtcbmEuY3J5cHRvLk9JRCA9IG5ldyBmdW5jdGlvbigpIHtcbiAgdGhpcy5vaWRoZXgybmFtZSA9IHsgXCIyYTg2NDg4NmY3MGQwMTAxMDFcIjogXCJyc2FFbmNyeXB0aW9uXCIsIFwiMmE4NjQ4Y2UzZDAyMDFcIjogXCJlY1B1YmxpY0tleVwiLCBcIjJhODY0OGNlMzgwNDAxXCI6IFwiZHNhXCIsIFwiMmE4NjQ4Y2UzZDAzMDEwN1wiOiBcInNlY3AyNTZyMVwiLCBcIjJiODEwNDAwMWZcIjogXCJzZWNwMTkyazFcIiwgXCIyYjgxMDQwMDIxXCI6IFwic2VjcDIyNHIxXCIsIFwiMmI4MTA0MDAwYVwiOiBcInNlY3AyNTZrMVwiLCBcIjJiODEwNDAwMjJcIjogXCJzZWNwMzg0cjFcIiwgXCIyYjgxMDQwMDIzXCI6IFwic2VjcDUyMXIxXCIsIFwiMmE4NjQ4Y2UzODA0MDNcIjogXCJTSEExd2l0aERTQVwiLCBcIjYwODY0ODAxNjUwMzA0MDMwMVwiOiBcIlNIQTIyNHdpdGhEU0FcIiwgXCI2MDg2NDgwMTY1MDMwNDAzMDJcIjogXCJTSEEyNTZ3aXRoRFNBXCIgfTtcbn0oKTtcbih0eXBlb2YgYSA+IFwidVwiIHx8ICFhKSAmJiAoYSA9IHt9KTtcbih0eXBlb2YgYS5jcnlwdG8gPiBcInVcIiB8fCAhYS5jcnlwdG8pICYmIChhLmNyeXB0byA9IHt9KTtcbmEuY3J5cHRvLkVDRFNBID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IFwic2VjcDI1NnIxXCIsIHIgPSBFcnJvciwgaSA9IFIsIHMgPSB6LCBuID0gYS5jcnlwdG8uRUNEU0EsIGggPSBhLmNyeXB0by5FQ1BhcmFtZXRlckRCLCB1ID0gbi5nZXROYW1lLCBwID0gViwgYyA9IHAuZ2V0VmJ5TGlzdEV4LCB5ID0gcC5pc0FTTjFIRVgsIHYgPSBuZXcgR2UoKTtcbiAgdGhpcy50eXBlID0gXCJFQ1wiLCB0aGlzLmlzUHJpdmF0ZSA9ICExLCB0aGlzLmlzUHVibGljID0gITEsIHRoaXMuZ2V0QmlnUmFuZG9tID0gZnVuY3Rpb24obykge1xuICAgIHJldHVybiBuZXcgaShvLmJpdExlbmd0aCgpLCB2KS5tb2Qoby5zdWJ0cmFjdChpLk9ORSkpLmFkZChpLk9ORSk7XG4gIH0sIHRoaXMuc2V0TmFtZWRDdXJ2ZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICB0aGlzLmVjcGFyYW1zID0gaC5nZXRCeU5hbWUobyksIHRoaXMucHJ2S2V5SGV4ID0gbnVsbCwgdGhpcy5wdWJLZXlIZXggPSBudWxsLCB0aGlzLmN1cnZlTmFtZSA9IG87XG4gIH0sIHRoaXMuc2V0UHJpdmF0ZUtleUhleCA9IGZ1bmN0aW9uKG8pIHtcbiAgICB0aGlzLmlzUHJpdmF0ZSA9ICEwLCB0aGlzLnBydktleUhleCA9IG87XG4gIH0sIHRoaXMuc2V0UHVibGljS2V5SGV4ID0gZnVuY3Rpb24obykge1xuICAgIHRoaXMuaXNQdWJsaWMgPSAhMCwgdGhpcy5wdWJLZXlIZXggPSBvO1xuICB9LCB0aGlzLmdldFB1YmxpY0tleVhZSGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG8gPSB0aGlzLnB1YktleUhleDtcbiAgICBpZiAoby5zdWJzdHIoMCwgMikgIT09IFwiMDRcIilcbiAgICAgIHRocm93IFwidGhpcyBtZXRob2Qgc3VwcG9ydHMgdW5jb21wcmVzc2VkIGZvcm1hdCgwNCkgb25seVwiO1xuICAgIHZhciBsID0gdGhpcy5lY3BhcmFtcy5rZXljaGFybGVuO1xuICAgIGlmIChvLmxlbmd0aCAhPT0gMiArIGwgKiAyKVxuICAgICAgdGhyb3cgXCJtYWxmb3JtZWQgcHVibGljIGtleSBoZXggbGVuZ3RoXCI7XG4gICAgdmFyIGYgPSB7fTtcbiAgICByZXR1cm4gZi54ID0gby5zdWJzdHIoMiwgbCksIGYueSA9IG8uc3Vic3RyKDIgKyBsKSwgZjtcbiAgfSwgdGhpcy5nZXRTaG9ydE5JU1RQQ3VydmVOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG8gPSB0aGlzLmN1cnZlTmFtZTtcbiAgICByZXR1cm4gbyA9PT0gXCJzZWNwMjU2cjFcIiB8fCBvID09PSBcIk5JU1QgUC0yNTZcIiB8fCBvID09PSBcIlAtMjU2XCIgfHwgbyA9PT0gXCJwcmltZTI1NnYxXCIgPyBcIlAtMjU2XCIgOiBvID09PSBcInNlY3AzODRyMVwiIHx8IG8gPT09IFwiTklTVCBQLTM4NFwiIHx8IG8gPT09IFwiUC0zODRcIiA/IFwiUC0zODRcIiA6IG8gPT09IFwic2VjcDUyMXIxXCIgfHwgbyA9PT0gXCJOSVNUIFAtNTIxXCIgfHwgbyA9PT0gXCJQLTUyMVwiID8gXCJQLTUyMVwiIDogbnVsbDtcbiAgfSwgdGhpcy5nZW5lcmF0ZUtleVBhaXJIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IHRoaXMuZWNwYXJhbXMubiwgbCA9IHRoaXMuZ2V0QmlnUmFuZG9tKG8pLCBmID0gdGhpcy5lY3BhcmFtcy5rZXljaGFybGVuLCBkID0gKFwiMDAwMDAwMDAwMFwiICsgbC50b1N0cmluZygxNikpLnNsaWNlKC1mKTtcbiAgICB0aGlzLnNldFByaXZhdGVLZXlIZXgoZCk7XG4gICAgdmFyIGcgPSB0aGlzLmdlbmVyYXRlUHVibGljS2V5SGV4KCk7XG4gICAgcmV0dXJuIHsgZWNwcnZoZXg6IGQsIGVjcHViaGV4OiBnIH07XG4gIH0sIHRoaXMuZ2VuZXJhdGVQdWJsaWNLZXlIZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbyA9IG5ldyBpKHRoaXMucHJ2S2V5SGV4LCAxNiksIGwgPSB0aGlzLmVjcGFyYW1zLkcubXVsdGlwbHkobyksIGYgPSBsLmdldFgoKS50b0JpZ0ludGVnZXIoKSwgZCA9IGwuZ2V0WSgpLnRvQmlnSW50ZWdlcigpLCBnID0gdGhpcy5lY3BhcmFtcy5rZXljaGFybGVuLCBTID0gKFwiMDAwMDAwMDAwMFwiICsgZi50b1N0cmluZygxNikpLnNsaWNlKC1nKSwgYiA9IChcIjAwMDAwMDAwMDBcIiArIGQudG9TdHJpbmcoMTYpKS5zbGljZSgtZyksIEQgPSBcIjA0XCIgKyBTICsgYjtcbiAgICByZXR1cm4gdGhpcy5zZXRQdWJsaWNLZXlIZXgoRCksIEQ7XG4gIH0sIHRoaXMuc2lnbldpdGhNZXNzYWdlSGFzaCA9IGZ1bmN0aW9uKG8pIHtcbiAgICByZXR1cm4gdGhpcy5zaWduSGV4KG8sIHRoaXMucHJ2S2V5SGV4KTtcbiAgfSwgdGhpcy5zaWduSGV4ID0gZnVuY3Rpb24obywgbCkge1xuICAgIHZhciBmID0gbmV3IGkobCwgMTYpLCBkID0gdGhpcy5lY3BhcmFtcy5uLCBnID0gbmV3IGkoby5zdWJzdHJpbmcoMCwgdGhpcy5lY3BhcmFtcy5rZXljaGFybGVuKSwgMTYpO1xuICAgIGRvXG4gICAgICB2YXIgUyA9IHRoaXMuZ2V0QmlnUmFuZG9tKGQpLCBiID0gdGhpcy5lY3BhcmFtcy5HLCBEID0gYi5tdWx0aXBseShTKSwgQSA9IEQuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLm1vZChkKTtcbiAgICB3aGlsZSAoQS5jb21wYXJlVG8oaS5aRVJPKSA8PSAwKTtcbiAgICB2YXIgSSA9IFMubW9kSW52ZXJzZShkKS5tdWx0aXBseShnLmFkZChmLm11bHRpcGx5KEEpKSkubW9kKGQpO1xuICAgIHJldHVybiBuLmJpUlNTaWdUb0FTTjFTaWcoQSwgSSk7XG4gIH0sIHRoaXMuc2lnbiA9IGZ1bmN0aW9uKG8sIGwpIHtcbiAgICB2YXIgZiA9IGwsIGQgPSB0aGlzLmVjcGFyYW1zLm4sIGcgPSBpLmZyb21CeXRlQXJyYXlVbnNpZ25lZChvKTtcbiAgICBkb1xuICAgICAgdmFyIFMgPSB0aGlzLmdldEJpZ1JhbmRvbShkKSwgYiA9IHRoaXMuZWNwYXJhbXMuRywgRCA9IGIubXVsdGlwbHkoUyksIEEgPSBELmdldFgoKS50b0JpZ0ludGVnZXIoKS5tb2QoZCk7XG4gICAgd2hpbGUgKEEuY29tcGFyZVRvKFIuWkVSTykgPD0gMCk7XG4gICAgdmFyIEkgPSBTLm1vZEludmVyc2UoZCkubXVsdGlwbHkoZy5hZGQoZi5tdWx0aXBseShBKSkpLm1vZChkKTtcbiAgICByZXR1cm4gdGhpcy5zZXJpYWxpemVTaWcoQSwgSSk7XG4gIH0sIHRoaXMudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoID0gZnVuY3Rpb24obywgbCkge1xuICAgIHJldHVybiB0aGlzLnZlcmlmeUhleChvLCBsLCB0aGlzLnB1YktleUhleCk7XG4gIH0sIHRoaXMudmVyaWZ5SGV4ID0gZnVuY3Rpb24obywgbCwgZikge1xuICAgIHRyeSB7XG4gICAgICB2YXIgZCwgZywgUyA9IG4ucGFyc2VTaWdIZXgobCk7XG4gICAgICBkID0gUy5yLCBnID0gUy5zO1xuICAgICAgdmFyIGIgPSBzLmRlY29kZUZyb21IZXgodGhpcy5lY3BhcmFtcy5jdXJ2ZSwgZiksIEQgPSBuZXcgaShvLnN1YnN0cmluZygwLCB0aGlzLmVjcGFyYW1zLmtleWNoYXJsZW4pLCAxNik7XG4gICAgICByZXR1cm4gdGhpcy52ZXJpZnlSYXcoRCwgZCwgZywgYik7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICB9LCB0aGlzLnZlcmlmeSA9IGZ1bmN0aW9uKG8sIGwsIGYpIHtcbiAgICB2YXIgZCwgZztcbiAgICBpZiAoQml0Y29pbi5VdGlsLmlzQXJyYXkobCkpIHtcbiAgICAgIHZhciBTID0gdGhpcy5wYXJzZVNpZyhsKTtcbiAgICAgIGQgPSBTLnIsIGcgPSBTLnM7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbCA9PSBcIm9iamVjdFwiICYmIGwuciAmJiBsLnMpXG4gICAgICBkID0gbC5yLCBnID0gbC5zO1xuICAgIGVsc2VcbiAgICAgIHRocm93IFwiSW52YWxpZCB2YWx1ZSBmb3Igc2lnbmF0dXJlXCI7XG4gICAgdmFyIGI7XG4gICAgaWYgKGYgaW5zdGFuY2VvZiB6KVxuICAgICAgYiA9IGY7XG4gICAgZWxzZSBpZiAoQml0Y29pbi5VdGlsLmlzQXJyYXkoZikpXG4gICAgICBiID0gcy5kZWNvZGVGcm9tKHRoaXMuZWNwYXJhbXMuY3VydmUsIGYpO1xuICAgIGVsc2VcbiAgICAgIHRocm93IFwiSW52YWxpZCBmb3JtYXQgZm9yIHB1YmtleSB2YWx1ZSwgbXVzdCBiZSBieXRlIGFycmF5IG9yIEVDUG9pbnRGcFwiO1xuICAgIHZhciBEID0gaS5mcm9tQnl0ZUFycmF5VW5zaWduZWQobyk7XG4gICAgcmV0dXJuIHRoaXMudmVyaWZ5UmF3KEQsIGQsIGcsIGIpO1xuICB9LCB0aGlzLnZlcmlmeVJhdyA9IGZ1bmN0aW9uKG8sIGwsIGYsIGQpIHtcbiAgICB2YXIgZyA9IHRoaXMuZWNwYXJhbXMubiwgUyA9IHRoaXMuZWNwYXJhbXMuRztcbiAgICBpZiAobC5jb21wYXJlVG8oaS5PTkUpIDwgMCB8fCBsLmNvbXBhcmVUbyhnKSA+PSAwIHx8IGYuY29tcGFyZVRvKGkuT05FKSA8IDAgfHwgZi5jb21wYXJlVG8oZykgPj0gMClcbiAgICAgIHJldHVybiAhMTtcbiAgICB2YXIgYiA9IGYubW9kSW52ZXJzZShnKSwgRCA9IG8ubXVsdGlwbHkoYikubW9kKGcpLCBBID0gbC5tdWx0aXBseShiKS5tb2QoZyksIEkgPSBTLm11bHRpcGx5KEQpLmFkZChkLm11bHRpcGx5KEEpKSwgbSA9IEkuZ2V0WCgpLnRvQmlnSW50ZWdlcigpLm1vZChnKTtcbiAgICByZXR1cm4gbS5lcXVhbHMobCk7XG4gIH0sIHRoaXMuc2VyaWFsaXplU2lnID0gZnVuY3Rpb24obywgbCkge1xuICAgIHZhciBmID0gby50b0J5dGVBcnJheVNpZ25lZCgpLCBkID0gbC50b0J5dGVBcnJheVNpZ25lZCgpLCBnID0gW107XG4gICAgcmV0dXJuIGcucHVzaCgyKSwgZy5wdXNoKGYubGVuZ3RoKSwgZyA9IGcuY29uY2F0KGYpLCBnLnB1c2goMiksIGcucHVzaChkLmxlbmd0aCksIGcgPSBnLmNvbmNhdChkKSwgZy51bnNoaWZ0KGcubGVuZ3RoKSwgZy51bnNoaWZ0KDQ4KSwgZztcbiAgfSwgdGhpcy5wYXJzZVNpZyA9IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgbDtcbiAgICBpZiAob1swXSAhPSA0OClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ25hdHVyZSBub3QgYSB2YWxpZCBERVJTZXF1ZW5jZVwiKTtcbiAgICBpZiAobCA9IDIsIG9bbF0gIT0gMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZpcnN0IGVsZW1lbnQgaW4gc2lnbmF0dXJlIG11c3QgYmUgYSBERVJJbnRlZ2VyXCIpO1xuICAgIHZhciBmID0gby5zbGljZShsICsgMiwgbCArIDIgKyBvW2wgKyAxXSk7XG4gICAgaWYgKGwgKz0gMiArIG9bbCArIDFdLCBvW2xdICE9IDIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZWNvbmQgZWxlbWVudCBpbiBzaWduYXR1cmUgbXVzdCBiZSBhIERFUkludGVnZXJcIik7XG4gICAgdmFyIGQgPSBvLnNsaWNlKGwgKyAyLCBsICsgMiArIG9bbCArIDFdKTtcbiAgICBsICs9IDIgKyBvW2wgKyAxXTtcbiAgICB2YXIgZyA9IGkuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKGYpLCBTID0gaS5mcm9tQnl0ZUFycmF5VW5zaWduZWQoZCk7XG4gICAgcmV0dXJuIHsgcjogZywgczogUyB9O1xuICB9LCB0aGlzLnBhcnNlU2lnQ29tcGFjdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICBpZiAoby5sZW5ndGggIT09IDY1KVxuICAgICAgdGhyb3cgXCJTaWduYXR1cmUgaGFzIHRoZSB3cm9uZyBsZW5ndGhcIjtcbiAgICB2YXIgbCA9IG9bMF0gLSAyNztcbiAgICBpZiAobCA8IDAgfHwgbCA+IDcpXG4gICAgICB0aHJvdyBcIkludmFsaWQgc2lnbmF0dXJlIHR5cGVcIjtcbiAgICB2YXIgZiA9IHRoaXMuZWNwYXJhbXMubiwgZCA9IGkuZnJvbUJ5dGVBcnJheVVuc2lnbmVkKG8uc2xpY2UoMSwgMzMpKS5tb2QoZiksIGcgPSBpLmZyb21CeXRlQXJyYXlVbnNpZ25lZChvLnNsaWNlKDMzLCA2NSkpLm1vZChmKTtcbiAgICByZXR1cm4geyByOiBkLCBzOiBnLCBpOiBsIH07XG4gIH0sIHRoaXMucmVhZFBLQ1M1UHJ2S2V5SGV4ID0gZnVuY3Rpb24obykge1xuICAgIGlmICh5KG8pID09PSAhMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO1xuICAgIHZhciBsLCBmLCBkO1xuICAgIHRyeSB7XG4gICAgICBsID0gYyhvLCAwLCBbXCJbMF1cIiwgMF0sIFwiMDZcIiksIGYgPSBjKG8sIDAsIFsxXSwgXCIwNFwiKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGQgPSBjKG8sIDAsIFtcIlsxXVwiLCAwXSwgXCIwM1wiKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1MjMS81IHBsYWluIEVDQyBwcml2YXRlIGtleVwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY3VydmVOYW1lID0gdShsKSwgdGhpcy5jdXJ2ZU5hbWUgPT09IHZvaWQgMClcbiAgICAgIHRocm93IFwidW5zdXBwb3J0ZWQgY3VydmUgbmFtZVwiO1xuICAgIHRoaXMuc2V0TmFtZWRDdXJ2ZSh0aGlzLmN1cnZlTmFtZSksIHRoaXMuc2V0UHVibGljS2V5SGV4KGQpLCB0aGlzLnNldFByaXZhdGVLZXlIZXgoZiksIHRoaXMuaXNQdWJsaWMgPSAhMTtcbiAgfSwgdGhpcy5yZWFkUEtDUzhQcnZLZXlIZXggPSBmdW5jdGlvbihvKSB7XG4gICAgaWYgKHkobykgPT09ICExKVxuICAgICAgdGhyb3cgbmV3IHIoXCJub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgICB2YXIgbCwgZiwgZCwgZztcbiAgICB0cnkge1xuICAgICAgbCA9IGMobywgMCwgWzEsIDBdLCBcIjA2XCIpLCBmID0gYyhvLCAwLCBbMSwgMV0sIFwiMDZcIiksIGQgPSBjKG8sIDAsIFsyLCAwLCAxXSwgXCIwNFwiKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGcgPSBjKG8sIDAsIFsyLCAwLCBcIlsxXVwiLCAwXSwgXCIwM1wiKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IHIoXCJtYWxmb3JtZWQgUEtDUyM4IHBsYWluIEVDQyBwcml2YXRlIGtleVwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY3VydmVOYW1lID0gdShmKSwgdGhpcy5jdXJ2ZU5hbWUgPT09IHZvaWQgMClcbiAgICAgIHRocm93IG5ldyByKFwidW5zdXBwb3J0ZWQgY3VydmUgbmFtZVwiKTtcbiAgICB0aGlzLnNldE5hbWVkQ3VydmUodGhpcy5jdXJ2ZU5hbWUpLCB0aGlzLnNldFB1YmxpY0tleUhleChnKSwgdGhpcy5zZXRQcml2YXRlS2V5SGV4KGQpLCB0aGlzLmlzUHVibGljID0gITE7XG4gIH0sIHRoaXMucmVhZFBLQ1M4UHViS2V5SGV4ID0gZnVuY3Rpb24obykge1xuICAgIGlmICh5KG8pID09PSAhMSlcbiAgICAgIHRocm93IG5ldyByKFwibm90IEFTTi4xIGhleCBzdHJpbmdcIik7XG4gICAgdmFyIGwsIGYsIGQ7XG4gICAgdHJ5IHtcbiAgICAgIGwgPSBjKG8sIDAsIFswLCAwXSwgXCIwNlwiKSwgZiA9IGMobywgMCwgWzAsIDFdLCBcIjA2XCIpLCBkID0gYyhvLCAwLCBbMV0sIFwiMDNcIik7XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgcihcIm1hbGZvcm1lZCBQS0NTIzggRUNDIHB1YmxpYyBrZXlcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmN1cnZlTmFtZSA9IHUoZiksIHRoaXMuY3VydmVOYW1lID09PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IHIoXCJ1bnN1cHBvcnRlZCBjdXJ2ZSBuYW1lXCIpO1xuICAgIHRoaXMuc2V0TmFtZWRDdXJ2ZSh0aGlzLmN1cnZlTmFtZSksIHRoaXMuc2V0UHVibGljS2V5SGV4KGQpO1xuICB9LCB0aGlzLnJlYWRDZXJ0UHViS2V5SGV4ID0gZnVuY3Rpb24obywgbCkge1xuICAgIGlmICh5KG8pID09PSAhMSlcbiAgICAgIHRocm93IG5ldyByKFwibm90IEFTTi4xIGhleCBzdHJpbmdcIik7XG4gICAgdmFyIGYsIGQ7XG4gICAgdHJ5IHtcbiAgICAgIGYgPSBjKG8sIDAsIFswLCA1LCAwLCAxXSwgXCIwNlwiKSwgZCA9IGMobywgMCwgWzAsIDUsIDFdLCBcIjAzXCIpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IHIoXCJtYWxmb3JtZWQgWC41MDkgY2VydGlmaWNhdGUgRUNDIHB1YmxpYyBrZXlcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmN1cnZlTmFtZSA9IHUoZiksIHRoaXMuY3VydmVOYW1lID09PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IHIoXCJ1bnN1cHBvcnRlZCBjdXJ2ZSBuYW1lXCIpO1xuICAgIHRoaXMuc2V0TmFtZWRDdXJ2ZSh0aGlzLmN1cnZlTmFtZSksIHRoaXMuc2V0UHVibGljS2V5SGV4KGQpO1xuICB9LCBlICE9PSB2b2lkIDAgJiYgZS5jdXJ2ZSAhPT0gdm9pZCAwICYmICh0aGlzLmN1cnZlTmFtZSA9IGUuY3VydmUpLCB0aGlzLmN1cnZlTmFtZSA9PT0gdm9pZCAwICYmICh0aGlzLmN1cnZlTmFtZSA9IHQpLCB0aGlzLnNldE5hbWVkQ3VydmUodGhpcy5jdXJ2ZU5hbWUpLCBlICE9PSB2b2lkIDAgJiYgKGUucHJ2ICE9PSB2b2lkIDAgJiYgdGhpcy5zZXRQcml2YXRlS2V5SGV4KGUucHJ2KSwgZS5wdWIgIT09IHZvaWQgMCAmJiB0aGlzLnNldFB1YmxpY0tleUhleChlLnB1YikpO1xufTtcbmEuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEuY3J5cHRvLkVDRFNBLnBhcnNlU2lnSGV4SW5IZXhSUyhlKSwgciA9IG5ldyBSKHQuciwgMTYpLCBpID0gbmV3IFIodC5zLCAxNik7XG4gIHJldHVybiB7IHIsIHM6IGkgfTtcbn07XG5hLmNyeXB0by5FQ0RTQS5wYXJzZVNpZ0hleEluSGV4UlMgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gViwgciA9IHQuZ2V0Q2hpbGRJZHgsIGkgPSB0LmdldFY7XG4gIGlmICh0LmNoZWNrU3RyaWN0REVSKGUsIDApLCBlLnN1YnN0cigwLCAyKSAhPSBcIjMwXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwic2lnbmF0dXJlIGlzIG5vdCBhIEFTTi4xIHNlcXVlbmNlXCIpO1xuICB2YXIgcyA9IHIoZSwgMCk7XG4gIGlmIChzLmxlbmd0aCAhPSAyKVxuICAgIHRocm93IG5ldyBFcnJvcihcInNpZ25hdHVyZSBzaGFsbCBoYXZlIHR3byBlbGVtZW50c1wiKTtcbiAgdmFyIG4gPSBzWzBdLCBoID0gc1sxXTtcbiAgaWYgKGUuc3Vic3RyKG4sIDIpICE9IFwiMDJcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCIxc3QgaXRlbSBub3QgQVNOLjEgaW50ZWdlclwiKTtcbiAgaWYgKGUuc3Vic3RyKGgsIDIpICE9IFwiMDJcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCIybmQgaXRlbSBub3QgQVNOLjEgaW50ZWdlclwiKTtcbiAgdmFyIHUgPSBpKGUsIG4pLCBwID0gaShlLCBoKTtcbiAgcmV0dXJuIHsgcjogdSwgczogcCB9O1xufTtcbmEuY3J5cHRvLkVDRFNBLmFzbjFTaWdUb0NvbmNhdFNpZyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBhLmNyeXB0by5FQ0RTQS5wYXJzZVNpZ0hleEluSGV4UlMoZSksIHIgPSB0LnIsIGkgPSB0LnM7XG4gIGlmIChyLmxlbmd0aCA+PSAxMzAgJiYgci5sZW5ndGggPD0gMTM0KSB7XG4gICAgaWYgKHIubGVuZ3RoICUgMiAhPSAwKVxuICAgICAgdGhyb3cgRXJyb3IoXCJ1bmtub3duIEVDRFNBIHNpZyByIGxlbmd0aCBlcnJvclwiKTtcbiAgICBpZiAoaS5sZW5ndGggJSAyICE9IDApXG4gICAgICB0aHJvdyBFcnJvcihcInVua25vd24gRUNEU0Egc2lnIHMgbGVuZ3RoIGVycm9yXCIpO1xuICAgIHIuc3Vic3RyKDAsIDIpID09IFwiMDBcIiAmJiAociA9IHIuc3Vic3RyKDIpKSwgaS5zdWJzdHIoMCwgMikgPT0gXCIwMFwiICYmIChpID0gaS5zdWJzdHIoMikpO1xuICAgIHZhciBzID0gTWF0aC5tYXgoci5sZW5ndGgsIGkubGVuZ3RoKTtcbiAgICByZXR1cm4gciA9IChcIjAwMDAwMFwiICsgcikuc2xpY2UoLXMpLCBpID0gKFwiMDAwMDAwXCIgKyBpKS5zbGljZSgtcyksIHIgKyBpO1xuICB9XG4gIGlmIChyLnN1YnN0cigwLCAyKSA9PSBcIjAwXCIgJiYgci5sZW5ndGggJSAzMiA9PSAyICYmIChyID0gci5zdWJzdHIoMikpLCBpLnN1YnN0cigwLCAyKSA9PSBcIjAwXCIgJiYgaS5sZW5ndGggJSAzMiA9PSAyICYmIChpID0gaS5zdWJzdHIoMikpLCByLmxlbmd0aCAlIDMyID09IDMwICYmIChyID0gXCIwMFwiICsgciksIGkubGVuZ3RoICUgMzIgPT0gMzAgJiYgKGkgPSBcIjAwXCIgKyBpKSwgci5sZW5ndGggJSAzMiAhPSAwKVxuICAgIHRocm93IEVycm9yKFwidW5rbm93biBFQ0RTQSBzaWcgciBsZW5ndGggZXJyb3JcIik7XG4gIGlmIChpLmxlbmd0aCAlIDMyICE9IDApXG4gICAgdGhyb3cgRXJyb3IoXCJ1bmtub3duIEVDRFNBIHNpZyBzIGxlbmd0aCBlcnJvclwiKTtcbiAgcmV0dXJuIHIgKyBpO1xufTtcbmEuY3J5cHRvLkVDRFNBLmNvbmNhdFNpZ1RvQVNOMVNpZyA9IGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUubGVuZ3RoICUgNCAhPSAwKVxuICAgIHRocm93IEVycm9yKFwidW5rbm93biBFQ0RTQSBjb25jYXRpbmF0ZWQgci1zIHNpZyBsZW5ndGggZXJyb3JcIik7XG4gIHZhciB0ID0gZS5zdWJzdHIoMCwgZS5sZW5ndGggLyAyKSwgciA9IGUuc3Vic3RyKGUubGVuZ3RoIC8gMik7XG4gIHJldHVybiBhLmNyeXB0by5FQ0RTQS5oZXhSU1NpZ1RvQVNOMVNpZyh0LCByKTtcbn07XG5hLmNyeXB0by5FQ0RTQS5oZXhSU1NpZ1RvQVNOMVNpZyA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBuZXcgUihlLCAxNiksIGkgPSBuZXcgUih0LCAxNik7XG4gIHJldHVybiBhLmNyeXB0by5FQ0RTQS5iaVJTU2lnVG9BU04xU2lnKHIsIGkpO1xufTtcbmEuY3J5cHRvLkVDRFNBLmJpUlNTaWdUb0FTTjFTaWcgPSBmdW5jdGlvbihlLCB0KSB7XG4gIHZhciByID0gYS5hc24xLCBpID0gbmV3IHIuREVSSW50ZWdlcih7IGJpZ2ludDogZSB9KSwgcyA9IG5ldyByLkRFUkludGVnZXIoeyBiaWdpbnQ6IHQgfSksIG4gPSBuZXcgci5ERVJTZXF1ZW5jZSh7IGFycmF5OiBbaSwgc10gfSk7XG4gIHJldHVybiBuLnRvaGV4KCk7XG59O1xuYS5jcnlwdG8uRUNEU0EuZ2V0TmFtZSA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGUgPT09IFwiMmI4MTA0MDAxZlwiID8gXCJzZWNwMTkyazFcIiA6IGUgPT09IFwiMmE4NjQ4Y2UzZDAzMDEwN1wiID8gXCJzZWNwMjU2cjFcIiA6IGUgPT09IFwiMmI4MTA0MDAwYVwiID8gXCJzZWNwMjU2azFcIiA6IGUgPT09IFwiMmI4MTA0MDAyMVwiID8gXCJzZWNwMjI0cjFcIiA6IGUgPT09IFwiMmI4MTA0MDAyMlwiID8gXCJzZWNwMzg0cjFcIiA6IGUgPT09IFwiMmI4MTA0MDAyM1wiID8gXCJzZWNwNTIxcjFcIiA6IFwifHNlY3AyNTZyMXxOSVNUIFAtMjU2fFAtMjU2fHByaW1lMjU2djF8XCIuaW5kZXhPZihlKSAhPT0gLTEgPyBcInNlY3AyNTZyMVwiIDogXCJ8c2VjcDI1NmsxfFwiLmluZGV4T2YoZSkgIT09IC0xID8gXCJzZWNwMjU2azFcIiA6IFwifHNlY3AyMjRyMXxOSVNUIFAtMjI0fFAtMjI0fFwiLmluZGV4T2YoZSkgIT09IC0xID8gXCJzZWNwMjI0cjFcIiA6IFwifHNlY3AzODRyMXxOSVNUIFAtMzg0fFAtMzg0fFwiLmluZGV4T2YoZSkgIT09IC0xID8gXCJzZWNwMzg0cjFcIiA6IFwifHNlY3A1MjFyMXxOSVNUIFAtNTIxfFAtNTIxfFwiLmluZGV4T2YoZSkgIT09IC0xID8gXCJzZWNwNTIxcjFcIiA6IG51bGw7XG59O1xuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmNyeXB0byA+IFwidVwiIHx8ICFhLmNyeXB0bykgJiYgKGEuY3J5cHRvID0ge30pO1xuYS5jcnlwdG8uRUNQYXJhbWV0ZXJEQiA9IG5ldyBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSB7fSwgdCA9IHt9O1xuICBmdW5jdGlvbiByKGkpIHtcbiAgICByZXR1cm4gbmV3IFIoaSwgMTYpO1xuICB9XG4gIHRoaXMuZ2V0QnlOYW1lID0gZnVuY3Rpb24oaSkge1xuICAgIHZhciBzID0gaTtcbiAgICBpZiAodHlwZW9mIHRbc10gPCBcInVcIiAmJiAocyA9IHRbaV0pLCB0eXBlb2YgZVtzXSA8IFwidVwiKVxuICAgICAgcmV0dXJuIGVbc107XG4gICAgdGhyb3cgXCJ1bnJlZ2lzdGVyZWQgRUMgY3VydmUgbmFtZTogXCIgKyBzO1xuICB9LCB0aGlzLnJlZ2lzdCA9IGZ1bmN0aW9uKGksIHMsIG4sIGgsIHUsIHAsIGMsIHksIHYsIG8sIGwsIGYpIHtcbiAgICBlW2ldID0ge307XG4gICAgdmFyIGQgPSByKG4pLCBnID0gcihoKSwgUyA9IHIodSksIGIgPSByKHApLCBEID0gcihjKSwgQSA9IG5ldyBCZShkLCBnLCBTKSwgSSA9IEEuZGVjb2RlUG9pbnRIZXgoXCIwNFwiICsgeSArIHYpO1xuICAgIGVbaV0ubmFtZSA9IGksIGVbaV0ua2V5bGVuID0gcywgZVtpXS5rZXljaGFybGVuID0gTWF0aC5jZWlsKHMgLyA4KSAqIDIsIGVbaV0uY3VydmUgPSBBLCBlW2ldLkcgPSBJLCBlW2ldLm4gPSBiLCBlW2ldLmggPSBELCBlW2ldLm9pZCA9IGwsIGVbaV0uaW5mbyA9IGY7XG4gICAgZm9yICh2YXIgbSA9IDA7IG0gPCBvLmxlbmd0aDsgbSsrKVxuICAgICAgdFtvW21dXSA9IGk7XG4gIH07XG59KCk7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AxMjhyMVwiLCAxMjgsIFwiRkZGRkZGRkRGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZcIiwgXCJGRkZGRkZGREZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQ1wiLCBcIkU4NzU3OUMxMTA3OUY0M0REODI0OTkzQzJDRUU1RUQzXCIsIFwiRkZGRkZGRkUwMDAwMDAwMDc1QTMwRDFCOTAzOEExMTVcIiwgXCIxXCIsIFwiMTYxRkY3NTI4Qjg5OUIyRDBDMjg2MDdDQTUyQzVCODZcIiwgXCJDRjVBQzgzOTVCQUZFQjEzQzAyREEyOTJEREVEN0E4M1wiLCBbXSwgXCJcIiwgXCJzZWNwMTI4cjEgOiBTRUNHIGN1cnZlIG92ZXIgYSAxMjggYml0IHByaW1lIGZpZWxkXCIpO1xuYS5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoXCJzZWNwMTYwazFcIiwgMTYwLCBcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkFDNzNcIiwgXCIwXCIsIFwiN1wiLCBcIjAxMDAwMDAwMDAwMDAwMDAwMDAwMDFCOEZBMTZERkFCOUFDQTE2QjZCM1wiLCBcIjFcIiwgXCIzQjRDMzgyQ0UzN0FBMTkyQTQwMTlFNzYzMDM2RjRGNURENEQ3RUJCXCIsIFwiOTM4Q0Y5MzUzMThGRENFRDZCQzI4Mjg2NTMxNzMzQzNGMDNDNEZFRVwiLCBbXSwgXCJcIiwgXCJzZWNwMTYwazEgOiBTRUNHIGN1cnZlIG92ZXIgYSAxNjAgYml0IHByaW1lIGZpZWxkXCIpO1xuYS5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoXCJzZWNwMTYwcjFcIiwgMTYwLCBcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGN0ZGRkZGRkZcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjdGRkZGRkZDXCIsIFwiMUM5N0JFRkM1NEJEN0E4QjY1QUNGODlGODFENEQ0QURDNTY1RkE0NVwiLCBcIjAxMDAwMDAwMDAwMDAwMDAwMDAwMDFGNEM4RjkyN0FFRDNDQTc1MjI1N1wiLCBcIjFcIiwgXCI0QTk2QjU2ODhFRjU3MzI4NDY2NDY5ODk2OEMzOEJCOTEzQ0JGQzgyXCIsIFwiMjNBNjI4NTUzMTY4OTQ3RDU5RENDOTEyMDQyMzUxMzc3QUM1RkIzMlwiLCBbXSwgXCJcIiwgXCJzZWNwMTYwcjEgOiBTRUNHIGN1cnZlIG92ZXIgYSAxNjAgYml0IHByaW1lIGZpZWxkXCIpO1xuYS5jcnlwdG8uRUNQYXJhbWV0ZXJEQi5yZWdpc3QoXCJzZWNwMTkyazFcIiwgMTkyLCBcIkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRUUzN1wiLCBcIjBcIiwgXCIzXCIsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFMjZGMkZDMTcwRjY5NDY2QTc0REVGRDhEXCIsIFwiMVwiLCBcIkRCNEZGMTBFQzA1N0U5QUUyNkIwN0QwMjgwQjdGNDM0MURBNUQxQjFFQUUwNkM3RFwiLCBcIjlCMkYyRjZEOUM1NjI4QTc4NDQxNjNEMDE1QkU4NjM0NDA4MkFBODhEOTVFMkY5RFwiLCBbXSk7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AxOTJyMVwiLCAxOTIsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkZGRkZGRkZGRkZGXCIsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkZGRkZGRkZGRkZDXCIsIFwiNjQyMTA1MTlFNTlDODBFNzBGQTdFOUFCNzIyNDMwNDlGRUI4REVFQ0MxNDZCOUIxXCIsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGOTlERUY4MzYxNDZCQzlCMUI0RDIyODMxXCIsIFwiMVwiLCBcIjE4OERBODBFQjAzMDkwRjY3Q0JGMjBFQjQzQTE4ODAwRjRGRjBBRkQ4MkZGMTAxMlwiLCBcIjA3MTkyQjk1RkZDOERBNzg2MzEwMTFFRDZCMjRDREQ1NzNGOTc3QTExRTc5NDgxMVwiLCBbXSk7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AyMjRyMVwiLCAyMjQsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDFcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRVwiLCBcIkI0MDUwQTg1MEMwNEIzQUJGNTQxMzI1NjUwNDRCMEI3RDdCRkQ4QkEyNzBCMzk0MzIzNTVGRkI0XCIsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRjE2QTJFMEI4RjAzRTEzREQyOTQ1NUM1QzJBM0RcIiwgXCIxXCIsIFwiQjcwRTBDQkQ2QkI0QkY3RjMyMTM5MEI5NEEwM0MxRDM1NkMyMTEyMjM0MzI4MEQ2MTE1QzFEMjFcIiwgXCJCRDM3NjM4OEI1RjcyM0ZCNEMyMkRGRTZDRDQzNzVBMDVBMDc0NzY0NDRENTgxOTk4NTAwN0UzNFwiLCBbXSk7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AyNTZrMVwiLCAyNTYsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVGRkZGRkMyRlwiLCBcIjBcIiwgXCI3XCIsIFwiRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkVCQUFFRENFNkFGNDhBMDNCQkZEMjVFOENEMDM2NDE0MVwiLCBcIjFcIiwgXCI3OUJFNjY3RUY5RENCQkFDNTVBMDYyOTVDRTg3MEIwNzAyOUJGQ0RCMkRDRTI4RDk1OUYyODE1QjE2RjgxNzk4XCIsIFwiNDgzQURBNzcyNkEzQzQ2NTVEQTRGQkZDMEUxMTA4QThGRDE3QjQ0OEE2ODU1NDE5OUM0N0QwOEZGQjEwRDRCOFwiLCBbXSk7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3AyNTZyMVwiLCAyNTYsIFwiRkZGRkZGRkYwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMEZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRlwiLCBcIkZGRkZGRkZGMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkNcIiwgXCI1QUM2MzVEOEFBM0E5M0U3QjNFQkJENTU3Njk4ODZCQzY1MUQwNkIwQ0M1M0IwRjYzQkNFM0MzRTI3RDI2MDRCXCIsIFwiRkZGRkZGRkYwMDAwMDAwMEZGRkZGRkZGRkZGRkZGRkZCQ0U2RkFBREE3MTc5RTg0RjNCOUNBQzJGQzYzMjU1MVwiLCBcIjFcIiwgXCI2QjE3RDFGMkUxMkM0MjQ3RjhCQ0U2RTU2M0E0NDBGMjc3MDM3RDgxMkRFQjMzQTBGNEExMzk0NUQ4OThDMjk2XCIsIFwiNEZFMzQyRTJGRTFBN0Y5QjhFRTdFQjRBN0MwRjlFMTYyQkNFMzM1NzZCMzE1RUNFQ0JCNjQwNjgzN0JGNTFGNVwiLCBbXCJOSVNUIFAtMjU2XCIsIFwiUC0yNTZcIiwgXCJwcmltZTI1NnYxXCJdKTtcbmEuY3J5cHRvLkVDUGFyYW1ldGVyREIucmVnaXN0KFwic2VjcDM4NHIxXCIsIDM4NCwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkZcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZFRkZGRkZGRkYwMDAwMDAwMDAwMDAwMDAwRkZGRkZGRkNcIiwgXCJCMzMxMkZBN0UyM0VFN0U0OTg4RTA1NkJFM0Y4MkQxOTE4MUQ5QzZFRkU4MTQxMTIwMzE0MDg4RjUwMTM4NzVBQzY1NjM5OEQ4QTJFRDE5RDJBODVDOEVERDNFQzJBRUZcIiwgXCJGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZDNzYzNEQ4MUY0MzcyRERGNTgxQTBEQjI0OEIwQTc3QUVDRUMxOTZBQ0NDNTI5NzNcIiwgXCIxXCIsIFwiQUE4N0NBMjJCRThCMDUzNzhFQjFDNzFFRjMyMEFENzQ2RTFEM0I2MjhCQTc5Qjk4NTlGNzQxRTA4MjU0MkEzODU1MDJGMjVEQkY1NTI5NkMzQTU0NUUzODcyNzYwQUI3XCIsIFwiMzYxN2RlNGE5NjI2MmM2ZjVkOWU5OGJmOTI5MmRjMjlmOGY0MWRiZDI4OWExNDdjZTlkYTMxMTNiNWYwYjhjMDBhNjBiMWNlMWQ3ZTgxOWQ3YTQzMWQ3YzkwZWEwZTVmXCIsIFtcIk5JU1QgUC0zODRcIiwgXCJQLTM4NFwiXSk7XG5hLmNyeXB0by5FQ1BhcmFtZXRlckRCLnJlZ2lzdChcInNlY3A1MjFyMVwiLCA1MjEsIFwiMUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZcIiwgXCIxRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQ1wiLCBcIjA1MTk1M0VCOTYxOEUxQzlBMUY5MjlBMjFBMEI2ODU0MEVFQTJEQTcyNUI5OUIzMTVGM0I4QjQ4OTkxOEVGMTA5RTE1NjE5Mzk1MUVDN0U5MzdCMTY1MkMwQkQzQkIxQkYwNzM1NzNERjg4M0QyQzM0RjFFRjQ1MUZENDZCNTAzRjAwXCIsIFwiMUZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGQTUxODY4NzgzQkYyRjk2NkI3RkNDMDE0OEY3MDlBNUQwM0JCNUM5Qjg4OTlDNDdBRUJCNkZCNzFFOTEzODY0MDlcIiwgXCIxXCIsIFwiMDBDNjg1OEUwNkI3MDQwNEU5Q0Q5RTNFQ0I2NjIzOTVCNDQyOUM2NDgxMzkwNTNGQjUyMUY4MjhBRjYwNkI0RDNEQkFBMTRCNUU3N0VGRTc1OTI4RkUxREMxMjdBMkZGQThERTMzNDhCM0MxODU2QTQyOUJGOTdFN0UzMUMyRTVCRDY2XCIsIFwiMDExODM5Mjk2YTc4OWEzYmMwMDQ1YzhhNWZiNDJjN2QxYmQ5OThmNTQ0NDk1NzliNDQ2ODE3YWZiZDE3MjczZTY2MmM5N2VlNzI5OTVlZjQyNjQwYzU1MGI5MDEzZmFkMDc2MTM1M2M3MDg2YTI3MmMyNDA4OGJlOTQ3NjlmZDE2NjUwXCIsIFtcIk5JU1QgUC01MjFcIiwgXCJQLTUyMVwiXSk7XG4odHlwZW9mIGEgPiBcInVcIiB8fCAhYSkgJiYgKGEgPSB7fSk7XG4odHlwZW9mIGEuY3J5cHRvID4gXCJ1XCIgfHwgIWEuY3J5cHRvKSAmJiAoYS5jcnlwdG8gPSB7fSk7XG5hLmNyeXB0by5EU0EgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBWO1xuICBlLmdldFZieUxpc3Q7XG4gIHZhciB0ID0gZS5nZXRWYnlMaXN0RXgsIHIgPSBlLmlzQVNOMUhFWCwgaSA9IFI7XG4gIHRoaXMucCA9IG51bGwsIHRoaXMucSA9IG51bGwsIHRoaXMuZyA9IG51bGwsIHRoaXMueSA9IG51bGwsIHRoaXMueCA9IG51bGwsIHRoaXMudHlwZSA9IFwiRFNBXCIsIHRoaXMuaXNQcml2YXRlID0gITEsIHRoaXMuaXNQdWJsaWMgPSAhMSwgdGhpcy5zZXRQcml2YXRlID0gZnVuY3Rpb24ocywgbiwgaCwgdSwgcCkge1xuICAgIHRoaXMuaXNQcml2YXRlID0gITAsIHRoaXMucCA9IHMsIHRoaXMucSA9IG4sIHRoaXMuZyA9IGgsIHRoaXMueSA9IHUsIHRoaXMueCA9IHA7XG4gIH0sIHRoaXMuc2V0UHJpdmF0ZUhleCA9IGZ1bmN0aW9uKHMsIG4sIGgsIHUsIHApIHtcbiAgICB2YXIgYywgeSwgdiwgbywgbDtcbiAgICBjID0gbmV3IFIocywgMTYpLCB5ID0gbmV3IFIobiwgMTYpLCB2ID0gbmV3IFIoaCwgMTYpLCB0eXBlb2YgdSA9PSBcInN0cmluZ1wiICYmIHUubGVuZ3RoID4gMSA/IG8gPSBuZXcgUih1LCAxNikgOiBvID0gbnVsbCwgbCA9IG5ldyBSKHAsIDE2KSwgdGhpcy5zZXRQcml2YXRlKGMsIHksIHYsIG8sIGwpO1xuICB9LCB0aGlzLnNldFB1YmxpYyA9IGZ1bmN0aW9uKHMsIG4sIGgsIHUpIHtcbiAgICB0aGlzLmlzUHVibGljID0gITAsIHRoaXMucCA9IHMsIHRoaXMucSA9IG4sIHRoaXMuZyA9IGgsIHRoaXMueSA9IHUsIHRoaXMueCA9IG51bGw7XG4gIH0sIHRoaXMuc2V0UHVibGljSGV4ID0gZnVuY3Rpb24ocywgbiwgaCwgdSkge1xuICAgIHZhciBwLCBjLCB5LCB2O1xuICAgIHAgPSBuZXcgUihzLCAxNiksIGMgPSBuZXcgUihuLCAxNiksIHkgPSBuZXcgUihoLCAxNiksIHYgPSBuZXcgUih1LCAxNiksIHRoaXMuc2V0UHVibGljKHAsIGMsIHksIHYpO1xuICB9LCB0aGlzLnNpZ25XaXRoTWVzc2FnZUhhc2ggPSBmdW5jdGlvbihzKSB7XG4gICAgdmFyIG4gPSB0aGlzLnAsIGggPSB0aGlzLnEsIHUgPSB0aGlzLmc7XG4gICAgdGhpcy55O1xuICAgIHZhciBwID0gdGhpcy54LCBjID0gYS5jcnlwdG8uVXRpbC5nZXRSYW5kb21CaWdJbnRlZ2VyTWluVG9NYXgoUi5PTkUuYWRkKFIuT05FKSwgaC5zdWJ0cmFjdChSLk9ORSkpLCB5ID0gcy5zdWJzdHIoMCwgaC5iaXRMZW5ndGgoKSAvIDQpLCB2ID0gbmV3IFIoeSwgMTYpLCBvID0gdS5tb2RQb3coYywgbikubW9kKGgpLCBsID0gYy5tb2RJbnZlcnNlKGgpLm11bHRpcGx5KHYuYWRkKHAubXVsdGlwbHkobykpKS5tb2QoaCksIGYgPSBhLmFzbjEuQVNOMVV0aWwuanNvblRvQVNOMUhFWCh7IHNlcTogW3sgaW50OiB7IGJpZ2ludDogbyB9IH0sIHsgaW50OiB7IGJpZ2ludDogbCB9IH1dIH0pO1xuICAgIHJldHVybiBmO1xuICB9LCB0aGlzLnZlcmlmeVdpdGhNZXNzYWdlSGFzaCA9IGZ1bmN0aW9uKHMsIG4pIHtcbiAgICB2YXIgaCA9IHRoaXMucCwgdSA9IHRoaXMucSwgcCA9IHRoaXMuZywgYyA9IHRoaXMueSwgeSA9IHRoaXMucGFyc2VBU04xU2lnbmF0dXJlKG4pLCB2ID0geVswXSwgbyA9IHlbMV0sIGwgPSBzLnN1YnN0cigwLCB1LmJpdExlbmd0aCgpIC8gNCksIGYgPSBuZXcgUihsLCAxNik7XG4gICAgaWYgKFIuWkVSTy5jb21wYXJlVG8odikgPiAwIHx8IHYuY29tcGFyZVRvKHUpID4gMCB8fCBSLlpFUk8uY29tcGFyZVRvKG8pID49IDAgfHwgby5jb21wYXJlVG8odSkgPiAwKVxuICAgICAgdGhyb3cgXCJpbnZhbGlkIERTQSBzaWduYXR1cmVcIjtcbiAgICB2YXIgZCA9IG8ubW9kSW52ZXJzZSh1KSwgZyA9IGYubXVsdGlwbHkoZCkubW9kKHUpLCBTID0gdi5tdWx0aXBseShkKS5tb2QodSksIGIgPSBwLm1vZFBvdyhnLCBoKS5tdWx0aXBseShjLm1vZFBvdyhTLCBoKSkubW9kKGgpLm1vZCh1KTtcbiAgICByZXR1cm4gYi5jb21wYXJlVG8odikgPT0gMDtcbiAgfSwgdGhpcy5wYXJzZUFTTjFTaWduYXR1cmUgPSBmdW5jdGlvbihzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBuID0gbmV3IGkodChzLCAwLCBbMF0sIFwiMDJcIiksIDE2KSwgaCA9IG5ldyBpKHQocywgMCwgWzFdLCBcIjAyXCIpLCAxNik7XG4gICAgICByZXR1cm4gW24sIGhdO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIEFTTi4xIERTQSBzaWduYXR1cmVcIik7XG4gICAgfVxuICB9LCB0aGlzLnJlYWRQS0NTNVBydktleUhleCA9IGZ1bmN0aW9uKHMpIHtcbiAgICB2YXIgbiwgaCwgdSwgcCwgYztcbiAgICBpZiAocihzKSA9PT0gITEpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgICB0cnkge1xuICAgICAgbiA9IHQocywgMCwgWzFdLCBcIjAyXCIpLCBoID0gdChzLCAwLCBbMl0sIFwiMDJcIiksIHUgPSB0KHMsIDAsIFszXSwgXCIwMlwiKSwgcCA9IHQocywgMCwgWzRdLCBcIjAyXCIpLCBjID0gdChzLCAwLCBbNV0sIFwiMDJcIik7XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUyMxLzUgcGxhaW4gRFNBIHByaXZhdGUga2V5XCIpO1xuICAgIH1cbiAgICB0aGlzLnNldFByaXZhdGVIZXgobiwgaCwgdSwgcCwgYyk7XG4gIH0sIHRoaXMucmVhZFBLQ1M4UHJ2S2V5SGV4ID0gZnVuY3Rpb24ocykge1xuICAgIHZhciBuLCBoLCB1LCBwO1xuICAgIGlmIChyKHMpID09PSAhMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO1xuICAgIHRyeSB7XG4gICAgICBuID0gdChzLCAwLCBbMSwgMSwgMF0sIFwiMDJcIiksIGggPSB0KHMsIDAsIFsxLCAxLCAxXSwgXCIwMlwiKSwgdSA9IHQocywgMCwgWzEsIDEsIDJdLCBcIjAyXCIpLCBwID0gdChzLCAwLCBbMiwgMF0sIFwiMDJcIik7XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUyM4IHBsYWluIERTQSBwcml2YXRlIGtleVwiKTtcbiAgICB9XG4gICAgdGhpcy5zZXRQcml2YXRlSGV4KG4sIGgsIHUsIG51bGwsIHApO1xuICB9LCB0aGlzLnJlYWRQS0NTOFB1YktleUhleCA9IGZ1bmN0aW9uKHMpIHtcbiAgICB2YXIgbiwgaCwgdSwgcDtcbiAgICBpZiAocihzKSA9PT0gITEpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgICB0cnkge1xuICAgICAgbiA9IHQocywgMCwgWzAsIDEsIDBdLCBcIjAyXCIpLCBoID0gdChzLCAwLCBbMCwgMSwgMV0sIFwiMDJcIiksIHUgPSB0KHMsIDAsIFswLCAxLCAyXSwgXCIwMlwiKSwgcCA9IHQocywgMCwgWzEsIDBdLCBcIjAyXCIpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1MjOCBEU0EgcHVibGljIGtleVwiKTtcbiAgICB9XG4gICAgdGhpcy5zZXRQdWJsaWNIZXgobiwgaCwgdSwgcCk7XG4gIH0sIHRoaXMucmVhZENlcnRQdWJLZXlIZXggPSBmdW5jdGlvbihzLCBuKSB7XG4gICAgdmFyIGgsIHUsIHAsIGM7XG4gICAgaWYgKHIocykgPT09ICExKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IEFTTi4xIGhleCBzdHJpbmdcIik7XG4gICAgdHJ5IHtcbiAgICAgIGggPSB0KHMsIDAsIFswLCA1LCAwLCAxLCAwXSwgXCIwMlwiKSwgdSA9IHQocywgMCwgWzAsIDUsIDAsIDEsIDFdLCBcIjAyXCIpLCBwID0gdChzLCAwLCBbMCwgNSwgMCwgMSwgMl0sIFwiMDJcIiksIGMgPSB0KHMsIDAsIFswLCA1LCAxLCAwXSwgXCIwMlwiKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBYLjUwOSBjZXJ0aWZpY2F0ZSBEU0EgcHVibGljIGtleVwiKTtcbiAgICB9XG4gICAgdGhpcy5zZXRQdWJsaWNIZXgoaCwgdSwgcCwgYyk7XG4gIH07XG59O1xudmFyIGsgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7XG4gIHZhciBlID0gZnVuY3Rpb24oZiwgZCwgZykge1xuICAgIHJldHVybiBpKEsuQUVTLCBmLCBkLCBnKTtcbiAgfSwgdCA9IGZ1bmN0aW9uKGYsIGQsIGcpIHtcbiAgICByZXR1cm4gaShLLlRyaXBsZURFUywgZiwgZCwgZyk7XG4gIH0sIHIgPSBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgcmV0dXJuIGkoSy5ERVMsIGYsIGQsIGcpO1xuICB9LCBpID0gZnVuY3Rpb24oZiwgZCwgZywgUykge1xuICAgIHZhciBiID0gSy5lbmMuSGV4LnBhcnNlKGQpLCBEID0gSy5lbmMuSGV4LnBhcnNlKGcpLCBBID0gSy5lbmMuSGV4LnBhcnNlKFMpLCBJID0ge307XG4gICAgSS5rZXkgPSBELCBJLml2ID0gQSwgSS5jaXBoZXJ0ZXh0ID0gYjtcbiAgICB2YXIgbSA9IGYuZGVjcnlwdChJLCBELCB7IGl2OiBBIH0pO1xuICAgIHJldHVybiBLLmVuYy5IZXguc3RyaW5naWZ5KG0pO1xuICB9LCBzID0gZnVuY3Rpb24oZiwgZCwgZykge1xuICAgIHJldHVybiB1KEsuQUVTLCBmLCBkLCBnKTtcbiAgfSwgbiA9IGZ1bmN0aW9uKGYsIGQsIGcpIHtcbiAgICByZXR1cm4gdShLLlRyaXBsZURFUywgZiwgZCwgZyk7XG4gIH0sIGggPSBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgcmV0dXJuIHUoSy5ERVMsIGYsIGQsIGcpO1xuICB9LCB1ID0gZnVuY3Rpb24oZiwgZCwgZywgUykge1xuICAgIHZhciBiID0gSy5lbmMuSGV4LnBhcnNlKGQpLCBEID0gSy5lbmMuSGV4LnBhcnNlKGcpLCBBID0gSy5lbmMuSGV4LnBhcnNlKFMpLCBJID0gZi5lbmNyeXB0KGIsIEQsIHsgaXY6IEEgfSksIG0gPSBLLmVuYy5IZXgucGFyc2UoSS50b1N0cmluZygpKSwgRSA9IEsuZW5jLkJhc2U2NC5zdHJpbmdpZnkobSk7XG4gICAgcmV0dXJuIEU7XG4gIH0sIHAgPSB7IFwiQUVTLTI1Ni1DQkNcIjogeyBwcm9jOiBlLCBlcHJvYzogcywga2V5bGVuOiAzMiwgaXZsZW46IDE2IH0sIFwiQUVTLTE5Mi1DQkNcIjogeyBwcm9jOiBlLCBlcHJvYzogcywga2V5bGVuOiAyNCwgaXZsZW46IDE2IH0sIFwiQUVTLTEyOC1DQkNcIjogeyBwcm9jOiBlLCBlcHJvYzogcywga2V5bGVuOiAxNiwgaXZsZW46IDE2IH0sIFwiREVTLUVERTMtQ0JDXCI6IHsgcHJvYzogdCwgZXByb2M6IG4sIGtleWxlbjogMjQsIGl2bGVuOiA4IH0sIFwiREVTLUNCQ1wiOiB7IHByb2M6IHIsIGVwcm9jOiBoLCBrZXlsZW46IDgsIGl2bGVuOiA4IH0gfSwgYyA9IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgZCA9IEsubGliLldvcmRBcnJheS5yYW5kb20oZiksIGcgPSBLLmVuYy5IZXguc3RyaW5naWZ5KGQpO1xuICAgIHJldHVybiBnO1xuICB9LCB5ID0gZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0ge30sIGcgPSBmLm1hdGNoKG5ldyBSZWdFeHAoXCJERUstSW5mbzogKFteLF0rKSwoWzAtOUEtRmEtZl0rKVwiLCBcIm1cIikpO1xuICAgIGcgJiYgKGQuY2lwaGVyID0gZ1sxXSwgZC5pdnNhbHQgPSBnWzJdKTtcbiAgICB2YXIgUyA9IGYubWF0Y2gobmV3IFJlZ0V4cChcIi0tLS0tQkVHSU4gKFtBLVpdKykgUFJJVkFURSBLRVktLS0tLVwiKSk7XG4gICAgUyAmJiAoZC50eXBlID0gU1sxXSk7XG4gICAgdmFyIGIgPSAtMSwgRCA9IDA7XG4gICAgZi5pbmRleE9mKGBcXHJcblxcclxuYCkgIT0gLTEgJiYgKGIgPSBmLmluZGV4T2YoYFxcclxuXFxyXG5gKSwgRCA9IDIpLCBmLmluZGV4T2YoYFxuXG5gKSAhPSAtMSAmJiAoYiA9IGYuaW5kZXhPZihgXG5cbmApLCBEID0gMSk7XG4gICAgdmFyIEEgPSBmLmluZGV4T2YoXCItLS0tLUVORFwiKTtcbiAgICBpZiAoYiAhPSAtMSAmJiBBICE9IC0xKSB7XG4gICAgICB2YXIgSSA9IGYuc3Vic3RyaW5nKGIgKyBEICogMiwgQSAtIEQpO1xuICAgICAgSSA9IEkucmVwbGFjZSgvXFxzKy9nLCBcIlwiKSwgZC5kYXRhID0gSTtcbiAgICB9XG4gICAgcmV0dXJuIGQ7XG4gIH0sIHYgPSBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgZm9yICh2YXIgUyA9IGcuc3Vic3RyaW5nKDAsIDE2KSwgYiA9IEsuZW5jLkhleC5wYXJzZShTKSwgRCA9IEsuZW5jLlV0ZjgucGFyc2UoZCksIEEgPSBwW2ZdLmtleWxlbiArIHBbZl0uaXZsZW4sIEkgPSBcIlwiLCBtID0gbnVsbDsgOyApIHtcbiAgICAgIHZhciBFID0gSy5hbGdvLk1ENS5jcmVhdGUoKTtcbiAgICAgIGlmIChtICE9IG51bGwgJiYgRS51cGRhdGUobSksIEUudXBkYXRlKEQpLCBFLnVwZGF0ZShiKSwgbSA9IEUuZmluYWxpemUoKSwgSSA9IEkgKyBLLmVuYy5IZXguc3RyaW5naWZ5KG0pLCBJLmxlbmd0aCA+PSBBICogMilcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHZhciB3ID0ge307XG4gICAgcmV0dXJuIHcua2V5aGV4ID0gSS5zdWJzdHIoMCwgcFtmXS5rZXlsZW4gKiAyKSwgdy5pdmhleCA9IEkuc3Vic3RyKHBbZl0ua2V5bGVuICogMiwgcFtmXS5pdmxlbiAqIDIpLCB3O1xuICB9LCBvID0gZnVuY3Rpb24oZiwgZCwgZywgUykge1xuICAgIHZhciBiID0gSy5lbmMuQmFzZTY0LnBhcnNlKGYpLCBEID0gSy5lbmMuSGV4LnN0cmluZ2lmeShiKSwgQSA9IHBbZF0ucHJvYywgSSA9IEEoRCwgZywgUyk7XG4gICAgcmV0dXJuIEk7XG4gIH0sIGwgPSBmdW5jdGlvbihmLCBkLCBnLCBTKSB7XG4gICAgdmFyIGIgPSBwW2RdLmVwcm9jLCBEID0gYihmLCBnLCBTKTtcbiAgICByZXR1cm4gRDtcbiAgfTtcbiAgcmV0dXJuIHsgdmVyc2lvbjogXCIxLjAuMFwiLCBwYXJzZVBLQ1M1UEVNOiBmdW5jdGlvbihmKSB7XG4gICAgcmV0dXJuIHkoZik7XG4gIH0sIGdldEtleUFuZFVudXNlZEl2QnlQYXNzY29kZUFuZEl2c2FsdDogZnVuY3Rpb24oZiwgZCwgZykge1xuICAgIHJldHVybiB2KGYsIGQsIGcpO1xuICB9LCBkZWNyeXB0S2V5QjY0OiBmdW5jdGlvbihmLCBkLCBnLCBTKSB7XG4gICAgcmV0dXJuIG8oZiwgZCwgZywgUyk7XG4gIH0sIGdldERlY3J5cHRlZEtleUhleDogZnVuY3Rpb24oZiwgZCkge1xuICAgIHZhciBnID0geShmKSwgUyA9IGcuY2lwaGVyLCBiID0gZy5pdnNhbHQsIEQgPSBnLmRhdGEsIEEgPSB2KFMsIGQsIGIpLCBJID0gQS5rZXloZXgsIG0gPSBvKEQsIFMsIEksIGIpO1xuICAgIHJldHVybiBtO1xuICB9LCBnZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXg6IGZ1bmN0aW9uKGYsIGQsIGcsIFMsIGIpIHtcbiAgICB2YXIgeCA9IFwiXCI7XG4gICAgaWYgKCh0eXBlb2YgUyA+IFwidVwiIHx8IFMgPT0gbnVsbCkgJiYgKFMgPSBcIkFFUy0yNTYtQ0JDXCIpLCB0eXBlb2YgcFtTXSA+IFwidVwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiS0VZVVRJTCB1bnN1cHBvcnRlZCBhbGdvcml0aG06IFwiICsgUyk7XG4gICAgaWYgKHR5cGVvZiBiID4gXCJ1XCIgfHwgYiA9PSBudWxsKSB7XG4gICAgICB2YXIgRCA9IHBbU10uaXZsZW4sIEEgPSBjKEQpO1xuICAgICAgYiA9IEEudG9VcHBlckNhc2UoKTtcbiAgICB9XG4gICAgdmFyIEkgPSB2KFMsIGcsIGIpLCBtID0gSS5rZXloZXgsIEUgPSBsKGQsIFMsIG0sIGIpLCB3ID0gRS5yZXBsYWNlKC8oLns2NH0pL2csIGAkMVxcclxuYCksIHggPSBcIi0tLS0tQkVHSU4gXCIgKyBmICsgYCBQUklWQVRFIEtFWS0tLS0tXFxyXG5gO1xuICAgIHJldHVybiB4ICs9IGBQcm9jLVR5cGU6IDQsRU5DUllQVEVEXFxyXG5gLCB4ICs9IFwiREVLLUluZm86IFwiICsgUyArIFwiLFwiICsgYiArIGBcXHJcbmAsIHggKz0gYFxcclxuYCwgeCArPSB3LCB4ICs9IGBcXHJcbi0tLS0tRU5EIGAgKyBmICsgYCBQUklWQVRFIEtFWS0tLS0tXFxyXG5gLCB4O1xuICB9LCBnZXRFbmNyeXB0ZWRQS0NTOFBFTTogZnVuY3Rpb24oZiwgZCwgZykge1xuICAgIHZhciBTID0gdGhpcy5nZXRFbmNyeXB0ZWRQS0NTOEhleChmLCBkLCBnKTtcbiAgICByZXR1cm4gZGUoUywgXCJFTkNSWVBURUQgUFJJVkFURSBLRVlcIik7XG4gIH0sIGdldEVuY3J5cHRlZFBLQ1M4SGV4OiBmdW5jdGlvbihmLCBkLCBnKSB7XG4gICAgdmFyIFM7XG4gICAgZyA9PSBudWxsIHx8IGcgPT0gbnVsbCA/IFMgPSB7fSA6IFMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGcpKSwgUy5wbGFpbiA9IGYsIHRoaXMuaW5pdFBCRVMyUGFyYW0oUyksIHRoaXMuZW5jcnlwdFBCRVMyUGFyYW0oUywgZCk7XG4gICAgdmFyIGIgPSB0aGlzLmdlbmVyYXRlUEJFUzJBU04xUGFyYW0oUyk7XG4gICAgcmV0dXJuIGEuYXNuMS5BU04xVXRpbC5uZXdPYmplY3QoYikudG9oZXgoKTtcbiAgfSwgaW5pdFBCRVMyUGFyYW06IGZ1bmN0aW9uKGYpIHtcbiAgICBpZiAoSihmLCBcImVuY2FsZ1wiKSA9PSBudWxsICYmIChmLmVuY2FsZyA9IFwiYWVzMjU2LUNCQ1wiKSwgSihmLCBcIml0ZXJcIikgPT0gbnVsbCAmJiAoZi5pdGVyID0gMjA0OCksIEooZiwgXCJwcmZcIikgPT0gbnVsbCAmJiAoZi5wcmYgPSBcImhtYWNXaXRoU0hBMjU2XCIpLCBKKGYsIFwic2FsdFwiKSA9PSBudWxsICYmIChmLnNhbHQgPSBLLmVuYy5IZXguc3RyaW5naWZ5KEsubGliLldvcmRBcnJheS5yYW5kb20oOCkpKSwgSihmLCBcImVuY2l2XCIpID09IG51bGwpIHtcbiAgICAgIHZhciBkO1xuICAgICAgZi5lbmNhbGcgPT0gXCJkZXMtRURFMy1DQkNcIiAmJiAoZCA9IDgpLCBmLmVuY2FsZyA9PSBcImFlczEyOC1DQkNcIiAmJiAoZCA9IDE2KSwgZi5lbmNhbGcgPT0gXCJhZXMyNTYtQ0JDXCIgJiYgKGQgPSAxNiksIGYuZW5jaXYgPSBLLmVuYy5IZXguc3RyaW5naWZ5KEsubGliLldvcmRBcnJheS5yYW5kb20oZCkpO1xuICAgIH1cbiAgfSwgZW5jcnlwdFBCRVMyUGFyYW06IGZ1bmN0aW9uKGYsIGQpIHtcbiAgICB2YXIgZyA9IGsuZ2V0REtGcm9tUEJFUzJQYXJhbShmLCBkKTtcbiAgICB0cnkge1xuICAgICAgdmFyIFMgPSBhLmNyeXB0by5DaXBoZXIuZW5jcnlwdChmLnBsYWluLCBnLCBmLmVuY2FsZywgeyBpdjogZi5lbmNpdiB9KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImVuY3J5cHQgZXJyb3I6IFwiICsgZi5wbGFpbiArIFwiIFwiICsgZyArIFwiIFwiICsgZi5lbmNhbGcgKyBcIiBcIiArIGYuZW5jaXYpO1xuICAgIH1cbiAgICBmLmVuYyA9IFM7XG4gIH0sIGdlbmVyYXRlUEJFUzJBU04xUGFyYW06IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgZCA9IHsgc2VxOiBbeyBzZXE6IFt7IG9pZDogXCJwa2NzNVBCRVMyXCIgfSwgeyBzZXE6IFt7IHNlcTogW3sgb2lkOiBcInBrY3M1UEJLREYyXCIgfSwgeyBzZXE6IFt7IG9jdHN0cjogeyBoZXg6IGYuc2FsdCB9IH0sIHsgaW50OiB7IGhleDogeG4oZi5pdGVyKSB9IH1dIH1dIH0sIHsgc2VxOiBbeyBvaWQ6IGYuZW5jYWxnIH0sIHsgb2N0c3RyOiB7IGhleDogZi5lbmNpdiB9IH1dIH1dIH1dIH0sIHsgb2N0c3RyOiB7IGhleDogZi5lbmMgfSB9XSB9O1xuICAgIHJldHVybiBmLnByZiAhPSBcImhtYWNXaXRoU0hBMVwiICYmIGQuc2VxWzBdLnNlcVsxXS5zZXFbMF0uc2VxWzFdLnNlcS5wdXNoKHsgc2VxOiBbeyBvaWQ6IGYucHJmIH0sIHsgbnVsbDogXCJcIiB9XSB9KSwgZDtcbiAgfSwgcGFyc2VIZXhPZkVuY3J5cHRlZFBLQ1M4OiBmdW5jdGlvbihmKSB7XG4gICAgdmFyIGQgPSBWLCBnID0gZC5nZXRDaGlsZElkeCwgUyA9IGQuZ2V0ViwgYiA9IHt9LCBEID0gZyhmLCAwKTtcbiAgICBpZiAoRC5sZW5ndGggIT0gMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDApLml0ZW1zICE9IDI6IFwiICsgRC5sZW5ndGgpO1xuICAgIGIuY2lwaGVydGV4dCA9IFMoZiwgRFsxXSk7XG4gICAgdmFyIEEgPSBnKGYsIERbMF0pO1xuICAgIGlmIChBLmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wKS5pdGVtcyAhPSAyOiBcIiArIEEubGVuZ3RoKTtcbiAgICBpZiAoUyhmLCBBWzBdKSAhPSBcIjJhODY0ODg2ZjcwZDAxMDUwZFwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhpcyBvbmx5IHN1cHBvcnRzIHBrY3M1UEJFUzJcIik7XG4gICAgdmFyIEkgPSBnKGYsIEFbMV0pO1xuICAgIGlmIChBLmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGZvcm1hdDogU0VRVUVOQ0UoMC4wLjEpLml0ZW1zICE9IDI6IFwiICsgSS5sZW5ndGgpO1xuICAgIHZhciBtID0gZyhmLCBJWzFdKTtcbiAgICBpZiAobS5sZW5ndGggIT0gMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjEpLml0ZW1zICE9IDI6IFwiICsgbS5sZW5ndGgpO1xuICAgIGlmIChTKGYsIG1bMF0pICE9IFwiMmE4NjQ4ODZmNzBkMDMwN1wiKVxuICAgICAgdGhyb3cgXCJ0aGlzIG9ubHkgc3VwcG9ydHMgVHJpcGxlREVTXCI7XG4gICAgYi5lbmNyeXB0aW9uU2NoZW1lQWxnID0gXCJUcmlwbGVERVNcIiwgYi5lbmNyeXB0aW9uU2NoZW1lSVYgPSBTKGYsIG1bMV0pO1xuICAgIHZhciBFID0gZyhmLCBJWzBdKTtcbiAgICBpZiAoRS5sZW5ndGggIT0gMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBmb3JtYXQ6IFNFUVVFTkNFKDAuMC4xLjApLml0ZW1zICE9IDI6IFwiICsgRS5sZW5ndGgpO1xuICAgIGlmIChTKGYsIEVbMF0pICE9IFwiMmE4NjQ4ODZmNzBkMDEwNTBjXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aGlzIG9ubHkgc3VwcG9ydHMgcGtjczVQQktERjJcIik7XG4gICAgdmFyIHcgPSBnKGYsIEVbMV0pO1xuICAgIGlmICh3Lmxlbmd0aCA8IDIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgZm9ybWF0OiBTRVFVRU5DRSgwLjAuMS4wLjEpLml0ZW1zIDwgMjogXCIgKyB3Lmxlbmd0aCk7XG4gICAgYi5wYmtkZjJTYWx0ID0gUyhmLCB3WzBdKTtcbiAgICB2YXIgeCA9IFMoZiwgd1sxXSk7XG4gICAgdHJ5IHtcbiAgICAgIGIucGJrZGYySXRlciA9IHBhcnNlSW50KHgsIDE2KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBmb3JtYXQgcGJrZGYySXRlcjogXCIgKyB4KTtcbiAgICB9XG4gICAgcmV0dXJuIGI7XG4gIH0sIGdldFBCS0RGMktleUhleEZyb21QYXJhbTogZnVuY3Rpb24oZiwgZCkge1xuICAgIHZhciBnID0gSy5lbmMuSGV4LnBhcnNlKGYucGJrZGYyU2FsdCksIFMgPSBmLnBia2RmMkl0ZXIsIGIgPSBLLlBCS0RGMihkLCBnLCB7IGtleVNpemU6IDE5MiAvIDMyLCBpdGVyYXRpb25zOiBTIH0pLCBEID0gSy5lbmMuSGV4LnN0cmluZ2lmeShiKTtcbiAgICByZXR1cm4gRDtcbiAgfSwgX2dldFBsYWluUEtDUzhIZXhGcm9tRW5jcnlwdGVkUEtDUzhQRU06IGZ1bmN0aW9uKGYsIGQpIHtcbiAgICB2YXIgZyA9IGllKGYsIFwiRU5DUllQVEVEIFBSSVZBVEUgS0VZXCIpLCBTID0gdGhpcy5wYXJzZUhleE9mRW5jcnlwdGVkUEtDUzgoZyksIGIgPSBrLmdldFBCS0RGMktleUhleEZyb21QYXJhbShTLCBkKSwgRCA9IHt9O1xuICAgIEQuY2lwaGVydGV4dCA9IEsuZW5jLkhleC5wYXJzZShTLmNpcGhlcnRleHQpO1xuICAgIHZhciBBID0gSy5lbmMuSGV4LnBhcnNlKGIpLCBJID0gSy5lbmMuSGV4LnBhcnNlKFMuZW5jcnlwdGlvblNjaGVtZUlWKSwgbSA9IEsuVHJpcGxlREVTLmRlY3J5cHQoRCwgQSwgeyBpdjogSSB9KSwgRSA9IEsuZW5jLkhleC5zdHJpbmdpZnkobSk7XG4gICAgcmV0dXJuIEU7XG4gIH0sIHBhcnNlUEJFUzI6IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgZCA9IFYucGFyc2UoZik7XG4gICAgaWYgKEooZCwgXCJzZXEuMC5zZXEuMC5vaWRcIikgIT0gXCJwa2NzNVBCRVMyXCIgfHwgSihkLCBcInNlcS4wLnNlcS4xLnNlcS4wLnNlcS4wLm9pZFwiKSAhPSBcInBrY3M1UEJLREYyXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgcGtjczVQQkVTMiBhbmQgcGtjczVQQktERjIgdXNlZFwiKTtcbiAgICB2YXIgZyA9IEooZCwgXCJzZXEuMC5zZXEuMS5zZXEuMC5zZXEuMS5zZXFcIik7XG4gICAgaWYgKGcgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlBCS0RGMiBwYXJhbWV0ZXIgbm90IGZvdW5kXCIpO1xuICAgIHZhciBTID0gSihnLCBcIjAub2N0c3RyLmhleFwiKSwgYiA9IEooZywgXCIxLmludC5oZXhcIiksIEQgPSBKKGcsIFwiMi5zZXEuMC5vaWRcIiwgXCJobWFjV2l0aFNIQTFcIiksIEEgPSAtMTtcbiAgICB0cnkge1xuICAgICAgQSA9IHBhcnNlSW50KGIsIDE2KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIml0ZXIgbm90IHByb3BlciB2YWx1ZVwiKTtcbiAgICB9XG4gICAgdmFyIEkgPSBKKGQsIFwic2VxLjAuc2VxLjEuc2VxLjEuc2VxLjAub2lkXCIpLCBtID0gSihkLCBcInNlcS4wLnNlcS4xLnNlcS4xLnNlcS4xLm9jdHN0ci5oZXhcIiksIEUgPSBKKGQsIFwic2VxLjEub2N0c3RyLmhleFwiKTtcbiAgICBpZiAoSSA9PSBudWxsIHx8IG0gPT0gbnVsbCB8fCBFID09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlbmNhbGcsIGVuY2l2IG9yIGVuYyBpcyB1bmRlZmluZWRcIik7XG4gICAgdmFyIHcgPSB7IHNhbHQ6IFMsIGl0ZXI6IEEsIHByZjogRCwgZW5jYWxnOiBJLCBlbmNpdjogbSwgZW5jOiBFIH07XG4gICAgcmV0dXJuIHc7XG4gIH0sIGdldERLRnJvbVBCRVMyUGFyYW06IGZ1bmN0aW9uKGYsIGQpIHtcbiAgICB2YXIgZyA9IHsgaG1hY1dpdGhTSEExOiBLLmFsZ28uU0hBMSwgaG1hY1dpdGhTSEEyMjQ6IEsuYWxnby5TSEEyMjQsIGhtYWNXaXRoU0hBMjU2OiBLLmFsZ28uU0hBMjU2LCBobWFjV2l0aFNIQTM4NDogSy5hbGdvLlNIQTM4NCwgaG1hY1dpdGhTSEE1MTI6IEsuYWxnby5TSEE1MTIgfSwgUyA9IHsgXCJkZXMtRURFMy1DQkNcIjogMTkyIC8gMzIsIFwiYWVzMTI4LUNCQ1wiOiAxMjggLyAzMiwgXCJhZXMyNTYtQ0JDXCI6IDI1NiAvIDMyIH0sIGIgPSBnW2YucHJmXTtcbiAgICBpZiAoYiA9PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgcHJmXCIpO1xuICAgIHZhciBEID0gU1tmLmVuY2FsZ107XG4gICAgaWYgKEQgPT0gbnVsbClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGVuY2FsZ1wiKTtcbiAgICB2YXIgQSA9IEsuZW5jLkhleC5wYXJzZShmLnNhbHQpLCBJID0gZi5pdGVyO1xuICAgIHRyeSB7XG4gICAgICB2YXIgbSA9IEsuUEJLREYyKGQsIEEsIHsga2V5U2l6ZTogRCwgaXRlcmF0aW9uczogSSwgaGFzaGVyOiBiIH0pO1xuICAgICAgcmV0dXJuIEsuZW5jLkhleC5zdHJpbmdpZnkobSk7XG4gICAgfSBjYXRjaCAoRSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUEJLREYyIGVycm9yOiBcIiArIEUgKyBcIiBcIiArIEpTT04uc3RyaW5naWZ5KGYpICsgXCIgXCIgKyBkKTtcbiAgICB9XG4gIH0sIGdldFBsYWluSGV4RnJvbUVuY3J5cHRlZFBLQ1M4UEVNOiBmdW5jdGlvbihmLCBkKSB7XG4gICAgaWYgKGYuaW5kZXhPZihcIkJFR0lOIEVOQ1JZUFRFRCBQUklWQVRFIEtFWVwiKSA9PSAtMSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBFbmNyeXB0ZWQgUEtDUyM4IFBFTSBzdHJpbmdcIik7XG4gICAgdmFyIGcgPSBpZShmKSwgUztcbiAgICB0cnkge1xuICAgICAgUyA9IGsucGFyc2VQQkVTMihnKTtcbiAgICB9IGNhdGNoIChEKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEJFUzIgZm9ybWF0OiBcIiArIEQubWVzc2FnZSk7XG4gICAgfVxuICAgIHZhciBiID0gay5nZXRES0Zyb21QQkVTMlBhcmFtKFMsIGQpO1xuICAgIHJldHVybiBhLmNyeXB0by5DaXBoZXIuZGVjcnlwdChTLmVuYywgYiwgUy5lbmNhbGcsIHsgaXY6IFMuZW5jaXYgfSk7XG4gIH0sIGdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTTogZnVuY3Rpb24oZiwgZCkge1xuICAgIHZhciBnID0gdGhpcy5nZXRQbGFpbkhleEZyb21FbmNyeXB0ZWRQS0NTOFBFTShmLCBkKSwgUyA9IHRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KGcpO1xuICAgIHJldHVybiBTO1xuICB9LCBwYXJzZVBsYWluUHJpdmF0ZVBLQ1M4SGV4OiBmdW5jdGlvbihmKSB7XG4gICAgdmFyIGQgPSBWLCBnID0gZC5nZXRDaGlsZElkeCwgUyA9IGQuZ2V0ViwgYiA9IHt9O1xuICAgIGlmIChiLmFsZ3BhcmFtID0gbnVsbCwgZi5zdWJzdHIoMCwgMikgIT0gXCIzMFwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIHBsYWluIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDAxKVwiKTtcbiAgICB2YXIgRCA9IGcoZiwgMCk7XG4gICAgaWYgKEQubGVuZ3RoIDwgMylcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBwbGFpbiBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMilcIik7XG4gICAgaWYgKGYuc3Vic3RyKERbMV0sIDIpICE9IFwiMzBcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTOCBwcml2YXRlIGtleShjb2RlOjAwMylcIik7XG4gICAgdmFyIEEgPSBnKGYsIERbMV0pO1xuICAgIGlmIChBLmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDA0KVwiKTtcbiAgICBpZiAoZi5zdWJzdHIoQVswXSwgMikgIT0gXCIwNlwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDA1KVwiKTtcbiAgICBpZiAoYi5hbGdvaWQgPSBTKGYsIEFbMF0pLCBmLnN1YnN0cihBWzFdLCAyKSA9PSBcIjA2XCIgJiYgKGIuYWxncGFyYW0gPSBTKGYsIEFbMV0pKSwgZi5zdWJzdHIoRFsyXSwgMikgIT0gXCIwNFwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHByaXZhdGUga2V5KGNvZGU6MDA2KVwiKTtcbiAgICByZXR1cm4gYi5rZXlpZHggPSBkLmdldFZpZHgoZiwgRFsyXSksIGI7XG4gIH0sIGdldEtleUZyb21QbGFpblByaXZhdGVQS0NTOFBFTTogZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0gaWUoZiwgXCJQUklWQVRFIEtFWVwiKSwgZyA9IHRoaXMuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4SGV4KGQpO1xuICAgIHJldHVybiBnO1xuICB9LCBnZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXg6IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgZCA9IHRoaXMucGFyc2VQbGFpblByaXZhdGVQS0NTOEhleChmKSwgZztcbiAgICBpZiAoZC5hbGdvaWQgPT0gXCIyYTg2NDg4NmY3MGQwMTAxMDFcIilcbiAgICAgIGcgPSBuZXcgcSgpO1xuICAgIGVsc2UgaWYgKGQuYWxnb2lkID09IFwiMmE4NjQ4Y2UzODA0MDFcIilcbiAgICAgIGcgPSBuZXcgYS5jcnlwdG8uRFNBKCk7XG4gICAgZWxzZSBpZiAoZC5hbGdvaWQgPT0gXCIyYTg2NDhjZTNkMDIwMVwiKVxuICAgICAgZyA9IG5ldyBhLmNyeXB0by5FQ0RTQSgpO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIHByaXZhdGUga2V5IGFsZ29yaXRobVwiKTtcbiAgICByZXR1cm4gZy5yZWFkUEtDUzhQcnZLZXlIZXgoZiksIGc7XG4gIH0sIF9nZXRLZXlGcm9tUHVibGljUEtDUzhIZXg6IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgZCwgZyA9IFYuZ2V0VmJ5TGlzdChmLCAwLCBbMCwgMF0sIFwiMDZcIik7XG4gICAgaWYgKGcgPT09IFwiMmE4NjQ4ODZmNzBkMDEwMTAxXCIpXG4gICAgICBkID0gbmV3IHEoKTtcbiAgICBlbHNlIGlmIChnID09PSBcIjJhODY0OGNlMzgwNDAxXCIpXG4gICAgICBkID0gbmV3IGEuY3J5cHRvLkRTQSgpO1xuICAgIGVsc2UgaWYgKGcgPT09IFwiMmE4NjQ4Y2UzZDAyMDFcIilcbiAgICAgIGQgPSBuZXcgYS5jcnlwdG8uRUNEU0EoKTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBQS0NTIzggcHVibGljIGtleSBoZXhcIik7XG4gICAgcmV0dXJuIGQucmVhZFBLQ1M4UHViS2V5SGV4KGYpLCBkO1xuICB9LCBwYXJzZVB1YmxpY1Jhd1JTQUtleUhleDogZnVuY3Rpb24oZikge1xuICAgIHZhciBkID0gViwgZyA9IGQuZ2V0Q2hpbGRJZHgsIFMgPSBkLmdldFYsIGIgPSB7fTtcbiAgICBpZiAoZi5zdWJzdHIoMCwgMikgIT0gXCIzMFwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDEpXCIpO1xuICAgIHZhciBEID0gZyhmLCAwKTtcbiAgICBpZiAoRC5sZW5ndGggIT0gMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBSU0Ega2V5KGNvZGU6MDAyKVwiKTtcbiAgICBpZiAoZi5zdWJzdHIoRFswXSwgMikgIT0gXCIwMlwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFJTQSBrZXkoY29kZTowMDMpXCIpO1xuICAgIGlmIChiLm4gPSBTKGYsIERbMF0pLCBmLnN1YnN0cihEWzFdLCAyKSAhPSBcIjAyXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUlNBIGtleShjb2RlOjAwNClcIik7XG4gICAgcmV0dXJuIGIuZSA9IFMoZiwgRFsxXSksIGI7XG4gIH0sIHBhcnNlUHVibGljUEtDUzhIZXg6IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgZCA9IFYsIGcgPSBkLmdldENoaWxkSWR4LCBTID0gZC5nZXRWLCBiID0ge307XG4gICAgYi5hbGdwYXJhbSA9IG51bGw7XG4gICAgdmFyIEQgPSBnKGYsIDApO1xuICAgIGlmIChELmxlbmd0aCAhPSAyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwib3V0ZXIgREVSU2VxdWVuY2Ugc2hhbGwgaGF2ZSAyIGVsZW1lbnRzOiBcIiArIEQubGVuZ3RoKTtcbiAgICB2YXIgQSA9IERbMF07XG4gICAgaWYgKGYuc3Vic3RyKEEsIDIpICE9IFwiMzBcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAxKVwiKTtcbiAgICB2YXIgSSA9IGcoZiwgQSk7XG4gICAgaWYgKEkubGVuZ3RoICE9IDIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgUEtDUzggcHVibGljIGtleShjb2RlOjAwMilcIik7XG4gICAgaWYgKGYuc3Vic3RyKElbMF0sIDIpICE9IFwiMDZcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTOCBwdWJsaWMga2V5KGNvZGU6MDAzKVwiKTtcbiAgICBpZiAoYi5hbGdvaWQgPSBTKGYsIElbMF0pLCBmLnN1YnN0cihJWzFdLCAyKSA9PSBcIjA2XCIgPyBiLmFsZ3BhcmFtID0gUyhmLCBJWzFdKSA6IGYuc3Vic3RyKElbMV0sIDIpID09IFwiMzBcIiAmJiAoYi5hbGdwYXJhbSA9IHt9LCBiLmFsZ3BhcmFtLnAgPSBkLmdldFZieUxpc3QoZiwgSVsxXSwgWzBdLCBcIjAyXCIpLCBiLmFsZ3BhcmFtLnEgPSBkLmdldFZieUxpc3QoZiwgSVsxXSwgWzFdLCBcIjAyXCIpLCBiLmFsZ3BhcmFtLmcgPSBkLmdldFZieUxpc3QoZiwgSVsxXSwgWzJdLCBcIjAyXCIpKSwgZi5zdWJzdHIoRFsxXSwgMikgIT0gXCIwM1wiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFBLQ1M4IHB1YmxpYyBrZXkoY29kZTowMDQpXCIpO1xuICAgIHJldHVybiBiLmtleSA9IFMoZiwgRFsxXSkuc3Vic3RyKDIpLCBiO1xuICB9IH07XG59KCk7XG5rLmdldEtleSA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgdmFyIGkgPSBWLCBzID0gaS5nZXRDaGlsZElkeDtcbiAgaS5nZXRWO1xuICB2YXIgbiA9IGkuZ2V0VmJ5TGlzdCwgaCA9IGEuY3J5cHRvLCB1ID0gaC5FQ0RTQSwgcCA9IGguRFNBLCBjID0gcSwgeSA9IGllLCB2ID0gaztcbiAgaWYgKHR5cGVvZiBjIDwgXCJ1XCIgJiYgZSBpbnN0YW5jZW9mIGMgfHwgdHlwZW9mIHUgPCBcInVcIiAmJiBlIGluc3RhbmNlb2YgdSB8fCB0eXBlb2YgcCA8IFwidVwiICYmIGUgaW5zdGFuY2VvZiBwKVxuICAgIHJldHVybiBlO1xuICBpZiAoZS5jdXJ2ZSAhPT0gdm9pZCAwICYmIGUueHkgIT09IHZvaWQgMCAmJiBlLmQgPT09IHZvaWQgMClcbiAgICByZXR1cm4gbmV3IHUoeyBwdWI6IGUueHksIGN1cnZlOiBlLmN1cnZlIH0pO1xuICBpZiAoZS5jdXJ2ZSAhPT0gdm9pZCAwICYmIGUuZCAhPT0gdm9pZCAwKVxuICAgIHJldHVybiBuZXcgdSh7IHBydjogZS5kLCBjdXJ2ZTogZS5jdXJ2ZSB9KTtcbiAgaWYgKGUua3R5ID09PSB2b2lkIDAgJiYgZS5uICE9PSB2b2lkIDAgJiYgZS5lICE9PSB2b2lkIDAgJiYgZS5kID09PSB2b2lkIDApIHtcbiAgICB2YXIgbyA9IG5ldyBjKCk7XG4gICAgcmV0dXJuIG8uc2V0UHVibGljKGUubiwgZS5lKSwgbztcbiAgfVxuICBpZiAoZS5rdHkgPT09IHZvaWQgMCAmJiBlLm4gIT09IHZvaWQgMCAmJiBlLmUgIT09IHZvaWQgMCAmJiBlLmQgIT09IHZvaWQgMCAmJiBlLnAgIT09IHZvaWQgMCAmJiBlLnEgIT09IHZvaWQgMCAmJiBlLmRwICE9PSB2b2lkIDAgJiYgZS5kcSAhPT0gdm9pZCAwICYmIGUuY28gIT09IHZvaWQgMCAmJiBlLnFpID09PSB2b2lkIDApIHtcbiAgICB2YXIgbyA9IG5ldyBjKCk7XG4gICAgcmV0dXJuIG8uc2V0UHJpdmF0ZUV4KGUubiwgZS5lLCBlLmQsIGUucCwgZS5xLCBlLmRwLCBlLmRxLCBlLmNvKSwgbztcbiAgfVxuICBpZiAoZS5rdHkgPT09IHZvaWQgMCAmJiBlLm4gIT09IHZvaWQgMCAmJiBlLmUgIT09IHZvaWQgMCAmJiBlLmQgIT09IHZvaWQgMCAmJiBlLnAgPT09IHZvaWQgMCkge1xuICAgIHZhciBvID0gbmV3IGMoKTtcbiAgICByZXR1cm4gby5zZXRQcml2YXRlKGUubiwgZS5lLCBlLmQpLCBvO1xuICB9XG4gIGlmIChlLnAgIT09IHZvaWQgMCAmJiBlLnEgIT09IHZvaWQgMCAmJiBlLmcgIT09IHZvaWQgMCAmJiBlLnkgIT09IHZvaWQgMCAmJiBlLnggPT09IHZvaWQgMCkge1xuICAgIHZhciBvID0gbmV3IHAoKTtcbiAgICByZXR1cm4gby5zZXRQdWJsaWMoZS5wLCBlLnEsIGUuZywgZS55KSwgbztcbiAgfVxuICBpZiAoZS5wICE9PSB2b2lkIDAgJiYgZS5xICE9PSB2b2lkIDAgJiYgZS5nICE9PSB2b2lkIDAgJiYgZS55ICE9PSB2b2lkIDAgJiYgZS54ICE9PSB2b2lkIDApIHtcbiAgICB2YXIgbyA9IG5ldyBwKCk7XG4gICAgcmV0dXJuIG8uc2V0UHJpdmF0ZShlLnAsIGUucSwgZS5nLCBlLnksIGUueCksIG87XG4gIH1cbiAgaWYgKGUua3R5ID09PSBcIlJTQVwiICYmIGUubiAhPT0gdm9pZCAwICYmIGUuZSAhPT0gdm9pZCAwICYmIGUuZCA9PT0gdm9pZCAwKSB7XG4gICAgdmFyIG8gPSBuZXcgYygpO1xuICAgIHJldHVybiBvLnNldFB1YmxpYyhZKGUubiksIFkoZS5lKSksIG87XG4gIH1cbiAgaWYgKGUua3R5ID09PSBcIlJTQVwiICYmIGUubiAhPT0gdm9pZCAwICYmIGUuZSAhPT0gdm9pZCAwICYmIGUuZCAhPT0gdm9pZCAwICYmIGUucCAhPT0gdm9pZCAwICYmIGUucSAhPT0gdm9pZCAwICYmIGUuZHAgIT09IHZvaWQgMCAmJiBlLmRxICE9PSB2b2lkIDAgJiYgZS5xaSAhPT0gdm9pZCAwKSB7XG4gICAgdmFyIG8gPSBuZXcgYygpO1xuICAgIHJldHVybiBvLnNldFByaXZhdGVFeChZKGUubiksIFkoZS5lKSwgWShlLmQpLCBZKGUucCksIFkoZS5xKSwgWShlLmRwKSwgWShlLmRxKSwgWShlLnFpKSksIG87XG4gIH1cbiAgaWYgKGUua3R5ID09PSBcIlJTQVwiICYmIGUubiAhPT0gdm9pZCAwICYmIGUuZSAhPT0gdm9pZCAwICYmIGUuZCAhPT0gdm9pZCAwKSB7XG4gICAgdmFyIG8gPSBuZXcgYygpO1xuICAgIHJldHVybiBvLnNldFByaXZhdGUoWShlLm4pLCBZKGUuZSksIFkoZS5kKSksIG87XG4gIH1cbiAgaWYgKGUua3R5ID09PSBcIkVDXCIgJiYgZS5jcnYgIT09IHZvaWQgMCAmJiBlLnggIT09IHZvaWQgMCAmJiBlLnkgIT09IHZvaWQgMCAmJiBlLmQgPT09IHZvaWQgMCkge1xuICAgIHZhciBsID0gbmV3IHUoeyBjdXJ2ZTogZS5jcnYgfSksIGYgPSBsLmVjcGFyYW1zLmtleWNoYXJsZW4sIGQgPSAoXCIwMDAwMDAwMDAwXCIgKyBZKGUueCkpLnNsaWNlKC1mKSwgZyA9IChcIjAwMDAwMDAwMDBcIiArIFkoZS55KSkuc2xpY2UoLWYpLCBTID0gXCIwNFwiICsgZCArIGc7XG4gICAgcmV0dXJuIGwuc2V0UHVibGljS2V5SGV4KFMpLCBsO1xuICB9XG4gIGlmIChlLmt0eSA9PT0gXCJFQ1wiICYmIGUuY3J2ICE9PSB2b2lkIDAgJiYgZS54ICE9PSB2b2lkIDAgJiYgZS55ICE9PSB2b2lkIDAgJiYgZS5kICE9PSB2b2lkIDApIHtcbiAgICB2YXIgbCA9IG5ldyB1KHsgY3VydmU6IGUuY3J2IH0pLCBmID0gbC5lY3BhcmFtcy5rZXljaGFybGVuLCBkID0gKFwiMDAwMDAwMDAwMFwiICsgWShlLngpKS5zbGljZSgtZiksIGcgPSAoXCIwMDAwMDAwMDAwXCIgKyBZKGUueSkpLnNsaWNlKC1mKSwgUyA9IFwiMDRcIiArIGQgKyBnLCBiID0gKFwiMDAwMDAwMDAwMFwiICsgWShlLmQpKS5zbGljZSgtZik7XG4gICAgcmV0dXJuIGwuc2V0UHVibGljS2V5SGV4KFMpLCBsLnNldFByaXZhdGVLZXlIZXgoYiksIGw7XG4gIH1cbiAgaWYgKHIgPT09IFwicGtjczVwcnZcIikge1xuICAgIHZhciBEID0gZSwgaSA9IFYsIEEsIG87XG4gICAgaWYgKEEgPSBzKEQsIDApLCBBLmxlbmd0aCA9PT0gOSlcbiAgICAgIG8gPSBuZXcgYygpLCBvLnJlYWRQS0NTNVBydktleUhleChEKTtcbiAgICBlbHNlIGlmIChBLmxlbmd0aCA9PT0gNilcbiAgICAgIG8gPSBuZXcgcCgpLCBvLnJlYWRQS0NTNVBydktleUhleChEKTtcbiAgICBlbHNlIGlmIChBLmxlbmd0aCA+IDIgJiYgRC5zdWJzdHIoQVsxXSwgMikgPT09IFwiMDRcIilcbiAgICAgIG8gPSBuZXcgdSgpLCBvLnJlYWRQS0NTNVBydktleUhleChEKTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBQS0NTIzEvNSBoZXhhZGVjaW1hbCBrZXlcIik7XG4gICAgcmV0dXJuIG87XG4gIH1cbiAgaWYgKHIgPT09IFwicGtjczhwcnZcIikge1xuICAgIHZhciBvID0gdi5nZXRLZXlGcm9tUGxhaW5Qcml2YXRlUEtDUzhIZXgoZSk7XG4gICAgcmV0dXJuIG87XG4gIH1cbiAgaWYgKHIgPT09IFwicGtjczhwdWJcIilcbiAgICByZXR1cm4gdi5fZ2V0S2V5RnJvbVB1YmxpY1BLQ1M4SGV4KGUpO1xuICBpZiAociA9PT0gXCJ4NTA5cHViXCIpXG4gICAgcmV0dXJuIEwuZ2V0UHVibGljS2V5RnJvbUNlcnRIZXgoZSk7XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIENFUlRJRklDQVRFLVwiLCAwKSAhPSAtMSB8fCBlLmluZGV4T2YoXCItRU5EIFg1MDkgQ0VSVElGSUNBVEUtXCIsIDApICE9IC0xIHx8IGUuaW5kZXhPZihcIi1FTkQgVFJVU1RFRCBDRVJUSUZJQ0FURS1cIiwgMCkgIT0gLTEpXG4gICAgcmV0dXJuIEwuZ2V0UHVibGljS2V5RnJvbUNlcnRQRU0oZSk7XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIFBVQkxJQyBLRVktXCIpICE9IC0xKSB7XG4gICAgdmFyIEkgPSBpZShlLCBcIlBVQkxJQyBLRVlcIik7XG4gICAgcmV0dXJuIHYuX2dldEtleUZyb21QdWJsaWNQS0NTOEhleChJKTtcbiAgfVxuICBpZiAoZS5pbmRleE9mKFwiLUVORCBSU0EgUFJJVkFURSBLRVktXCIpICE9IC0xICYmIGUuaW5kZXhPZihcIjQsRU5DUllQVEVEXCIpID09IC0xKSB7XG4gICAgdmFyIG0gPSB5KGUsIFwiUlNBIFBSSVZBVEUgS0VZXCIpO1xuICAgIHJldHVybiB2LmdldEtleShtLCBudWxsLCBcInBrY3M1cHJ2XCIpO1xuICB9XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIERTQSBQUklWQVRFIEtFWS1cIikgIT0gLTEgJiYgZS5pbmRleE9mKFwiNCxFTkNSWVBURURcIikgPT0gLTEpIHtcbiAgICB2YXIgRSA9IHkoZSwgXCJEU0EgUFJJVkFURSBLRVlcIiksIHcgPSBuKEUsIDAsIFsxXSwgXCIwMlwiKSwgeCA9IG4oRSwgMCwgWzJdLCBcIjAyXCIpLCBGID0gbihFLCAwLCBbM10sIFwiMDJcIiksIFAgPSBuKEUsIDAsIFs0XSwgXCIwMlwiKSwgVCA9IG4oRSwgMCwgWzVdLCBcIjAyXCIpLCBvID0gbmV3IHAoKTtcbiAgICByZXR1cm4gby5zZXRQcml2YXRlKG5ldyBSKHcsIDE2KSwgbmV3IFIoeCwgMTYpLCBuZXcgUihGLCAxNiksIG5ldyBSKFAsIDE2KSwgbmV3IFIoVCwgMTYpKSwgbztcbiAgfVxuICBpZiAoZS5pbmRleE9mKFwiLUVORCBFQyBQUklWQVRFIEtFWS1cIikgIT0gLTEgJiYgZS5pbmRleE9mKFwiNCxFTkNSWVBURURcIikgPT0gLTEpIHtcbiAgICB2YXIgbSA9IHkoZSwgXCJFQyBQUklWQVRFIEtFWVwiKTtcbiAgICByZXR1cm4gdi5nZXRLZXkobSwgbnVsbCwgXCJwa2NzNXBydlwiKTtcbiAgfVxuICBpZiAoZS5pbmRleE9mKFwiLUVORCBQUklWQVRFIEtFWS1cIikgIT0gLTEpXG4gICAgcmV0dXJuIHYuZ2V0S2V5RnJvbVBsYWluUHJpdmF0ZVBLQ1M4UEVNKGUpO1xuICBpZiAoZS5pbmRleE9mKFwiLUVORCBSU0EgUFJJVkFURSBLRVktXCIpICE9IC0xICYmIGUuaW5kZXhPZihcIjQsRU5DUllQVEVEXCIpICE9IC0xKSB7XG4gICAgdmFyIEggPSB2LmdldERlY3J5cHRlZEtleUhleChlLCB0KSwgQyA9IG5ldyBxKCk7XG4gICAgcmV0dXJuIEMucmVhZFBLQ1M1UHJ2S2V5SGV4KEgpLCBDO1xuICB9XG4gIGlmIChlLmluZGV4T2YoXCItRU5EIEVDIFBSSVZBVEUgS0VZLVwiKSAhPSAtMSAmJiBlLmluZGV4T2YoXCI0LEVOQ1JZUFRFRFwiKSAhPSAtMSkge1xuICAgIHZhciBFID0gdi5nZXREZWNyeXB0ZWRLZXlIZXgoZSwgdCksIG8gPSBuKEUsIDAsIFsxXSwgXCIwNFwiKSwgQiA9IG4oRSwgMCwgWzIsIDBdLCBcIjA2XCIpLCBPID0gbihFLCAwLCBbMywgMF0sIFwiMDNcIikuc3Vic3RyKDIpLCBqID0gXCJcIjtcbiAgICBpZiAoYS5jcnlwdG8uT0lELm9pZGhleDJuYW1lW0JdICE9PSB2b2lkIDApXG4gICAgICBqID0gYS5jcnlwdG8uT0lELm9pZGhleDJuYW1lW0JdO1xuICAgIGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuZGVmaW5lZCBPSUQoaGV4KSBpbiBLSlVSLmNyeXB0by5PSUQ6IFwiICsgQik7XG4gICAgdmFyIGwgPSBuZXcgdSh7IGN1cnZlOiBqIH0pO1xuICAgIHJldHVybiBsLnNldFB1YmxpY0tleUhleChPKSwgbC5zZXRQcml2YXRlS2V5SGV4KG8pLCBsLmlzUHVibGljID0gITEsIGw7XG4gIH1cbiAgaWYgKGUuaW5kZXhPZihcIi1FTkQgRFNBIFBSSVZBVEUgS0VZLVwiKSAhPSAtMSAmJiBlLmluZGV4T2YoXCI0LEVOQ1JZUFRFRFwiKSAhPSAtMSkge1xuICAgIHZhciBFID0gdi5nZXREZWNyeXB0ZWRLZXlIZXgoZSwgdCksIHcgPSBuKEUsIDAsIFsxXSwgXCIwMlwiKSwgeCA9IG4oRSwgMCwgWzJdLCBcIjAyXCIpLCBGID0gbihFLCAwLCBbM10sIFwiMDJcIiksIFAgPSBuKEUsIDAsIFs0XSwgXCIwMlwiKSwgVCA9IG4oRSwgMCwgWzVdLCBcIjAyXCIpLCBvID0gbmV3IHAoKTtcbiAgICByZXR1cm4gby5zZXRQcml2YXRlKG5ldyBSKHcsIDE2KSwgbmV3IFIoeCwgMTYpLCBuZXcgUihGLCAxNiksIG5ldyBSKFAsIDE2KSwgbmV3IFIoVCwgMTYpKSwgbztcbiAgfVxuICBpZiAoZS5pbmRleE9mKFwiLUVORCBFTkNSWVBURUQgUFJJVkFURSBLRVktXCIpICE9IC0xKVxuICAgIHJldHVybiB2LmdldEtleUZyb21FbmNyeXB0ZWRQS0NTOFBFTShlLCB0KTtcbiAgdGhyb3cgbmV3IEVycm9yKFwibm90IHN1cHBvcnRlZCBhcmd1bWVudFwiKTtcbn07XG5rLmdlbmVyYXRlS2V5cGFpciA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgaWYgKGUgPT0gXCJSU0FcIikge1xuICAgIHZhciByID0gdCwgaSA9IG5ldyBxKCk7XG4gICAgaS5nZW5lcmF0ZShyLCBcIjEwMDAxXCIpLCBpLmlzUHJpdmF0ZSA9ICEwLCBpLmlzUHVibGljID0gITA7XG4gICAgdmFyIHMgPSBuZXcgcSgpLCBuID0gaS5uLnRvU3RyaW5nKDE2KSwgaCA9IGkuZS50b1N0cmluZygxNik7XG4gICAgcy5zZXRQdWJsaWMobiwgaCksIHMuaXNQcml2YXRlID0gITEsIHMuaXNQdWJsaWMgPSAhMDtcbiAgICB2YXIgdSA9IHt9O1xuICAgIHJldHVybiB1LnBydktleU9iaiA9IGksIHUucHViS2V5T2JqID0gcywgdTtcbiAgfSBlbHNlIGlmIChlID09IFwiRUNcIikge1xuICAgIHZhciBwID0gdCwgYyA9IG5ldyBhLmNyeXB0by5FQ0RTQSh7IGN1cnZlOiBwIH0pLCB5ID0gYy5nZW5lcmF0ZUtleVBhaXJIZXgoKSwgaSA9IG5ldyBhLmNyeXB0by5FQ0RTQSh7IGN1cnZlOiBwIH0pO1xuICAgIGkuc2V0UHVibGljS2V5SGV4KHkuZWNwdWJoZXgpLCBpLnNldFByaXZhdGVLZXlIZXgoeS5lY3BydmhleCksIGkuaXNQcml2YXRlID0gITAsIGkuaXNQdWJsaWMgPSAhMTtcbiAgICB2YXIgcyA9IG5ldyBhLmNyeXB0by5FQ0RTQSh7IGN1cnZlOiBwIH0pO1xuICAgIHMuc2V0UHVibGljS2V5SGV4KHkuZWNwdWJoZXgpLCBzLmlzUHJpdmF0ZSA9ICExLCBzLmlzUHVibGljID0gITA7XG4gICAgdmFyIHUgPSB7fTtcbiAgICByZXR1cm4gdS5wcnZLZXlPYmogPSBpLCB1LnB1YktleU9iaiA9IHMsIHU7XG4gIH0gZWxzZVxuICAgIHRocm93IG5ldyBFcnJvcihcInVua25vd24gYWxnb3JpdGhtOiBcIiArIGUpO1xufTtcbmsuZ2V0UEVNID0gZnVuY3Rpb24oZSwgdCwgciwgaSwgcywgbikge1xuICB2YXIgaCA9IGEsIHUgPSBoLmFzbjEsIHAgPSB1LkRFUk9iamVjdElkZW50aWZpZXIsIGMgPSB1LkRFUkludGVnZXIsIHkgPSB1LkFTTjFVdGlsLm5ld09iamVjdCwgdiA9IHUueDUwOSwgbyA9IHYuU3ViamVjdFB1YmxpY0tleUluZm8sIGwgPSBoLmNyeXB0bywgZiA9IGwuRFNBLCBkID0gbC5FQ0RTQSwgZyA9IHE7XG4gIGZ1bmN0aW9uIFMoQikge1xuICAgIHZhciBPID0geSh7IHNlcTogW3sgaW50OiAwIH0sIHsgaW50OiB7IGJpZ2ludDogQi5uIH0gfSwgeyBpbnQ6IEIuZSB9LCB7IGludDogeyBiaWdpbnQ6IEIuZCB9IH0sIHsgaW50OiB7IGJpZ2ludDogQi5wIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBCLnEgfSB9LCB7IGludDogeyBiaWdpbnQ6IEIuZG1wMSB9IH0sIHsgaW50OiB7IGJpZ2ludDogQi5kbXExIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBCLmNvZWZmIH0gfV0gfSk7XG4gICAgcmV0dXJuIE87XG4gIH1cbiAgZnVuY3Rpb24gYihCKSB7XG4gICAgdmFyIE8gPSB5KHsgc2VxOiBbeyBpbnQ6IDEgfSwgeyBvY3RzdHI6IHsgaGV4OiBCLnBydktleUhleCB9IH0sIHsgdGFnOiBbXCJhMFwiLCAhMCwgeyBvaWQ6IHsgbmFtZTogQi5jdXJ2ZU5hbWUgfSB9XSB9LCB7IHRhZzogW1wiYTFcIiwgITAsIHsgYml0c3RyOiB7IGhleDogXCIwMFwiICsgQi5wdWJLZXlIZXggfSB9XSB9XSB9KTtcbiAgICByZXR1cm4gTztcbiAgfVxuICBmdW5jdGlvbiBEKEIpIHtcbiAgICB2YXIgTyA9IHkoeyBzZXE6IFt7IGludDogMCB9LCB7IGludDogeyBiaWdpbnQ6IEIucCB9IH0sIHsgaW50OiB7IGJpZ2ludDogQi5xIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBCLmcgfSB9LCB7IGludDogeyBiaWdpbnQ6IEIueSB9IH0sIHsgaW50OiB7IGJpZ2ludDogQi54IH0gfV0gfSk7XG4gICAgcmV0dXJuIE87XG4gIH1cbiAgaWYgKChnICE9PSB2b2lkIDAgJiYgZSBpbnN0YW5jZW9mIGcgfHwgZiAhPT0gdm9pZCAwICYmIGUgaW5zdGFuY2VvZiBmIHx8IGQgIT09IHZvaWQgMCAmJiBlIGluc3RhbmNlb2YgZCkgJiYgZS5pc1B1YmxpYyA9PSAhMCAmJiAodCA9PT0gdm9pZCAwIHx8IHQgPT0gXCJQS0NTOFBVQlwiKSkge1xuICAgIHZhciBBID0gbmV3IG8oZSksIEkgPSBBLnRvaGV4KCk7XG4gICAgcmV0dXJuIGRlKEksIFwiUFVCTElDIEtFWVwiKTtcbiAgfVxuICBpZiAodCA9PSBcIlBLQ1MxUFJWXCIgJiYgZyAhPT0gdm9pZCAwICYmIGUgaW5zdGFuY2VvZiBnICYmIChyID09PSB2b2lkIDAgfHwgciA9PSBudWxsKSAmJiBlLmlzUHJpdmF0ZSA9PSAhMCkge1xuICAgIHZhciBBID0gUyhlKSwgSSA9IEEudG9oZXgoKTtcbiAgICByZXR1cm4gZGUoSSwgXCJSU0EgUFJJVkFURSBLRVlcIik7XG4gIH1cbiAgaWYgKHQgPT0gXCJQS0NTMVBSVlwiICYmIGQgIT09IHZvaWQgMCAmJiBlIGluc3RhbmNlb2YgZCAmJiAociA9PT0gdm9pZCAwIHx8IHIgPT0gbnVsbCkgJiYgZS5pc1ByaXZhdGUgPT0gITApIHtcbiAgICB2YXIgbSA9IG5ldyBwKHsgbmFtZTogZS5jdXJ2ZU5hbWUgfSksIEUgPSBtLnRvaGV4KCksIHcgPSBiKGUpLCB4ID0gdy50b2hleCgpLCBGID0gXCJcIjtcbiAgICByZXR1cm4gRiArPSBkZShFLCBcIkVDIFBBUkFNRVRFUlNcIiksIEYgKz0gZGUoeCwgXCJFQyBQUklWQVRFIEtFWVwiKSwgRjtcbiAgfVxuICBpZiAodCA9PSBcIlBLQ1MxUFJWXCIgJiYgZiAhPT0gdm9pZCAwICYmIGUgaW5zdGFuY2VvZiBmICYmIChyID09PSB2b2lkIDAgfHwgciA9PSBudWxsKSAmJiBlLmlzUHJpdmF0ZSA9PSAhMCkge1xuICAgIHZhciBBID0gRChlKSwgSSA9IEEudG9oZXgoKTtcbiAgICByZXR1cm4gZGUoSSwgXCJEU0EgUFJJVkFURSBLRVlcIik7XG4gIH1cbiAgaWYgKHQgPT0gXCJQS0NTNVBSVlwiICYmIGcgIT09IHZvaWQgMCAmJiBlIGluc3RhbmNlb2YgZyAmJiByICE9PSB2b2lkIDAgJiYgciAhPSBudWxsICYmIGUuaXNQcml2YXRlID09ICEwKSB7XG4gICAgdmFyIEEgPSBTKGUpLCBJID0gQS50b2hleCgpO1xuICAgIHJldHVybiBpID09PSB2b2lkIDAgJiYgKGkgPSBcIkRFUy1FREUzLUNCQ1wiKSwgdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoXCJSU0FcIiwgSSwgciwgaSwgbik7XG4gIH1cbiAgaWYgKHQgPT0gXCJQS0NTNVBSVlwiICYmIGQgIT09IHZvaWQgMCAmJiBlIGluc3RhbmNlb2YgZCAmJiByICE9PSB2b2lkIDAgJiYgciAhPSBudWxsICYmIGUuaXNQcml2YXRlID09ICEwKSB7XG4gICAgdmFyIEEgPSBiKGUpLCBJID0gQS50b2hleCgpO1xuICAgIHJldHVybiBpID09PSB2b2lkIDAgJiYgKGkgPSBcIkRFUy1FREUzLUNCQ1wiKSwgdGhpcy5nZXRFbmNyeXB0ZWRQS0NTNVBFTUZyb21QcnZLZXlIZXgoXCJFQ1wiLCBJLCByLCBpLCBuKTtcbiAgfVxuICBpZiAodCA9PSBcIlBLQ1M1UFJWXCIgJiYgZiAhPT0gdm9pZCAwICYmIGUgaW5zdGFuY2VvZiBmICYmIHIgIT09IHZvaWQgMCAmJiByICE9IG51bGwgJiYgZS5pc1ByaXZhdGUgPT0gITApIHtcbiAgICB2YXIgQSA9IEQoZSksIEkgPSBBLnRvaGV4KCk7XG4gICAgcmV0dXJuIGkgPT09IHZvaWQgMCAmJiAoaSA9IFwiREVTLUVERTMtQ0JDXCIpLCB0aGlzLmdldEVuY3J5cHRlZFBLQ1M1UEVNRnJvbVBydktleUhleChcIkRTQVwiLCBJLCByLCBpLCBuKTtcbiAgfVxuICB2YXIgUCA9IGZ1bmN0aW9uKEIsIE8pIHtcbiAgICBpZiAodHlwZW9mIE8gPT0gXCJzdHJpbmdcIilcbiAgICAgIHJldHVybiBrLmdldEVuY3J5cHRlZFBLQ1M4UEVNKEIsIE8pO1xuICAgIGlmICh0eXBlb2YgTyA9PSBcIm9iamVjdFwiICYmIEooTywgXCJwYXNzY29kZVwiKSAhPSBudWxsKSB7XG4gICAgICB2YXIgaiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoTykpLCBmZSA9IGoucGFzc2NvZGU7XG4gICAgICByZXR1cm4gZGVsZXRlIGoucGFzc2NvZGUsIGsuZ2V0RW5jcnlwdGVkUEtDUzhQRU0oQiwgZmUsIGopO1xuICAgIH1cbiAgfTtcbiAgaWYgKHQgPT0gXCJQS0NTOFBSVlwiICYmIGcgIT0gbnVsbCAmJiBlIGluc3RhbmNlb2YgZyAmJiBlLmlzUHJpdmF0ZSA9PSAhMCkge1xuICAgIHZhciBUID0gUyhlKSwgSCA9IFQudG9oZXgoKSwgQSA9IHkoeyBzZXE6IFt7IGludDogMCB9LCB7IHNlcTogW3sgb2lkOiB7IG5hbWU6IFwicnNhRW5jcnlwdGlvblwiIH0gfSwgeyBudWxsOiAhMCB9XSB9LCB7IG9jdHN0cjogeyBoZXg6IEggfSB9XSB9KSwgSSA9IEEudG9oZXgoKTtcbiAgICByZXR1cm4gciA9PT0gdm9pZCAwIHx8IHIgPT0gbnVsbCA/IGRlKEksIFwiUFJJVkFURSBLRVlcIikgOiBQKEksIHIpO1xuICB9XG4gIGlmICh0ID09IFwiUEtDUzhQUlZcIiAmJiBkICE9PSB2b2lkIDAgJiYgZSBpbnN0YW5jZW9mIGQgJiYgZS5pc1ByaXZhdGUgPT0gITApIHtcbiAgICB2YXIgQyA9IHsgc2VxOiBbeyBpbnQ6IDEgfSwgeyBvY3RzdHI6IHsgaGV4OiBlLnBydktleUhleCB9IH1dIH07XG4gICAgdHlwZW9mIGUucHViS2V5SGV4ID09IFwic3RyaW5nXCIgJiYgQy5zZXEucHVzaCh7IHRhZzogW1wiYTFcIiwgITAsIHsgYml0c3RyOiB7IGhleDogXCIwMFwiICsgZS5wdWJLZXlIZXggfSB9XSB9KTtcbiAgICB2YXIgVCA9IG5ldyB5KEMpLCBIID0gVC50b2hleCgpLCBBID0geSh7IHNlcTogW3sgaW50OiAwIH0sIHsgc2VxOiBbeyBvaWQ6IHsgbmFtZTogXCJlY1B1YmxpY0tleVwiIH0gfSwgeyBvaWQ6IHsgbmFtZTogZS5jdXJ2ZU5hbWUgfSB9XSB9LCB7IG9jdHN0cjogeyBoZXg6IEggfSB9XSB9KSwgSSA9IEEudG9oZXgoKTtcbiAgICByZXR1cm4gciA9PT0gdm9pZCAwIHx8IHIgPT0gbnVsbCA/IGRlKEksIFwiUFJJVkFURSBLRVlcIikgOiBQKEksIHIpO1xuICB9XG4gIGlmICh0ID09IFwiUEtDUzhQUlZcIiAmJiBmICE9PSB2b2lkIDAgJiYgZSBpbnN0YW5jZW9mIGYgJiYgZS5pc1ByaXZhdGUgPT0gITApIHtcbiAgICB2YXIgVCA9IG5ldyBjKHsgYmlnaW50OiBlLnggfSksIEggPSBULnRvaGV4KCksIEEgPSB5KHsgc2VxOiBbeyBpbnQ6IDAgfSwgeyBzZXE6IFt7IG9pZDogeyBuYW1lOiBcImRzYVwiIH0gfSwgeyBzZXE6IFt7IGludDogeyBiaWdpbnQ6IGUucCB9IH0sIHsgaW50OiB7IGJpZ2ludDogZS5xIH0gfSwgeyBpbnQ6IHsgYmlnaW50OiBlLmcgfSB9XSB9XSB9LCB7IG9jdHN0cjogeyBoZXg6IEggfSB9XSB9KSwgSSA9IEEudG9oZXgoKTtcbiAgICByZXR1cm4gciA9PT0gdm9pZCAwIHx8IHIgPT0gbnVsbCA/IGRlKEksIFwiUFJJVkFURSBLRVlcIikgOiBQKEksIHIpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIG9iamVjdCBub3IgZm9ybWF0XCIpO1xufTtcbmsuZ2V0S2V5RnJvbUNTUlBFTSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBpZShlLCBcIkNFUlRJRklDQVRFIFJFUVVFU1RcIiksIHIgPSBrLmdldEtleUZyb21DU1JIZXgodCk7XG4gIHJldHVybiByO1xufTtcbmsuZ2V0S2V5RnJvbUNTUkhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBrLnBhcnNlQ1NSSGV4KGUpLCByID0gay5nZXRLZXkodC5wOHB1YmtleWhleCwgbnVsbCwgXCJwa2NzOHB1YlwiKTtcbiAgcmV0dXJuIHI7XG59O1xuay5wYXJzZUNTUkhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWLCByID0gdC5nZXRDaGlsZElkeCwgaSA9IHQuZ2V0VExWLCBzID0ge30sIG4gPSBlO1xuICBpZiAobi5zdWJzdHIoMCwgMikgIT0gXCIzMFwiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBDU1IoY29kZTowMDEpXCIpO1xuICB2YXIgaCA9IHIobiwgMCk7XG4gIGlmIChoLmxlbmd0aCA8IDEpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIENTUihjb2RlOjAwMilcIik7XG4gIGlmIChuLnN1YnN0cihoWzBdLCAyKSAhPSBcIjMwXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIENTUihjb2RlOjAwMylcIik7XG4gIHZhciB1ID0gcihuLCBoWzBdKTtcbiAgaWYgKHUubGVuZ3RoIDwgMylcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJtYWxmb3JtZWQgQ1NSKGNvZGU6MDA0KVwiKTtcbiAgcmV0dXJuIHMucDhwdWJrZXloZXggPSBpKG4sIHVbMl0pLCBzO1xufTtcbmsuZ2V0S2V5SUQgPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gaywgciA9IFY7XG4gIHR5cGVvZiBlID09IFwic3RyaW5nXCIgJiYgZS5pbmRleE9mKFwiQkVHSU4gXCIpICE9IC0xICYmIChlID0gdC5nZXRLZXkoZSkpO1xuICB2YXIgaSA9IGllKHQuZ2V0UEVNKGUpKSwgcyA9IHIuZ2V0SWR4YnlMaXN0KGksIDAsIFsxXSksIG4gPSByLmdldFYoaSwgcykuc3Vic3RyaW5nKDIpO1xuICByZXR1cm4gYS5jcnlwdG8uVXRpbC5oYXNoSGV4KG4sIFwic2hhMVwiKTtcbn07XG5rLmdldEpXSyA9IGZ1bmN0aW9uKGUsIHQsIHIsIGksIHMpIHtcbiAgdmFyIG4sIGggPSB7fSwgdSwgcCA9IGEuY3J5cHRvLlV0aWwuaGFzaEhleDtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpXG4gICAgbiA9IGsuZ2V0S2V5KGUpLCBlLmluZGV4T2YoXCJDRVJUSUZJQ0FURVwiKSAhPSAtMSAmJiAodSA9IGllKGUpKTtcbiAgZWxzZSBpZiAodHlwZW9mIGUgPT0gXCJvYmplY3RcIilcbiAgICBlIGluc3RhbmNlb2YgTCA/IChuID0gZS5nZXRQdWJsaWNLZXkoKSwgdSA9IGUuaGV4KSA6IG4gPSBlO1xuICBlbHNlXG4gICAgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQga2V5aW5mbyB0eXBlXCIpO1xuICBpZiAobiBpbnN0YW5jZW9mIHEgJiYgbi5pc1ByaXZhdGUpXG4gICAgaC5rdHkgPSBcIlJTQVwiLCBoLm4gPSBhZShuLm4udG9TdHJpbmcoMTYpKSwgaC5lID0gYWUobi5lLnRvU3RyaW5nKDE2KSksIGguZCA9IGFlKG4uZC50b1N0cmluZygxNikpLCBoLnAgPSBhZShuLnAudG9TdHJpbmcoMTYpKSwgaC5xID0gYWUobi5xLnRvU3RyaW5nKDE2KSksIGguZHAgPSBhZShuLmRtcDEudG9TdHJpbmcoMTYpKSwgaC5kcSA9IGFlKG4uZG1xMS50b1N0cmluZygxNikpLCBoLnFpID0gYWUobi5jb2VmZi50b1N0cmluZygxNikpO1xuICBlbHNlIGlmIChuIGluc3RhbmNlb2YgcSAmJiBuLmlzUHVibGljKVxuICAgIGgua3R5ID0gXCJSU0FcIiwgaC5uID0gYWUobi5uLnRvU3RyaW5nKDE2KSksIGguZSA9IGFlKG4uZS50b1N0cmluZygxNikpO1xuICBlbHNlIGlmIChuIGluc3RhbmNlb2YgYS5jcnlwdG8uRUNEU0EgJiYgbi5pc1ByaXZhdGUpIHtcbiAgICB2YXIgYyA9IG4uZ2V0U2hvcnROSVNUUEN1cnZlTmFtZSgpO1xuICAgIGlmIChjICE9PSBcIlAtMjU2XCIgJiYgYyAhPT0gXCJQLTM4NFwiICYmIGMgIT09IFwiUC01MjFcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGN1cnZlIG5hbWUgZm9yIEpXVDogXCIgKyBjKTtcbiAgICB2YXIgeSA9IG4uZ2V0UHVibGljS2V5WFlIZXgoKTtcbiAgICBoLmt0eSA9IFwiRUNcIiwgaC5jcnYgPSBjLCBoLnggPSBhZSh5LngpLCBoLnkgPSBhZSh5LnkpLCBoLmQgPSBhZShuLnBydktleUhleCk7XG4gIH0gZWxzZSBpZiAobiBpbnN0YW5jZW9mIGEuY3J5cHRvLkVDRFNBICYmIG4uaXNQdWJsaWMpIHtcbiAgICB2YXIgYyA9IG4uZ2V0U2hvcnROSVNUUEN1cnZlTmFtZSgpO1xuICAgIGlmIChjICE9PSBcIlAtMjU2XCIgJiYgYyAhPT0gXCJQLTM4NFwiICYmIGMgIT09IFwiUC01MjFcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGN1cnZlIG5hbWUgZm9yIEpXVDogXCIgKyBjKTtcbiAgICB2YXIgeSA9IG4uZ2V0UHVibGljS2V5WFlIZXgoKTtcbiAgICBoLmt0eSA9IFwiRUNcIiwgaC5jcnYgPSBjLCBoLnggPSBhZSh5LngpLCBoLnkgPSBhZSh5LnkpO1xuICB9XG4gIGlmIChoLmt0eSA9PSBudWxsKVxuICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIGtleWluZm9cIik7XG4gIHJldHVybiAhbi5pc1ByaXZhdGUgJiYgdCAhPSAhMCAmJiAoaC5raWQgPSBhLmp3cy5KV1MuZ2V0SldLdGh1bWJwcmludChoKSksIHUgIT0gbnVsbCAmJiByICE9ICEwICYmIChoLng1YyA9IFtfZSh1KV0pLCB1ICE9IG51bGwgJiYgaSAhPSAhMCAmJiAoaC54NXQgPSBYZShfZShwKHUsIFwic2hhMVwiKSkpKSwgdSAhPSBudWxsICYmIHMgIT0gITAgJiYgKGhbXCJ4NXQjUzI1NlwiXSA9IFhlKF9lKHAodSwgXCJzaGEyNTZcIikpKSksIGg7XG59O1xuay5nZXRKV0tGcm9tS2V5ID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gay5nZXRKV0soZSwgITAsICEwLCAhMCwgITApO1xufTtcbnEuZ2V0UG9zQXJyYXlPZkNoaWxkcmVuRnJvbUhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIFYuZ2V0Q2hpbGRJZHgoZSwgMCk7XG59O1xucS5nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXggPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gViwgciA9IHQuZ2V0ViwgbyA9IHEuZ2V0UG9zQXJyYXlPZkNoaWxkcmVuRnJvbUhleChlKSwgaSA9IHIoZSwgb1swXSksIHMgPSByKGUsIG9bMV0pLCBuID0gcihlLCBvWzJdKSwgaCA9IHIoZSwgb1szXSksIHUgPSByKGUsIG9bNF0pLCBwID0gcihlLCBvWzVdKSwgYyA9IHIoZSwgb1s2XSksIHkgPSByKGUsIG9bN10pLCB2ID0gcihlLCBvWzhdKSwgbyA9IG5ldyBBcnJheSgpO1xuICByZXR1cm4gby5wdXNoKGksIHMsIG4sIGgsIHUsIHAsIGMsIHksIHYpLCBvO1xufTtcbnEucHJvdG90eXBlLnJlYWRQcml2YXRlS2V5RnJvbVBFTVN0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBpZShlKSwgciA9IHEuZ2V0SGV4VmFsdWVBcnJheU9mQ2hpbGRyZW5Gcm9tSGV4KHQpO1xuICB0aGlzLnNldFByaXZhdGVFeChyWzFdLCByWzJdLCByWzNdLCByWzRdLCByWzVdLCByWzZdLCByWzddLCByWzhdKTtcbn07XG5xLnByb3RvdHlwZS5yZWFkUEtDUzVQcnZLZXlIZXggPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gcS5nZXRIZXhWYWx1ZUFycmF5T2ZDaGlsZHJlbkZyb21IZXgoZSk7XG4gIHRoaXMuc2V0UHJpdmF0ZUV4KHRbMV0sIHRbMl0sIHRbM10sIHRbNF0sIHRbNV0sIHRbNl0sIHRbN10sIHRbOF0pO1xufTtcbnEucHJvdG90eXBlLnJlYWRQS0NTOFBydktleUhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQsIHIsIGksIHMsIG4sIGgsIHUsIHAsIGMgPSBWLCB5ID0gYy5nZXRWYnlMaXN0RXg7XG4gIGlmIChjLmlzQVNOMUhFWChlKSA9PT0gITEpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwibm90IEFTTi4xIGhleCBzdHJpbmdcIik7XG4gIHRyeSB7XG4gICAgdCA9IHkoZSwgMCwgWzIsIDAsIDFdLCBcIjAyXCIpLCByID0geShlLCAwLCBbMiwgMCwgMl0sIFwiMDJcIiksIGkgPSB5KGUsIDAsIFsyLCAwLCAzXSwgXCIwMlwiKSwgcyA9IHkoZSwgMCwgWzIsIDAsIDRdLCBcIjAyXCIpLCBuID0geShlLCAwLCBbMiwgMCwgNV0sIFwiMDJcIiksIGggPSB5KGUsIDAsIFsyLCAwLCA2XSwgXCIwMlwiKSwgdSA9IHkoZSwgMCwgWzIsIDAsIDddLCBcIjAyXCIpLCBwID0geShlLCAwLCBbMiwgMCwgOF0sIFwiMDJcIik7XG4gIH0gY2F0Y2gge1xuICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBQS0NTIzggcGxhaW4gUlNBIHByaXZhdGUga2V5XCIpO1xuICB9XG4gIHRoaXMuc2V0UHJpdmF0ZUV4KHQsIHIsIGksIHMsIG4sIGgsIHUsIHApO1xufTtcbnEucHJvdG90eXBlLnJlYWRQS0NTNVB1YktleUhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWLCByID0gdC5nZXRWO1xuICBpZiAodC5pc0FTTjFIRVgoZSkgPT09ICExKVxuICAgIHRocm93IG5ldyBFcnJvcihcImtleUhleCBpcyBub3QgQVNOLjEgaGV4IHN0cmluZ1wiKTtcbiAgdmFyIGkgPSB0LmdldENoaWxkSWR4KGUsIDApO1xuICBpZiAoaS5sZW5ndGggIT09IDIgfHwgZS5zdWJzdHIoaVswXSwgMikgIT09IFwiMDJcIiB8fCBlLnN1YnN0cihpWzFdLCAyKSAhPT0gXCIwMlwiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIndyb25nIGhleCBmb3IgUEtDUyM1IHB1YmxpYyBrZXlcIik7XG4gIHZhciBzID0gcihlLCBpWzBdKSwgbiA9IHIoZSwgaVsxXSk7XG4gIHRoaXMuc2V0UHVibGljKHMsIG4pO1xufTtcbnEucHJvdG90eXBlLnJlYWRQS0NTOFB1YktleUhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBWO1xuICBpZiAodC5pc0FTTjFIRVgoZSkgPT09ICExKVxuICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBBU04uMSBoZXggc3RyaW5nXCIpO1xuICBpZiAodC5nZXRUTFZieUxpc3RFeChlLCAwLCBbMCwgMF0pICE9PSBcIjA2MDkyYTg2NDg4NmY3MGQwMTAxMDFcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgUEtDUzggUlNBIHB1YmxpYyBrZXlcIik7XG4gIHZhciByID0gdC5nZXRUTFZieUxpc3RFeChlLCAwLCBbMSwgMF0pO1xuICB0aGlzLnJlYWRQS0NTNVB1YktleUhleChyKTtcbn07XG5xLnByb3RvdHlwZS5yZWFkQ2VydFB1YktleUhleCA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIsIGk7XG4gIHIgPSBuZXcgTCgpLCByLnJlYWRDZXJ0SGV4KGUpLCBpID0gci5nZXRQdWJsaWNLZXlIZXgoKSwgdGhpcy5yZWFkUEtDUzhQdWJLZXlIZXgoaSk7XG59O1xuZnVuY3Rpb24gT3QoZSwgdCkge1xuICBmb3IgKHZhciByID0gXCJcIiwgaSA9IHQgLyA0IC0gZS5sZW5ndGgsIHMgPSAwOyBzIDwgaTsgcysrKVxuICAgIHIgPSByICsgXCIwXCI7XG4gIHJldHVybiByICsgZTtcbn1cbnEucHJvdG90eXBlLnNpZ24gPSBmdW5jdGlvbihlLCB0KSB7XG4gIHZhciByID0gZnVuY3Rpb24ocykge1xuICAgIHJldHVybiBhLmNyeXB0by5VdGlsLmhhc2hTdHJpbmcocywgdCk7XG4gIH0sIGkgPSByKGUpO1xuICByZXR1cm4gdGhpcy5zaWduV2l0aE1lc3NhZ2VIYXNoKGksIHQpO1xufTtcbnEucHJvdG90eXBlLnNpZ25XaXRoTWVzc2FnZUhhc2ggPSBmdW5jdGlvbihlLCB0KSB7XG4gIHZhciByID0gYS5jcnlwdG8uVXRpbC5nZXRQYWRkZWREaWdlc3RJbmZvSGV4KGUsIHQsIHRoaXMubi5iaXRMZW5ndGgoKSksIGkgPSB2ZShyLCAxNiksIHMgPSB0aGlzLmRvUHJpdmF0ZShpKSwgbiA9IHMudG9TdHJpbmcoMTYpO1xuICByZXR1cm4gT3QobiwgdGhpcy5uLmJpdExlbmd0aCgpKTtcbn07XG5mdW5jdGlvbiBqdChlLCB0LCByKSB7XG4gIGZvciAodmFyIGkgPSBcIlwiLCBzID0gMDsgaS5sZW5ndGggPCB0OyApXG4gICAgaSArPSBBZShyKFBlKGUgKyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgWyhzICYgNDI3ODE5MDA4MCkgPj4gMjQsIChzICYgMTY3MTE2ODApID4+IDE2LCAocyAmIDY1MjgwKSA+PiA4LCBzICYgMjU1XSkpKSksIHMgKz0gMTtcbiAgcmV0dXJuIGk7XG59XG5xLnByb3RvdHlwZS5zaWduUFNTID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICB2YXIgaSA9IGZ1bmN0aW9uKG4pIHtcbiAgICByZXR1cm4gYS5jcnlwdG8uVXRpbC5oYXNoSGV4KG4sIHQpO1xuICB9LCBzID0gaShQZShlKSk7XG4gIHJldHVybiByID09PSB2b2lkIDAgJiYgKHIgPSAtMSksIHRoaXMuc2lnbldpdGhNZXNzYWdlSGFzaFBTUyhzLCB0LCByKTtcbn07XG5xLnByb3RvdHlwZS5zaWduV2l0aE1lc3NhZ2VIYXNoUFNTID0gZnVuY3Rpb24oZSwgdCwgcikge1xuICB2YXIgaSA9IEFlKGUpLCBzID0gaS5sZW5ndGgsIG4gPSB0aGlzLm4uYml0TGVuZ3RoKCkgLSAxLCBoID0gTWF0aC5jZWlsKG4gLyA4KSwgdSwgcCA9IGZ1bmN0aW9uKGcpIHtcbiAgICByZXR1cm4gYS5jcnlwdG8uVXRpbC5oYXNoSGV4KGcsIHQpO1xuICB9O1xuICBpZiAociA9PT0gLTEgfHwgciA9PT0gdm9pZCAwKVxuICAgIHIgPSBzO1xuICBlbHNlIGlmIChyID09PSAtMilcbiAgICByID0gaCAtIHMgLSAyO1xuICBlbHNlIGlmIChyIDwgLTIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBzYWx0IGxlbmd0aFwiKTtcbiAgaWYgKGggPCBzICsgciArIDIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZGF0YSB0b28gbG9uZ1wiKTtcbiAgdmFyIGMgPSBcIlwiO1xuICByID4gMCAmJiAoYyA9IG5ldyBBcnJheShyKSwgbmV3IEdlKCkubmV4dEJ5dGVzKGMpLCBjID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGMpKTtcbiAgdmFyIHkgPSBBZShwKFBlKFwiXFwwXFwwXFwwXFwwXFwwXFwwXFwwXFwwXCIgKyBpICsgYykpKSwgdiA9IFtdO1xuICBmb3IgKHUgPSAwOyB1IDwgaCAtIHIgLSBzIC0gMjsgdSArPSAxKVxuICAgIHZbdV0gPSAwO1xuICB2YXIgbyA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCB2KSArIFwiXHUwMDAxXCIgKyBjLCBsID0ganQoeSwgby5sZW5ndGgsIHApLCBmID0gW107XG4gIGZvciAodSA9IDA7IHUgPCBvLmxlbmd0aDsgdSArPSAxKVxuICAgIGZbdV0gPSBvLmNoYXJDb2RlQXQodSkgXiBsLmNoYXJDb2RlQXQodSk7XG4gIHZhciBkID0gNjUyODAgPj4gOCAqIGggLSBuICYgMjU1O1xuICBmb3IgKGZbMF0gJj0gfmQsIHUgPSAwOyB1IDwgczsgdSsrKVxuICAgIGYucHVzaCh5LmNoYXJDb2RlQXQodSkpO1xuICByZXR1cm4gZi5wdXNoKDE4OCksIE90KHRoaXMuZG9Qcml2YXRlKG5ldyBSKGYpKS50b1N0cmluZygxNiksIHRoaXMubi5iaXRMZW5ndGgoKSk7XG59O1xuZnVuY3Rpb24gVnQoZSkge1xuICBmb3IgKHZhciB0IGluIGEuY3J5cHRvLlV0aWwuRElHRVNUSU5GT0hFQUQpIHtcbiAgICB2YXIgciA9IGEuY3J5cHRvLlV0aWwuRElHRVNUSU5GT0hFQURbdF0sIGkgPSByLmxlbmd0aDtcbiAgICBpZiAoZS5zdWJzdHJpbmcoMCwgaSkgPT0gcikge1xuICAgICAgdmFyIHMgPSBbdCwgZS5zdWJzdHJpbmcoaSldO1xuICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICB9XG4gIHJldHVybiBbXTtcbn1cbnEucHJvdG90eXBlLnZlcmlmeSA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgaWYgKHQgPSB0LnRvTG93ZXJDYXNlKCksIHQubWF0Y2goL15bMC05YS1mXSskLykgPT0gbnVsbClcbiAgICByZXR1cm4gITE7XG4gIHZhciByID0gdmUodCwgMTYpLCBpID0gdGhpcy5uLmJpdExlbmd0aCgpO1xuICBpZiAoci5iaXRMZW5ndGgoKSA+IGkpXG4gICAgcmV0dXJuICExO1xuICB2YXIgcyA9IHRoaXMuZG9QdWJsaWMociksIG4gPSBzLnRvU3RyaW5nKDE2KTtcbiAgaWYgKG4ubGVuZ3RoICsgMyAhPSBpIC8gNClcbiAgICByZXR1cm4gITE7XG4gIHZhciBoID0gbi5yZXBsYWNlKC9eMWYrMDAvLCBcIlwiKSwgdSA9IFZ0KGgpO1xuICBpZiAodS5sZW5ndGggPT0gMClcbiAgICByZXR1cm4gITE7XG4gIHZhciBwID0gdVswXSwgYyA9IHVbMV0sIHkgPSBmdW5jdGlvbihvKSB7XG4gICAgcmV0dXJuIGEuY3J5cHRvLlV0aWwuaGFzaFN0cmluZyhvLCBwKTtcbiAgfSwgdiA9IHkoZSk7XG4gIHJldHVybiBjID09IHY7XG59O1xucS5wcm90b3R5cGUudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoID0gZnVuY3Rpb24oZSwgdCkge1xuICBpZiAodC5sZW5ndGggIT0gTWF0aC5jZWlsKHRoaXMubi5iaXRMZW5ndGgoKSAvIDQpKVxuICAgIHJldHVybiAhMTtcbiAgdmFyIHIgPSB2ZSh0LCAxNik7XG4gIGlmIChyLmJpdExlbmd0aCgpID4gdGhpcy5uLmJpdExlbmd0aCgpKVxuICAgIHJldHVybiAwO1xuICB2YXIgaSA9IHRoaXMuZG9QdWJsaWMociksIHMgPSBpLnRvU3RyaW5nKDE2KS5yZXBsYWNlKC9eMWYrMDAvLCBcIlwiKSwgbiA9IFZ0KHMpO1xuICBpZiAobi5sZW5ndGggPT0gMClcbiAgICByZXR1cm4gITE7XG4gIG5bMF07XG4gIHZhciBoID0gblsxXTtcbiAgcmV0dXJuIGggPT0gZTtcbn07XG5xLnByb3RvdHlwZS52ZXJpZnlQU1MgPSBmdW5jdGlvbihlLCB0LCByLCBpKSB7XG4gIHZhciBzID0gZnVuY3Rpb24oaCkge1xuICAgIHJldHVybiBhLmNyeXB0by5VdGlsLmhhc2hIZXgoaCwgcik7XG4gIH0sIG4gPSBzKFBlKGUpKTtcbiAgcmV0dXJuIGkgPT09IHZvaWQgMCAmJiAoaSA9IC0xKSwgdGhpcy52ZXJpZnlXaXRoTWVzc2FnZUhhc2hQU1MobiwgdCwgciwgaSk7XG59O1xucS5wcm90b3R5cGUudmVyaWZ5V2l0aE1lc3NhZ2VIYXNoUFNTID0gZnVuY3Rpb24oZSwgdCwgciwgaSkge1xuICBpZiAodC5sZW5ndGggIT0gTWF0aC5jZWlsKHRoaXMubi5iaXRMZW5ndGgoKSAvIDQpKVxuICAgIHJldHVybiAhMTtcbiAgdmFyIHMgPSBuZXcgUih0LCAxNiksIG4gPSBmdW5jdGlvbihiKSB7XG4gICAgcmV0dXJuIGEuY3J5cHRvLlV0aWwuaGFzaEhleChiLCByKTtcbiAgfSwgaCA9IEFlKGUpLCB1ID0gaC5sZW5ndGgsIHAgPSB0aGlzLm4uYml0TGVuZ3RoKCkgLSAxLCBjID0gTWF0aC5jZWlsKHAgLyA4KSwgeTtcbiAgaWYgKGkgPT09IC0xIHx8IGkgPT09IHZvaWQgMClcbiAgICBpID0gdTtcbiAgZWxzZSBpZiAoaSA9PT0gLTIpXG4gICAgaSA9IGMgLSB1IC0gMjtcbiAgZWxzZSBpZiAoaSA8IC0yKVxuICAgIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgc2FsdCBsZW5ndGhcIik7XG4gIGlmIChjIDwgdSArIGkgKyAyKVxuICAgIHRocm93IG5ldyBFcnJvcihcImRhdGEgdG9vIGxvbmdcIik7XG4gIHZhciB2ID0gdGhpcy5kb1B1YmxpYyhzKS50b0J5dGVBcnJheSgpO1xuICBmb3IgKHkgPSAwOyB5IDwgdi5sZW5ndGg7IHkgKz0gMSlcbiAgICB2W3ldICY9IDI1NTtcbiAgZm9yICg7IHYubGVuZ3RoIDwgYzsgKVxuICAgIHYudW5zaGlmdCgwKTtcbiAgaWYgKHZbYyAtIDFdICE9PSAxODgpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZW5jb2RlZCBtZXNzYWdlIGRvZXMgbm90IGVuZCBpbiAweGJjXCIpO1xuICB2ID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIHYpO1xuICB2YXIgbyA9IHYuc3Vic3RyKDAsIGMgLSB1IC0gMSksIGwgPSB2LnN1YnN0cihvLmxlbmd0aCwgdSksIGYgPSA2NTI4MCA+PiA4ICogYyAtIHAgJiAyNTU7XG4gIGlmIChvLmNoYXJDb2RlQXQoMCkgJiBmKVxuICAgIHRocm93IG5ldyBFcnJvcihcImJpdHMgYmV5b25kIGtleXNpemUgbm90IHplcm9cIik7XG4gIHZhciBkID0ganQobCwgby5sZW5ndGgsIG4pLCBnID0gW107XG4gIGZvciAoeSA9IDA7IHkgPCBvLmxlbmd0aDsgeSArPSAxKVxuICAgIGdbeV0gPSBvLmNoYXJDb2RlQXQoeSkgXiBkLmNoYXJDb2RlQXQoeSk7XG4gIGdbMF0gJj0gfmY7XG4gIHZhciBTID0gYyAtIHUgLSBpIC0gMjtcbiAgZm9yICh5ID0gMDsgeSA8IFM7IHkgKz0gMSlcbiAgICBpZiAoZ1t5XSAhPT0gMClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImxlZnRtb3N0IG9jdGV0cyBub3QgemVyb1wiKTtcbiAgaWYgKGdbU10gIT09IDEpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiMHgwMSBtYXJrZXIgbm90IGZvdW5kXCIpO1xuICByZXR1cm4gbCA9PT0gQWUobihQZShcIlxcMFxcMFxcMFxcMFxcMFxcMFxcMFxcMFwiICsgaCArIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBnLnNsaWNlKC1pKSkpKSk7XG59O1xucS5TQUxUX0xFTl9ITEVOID0gLTE7XG5xLlNBTFRfTEVOX01BWCA9IC0yO1xucS5TQUxUX0xFTl9SRUNPVkVSID0gLTI7XG5mdW5jdGlvbiBMKGUpIHtcbiAgdmFyIHQgPSBWLCByID0gdC5nZXRDaGlsZElkeCwgaSA9IHQuZ2V0VjtcbiAgdC5kdW1wO1xuICB2YXIgcyA9IHQucGFyc2UsIG4gPSB0LmdldFRMViwgaCA9IHQuZ2V0VmJ5TGlzdCwgdSA9IHQuZ2V0VmJ5TGlzdEV4LCBwID0gdC5nZXRUTFZieUxpc3QsIGMgPSB0LmdldFRMVmJ5TGlzdEV4LCB5ID0gdC5nZXRJZHhieUxpc3QsIHYgPSB0LmdldElkeGJ5TGlzdEV4LCBvID0gdC5nZXRWaWR4LCBsID0gdC5nZXRJbnQsIGYgPSB0Lm9pZG5hbWUsIGQgPSB0LmhleHRvb2lkc3RyLCBnID0gaWUsIFMsIGIgPSBFcnJvcjtcbiAgdHJ5IHtcbiAgICBTID0gYS5hc24xLng1MDkuQWxnb3JpdGhtSWRlbnRpZmllci5QU1NOQU1FMkFTTjFUTFY7XG4gIH0gY2F0Y2gge1xuICB9XG4gIHRoaXMuSEVYMlNUQUcgPSB7IFwiMGNcIjogXCJ1dGY4XCIsIDEzOiBcInByblwiLCAxNjogXCJpYTVcIiwgXCIxYVwiOiBcInZpc1wiLCBcIjFlXCI6IFwiYm1wXCIgfSwgdGhpcy5oZXggPSBudWxsLCB0aGlzLnZlcnNpb24gPSAwLCB0aGlzLmZvZmZzZXQgPSAwLCB0aGlzLmFFeHRJbmZvID0gbnVsbCwgdGhpcy5nZXRWZXJzaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuaGV4ID09PSBudWxsIHx8IHRoaXMudmVyc2lvbiAhPT0gMClcbiAgICAgIHJldHVybiB0aGlzLnZlcnNpb247XG4gICAgdmFyIG0gPSBwKHRoaXMuaGV4LCAwLCBbMCwgMF0pO1xuICAgIGlmIChtLnN1YnN0cigwLCAyKSA9PSBcImEwXCIpIHtcbiAgICAgIHZhciBFID0gcChtLCAwLCBbMF0pLCB3ID0gbChFLCAwKTtcbiAgICAgIGlmICh3IDwgMCB8fCAyIDwgdylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIHZlcnNpb24gZmllbGRcIik7XG4gICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdyArIDEsIHRoaXMudmVyc2lvbjtcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSAxLCB0aGlzLmZvZmZzZXQgPSAtMSwgMTtcbiAgfSwgdGhpcy5nZXRTZXJpYWxOdW1iZXJIZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdSh0aGlzLmhleCwgMCwgWzAsIDBdLCBcIjAyXCIpO1xuICB9LCB0aGlzLmdldFNpZ25hdHVyZUFsZ29yaXRobUZpZWxkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG0gPSBjKHRoaXMuaGV4LCAwLCBbMCwgMV0pO1xuICAgIHJldHVybiB0aGlzLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lKG0pO1xuICB9LCB0aGlzLmdldEFsZ29yaXRobUlkZW50aWZpZXJOYW1lID0gZnVuY3Rpb24obSkge1xuICAgIGZvciAodmFyIEUgaW4gUylcbiAgICAgIGlmIChtID09PSBTW0VdKVxuICAgICAgICByZXR1cm4gRTtcbiAgICByZXR1cm4gZih1KG0sIDAsIFswXSwgXCIwNlwiKSk7XG4gIH0sIHRoaXMuZ2V0SXNzdWVyID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHJldHVybiB0aGlzLmdldFg1MDBOYW1lKHRoaXMuZ2V0SXNzdWVySGV4KCksIG0sIEUpO1xuICB9LCB0aGlzLmdldElzc3VlckhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBwKHRoaXMuaGV4LCAwLCBbMCwgMyArIHRoaXMuZm9mZnNldF0sIFwiMzBcIik7XG4gIH0sIHRoaXMuZ2V0SXNzdWVyU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG0gPSB0aGlzLmdldElzc3VlcigpO1xuICAgIHJldHVybiBtLnN0cjtcbiAgfSwgdGhpcy5nZXRTdWJqZWN0ID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHJldHVybiB0aGlzLmdldFg1MDBOYW1lKHRoaXMuZ2V0U3ViamVjdEhleCgpLCBtLCBFKTtcbiAgfSwgdGhpcy5nZXRTdWJqZWN0SGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHAodGhpcy5oZXgsIDAsIFswLCA1ICsgdGhpcy5mb2Zmc2V0XSwgXCIzMFwiKTtcbiAgfSwgdGhpcy5nZXRTdWJqZWN0U3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG0gPSB0aGlzLmdldFN1YmplY3QoKTtcbiAgICByZXR1cm4gbS5zdHI7XG4gIH0sIHRoaXMuZ2V0Tm90QmVmb3JlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG0gPSBoKHRoaXMuaGV4LCAwLCBbMCwgNCArIHRoaXMuZm9mZnNldCwgMF0pO1xuICAgIHJldHVybiBtID0gbS5yZXBsYWNlKC8oLi4pL2csIFwiJSQxXCIpLCBtID0gZGVjb2RlVVJJQ29tcG9uZW50KG0pLCBtO1xuICB9LCB0aGlzLmdldE5vdEFmdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG0gPSBoKHRoaXMuaGV4LCAwLCBbMCwgNCArIHRoaXMuZm9mZnNldCwgMV0pO1xuICAgIHJldHVybiBtID0gbS5yZXBsYWNlKC8oLi4pL2csIFwiJSQxXCIpLCBtID0gZGVjb2RlVVJJQ29tcG9uZW50KG0pLCBtO1xuICB9LCB0aGlzLmdldFB1YmxpY0tleUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldFNQS0koKTtcbiAgfSwgdGhpcy5nZXRTUEtJID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHAodGhpcy5oZXgsIDAsIFswLCA2ICsgdGhpcy5mb2Zmc2V0XSwgXCIzMFwiKTtcbiAgfSwgdGhpcy5nZXRTUEtJVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IHRoaXMuZ2V0U1BLSSgpO1xuICAgIHJldHVybiBtID09IG51bGwgPyBudWxsIDogaChtLCAwLCBbMV0sIFwiMDNcIiwgITApO1xuICB9LCB0aGlzLmdldFB1YmxpY0tleUlkeCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB5KHRoaXMuaGV4LCAwLCBbMCwgNiArIHRoaXMuZm9mZnNldF0sIFwiMzBcIik7XG4gIH0sIHRoaXMuZ2V0UHVibGljS2V5Q29udGVudElkeCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtID0gdGhpcy5nZXRQdWJsaWNLZXlJZHgoKTtcbiAgICByZXR1cm4geSh0aGlzLmhleCwgbSwgWzEsIDBdLCBcIjMwXCIpO1xuICB9LCB0aGlzLmdldFB1YmxpY0tleSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBrLmdldEtleSh0aGlzLmdldFB1YmxpY0tleUhleCgpLCBudWxsLCBcInBrY3M4cHViXCIpO1xuICB9LCB0aGlzLmdldFNpZ25hdHVyZUFsZ29yaXRobU5hbWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IHAodGhpcy5oZXgsIDAsIFsxXSwgXCIzMFwiKTtcbiAgICByZXR1cm4gdGhpcy5nZXRBbGdvcml0aG1JZGVudGlmaWVyTmFtZShtKTtcbiAgfSwgdGhpcy5nZXRTaWduYXR1cmVWYWx1ZUhleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBoKHRoaXMuaGV4LCAwLCBbMl0sIFwiMDNcIiwgITApO1xuICB9LCB0aGlzLnZlcmlmeVNpZ25hdHVyZSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IHRoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtRmllbGQoKSwgdyA9IHRoaXMuZ2V0U2lnbmF0dXJlVmFsdWVIZXgoKSwgeCA9IHAodGhpcy5oZXgsIDAsIFswXSwgXCIzMFwiKSwgRiA9IG5ldyBhLmNyeXB0by5TaWduYXR1cmUoeyBhbGc6IEUgfSk7XG4gICAgcmV0dXJuIEYuaW5pdChtKSwgRi51cGRhdGVIZXgoeCksIEYudmVyaWZ5KHcpO1xuICB9LCB0aGlzLnBhcnNlRXh0ID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFLCB3LCB4O1xuICAgIGlmIChtID09PSB2b2lkIDApIHtcbiAgICAgIGlmICh4ID0gdGhpcy5oZXgsIHRoaXMudmVyc2lvbiAhPT0gMylcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgRSA9IHkoeCwgMCwgWzAsIDcsIDBdLCBcIjMwXCIpLCB3ID0gcih4LCBFKTtcbiAgICB9IGVsc2Uge1xuICAgICAgeCA9IGllKG0pO1xuICAgICAgdmFyIEYgPSB5KHgsIDAsIFswLCAzLCAwLCAwXSwgXCIwNlwiKTtcbiAgICAgIGlmIChpKHgsIEYpICE9IFwiMmE4NjQ4ODZmNzBkMDEwOTBlXCIpIHtcbiAgICAgICAgdGhpcy5hRXh0SW5mbyA9IG5ldyBBcnJheSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBFID0geSh4LCAwLCBbMCwgMywgMCwgMSwgMF0sIFwiMzBcIiksIHcgPSByKHgsIEUpLCB0aGlzLmhleCA9IHg7XG4gICAgfVxuICAgIHRoaXMuYUV4dEluZm8gPSBuZXcgQXJyYXkoKTtcbiAgICBmb3IgKHZhciBQID0gMDsgUCA8IHcubGVuZ3RoOyBQKyspIHtcbiAgICAgIHZhciBUID0ge307XG4gICAgICBULmNyaXRpY2FsID0gITE7XG4gICAgICB2YXIgSCA9IHIoeCwgd1tQXSksIEMgPSAwO1xuICAgICAgSC5sZW5ndGggPT09IDMgJiYgKFQuY3JpdGljYWwgPSAhMCwgQyA9IDEpLCBULm9pZCA9IHQuaGV4dG9vaWRzdHIoaCh4LCB3W1BdLCBbMF0sIFwiMDZcIikpO1xuICAgICAgdmFyIEIgPSB5KHgsIHdbUF0sIFsxICsgQ10pO1xuICAgICAgVC52aWR4ID0gbyh4LCBCKSwgdGhpcy5hRXh0SW5mby5wdXNoKFQpO1xuICAgIH1cbiAgfSwgdGhpcy5nZXRFeHRJbmZvID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0gdGhpcy5hRXh0SW5mbywgdyA9IG07XG4gICAgaWYgKG0ubWF0Y2goL15bMC05Ll0rJC8pIHx8ICh3ID0gYS5hc24xLng1MDkuT0lELm5hbWUyb2lkKG0pKSwgdyAhPT0gXCJcIikge1xuICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBFLmxlbmd0aDsgeCsrKVxuICAgICAgICBpZiAoRVt4XS5vaWQgPT09IHcpXG4gICAgICAgICAgcmV0dXJuIEVbeF07XG4gICAgfVxuICB9LCB0aGlzLmdldENyaXRpY2FsRXh0ViA9IGZ1bmN0aW9uKG0sIEUsIHcpIHtcbiAgICBpZiAoRSAhPSBudWxsKVxuICAgICAgcmV0dXJuIFtFLCB3XTtcbiAgICB2YXIgeCA9IHRoaXMuZ2V0RXh0SW5mbyhtKTtcbiAgICByZXR1cm4geCA9PSBudWxsID8gW251bGwsIG51bGxdIDogW24odGhpcy5oZXgsIHgudmlkeCksIHguY3JpdGljYWxdO1xuICB9LCB0aGlzLmdldEV4dEJhc2ljQ29uc3RyYWludHMgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwiYmFzaWNDb25zdHJhaW50c1wiKTtcbiAgICAgIGlmICh3ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCB3LnZpZHgpLCBFID0gdy5jcml0aWNhbDtcbiAgICB9XG4gICAgdmFyIHggPSB7IGV4dG5hbWU6IFwiYmFzaWNDb25zdHJhaW50c1wiIH07XG4gICAgaWYgKEUgJiYgKHguY3JpdGljYWwgPSAhMCksIG0gPT09IFwiMzAwMFwiKVxuICAgICAgcmV0dXJuIHg7XG4gICAgaWYgKG0gPT09IFwiMzAwMzAxMDFmZlwiKVxuICAgICAgcmV0dXJuIHguY0EgPSAhMCwgeDtcbiAgICBpZiAobS5zdWJzdHIoMCwgMTIpID09PSBcIjMwMDYwMTAxZmYwMlwiKSB7XG4gICAgICB2YXIgRiA9IGkobSwgMTApLCBQID0gcGFyc2VJbnQoRiwgMTYpO1xuICAgICAgcmV0dXJuIHguY0EgPSAhMCwgeC5wYXRoTGVuID0gUCwgeDtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaEV4dFYgcGFyc2UgZXJyb3I6IFwiICsgbSk7XG4gIH0sIHRoaXMuZ2V0RXh0TmFtZUNvbnN0cmFpbnRzID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0gdGhpcy5nZXRDcml0aWNhbEV4dFYoXCJuYW1lQ29uc3RyYWludHNcIiwgbSwgRSk7XG4gICAgaWYgKG0gPSB3WzBdLCBFID0gd1sxXSwgbSAhPSBudWxsKSB7XG4gICAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJuYW1lQ29uc3RyYWludHNcIiB9O1xuICAgICAgRSAmJiAoeC5jcml0aWNhbCA9ICEwKTtcbiAgICAgIGZvciAodmFyIEYgPSByKG0sIDApLCBQID0gMDsgUCA8IEYubGVuZ3RoOyBQKyspIHtcbiAgICAgICAgZm9yICh2YXIgVCA9IFtdLCBIID0gcihtLCBGW1BdKSwgQyA9IDA7IEMgPCBILmxlbmd0aDsgQysrKSB7XG4gICAgICAgICAgdmFyIEIgPSBuKG0sIEhbQ10pLCBPID0gdGhpcy5nZXRHZW5lcmFsU3VidHJlZShCKTtcbiAgICAgICAgICBULnB1c2goTyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGogPSBtLnN1YnN0cihGW1BdLCAyKTtcbiAgICAgICAgaiA9PSBcImEwXCIgPyB4LnBlcm1pdCA9IFQgOiBqID09IFwiYTFcIiAmJiAoeC5leGNsdWRlID0gVCk7XG4gICAgICB9XG4gICAgICByZXR1cm4geDtcbiAgICB9XG4gIH0sIHRoaXMuZ2V0R2VuZXJhbFN1YnRyZWUgPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSByKG0sIDApLCB3ID0gRS5sZW5ndGg7XG4gICAgaWYgKHcgPCAxIHx8IDIgPCB3KVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwid3JvbmcgbnVtIGVsZW1lbnRzXCIpO1xuICAgIGZvciAodmFyIHggPSB0aGlzLmdldEdlbmVyYWxOYW1lKG4obSwgRVswXSkpLCBGID0gMTsgRiA8IHc7IEYrKykge1xuICAgICAgdmFyIFAgPSBtLnN1YnN0cihFW0ZdLCAyKSwgVCA9IGkobSwgRVtGXSksIEggPSBwYXJzZUludChULCAxNik7XG4gICAgICBQID09IFwiODBcIiAmJiAoeC5taW4gPSBIKSwgUCA9PSBcIjgxXCIgJiYgKHgubWF4ID0gSCk7XG4gICAgfVxuICAgIHJldHVybiB4O1xuICB9LCB0aGlzLmdldEV4dEtleVVzYWdlID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0gdGhpcy5nZXRDcml0aWNhbEV4dFYoXCJrZXlVc2FnZVwiLCBtLCBFKTtcbiAgICBpZiAobSA9IHdbMF0sIEUgPSB3WzFdLCBtICE9IG51bGwpIHtcbiAgICAgIHZhciB4ID0geyBleHRuYW1lOiBcImtleVVzYWdlXCIgfTtcbiAgICAgIHJldHVybiBFICYmICh4LmNyaXRpY2FsID0gITApLCB4Lm5hbWVzID0gdGhpcy5nZXRFeHRLZXlVc2FnZVN0cmluZyhtKS5zcGxpdChcIixcIiksIHg7XG4gICAgfVxuICB9LCB0aGlzLmdldEV4dEtleVVzYWdlQmluID0gZnVuY3Rpb24obSkge1xuICAgIGlmIChtID09PSB2b2lkIDApIHtcbiAgICAgIHZhciBFID0gdGhpcy5nZXRFeHRJbmZvKFwia2V5VXNhZ2VcIik7XG4gICAgICBpZiAoRSA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCBFLnZpZHgpO1xuICAgIH1cbiAgICBpZiAobS5sZW5ndGggIT0gOCAmJiBtLmxlbmd0aCAhPSAxMClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBrZXkgdXNhZ2UgdmFsdWU6IFwiICsgbSk7XG4gICAgdmFyIHcgPSBcIjAwMDAwMDAwMDAwMDAwMFwiICsgcGFyc2VJbnQobS5zdWJzdHIoNiksIDE2KS50b1N0cmluZygyKTtcbiAgICByZXR1cm4gbS5sZW5ndGggPT0gOCAmJiAodyA9IHcuc2xpY2UoLTgpKSwgbS5sZW5ndGggPT0gMTAgJiYgKHcgPSB3LnNsaWNlKC0xNikpLCB3ID0gdy5yZXBsYWNlKC8wKyQvLCBcIlwiKSwgdyA9PSBcIlwiICYmICh3ID0gXCIwXCIpLCB3O1xuICB9LCB0aGlzLmdldEV4dEtleVVzYWdlU3RyaW5nID0gZnVuY3Rpb24obSkge1xuICAgIGZvciAodmFyIEUgPSB0aGlzLmdldEV4dEtleVVzYWdlQmluKG0pLCB3ID0gbmV3IEFycmF5KCksIHggPSAwOyB4IDwgRS5sZW5ndGg7IHgrKylcbiAgICAgIEUuc3Vic3RyKHgsIDEpID09IFwiMVwiICYmIHcucHVzaChMLktFWVVTQUdFX05BTUVbeF0pO1xuICAgIHJldHVybiB3LmpvaW4oXCIsXCIpO1xuICB9LCB0aGlzLmdldEV4dFN1YmplY3RLZXlJZGVudGlmaWVyID0gZnVuY3Rpb24obSwgRSkge1xuICAgIGlmIChtID09PSB2b2lkIDAgJiYgRSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuZ2V0RXh0SW5mbyhcInN1YmplY3RLZXlJZGVudGlmaWVyXCIpO1xuICAgICAgaWYgKHcgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbSA9IG4odGhpcy5oZXgsIHcudmlkeCksIEUgPSB3LmNyaXRpY2FsO1xuICAgIH1cbiAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJzdWJqZWN0S2V5SWRlbnRpZmllclwiIH07XG4gICAgRSAmJiAoeC5jcml0aWNhbCA9ICEwKTtcbiAgICB2YXIgRiA9IGkobSwgMCk7XG4gICAgcmV0dXJuIHgua2lkID0geyBoZXg6IEYgfSwgeDtcbiAgfSwgdGhpcy5nZXRFeHRBdXRob3JpdHlLZXlJZGVudGlmaWVyID0gZnVuY3Rpb24obSwgRSkge1xuICAgIGlmIChtID09PSB2b2lkIDAgJiYgRSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuZ2V0RXh0SW5mbyhcImF1dGhvcml0eUtleUlkZW50aWZpZXJcIik7XG4gICAgICBpZiAodyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBtID0gbih0aGlzLmhleCwgdy52aWR4KSwgRSA9IHcuY3JpdGljYWw7XG4gICAgfVxuICAgIHZhciB4ID0geyBleHRuYW1lOiBcImF1dGhvcml0eUtleUlkZW50aWZpZXJcIiB9O1xuICAgIEUgJiYgKHguY3JpdGljYWwgPSAhMCk7XG4gICAgZm9yICh2YXIgRiA9IHIobSwgMCksIFAgPSAwOyBQIDwgRi5sZW5ndGg7IFArKykge1xuICAgICAgdmFyIFQgPSBtLnN1YnN0cihGW1BdLCAyKTtcbiAgICAgIGlmIChUID09PSBcIjgwXCIgJiYgKHgua2lkID0geyBoZXg6IGkobSwgRltQXSkgfSksIFQgPT09IFwiYTFcIikge1xuICAgICAgICB2YXIgSCA9IG4obSwgRltQXSksIEMgPSB0aGlzLmdldEdlbmVyYWxOYW1lcyhIKTtcbiAgICAgICAgeC5pc3N1ZXIgPSBDWzBdLmRuO1xuICAgICAgfVxuICAgICAgVCA9PT0gXCI4MlwiICYmICh4LnNuID0geyBoZXg6IGkobSwgRltQXSkgfSk7XG4gICAgfVxuICAgIHJldHVybiB4O1xuICB9LCB0aGlzLmdldEV4dEV4dEtleVVzYWdlID0gZnVuY3Rpb24obSwgRSkge1xuICAgIGlmIChtID09PSB2b2lkIDAgJiYgRSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuZ2V0RXh0SW5mbyhcImV4dEtleVVzYWdlXCIpO1xuICAgICAgaWYgKHcgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbSA9IG4odGhpcy5oZXgsIHcudmlkeCksIEUgPSB3LmNyaXRpY2FsO1xuICAgIH1cbiAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJleHRLZXlVc2FnZVwiLCBhcnJheTogW10gfTtcbiAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgIGZvciAodmFyIEYgPSByKG0sIDApLCBQID0gMDsgUCA8IEYubGVuZ3RoOyBQKyspXG4gICAgICB4LmFycmF5LnB1c2goZihpKG0sIEZbUF0pKSk7XG4gICAgcmV0dXJuIHg7XG4gIH0sIHRoaXMuZ2V0RXh0RXh0S2V5VXNhZ2VOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG0gPSB0aGlzLmdldEV4dEluZm8oXCJleHRLZXlVc2FnZVwiKTtcbiAgICBpZiAobSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuIG07XG4gICAgdmFyIEUgPSBuZXcgQXJyYXkoKSwgdyA9IG4odGhpcy5oZXgsIG0udmlkeCk7XG4gICAgaWYgKHcgPT09IFwiXCIpXG4gICAgICByZXR1cm4gRTtcbiAgICBmb3IgKHZhciB4ID0gcih3LCAwKSwgRiA9IDA7IEYgPCB4Lmxlbmd0aDsgRisrKVxuICAgICAgRS5wdXNoKGYoaSh3LCB4W0ZdKSkpO1xuICAgIHJldHVybiBFO1xuICB9LCB0aGlzLmdldEV4dFN1YmplY3RBbHROYW1lID0gZnVuY3Rpb24obSwgRSkge1xuICAgIGlmIChtID09PSB2b2lkIDAgJiYgRSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuZ2V0RXh0SW5mbyhcInN1YmplY3RBbHROYW1lXCIpO1xuICAgICAgaWYgKHcgPT09IHZvaWQgMClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbSA9IG4odGhpcy5oZXgsIHcudmlkeCksIEUgPSB3LmNyaXRpY2FsO1xuICAgIH1cbiAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJzdWJqZWN0QWx0TmFtZVwiLCBhcnJheTogW10gfTtcbiAgICByZXR1cm4gRSAmJiAoeC5jcml0aWNhbCA9ICEwKSwgeC5hcnJheSA9IHRoaXMuZ2V0R2VuZXJhbE5hbWVzKG0pLCB4O1xuICB9LCB0aGlzLmdldEV4dElzc3VlckFsdE5hbWUgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwiaXNzdWVyQWx0TmFtZVwiKTtcbiAgICAgIGlmICh3ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCB3LnZpZHgpLCBFID0gdy5jcml0aWNhbDtcbiAgICB9XG4gICAgdmFyIHggPSB7IGV4dG5hbWU6IFwiaXNzdWVyQWx0TmFtZVwiLCBhcnJheTogW10gfTtcbiAgICByZXR1cm4gRSAmJiAoeC5jcml0aWNhbCA9ICEwKSwgeC5hcnJheSA9IHRoaXMuZ2V0R2VuZXJhbE5hbWVzKG0pLCB4O1xuICB9LCB0aGlzLmdldEdlbmVyYWxOYW1lcyA9IGZ1bmN0aW9uKG0pIHtcbiAgICBmb3IgKHZhciBFID0gcihtLCAwKSwgdyA9IFtdLCB4ID0gMDsgeCA8IEUubGVuZ3RoOyB4KyspIHtcbiAgICAgIHZhciBGID0gdGhpcy5nZXRHZW5lcmFsTmFtZShuKG0sIEVbeF0pKTtcbiAgICAgIEYgIT09IHZvaWQgMCAmJiB3LnB1c2goRik7XG4gICAgfVxuICAgIHJldHVybiB3O1xuICB9LCB0aGlzLmdldEdlbmVyYWxOYW1lID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0gbS5zdWJzdHIoMCwgMiksIHcgPSBpKG0sIDApLCB4ID0gQWUodyk7XG4gICAgaWYgKEUgPT0gXCI4MVwiKVxuICAgICAgcmV0dXJuIHsgcmZjODIyOiB4IH07XG4gICAgaWYgKEUgPT0gXCI4MlwiKVxuICAgICAgcmV0dXJuIHsgZG5zOiB4IH07XG4gICAgaWYgKEUgPT0gXCI4NlwiKVxuICAgICAgcmV0dXJuIHsgdXJpOiB4IH07XG4gICAgaWYgKEUgPT0gXCI4N1wiKVxuICAgICAgcmV0dXJuIHsgaXA6IHR0KHcpIH07XG4gICAgaWYgKEUgPT0gXCJhNFwiKVxuICAgICAgcmV0dXJuIHsgZG46IHRoaXMuZ2V0WDUwME5hbWUodykgfTtcbiAgICBpZiAoRSA9PSBcImEwXCIpXG4gICAgICByZXR1cm4geyBvdGhlcjogdGhpcy5nZXRPdGhlck5hbWUobSkgfTtcbiAgfSwgdGhpcy5nZXRFeHRTdWJqZWN0QWx0TmFtZTIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSwgRSwgdywgeCA9IHRoaXMuZ2V0RXh0SW5mbyhcInN1YmplY3RBbHROYW1lXCIpO1xuICAgIGlmICh4ID09PSB2b2lkIDApXG4gICAgICByZXR1cm4geDtcbiAgICBmb3IgKHZhciBGID0gbmV3IEFycmF5KCksIFAgPSBuKHRoaXMuaGV4LCB4LnZpZHgpLCBUID0gcihQLCAwKSwgSCA9IDA7IEggPCBULmxlbmd0aDsgSCsrKVxuICAgICAgdyA9IFAuc3Vic3RyKFRbSF0sIDIpLCBtID0gaShQLCBUW0hdKSwgdyA9PT0gXCI4MVwiICYmIChFID0gVyhtKSwgRi5wdXNoKFtcIk1BSUxcIiwgRV0pKSwgdyA9PT0gXCI4MlwiICYmIChFID0gVyhtKSwgRi5wdXNoKFtcIkROU1wiLCBFXSkpLCB3ID09PSBcIjg0XCIgJiYgKEUgPSBMLmhleDJkbihtLCAwKSwgRi5wdXNoKFtcIkROXCIsIEVdKSksIHcgPT09IFwiODZcIiAmJiAoRSA9IFcobSksIEYucHVzaChbXCJVUklcIiwgRV0pKSwgdyA9PT0gXCI4N1wiICYmIChFID0gdHQobSksIEYucHVzaChbXCJJUFwiLCBFXSkpO1xuICAgIHJldHVybiBGO1xuICB9LCB0aGlzLmdldEV4dENSTERpc3RyaWJ1dGlvblBvaW50cyA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICBpZiAobSA9PT0gdm9pZCAwICYmIEUgPT09IHZvaWQgMCkge1xuICAgICAgdmFyIHcgPSB0aGlzLmdldEV4dEluZm8oXCJjUkxEaXN0cmlidXRpb25Qb2ludHNcIik7XG4gICAgICBpZiAodyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBtID0gbih0aGlzLmhleCwgdy52aWR4KSwgRSA9IHcuY3JpdGljYWw7XG4gICAgfVxuICAgIHZhciB4ID0geyBleHRuYW1lOiBcImNSTERpc3RyaWJ1dGlvblBvaW50c1wiLCBhcnJheTogW10gfTtcbiAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgIGZvciAodmFyIEYgPSByKG0sIDApLCBQID0gMDsgUCA8IEYubGVuZ3RoOyBQKyspIHtcbiAgICAgIHZhciBUID0gbihtLCBGW1BdKTtcbiAgICAgIHguYXJyYXkucHVzaCh0aGlzLmdldERpc3RyaWJ1dGlvblBvaW50KFQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH0sIHRoaXMuZ2V0RGlzdHJpYnV0aW9uUG9pbnQgPSBmdW5jdGlvbihtKSB7XG4gICAgZm9yICh2YXIgRSA9IHt9LCB3ID0gcihtLCAwKSwgeCA9IDA7IHggPCB3Lmxlbmd0aDsgeCsrKSB7XG4gICAgICB2YXIgRiA9IG0uc3Vic3RyKHdbeF0sIDIpLCBQID0gbihtLCB3W3hdKTtcbiAgICAgIEYgPT0gXCJhMFwiICYmIChFLmRwbmFtZSA9IHRoaXMuZ2V0RGlzdHJpYnV0aW9uUG9pbnROYW1lKFApKTtcbiAgICB9XG4gICAgcmV0dXJuIEU7XG4gIH0sIHRoaXMuZ2V0RGlzdHJpYnV0aW9uUG9pbnROYW1lID0gZnVuY3Rpb24obSkge1xuICAgIGZvciAodmFyIEUgPSB7fSwgdyA9IHIobSwgMCksIHggPSAwOyB4IDwgdy5sZW5ndGg7IHgrKykge1xuICAgICAgdmFyIEYgPSBtLnN1YnN0cih3W3hdLCAyKSwgUCA9IG4obSwgd1t4XSk7XG4gICAgICBGID09IFwiYTBcIiAmJiAoRS5mdWxsID0gdGhpcy5nZXRHZW5lcmFsTmFtZXMoUCkpO1xuICAgIH1cbiAgICByZXR1cm4gRTtcbiAgfSwgdGhpcy5nZXRFeHRDUkxEaXN0cmlidXRpb25Qb2ludHNVUkkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IHRoaXMuZ2V0RXh0Q1JMRGlzdHJpYnV0aW9uUG9pbnRzKCk7XG4gICAgaWYgKG0gPT0gbnVsbClcbiAgICAgIHJldHVybiBtO1xuICAgIGZvciAodmFyIEUgPSBtLmFycmF5LCB3ID0gW10sIHggPSAwOyB4IDwgRS5sZW5ndGg7IHgrKylcbiAgICAgIHRyeSB7XG4gICAgICAgIEVbeF0uZHBuYW1lLmZ1bGxbMF0udXJpICE9IG51bGwgJiYgdy5wdXNoKEVbeF0uZHBuYW1lLmZ1bGxbMF0udXJpKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgfVxuICAgIHJldHVybiB3O1xuICB9LCB0aGlzLmdldEV4dEFJQUluZm8gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbSA9IHRoaXMuZ2V0RXh0SW5mbyhcImF1dGhvcml0eUluZm9BY2Nlc3NcIik7XG4gICAgaWYgKG0gPT09IHZvaWQgMClcbiAgICAgIHJldHVybiBtO1xuICAgIGZvciAodmFyIEUgPSB7IG9jc3A6IFtdLCBjYWlzc3VlcjogW10gfSwgdyA9IHIodGhpcy5oZXgsIG0udmlkeCksIHggPSAwOyB4IDwgdy5sZW5ndGg7IHgrKykge1xuICAgICAgdmFyIEYgPSBoKHRoaXMuaGV4LCB3W3hdLCBbMF0sIFwiMDZcIiksIFAgPSBoKHRoaXMuaGV4LCB3W3hdLCBbMV0sIFwiODZcIik7XG4gICAgICBGID09PSBcIjJiMDYwMTA1MDUwNzMwMDFcIiAmJiBFLm9jc3AucHVzaChXKFApKSwgRiA9PT0gXCIyYjA2MDEwNTA1MDczMDAyXCIgJiYgRS5jYWlzc3Vlci5wdXNoKFcoUCkpO1xuICAgIH1cbiAgICByZXR1cm4gRTtcbiAgfSwgdGhpcy5nZXRFeHRBdXRob3JpdHlJbmZvQWNjZXNzID0gZnVuY3Rpb24obSwgRSkge1xuICAgIGlmIChtID09PSB2b2lkIDAgJiYgRSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YXIgdyA9IHRoaXMuZ2V0RXh0SW5mbyhcImF1dGhvcml0eUluZm9BY2Nlc3NcIik7XG4gICAgICBpZiAodyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBtID0gbih0aGlzLmhleCwgdy52aWR4KSwgRSA9IHcuY3JpdGljYWw7XG4gICAgfVxuICAgIHZhciB4ID0geyBleHRuYW1lOiBcImF1dGhvcml0eUluZm9BY2Nlc3NcIiwgYXJyYXk6IFtdIH07XG4gICAgRSAmJiAoeC5jcml0aWNhbCA9ICEwKTtcbiAgICBmb3IgKHZhciBGID0gcihtLCAwKSwgUCA9IDA7IFAgPCBGLmxlbmd0aDsgUCsrKSB7XG4gICAgICB2YXIgVCA9IHUobSwgRltQXSwgWzBdLCBcIjA2XCIpLCBIID0gaChtLCBGW1BdLCBbMV0sIFwiODZcIiksIEMgPSBXKEgpO1xuICAgICAgaWYgKFQgPT0gXCIyYjA2MDEwNTA1MDczMDAxXCIpXG4gICAgICAgIHguYXJyYXkucHVzaCh7IG9jc3A6IEMgfSk7XG4gICAgICBlbHNlIGlmIChUID09IFwiMmIwNjAxMDUwNTA3MzAwMlwiKVxuICAgICAgICB4LmFycmF5LnB1c2goeyBjYWlzc3VlcjogQyB9KTtcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biBtZXRob2Q6IFwiICsgVCk7XG4gICAgfVxuICAgIHJldHVybiB4O1xuICB9LCB0aGlzLmdldEV4dENlcnRpZmljYXRlUG9saWNpZXMgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwiY2VydGlmaWNhdGVQb2xpY2llc1wiKTtcbiAgICAgIGlmICh3ID09PSB2b2lkIDApXG4gICAgICAgIHJldHVybjtcbiAgICAgIG0gPSBuKHRoaXMuaGV4LCB3LnZpZHgpLCBFID0gdy5jcml0aWNhbDtcbiAgICB9XG4gICAgdmFyIHggPSB7IGV4dG5hbWU6IFwiY2VydGlmaWNhdGVQb2xpY2llc1wiLCBhcnJheTogW10gfTtcbiAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgIGZvciAodmFyIEYgPSByKG0sIDApLCBQID0gMDsgUCA8IEYubGVuZ3RoOyBQKyspIHtcbiAgICAgIHZhciBUID0gbihtLCBGW1BdKSwgSCA9IHRoaXMuZ2V0UG9saWN5SW5mb3JtYXRpb24oVCk7XG4gICAgICB4LmFycmF5LnB1c2goSCk7XG4gICAgfVxuICAgIHJldHVybiB4O1xuICB9LCB0aGlzLmdldFBvbGljeUluZm9ybWF0aW9uID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0ge30sIHcgPSBoKG0sIDAsIFswXSwgXCIwNlwiKTtcbiAgICBFLnBvbGljeW9pZCA9IGYodyk7XG4gICAgdmFyIHggPSB2KG0sIDAsIFsxXSwgXCIzMFwiKTtcbiAgICBpZiAoeCAhPSAtMSkge1xuICAgICAgRS5hcnJheSA9IFtdO1xuICAgICAgZm9yICh2YXIgRiA9IHIobSwgeCksIFAgPSAwOyBQIDwgRi5sZW5ndGg7IFArKykge1xuICAgICAgICB2YXIgVCA9IG4obSwgRltQXSksIEggPSB0aGlzLmdldFBvbGljeVF1YWxpZmllckluZm8oVCk7XG4gICAgICAgIEUuYXJyYXkucHVzaChIKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIEU7XG4gIH0sIHRoaXMuZ2V0T3RoZXJOYW1lID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0ge30sIHcgPSByKG0sIDApLCB4ID0gaChtLCB3WzBdLCBbXSwgXCIwNlwiKSwgRiA9IGgobSwgd1sxXSwgW10pO1xuICAgIHJldHVybiBFLm9pZCA9IGYoeCksIEUudmFsdWUgPSBzKEYpLCBFO1xuICB9LCB0aGlzLmdldFBvbGljeVF1YWxpZmllckluZm8gPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSB7fSwgdyA9IGgobSwgMCwgWzBdLCBcIjA2XCIpO1xuICAgIGlmICh3ID09PSBcIjJiMDYwMTA1MDUwNzAyMDFcIikge1xuICAgICAgdmFyIHggPSB1KG0sIDAsIFsxXSwgXCIxNlwiKTtcbiAgICAgIEUuY3BzID0gQWUoeCk7XG4gICAgfSBlbHNlIGlmICh3ID09PSBcIjJiMDYwMTA1MDUwNzAyMDJcIikge1xuICAgICAgdmFyIEYgPSBwKG0sIDAsIFsxXSwgXCIzMFwiKTtcbiAgICAgIEUudW5vdGljZSA9IHRoaXMuZ2V0VXNlck5vdGljZShGKTtcbiAgICB9XG4gICAgcmV0dXJuIEU7XG4gIH0sIHRoaXMuZ2V0VXNlck5vdGljZSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIEUgPSB0LnBhcnNlKG0pO1xuICAgICAgdmFyIHcgPSB0aGlzLl9hc24xVG9Vbm90aWNlKEUpO1xuICAgICAgcmV0dXJuIHc7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LCB0aGlzLl9hc24xVG9Vbm90aWNlID0gZnVuY3Rpb24obSkge1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBFID0ge30sIHcgPSBKKG0sIFwic2VxXCIpLCB4ID0gMDsgeCA8IHcubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgdmFyIEYgPSB0aGlzLl9hc24xVG9Ob3RpY2VSZWYod1t4XSk7XG4gICAgICAgIEYgIT0gbnVsbCAmJiAoRS5ub3RpY2VyZWYgPSBGKTtcbiAgICAgICAgdmFyIFAgPSB0aGlzLmFzbjFUb0Rpc3BsYXlUZXh0KHdbeF0pO1xuICAgICAgICBQICE9IG51bGwgJiYgKEUuZXhwdGV4dCA9IFApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKEUpLmxlbmd0aCA+IDAgPyBFIDogdm9pZCAwO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSwgdGhpcy5fYXNuMVRvTm90aWNlUmVmID0gZnVuY3Rpb24obSkge1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBFID0ge30sIHcgPSBKKG0sIFwic2VxXCIpLCB4ID0gMDsgeCA8IHcubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgdmFyIEYgPSB0aGlzLl9hc24xVG9Ob3RpY2VOdW0od1t4XSk7XG4gICAgICAgIEYgIT0gbnVsbCAmJiAoRS5ub3RpY2VudW0gPSBGKTtcbiAgICAgICAgdmFyIFAgPSB0aGlzLmFzbjFUb0Rpc3BsYXlUZXh0KHdbeF0pO1xuICAgICAgICBQICE9IG51bGwgJiYgKEUub3JnID0gUCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoRSkubGVuZ3RoID4gMCA/IEUgOiB2b2lkIDA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9LCB0aGlzLl9hc24xVG9Ob3RpY2VOdW0gPSBmdW5jdGlvbihtKSB7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIEUgPSBKKG0sIFwic2VxXCIpLCB3ID0gW10sIHggPSAwOyB4IDwgRS5sZW5ndGg7IHgrKykge1xuICAgICAgICB2YXIgRiA9IEVbeF07XG4gICAgICAgIHcucHVzaChwYXJzZUludChKKEYsIFwiaW50LmhleFwiKSwgMTYpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3O1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSwgdGhpcy5nZXREaXNwbGF5VGV4dCA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IHsgXCIwY1wiOiBcInV0ZjhcIiwgMTY6IFwiaWE1XCIsIFwiMWFcIjogXCJ2aXNcIiwgXCIxZVwiOiBcImJtcFwiIH0sIHcgPSB7fTtcbiAgICByZXR1cm4gdy50eXBlID0gRVttLnN1YnN0cigwLCAyKV0sIHcuc3RyID0gQWUoaShtLCAwKSksIHc7XG4gIH0sIHRoaXMuYXNuMVRvRGlzcGxheVRleHQgPSBmdW5jdGlvbihtKSB7XG4gICAgaWYgKG0udXRmOHN0ciAhPSBudWxsKVxuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ1dGY4XCIsIHN0cjogbS51dGY4c3RyLnN0ciB9O1xuICAgIGlmIChtLmlhNXN0ciAhPSBudWxsKVxuICAgICAgcmV0dXJuIHsgdHlwZTogXCJpYTVcIiwgc3RyOiBtLmlhNXN0ci5zdHIgfTtcbiAgICBpZiAobS52aXNzdHIgIT0gbnVsbClcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidmlzXCIsIHN0cjogbS52aXNzdHIuc3RyIH07XG4gICAgaWYgKG0uYm1wc3RyICE9IG51bGwpXG4gICAgICByZXR1cm4geyB0eXBlOiBcImJtcFwiLCBzdHI6IG0uYm1wc3RyLnN0ciB9O1xuICAgIGlmIChtLnBybnN0ciAhPSBudWxsKVxuICAgICAgcmV0dXJuIHsgdHlwZTogXCJwcm5cIiwgc3RyOiBtLnBybnN0ci5zdHIgfTtcbiAgfSwgdGhpcy5nZXRFeHRQb2xpY3lNYXBwaW5ncyA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICB2YXIgdyA9IHRoaXMuZ2V0Q3JpdGljYWxFeHRWKFwicG9saWN5TWFwcGluZ3NcIiwgbSwgRSk7XG4gICAgaWYgKG0gPSB3WzBdLCBFID0gd1sxXSwgbSAhPSBudWxsKSB7XG4gICAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJwb2xpY3lNYXBwaW5nc1wiIH07XG4gICAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgRiA9IHMobSksIFAgPSBGLnNlcSwgVCA9IFtdLCBIID0gMDsgSCA8IFAubGVuZ3RoOyBIKyspIHtcbiAgICAgICAgICB2YXIgQyA9IFBbSF0uc2VxO1xuICAgICAgICAgIFQucHVzaChbQ1swXS5vaWQsIENbMV0ub2lkXSk7XG4gICAgICAgIH1cbiAgICAgICAgeC5hcnJheSA9IFQ7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgdGhyb3cgbmV3IGIoXCJtYWxmb3JtZWQgcG9saWN5TWFwcGluZ3NcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4geDtcbiAgICB9XG4gIH0sIHRoaXMuZ2V0RXh0UG9saWN5Q29uc3RyYWludHMgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB0aGlzLmdldENyaXRpY2FsRXh0VihcInBvbGljeUNvbnN0cmFpbnRzXCIsIG0sIEUpO1xuICAgIGlmIChtID0gd1swXSwgRSA9IHdbMV0sIG0gIT0gbnVsbCkge1xuICAgICAgdmFyIHggPSB7IGV4dG5hbWU6IFwicG9saWN5Q29uc3RyYWludHNcIiB9O1xuICAgICAgRSAmJiAoeC5jcml0aWNhbCA9ICEwKTtcbiAgICAgIHZhciBGID0gcyhtKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIFAgPSBGLnNlcSwgVCA9IDA7IFQgPCBQLmxlbmd0aDsgVCsrKSB7XG4gICAgICAgICAgdmFyIEggPSBQW1RdLnRhZztcbiAgICAgICAgICBILmV4cGxpY2l0ID09ICExICYmIChILnRhZyA9PSBcIjgwXCIgJiYgKHgucmVxZXhwID0gcGFyc2VJbnQoSC5oZXgsIDE2KSksIEgudGFnID09IFwiODFcIiAmJiAoeC5pbmhpYml0ID0gcGFyc2VJbnQoSC5oZXgsIDE2KSkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG5ldyBiKFwibWFsZm9ybWVkIHBvbGljeUNvbnN0cmFpbnRzIHZhbHVlXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHg7XG4gICAgfVxuICB9LCB0aGlzLmdldEV4dEluaGliaXRBbnlQb2xpY3kgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB0aGlzLmdldENyaXRpY2FsRXh0VihcImluaGliaXRBbnlQb2xpY3lcIiwgbSwgRSk7XG4gICAgaWYgKG0gPSB3WzBdLCBFID0gd1sxXSwgbSAhPSBudWxsKSB7XG4gICAgICB2YXIgeCA9IHsgZXh0bmFtZTogXCJpbmhpYml0QW55UG9saWN5XCIgfTtcbiAgICAgIEUgJiYgKHguY3JpdGljYWwgPSAhMCk7XG4gICAgICB2YXIgRiA9IGwobSwgMCk7XG4gICAgICByZXR1cm4gRiA9PSAtMSA/IG5ldyBiKFwid3JvbmcgdmFsdWVcIikgOiAoeC5za2lwID0gRiwgeCk7XG4gICAgfVxuICB9LCB0aGlzLmdldEV4dENSTE51bWJlciA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICB2YXIgdyA9IHsgZXh0bmFtZTogXCJjUkxOdW1iZXJcIiB9O1xuICAgIGlmIChFICYmICh3LmNyaXRpY2FsID0gITApLCBtLnN1YnN0cigwLCAyKSA9PSBcIjAyXCIpXG4gICAgICByZXR1cm4gdy5udW0gPSB7IGhleDogaShtLCAwKSB9LCB3O1xuICAgIHRocm93IG5ldyBiKFwiaEV4dFYgcGFyc2UgZXJyb3I6IFwiICsgbSk7XG4gIH0sIHRoaXMuZ2V0RXh0Q1JMUmVhc29uID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0geyBleHRuYW1lOiBcImNSTFJlYXNvblwiIH07XG4gICAgaWYgKEUgJiYgKHcuY3JpdGljYWwgPSAhMCksIG0uc3Vic3RyKDAsIDIpID09IFwiMGFcIilcbiAgICAgIHJldHVybiB3LmNvZGUgPSBwYXJzZUludChpKG0sIDApLCAxNiksIHc7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiaEV4dFYgcGFyc2UgZXJyb3I6IFwiICsgbSk7XG4gIH0sIHRoaXMuZ2V0RXh0T2NzcE5vbmNlID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0geyBleHRuYW1lOiBcIm9jc3BOb25jZVwiIH07XG4gICAgRSAmJiAody5jcml0aWNhbCA9ICEwKTtcbiAgICB2YXIgeCA9IGkobSwgMCk7XG4gICAgcmV0dXJuIHcuaGV4ID0geCwgdztcbiAgfSwgdGhpcy5nZXRFeHRPY3NwTm9DaGVjayA9IGZ1bmN0aW9uKG0sIEUpIHtcbiAgICB2YXIgdyA9IHsgZXh0bmFtZTogXCJvY3NwTm9DaGVja1wiIH07XG4gICAgcmV0dXJuIEUgJiYgKHcuY3JpdGljYWwgPSAhMCksIHc7XG4gIH0sIHRoaXMuZ2V0RXh0QWRvYmVUaW1lU3RhbXAgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwiYWRvYmVUaW1lU3RhbXBcIik7XG4gICAgICBpZiAodyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBtID0gbih0aGlzLmhleCwgdy52aWR4KSwgRSA9IHcuY3JpdGljYWw7XG4gICAgfVxuICAgIHZhciB4ID0geyBleHRuYW1lOiBcImFkb2JlVGltZVN0YW1wXCIgfTtcbiAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgIHZhciBGID0gcihtLCAwKTtcbiAgICBpZiAoRi5sZW5ndGggPiAxKSB7XG4gICAgICB2YXIgUCA9IG4obSwgRlsxXSksIFQgPSB0aGlzLmdldEdlbmVyYWxOYW1lKFApO1xuICAgICAgVC51cmkgIT0gbnVsbCAmJiAoeC51cmkgPSBULnVyaSk7XG4gICAgfVxuICAgIGlmIChGLmxlbmd0aCA+IDIpIHtcbiAgICAgIHZhciBIID0gbihtLCBGWzJdKTtcbiAgICAgIEggPT0gXCIwMTAxZmZcIiAmJiAoeC5yZXFhdXRoID0gITApLCBIID09IFwiMDEwMTAwXCIgJiYgKHgucmVxYXV0aCA9ICExKTtcbiAgICB9XG4gICAgcmV0dXJuIHg7XG4gIH0sIHRoaXMuZ2V0RXh0U3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXMgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgaWYgKG0gPT09IHZvaWQgMCAmJiBFID09PSB2b2lkIDApIHtcbiAgICAgIHZhciB3ID0gdGhpcy5nZXRFeHRJbmZvKFwic3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXNcIik7XG4gICAgICBpZiAodyA9PT0gdm9pZCAwKVxuICAgICAgICByZXR1cm47XG4gICAgICBtID0gbih0aGlzLmhleCwgdy52aWR4KSwgRSA9IHcuY3JpdGljYWw7XG4gICAgfVxuICAgIHZhciB4ID0geyBleHRuYW1lOiBcInN1YmplY3REaXJlY3RvcnlBdHRyaWJ1dGVzXCIgfTtcbiAgICBFICYmICh4LmNyaXRpY2FsID0gITApO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBGID0gcyhtKSwgUCA9IFtdLCBUID0gMDsgVCA8IEYuc2VxLmxlbmd0aDsgVCsrKSB7XG4gICAgICAgIHZhciBIID0gRi5zZXFbVF0sIEMgPSBKKEgsIFwic2VxLjAub2lkXCIpLCBCID0gSihILCBcInNlcS4xLnNldFwiKTtcbiAgICAgICAgaWYgKEMgPT0gbnVsbCB8fCBCID09IG51bGwpXG4gICAgICAgICAgdGhyb3cgXCJlcnJvclwiO1xuICAgICAgICBQLnB1c2goeyBhdHRyOiBDLCBhcnJheTogQiB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB4LmFycmF5ID0gUCwgeDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm1hbGZvcm1lZCBzdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcyBleHRlbnNpb24gdmFsdWVcIik7XG4gICAgfVxuICB9O1xuICB2YXIgRCA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IHt9O1xuICAgIHRyeSB7XG4gICAgICB2YXIgdyA9IG0uc2VxWzBdLm9pZCwgeCA9IGEuYXNuMS54NTA5Lk9JRC5uYW1lMm9pZCh3KTtcbiAgICAgIEUudHlwZSA9IGEuYXNuMS54NTA5Lk9JRC5vaWQyYXR5cGUoeCk7XG4gICAgICB2YXIgRiA9IG0uc2VxWzFdO1xuICAgICAgaWYgKEYudXRmOHN0ciAhPSBudWxsKVxuICAgICAgICBFLmRzID0gXCJ1dGY4XCIsIEUudmFsdWUgPSBGLnV0ZjhzdHIuc3RyO1xuICAgICAgZWxzZSBpZiAoRi5udW1zdHIgIT0gbnVsbClcbiAgICAgICAgRS5kcyA9IFwibnVtXCIsIEUudmFsdWUgPSBGLm51bXN0ci5zdHI7XG4gICAgICBlbHNlIGlmIChGLnRlbHN0ciAhPSBudWxsKVxuICAgICAgICBFLmRzID0gXCJ0ZWxcIiwgRS52YWx1ZSA9IEYudGVsc3RyLnN0cjtcbiAgICAgIGVsc2UgaWYgKEYucHJuc3RyICE9IG51bGwpXG4gICAgICAgIEUuZHMgPSBcInByblwiLCBFLnZhbHVlID0gRi5wcm5zdHIuc3RyO1xuICAgICAgZWxzZSBpZiAoRi5pYTVzdHIgIT0gbnVsbClcbiAgICAgICAgRS5kcyA9IFwiaWE1XCIsIEUudmFsdWUgPSBGLmlhNXN0ci5zdHI7XG4gICAgICBlbHNlIGlmIChGLnZpc3N0ciAhPSBudWxsKVxuICAgICAgICBFLmRzID0gXCJ2aXNcIiwgRS52YWx1ZSA9IEYudmlzc3RyLnN0cjtcbiAgICAgIGVsc2UgaWYgKEYuYm1wc3RyICE9IG51bGwpXG4gICAgICAgIEUuZHMgPSBcImJtcFwiLCBFLnZhbHVlID0gRi5ibXBzdHIuc3RyO1xuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBcImVycm9yXCI7XG4gICAgICByZXR1cm4gRTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHRocm93IG5ldyBFcm9ycihcImltcHJvcGVyIEFTTi4xIHBhcnNlZCBBdHRyVHlwZUFuZFZhbHVlXCIpO1xuICAgIH1cbiAgfSwgQSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG0uc2V0Lm1hcChmdW5jdGlvbihFKSB7XG4gICAgICAgIHJldHVybiBEKEUpO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoRSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW1wcm9wZXIgQVNOLjEgcGFyc2VkIFJETjogXCIgKyBFKTtcbiAgICB9XG4gIH0sIEkgPSBmdW5jdGlvbihtKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBtLnNlcS5tYXAoZnVuY3Rpb24oRSkge1xuICAgICAgICByZXR1cm4gQShFKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKEUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImltcHJvcGVyIEFTTi4xIHBhcnNlZCBYNTAwTmFtZTogXCIgKyBFKTtcbiAgICB9XG4gIH07XG4gIHRoaXMuZ2V0WDUwME5hbWVSdWxlID0gZnVuY3Rpb24obSkge1xuICAgIGZvciAodmFyIEUgPSBudWxsLCB3ID0gW10sIHggPSAwOyB4IDwgbS5sZW5ndGg7IHgrKylcbiAgICAgIGZvciAodmFyIEYgPSBtW3hdLCBQID0gMDsgUCA8IEYubGVuZ3RoOyBQKyspXG4gICAgICAgIHcucHVzaChGW1BdKTtcbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHcubGVuZ3RoOyB4KyspIHtcbiAgICAgIHZhciBUID0gd1t4XSwgSCA9IFQuZHMsIEMgPSBULnZhbHVlLCBCID0gVC50eXBlO1xuICAgICAgaWYgKEggIT0gXCJwcm5cIiAmJiBIICE9IFwidXRmOFwiICYmIEggIT0gXCJpYTVcIilcbiAgICAgICAgcmV0dXJuIFwibWl4ZWRcIjtcbiAgICAgIGlmIChIID09IFwiaWE1XCIpIHtcbiAgICAgICAgaWYgKEIgIT0gXCJDTlwiKVxuICAgICAgICAgIHJldHVybiBcIm1peGVkXCI7XG4gICAgICAgIGlmIChhLmxhbmcuU3RyaW5nLmlzTWFpbChDKSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgcmV0dXJuIFwibWl4ZWRcIjtcbiAgICAgIH1cbiAgICAgIGlmIChCID09IFwiQ1wiKSB7XG4gICAgICAgIGlmIChIID09IFwicHJuXCIpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIHJldHVybiBcIm1peGVkXCI7XG4gICAgICB9XG4gICAgICBpZiAoRSA9PSBudWxsKVxuICAgICAgICBFID0gSDtcbiAgICAgIGVsc2UgaWYgKEUgIT09IEgpXG4gICAgICAgIHJldHVybiBcIm1peGVkXCI7XG4gICAgfVxuICAgIHJldHVybiBFID8/IFwicHJuXCI7XG4gIH0sIHRoaXMuZ2V0QXR0clR5cGVBbmRWYWx1ZSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRSA9IHMobSk7XG4gICAgcmV0dXJuIEQoRSk7XG4gIH0sIHRoaXMuZ2V0UkROID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0gcyhtKTtcbiAgICByZXR1cm4gQShFKTtcbiAgfSwgdGhpcy5nZXRYNTAwTmFtZUFycmF5ID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBFID0gcyhtKTtcbiAgICByZXR1cm4gSShFKTtcbiAgfSwgdGhpcy5nZXRYNTAwTmFtZSA9IGZ1bmN0aW9uKG0sIEUsIHcpIHtcbiAgICB2YXIgeCA9IHRoaXMuZ2V0WDUwME5hbWVBcnJheShtKSwgRiA9IHRoaXMuZG5hcnJheXRvc3RyKHgpLCBQID0geyBzdHI6IEYgfTtcbiAgICByZXR1cm4gUC5hcnJheSA9IHgsIHcgPT0gITAgJiYgKFAuaGV4ID0gbSksIEUgPT0gITAgJiYgKFAuY2Fub24gPSB0aGlzLmMxNG5SRE5BcnJheSh4KSksIFA7XG4gIH0sIHRoaXMucmVhZENlcnRQRU0gPSBmdW5jdGlvbihtKSB7XG4gICAgdGhpcy5yZWFkQ2VydEhleChnKG0pKTtcbiAgfSwgdGhpcy5yZWFkQ2VydEhleCA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0aGlzLmhleCA9IG0sIHRoaXMuZ2V0VmVyc2lvbigpO1xuICAgIHRyeSB7XG4gICAgICB5KHRoaXMuaGV4LCAwLCBbMCwgN10sIFwiYTNcIiksIHRoaXMucGFyc2VFeHQoKTtcbiAgICB9IGNhdGNoIHtcbiAgICB9XG4gIH0sIHRoaXMuZ2V0UGFyYW0gPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSB7fTtcbiAgICByZXR1cm4gbSA9PSBudWxsICYmIChtID0ge30pLCBFLnZlcnNpb24gPSB0aGlzLmdldFZlcnNpb24oKSwgRS5zZXJpYWwgPSB7IGhleDogdGhpcy5nZXRTZXJpYWxOdW1iZXJIZXgoKSB9LCBFLnNpZ2FsZyA9IHRoaXMuZ2V0U2lnbmF0dXJlQWxnb3JpdGhtRmllbGQoKSwgRS5pc3N1ZXIgPSB0aGlzLmdldElzc3VlcihtLmRuY2Fub24sIG0uZG5oZXgpLCBFLm5vdGJlZm9yZSA9IHRoaXMuZ2V0Tm90QmVmb3JlKCksIEUubm90YWZ0ZXIgPSB0aGlzLmdldE5vdEFmdGVyKCksIEUuc3ViamVjdCA9IHRoaXMuZ2V0U3ViamVjdChtLmRuY2Fub24sIG0uZG5oZXgpLCBFLnNianB1YmtleSA9IGRlKHRoaXMuZ2V0UHVibGljS2V5SGV4KCksIFwiUFVCTElDIEtFWVwiKSwgdGhpcy5hRXh0SW5mbyAhPSBudWxsICYmIHRoaXMuYUV4dEluZm8ubGVuZ3RoID4gMCAmJiAoRS5leHQgPSB0aGlzLmdldEV4dFBhcmFtQXJyYXkoKSksIEUuc2lnaGV4ID0gdGhpcy5nZXRTaWduYXR1cmVWYWx1ZUhleCgpLCBtLnRic2hleCA9PSAhMCAmJiAoRS50YnNoZXggPSBwKHRoaXMuaGV4LCAwLCBbMF0pKSwgbS5ub2RuYXJyYXkgPT0gITAgJiYgKGRlbGV0ZSBFLmlzc3Vlci5hcnJheSwgZGVsZXRlIEUuc3ViamVjdC5hcnJheSksIEU7XG4gIH0sIHRoaXMuZ2V0RXh0UGFyYW1BcnJheSA9IGZ1bmN0aW9uKG0pIHtcbiAgICBpZiAobSA9PSBudWxsKSB7XG4gICAgICB2YXIgRSA9IHYodGhpcy5oZXgsIDAsIFswLCBcIlszXVwiXSk7XG4gICAgICBFICE9IC0xICYmIChtID0gYyh0aGlzLmhleCwgMCwgWzAsIFwiWzNdXCIsIDBdLCBcIjMwXCIpKTtcbiAgICB9XG4gICAgZm9yICh2YXIgdyA9IFtdLCB4ID0gcihtLCAwKSwgRiA9IDA7IEYgPCB4Lmxlbmd0aDsgRisrKSB7XG4gICAgICB2YXIgUCA9IG4obSwgeFtGXSksIFQgPSB0aGlzLmdldEV4dFBhcmFtKFApO1xuICAgICAgVCAhPSBudWxsICYmIHcucHVzaChUKTtcbiAgICB9XG4gICAgcmV0dXJuIHc7XG4gIH0sIHRoaXMuZ2V0RXh0UGFyYW0gPSBmdW5jdGlvbihtKSB7XG4gICAgdmFyIEUgPSByKG0sIDApLCB3ID0gRS5sZW5ndGg7XG4gICAgaWYgKHcgIT0gMiAmJiB3ICE9IDMpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ3cm9uZyBudW1iZXIgZWxlbWVudHMgaW4gRXh0ZW5zaW9uOiBcIiArIHcgKyBcIiBcIiArIG0pO1xuICAgIHZhciB4ID0gZChoKG0sIDAsIFswXSwgXCIwNlwiKSksIEYgPSAhMTtcbiAgICB3ID09IDMgJiYgcChtLCAwLCBbMV0pID09IFwiMDEwMWZmXCIgJiYgKEYgPSAhMCk7XG4gICAgdmFyIFAgPSBwKG0sIDAsIFt3IC0gMSwgMF0pLCBUID0gdm9pZCAwO1xuICAgIGlmICh4ID09IFwiMi41LjI5LjE0XCIgPyBUID0gdGhpcy5nZXRFeHRTdWJqZWN0S2V5SWRlbnRpZmllcihQLCBGKSA6IHggPT0gXCIyLjUuMjkuMTVcIiA/IFQgPSB0aGlzLmdldEV4dEtleVVzYWdlKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4xN1wiID8gVCA9IHRoaXMuZ2V0RXh0U3ViamVjdEFsdE5hbWUoUCwgRikgOiB4ID09IFwiMi41LjI5LjE4XCIgPyBUID0gdGhpcy5nZXRFeHRJc3N1ZXJBbHROYW1lKFAsIEYpIDogeCA9PSBcIjIuNS4yOS4xOVwiID8gVCA9IHRoaXMuZ2V0RXh0QmFzaWNDb25zdHJhaW50cyhQLCBGKSA6IHggPT0gXCIyLjUuMjkuMzBcIiA/IFQgPSB0aGlzLmdldEV4dE5hbWVDb25zdHJhaW50cyhQLCBGKSA6IHggPT0gXCIyLjUuMjkuMzFcIiA/IFQgPSB0aGlzLmdldEV4dENSTERpc3RyaWJ1dGlvblBvaW50cyhQLCBGKSA6IHggPT0gXCIyLjUuMjkuMzJcIiA/IFQgPSB0aGlzLmdldEV4dENlcnRpZmljYXRlUG9saWNpZXMoUCwgRikgOiB4ID09IFwiMi41LjI5LjMzXCIgPyBUID0gdGhpcy5nZXRFeHRQb2xpY3lNYXBwaW5ncyhQLCBGKSA6IHggPT0gXCIyLjUuMjkuMzVcIiA/IFQgPSB0aGlzLmdldEV4dEF1dGhvcml0eUtleUlkZW50aWZpZXIoUCwgRikgOiB4ID09IFwiMi41LjI5LjM2XCIgPyBUID0gdGhpcy5nZXRFeHRQb2xpY3lDb25zdHJhaW50cyhQLCBGKSA6IHggPT0gXCIyLjUuMjkuMzdcIiA/IFQgPSB0aGlzLmdldEV4dEV4dEtleVVzYWdlKFAsIEYpIDogeCA9PSBcIjIuNS4yOS41NFwiID8gVCA9IHRoaXMuZ2V0RXh0SW5oaWJpdEFueVBvbGljeShQLCBGKSA6IHggPT0gXCIxLjMuNi4xLjUuNS43LjEuMVwiID8gVCA9IHRoaXMuZ2V0RXh0QXV0aG9yaXR5SW5mb0FjY2VzcyhQLCBGKSA6IHggPT0gXCIyLjUuMjkuMjBcIiA/IFQgPSB0aGlzLmdldEV4dENSTE51bWJlcihQLCBGKSA6IHggPT0gXCIyLjUuMjkuMjFcIiA/IFQgPSB0aGlzLmdldEV4dENSTFJlYXNvbihQLCBGKSA6IHggPT0gXCIyLjUuMjkuOVwiID8gVCA9IHRoaXMuZ2V0RXh0U3ViamVjdERpcmVjdG9yeUF0dHJpYnV0ZXMoUCwgRikgOiB4ID09IFwiMS4zLjYuMS41LjUuNy40OC4xLjJcIiA/IFQgPSB0aGlzLmdldEV4dE9jc3BOb25jZShQLCBGKSA6IHggPT0gXCIxLjMuNi4xLjUuNS43LjQ4LjEuNVwiID8gVCA9IHRoaXMuZ2V0RXh0T2NzcE5vQ2hlY2soUCwgRikgOiB4ID09IFwiMS4yLjg0MC4xMTM1ODMuMS4xLjkuMVwiID8gVCA9IHRoaXMuZ2V0RXh0QWRvYmVUaW1lU3RhbXAoUCwgRikgOiBMLkVYVF9QQVJTRVJbeF0gIT0gbnVsbCAmJiAoVCA9IEwuRVhUX1BBUlNFUlt4XSh4LCBGLCBQKSksIFQgIT0gbnVsbClcbiAgICAgIHJldHVybiBUO1xuICAgIHZhciBIID0geyBleHRuYW1lOiB4LCBleHRuOiBQIH07XG4gICAgdHJ5IHtcbiAgICAgIEguZXh0biA9IHMoUCk7XG4gICAgfSBjYXRjaCB7XG4gICAgfVxuICAgIHJldHVybiBGICYmIChILmNyaXRpY2FsID0gITApLCBIO1xuICB9LCB0aGlzLmZpbmRFeHQgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgZm9yICh2YXIgdyA9IDA7IHcgPCBtLmxlbmd0aDsgdysrKVxuICAgICAgaWYgKG1bd10uZXh0bmFtZSA9PSBFKVxuICAgICAgICByZXR1cm4gbVt3XTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSwgdGhpcy51cGRhdGVFeHRDRFBGdWxsVVJJID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0gdGhpcy5maW5kRXh0KG0sIFwiY1JMRGlzdHJpYnV0aW9uUG9pbnRzXCIpO1xuICAgIGlmICh3ICE9IG51bGwgJiYgdy5hcnJheSAhPSBudWxsKSB7XG4gICAgICBmb3IgKHZhciB4ID0gdy5hcnJheSwgRiA9IDA7IEYgPCB4Lmxlbmd0aDsgRisrKVxuICAgICAgICBpZiAoeFtGXS5kcG5hbWUgIT0gbnVsbCAmJiB4W0ZdLmRwbmFtZS5mdWxsICE9IG51bGwpXG4gICAgICAgICAgZm9yICh2YXIgUCA9IHhbRl0uZHBuYW1lLmZ1bGwsIFQgPSAwOyBUIDwgUC5sZW5ndGg7IFQrKykge1xuICAgICAgICAgICAgdmFyIEggPSBQW0ZdO1xuICAgICAgICAgICAgSC51cmkgIT0gbnVsbCAmJiAoSC51cmkgPSBFKTtcbiAgICAgICAgICB9XG4gICAgfVxuICB9LCB0aGlzLnVwZGF0ZUV4dEFJQU9DU1AgPSBmdW5jdGlvbihtLCBFKSB7XG4gICAgdmFyIHcgPSB0aGlzLmZpbmRFeHQobSwgXCJhdXRob3JpdHlJbmZvQWNjZXNzXCIpO1xuICAgIGlmICh3ICE9IG51bGwgJiYgdy5hcnJheSAhPSBudWxsKVxuICAgICAgZm9yICh2YXIgeCA9IHcuYXJyYXksIEYgPSAwOyBGIDwgeC5sZW5ndGg7IEYrKylcbiAgICAgICAgeFtGXS5vY3NwICE9IG51bGwgJiYgKHhbRl0ub2NzcCA9IEUpO1xuICB9LCB0aGlzLnVwZGF0ZUV4dEFJQUNBSXNzdWVyID0gZnVuY3Rpb24obSwgRSkge1xuICAgIHZhciB3ID0gdGhpcy5maW5kRXh0KG0sIFwiYXV0aG9yaXR5SW5mb0FjY2Vzc1wiKTtcbiAgICBpZiAodyAhPSBudWxsICYmIHcuYXJyYXkgIT0gbnVsbClcbiAgICAgIGZvciAodmFyIHggPSB3LmFycmF5LCBGID0gMDsgRiA8IHgubGVuZ3RoOyBGKyspXG4gICAgICAgIHhbRl0uY2Fpc3N1ZXIgIT0gbnVsbCAmJiAoeFtGXS5jYWlzc3VlciA9IEUpO1xuICB9LCB0aGlzLmRuYXJyYXl0b3N0ciA9IGZ1bmN0aW9uKG0pIHtcbiAgICBmdW5jdGlvbiBFKHgpIHtcbiAgICAgIHJldHVybiB4Lm1hcChmdW5jdGlvbihGKSB7XG4gICAgICAgIHJldHVybiB3KEYpLnJlcGxhY2UoL1xcKy8sIFwiXFxcXCtcIik7XG4gICAgICB9KS5qb2luKFwiK1wiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdyh4KSB7XG4gICAgICByZXR1cm4geC50eXBlICsgXCI9XCIgKyB4LnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gXCIvXCIgKyBtLm1hcChmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gRSh4KS5yZXBsYWNlKC9cXC8vLCBcIlxcXFwvXCIpO1xuICAgIH0pLmpvaW4oXCIvXCIpO1xuICB9LCB0aGlzLnNldENhbm9uaWNhbGl6ZWRETiA9IGZ1bmN0aW9uKG0pIHtcbiAgICB2YXIgRTtcbiAgICBpZiAobS5zdHIgIT0gbnVsbCAmJiBtLmFycmF5ID09IG51bGwpIHtcbiAgICAgIHZhciB3ID0gbmV3IGEuYXNuMS54NTA5Llg1MDBOYW1lKHsgc3RyOiBtLnN0ciB9KSwgeCA9IHcudG9oZXgoKTtcbiAgICAgIEUgPSB0aGlzLmdldFg1MDBOYW1lQXJyYXkoeCk7XG4gICAgfSBlbHNlXG4gICAgICBFID0gbS5hcnJheTtcbiAgICBtLmNhbm9uID09IG51bGwgJiYgKG0uY2Fub24gPSB0aGlzLmMxNG5SRE5BcnJheShFKSk7XG4gIH0sIHRoaXMuYzE0blJETkFycmF5ID0gZnVuY3Rpb24obSkge1xuICAgIGZvciAodmFyIEUgPSBbXSwgdyA9IDA7IHcgPCBtLmxlbmd0aDsgdysrKSB7XG4gICAgICBmb3IgKHZhciB4ID0gbVt3XSwgRiA9IFtdLCBQID0gMDsgUCA8IHgubGVuZ3RoOyBQKyspIHtcbiAgICAgICAgdmFyIFQgPSB4W1BdLCBIID0gVC52YWx1ZTtcbiAgICAgICAgSCA9IEgucmVwbGFjZSgvXlxccyovLCBcIlwiKSwgSCA9IEgucmVwbGFjZSgvXFxzKiQvLCBcIlwiKSwgSCA9IEgucmVwbGFjZSgvXFxzKy9nLCBcIiBcIiksIEggPSBILnRvTG93ZXJDYXNlKCksIEYucHVzaChULnR5cGUudG9Mb3dlckNhc2UoKSArIFwiPVwiICsgSCk7XG4gICAgICB9XG4gICAgICBFLnB1c2goRi5qb2luKFwiK1wiKSk7XG4gICAgfVxuICAgIHJldHVybiBcIi9cIiArIEUuam9pbihcIi9cIik7XG4gIH0sIHRoaXMuZ2V0SW5mbyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtID0gZnVuY3Rpb24oY2UpIHtcbiAgICAgIGZvciAodmFyIE0gPSBcIlwiLCBHID0gXCIgICAgXCIsIFEgPSBgXG5gLCBlZSA9IGNlLmFycmF5LCBwZSA9IDA7IHBlIDwgZWUubGVuZ3RoOyBwZSsrKSB7XG4gICAgICAgIHZhciB0ZSA9IGVlW3BlXTtcbiAgICAgICAgaWYgKHRlLmRuICE9IG51bGwgJiYgKE0gKz0gRyArIFwiZG46IFwiICsgdGUuZG4uc3RyICsgUSksIHRlLmlwICE9IG51bGwgJiYgKE0gKz0gRyArIFwiaXA6IFwiICsgdGUuaXAgKyBRKSwgdGUucmZjODIyICE9IG51bGwgJiYgKE0gKz0gRyArIFwicmZjODIyOiBcIiArIHRlLnJmYzgyMiArIFEpLCB0ZS5kbnMgIT0gbnVsbCAmJiAoTSArPSBHICsgXCJkbnM6IFwiICsgdGUuZG5zICsgUSksIHRlLnVyaSAhPSBudWxsICYmIChNICs9IEcgKyBcInVyaTogXCIgKyB0ZS51cmkgKyBRKSwgdGUub3RoZXIgIT0gbnVsbCkge1xuICAgICAgICAgIHZhciBNZSA9IHRlLm90aGVyLm9pZCwgTmUgPSBKU09OLnN0cmluZ2lmeSh0ZS5vdGhlci52YWx1ZSkucmVwbGFjZSgvXFxcIi9nLCBcIlwiKTtcbiAgICAgICAgICBNICs9IEcgKyBcIm90aGVyOiBcIiArIE1lICsgXCI9XCIgKyBOZSArIFE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBNID0gTS5yZXBsYWNlKC9cXG4kLywgXCJcIiksIE07XG4gICAgfSwgRSA9IGZ1bmN0aW9uKGNlKSB7XG4gICAgICBmb3IgKHZhciBNID0gXCJcIiwgRyA9IGNlLmFycmF5LCBRID0gMDsgUSA8IEcubGVuZ3RoOyBRKyspIHtcbiAgICAgICAgdmFyIGVlID0gR1tRXTtcbiAgICAgICAgaWYgKE0gKz0gXCIgICAgcG9saWN5IG9pZDogXCIgKyBlZS5wb2xpY3lvaWQgKyBgXG5gLCBlZS5hcnJheSAhPT0gdm9pZCAwKVxuICAgICAgICAgIGZvciAodmFyIHBlID0gMDsgcGUgPCBlZS5hcnJheS5sZW5ndGg7IHBlKyspIHtcbiAgICAgICAgICAgIHZhciB0ZSA9IGVlLmFycmF5W3BlXTtcbiAgICAgICAgICAgIHRlLmNwcyAhPT0gdm9pZCAwICYmIChNICs9IFwiICAgIGNwczogXCIgKyB0ZS5jcHMgKyBgXG5gKTtcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gTTtcbiAgICB9LCB3ID0gZnVuY3Rpb24oY2UpIHtcbiAgICAgIGZvciAodmFyIE0gPSBcIlwiLCBHID0gY2UuYXJyYXksIFEgPSAwOyBRIDwgRy5sZW5ndGg7IFErKykge1xuICAgICAgICB2YXIgZWUgPSBHW1FdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGVlLmRwbmFtZS5mdWxsWzBdLnVyaSAhPT0gdm9pZCAwICYmIChNICs9IFwiICAgIFwiICsgZWUuZHBuYW1lLmZ1bGxbMF0udXJpICsgYFxuYCk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZWUuZG5hbWUuZnVsbFswXS5kbi5oZXggIT09IHZvaWQgMCAmJiAoTSArPSBcIiAgICBcIiArIEwuaGV4MmRuKGVlLmRwbmFtZS5mdWxsWzBdLmRuLmhleCkgKyBgXG5gKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBNO1xuICAgIH0sIHggPSBmdW5jdGlvbihjZSkge1xuICAgICAgZm9yICh2YXIgTSA9IFwiXCIsIEcgPSBjZS5hcnJheSwgUSA9IDA7IFEgPCBHLmxlbmd0aDsgUSsrKSB7XG4gICAgICAgIHZhciBlZSA9IEdbUV07XG4gICAgICAgIGVlLmNhaXNzdWVyICE9PSB2b2lkIDAgJiYgKE0gKz0gXCIgICAgY2Fpc3N1ZXI6IFwiICsgZWUuY2Fpc3N1ZXIgKyBgXG5gKSwgZWUub2NzcCAhPT0gdm9pZCAwICYmIChNICs9IFwiICAgIG9jc3A6IFwiICsgZWUub2NzcCArIGBcbmApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE07XG4gICAgfSwgRiwgUCwgVDtcbiAgICBpZiAoRiA9IGBCYXNpYyBGaWVsZHNcbmAsIEYgKz0gXCIgIHNlcmlhbCBudW1iZXI6IFwiICsgdGhpcy5nZXRTZXJpYWxOdW1iZXJIZXgoKSArIGBcbmAsIEYgKz0gXCIgIHNpZ25hdHVyZSBhbGdvcml0aG06IFwiICsgdGhpcy5nZXRTaWduYXR1cmVBbGdvcml0aG1GaWVsZCgpICsgYFxuYCwgRiArPSBcIiAgaXNzdWVyOiBcIiArIHRoaXMuZ2V0SXNzdWVyU3RyaW5nKCkgKyBgXG5gLCBGICs9IFwiICBub3RCZWZvcmU6IFwiICsgdGhpcy5nZXROb3RCZWZvcmUoKSArIGBcbmAsIEYgKz0gXCIgIG5vdEFmdGVyOiBcIiArIHRoaXMuZ2V0Tm90QWZ0ZXIoKSArIGBcbmAsIEYgKz0gXCIgIHN1YmplY3Q6IFwiICsgdGhpcy5nZXRTdWJqZWN0U3RyaW5nKCkgKyBgXG5gLCBGICs9IGAgIHN1YmplY3QgcHVibGljIGtleSBpbmZvOiBcbmAsIFAgPSB0aGlzLmdldFB1YmxpY0tleSgpLCBGICs9IFwiICAgIGtleSBhbGdvcml0aG06IFwiICsgUC50eXBlICsgYFxuYCwgUC50eXBlID09PSBcIlJTQVwiICYmIChGICs9IFwiICAgIG49XCIgKyB4dChQLm4udG9TdHJpbmcoMTYpKS5zdWJzdHIoMCwgMTYpICsgYC4uLlxuYCwgRiArPSBcIiAgICBlPVwiICsgeHQoUC5lLnRvU3RyaW5nKDE2KSkgKyBgXG5gKSwgVCA9IHRoaXMuYUV4dEluZm8sIFQgIT0gbnVsbCkge1xuICAgICAgRiArPSBgWDUwOXYzIEV4dGVuc2lvbnM6XG5gO1xuICAgICAgZm9yICh2YXIgSCA9IDA7IEggPCBULmxlbmd0aDsgSCsrKSB7XG4gICAgICAgIHZhciBDID0gVFtIXSwgQiA9IGEuYXNuMS54NTA5Lk9JRC5vaWQybmFtZShDLm9pZCk7XG4gICAgICAgIEIgPT09IFwiXCIgJiYgKEIgPSBDLm9pZCk7XG4gICAgICAgIHZhciBPID0gXCJcIjtcbiAgICAgICAgaWYgKEMuY3JpdGljYWwgPT09ICEwICYmIChPID0gXCJDUklUSUNBTFwiKSwgRiArPSBcIiAgXCIgKyBCICsgXCIgXCIgKyBPICsgYDpcbmAsIEIgPT09IFwiYmFzaWNDb25zdHJhaW50c1wiKSB7XG4gICAgICAgICAgdmFyIGogPSB0aGlzLmdldEV4dEJhc2ljQ29uc3RyYWludHMoKTtcbiAgICAgICAgICBqLmNBID09PSB2b2lkIDAgPyBGICs9IGAgICAge31cbmAgOiAoRiArPSBcIiAgICBjQT10cnVlXCIsIGoucGF0aExlbiAhPT0gdm9pZCAwICYmIChGICs9IFwiLCBwYXRoTGVuPVwiICsgai5wYXRoTGVuKSwgRiArPSBgXG5gKTtcbiAgICAgICAgfSBlbHNlIGlmIChCID09IFwicG9saWN5TWFwcGluZ3NcIikge1xuICAgICAgICAgIHZhciBmZSA9IHRoaXMuZ2V0RXh0UG9saWN5TWFwcGluZ3MoKS5hcnJheSwgWiA9IGZlLm1hcChmdW5jdGlvbihjZSkge1xuICAgICAgICAgICAgdmFyIE0gPSBjZTtcbiAgICAgICAgICAgIHJldHVybiBNWzBdICsgXCI6XCIgKyBNWzFdO1xuICAgICAgICAgIH0pLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICBGICs9IFwiICAgIFwiICsgWiArIGBcbmA7XG4gICAgICAgIH0gZWxzZSBpZiAoQiA9PSBcInBvbGljeUNvbnN0cmFpbnRzXCIpIHtcbiAgICAgICAgICB2YXIgWCA9IHRoaXMuZ2V0RXh0UG9saWN5Q29uc3RyYWludHMoKTtcbiAgICAgICAgICBGICs9IFwiICAgIFwiLCBYLnJlcWV4cCAhPSBudWxsICYmIChGICs9IFwiIHJlcWV4cD1cIiArIFgucmVxZXhwKSwgWC5pbmhpYml0ICE9IG51bGwgJiYgKEYgKz0gXCIgaW5oaWJpdD1cIiArIFguaW5oaWJpdCksIEYgKz0gYFxuYDtcbiAgICAgICAgfSBlbHNlIGlmIChCID09IFwiaW5oaWJpdEFueVBvbGljeVwiKSB7XG4gICAgICAgICAgdmFyIFggPSB0aGlzLmdldEV4dEluaGliaXRBbnlQb2xpY3koKTtcbiAgICAgICAgICBGICs9IFwiICAgIHNraXA9XCIgKyBYLnNraXAgKyBgXG5gO1xuICAgICAgICB9IGVsc2UgaWYgKEIgPT0gXCJrZXlVc2FnZVwiKVxuICAgICAgICAgIEYgKz0gXCIgICAgXCIgKyB0aGlzLmdldEV4dEtleVVzYWdlU3RyaW5nKCkgKyBgXG5gO1xuICAgICAgICBlbHNlIGlmIChCID09IFwic3ViamVjdEtleUlkZW50aWZpZXJcIilcbiAgICAgICAgICBGICs9IFwiICAgIFwiICsgdGhpcy5nZXRFeHRTdWJqZWN0S2V5SWRlbnRpZmllcigpLmtpZC5oZXggKyBgXG5gO1xuICAgICAgICBlbHNlIGlmIChCID09IFwiYXV0aG9yaXR5S2V5SWRlbnRpZmllclwiKSB7XG4gICAgICAgICAgdmFyIHJlID0gdGhpcy5nZXRFeHRBdXRob3JpdHlLZXlJZGVudGlmaWVyKCk7XG4gICAgICAgICAgcmUua2lkICE9PSB2b2lkIDAgJiYgKEYgKz0gXCIgICAga2lkPVwiICsgcmUua2lkLmhleCArIGBcbmApO1xuICAgICAgICB9IGVsc2UgaWYgKEIgPT0gXCJleHRLZXlVc2FnZVwiKSB7XG4gICAgICAgICAgdmFyIG5lID0gdGhpcy5nZXRFeHRFeHRLZXlVc2FnZSgpLmFycmF5O1xuICAgICAgICAgIEYgKz0gXCIgICAgXCIgKyBuZS5qb2luKFwiLCBcIikgKyBgXG5gO1xuICAgICAgICB9IGVsc2UgaWYgKEIgPT0gXCJzdWJqZWN0QWx0TmFtZVwiKSB7XG4gICAgICAgICAgdmFyIGhlID0gbSh0aGlzLmdldEV4dFN1YmplY3RBbHROYW1lKCkpO1xuICAgICAgICAgIEYgKz0gaGUgKyBgXG5gO1xuICAgICAgICB9IGVsc2UgaWYgKEIgPT0gXCJjUkxEaXN0cmlidXRpb25Qb2ludHNcIikge1xuICAgICAgICAgIHZhciBzZSA9IHRoaXMuZ2V0RXh0Q1JMRGlzdHJpYnV0aW9uUG9pbnRzKCk7XG4gICAgICAgICAgRiArPSB3KHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChCID09IFwiYXV0aG9yaXR5SW5mb0FjY2Vzc1wiKSB7XG4gICAgICAgICAgdmFyIGtlID0gdGhpcy5nZXRFeHRBdXRob3JpdHlJbmZvQWNjZXNzKCk7XG4gICAgICAgICAgRiArPSB4KGtlKTtcbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgQiA9PSBcImNlcnRpZmljYXRlUG9saWNpZXNcIiAmJiAoRiArPSBFKHRoaXMuZ2V0RXh0Q2VydGlmaWNhdGVQb2xpY2llcygpKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBGICs9IFwic2lnbmF0dXJlIGFsZ29yaXRobTogXCIgKyB0aGlzLmdldFNpZ25hdHVyZUFsZ29yaXRobU5hbWUoKSArIGBcbmAsIEYgKz0gXCJzaWduYXR1cmU6IFwiICsgdGhpcy5nZXRTaWduYXR1cmVWYWx1ZUhleCgpLnN1YnN0cigwLCAxNikgKyBgLi4uXG5gLCBGO1xuICB9LCB0eXBlb2YgZSA9PSBcInN0cmluZ1wiICYmIChlLmluZGV4T2YoXCItLS0tLUJFR0lOXCIpICE9IC0xID8gdGhpcy5yZWFkQ2VydFBFTShlKSA6IGEubGFuZy5TdHJpbmcuaXNIZXgoZSkgJiYgdGhpcy5yZWFkQ2VydEhleChlKSk7XG59XG5MLkVYVF9QQVJTRVIgPSB7fTtcbkwucmVnaXN0RXh0UGFyc2VyID0gZnVuY3Rpb24oZSwgdCkge1xuICBMLkVYVF9QQVJTRVJbZV0gPSB0O1xufTtcbkwuaGV4MmRuID0gZnVuY3Rpb24oZSwgdCkge1xuICB0ID09PSB2b2lkIDAgJiYgKHQgPSAwKTtcbiAgdmFyIHIgPSBuZXcgTCgpO1xuICBWLmdldFRMVihlLCB0KTtcbiAgdmFyIGkgPSByLmdldFg1MDBOYW1lKGUpO1xuICByZXR1cm4gaS5zdHI7XG59O1xuTC5oZXgycmRuID0gZnVuY3Rpb24oZSwgdCkge1xuICBpZiAodCA9PT0gdm9pZCAwICYmICh0ID0gMCksIGUuc3Vic3RyKHQsIDIpICE9PSBcIjMxXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIFJETlwiKTtcbiAgZm9yICh2YXIgciA9IG5ldyBBcnJheSgpLCBpID0gVi5nZXRDaGlsZElkeChlLCB0KSwgcyA9IDA7IHMgPCBpLmxlbmd0aDsgcysrKVxuICAgIHIucHVzaChMLmhleDJhdHRyVHlwZVZhbHVlKGUsIGlbc10pKTtcbiAgcmV0dXJuIHIgPSByLm1hcChmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIG4ucmVwbGFjZShcIitcIiwgXCJcXFxcK1wiKTtcbiAgfSksIHIuam9pbihcIitcIik7XG59O1xuTC5oZXgyYXR0clR5cGVWYWx1ZSA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBWLCBpID0gci5nZXRWO1xuICBpZiAodCA9PT0gdm9pZCAwICYmICh0ID0gMCksIGUuc3Vic3RyKHQsIDIpICE9PSBcIjMwXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwibWFsZm9ybWVkIGF0dHJpYnV0ZSB0eXBlIGFuZCB2YWx1ZVwiKTtcbiAgdmFyIHMgPSByLmdldENoaWxkSWR4KGUsIHQpO1xuICBzLmxlbmd0aCAhPT0gMiB8fCBlLnN1YnN0cihzWzBdLCAyKTtcbiAgdmFyIG4gPSBpKGUsIHNbMF0pLCBoID0gYS5hc24xLkFTTjFVdGlsLm9pZEhleFRvSW50KG4pLCB1ID0gYS5hc24xLng1MDkuT0lELm9pZDJhdHlwZShoKSwgcCA9IGkoZSwgc1sxXSksIGMgPSBBZShwKTtcbiAgcmV0dXJuIHUgKyBcIj1cIiArIGM7XG59O1xuTC5nZXRQdWJsaWNLZXlGcm9tQ2VydEhleCA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBuZXcgTCgpO1xuICByZXR1cm4gdC5yZWFkQ2VydEhleChlKSwgdC5nZXRQdWJsaWNLZXkoKTtcbn07XG5MLmdldFB1YmxpY0tleUZyb21DZXJ0UEVNID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IG5ldyBMKCk7XG4gIHJldHVybiB0LnJlYWRDZXJ0UEVNKGUpLCB0LmdldFB1YmxpY0tleSgpO1xufTtcbkwuZ2V0UHVibGljS2V5SW5mb1Byb3BPZkNlcnRQRU0gPSBmdW5jdGlvbihlKSB7XG4gIHZhciB0ID0gViwgciA9IHQuZ2V0VmJ5TGlzdCwgaSA9IHt9LCBzLCBuO1xuICByZXR1cm4gaS5hbGdwYXJhbSA9IG51bGwsIHMgPSBuZXcgTCgpLCBzLnJlYWRDZXJ0UEVNKGUpLCBuID0gcy5nZXRQdWJsaWNLZXlIZXgoKSwgaS5rZXloZXggPSByKG4sIDAsIFsxXSwgXCIwM1wiKS5zdWJzdHIoMiksIGkuYWxnb2lkID0gcihuLCAwLCBbMCwgMF0sIFwiMDZcIiksIGkuYWxnb2lkID09PSBcIjJhODY0OGNlM2QwMjAxXCIgJiYgKGkuYWxncGFyYW0gPSByKG4sIDAsIFswLCAxXSwgXCIwNlwiKSksIGk7XG59O1xuTC5LRVlVU0FHRV9OQU1FID0gW1wiZGlnaXRhbFNpZ25hdHVyZVwiLCBcIm5vblJlcHVkaWF0aW9uXCIsIFwia2V5RW5jaXBoZXJtZW50XCIsIFwiZGF0YUVuY2lwaGVybWVudFwiLCBcImtleUFncmVlbWVudFwiLCBcImtleUNlcnRTaWduXCIsIFwiY1JMU2lnblwiLCBcImVuY2lwaGVyT25seVwiLCBcImRlY2lwaGVyT25seVwiXTtcbih0eXBlb2YgYSA+IFwidVwiIHx8ICFhKSAmJiAoYSA9IHt9KTtcbih0eXBlb2YgYS5qd3MgPiBcInVcIiB8fCAhYS5qd3MpICYmIChhLmp3cyA9IHt9KTtcbmEuandzLkpXUyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IGEsIHQgPSBlLmp3cy5KV1MsIHIgPSB0LmlzU2FmZUpTT05TdHJpbmc7XG4gIHRoaXMucGFyc2VKV1MgPSBmdW5jdGlvbihpLCBzKSB7XG4gICAgaWYgKCEodGhpcy5wYXJzZWRKV1MgIT09IHZvaWQgMCAmJiAocyB8fCB0aGlzLnBhcnNlZEpXUy5zaWd2YWxIICE9PSB2b2lkIDApKSkge1xuICAgICAgdmFyIG4gPSBpLm1hdGNoKC9eKFteLl0rKVxcLihbXi5dKylcXC4oW14uXSspJC8pO1xuICAgICAgaWYgKG4gPT0gbnVsbClcbiAgICAgICAgdGhyb3cgXCJKV1Mgc2lnbmF0dXJlIGlzIG5vdCBhIGZvcm0gb2YgJ0hlYWQuUGF5bG9hZC5TaWdWYWx1ZScuXCI7XG4gICAgICB2YXIgaCA9IG5bMV0sIHUgPSBuWzJdLCBwID0gblszXSwgYyA9IGggKyBcIi5cIiArIHU7XG4gICAgICBpZiAodGhpcy5wYXJzZWRKV1MgPSB7fSwgdGhpcy5wYXJzZWRKV1MuaGVhZEI2NFUgPSBoLCB0aGlzLnBhcnNlZEpXUy5wYXlsb2FkQjY0VSA9IHUsIHRoaXMucGFyc2VkSldTLnNpZ3ZhbEI2NFUgPSBwLCB0aGlzLnBhcnNlZEpXUy5zaSA9IGMsICFzKSB7XG4gICAgICAgIHZhciB5ID0gWShwKSwgdiA9IHZlKHksIDE2KTtcbiAgICAgICAgdGhpcy5wYXJzZWRKV1Muc2lndmFsSCA9IHksIHRoaXMucGFyc2VkSldTLnNpZ3ZhbEJJID0gdjtcbiAgICAgIH1cbiAgICAgIHZhciBvID0gd2UoaCksIGwgPSB3ZSh1KTtcbiAgICAgIGlmICh0aGlzLnBhcnNlZEpXUy5oZWFkUyA9IG8sIHRoaXMucGFyc2VkSldTLnBheWxvYWRTID0gbCwgIXIobywgdGhpcy5wYXJzZWRKV1MsIFwiaGVhZFBcIikpXG4gICAgICAgIHRocm93IFwibWFsZm9ybWVkIEpTT04gc3RyaW5nIGZvciBKV1MgSGVhZDogXCIgKyBvO1xuICAgIH1cbiAgfTtcbn07XG5hLmp3cy5KV1Muc2lnbiA9IGZ1bmN0aW9uKGUsIHQsIHIsIGksIHMpIHtcbiAgdmFyIG4gPSBhLCBoID0gbi5qd3MsIHUgPSBoLkpXUywgcCA9IHUucmVhZFNhZmVKU09OU3RyaW5nLCBjID0gdS5pc1NhZmVKU09OU3RyaW5nLCB5ID0gbi5jcnlwdG87XG4gIHkuRUNEU0E7XG4gIHZhciB2ID0geS5NYWMsIG8gPSB5LlNpZ25hdHVyZSwgbCA9IEpTT04sIGYsIGQsIGc7XG4gIGlmICh0eXBlb2YgdCAhPSBcInN0cmluZ1wiICYmIHR5cGVvZiB0ICE9IFwib2JqZWN0XCIpXG4gICAgdGhyb3cgXCJzcEhlYWRlciBtdXN0IGJlIEpTT04gc3RyaW5nIG9yIG9iamVjdDogXCIgKyB0O1xuICBpZiAodHlwZW9mIHQgPT0gXCJvYmplY3RcIiAmJiAoZCA9IHQsIGYgPSBsLnN0cmluZ2lmeShkKSksIHR5cGVvZiB0ID09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAoZiA9IHQsICFjKGYpKVxuICAgICAgdGhyb3cgXCJKV1MgSGVhZCBpcyBub3Qgc2FmZSBKU09OIHN0cmluZzogXCIgKyBmO1xuICAgIGQgPSBwKGYpO1xuICB9XG4gIGlmIChnID0gciwgdHlwZW9mIHIgPT0gXCJvYmplY3RcIiAmJiAoZyA9IGwuc3RyaW5naWZ5KHIpKSwgKGUgPT0gXCJcIiB8fCBlID09IG51bGwpICYmIGQuYWxnICE9PSB2b2lkIDAgJiYgKGUgPSBkLmFsZyksIGUgIT0gXCJcIiAmJiBlICE9IG51bGwgJiYgZC5hbGcgPT09IHZvaWQgMCAmJiAoZC5hbGcgPSBlLCBmID0gbC5zdHJpbmdpZnkoZCkpLCBlICE9PSBkLmFsZylcbiAgICB0aHJvdyBcImFsZyBhbmQgc0hlYWRlci5hbGcgZG9lc24ndCBtYXRjaDogXCIgKyBlICsgXCIhPVwiICsgZC5hbGc7XG4gIHZhciBTID0gbnVsbDtcbiAgaWYgKHUuandzYWxnMnNpZ2FsZ1tlXSA9PT0gdm9pZCAwKVxuICAgIHRocm93IFwidW5zdXBwb3J0ZWQgYWxnIG5hbWU6IFwiICsgZTtcbiAgUyA9IHUuandzYWxnMnNpZ2FsZ1tlXTtcbiAgdmFyIGIgPSBKZShmKSwgRCA9IEplKGcpLCBBID0gYiArIFwiLlwiICsgRCwgSSA9IFwiXCI7XG4gIGlmIChTLnN1YnN0cigwLCA0KSA9PSBcIkhtYWNcIikge1xuICAgIGlmIChpID09PSB2b2lkIDApXG4gICAgICB0aHJvdyBcIm1hYyBrZXkgc2hhbGwgYmUgc3BlY2lmaWVkIGZvciBIUyogYWxnXCI7XG4gICAgdmFyIG0gPSBuZXcgdih7IGFsZzogUywgcHJvdjogXCJjcnlwdG9qc1wiLCBwYXNzOiBpIH0pO1xuICAgIG0udXBkYXRlU3RyaW5nKEEpLCBJID0gbS5kb0ZpbmFsKCk7XG4gIH0gZWxzZSBpZiAoUy5pbmRleE9mKFwid2l0aEVDRFNBXCIpICE9IC0xKSB7XG4gICAgdmFyIEUgPSBuZXcgbyh7IGFsZzogUyB9KTtcbiAgICBFLmluaXQoaSwgcyksIEUudXBkYXRlU3RyaW5nKEEpO1xuICAgIHZhciB3ID0gRS5zaWduKCk7XG4gICAgSSA9IGEuY3J5cHRvLkVDRFNBLmFzbjFTaWdUb0NvbmNhdFNpZyh3KTtcbiAgfSBlbHNlIGlmIChTICE9IFwibm9uZVwiKSB7XG4gICAgdmFyIEUgPSBuZXcgbyh7IGFsZzogUyB9KTtcbiAgICBFLmluaXQoaSwgcyksIEUudXBkYXRlU3RyaW5nKEEpLCBJID0gRS5zaWduKCk7XG4gIH1cbiAgdmFyIHggPSBhZShJKTtcbiAgcmV0dXJuIEEgKyBcIi5cIiArIHg7XG59O1xuYS5qd3MuSldTLnZlcmlmeSA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgdmFyIGkgPSBhLCBzID0gaS5qd3MsIG4gPSBzLkpXUywgaCA9IG4ucmVhZFNhZmVKU09OU3RyaW5nLCB1ID0gaS5jcnlwdG8sIHAgPSB1LkVDRFNBLCBjID0gdS5NYWMsIHkgPSB1LlNpZ25hdHVyZSwgdjtcbiAgaWYgKHR5cGVvZiBxICE9PSB2b2lkIDAgJiYgKHYgPSBxKSwgIUh0KGUpKVxuICAgIHJldHVybiAhMTtcbiAgdmFyIG8gPSBlLnNwbGl0KFwiLlwiKTtcbiAgaWYgKG8ubGVuZ3RoICE9PSAzKVxuICAgIHJldHVybiAhMTtcbiAgdmFyIGwgPSBvWzBdLCBmID0gb1sxXSwgZCA9IGwgKyBcIi5cIiArIGYsIGcgPSBZKG9bMl0pLCBTID0gaCh3ZShvWzBdKSksIGIgPSBudWxsLCBEID0gbnVsbDtcbiAgaWYgKFMuYWxnID09PSB2b2lkIDApXG4gICAgdGhyb3cgXCJhbGdvcml0aG0gbm90IHNwZWNpZmllZCBpbiBoZWFkZXJcIjtcbiAgaWYgKGIgPSBTLmFsZywgRCA9IGIuc3Vic3RyKDAsIDIpLCByICE9IG51bGwgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpID09PSBcIltvYmplY3QgQXJyYXldXCIgJiYgci5sZW5ndGggPiAwKSB7XG4gICAgdmFyIEEgPSBcIjpcIiArIHIuam9pbihcIjpcIikgKyBcIjpcIjtcbiAgICBpZiAoQS5pbmRleE9mKFwiOlwiICsgYiArIFwiOlwiKSA9PSAtMSlcbiAgICAgIHRocm93IFwiYWxnb3JpdGhtICdcIiArIGIgKyBcIicgbm90IGFjY2VwdGVkIGluIHRoZSBsaXN0XCI7XG4gIH1cbiAgaWYgKGIgIT0gXCJub25lXCIgJiYgdCA9PT0gbnVsbClcbiAgICB0aHJvdyBcImtleSBzaGFsbCBiZSBzcGVjaWZpZWQgdG8gdmVyaWZ5LlwiO1xuICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIiAmJiB0LmluZGV4T2YoXCItLS0tLUJFR0lOIFwiKSAhPSAtMSAmJiAodCA9IGsuZ2V0S2V5KHQpKSwgKEQgPT0gXCJSU1wiIHx8IEQgPT0gXCJQU1wiKSAmJiAhKHQgaW5zdGFuY2VvZiB2KSlcbiAgICB0aHJvdyBcImtleSBzaGFsbCBiZSBhIFJTQUtleSBvYmogZm9yIFJTKiBhbmQgUFMqIGFsZ3NcIjtcbiAgaWYgKEQgPT0gXCJFU1wiICYmICEodCBpbnN0YW5jZW9mIHApKVxuICAgIHRocm93IFwia2V5IHNoYWxsIGJlIGEgRUNEU0Egb2JqIGZvciBFUyogYWxnc1wiO1xuICB2YXIgSSA9IG51bGw7XG4gIGlmIChuLmp3c2FsZzJzaWdhbGdbUy5hbGddID09PSB2b2lkIDApXG4gICAgdGhyb3cgXCJ1bnN1cHBvcnRlZCBhbGcgbmFtZTogXCIgKyBiO1xuICBpZiAoSSA9IG4uandzYWxnMnNpZ2FsZ1tiXSwgSSA9PSBcIm5vbmVcIilcbiAgICB0aHJvdyBcIm5vdCBzdXBwb3J0ZWRcIjtcbiAgaWYgKEkuc3Vic3RyKDAsIDQpID09IFwiSG1hY1wiKSB7XG4gICAgdmFyIG0gPSBudWxsO1xuICAgIGlmICh0ID09PSB2b2lkIDApXG4gICAgICB0aHJvdyBcImhleGFkZWNpbWFsIGtleSBzaGFsbCBiZSBzcGVjaWZpZWQgZm9yIEhNQUNcIjtcbiAgICB2YXIgRSA9IG5ldyBjKHsgYWxnOiBJLCBwYXNzOiB0IH0pO1xuICAgIHJldHVybiBFLnVwZGF0ZVN0cmluZyhkKSwgbSA9IEUuZG9GaW5hbCgpLCBnID09IG07XG4gIH0gZWxzZSBpZiAoSS5pbmRleE9mKFwid2l0aEVDRFNBXCIpICE9IC0xKSB7XG4gICAgdmFyIHcgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICB3ID0gcC5jb25jYXRTaWdUb0FTTjFTaWcoZyk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHZhciB4ID0gbmV3IHkoeyBhbGc6IEkgfSk7XG4gICAgcmV0dXJuIHguaW5pdCh0KSwgeC51cGRhdGVTdHJpbmcoZCksIHgudmVyaWZ5KHcpO1xuICB9IGVsc2Uge1xuICAgIHZhciB4ID0gbmV3IHkoeyBhbGc6IEkgfSk7XG4gICAgcmV0dXJuIHguaW5pdCh0KSwgeC51cGRhdGVTdHJpbmcoZCksIHgudmVyaWZ5KGcpO1xuICB9XG59O1xuYS5qd3MuSldTLnBhcnNlID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGUuc3BsaXQoXCIuXCIpLCByID0ge30sIGksIHMsIG47XG4gIGlmICh0Lmxlbmd0aCAhPSAyICYmIHQubGVuZ3RoICE9IDMpXG4gICAgdGhyb3cgXCJtYWxmb3JtZWQgc0pXUzogd3JvbmcgbnVtYmVyIG9mICcuJyBzcGxpdHRlZCBlbGVtZW50c1wiO1xuICByZXR1cm4gaSA9IHRbMF0sIHMgPSB0WzFdLCB0Lmxlbmd0aCA9PSAzICYmIChuID0gdFsyXSksIHIuaGVhZGVyT2JqID0gYS5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyh3ZShpKSksIHIucGF5bG9hZE9iaiA9IGEuandzLkpXUy5yZWFkU2FmZUpTT05TdHJpbmcod2UocykpLCByLmhlYWRlclBQID0gSlNPTi5zdHJpbmdpZnkoci5oZWFkZXJPYmosIG51bGwsIFwiICBcIiksIHIucGF5bG9hZE9iaiA9PSBudWxsID8gci5wYXlsb2FkUFAgPSB3ZShzKSA6IHIucGF5bG9hZFBQID0gSlNPTi5zdHJpbmdpZnkoci5wYXlsb2FkT2JqLCBudWxsLCBcIiAgXCIpLCBuICE9PSB2b2lkIDAgJiYgKHIuc2lnSGV4ID0gWShuKSksIHI7XG59O1xuYS5qd3MuSldTLnZlcmlmeUpXVCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgdmFyIGkgPSBhLCBzID0gaS5qd3MsIG4gPSBzLkpXUywgaCA9IG4ucmVhZFNhZmVKU09OU3RyaW5nLCB1ID0gbi5pbkFycmF5LCBwID0gbi5pbmNsdWRlZEFycmF5O1xuICBpZiAoIUh0KGUpKVxuICAgIHJldHVybiAhMTtcbiAgdmFyIGMgPSBlLnNwbGl0KFwiLlwiKTtcbiAgaWYgKGMubGVuZ3RoICE9IDMpXG4gICAgcmV0dXJuICExO1xuICB2YXIgeSA9IGNbMF0sIHYgPSBjWzFdO1xuICBZKGNbMl0pO1xuICB2YXIgbyA9IGgod2UoeSkpLCBsID0gaCh3ZSh2KSk7XG4gIGlmIChvLmFsZyA9PT0gdm9pZCAwKVxuICAgIHJldHVybiAhMTtcbiAgaWYgKHIuYWxnID09PSB2b2lkIDApXG4gICAgdGhyb3cgXCJhY2NlcHRGaWVsZC5hbGcgc2hhbGwgYmUgc3BlY2lmaWVkXCI7XG4gIGlmICghdShvLmFsZywgci5hbGcpIHx8IGwuaXNzICE9PSB2b2lkIDAgJiYgdHlwZW9mIHIuaXNzID09IFwib2JqZWN0XCIgJiYgIXUobC5pc3MsIHIuaXNzKSB8fCBsLnN1YiAhPT0gdm9pZCAwICYmIHR5cGVvZiByLnN1YiA9PSBcIm9iamVjdFwiICYmICF1KGwuc3ViLCByLnN1YikpXG4gICAgcmV0dXJuICExO1xuICBpZiAobC5hdWQgIT09IHZvaWQgMCAmJiB0eXBlb2Ygci5hdWQgPT0gXCJvYmplY3RcIikge1xuICAgIGlmICh0eXBlb2YgbC5hdWQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKCF1KGwuYXVkLCByLmF1ZCkpXG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsLmF1ZCA9PSBcIm9iamVjdFwiICYmICFwKGwuYXVkLCByLmF1ZCkpXG4gICAgICByZXR1cm4gITE7XG4gIH1cbiAgdmFyIGYgPSBzLkludERhdGUuZ2V0Tm93KCk7XG4gIHJldHVybiByLnZlcmlmeUF0ICE9PSB2b2lkIDAgJiYgdHlwZW9mIHIudmVyaWZ5QXQgPT0gXCJudW1iZXJcIiAmJiAoZiA9IHIudmVyaWZ5QXQpLCAoci5ncmFjZVBlcmlvZCA9PT0gdm9pZCAwIHx8IHR5cGVvZiByLmdyYWNlUGVyaW9kICE9IFwibnVtYmVyXCIpICYmIChyLmdyYWNlUGVyaW9kID0gMCksICEobC5leHAgIT09IHZvaWQgMCAmJiB0eXBlb2YgbC5leHAgPT0gXCJudW1iZXJcIiAmJiBsLmV4cCArIHIuZ3JhY2VQZXJpb2QgPCBmIHx8IGwubmJmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGwubmJmID09IFwibnVtYmVyXCIgJiYgZiA8IGwubmJmIC0gci5ncmFjZVBlcmlvZCB8fCBsLmlhdCAhPT0gdm9pZCAwICYmIHR5cGVvZiBsLmlhdCA9PSBcIm51bWJlclwiICYmIGYgPCBsLmlhdCAtIHIuZ3JhY2VQZXJpb2QgfHwgbC5qdGkgIT09IHZvaWQgMCAmJiByLmp0aSAhPT0gdm9pZCAwICYmIGwuanRpICE9PSByLmp0aSB8fCAhbi52ZXJpZnkoZSwgdCwgci5hbGcpKTtcbn07XG5hLmp3cy5KV1MuaW5jbHVkZWRBcnJheSA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgdmFyIHIgPSBhLmp3cy5KV1MuaW5BcnJheTtcbiAgaWYgKGUgPT09IG51bGwgfHwgdHlwZW9mIGUgIT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZS5sZW5ndGggIT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gITE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZS5sZW5ndGg7IGkrKylcbiAgICBpZiAoIXIoZVtpXSwgdCkpXG4gICAgICByZXR1cm4gITE7XG4gIHJldHVybiAhMDtcbn07XG5hLmp3cy5KV1MuaW5BcnJheSA9IGZ1bmN0aW9uKGUsIHQpIHtcbiAgaWYgKHQgPT09IG51bGwgfHwgdHlwZW9mIHQgIT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgdC5sZW5ndGggIT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gITE7XG4gIGZvciAodmFyIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKylcbiAgICBpZiAodFtyXSA9PSBlKVxuICAgICAgcmV0dXJuICEwO1xuICByZXR1cm4gITE7XG59O1xuYS5qd3MuSldTLmp3c2FsZzJzaWdhbGcgPSB7IEhTMjU2OiBcIkhtYWNTSEEyNTZcIiwgSFMzODQ6IFwiSG1hY1NIQTM4NFwiLCBIUzUxMjogXCJIbWFjU0hBNTEyXCIsIFJTMjU2OiBcIlNIQTI1NndpdGhSU0FcIiwgUlMzODQ6IFwiU0hBMzg0d2l0aFJTQVwiLCBSUzUxMjogXCJTSEE1MTJ3aXRoUlNBXCIsIEVTMjU2OiBcIlNIQTI1NndpdGhFQ0RTQVwiLCBFUzM4NDogXCJTSEEzODR3aXRoRUNEU0FcIiwgRVM1MTI6IFwiU0hBNTEyd2l0aEVDRFNBXCIsIFBTMjU2OiBcIlNIQTI1NndpdGhSU0FhbmRNR0YxXCIsIFBTMzg0OiBcIlNIQTM4NHdpdGhSU0FhbmRNR0YxXCIsIFBTNTEyOiBcIlNIQTUxMndpdGhSU0FhbmRNR0YxXCIsIG5vbmU6IFwibm9uZVwiIH07XG5hLmp3cy5KV1MuaXNTYWZlSlNPTlN0cmluZyA9IGZ1bmN0aW9uKGUsIHQsIHIpIHtcbiAgdmFyIGkgPSBudWxsO1xuICB0cnkge1xuICAgIHJldHVybiBpID0gUHQoZSksIHR5cGVvZiBpICE9IFwib2JqZWN0XCIgfHwgaS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyAwIDogKHQgJiYgKHRbcl0gPSBpKSwgMSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiAwO1xuICB9XG59O1xuYS5qd3MuSldTLnJlYWRTYWZlSlNPTlN0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBudWxsO1xuICB0cnkge1xuICAgIHJldHVybiB0ID0gUHQoZSksIHR5cGVvZiB0ICE9IFwib2JqZWN0XCIgfHwgdC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyBudWxsIDogdDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5hLmp3cy5KV1MuZ2V0RW5jb2RlZFNpZ25hdHVyZVZhbHVlRnJvbUpXUyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBlLm1hdGNoKC9eW14uXStcXC5bXi5dK1xcLihbXi5dKykkLyk7XG4gIGlmICh0ID09IG51bGwpXG4gICAgdGhyb3cgXCJKV1Mgc2lnbmF0dXJlIGlzIG5vdCBhIGZvcm0gb2YgJ0hlYWQuUGF5bG9hZC5TaWdWYWx1ZScuXCI7XG4gIHJldHVybiB0WzFdO1xufTtcbmEuandzLkpXUy5nZXRKV0t0aHVtYnByaW50ID0gZnVuY3Rpb24oZSkge1xuICBpZiAoZS5rdHkgIT09IFwiUlNBXCIgJiYgZS5rdHkgIT09IFwiRUNcIiAmJiBlLmt0eSAhPT0gXCJvY3RcIilcbiAgICB0aHJvdyBcInVuc3VwcG9ydGVkIGFsZ29yaXRobSBmb3IgSldLIFRodW1wcmludFwiO1xuICB2YXIgdCA9IFwie1wiO1xuICBpZiAoZS5rdHkgPT09IFwiUlNBXCIpIHtcbiAgICBpZiAodHlwZW9mIGUubiAhPSBcInN0cmluZ1wiIHx8IHR5cGVvZiBlLmUgIT0gXCJzdHJpbmdcIilcbiAgICAgIHRocm93IFwid3JvbmcgbiBhbmQgZSB2YWx1ZSBmb3IgUlNBIGtleVwiO1xuICAgIHQgKz0gJ1wiZVwiOlwiJyArIGUuZSArICdcIiwnLCB0ICs9ICdcImt0eVwiOlwiJyArIGUua3R5ICsgJ1wiLCcsIHQgKz0gJ1wiblwiOlwiJyArIGUubiArICdcIn0nO1xuICB9IGVsc2UgaWYgKGUua3R5ID09PSBcIkVDXCIpIHtcbiAgICBpZiAodHlwZW9mIGUuY3J2ICE9IFwic3RyaW5nXCIgfHwgdHlwZW9mIGUueCAhPSBcInN0cmluZ1wiIHx8IHR5cGVvZiBlLnkgIT0gXCJzdHJpbmdcIilcbiAgICAgIHRocm93IFwid3JvbmcgY3J2LCB4IGFuZCB5IHZhbHVlIGZvciBFQyBrZXlcIjtcbiAgICB0ICs9ICdcImNydlwiOlwiJyArIGUuY3J2ICsgJ1wiLCcsIHQgKz0gJ1wia3R5XCI6XCInICsgZS5rdHkgKyAnXCIsJywgdCArPSAnXCJ4XCI6XCInICsgZS54ICsgJ1wiLCcsIHQgKz0gJ1wieVwiOlwiJyArIGUueSArICdcIn0nO1xuICB9IGVsc2UgaWYgKGUua3R5ID09PSBcIm9jdFwiKSB7XG4gICAgaWYgKHR5cGVvZiBlLmsgIT0gXCJzdHJpbmdcIilcbiAgICAgIHRocm93IFwid3JvbmcgayB2YWx1ZSBmb3Igb2N0KHN5bW1ldHJpYykga2V5XCI7XG4gICAgdCArPSAnXCJrdHlcIjpcIicgKyBlLmt0eSArICdcIiwnLCB0ICs9ICdcImtcIjpcIicgKyBlLmsgKyAnXCJ9JztcbiAgfVxuICB2YXIgciA9IFBlKHQpLCBpID0gYS5jcnlwdG8uVXRpbC5oYXNoSGV4KHIsIFwic2hhMjU2XCIpLCBzID0gYWUoaSk7XG4gIHJldHVybiBzO1xufTtcbmEuandzLkludERhdGUgPSB7fTtcbmEuandzLkludERhdGUuZ2V0ID0gZnVuY3Rpb24oZSkge1xuICB2YXIgdCA9IGEuandzLkludERhdGUsIHIgPSB0LmdldE5vdywgaSA9IHQuZ2V0WnVsdTtcbiAgaWYgKGUgPT0gXCJub3dcIilcbiAgICByZXR1cm4gcigpO1xuICBpZiAoZSA9PSBcIm5vdyArIDFob3VyXCIpXG4gICAgcmV0dXJuIHIoKSArIDYwICogNjA7XG4gIGlmIChlID09IFwibm93ICsgMWRheVwiKVxuICAgIHJldHVybiByKCkgKyA2MCAqIDYwICogMjQ7XG4gIGlmIChlID09IFwibm93ICsgMW1vbnRoXCIpXG4gICAgcmV0dXJuIHIoKSArIDYwICogNjAgKiAyNCAqIDMwO1xuICBpZiAoZSA9PSBcIm5vdyArIDF5ZWFyXCIpXG4gICAgcmV0dXJuIHIoKSArIDYwICogNjAgKiAyNCAqIDM2NTtcbiAgaWYgKGUubWF0Y2goL1okLykpXG4gICAgcmV0dXJuIGkoZSk7XG4gIGlmIChlLm1hdGNoKC9eWzAtOV0rJC8pKVxuICAgIHJldHVybiBwYXJzZUludChlKTtcbiAgdGhyb3cgXCJ1bnN1cHBvcnRlZCBmb3JtYXQ6IFwiICsgZTtcbn07XG5hLmp3cy5JbnREYXRlLmdldFp1bHUgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBnbihlKTtcbn07XG5hLmp3cy5JbnREYXRlLmdldE5vdyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZSA9IH5+KC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIC8gMWUzKTtcbiAgcmV0dXJuIGU7XG59O1xuYS5qd3MuSW50RGF0ZS5pbnREYXRlMlVUQ1N0cmluZyA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBuZXcgRGF0ZShlICogMWUzKTtcbiAgcmV0dXJuIHQudG9VVENTdHJpbmcoKTtcbn07XG5hLmp3cy5JbnREYXRlLmludERhdGUyWnVsdSA9IGZ1bmN0aW9uKGUpIHtcbiAgdmFyIHQgPSBuZXcgRGF0ZShlICogMWUzKSwgciA9IChcIjAwMDBcIiArIHQuZ2V0VVRDRnVsbFllYXIoKSkuc2xpY2UoLTQpLCBpID0gKFwiMDBcIiArICh0LmdldFVUQ01vbnRoKCkgKyAxKSkuc2xpY2UoLTIpLCBzID0gKFwiMDBcIiArIHQuZ2V0VVRDRGF0ZSgpKS5zbGljZSgtMiksIG4gPSAoXCIwMFwiICsgdC5nZXRVVENIb3VycygpKS5zbGljZSgtMiksIGggPSAoXCIwMFwiICsgdC5nZXRVVENNaW51dGVzKCkpLnNsaWNlKC0yKSwgdSA9IChcIjAwXCIgKyB0LmdldFVUQ1NlY29uZHMoKSkuc2xpY2UoLTIpO1xuICByZXR1cm4gciArIGkgKyBzICsgbiArIGggKyB1ICsgXCJaXCI7XG59O1xuKHR5cGVvZiBhID4gXCJ1XCIgfHwgIWEpICYmIChhID0ge30pO1xuKHR5cGVvZiBhLmp3cyA+IFwidVwiIHx8ICFhLmp3cykgJiYgKGEuandzID0ge30pO1xuYS5qd3MuSldTSlMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBhLCB0ID0gZS5qd3MsIHIgPSB0LkpXUywgaSA9IHIucmVhZFNhZmVKU09OU3RyaW5nO1xuICB0aGlzLmFIZWFkZXIgPSBbXSwgdGhpcy5zUGF5bG9hZCA9IFwiXCIsIHRoaXMuYVNpZ25hdHVyZSA9IFtdLCB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmFIZWFkZXIgPSBbXSwgdGhpcy5zUGF5bG9hZCA9IHZvaWQgMCwgdGhpcy5hU2lnbmF0dXJlID0gW107XG4gIH0sIHRoaXMuaW5pdFdpdGhKV1MgPSBmdW5jdGlvbihzKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gICAgdmFyIG4gPSBzLnNwbGl0KFwiLlwiKTtcbiAgICBpZiAobi5sZW5ndGggIT0gMylcbiAgICAgIHRocm93IFwibWFsZm9ybWVkIGlucHV0IEpXU1wiO1xuICAgIHRoaXMuYUhlYWRlci5wdXNoKG5bMF0pLCB0aGlzLnNQYXlsb2FkID0gblsxXSwgdGhpcy5hU2lnbmF0dXJlLnB1c2goblsyXSk7XG4gIH0sIHRoaXMuYWRkU2lnbmF0dXJlID0gZnVuY3Rpb24ocywgbiwgaCwgdSkge1xuICAgIGlmICh0aGlzLnNQYXlsb2FkID09PSB2b2lkIDAgfHwgdGhpcy5zUGF5bG9hZCA9PT0gbnVsbClcbiAgICAgIHRocm93IFwidGhlcmUncyBubyBKU09OLUpTIHNpZ25hdHVyZSB0byBhZGQuXCI7XG4gICAgdmFyIHAgPSB0aGlzLmFIZWFkZXIubGVuZ3RoO1xuICAgIGlmICh0aGlzLmFIZWFkZXIubGVuZ3RoICE9IHRoaXMuYVNpZ25hdHVyZS5sZW5ndGgpXG4gICAgICB0aHJvdyBcImFIZWFkZXIubGVuZ3RoICE9IGFTaWduYXR1cmUubGVuZ3RoXCI7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBjID0gYS5qd3MuSldTLnNpZ24ocywgbiwgdGhpcy5zUGF5bG9hZCwgaCwgdSksIHkgPSBjLnNwbGl0KFwiLlwiKSwgdiA9IHlbMF0sIG8gPSB5WzJdO1xuICAgICAgdGhpcy5hSGVhZGVyLnB1c2goeVswXSksIHRoaXMuYVNpZ25hdHVyZS5wdXNoKHlbMl0pO1xuICAgIH0gY2F0Y2ggKGwpIHtcbiAgICAgIHRocm93IHRoaXMuYUhlYWRlci5sZW5ndGggPiBwICYmIHRoaXMuYUhlYWRlci5wb3AoKSwgdGhpcy5hU2lnbmF0dXJlLmxlbmd0aCA+IHAgJiYgdGhpcy5hU2lnbmF0dXJlLnBvcCgpLCBcImFkZFNpZ25hdHVyZSBmYWlsZWQ6IFwiICsgbDtcbiAgICB9XG4gIH0sIHRoaXMudmVyaWZ5QWxsID0gZnVuY3Rpb24ocykge1xuICAgIGlmICh0aGlzLmFIZWFkZXIubGVuZ3RoICE9PSBzLmxlbmd0aCB8fCB0aGlzLmFTaWduYXR1cmUubGVuZ3RoICE9PSBzLmxlbmd0aClcbiAgICAgIHJldHVybiAhMTtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IHMubGVuZ3RoOyBuKyspIHtcbiAgICAgIHZhciBoID0gc1tuXTtcbiAgICAgIGlmIChoLmxlbmd0aCAhPT0gMilcbiAgICAgICAgcmV0dXJuICExO1xuICAgICAgdmFyIHUgPSB0aGlzLnZlcmlmeU50aChuLCBoWzBdLCBoWzFdKTtcbiAgICAgIGlmICh1ID09PSAhMSlcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXR1cm4gITA7XG4gIH0sIHRoaXMudmVyaWZ5TnRoID0gZnVuY3Rpb24ocywgbiwgaCkge1xuICAgIGlmICh0aGlzLmFIZWFkZXIubGVuZ3RoIDw9IHMgfHwgdGhpcy5hU2lnbmF0dXJlLmxlbmd0aCA8PSBzKVxuICAgICAgcmV0dXJuICExO1xuICAgIHZhciB1ID0gdGhpcy5hSGVhZGVyW3NdLCBwID0gdGhpcy5hU2lnbmF0dXJlW3NdLCBjID0gdSArIFwiLlwiICsgdGhpcy5zUGF5bG9hZCArIFwiLlwiICsgcCwgeSA9ICExO1xuICAgIHRyeSB7XG4gICAgICB5ID0gci52ZXJpZnkoYywgbiwgaCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiB5O1xuICB9LCB0aGlzLnJlYWRKV1NKUyA9IGZ1bmN0aW9uKHMpIHtcbiAgICBpZiAodHlwZW9mIHMgPT0gXCJzdHJpbmdcIikge1xuICAgICAgdmFyIG4gPSBpKHMpO1xuICAgICAgaWYgKG4gPT0gbnVsbClcbiAgICAgICAgdGhyb3cgXCJhcmd1bWVudCBpcyBub3Qgc2FmZSBKU09OIG9iamVjdCBzdHJpbmdcIjtcbiAgICAgIHRoaXMuYUhlYWRlciA9IG4uaGVhZGVycywgdGhpcy5zUGF5bG9hZCA9IG4ucGF5bG9hZCwgdGhpcy5hU2lnbmF0dXJlID0gbi5zaWduYXR1cmVzO1xuICAgIH0gZWxzZVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHMuaGVhZGVycy5sZW5ndGggPiAwKVxuICAgICAgICAgIHRoaXMuYUhlYWRlciA9IHMuaGVhZGVycztcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IFwibWFsZm9ybWVkIGhlYWRlclwiO1xuICAgICAgICBpZiAodHlwZW9mIHMucGF5bG9hZCA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgIHRoaXMuc1BheWxvYWQgPSBzLnBheWxvYWQ7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aHJvdyBcIm1hbGZvcm1lZCBzaWduYXR1cmVzXCI7XG4gICAgICAgIGlmIChzLnNpZ25hdHVyZXMubGVuZ3RoID4gMClcbiAgICAgICAgICB0aGlzLmFTaWduYXR1cmUgPSBzLnNpZ25hdHVyZXM7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aHJvdyBcIm1hbGZvcm1lZCBzaWduYXR1cmVzXCI7XG4gICAgICB9IGNhdGNoIChoKSB7XG4gICAgICAgIHRocm93IFwibWFsZm9ybWVkIEpXUy1KUyBKU09OIG9iamVjdDogXCIgKyBoO1xuICAgICAgfVxuICB9LCB0aGlzLmdldEpTT04gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyBoZWFkZXJzOiB0aGlzLmFIZWFkZXIsIHBheWxvYWQ6IHRoaXMuc1BheWxvYWQsIHNpZ25hdHVyZXM6IHRoaXMuYVNpZ25hdHVyZSB9O1xuICB9LCB0aGlzLmlzRW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hSGVhZGVyLmxlbmd0aCA9PSAwID8gMSA6IDA7XG4gIH07XG59O1xuYS5jcnlwdG8uRUNEU0E7XG5hLmNyeXB0by5EU0E7XG5hLmNyeXB0by5TaWduYXR1cmU7XG5hLmNyeXB0by5NZXNzYWdlRGlnZXN0O1xuYS5jcnlwdG8uTWFjO1xudmFyIHduID0gaywgRm4gPSB3ZSwgYm4gPSBhO1xuYS5jcnlwdG87XG5hLmFzbjE7XG5hLmp3cztcbmEubGFuZztcbmNvbnN0IEFuID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoLyogQF9fUFVSRV9fICovIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgS0VZVVRJTDogd24sXG4gIEtKVVI6IGJuLFxuICBiNjR1dG91dGY4OiBGblxufSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pKTtcbmV4cG9ydCB7XG4gIEFuIGFzIGpcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@kinde/jwt-validator/dist/jsrsasign-B2gZIJhY.js\n");

/***/ }),

/***/ "(action-browser)/./node_modules/@kinde/jwt-validator/dist/jwt-validator.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@kinde/jwt-validator/dist/jwt-validator.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateToken: () => (/* binding */ v)\n/* harmony export */ });\nconst d = /* @__PURE__ */ new Map();\nfunction b() {\n  return typeof window < \"u\" ? window.crypto : globalThis.crypto;\n}\nasync function A(e) {\n  let t = 0;\n  for (; t < 3; ) {\n    const n = new AbortController(), a = setTimeout(() => n.abort(), 5e3);\n    try {\n      const o = await fetch(`${e}/.well-known/jwks.json`, {\n        signal: n.signal\n      });\n      if (clearTimeout(a), !o.ok)\n        throw new Error(\n          `Failed to fetch JWKS: ${o.status} ${o.statusText}`\n        );\n      return await o.json();\n    } catch (o) {\n      t++, console.error(`Attempt ${t} - Error fetching JWKS:`, o);\n    }\n  }\n  throw new Error(\"Failed to fetch JWKS after multiple retries\");\n}\nasync function S(e, r, t) {\n  t && d.delete(r);\n  let n = d.get(r);\n  n || (n = await A(r), d.set(r, n));\n  try {\n    return await E(e, JSON.stringify(n)), { valid: !0, message: \"Token is valid\" };\n  } catch (a) {\n    return t ? {\n      valid: !1,\n      message: a instanceof Error ? a.message : \"Unknown Error\"\n    } : S(e, r, !0);\n  }\n}\nasync function E(e, r) {\n  const [t, n, a] = e.split(\".\"), k = JSON.parse(atob(t)).kid, i = J(r, k);\n  if (!i || i.kty !== \"RSA\" || !i.n || !i.e || i.use !== \"sig\")\n    throw new Error(\"Invalid JWK RSA key\");\n  const c = b();\n  if (c != null && c.subtle) {\n    const l = m(i.n), u = m(i.e), f = {\n      name: \"RSASSA-PKCS1-v1_5\",\n      hash: { name: \"SHA-256\" }\n    };\n    try {\n      const s = {\n        kty: \"RSA\",\n        n: p(l),\n        e: p(u),\n        alg: \"RS256\"\n      }, w = await c.subtle.importKey(\n        \"jwk\",\n        s,\n        f,\n        !0,\n        [\"verify\"]\n      ), h = t + \".\" + n, g = j(a), y = await c.subtle.verify(\n        f,\n        w,\n        g,\n        new TextEncoder().encode(h)\n      );\n      if (!y)\n        throw new Error(\"Signature verification failed\");\n      return y;\n    } catch (s) {\n      throw s;\n    }\n  } else {\n    const { KJUR: l, KEYUTIL: u, b64utoutf8: f } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@kinde\").then(__webpack_require__.bind(__webpack_require__, /*! ./jsrsasign-B2gZIJhY.js */ \"(action-browser)/./node_modules/@kinde/jwt-validator/dist/jsrsasign-B2gZIJhY.js\")).then((g) => g.j), s = JSON.parse(f(t));\n    if (s.alg !== \"RS256\")\n      throw new Error(\"Unsupported signature algorithm: \" + s);\n    const w = u.getKey(i);\n    if (!l.jws.JWS.verifyJWT(\n      e,\n      w,\n      { alg: [\"RS256\"] }\n      // Adjust if using a different algorithm\n    ))\n      throw new Error(\"Signature verification failed\");\n    return !0;\n  }\n}\nfunction p(e) {\n  let r = e.toString(16);\n  r.length % 2 !== 0 && (r = \"0\" + r);\n  const t = new Uint8Array(\n    r.match(/.{1,2}/g).map((a) => parseInt(a, 16))\n  );\n  return btoa(String.fromCharCode.apply(null, Array.from(t))).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n}\nfunction J(e, r) {\n  const t = JSON.parse(e);\n  for (const n of t.keys)\n    if (n.kid === r)\n      return n;\n  throw new Error(`JWK not found${r ? ` for kid ${r}` : \"\"}`);\n}\nfunction m(e) {\n  e = e.replace(/[^A-Za-z0-9\\-_]/g, \"\"), e += Array.from(\n    { length: (4 - e.length % 4) % 4 },\n    () => \"=\"\n  ).join(\"\");\n  const r = e.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  let t;\n  try {\n    t = atob(r);\n  } catch (o) {\n    throw new Error(\"Invalid Base64 string: \" + o.message);\n  }\n  const n = Array.from(\n    t,\n    (o) => o.charCodeAt(0).toString(16).padStart(2, \"0\")\n  ).join(\"\");\n  if (n.toLowerCase() === \"ffffffffffffffff\" || n.toLowerCase() === \"7ff0000000000000\")\n    throw new Error(\"Decoded value represents NaN or Infinity\");\n  const a = n.replace(/^0+/, \"\");\n  return BigInt(\"0x\" + a || 0);\n}\nfunction j(e) {\n  return Uint8Array.from(\n    atob(e.replace(/-/g, \"+\").replace(/_/g, \"/\")),\n    (r) => r.charCodeAt(0)\n  );\n}\nconst v = async (e) => e.token ? e.domain ? e.token.split(\".\").length !== 3 ? { valid: !1, message: \"Invalid JWT format\" } : await S(e.token, e.domain) : { valid: !1, message: \"Domain is required\" } : { valid: !1, message: \"Token is required\" };\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9Aa2luZGUvand0LXZhbGlkYXRvci9kaXN0L2p3dC12YWxpZGF0b3IuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsT0FBTztBQUNoQjtBQUNBO0FBQ0EsK0JBQStCLEVBQUU7QUFDakM7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLG1DQUFtQyxVQUFVLEVBQUUsYUFBYTtBQUM1RDtBQUNBO0FBQ0EsTUFBTTtBQUNOLG9DQUFvQyxHQUFHO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSixZQUFZLHFDQUFxQyxRQUFRLG1PQUFpQztBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLElBQUk7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnQkFBZ0IsRUFBRSxPQUFPO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLE1BQU0sZ0NBQWdDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsQ0FBRztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRiwyQ0FBMkMsaUNBQWlDLDJDQUEyQyxJQUFJO0FBR3pNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZGVudC1hdHRlbmRhbmNlLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BraW5kZS9qd3QtdmFsaWRhdG9yL2Rpc3Qvand0LXZhbGlkYXRvci5qcz82MzYzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuZnVuY3Rpb24gYigpIHtcbiAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgPCBcInVcIiA/IHdpbmRvdy5jcnlwdG8gOiBnbG9iYWxUaGlzLmNyeXB0bztcbn1cbmFzeW5jIGZ1bmN0aW9uIEEoZSkge1xuICBsZXQgdCA9IDA7XG4gIGZvciAoOyB0IDwgMzsgKSB7XG4gICAgY29uc3QgbiA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSwgYSA9IHNldFRpbWVvdXQoKCkgPT4gbi5hYm9ydCgpLCA1ZTMpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvID0gYXdhaXQgZmV0Y2goYCR7ZX0vLndlbGwta25vd24vandrcy5qc29uYCwge1xuICAgICAgICBzaWduYWw6IG4uc2lnbmFsXG4gICAgICB9KTtcbiAgICAgIGlmIChjbGVhclRpbWVvdXQoYSksICFvLm9rKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEZhaWxlZCB0byBmZXRjaCBKV0tTOiAke28uc3RhdHVzfSAke28uc3RhdHVzVGV4dH1gXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gYXdhaXQgby5qc29uKCk7XG4gICAgfSBjYXRjaCAobykge1xuICAgICAgdCsrLCBjb25zb2xlLmVycm9yKGBBdHRlbXB0ICR7dH0gLSBFcnJvciBmZXRjaGluZyBKV0tTOmAsIG8pO1xuICAgIH1cbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggSldLUyBhZnRlciBtdWx0aXBsZSByZXRyaWVzXCIpO1xufVxuYXN5bmMgZnVuY3Rpb24gUyhlLCByLCB0KSB7XG4gIHQgJiYgZC5kZWxldGUocik7XG4gIGxldCBuID0gZC5nZXQocik7XG4gIG4gfHwgKG4gPSBhd2FpdCBBKHIpLCBkLnNldChyLCBuKSk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IEUoZSwgSlNPTi5zdHJpbmdpZnkobikpLCB7IHZhbGlkOiAhMCwgbWVzc2FnZTogXCJUb2tlbiBpcyB2YWxpZFwiIH07XG4gIH0gY2F0Y2ggKGEpIHtcbiAgICByZXR1cm4gdCA/IHtcbiAgICAgIHZhbGlkOiAhMSxcbiAgICAgIG1lc3NhZ2U6IGEgaW5zdGFuY2VvZiBFcnJvciA/IGEubWVzc2FnZSA6IFwiVW5rbm93biBFcnJvclwiXG4gICAgfSA6IFMoZSwgciwgITApO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBFKGUsIHIpIHtcbiAgY29uc3QgW3QsIG4sIGFdID0gZS5zcGxpdChcIi5cIiksIGsgPSBKU09OLnBhcnNlKGF0b2IodCkpLmtpZCwgaSA9IEoociwgayk7XG4gIGlmICghaSB8fCBpLmt0eSAhPT0gXCJSU0FcIiB8fCAhaS5uIHx8ICFpLmUgfHwgaS51c2UgIT09IFwic2lnXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBKV0sgUlNBIGtleVwiKTtcbiAgY29uc3QgYyA9IGIoKTtcbiAgaWYgKGMgIT0gbnVsbCAmJiBjLnN1YnRsZSkge1xuICAgIGNvbnN0IGwgPSBtKGkubiksIHUgPSBtKGkuZSksIGYgPSB7XG4gICAgICBuYW1lOiBcIlJTQVNTQS1QS0NTMS12MV81XCIsXG4gICAgICBoYXNoOiB7IG5hbWU6IFwiU0hBLTI1NlwiIH1cbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzID0ge1xuICAgICAgICBrdHk6IFwiUlNBXCIsXG4gICAgICAgIG46IHAobCksXG4gICAgICAgIGU6IHAodSksXG4gICAgICAgIGFsZzogXCJSUzI1NlwiXG4gICAgICB9LCB3ID0gYXdhaXQgYy5zdWJ0bGUuaW1wb3J0S2V5KFxuICAgICAgICBcImp3a1wiLFxuICAgICAgICBzLFxuICAgICAgICBmLFxuICAgICAgICAhMCxcbiAgICAgICAgW1widmVyaWZ5XCJdXG4gICAgICApLCBoID0gdCArIFwiLlwiICsgbiwgZyA9IGooYSksIHkgPSBhd2FpdCBjLnN1YnRsZS52ZXJpZnkoXG4gICAgICAgIGYsXG4gICAgICAgIHcsXG4gICAgICAgIGcsXG4gICAgICAgIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShoKVxuICAgICAgKTtcbiAgICAgIGlmICgheSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIik7XG4gICAgICByZXR1cm4geTtcbiAgICB9IGNhdGNoIChzKSB7XG4gICAgICB0aHJvdyBzO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7IEtKVVI6IGwsIEtFWVVUSUw6IHUsIGI2NHV0b3V0Zjg6IGYgfSA9IGF3YWl0IGltcG9ydChcIi4vanNyc2FzaWduLUIyZ1pJSmhZLmpzXCIpLnRoZW4oKGcpID0+IGcuaiksIHMgPSBKU09OLnBhcnNlKGYodCkpO1xuICAgIGlmIChzLmFsZyAhPT0gXCJSUzI1NlwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgc2lnbmF0dXJlIGFsZ29yaXRobTogXCIgKyBzKTtcbiAgICBjb25zdCB3ID0gdS5nZXRLZXkoaSk7XG4gICAgaWYgKCFsLmp3cy5KV1MudmVyaWZ5SldUKFxuICAgICAgZSxcbiAgICAgIHcsXG4gICAgICB7IGFsZzogW1wiUlMyNTZcIl0gfVxuICAgICAgLy8gQWRqdXN0IGlmIHVzaW5nIGEgZGlmZmVyZW50IGFsZ29yaXRobVxuICAgICkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZFwiKTtcbiAgICByZXR1cm4gITA7XG4gIH1cbn1cbmZ1bmN0aW9uIHAoZSkge1xuICBsZXQgciA9IGUudG9TdHJpbmcoMTYpO1xuICByLmxlbmd0aCAlIDIgIT09IDAgJiYgKHIgPSBcIjBcIiArIHIpO1xuICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoXG4gICAgci5tYXRjaCgvLnsxLDJ9L2cpLm1hcCgoYSkgPT4gcGFyc2VJbnQoYSwgMTYpKVxuICApO1xuICByZXR1cm4gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIEFycmF5LmZyb20odCkpKS5yZXBsYWNlKC9cXCsvZywgXCItXCIpLnJlcGxhY2UoL1xcLy9nLCBcIl9cIikucmVwbGFjZSgvPSskLywgXCJcIik7XG59XG5mdW5jdGlvbiBKKGUsIHIpIHtcbiAgY29uc3QgdCA9IEpTT04ucGFyc2UoZSk7XG4gIGZvciAoY29uc3QgbiBvZiB0LmtleXMpXG4gICAgaWYgKG4ua2lkID09PSByKVxuICAgICAgcmV0dXJuIG47XG4gIHRocm93IG5ldyBFcnJvcihgSldLIG5vdCBmb3VuZCR7ciA/IGAgZm9yIGtpZCAke3J9YCA6IFwiXCJ9YCk7XG59XG5mdW5jdGlvbiBtKGUpIHtcbiAgZSA9IGUucmVwbGFjZSgvW15BLVphLXowLTlcXC1fXS9nLCBcIlwiKSwgZSArPSBBcnJheS5mcm9tKFxuICAgIHsgbGVuZ3RoOiAoNCAtIGUubGVuZ3RoICUgNCkgJSA0IH0sXG4gICAgKCkgPT4gXCI9XCJcbiAgKS5qb2luKFwiXCIpO1xuICBjb25zdCByID0gZS5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKTtcbiAgbGV0IHQ7XG4gIHRyeSB7XG4gICAgdCA9IGF0b2Iocik7XG4gIH0gY2F0Y2ggKG8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEJhc2U2NCBzdHJpbmc6IFwiICsgby5tZXNzYWdlKTtcbiAgfVxuICBjb25zdCBuID0gQXJyYXkuZnJvbShcbiAgICB0LFxuICAgIChvKSA9PiBvLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKVxuICApLmpvaW4oXCJcIik7XG4gIGlmIChuLnRvTG93ZXJDYXNlKCkgPT09IFwiZmZmZmZmZmZmZmZmZmZmZlwiIHx8IG4udG9Mb3dlckNhc2UoKSA9PT0gXCI3ZmYwMDAwMDAwMDAwMDAwXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRGVjb2RlZCB2YWx1ZSByZXByZXNlbnRzIE5hTiBvciBJbmZpbml0eVwiKTtcbiAgY29uc3QgYSA9IG4ucmVwbGFjZSgvXjArLywgXCJcIik7XG4gIHJldHVybiBCaWdJbnQoXCIweFwiICsgYSB8fCBcIjBcIik7XG59XG5mdW5jdGlvbiBqKGUpIHtcbiAgcmV0dXJuIFVpbnQ4QXJyYXkuZnJvbShcbiAgICBhdG9iKGUucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIikpLFxuICAgIChyKSA9PiByLmNoYXJDb2RlQXQoMClcbiAgKTtcbn1cbmNvbnN0IHYgPSBhc3luYyAoZSkgPT4gZS50b2tlbiA/IGUuZG9tYWluID8gZS50b2tlbi5zcGxpdChcIi5cIikubGVuZ3RoICE9PSAzID8geyB2YWxpZDogITEsIG1lc3NhZ2U6IFwiSW52YWxpZCBKV1QgZm9ybWF0XCIgfSA6IGF3YWl0IFMoZS50b2tlbiwgZS5kb21haW4pIDogeyB2YWxpZDogITEsIG1lc3NhZ2U6IFwiRG9tYWluIGlzIHJlcXVpcmVkXCIgfSA6IHsgdmFsaWQ6ICExLCBtZXNzYWdlOiBcIlRva2VuIGlzIHJlcXVpcmVkXCIgfTtcbmV4cG9ydCB7XG4gIHYgYXMgdmFsaWRhdGVUb2tlblxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/@kinde/jwt-validator/dist/jwt-validator.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@kinde/jwt-validator/dist/jwt-validator.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@kinde/jwt-validator/dist/jwt-validator.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateToken: () => (/* binding */ v)\n/* harmony export */ });\nconst d = /* @__PURE__ */ new Map();\nfunction b() {\n  return typeof window < \"u\" ? window.crypto : globalThis.crypto;\n}\nasync function A(e) {\n  let t = 0;\n  for (; t < 3; ) {\n    const n = new AbortController(), a = setTimeout(() => n.abort(), 5e3);\n    try {\n      const o = await fetch(`${e}/.well-known/jwks.json`, {\n        signal: n.signal\n      });\n      if (clearTimeout(a), !o.ok)\n        throw new Error(\n          `Failed to fetch JWKS: ${o.status} ${o.statusText}`\n        );\n      return await o.json();\n    } catch (o) {\n      t++, console.error(`Attempt ${t} - Error fetching JWKS:`, o);\n    }\n  }\n  throw new Error(\"Failed to fetch JWKS after multiple retries\");\n}\nasync function S(e, r, t) {\n  t && d.delete(r);\n  let n = d.get(r);\n  n || (n = await A(r), d.set(r, n));\n  try {\n    return await E(e, JSON.stringify(n)), { valid: !0, message: \"Token is valid\" };\n  } catch (a) {\n    return t ? {\n      valid: !1,\n      message: a instanceof Error ? a.message : \"Unknown Error\"\n    } : S(e, r, !0);\n  }\n}\nasync function E(e, r) {\n  const [t, n, a] = e.split(\".\"), k = JSON.parse(atob(t)).kid, i = J(r, k);\n  if (!i || i.kty !== \"RSA\" || !i.n || !i.e || i.use !== \"sig\")\n    throw new Error(\"Invalid JWK RSA key\");\n  const c = b();\n  if (c != null && c.subtle) {\n    const l = m(i.n), u = m(i.e), f = {\n      name: \"RSASSA-PKCS1-v1_5\",\n      hash: { name: \"SHA-256\" }\n    };\n    try {\n      const s = {\n        kty: \"RSA\",\n        n: p(l),\n        e: p(u),\n        alg: \"RS256\"\n      }, w = await c.subtle.importKey(\n        \"jwk\",\n        s,\n        f,\n        !0,\n        [\"verify\"]\n      ), h = t + \".\" + n, g = j(a), y = await c.subtle.verify(\n        f,\n        w,\n        g,\n        new TextEncoder().encode(h)\n      );\n      if (!y)\n        throw new Error(\"Signature verification failed\");\n      return y;\n    } catch (s) {\n      throw s;\n    }\n  } else {\n    const { KJUR: l, KEYUTIL: u, b64utoutf8: f } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/@kinde\").then(__webpack_require__.bind(__webpack_require__, /*! ./jsrsasign-B2gZIJhY.js */ \"(rsc)/./node_modules/@kinde/jwt-validator/dist/jsrsasign-B2gZIJhY.js\")).then((g) => g.j), s = JSON.parse(f(t));\n    if (s.alg !== \"RS256\")\n      throw new Error(\"Unsupported signature algorithm: \" + s);\n    const w = u.getKey(i);\n    if (!l.jws.JWS.verifyJWT(\n      e,\n      w,\n      { alg: [\"RS256\"] }\n      // Adjust if using a different algorithm\n    ))\n      throw new Error(\"Signature verification failed\");\n    return !0;\n  }\n}\nfunction p(e) {\n  let r = e.toString(16);\n  r.length % 2 !== 0 && (r = \"0\" + r);\n  const t = new Uint8Array(\n    r.match(/.{1,2}/g).map((a) => parseInt(a, 16))\n  );\n  return btoa(String.fromCharCode.apply(null, Array.from(t))).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n}\nfunction J(e, r) {\n  const t = JSON.parse(e);\n  for (const n of t.keys)\n    if (n.kid === r)\n      return n;\n  throw new Error(`JWK not found${r ? ` for kid ${r}` : \"\"}`);\n}\nfunction m(e) {\n  e = e.replace(/[^A-Za-z0-9\\-_]/g, \"\"), e += Array.from(\n    { length: (4 - e.length % 4) % 4 },\n    () => \"=\"\n  ).join(\"\");\n  const r = e.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  let t;\n  try {\n    t = atob(r);\n  } catch (o) {\n    throw new Error(\"Invalid Base64 string: \" + o.message);\n  }\n  const n = Array.from(\n    t,\n    (o) => o.charCodeAt(0).toString(16).padStart(2, \"0\")\n  ).join(\"\");\n  if (n.toLowerCase() === \"ffffffffffffffff\" || n.toLowerCase() === \"7ff0000000000000\")\n    throw new Error(\"Decoded value represents NaN or Infinity\");\n  const a = n.replace(/^0+/, \"\");\n  return BigInt(\"0x\" + a || 0);\n}\nfunction j(e) {\n  return Uint8Array.from(\n    atob(e.replace(/-/g, \"+\").replace(/_/g, \"/\")),\n    (r) => r.charCodeAt(0)\n  );\n}\nconst v = async (e) => e.token ? e.domain ? e.token.split(\".\").length !== 3 ? { valid: !1, message: \"Invalid JWT format\" } : await S(e.token, e.domain) : { valid: !1, message: \"Domain is required\" } : { valid: !1, message: \"Token is required\" };\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGtpbmRlL2p3dC12YWxpZGF0b3IvZGlzdC9qd3QtdmFsaWRhdG9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLE9BQU87QUFDaEI7QUFDQTtBQUNBLCtCQUErQixFQUFFO0FBQ2pDO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxtQ0FBbUMsVUFBVSxFQUFFLGFBQWE7QUFDNUQ7QUFDQTtBQUNBLE1BQU07QUFDTixvQ0FBb0MsR0FBRztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUMsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSxxQ0FBcUMsUUFBUSx3TkFBaUM7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxJQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0JBQWdCLEVBQUUsT0FBTztBQUMzRDtBQUNBO0FBQ0E7QUFDQSxNQUFNLGdDQUFnQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLENBQUc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0YsMkNBQTJDLGlDQUFpQywyQ0FBMkMsSUFBSTtBQUd6TSIsInNvdXJjZXMiOlsid2VicGFjazovL3N0dWRlbnQtYXR0ZW5kYW5jZS1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9Aa2luZGUvand0LXZhbGlkYXRvci9kaXN0L2p3dC12YWxpZGF0b3IuanM/OWU4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbmZ1bmN0aW9uIGIoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93IDwgXCJ1XCIgPyB3aW5kb3cuY3J5cHRvIDogZ2xvYmFsVGhpcy5jcnlwdG87XG59XG5hc3luYyBmdW5jdGlvbiBBKGUpIHtcbiAgbGV0IHQgPSAwO1xuICBmb3IgKDsgdCA8IDM7ICkge1xuICAgIGNvbnN0IG4gPSBuZXcgQWJvcnRDb250cm9sbGVyKCksIGEgPSBzZXRUaW1lb3V0KCgpID0+IG4uYWJvcnQoKSwgNWUzKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbyA9IGF3YWl0IGZldGNoKGAke2V9Ly53ZWxsLWtub3duL2p3a3MuanNvbmAsIHtcbiAgICAgICAgc2lnbmFsOiBuLnNpZ25hbFxuICAgICAgfSk7XG4gICAgICBpZiAoY2xlYXJUaW1lb3V0KGEpLCAhby5vaylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBGYWlsZWQgdG8gZmV0Y2ggSldLUzogJHtvLnN0YXR1c30gJHtvLnN0YXR1c1RleHR9YFxuICAgICAgICApO1xuICAgICAgcmV0dXJuIGF3YWl0IG8uanNvbigpO1xuICAgIH0gY2F0Y2ggKG8pIHtcbiAgICAgIHQrKywgY29uc29sZS5lcnJvcihgQXR0ZW1wdCAke3R9IC0gRXJyb3IgZmV0Y2hpbmcgSldLUzpgLCBvKTtcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIEpXS1MgYWZ0ZXIgbXVsdGlwbGUgcmV0cmllc1wiKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIFMoZSwgciwgdCkge1xuICB0ICYmIGQuZGVsZXRlKHIpO1xuICBsZXQgbiA9IGQuZ2V0KHIpO1xuICBuIHx8IChuID0gYXdhaXQgQShyKSwgZC5zZXQociwgbikpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBFKGUsIEpTT04uc3RyaW5naWZ5KG4pKSwgeyB2YWxpZDogITAsIG1lc3NhZ2U6IFwiVG9rZW4gaXMgdmFsaWRcIiB9O1xuICB9IGNhdGNoIChhKSB7XG4gICAgcmV0dXJuIHQgPyB7XG4gICAgICB2YWxpZDogITEsXG4gICAgICBtZXNzYWdlOiBhIGluc3RhbmNlb2YgRXJyb3IgPyBhLm1lc3NhZ2UgOiBcIlVua25vd24gRXJyb3JcIlxuICAgIH0gOiBTKGUsIHIsICEwKTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gRShlLCByKSB7XG4gIGNvbnN0IFt0LCBuLCBhXSA9IGUuc3BsaXQoXCIuXCIpLCBrID0gSlNPTi5wYXJzZShhdG9iKHQpKS5raWQsIGkgPSBKKHIsIGspO1xuICBpZiAoIWkgfHwgaS5rdHkgIT09IFwiUlNBXCIgfHwgIWkubiB8fCAhaS5lIHx8IGkudXNlICE9PSBcInNpZ1wiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSldLIFJTQSBrZXlcIik7XG4gIGNvbnN0IGMgPSBiKCk7XG4gIGlmIChjICE9IG51bGwgJiYgYy5zdWJ0bGUpIHtcbiAgICBjb25zdCBsID0gbShpLm4pLCB1ID0gbShpLmUpLCBmID0ge1xuICAgICAgbmFtZTogXCJSU0FTU0EtUEtDUzEtdjFfNVwiLFxuICAgICAgaGFzaDogeyBuYW1lOiBcIlNIQS0yNTZcIiB9XG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAga3R5OiBcIlJTQVwiLFxuICAgICAgICBuOiBwKGwpLFxuICAgICAgICBlOiBwKHUpLFxuICAgICAgICBhbGc6IFwiUlMyNTZcIlxuICAgICAgfSwgdyA9IGF3YWl0IGMuc3VidGxlLmltcG9ydEtleShcbiAgICAgICAgXCJqd2tcIixcbiAgICAgICAgcyxcbiAgICAgICAgZixcbiAgICAgICAgITAsXG4gICAgICAgIFtcInZlcmlmeVwiXVxuICAgICAgKSwgaCA9IHQgKyBcIi5cIiArIG4sIGcgPSBqKGEpLCB5ID0gYXdhaXQgYy5zdWJ0bGUudmVyaWZ5KFxuICAgICAgICBmLFxuICAgICAgICB3LFxuICAgICAgICBnLFxuICAgICAgICBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoaClcbiAgICAgICk7XG4gICAgICBpZiAoIXkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkXCIpO1xuICAgICAgcmV0dXJuIHk7XG4gICAgfSBjYXRjaCAocykge1xuICAgICAgdGhyb3cgcztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgeyBLSlVSOiBsLCBLRVlVVElMOiB1LCBiNjR1dG91dGY4OiBmIH0gPSBhd2FpdCBpbXBvcnQoXCIuL2pzcnNhc2lnbi1CMmdaSUpoWS5qc1wiKS50aGVuKChnKSA9PiBnLmopLCBzID0gSlNPTi5wYXJzZShmKHQpKTtcbiAgICBpZiAocy5hbGcgIT09IFwiUlMyNTZcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHNpZ25hdHVyZSBhbGdvcml0aG06IFwiICsgcyk7XG4gICAgY29uc3QgdyA9IHUuZ2V0S2V5KGkpO1xuICAgIGlmICghbC5qd3MuSldTLnZlcmlmeUpXVChcbiAgICAgIGUsXG4gICAgICB3LFxuICAgICAgeyBhbGc6IFtcIlJTMjU2XCJdIH1cbiAgICAgIC8vIEFkanVzdCBpZiB1c2luZyBhIGRpZmZlcmVudCBhbGdvcml0aG1cbiAgICApKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIik7XG4gICAgcmV0dXJuICEwO1xuICB9XG59XG5mdW5jdGlvbiBwKGUpIHtcbiAgbGV0IHIgPSBlLnRvU3RyaW5nKDE2KTtcbiAgci5sZW5ndGggJSAyICE9PSAwICYmIChyID0gXCIwXCIgKyByKTtcbiAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KFxuICAgIHIubWF0Y2goLy57MSwyfS9nKS5tYXAoKGEpID0+IHBhcnNlSW50KGEsIDE2KSlcbiAgKTtcbiAgcmV0dXJuIGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBBcnJheS5mcm9tKHQpKSkucmVwbGFjZSgvXFwrL2csIFwiLVwiKS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpLnJlcGxhY2UoLz0rJC8sIFwiXCIpO1xufVxuZnVuY3Rpb24gSihlLCByKSB7XG4gIGNvbnN0IHQgPSBKU09OLnBhcnNlKGUpO1xuICBmb3IgKGNvbnN0IG4gb2YgdC5rZXlzKVxuICAgIGlmIChuLmtpZCA9PT0gcilcbiAgICAgIHJldHVybiBuO1xuICB0aHJvdyBuZXcgRXJyb3IoYEpXSyBub3QgZm91bmQke3IgPyBgIGZvciBraWQgJHtyfWAgOiBcIlwifWApO1xufVxuZnVuY3Rpb24gbShlKSB7XG4gIGUgPSBlLnJlcGxhY2UoL1teQS1aYS16MC05XFwtX10vZywgXCJcIiksIGUgKz0gQXJyYXkuZnJvbShcbiAgICB7IGxlbmd0aDogKDQgLSBlLmxlbmd0aCAlIDQpICUgNCB9LFxuICAgICgpID0+IFwiPVwiXG4gICkuam9pbihcIlwiKTtcbiAgY29uc3QgciA9IGUucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIik7XG4gIGxldCB0O1xuICB0cnkge1xuICAgIHQgPSBhdG9iKHIpO1xuICB9IGNhdGNoIChvKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBCYXNlNjQgc3RyaW5nOiBcIiArIG8ubWVzc2FnZSk7XG4gIH1cbiAgY29uc3QgbiA9IEFycmF5LmZyb20oXG4gICAgdCxcbiAgICAobykgPT4gby5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIilcbiAgKS5qb2luKFwiXCIpO1xuICBpZiAobi50b0xvd2VyQ2FzZSgpID09PSBcImZmZmZmZmZmZmZmZmZmZmZcIiB8fCBuLnRvTG93ZXJDYXNlKCkgPT09IFwiN2ZmMDAwMDAwMDAwMDAwMFwiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkRlY29kZWQgdmFsdWUgcmVwcmVzZW50cyBOYU4gb3IgSW5maW5pdHlcIik7XG4gIGNvbnN0IGEgPSBuLnJlcGxhY2UoL14wKy8sIFwiXCIpO1xuICByZXR1cm4gQmlnSW50KFwiMHhcIiArIGEgfHwgXCIwXCIpO1xufVxuZnVuY3Rpb24gaihlKSB7XG4gIHJldHVybiBVaW50OEFycmF5LmZyb20oXG4gICAgYXRvYihlLnJlcGxhY2UoLy0vZywgXCIrXCIpLnJlcGxhY2UoL18vZywgXCIvXCIpKSxcbiAgICAocikgPT4gci5jaGFyQ29kZUF0KDApXG4gICk7XG59XG5jb25zdCB2ID0gYXN5bmMgKGUpID0+IGUudG9rZW4gPyBlLmRvbWFpbiA/IGUudG9rZW4uc3BsaXQoXCIuXCIpLmxlbmd0aCAhPT0gMyA/IHsgdmFsaWQ6ICExLCBtZXNzYWdlOiBcIkludmFsaWQgSldUIGZvcm1hdFwiIH0gOiBhd2FpdCBTKGUudG9rZW4sIGUuZG9tYWluKSA6IHsgdmFsaWQ6ICExLCBtZXNzYWdlOiBcIkRvbWFpbiBpcyByZXF1aXJlZFwiIH0gOiB7IHZhbGlkOiAhMSwgbWVzc2FnZTogXCJUb2tlbiBpcyByZXF1aXJlZFwiIH07XG5leHBvcnQge1xuICB2IGFzIHZhbGlkYXRlVG9rZW5cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@kinde/jwt-validator/dist/jwt-validator.js\n");

/***/ })

};
;